function uiUploader(a){"use strict";function b(a){for(var b=0;b<a.length;b++)i.files.push(a[b])}function c(){return i.files}function d(a){i.options=a;for(var b=0;b<i.files.length&&i.activeUploads!=i.options.concurrency;b++)i.files[b].active||h(i.files[b],i.options.url)}function e(a){i.files.splice(i.files.indexOf(a),1)}function f(){i.files.splice(0,i.files.length)}function g(a){var b=["n/a","bytes","KiB","MiB","GiB","TB","PB","EiB","ZiB","YiB"],c=+Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,c)).toFixed(c?1:0)+" "+b[isNaN(a)?0:c+1]}function h(a,b){var c,e,f,h="",j="file";if(i.activeUploads+=1,a.active=!0,c=new window.XMLHttpRequest,e=new window.FormData,c.open("POST",b),c.upload.onloadstart=function(){},c.upload.onprogress=function(b){b.lengthComputable&&(a.loaded=b.loaded,a.humanSize=g(b.loaded),i.options.onProgress(a))},c.onload=function(){i.activeUploads-=1,d(i.options),i.options.onCompleted(a,c.responseText)},c.onerror=function(){},h)for(f in h)h.hasOwnProperty(f)&&e.append(f,h[f]);return e.append(j,a,a.name),c.send(e),c}var i=this;return i.files=[],i.options={},i.activeUploads=0,a.info("uiUploader loaded"),{addFiles:b,getFiles:c,files:i.files,startUpload:d,removeFile:e,removeAll:f}}!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=_.type(a);return"function"===c||_.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(_.isFunction(b))return _.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return _.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ha.test(b))return _.filter(b,a,c);b=_.filter(b,a)}return _.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=oa[a]={};return _.each(a.match(na)||[],function(a,c){b[c]=!0}),b}function g(){Z.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),_.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=_.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ua,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ta.test(c)?_.parseJSON(c):c}catch(e){}sa.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement}catch(a){}}function m(a,b){return _.nodeName(a,"table")&&_.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Ka.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;d>c;c++)ra.set(a[c],"globalEval",!b||ra.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(ra.hasData(a)&&(f=ra.access(a),g=ra.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)_.event.add(b,e,j[e][c])}sa.hasData(a)&&(h=sa.access(a),i=_.extend({},h),sa.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&_.nodeName(a,b)?_.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ya.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function t(b,c){var d,e=_(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:_.css(e[0],"display");return e.detach(),f}function u(a){var b=Z,c=Oa[a];return c||(c=t(a,b),"none"!==c&&c||(Na=(Na||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Na[0].contentDocument,b.write(),b.close(),c=t(a,b),Na.detach()),Oa[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||_.contains(a.ownerDocument,a)||(g=_.style(a,b)),Qa.test(g)&&Pa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Xa.length;e--;)if(b=Xa[e]+c,b in a)return b;return d}function y(a,b,c){var d=Ta.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=_.css(a,c+wa[f],!0,e)),d?("content"===c&&(g-=_.css(a,"padding"+wa[f],!0,e)),"margin"!==c&&(g-=_.css(a,"border"+wa[f]+"Width",!0,e))):(g+=_.css(a,"padding"+wa[f],!0,e),"padding"!==c&&(g+=_.css(a,"border"+wa[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g="border-box"===_.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=v(a,b,f),(0>e||null==e)&&(e=a.style[b]),Qa.test(e))return e;d=g&&(Y.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ra.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&xa(d)&&(f[g]=ra.access(d,"olddisplay",u(d.nodeName)))):(e=xa(d),"none"===c&&e||ra.set(d,"olddisplay",e?c:_.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Ya=void 0}),Ya=_.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=wa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(cb[b]||[]).concat(cb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&xa(a),p=ra.get(a,"fxshow");c.queue||(h=_._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,_.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=_.css(a,"display"),k="none"===j?ra.get(a,"olddisplay")||u(a.nodeName):j,"inline"===k&&"none"===_.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],$a.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||_.style(a,d)}else j=void 0;if(_.isEmptyObject(m))"inline"===("none"===j?u(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ra.access(a,"fxshow",{}),f&&(p.hidden=!o),o?_(a).show():l.done(function(){_(a).hide()}),l.done(function(){var b;ra.remove(a,"fxshow");for(b in m)_.style(a,b,m[b])});for(d in m)g=F(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=_.camelCase(c),e=b[d],f=a[c],_.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=_.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=bb.length,h=_.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Ya||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ya||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=_.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);g>f;f++)if(d=bb[f].call(j,a,k,j.opts))return d;return _.map(k,F,j),_.isFunction(j.opts.start)&&j.opts.start.call(a,j),_.fx.timer(_.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(na)||[];if(_.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,_.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===tb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=_.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&_.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(_.isArray(b))_.each(b,function(b,e){c||yb.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==_.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return _.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y={},Z=a.document,$="2.1.4",_=function(a,b){return new _.fn.init(a,b)},aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ba=/^-ms-/,ca=/-([\da-z])/gi,da=function(a,b){return b.toUpperCase()};_.fn=_.prototype={jquery:$,constructor:_,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=_.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return _.each(this,a,b)},map:function(a){return this.pushStack(_.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},_.extend=_.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||_.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(_.isPlainObject(d)||(e=_.isArray(d)))?(e?(e=!1,f=c&&_.isArray(c)?c:[]):f=c&&_.isPlainObject(c)?c:{},g[b]=_.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},_.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===_.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!_.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==_.type(a)||a.nodeType||_.isWindow(a)?!1:a.constructor&&!X.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=_.trim(a),a&&(1===a.indexOf("use strict")?(b=Z.createElement("script"),b.text=a,Z.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ba,"ms-").replace(ca,da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(aa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?_.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),_.isFunction(a)?(d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||_.guid++,e):void 0},now:Date.now,support:Y}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var ea=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),!(!v.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=ja.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,
v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);_.find=ea,_.expr=ea.selectors,_.expr[":"]=_.expr.pseudos,_.unique=ea.uniqueSort,_.text=ea.getText,_.isXMLDoc=ea.isXML,_.contains=ea.contains;var fa=_.expr.match.needsContext,ga=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ha=/^.[^:#\[\.,]*$/;_.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?_.find.matchesSelector(d,a)?[d]:[]:_.find.matches(a,_.grep(b,function(a){return 1===a.nodeType}))},_.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(_(a).filter(function(){for(b=0;c>b;b++)if(_.contains(e[b],this))return!0}));for(b=0;c>b;b++)_.find(a,e[b],d);return d=this.pushStack(c>1?_.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fa.test(a)?_(a):a||[],!1).length}});var ia,ja=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ka=_.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ja.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ia).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Z,!0)),ga.test(c[1])&&_.isPlainObject(b))for(c in b)_.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=Z.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):_.isFunction(a)?"undefined"!=typeof ia.ready?ia.ready(a):a(_):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),_.makeArray(a,this))};ka.prototype=_.fn,ia=_(Z);var la=/^(?:parents|prev(?:Until|All))/,ma={children:!0,contents:!0,next:!0,prev:!0};_.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&_(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),_.fn.extend({has:function(a){var b=_(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(_.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fa.test(a)||"string"!=typeof a?_(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&_.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?_.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(_(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(_.unique(_.merge(this.get(),_(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),_.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return _.dir(a,"parentNode")},parentsUntil:function(a,b,c){return _.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return _.dir(a,"nextSibling")},prevAll:function(a){return _.dir(a,"previousSibling")},nextUntil:function(a,b,c){return _.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return _.dir(a,"previousSibling",c)},siblings:function(a){return _.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return _.sibling(a.firstChild)},contents:function(a){return a.contentDocument||_.merge([],a.childNodes)}},function(a,b){_.fn[a]=function(c,d){var e=_.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=_.filter(d,e)),this.length>1&&(ma[a]||_.unique(e),la.test(a)&&e.reverse()),this.pushStack(e)}});var na=/\S+/g,oa={};_.Callbacks=function(a){a="string"==typeof a?oa[a]||f(a):_.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&g>h;h++)if(i[h].apply(f[0],f[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function f(b){_.each(b,function(b,c){var d=_.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&_.each(arguments,function(a,b){for(var c;(c=_.inArray(b,i,c))>-1;)i.splice(c,1),d&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return a?_.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},_.extend({Deferred:function(a){var b=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return _.Deferred(function(c){_.each(b,function(b,f){var g=_.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&_.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?_.extend(a,d):d}},e={};return d.pipe=d.then,_.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&_.isFunction(a.promise)?g:0,i=1===h?a:_.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&_.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var pa;_.fn.ready=function(a){return _.ready.promise().done(a),this},_.extend({isReady:!1,readyWait:1,holdReady:function(a){a?_.readyWait++:_.ready(!0)},ready:function(a){(a===!0?--_.readyWait:_.isReady)||(_.isReady=!0,a!==!0&&--_.readyWait>0||(pa.resolveWith(Z,[_]),_.fn.triggerHandler&&(_(Z).triggerHandler("ready"),_(Z).off("ready"))))}}),_.ready.promise=function(b){return pa||(pa=_.Deferred(),"complete"===Z.readyState?setTimeout(_.ready):(Z.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),pa.promise(b)},_.ready.promise();var qa=_.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===_.type(c)){e=!0;for(h in c)_.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,_.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(_(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};_.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=_.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,_.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(_.isEmptyObject(f))_.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,_.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{_.isArray(b)?d=b.concat(b.map(_.camelCase)):(e=_.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(na)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!_.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var ra=new h,sa=new h,ta=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ua=/([A-Z])/g;_.extend({hasData:function(a){return sa.hasData(a)||ra.hasData(a)},data:function(a,b,c){return sa.access(a,b,c)},removeData:function(a,b){sa.remove(a,b)},_data:function(a,b,c){return ra.access(a,b,c)},_removeData:function(a,b){ra.remove(a,b)}}),_.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=sa.get(f),1===f.nodeType&&!ra.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=_.camelCase(d.slice(5)),i(f,d,e[d])));ra.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sa.set(this,a)}):qa(this,function(b){var c,d=_.camelCase(a);if(f&&void 0===b){if(c=sa.get(f,a),void 0!==c)return c;if(c=sa.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=sa.get(this,d);sa.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&sa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){sa.remove(this,a)})}}),_.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ra.get(a,b),c&&(!d||_.isArray(c)?d=ra.access(a,b,_.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=_.queue(a,b),d=c.length,e=c.shift(),f=_._queueHooks(a,b),g=function(){_.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ra.get(a,c)||ra.access(a,c,{empty:_.Callbacks("once memory").add(function(){ra.remove(a,[b+"queue",c])})})}}),_.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?_.queue(this[0],a):void 0===b?this:this.each(function(){var c=_.queue(this,a,b);_._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&_.dequeue(this,a)})},dequeue:function(a){return this.each(function(){_.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=_.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ra.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var va=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],xa=function(a,b){return a=b||a,"none"===_.css(a,"display")||!_.contains(a.ownerDocument,a)},ya=/^(?:checkbox|radio)$/i;!function(){var a=Z.createDocumentFragment(),b=a.appendChild(Z.createElement("div")),c=Z.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var za="undefined";Y.focusinBubbles="onfocusin"in a;var Aa=/^key/,Ba=/^(?:mouse|pointer|contextmenu)|click/,Ca=/^(?:focusinfocus|focusoutblur)$/,Da=/^([^.]*)(?:\.(.+)|)$/;_.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=_.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof _!==za&&_.event.triggered!==b.type?_.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(na)||[""],j=b.length;j--;)h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=_.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=_.event.special[n]||{},k=_.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&_.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),_.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.hasData(a)&&ra.get(a);if(q&&(i=q.events)){for(b=(b||"").match(na)||[""],j=b.length;j--;)if(h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=_.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||_.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)_.event.remove(a,n+b[j],c,d,!0);_.isEmptyObject(i)&&(delete q.handle,ra.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||Z],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||Z,3!==d.nodeType&&8!==d.nodeType&&!Ca.test(n+_.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[_.expando]?b:new _.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:_.makeArray(c,[b]),l=_.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!_.isWindow(d)){for(i=l.delegateType||n,Ca.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||Z)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(ra.get(g,"events")||{})[b.type]&&ra.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&_.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!_.acceptData(d)||j&&_.isFunction(d[n])&&!_.isWindow(d)&&(h=d[j],h&&(d[j]=null),_.event.triggered=n,d[n](),_.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=_.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(ra.get(this,"events")||{})[a.type]||[],j=_.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=_.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((_.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?_(e,this).index(i)>=0:_.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Z,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[_.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ba.test(e)?this.mouseHooks:Aa.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new _.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=Z),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&_.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return _.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=_.extend(new _.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?_.event.trigger(e,null,b):_.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},_.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},_.Event=function(a,b){return this instanceof _.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?j:k):this.type=a,b&&_.extend(this,b),this.timeStamp=a&&a.timeStamp||_.now(),void(this[_.expando]=!0)):new _.Event(a,b)},_.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=j,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){_.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!_.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Y.focusinBubbles||_.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){_.event.simulate(b,a.target,_.event.fix(a),!0)};_.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ra.access(d,b);e||d.addEventListener(a,c,!0),ra.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ra.access(d,b)-1;e?ra.access(d,b,e):(d.removeEventListener(a,c,!0),ra.remove(d,b))}}}),_.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return _().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=_.guid++)),this.each(function(){_.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,_(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=k),this.each(function(){_.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){_.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?_.event.trigger(a,b,c,!0):void 0}});var Ea=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fa=/<([\w:]+)/,Ga=/<|&#?\w+;/,Ha=/<(?:script|style|link)/i,Ia=/checked\s*(?:[^=]|=\s*.checked.)/i,Ja=/^$|\/(?:java|ecma)script/i,Ka=/^true\/(.*)/,La=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ma.optgroup=Ma.option,Ma.tbody=Ma.tfoot=Ma.colgroup=Ma.caption=Ma.thead,Ma.th=Ma.td,_.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=_.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||_.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===_.type(e))_.merge(l,e.nodeType?[e]:e);else if(Ga.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Fa.exec(e)||["",""])[1].toLowerCase(),h=Ma[g]||Ma._default,f.innerHTML=h[1]+e.replace(Ea,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;_.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===_.inArray(e,d))&&(i=_.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Ja.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=_.event.special,g=0;void 0!==(c=a[g]);g++){if(_.acceptData(c)&&(e=c[ra.expando],e&&(b=ra.cache[e]))){if(b.events)for(d in b.events)f[d]?_.event.remove(c,d):_.removeEvent(c,d,b.handle);ra.cache[e]&&delete ra.cache[e]}delete sa.cache[c[sa.expando]]}}}),_.fn.extend({text:function(a){return qa(this,function(a){return void 0===a?_.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?_.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||_.cleanData(r(c)),c.parentNode&&(b&&_.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(_.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return _.clone(this,a,b)})},html:function(a){return qa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ha.test(a)&&!Ma[(Fa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ea,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(_.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,_.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=_.isFunction(m);if(p||j>1&&"string"==typeof m&&!Y.checkClone&&Ia.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=_.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=_.map(r(c,"script"),n),f=e.length;j>i;i++)g=c,i!==l&&(g=_.clone(g,!0,!0),f&&_.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,_.map(e,o),i=0;f>i;i++)g=e[i],Ja.test(g.type||"")&&!ra.access(g,"globalEval")&&_.contains(h,g)&&(g.src?_._evalUrl&&_._evalUrl(g.src):_.globalEval(g.textContent.replace(La,"")))}return this}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){_.fn[a]=function(a){for(var c,d=[],e=_(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),_(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Na,Oa={},Pa=/^margin/,Qa=new RegExp("^("+va+")(?!px)[a-z%]+$","i"),Ra=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=Z.documentElement,f=Z.createElement("div"),g=Z.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&_.extend(Y,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild(Z.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),_.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Sa=/^(none|table(?!-c[ea]).+)/,Ta=new RegExp("^("+va+")(.*)$","i"),Ua=new RegExp("^([+-])=("+va+")","i"),Va={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:"0",fontWeight:"400"},Xa=["Webkit","O","Moz","ms"];_.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=_.camelCase(b),i=a.style;return b=_.cssProps[h]||(_.cssProps[h]=x(i,h)),g=_.cssHooks[b]||_.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ua.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(_.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||_.cssNumber[h]||(c+="px"),Y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=_.camelCase(b);return b=_.cssProps[h]||(_.cssProps[h]=x(a.style,h)),g=_.cssHooks[b]||_.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Wa&&(e=Wa[b]),""===c||c?(f=parseFloat(e),c===!0||_.isNumeric(f)?f||0:e):e}}),_.each(["height","width"],function(a,b){_.cssHooks[b]={get:function(a,c,d){return c?Sa.test(_.css(a,"display"))&&0===a.offsetWidth?_.swap(a,Va,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return y(a,c,d?z(a,b,d,"border-box"===_.css(a,"boxSizing",!1,e),e):0)}}}),_.cssHooks.marginRight=w(Y.reliableMarginRight,function(a,b){return b?_.swap(a,{display:"inline-block"},v,[a,"marginRight"]):void 0}),_.each({margin:"",padding:"",border:"Width"},function(a,b){_.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+wa[d]+b]=f[d]||f[d-2]||f[0];return e}},Pa.test(a)||(_.cssHooks[a+b].set=y)}),_.fn.extend({css:function(a,b){return qa(this,function(a,b,c){var d,e,f={},g=0;if(_.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=_.css(a,b[g],!1,d);return f}return void 0!==c?_.style(a,b,c):_.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){xa(this)?_(this).show():_(this).hide()})}}),_.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(_.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.options.duration?this.pos=b=_.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=_.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){_.fx.step[a.prop]?_.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[_.cssProps[a.prop]]||_.cssHooks[a.prop])?_.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},_.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},_.fx=C.prototype.init,_.fx.step={};var Ya,Za,$a=/^(?:toggle|show|hide)$/,_a=new RegExp("^(?:([+-])=|)("+va+")([a-z%]*)$","i"),ab=/queueHooks$/,bb=[G],cb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=_a.exec(b),f=e&&e[3]||(_.cssNumber[a]?"":"px"),g=(_.cssNumber[a]||"px"!==f&&+d)&&_a.exec(_.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,_.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};_.Animation=_.extend(I,{tweener:function(a,b){_.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],cb[c]=cb[c]||[],cb[c].unshift(b)},prefilter:function(a,b){b?bb.unshift(a):bb.push(a)}}),_.speed=function(a,b,c){var d=a&&"object"==typeof a?_.extend({},a):{complete:c||!c&&b||_.isFunction(a)&&a,duration:a,easing:c&&b||b&&!_.isFunction(b)&&b};return d.duration=_.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in _.fx.speeds?_.fx.speeds[d.duration]:_.fx.speeds._default,
(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){_.isFunction(d.old)&&d.old.call(this),d.queue&&_.dequeue(this,d.queue)},d},_.fn.extend({fadeTo:function(a,b,c,d){return this.filter(xa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=_.isEmptyObject(a),f=_.speed(b,c,d),g=function(){var b=I(this,_.extend({},a),f);(e||ra.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=_.timers,g=ra.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&_.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ra.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=_.timers,g=d?d.length:0;for(c.finish=!0,_.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),_.each(["toggle","show","hide"],function(a,b){var c=_.fn[b];_.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),_.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){_.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),_.timers=[],_.fx.tick=function(){var a,b=0,c=_.timers;for(Ya=_.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||_.fx.stop(),Ya=void 0},_.fx.timer=function(a){_.timers.push(a),a()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){Za||(Za=setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){clearInterval(Za),Za=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(a,b){return a=_.fx?_.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=Z.createElement("input"),b=Z.createElement("select"),c=b.appendChild(Z.createElement("option"));a.type="checkbox",Y.checkOn=""!==a.value,Y.optSelected=c.selected,b.disabled=!0,Y.optDisabled=!c.disabled,a=Z.createElement("input"),a.value="t",a.type="radio",Y.radioValue="t"===a.value}();var db,eb,fb=_.expr.attrHandle;_.fn.extend({attr:function(a,b){return qa(this,_.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){_.removeAttr(this,a)})}}),_.extend({attr:function(a,b,c){var d,e,f=a.nodeType;return a&&3!==f&&8!==f&&2!==f?typeof a.getAttribute===za?_.prop(a,b,c):(1===f&&_.isXMLDoc(a)||(b=b.toLowerCase(),d=_.attrHooks[b]||(_.expr.match.bool.test(b)?eb:db)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=_.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void _.removeAttr(a,b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(na);if(f&&1===a.nodeType)for(;c=f[e++];)d=_.propFix[c]||c,_.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&_.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),eb={set:function(a,b,c){return b===!1?_.removeAttr(a,c):a.setAttribute(c,c),c}},_.each(_.expr.match.bool.source.match(/\w+/g),function(a,b){var c=fb[b]||_.find.attr;fb[b]=function(a,b,d){var e,f;return d||(f=fb[b],fb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,fb[b]=f),e}});var gb=/^(?:input|select|textarea|button)$/i;_.fn.extend({prop:function(a,b){return qa(this,_.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[_.propFix[a]||a]})}}),_.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?(f=1!==g||!_.isXMLDoc(a),f&&(b=_.propFix[b]||b,e=_.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]):void 0},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||gb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Y.optSelected||(_.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});var hb=/[\t\r\n\f]/g;_.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=_.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?_.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(_.isFunction(a)?function(c){_(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=_(this),f=a.match(na)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===za||"boolean"===c)&&(this.className&&ra.set(this,"__className__",this.className),this.className=this.className||a===!1?"":ra.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(hb," ").indexOf(b)>=0)return!0;return!1}});var ib=/\r/g;_.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=_.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,_(this).val()):a,null==e?e="":"number"==typeof e?e+="":_.isArray(e)&&(e=_.map(e,function(a){return null==a?"":a+""})),b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=_.valHooks[e.type]||_.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ib,""):null==c?"":c)):void 0}}),_.extend({valHooks:{option:{get:function(a){var b=_.find.attr(a,"value");return null!=b?b:_.trim(_.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(Y.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&_.nodeName(c.parentNode,"optgroup"))){if(b=_(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=_.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=_.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(a,b){return _.isArray(b)?a.checked=_.inArray(_(a).val(),b)>=0:void 0}},Y.checkOn||(_.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){_.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),_.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var jb=_.now(),kb=/\?/;_.parseJSON=function(a){return JSON.parse(a+"")},_.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&_.error("Invalid XML: "+a),b};var lb=/#.*$/,mb=/([?&])_=[^&]*/,nb=/^(.*?):[ \t]*([^\r\n]*)$/gm,ob=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pb=/^(?:GET|HEAD)$/,qb=/^\/\//,rb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,sb={},tb={},ub="*/".concat("*"),vb=a.location.href,wb=rb.exec(vb.toLowerCase())||[];_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vb,type:"GET",isLocal:ob.test(wb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,_.ajaxSettings),b):L(_.ajaxSettings,a)},ajaxPrefilter:J(sb),ajaxTransport:J(tb),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(_.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(_.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--_.active||_.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=_.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?_(m):_.event,o=_.Deferred(),p=_.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=nb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||vb)+"").replace(lb,"").replace(qb,wb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=_.trim(l.dataType||"*").toLowerCase().match(na)||[""],null==l.crossDomain&&(i=rb.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===wb[1]&&i[2]===wb[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(wb[3]||("http:"===wb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=_.param(l.data,l.traditional)),K(sb,l,b,v),2===t)return v;j=_.event&&l.global,j&&0===_.active++&&_.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!pb.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(kb.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=mb.test(e)?e.replace(mb,"$1_="+jb++):e+(kb.test(e)?"&":"?")+"_="+jb++)),l.ifModified&&(_.lastModified[e]&&v.setRequestHeader("If-Modified-Since",_.lastModified[e]),_.etag[e]&&v.setRequestHeader("If-None-Match",_.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+ub+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(tb,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return _.get(a,b,c,"json")},getScript:function(a,b){return _.get(a,void 0,b,"script")}}),_.each(["get","post"],function(a,b){_[b]=function(a,c,d,e){return _.isFunction(c)&&(e=e||d,d=c,c=void 0),_.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),_._evalUrl=function(a){return _.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},_.fn.extend({wrapAll:function(a){var b;return _.isFunction(a)?this.each(function(b){_(this).wrapAll(a.call(this,b))}):(this[0]&&(b=_(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(_.isFunction(a)?function(b){_(this).wrapInner(a.call(this,b))}:function(){var b=_(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=_.isFunction(a);return this.each(function(c){_(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)}).end()}}),_.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},_.expr.filters.visible=function(a){return!_.expr.filters.hidden(a)};var xb=/%20/g,yb=/\[\]$/,zb=/\r?\n/g,Ab=/^(?:submit|button|image|reset|file)$/i,Bb=/^(?:input|select|textarea|keygen)/i;_.param=function(a,b){var c,d=[],e=function(a,b){b=_.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(a)||a.jquery&&!_.isPlainObject(a))_.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(xb,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=_.prop(this,"elements");return a?_.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!_(this).is(":disabled")&&Bb.test(this.nodeName)&&!Ab.test(a)&&(this.checked||!ya.test(a))}).map(function(a,b){var c=_(this).val();return null==c?null:_.isArray(c)?_.map(c,function(a){return{name:b.name,value:a.replace(zb,"\r\n")}}):{name:b.name,value:c.replace(zb,"\r\n")}}).get()}}),_.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cb=0,Db={},Eb={0:200,1223:204},Fb=_.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Db)Db[a]()}),Y.cors=!!Fb&&"withCredentials"in Fb,Y.ajax=Fb=!!Fb,_.ajaxTransport(function(a){var b;return Y.cors||Fb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Db[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Eb[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Db[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return _.globalEval(a),a}}}),_.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),_.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=_("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),Z.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gb=[],Hb=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gb.pop()||_.expando+"_"+jb++;return this[a]=!0,a}}),_.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=_.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hb,"$1"+e):b.jsonp!==!1&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||_.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gb.push(e)),g&&_.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),_.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=ga.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=_.buildFragment([a],b,e),e&&e.length&&_(e).remove(),_.merge([],d.childNodes))};var Ib=_.fn.load;_.fn.load=function(a,b,c){if("string"!=typeof a&&Ib)return Ib.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=_.trim(a.slice(h)),a=a.slice(0,h)),_.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&_.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?_("<div>").append(_.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){_.fn[b]=function(a){return this.on(b,a)}}),_.expr.filters.animated=function(a){return _.grep(_.timers,function(b){return a===b.elem}).length};var Jb=a.document.documentElement;_.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=_.css(a,"position"),l=_(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=_.css(a,"top"),i=_.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),_.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},_.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){_.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,_.contains(b,d)?(typeof d.getBoundingClientRect!==za&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===_.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),_.nodeName(a[0],"html")||(d=a.offset()),d.top+=_.css(a[0],"borderTopWidth",!0),d.left+=_.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-_.css(c,"marginTop",!0),left:b.left-d.left-_.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jb;a&&!_.nodeName(a,"html")&&"static"===_.css(a,"position");)a=a.offsetParent;return a||Jb})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;_.fn[b]=function(e){return qa(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),_.each(["top","left"],function(a,b){_.cssHooks[b]=w(Y.pixelPosition,function(a,c){return c?(c=v(a,b),Qa.test(c)?_(a).position()[b]+"px":c):void 0})}),_.each({Height:"height",Width:"width"},function(a,b){_.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){_.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return qa(this,function(b,c,d){var e;return _.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?_.css(b,c,g):_.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),_.fn.size=function(){return this.length},_.fn.andSelf=_.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var Kb=a.jQuery,Lb=a.$;return _.noConflict=function(b){return a.$===_&&(a.$=Lb),b&&a.jQuery===_&&(a.jQuery=Kb),_},typeof b===za&&(a.jQuery=a.$=_),_}),function(a,b,c,d){"use strict";var e="Class",f={extend:function(a){return this.prototype=this.copySuperPrototype(a),this.prototype.$super=a,this},copySuperPrototype:function(b){var c={};return a.extend(!0,c,b.prototype,{$init:null,$super:null,constructor:null},this.prototype),c}},g={redefineSuperMember:function(a,b){for(var c=a;c.$super!==d;)c.$super=this.getNewSuperMember(c.$super),c.$super.$this=a,b.push(c),c=c.$super},getNewSuperMember:function(a){var b={},c=a.prototype,d=null;for(var e in c)if(c.hasOwnProperty(e)){if(d=c[e],!c.hasOwnProperty(e))continue;if(this.isPassRedefine(e)){b[e]=d;continue}if("function"==typeof d){b[e]=this.redefineSuperMethod(e,d);continue}b[e]=d}return b},isPassRedefine:function(a){var b={constructor:1,$super:1};return b[a]?!0:!1},redefineSuperMethod:function(a,b){return function(){var c=this.$this,d={"super":c.$super,method:c[a]},e="";return g.changeChildMethod({oSuper:this,oChild:c,sSuperMethod:a,fSuperMethod:b}),e=b.apply(c,arguments),g.restoreChildMethod({oChild:c,sSuperMethod:a,oChildBackup:d}),e}},changeChildMethod:function(a){var b=a.oSuper,c=a.oChild,d=a.sSuperMethod,e=a.fSuperMethod;c[d]=e,c.$super=b.$super},restoreChildMethod:function(a){var b=a.oChild,c=a.sSuperMethod,d=a.oChildBackup;b[c]=d.method,b.$super=d["super"]},runSuperInit:function(a,b){for(var c=a.length,d=null;c;)c-=1,d=a[c].$super,"function"==typeof d.$init&&d.$init.apply(d,b)}},h={_trigger:function(a,b){return a?void a.apply(this,[b]):!1},option:function(b,c){return"undefined"===b?this.htOption||{}:"undefined"!=typeof c?(this.htOption[b]=c,c):"string"==typeof b?this.htOption[b]:void a.extend(this.htOption,b)}};a[e]=function(b){function c(){var a=[];this.htOption={},g.redefineSuperMember(this,a),g.runSuperInit(a,arguments),"function"==typeof this.$init&&this.$init.apply(this,arguments)}return a.extend(c,f),c.prototype=a.extend(b,h),c.prototype.constructor=c,c}}(jQuery,window,document),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=t(d,f,4);var g=!A(c)&&s.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=u(c,d);for(var e=z(b),f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b,c){return function(d,e,f){var g=0,h=z(d);if("number"==typeof f)a>0?g=f>=0?f:Math.max(f+h,g):h=f>=0?Math.min(f+1,h):f+h+1;else if(c&&f&&h)return f=c(d,e),d[f]===e?f:-1;if(e!==e)return f=b(k.call(d,g,h),s.isNaN),f>=0?f+g:-1;for(f=a>0?g:h-1;f>=0&&h>f;f+=a)if(d[f]===e)return f;return-1}}function d(a,b){var c=F.length,d=a.constructor,e=s.isFunction(d)&&d.prototype||h,f="constructor";for(s.has(a,f)&&!s.contains(b,f)&&b.push(f);c--;)f=F[c],f in a&&a[f]!==e[f]&&!s.contains(b,f)&&b.push(f)}var e=this,f=e._,g=Array.prototype,h=Object.prototype,i=Function.prototype,j=g.push,k=g.slice,l=h.toString,m=h.hasOwnProperty,n=Array.isArray,o=Object.keys,p=i.bind,q=Object.create,r=function(){},s=function(a){return a instanceof s?a:this instanceof s?void(this._wrapped=a):new s(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports._=s):e._=s,s.VERSION="1.8.3";var t=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},u=function(a,b,c){return null==a?s.identity:s.isFunction(a)?t(a,b,c):s.isObject(a)?s.matcher(a):s.property(a)};s.iteratee=function(a,b){return u(a,b,1/0)};var v=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},w=function(a){if(!s.isObject(a))return{};if(q)return q(a);r.prototype=a;var b=new r;return r.prototype=null,b},x=function(a){return function(b){return null==b?void 0:b[a]}},y=Math.pow(2,53)-1,z=x("length"),A=function(a){var b=z(a);return"number"==typeof b&&b>=0&&y>=b};s.each=s.forEach=function(a,b,c){b=t(b,c);var d,e;if(A(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=s.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},s.map=s.collect=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},s.reduce=s.foldl=s.inject=a(1),s.reduceRight=s.foldr=a(-1),s.find=s.detect=function(a,b,c){var d;return d=A(a)?s.findIndex(a,b,c):s.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},s.filter=s.select=function(a,b,c){var d=[];return b=u(b,c),s.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},s.reject=function(a,b,c){return s.filter(a,s.negate(u(b)),c)},s.every=s.all=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},s.some=s.any=function(a,b,c){b=u(b,c);for(var d=!A(a)&&s.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},s.contains=s.includes=s.include=function(a,b,c,d){return A(a)||(a=s.values(a)),("number"!=typeof c||d)&&(c=0),s.indexOf(a,b,c)>=0},s.invoke=function(a,b){var c=k.call(arguments,2),d=s.isFunction(b);return s.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},s.pluck=function(a,b){return s.map(a,s.property(b))},s.where=function(a,b){return s.filter(a,s.matcher(b))},s.findWhere=function(a,b){return s.find(a,s.matcher(b))},s.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},s.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=A(a)?a:s.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=u(b,c),s.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},s.shuffle=function(a){for(var b,c=A(a)?a:s.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=s.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},s.sample=function(a,b,c){return null==b||c?(A(a)||(a=s.values(a)),a[s.random(a.length-1)]):s.shuffle(a).slice(0,Math.max(0,b))},s.sortBy=function(a,b,c){return b=u(b,c),s.pluck(s.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var B=function(a){return function(b,c,d){var e={};return c=u(c,d),s.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};s.groupBy=B(function(a,b,c){s.has(a,c)?a[c].push(b):a[c]=[b]}),s.indexBy=B(function(a,b,c){a[c]=b}),s.countBy=B(function(a,b,c){s.has(a,c)?a[c]++:a[c]=1}),s.toArray=function(a){return a?s.isArray(a)?k.call(a):A(a)?s.map(a,s.identity):s.values(a):[]},s.size=function(a){return null==a?0:A(a)?a.length:s.keys(a).length},s.partition=function(a,b,c){b=u(b,c);var d=[],e=[];return s.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},s.first=s.head=s.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:s.initial(a,a.length-b)},s.initial=function(a,b,c){return k.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},s.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:s.rest(a,Math.max(0,a.length-b))},s.rest=s.tail=s.drop=function(a,b,c){return k.call(a,null==b||c?1:b)},s.compact=function(a){return s.filter(a,s.identity)};var C=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=z(a);h>g;g++){var i=a[g];if(A(i)&&(s.isArray(i)||s.isArguments(i))){b||(i=C(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};s.flatten=function(a,b){return C(a,b,!1)},s.without=function(a){return s.difference(a,k.call(arguments,1))},s.uniq=s.unique=function(a,b,c,d){s.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=u(c,d));for(var e=[],f=[],g=0,h=z(a);h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?s.contains(f,j)||(f.push(j),e.push(i)):s.contains(e,i)||e.push(i)}return e},s.union=function(){return s.uniq(C(arguments,!0,!0))},s.intersection=function(a){for(var b=[],c=arguments.length,d=0,e=z(a);e>d;d++){var f=a[d];if(!s.contains(b,f)){for(var g=1;c>g&&s.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},s.difference=function(a){var b=C(arguments,!0,!0,1);return s.filter(a,function(a){return!s.contains(b,a)})},s.zip=function(){return s.unzip(arguments)},s.unzip=function(a){for(var b=a&&s.max(a,z).length||0,c=Array(b),d=0;b>d;d++)c[d]=s.pluck(a,d);return c},s.object=function(a,b){for(var c={},d=0,e=z(a);e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},s.findIndex=b(1),s.findLastIndex=b(-1),s.sortedIndex=function(a,b,c,d){c=u(c,d,1);for(var e=c(b),f=0,g=z(a);g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},s.indexOf=c(1,s.findIndex,s.sortedIndex),s.lastIndexOf=c(-1,s.findLastIndex),s.range=function(a,b,c){null==b&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var D=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=w(a.prototype),g=a.apply(f,e);return s.isObject(g)?g:f};s.bind=function(a,b){if(p&&a.bind===p)return p.apply(a,k.call(arguments,1));if(!s.isFunction(a))throw new TypeError("Bind must be called on a function");var c=k.call(arguments,2),d=function(){return D(a,d,b,this,c.concat(k.call(arguments)))};return d},s.partial=function(a){var b=k.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===s?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return D(a,c,this,this,f)};return c},s.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=s.bind(a[c],a);return a},s.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return s.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},s.delay=function(a,b){var c=k.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},s.defer=s.partial(s.delay,s,1),s.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:s.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=s.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},s.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=s.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,
c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=s.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},s.wrap=function(a,b){return s.partial(b,a)},s.negate=function(a){return function(){return!a.apply(this,arguments)}},s.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},s.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},s.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},s.once=s.partial(s.before,2);var E=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];s.keys=function(a){if(!s.isObject(a))return[];if(o)return o(a);var b=[];for(var c in a)s.has(a,c)&&b.push(c);return E&&d(a,b),b},s.allKeys=function(a){if(!s.isObject(a))return[];var b=[];for(var c in a)b.push(c);return E&&d(a,b),b},s.values=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},s.mapObject=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},s.pairs=function(a){for(var b=s.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},s.invert=function(a){for(var b={},c=s.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},s.functions=s.methods=function(a){var b=[];for(var c in a)s.isFunction(a[c])&&b.push(c);return b.sort()},s.extend=v(s.allKeys),s.extendOwn=s.assign=v(s.keys),s.findKey=function(a,b,c){b=u(b,c);for(var d,e=s.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},s.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;s.isFunction(b)?(e=s.allKeys(g),d=t(b,c)):(e=C(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},s.omit=function(a,b,c){if(s.isFunction(b))b=s.negate(b);else{var d=s.map(C(arguments,!1,!1,1),String);b=function(a,b){return!s.contains(d,b)}}return s.pick(a,b,c)},s.defaults=v(s.allKeys,!0),s.create=function(a,b){var c=w(a);return b&&s.extendOwn(c,b),c},s.clone=function(a){return s.isObject(a)?s.isArray(a)?a.slice():s.extend({},a):a},s.tap=function(a,b){return b(a),a},s.isMatch=function(a,b){var c=s.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var G=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof s&&(a=a._wrapped),b instanceof s&&(b=b._wrapped);var e=l.call(a);if(e!==l.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(s.isFunction(g)&&g instanceof g&&s.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!G(a[i],b[i],c,d))return!1}else{var j,k=s.keys(a);if(i=k.length,s.keys(b).length!==i)return!1;for(;i--;)if(j=k[i],!s.has(b,j)||!G(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};s.isEqual=function(a,b){return G(a,b)},s.isEmpty=function(a){return null==a?!0:A(a)&&(s.isArray(a)||s.isString(a)||s.isArguments(a))?0===a.length:0===s.keys(a).length},s.isElement=function(a){return!(!a||1!==a.nodeType)},s.isArray=n||function(a){return"[object Array]"===l.call(a)},s.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},s.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){s["is"+a]=function(b){return l.call(b)==="[object "+a+"]"}}),s.isArguments(arguments)||(s.isArguments=function(a){return s.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(s.isFunction=function(a){return"function"==typeof a||!1}),s.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},s.isNaN=function(a){return s.isNumber(a)&&a!==+a},s.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===l.call(a)},s.isNull=function(a){return null===a},s.isUndefined=function(a){return void 0===a},s.has=function(a,b){return null!=a&&m.call(a,b)},s.noConflict=function(){return e._=f,this},s.identity=function(a){return a},s.constant=function(a){return function(){return a}},s.noop=function(){},s.property=x,s.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},s.matcher=s.matches=function(a){return a=s.extendOwn({},a),function(b){return s.isMatch(b,a)}},s.times=function(a,b,c){var d=Array(Math.max(0,a));b=t(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},s.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},s.now=Date.now||function(){return(new Date).getTime()};var H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=s.invert(H),J=function(a){var b=function(b){return a[b]},c="(?:"+s.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};s.escape=J(H),s.unescape=J(I),s.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),s.isFunction(d)?d.call(a):d};var K=0;s.uniqueId=function(a){var b=++K+"";return a?a+b:b},s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\u2028|\u2029/g,O=function(a){return"\\"+M[a]};s.template=function(a,b,c){!b&&c&&(b=c),b=s.defaults({},b,s.templateSettings);var d=RegExp([(b.escape||L).source,(b.interpolate||L).source,(b.evaluate||L).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(N,O),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,s)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},s.chain=function(a){var b=s(a);return b._chain=!0,b};var P=function(a,b){return a._chain?s(b).chain():b};s.mixin=function(a){s.each(s.functions(a),function(b){var c=s[b]=a[b];s.prototype[b]=function(){var a=[this._wrapped];return j.apply(a,arguments),P(this,c.apply(s,a))}})},s.mixin(s),s.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=g[a];s.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],P(this,c)}}),s.each(["concat","join","slice"],function(a){var b=g[a];s.prototype[a]=function(){return P(this,b.apply(this._wrapped,arguments))}}),s.prototype.value=function(){return this._wrapped},s.prototype.valueOf=s.prototype.toJSON=s.prototype.value,s.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return s})}.call(this),!function(){function a(a,b){return b>a?-1:a>b?1:a>=b?0:NaN}function b(a){return null!=a&&!isNaN(a)}function c(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function d(a){return a.length}function e(a){for(var b=1;a*b%1;)b*=10;return b}function f(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function g(){}function h(a){return fg+a in this}function i(a){return a=fg+a,a in this&&delete this[a]}function j(){var a=[];return this.forEach(function(b){a.push(b)}),a}function k(){var a=0;for(var b in this)b.charCodeAt(0)===gg&&++a;return a}function l(){for(var a in this)if(a.charCodeAt(0)===gg)return!1;return!0}function m(){}function n(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function o(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=hg.length;d>c;++c){var e=hg[c]+b;if(e in a)return e}}function p(){}function q(){}function r(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new g;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function s(){Sf.event.preventDefault()}function t(){for(var a,b=Sf.event;a=b.sourceEvent;)b=a;return b}function u(a){for(var b=new q,c=0,d=arguments.length;++c<d;)b[arguments[c]]=r(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=Sf.event;e.target=a,Sf.event=e,b[e.type].apply(c,d)}finally{Sf.event=f}}},b}function v(a){return jg(a,og),a}function w(a){return"function"==typeof a?a:function(){return kg(a,this)}}function x(a){return"function"==typeof a?a:function(){return lg(a,this)}}function y(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=Sf.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function z(a){return a.trim().replace(/\s+/g," ")}function A(a){return new RegExp("(?:^|\\s+)"+Sf.requote(a)+"(?:\\s+|$)","g")}function B(a){return(a+"").trim().split(/^|\s+/)}function C(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=B(a).map(D);var e=a.length;return"function"==typeof b?d:c}function D(a){var b=A(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",z(e+" "+a))):c.setAttribute("class",z(e.replace(b," ")))}}function E(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function F(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function G(a){return"function"==typeof a?a:(a=Sf.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function H(a){return{__data__:a}}function I(a){return function(){return ng(this,a)}}function J(b){return arguments.length||(b=a),function(a,c){return a&&c?b(a.__data__,c.__data__):!a-!c}}function K(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function L(a){return jg(a,qg),a}function M(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function N(){var a=this.__transition__;a&&++a.active}function O(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,Uf(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+Sf.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=P;h>0&&(a=a.substring(0,h));var j=sg.get(a);return j&&(a=j,i=Q),h?b?e:d:b?p:f}function P(a,b){return function(c){var d=Sf.event;Sf.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{Sf.event=d}}}function Q(a,b){var c=P(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function R(){var a=".dragsuppress-"+ ++ug,b="click"+a,c=Sf.select(Xf).on("touchmove"+a,s).on("dragstart"+a,s).on("selectstart"+a,s);if(tg){var d=Wf.style,e=d[tg];d[tg]="none"}return function(f){function g(){c.on(b,null)}c.on(a,null),tg&&(d[tg]=e),f&&(c.on(b,function(){s(),g()},!0),setTimeout(g,0))}}function S(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>vg&&(Xf.scrollX||Xf.scrollY)){c=Sf.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var e=c[0][0].getScreenCTM();vg=!(e.f||e.e),c.remove()}return vg?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY),d=d.matrixTransform(a.getScreenCTM().inverse()),[d.x,d.y]}var f=a.getBoundingClientRect();return[b.clientX-f.left-a.clientLeft,b.clientY-f.top-a.clientTop]}function T(){return Sf.event.changedTouches[0].identifier}function U(){return Sf.event.target}function V(){return Xf}function W(a){return a>0?1:0>a?-1:0}function X(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function Y(a){return a>1?0:-1>a?wg:Math.acos(a)}function Z(a){return a>1?yg:-1>a?-yg:Math.asin(a)}function $(a){return((a=Math.exp(a))-1/a)/2}function _(a){return((a=Math.exp(a))+1/a)/2}function aa(a){return((a=Math.exp(2*a))-1)/(a+1)}function ba(a){return(a=Math.sin(a/2))*a}function ca(){}function da(a,b,c){return this instanceof da?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof da?new da(a.h,a.s,a.l):ra(""+a,sa,da):new da(a,b,c)}function ea(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new na(e(a+120),e(a),e(a-120))}function fa(a,b,c){return this instanceof fa?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof fa?new fa(a.h,a.c,a.l):a instanceof ha?ja(a.l,a.a,a.b):ja((a=ta((a=Sf.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new fa(a,b,c)}function ga(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new ha(c,Math.cos(a*=Bg)*b,Math.sin(a)*b)}function ha(a,b,c){return this instanceof ha?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof ha?new ha(a.l,a.a,a.b):a instanceof fa?ga(a.l,a.c,a.h):ta((a=na(a)).r,a.g,a.b):new ha(a,b,c)}function ia(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=ka(e)*Mg,d=ka(d)*Ng,f=ka(f)*Og,new na(ma(3.2404542*e-1.5371385*d-.4985314*f),ma(-.969266*e+1.8760108*d+.041556*f),ma(.0556434*e-.2040259*d+1.0572252*f))}function ja(a,b,c){return a>0?new fa(Math.atan2(c,b)*Cg,Math.sqrt(b*b+c*c),a):new fa(NaN,NaN,a)}function ka(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function la(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function ma(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function na(a,b,c){return this instanceof na?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof na?new na(a.r,a.g,a.b):ra(""+a,na,ea):new na(a,b,c)}function oa(a){return new na(a>>16,a>>8&255,255&a)}function pa(a){return oa(a)+""}function qa(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ra(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(va(e[0]),va(e[1]),va(e[2]))}return(f=Rg.get(a))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.substring(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function sa(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=NaN,e=i>0&&1>i?0:d),new da(d,e,i)}function ta(a,b,c){a=ua(a),b=ua(b),c=ua(c);var d=la((.4124564*a+.3575761*b+.1804375*c)/Mg),e=la((.2126729*a+.7151522*b+.072175*c)/Ng),f=la((.0193339*a+.119192*b+.9503041*c)/Og);return ha(116*e-16,500*(d-e),200*(e-f))}function ua(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function va(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function wa(a){return"function"==typeof a?a:function(){return a}}function xa(a){return a}function ya(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),za(b,c,a,d)}}function za(a,b,c,d){function e(){var a,b=i.status;if(!b&&i.responseText||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=Sf.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!Xf.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=Sf.event;Sf.event=a;try{g.progress.call(f,i)}finally{Sf.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Uf(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},Sf.rebind(f,g,"on"),null==d?f:f.get(Aa(d))}function Aa(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Ba(){var a=Ca(),b=Da()-a;b>24?(isFinite(b)&&(clearTimeout(Vg),Vg=setTimeout(Ba,b)),Ug=0):(Ug=1,Xg(Ba))}function Ca(){var a=Date.now();for(Wg=Sg;Wg;)a>=Wg.t&&(Wg.f=Wg.c(a-Wg.t)),Wg=Wg.n;return a}function Da(){for(var a,b=Sg,c=1/0;b;)b.f?b=a?a.n=b.n:Sg=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return Tg=a,c}function Ea(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Fa(a,b){var c=Math.pow(10,3*eg(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Ga(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d?function(a){for(var b=a.length,e=[],f=0,g=d[0];b>0&&g>0;)e.push(a.substring(b-=g,b+g)),g=d[f=(f+1)%d.length];return e.reverse().join(c)}:xa;return function(a){var c=Zg.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="=",l&&(k-=Math.floor((k-1)/4))),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=$g.get(n)||Ha;var s=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):h;if(0>o){var i=Sf.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var t=a.lastIndexOf("."),u=0>t?a:a.substring(0,t),v=0>t?"":b+a.substring(t+1);!j&&l&&(u=f(u));var w=p.length+u.length+v.length+(s?0:e.length),x=k>w?new Array(w=k-w+1).join(d):"";return s&&(u=f(x+u)),e+=p,a=u+v,("<"===g?e+a+x:">"===g?x+e+a:"^"===g?x.substring(0,w>>=1)+e+a+x.substring(w):e+(s?a:x+a))+c}}}function Ha(a){return a+""}function Ia(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ja(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new ah(c-1)),1),c}function f(a,c){return b(a=new ah(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{ah=Ia;var d=new Ia;return d._=a,g(d,b,c)}finally{ah=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Ka(a);return i.floor=i,i.round=Ka(d),i.ceil=Ka(e),i.offset=Ka(f),i.range=h,a}function Ka(a){return function(b,c){try{ah=Ia;var d=new Ia;return d._=b,a(d,c)._}finally{ah=Date}}}function La(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.substring(i,h)),null!=(e=ch[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.substring(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&ah!==Ia,g=new(f?Ia:ah);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in ch?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.substring(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.substring(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.substring(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.substring(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.substring(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{ah=Ia;var b=new ah;return b._=a,d(b)}finally{ah=Date}}var d=b(a);return c.parse=function(a){try{ah=Ia;var b=d.parse(a);return b&&b._}finally{ah=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=db;var t=Sf.map(),u=Na(p),v=Oa(p),w=Na(q),x=Oa(q),y=Na(r),z=Oa(r),A=Na(s),B=Oa(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Ma(a.getDate(),b,2)},e:function(a,b){return Ma(a.getDate(),b,2)},H:function(a,b){return Ma(a.getHours(),b,2)},I:function(a,b){return Ma(a.getHours()%12||12,b,2)},j:function(a,b){return Ma(1+_g.dayOfYear(a),b,3)},L:function(a,b){return Ma(a.getMilliseconds(),b,3)},m:function(a,b){return Ma(a.getMonth()+1,b,2)},M:function(a,b){return Ma(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Ma(a.getSeconds(),b,2)},U:function(a,b){return Ma(_g.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ma(_g.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Ma(a.getFullYear()%100,b,2)},Y:function(a,b){return Ma(a.getFullYear()%1e4,b,4)},Z:bb,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:Xa,e:Xa,H:Za,I:Za,j:Ya,L:ab,m:Wa,M:$a,p:k,S:_a,U:Qa,w:Pa,W:Ra,x:i,X:j,y:Ta,Y:Sa,Z:Ua,"%":cb};return b}function Ma(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Na(a){return new RegExp("^(?:"+a.map(Sf.requote).join("|")+")","i")}function Oa(a){for(var b=new g,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Pa(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Qa(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c));return d?(a.U=+d[0],c+d[0].length):-1}function Ra(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c));return d?(a.W=+d[0],c+d[0].length):-1}function Sa(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Ta(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+2));return d?(a.y=Va(+d[0]),c+d[0].length):-1}function Ua(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=-b,c+5):-1}function Va(a){return a+(a>68?1900:2e3)}function Wa(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function Xa(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function Ya(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function Za(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function $a(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function _a(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function ab(a,b,c){dh.lastIndex=0;var d=dh.exec(b.substring(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function bb(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=~~(eg(b)/60),e=eg(b)%60;return c+Ma(d,"0",2)+Ma(e,"0",2)}function cb(a,b,c){eh.lastIndex=0;var d=eh.exec(b.substring(c,c+1));return d?c+d[0].length:-1}function db(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function eb(){}function fb(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function gb(a,b){a&&ih.hasOwnProperty(a.type)&&ih[a.type](a,b)}function hb(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function ib(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)hb(a[c],b,1);b.polygonEnd()}function jb(){function a(a,b){a*=Bg,b=b*Bg/2+wg/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);kh.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;lh.point=function(g,h){lh.point=a,d=(b=g)*Bg,e=Math.cos(h=(c=h)*Bg/2+wg/4),f=Math.sin(h)},lh.lineEnd=function(){a(b,c)}}function kb(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function lb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function mb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function nb(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function ob(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function pb(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function qb(a){return[Math.atan2(a[1],a[0]),Z(a[2])]}function rb(a,b){return eg(a[0]-b[0])<zg&&eg(a[1]-b[1])<zg}function sb(a,b){a*=Bg;var c=Math.cos(b*=Bg);tb(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function tb(a,b,c){++mh,oh+=(a-oh)/mh,ph+=(b-ph)/mh,qh+=(c-qh)/mh}function ub(){function a(a,e){a*=Bg;var f=Math.cos(e*=Bg),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);nh+=j,rh+=j*(b+(b=g)),sh+=j*(c+(c=h)),th+=j*(d+(d=i)),tb(b,c,d)}var b,c,d;xh.point=function(e,f){e*=Bg;var g=Math.cos(f*=Bg);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),xh.point=a,tb(b,c,d)}}function vb(){xh.point=sb}function wb(){function a(a,b){a*=Bg;var c=Math.cos(b*=Bg),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-Y(n)/m,p=Math.atan2(m,n);uh+=o*j,vh+=o*k,wh+=o*l,nh+=p,rh+=p*(d+(d=g)),sh+=p*(e+(e=h)),th+=p*(f+(f=i)),tb(d,e,f)}var b,c,d,e,f;xh.point=function(g,h){b=g,c=h,xh.point=a,g*=Bg;var i=Math.cos(h*=Bg);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),tb(d,e,f)},xh.lineEnd=function(){a(b,c),xh.lineEnd=vb,xh.point=sb}}function xb(){return!0}function yb(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(rb(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Ab(c,a,null,!0),j=new Ab(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Ab(d,a,null,!1),j=new Ab(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),zb(f),zb(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function zb(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Ab(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Bb(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Cb))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=Sf.merge(n);var a=Fb(r,o);n.length?(v||(f.polygonStart(),v=!0),yb(n,Eb,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Db(),u=b(t),v=!1;return s}}function Cb(a){return a.length>1}function Db(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:p,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Eb(a,b){return((a=a.x)[0]<0?a[1]-yg-zg:yg-a[1])-((b=b.x)[0]<0?b[1]-yg-zg:yg-b[1])}function Fb(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;kh.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+wg/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+wg/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>wg,z=o*t;if(kh.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*xg:v,y^m>=c^r>=c){var A=mb(kb(l),kb(a));pb(A);var B=mb(e,A);pb(B);var C=(y^v>=0?-1:1)*Z(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-zg>f||zg>f&&0>kh)^1&g}function Gb(a){var b,c=NaN,d=NaN,e=NaN;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?wg:-wg,i=eg(f-c);eg(i-wg)<zg?(a.point(c,d=(d+g)/2>0?yg:-yg),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=wg&&(eg(c-e)<zg&&(c-=e*zg),eg(f-h)<zg&&(f-=h*zg),d=Hb(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),
a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=NaN},clean:function(){return 2-b}}}function Hb(a,b,c,d){var e,f,g=Math.sin(a-c);return eg(g)>zg?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Ib(a,b,c,d){var e;if(null==a)e=c*yg,d.point(-wg,e),d.point(0,e),d.point(wg,e),d.point(wg,0),d.point(wg,-e),d.point(0,-e),d.point(-wg,-e),d.point(-wg,0),d.point(-wg,e);else if(eg(a[0]-b[0])>zg){var f=a[0]<b[0]?wg:-wg;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Jb(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?wg:-wg),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(rb(c,n)||rb(o,n))&&(o[0]+=zg,o[1]+=zg,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&rb(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=kb(a),e=kb(b),g=[1,0,0],h=mb(d,e),i=lb(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=mb(g,h),o=ob(g,l),p=ob(h,m);nb(o,p);var q=n,r=lb(o,q),s=lb(q,q),t=r*r-s*(lb(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=ob(q,(-r-u)/s);if(nb(v,o),v=qb(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=eg(B-wg)<zg,D=C||zg>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(eg(v[0]-x)<zg?z:A):z<=v[1]&&v[1]<=A:B>wg^(x<=v[0]&&v[0]<=y)){var E=ob(q,(-r+u)/s);return nb(E,o),[v,qb(E)]}}}function e(b,c){var d=g?a:wg-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=eg(f)>zg,i=jc(a,6*Bg);return Bb(b,c,i,g?[0,-a]:[-wg,a-wg])}function Kb(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Lb(a,b,c,d){function e(d,e){return eg(d[0]-a)<zg?e>0?0:3:eg(d[0]-c)<zg?e>0?2:1:eg(d[1]-b)<zg?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&X(j,f,a)>0&&++b:f[1]<=d&&X(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=NaN}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-zh,Math.min(zh,a)),b=Math.max(-zh,Math.min(zh,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Db(),C=Kb(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=Sf.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&yb(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Mb(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Nb(a){var b=0,c=wg/3,d=bc(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*wg/180,c=a[1]*wg/180):[b/wg*180,c/wg*180]},e}function Ob(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,Z((f-(a*a+c*c)*e*e)/(2*e))]},c}function Pb(){function a(a,b){Bh+=e*a-d*b,d=a,e=b}var b,c,d,e;Gh.point=function(f,g){Gh.point=a,b=d=f,c=e=g},Gh.lineEnd=function(){a(b,c)}}function Qb(a,b){Ch>a&&(Ch=a),a>Eh&&(Eh=a),Dh>b&&(Dh=b),b>Fh&&(Fh=b)}function Rb(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Sb(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Sb(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Sb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Tb(a,b){oh+=a,ph+=b,++qh}function Ub(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);rh+=g*(b+a)/2,sh+=g*(c+d)/2,th+=g,Tb(b=a,c=d)}var b,c;Ih.point=function(d,e){Ih.point=a,Tb(b=d,c=e)}}function Vb(){Ih.point=Tb}function Wb(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);rh+=g*(d+a)/2,sh+=g*(e+b)/2,th+=g,g=e*a-d*b,uh+=g*(d+a),vh+=g*(e+b),wh+=3*g,Tb(d=a,e=b)}var b,c,d,e;Ih.point=function(f,g){Ih.point=a,Tb(b=d=f,c=e=g)},Ih.lineEnd=function(){a(b,c)}}function Xb(a){function b(b,c){a.moveTo(b,c),a.arc(b,c,g,0,xg)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:p};return h}function Yb(a){function b(a){return(h?d:c)(a)}function c(b){return _b(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=NaN,y.point=f,b.lineStart()}function f(c,d){var f=kb([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=eg(eg(x)-1)<zg||eg(d-m)<zg?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||eg((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Bg),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function Zb(a){var b=Yb(function(b,c){return a([b*Cg,c*Cg])});return function(a){return cc(b(a))}}function $b(a){this.stream=a}function _b(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function ac(a){return bc(function(){return a})()}function bc(a){function b(a){return a=h(a[0]*Bg,a[1]*Bg),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Cg,a[1]*Cg]}function d(){h=Mb(g=fc(r,s,t),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=Yb(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,s=0,t=0,u=yh,v=xa,w=null,x=null;return b.stream=function(a){return k&&(k.valid=!1),k=cc(u(g,l(v(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(u=null==a?(w=a,yh):Jb((w=+a)*Bg),e()):w},b.clipExtent=function(a){return arguments.length?(x=a,v=a?Lb(a[0][0],a[0][1],a[1][0],a[1][1]):xa,e()):x},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Bg,q=a[1]%360*Bg,d()):[p*Cg,q*Cg]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Bg,s=a[1]%360*Bg,t=a.length>2?a[2]%360*Bg:0,d()):[r*Cg,s*Cg,t*Cg]},Sf.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function cc(a){return _b(a,function(b,c){a.point(b*Bg,c*Bg)})}function dc(a,b){return[a,b]}function ec(a,b){return[a>wg?a-xg:-wg>a?a+xg:a,b]}function fc(a,b,c){return a?b||c?Mb(hc(a),ic(b,c)):hc(a):b||c?ic(b,c):ec}function gc(a){return function(b,c){return b+=a,[b>wg?b-xg:-wg>b?b+xg:b,c]}}function hc(a){var b=gc(a);return b.invert=gc(-a),b}function ic(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),Z(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),Z(k*d-h*e)]},c}function jc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=kc(c,e),f=kc(c,f),(g>0?f>e:e>f)&&(e+=g*xg)):(e=a+g*xg,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=qb([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function kc(a,b){var c=kb(b);c[0]-=a,pb(c);var d=Y(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-zg)%(2*Math.PI)}function lc(a,b,c){var d=Sf.range(a,b-zg,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function mc(a,b,c){var d=Sf.range(a,b-zg,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function nc(a){return a.source}function oc(a){return a.target}function pc(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(ba(d-b)+e*g*ba(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Cg,Math.atan2(g,Math.sqrt(d*d+e*e))*Cg]}:function(){return[a*Cg,b*Cg]};return o.distance=m,o}function qc(){function a(a,e){var f=Math.sin(e*=Bg),g=Math.cos(e),h=eg((a*=Bg)-b),i=Math.cos(h);Jh+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Kh.point=function(e,f){b=e*Bg,c=Math.sin(f*=Bg),d=Math.cos(f),Kh.point=a},Kh.lineEnd=function(){Kh.point=Kh.lineEnd=p}}function rc(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function sc(a,b){function c(a,b){g>0?-yg+zg>b&&(b=-yg+zg):b>yg-zg&&(b=yg-zg);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(wg/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=W(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-yg]},c):uc}function tc(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return eg(e)<zg?dc:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-W(e)*Math.sqrt(a*a+c*c)]},c)}function uc(a,b){return[a,Math.log(Math.tan(wg/4+b/2))]}function vc(a){var b,c=ac(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=wg*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function wc(a,b){return[Math.log(Math.tan(wg/4+b/2)),-a]}function xc(a){return a[0]}function yc(a){return a[1]}function zc(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&X(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Ac(a,b){return a[0]-b[0]||a[1]-b[1]}function Bc(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Cc(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Dc(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Ec(){Zc(this),this.edge=this.site=this.circle=null}function Fc(a){var b=Wh.pop()||new Ec;return b.site=a,b}function Gc(a){Qc(a),Th.remove(a),Wh.push(a),Zc(a)}function Hc(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Gc(a);for(var i=f;i.circle&&eg(c-i.circle.x)<zg&&eg(d-i.circle.cy)<zg;)f=i.P,h.unshift(i),Gc(i),i=f;h.unshift(i),Qc(i);for(var j=g;j.circle&&eg(c-j.circle.x)<zg&&eg(d-j.circle.cy)<zg;)g=j.N,h.push(j),Gc(j),j=g;h.push(j),Qc(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],Wc(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Uc(i.site,j.site,null,e),Pc(i),Pc(j)}function Ic(a){for(var b,c,d,e,f=a.x,g=a.y,h=Th._;h;)if(d=Jc(h,g)-f,d>zg)h=h.L;else{if(e=f-Kc(h,g),!(e>zg)){d>-zg?(b=h.P,c=h):e>-zg?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Fc(a);if(Th.insert(b,i),b||c){if(b===c)return Qc(b),c=Fc(b.site),Th.insert(i,c),i.edge=c.edge=Uc(b.site,i.site),Pc(b),void Pc(c);if(!c)return void(i.edge=Uc(b.site,i.site));Qc(b),Qc(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};Wc(c.edge,j,o,u),i.edge=Uc(j,a,null,u),c.edge=Uc(a,o,null,u),Pc(b),Pc(c)}}function Jc(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-(1/0);c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Kc(a,b){var c=a.N;if(c)return Jc(c,b);var d=a.site;return d.y===b?d.x:1/0}function Lc(a){this.site=a,this.edges=[]}function Mc(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=Sh,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(eg(d-b)>zg||eg(e-c)>zg)&&(h.splice(g,0,new Xc(Vc(f.site,k,eg(d-l)<zg&&o-e>zg?{x:l,y:eg(b-l)<zg?c:o}:eg(e-o)<zg&&m-d>zg?{x:eg(c-o)<zg?b:m,y:o}:eg(d-m)<zg&&e-n>zg?{x:m,y:eg(b-m)<zg?c:n}:eg(e-n)<zg&&d-l>zg?{x:eg(c-n)<zg?b:l,y:n}:null),f.site,null)),++i)}function Nc(a,b){return b.angle-a.angle}function Oc(){Zc(this),this.x=this.y=this.arc=this.site=this.cy=null}function Pc(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Ag)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=Xh.pop()||new Oc;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=Vh._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}Vh.insert(s,r),s||(Uh=r)}}}}function Qc(a){var b=a.circle;b&&(b.P||(Uh=b.N),Vh.remove(b),Xh.push(b),Zc(b),a.circle=null)}function Rc(a){for(var b,c=Rh,d=Kb(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Sc(b,a)||!d(b)||eg(b.a.x-b.b.x)<zg&&eg(b.a.y-b.b.y)<zg)&&(b.a=b.b=null,c.splice(e,1))}function Sc(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Tc(a,b){this.l=a,this.r=b,this.a=this.b=null}function Uc(a,b,c,d){var e=new Tc(a,b);return Rh.push(e),c&&Wc(e,a,b,c),d&&Wc(e,b,a,d),Sh[a.i].edges.push(new Xc(e,a,b)),Sh[b.i].edges.push(new Xc(e,b,a)),e}function Vc(a,b,c){var d=new Tc(a,null);return d.a=b,d.b=c,Rh.push(d),d}function Wc(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function Xc(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function Yc(){this._=null}function Zc(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function $c(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function _c(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function ad(a){for(;a.L;)a=a.L;return a}function bd(a,b){var c,d,e,f=a.sort(cd).pop();for(Rh=[],Sh=new Array(a.length),Th=new Yc,Vh=new Yc;;)if(e=Uh,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&(Sh[f.i]=new Lc(f),Ic(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Hc(e.arc)}b&&(Rc(b),Mc(b));var g={cells:Sh,edges:Rh};return Th=Vh=Rh=Sh=null,g}function cd(a,b){return b.y-a.y||b.x-a.x}function dd(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function ed(a){return a.x}function fd(a){return a.y}function gd(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hd(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&hd(a,i[0],c,d,g,h),i[1]&&hd(a,i[1],g,d,e,h),i[2]&&hd(a,i[2],c,h,g,f),i[3]&&hd(a,i[3],g,h,e,f)}}function id(a,b){a=Sf.rgb(a),b=Sf.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+qa(Math.round(c+f*a))+qa(Math.round(d+g*a))+qa(Math.round(e+h*a))}}function jd(a,b){var c,d={},e={};for(c in a)c in b?d[c]=md(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function kd(a,b){return b-=a=+a,function(c){return a+b*c}}function ld(a,b){var c,d,e,f=Zh.lastIndex=$h.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=Zh.exec(a))&&(d=$h.exec(b));)(e=d.index)>f&&(e=b.substring(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:kd(c,d)})),f=$h.lastIndex;return f<b.length&&(e=b.substring(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function md(a,b){for(var c,d=Sf.interpolators.length;--d>=0&&!(c=Sf.interpolators[d](a,b)););return c}function nd(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(md(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function od(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function pd(a){return function(b){return 1-a(1-b)}}function qd(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function rd(a){return a*a}function sd(a){return a*a*a}function td(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function ud(a){return function(b){return Math.pow(b,a)}}function vd(a){return 1-Math.cos(a*yg)}function wd(a){return Math.pow(2,10*(a-1))}function xd(a){return 1-Math.sqrt(1-a*a)}function yd(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/xg*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*xg/b)}}function zd(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Ad(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Bd(a,b){a=Sf.hcl(a),b=Sf.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ga(c+f*a,d+g*a,e+h*a)+""}}function Cd(a,b){a=Sf.hsl(a),b=Sf.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ea(c+f*a,d+g*a,e+h*a)+""}}function Dd(a,b){a=Sf.lab(a),b=Sf.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return ia(c+f*a,d+g*a,e+h*a)+""}}function Ed(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Fd(a){var b=[a.a,a.b],c=[a.c,a.d],d=Hd(b),e=Gd(b,c),f=Hd(Id(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Cg,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Cg:0}function Gd(a,b){return a[0]*b[0]+a[1]*b[1]}function Hd(a){var b=Math.sqrt(Gd(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Id(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Jd(a,b){var c,d=[],e=[],f=Sf.transform(a),g=Sf.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:kd(h[0],i[0])},{i:3,x:kd(h[1],i[1])})):i[0]||i[1]?d.push("translate("+i+")"):d.push(""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:kd(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:kd(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:kd(n[0],o[0])},{i:c-2,x:kd(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Kd(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function Ld(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function Md(a){for(var b=a.source,c=a.target,d=Od(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Nd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Od(a,b){if(a===b)return a;for(var c=Nd(a),d=Nd(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Pd(a){a.fixed|=2}function Qd(a){a.fixed&=-7}function Rd(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Sd(a){a.fixed&=-5}function Td(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Td(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Ud(a,b){return Sf.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=$d,a}function Vd(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function Wd(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function Xd(a){return a.children}function Yd(a){return a.value}function Zd(a,b){return b.value-a.value}function $d(a){return Sf.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function _d(a){return a.x}function ae(a){return a.y}function be(a,b,c){a.y0=b,a.y=c}function ce(a){return Sf.range(a.length)}function de(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function ee(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function fe(a){return a.reduce(ge,0)}function ge(a,b){return a+b[1]}function he(a,b){return ie(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function ie(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function je(a){return[Sf.min(a),Sf.max(a)]}function ke(a,b){return a.value-b.value}function le(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function me(a,b){a._pack_next=b,b._pack_prev=a}function ne(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function oe(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-(1/0),m=1/0,n=-(1/0);if(c.forEach(pe),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],se(d,e,f),b(f),le(d,f),d._pack_prev=f,le(f,e),e=d._pack_next,g=3;j>g;g++){se(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(ne(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!ne(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?me(d,e=h):me(d=i,e),g--):(le(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(qe)}}function pe(a){a._pack_next=a._pack_prev=a}function qe(a){delete a._pack_next,delete a._pack_prev}function re(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)re(e[f],b,c,d)}function se(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function te(a,b){return a.parent==b.parent?1:2}function ue(a){var b=a.children;return b.length?b[0]:a.t}function ve(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function we(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function xe(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function ye(a,b,c){return a.a.parent===b.parent?a.a:c}function ze(a){return 1+Sf.max(a,function(a){return a.y})}function Ae(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Be(a){var b=a.children;return b&&b.length?Be(b[0]):a}function Ce(a){var b,c=a.children;return c&&(b=c.length)?Ce(c[b-1]):a}function De(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Ee(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Fe(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Ge(a){return a.rangeExtent?a.rangeExtent():Fe(a.range())}function He(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Ie(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Je(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:ji}function Ke(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=Sf.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Le(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Ke:He,i=d?Ld:Kd;return g=e(a,b,i,c),h=e(b,a,i,md),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Ed)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Pe(a,b)},f.tickFormat=function(b,c){return Qe(a,b,c)},f.nice=function(b){return Ne(a,b),e()},f.copy=function(){return Le(a,b,c,d)},e()}function Me(a,b){return Sf.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ne(a,b){return Ie(a,Je(Oe(a,b)[2]))}function Oe(a,b){null==b&&(b=10);var c=Fe(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Pe(a,b){return Sf.range.apply(Sf,Oe(a,b))}function Qe(a,b,c){var d=Oe(a,b);if(c){var e=Zg.exec(c);if(e.shift(),"s"===e[8]){var f=Sf.formatPrefix(Math.max(eg(d[0]),eg(d[1])));return e[7]||(e[7]="."+Re(f.scale(d[2]))),e[8]="f",c=Sf.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Se(e[8],d)),c=e.join("")}else c=",."+Re(d[2])+"f";return Sf.format(c)}function Re(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Se(a,b){var c=Re(b[2]);return a in ki?Math.abs(c-Re(Math.max(eg(b[0]),eg(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Te(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Ie(d.map(e),c?Math:mi);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Fe(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return li;arguments.length<2?b=li:"function"!=typeof b&&(b=Sf.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return Te(a.copy(),b,c,d)},Me(g,a)}function Ue(a,b,c){function d(b){return a(e(b))}var e=Ve(b),f=Ve(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Pe(c,a)},d.tickFormat=function(a,b){return Qe(c,a,b)},d.nice=function(a){return d.domain(Ne(c,a))},d.exponent=function(g){return arguments.length?(e=Ve(b=g),f=Ve(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return Ue(a.copy(),b,c)},Me(d,a)}function Ve(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function We(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):NaN))-1)%f.length]}function d(b,c){return Sf.range(a.length).map(function(a){return b+c*a})}var e,f,h;return c.invert=function(b){var c=f.concat(),d=a.concat();return c.sort(function(a,b){return a>b?1:a===b?0:-1}),d.sort(function(a,b){return a>b?1:a===b?0:-1}),d[Sf.bisect(c,b)-1]},c.domain=function(d){if(!arguments.length)return a;a=[],e=new g;for(var f,h=-1,i=d.length;++h<i;)e.has(f=d[h])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,h=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,g){arguments.length<2&&(g=0);var i=e[0],j=e[1],k=(j-i)/(Math.max(1,a.length-1)+g);return f=d(a.length<2?(i+j)/2:i+k*g/2,k),h=0,b={t:"rangePoints",a:arguments},c},c.rangeBands=function(e,g,i){arguments.length<2&&(g=0),arguments.length<3&&(i=g);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-g+2*i);return f=d(k+m*i,m),j&&f.reverse(),h=m*(1-g),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,g,i){arguments.length<2&&(g=0),arguments.length<3&&(i=g);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-g+2*i)),n=l-k-(a.length-g)*m;return f=d(k+Math.round(n/2),m),j&&f.reverse(),h=Math.round(m*(1-g)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){
return h},c.rangeExtent=function(){return Fe(b.a[0])},c.copy=function(){return We(a,b)},c.domain(a)}function Xe(c,d){function e(){var a=0,b=d.length;for(g=[];++a<b;)g[a-1]=Sf.quantile(c,a/b);return f}function f(a){return isNaN(a=+a)?void 0:d[Sf.bisect(g,a)]}var g;return f.domain=function(d){return arguments.length?(c=d.filter(b).sort(a),e()):c},f.range=function(a){return arguments.length?(d=a,e()):d},f.quantiles=function(){return g},f.invertExtent=function(a){return a=d.indexOf(a),0>a?[NaN,NaN]:[a>0?g[a-1]:c[0],a<g.length?g[a]:c[c.length-1]]},f.copy=function(){return Xe(c,d)},e()}function Ye(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?NaN:b/f+a,[b,b+1/f]},d.copy=function(){return Ye(a,b,c)},e()}function Ze(a,b){function c(c){return c>=c?b[Sf.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return Ze(a,b)},c}function $e(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Pe(a,b)},b.tickFormat=function(b,c){return Qe(a,b,c)},b.copy=function(){return $e(a)},b}function _e(a){return a.innerRadius}function af(a){return a.outerRadius}function bf(a){return a.startAngle}function cf(a){return a.endAngle}function df(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=wa(c),o=wa(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=xc,d=yc,e=xb,f=ef,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=ti.get(a)||ef).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function ef(a){return a.join("L")}function ff(a){return ef(a)+"Z"}function gf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function hf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function jf(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function kf(a,b){return a.length<4?ef(a):a[1]+nf(a.slice(1,a.length-1),of(a,b))}function lf(a,b){return a.length<3?ef(a):a[0]+nf((a.push(a[0]),a),of([a[a.length-2]].concat(a,[a[1]]),b))}function mf(a,b){return a.length<3?ef(a):a[0]+nf(a,of(a,b))}function nf(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return ef(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function of(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function pf(a){if(a.length<3)return ef(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",tf(wi,g),",",tf(wi,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),uf(i,g,h);return a.pop(),i.push("L",d),i.join("")}function qf(a){if(a.length<4)return ef(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(tf(wi,f)+","+tf(wi,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),uf(c,f,g);return c.join("")}function rf(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[tf(wi,g),",",tf(wi,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),uf(b,g,h);return b.join("")}function sf(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return pf(a)}function tf(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function uf(a,b,c){a.push("C",tf(ui,b),",",tf(ui,c),",",tf(vi,b),",",tf(vi,c),",",tf(wi,b),",",tf(wi,c))}function vf(a,b){return(b[1]-a[1])/(b[0]-a[0])}function wf(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=vf(e,f);++b<c;)d[b]=(g+(g=vf(e=f,f=a[b+1])))/2;return d[b]=g,d}function xf(a){for(var b,c,d,e,f=[],g=wf(a),h=-1,i=a.length-1;++h<i;)b=vf(a[h],a[h+1]),eg(b)<zg?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function yf(a){return a.length<3?ef(a):a[0]+nf(a,xf(a))}function zf(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]+ri,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Af(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=wa(c),v=wa(e),w=c===d?function(){return n}:wa(d),x=e===f?function(){return o}:wa(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=xc,d=xc,e=0,f=yc,g=xb,h=ef,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=ti.get(a)||ef).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Bf(a){return a.radius}function Cf(a){return[a.x,a.y]}function Df(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+ri;return[c*Math.cos(d),c*Math.sin(d)]}}function Ef(){return 64}function Ff(){return"circle"}function Gf(a){var b=Math.sqrt(a/wg);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Hf(a,b){return jg(a,Ci),a.id=b,a}function If(a,b,c,d){var e=a.id;return K(a,"function"==typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Jf(a){return null==a&&(a=""),function(){this.textContent=a}}function Kf(a,b,c,d){var e=a.__transition__||(a.__transition__={active:0,count:0}),f=e[c];if(!f){var h=d.time;f=e[c]={tween:new g,time:h,ease:d.ease,delay:d.delay,duration:d.duration},++e.count,Sf.timer(function(d){function g(d){return e.active>c?j():(e.active=c,f.event&&f.event.start.call(a,k,b),f.tween.forEach(function(c,d){(d=d.call(a,k,b))&&p.push(d)}),void Sf.timer(function(){return o.c=i(d||1)?xb:i,1},0,h))}function i(d){if(e.active!==c)return j();for(var g=d/n,h=l(g),i=p.length;i>0;)p[--i].call(a,h);return g>=1?(f.event&&f.event.end.call(a,k,b),j()):void 0}function j(){return--e.count?delete e[c]:delete a.__transition__,1}var k=a.__data__,l=f.ease,m=f.delay,n=f.duration,o=Wg,p=[];return o.t=m+h,d>=m?g(d-m):void(o.c=g)},0,h)}}function Lf(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Mf(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Nf(a){return a.toISOString()}function Of(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=Sf.bisect(Li,e);return f==Li.length?[b.year,Oe(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Li[f-1]<Li[f]/e?f-1:f]:[Oi,Oe(a,c)[2]]}return d.invert=function(b){return Pf(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map(Pf)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,Pf(+c+1),b).length}var f=d.domain(),g=Fe(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Ie(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=Pf(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Pf(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Fe(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],Pf(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Of(a.copy(),b,c)},Me(d,a)}function Pf(a){return new Date(a)}function Qf(a){return JSON.parse(a.responseText)}function Rf(a){var b=Vf.createRange();return b.selectNode(Vf.body),b.createContextualFragment(a.responseText)}var Sf={version:"3.4.10"};Date.now||(Date.now=function(){return+new Date});var Tf=[].slice,Uf=function(a){return Tf.call(a)},Vf=document,Wf=Vf.documentElement,Xf=window;try{Uf(Wf.childNodes)[0].nodeType}catch(Yf){Uf=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}try{Vf.createElement("div").style.setProperty("opacity",0,"")}catch(Zf){var $f=Xf.Element.prototype,_f=$f.setAttribute,ag=$f.setAttributeNS,bg=Xf.CSSStyleDeclaration.prototype,cg=bg.setProperty;$f.setAttribute=function(a,b){_f.call(this,a,b+"")},$f.setAttributeNS=function(a,b,c){ag.call(this,a,b,c+"")},bg.setProperty=function(a,b,c){cg.call(this,a,b+"",c)}}Sf.ascending=a,Sf.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:NaN},Sf.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},Sf.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f&&!(null!=(c=a[e])&&c>=c);)c=void 0;for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f&&!(null!=(c=b.call(a,a[e],e))&&c>=c);)c=void 0;for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},Sf.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g&&!(null!=(c=e=a[f])&&c>=c);)c=e=void 0;for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g&&!(null!=(c=e=b.call(a,a[f],f))&&c>=c);)c=void 0;for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},Sf.sum=function(a,b){var c,d=0,e=a.length,f=-1;if(1===arguments.length)for(;++f<e;)isNaN(c=+a[f])||(d+=c);else for(;++f<e;)isNaN(c=+b.call(a,a[f],f))||(d+=c);return d},Sf.mean=function(a,c){var d,e=0,f=a.length,g=-1,h=f;if(1===arguments.length)for(;++g<f;)b(d=a[g])?e+=d:--h;else for(;++g<f;)b(d=c.call(a,a[g],g))?e+=d:--h;return h?e/h:void 0},Sf.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},Sf.median=function(c,d){return arguments.length>1&&(c=c.map(d)),c=c.filter(b),c.length?Sf.quantile(c.sort(a),.5):void 0};var dg=c(a);Sf.bisectLeft=dg.left,Sf.bisect=Sf.bisectRight=dg.right,Sf.bisector=function(b){return c(1===b.length?function(c,d){return a(b(c),d)}:b)},Sf.shuffle=function(a){for(var b,c,d=a.length;d;)c=Math.random()*d--|0,b=a[d],a[d]=a[c],a[c]=b;return a},Sf.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},Sf.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},Sf.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=Sf.min(arguments,d),c=new Array(b);++a<b;)for(var e,f=-1,g=c[a]=new Array(e);++f<e;)g[f]=arguments[f][a];return c},Sf.transpose=function(a){return Sf.zip.apply(Sf,a)},Sf.keys=function(a){var b=[];for(var c in a)b.push(c);return b},Sf.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},Sf.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},Sf.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var eg=Math.abs;Sf.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,f=[],g=e(eg(c)),h=-1;if(a*=g,b*=g,c*=g,0>c)for(;(d=a+c*++h)>b;)f.push(d/g);else for(;(d=a+c*++h)<b;)f.push(d/g);return f},Sf.map=function(a){var b=new g;if(a instanceof g)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b},f(g,{has:h,get:function(a){return this[fg+a]},set:function(a,b){return this[fg+a]=b},remove:i,keys:j,values:function(){var a=[];return this.forEach(function(b,c){a.push(c)}),a},entries:function(){var a=[];return this.forEach(function(b,c){a.push({key:b,value:c})}),a},size:k,empty:l,forEach:function(a){for(var b in this)b.charCodeAt(0)===gg&&a.call(this,b.substring(1),this[b])}});var fg="\x00",gg=fg.charCodeAt(0);Sf.nest=function(){function a(b,h,i){if(i>=f.length)return d?d.call(e,h):c?h.sort(c):h;for(var j,k,l,m,n=-1,o=h.length,p=f[i++],q=new g;++n<o;)(m=q.get(j=p(k=h[n])))?m.push(k):q.set(j,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,i))}):(k={},l=function(c,d){k[c]=a(b,d,i)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=h[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],h=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(Sf.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return h[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},Sf.set=function(a){var b=new m;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},f(m,{has:h,add:function(a){return this[fg+a]=!0,a},remove:function(a){return a=fg+a,a in this&&delete this[a]},values:j,size:k,empty:l,forEach:function(a){for(var b in this)b.charCodeAt(0)===gg&&a.call(this,b.substring(1))}}),Sf.behavior={},Sf.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=n(a,b,b[c]);return a};var hg=["webkit","ms","moz","Moz","o","O"];Sf.dispatch=function(){for(var a=new q,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=r(a);return a},q.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.substring(c+1),a=a.substring(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},Sf.event=null,Sf.requote=function(a){return a.replace(ig,"\\$&")};var ig=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,jg={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},kg=function(a,b){return b.querySelector(a)},lg=function(a,b){return b.querySelectorAll(a)},mg=Wf.matches||Wf[o(Wf,"matchesSelector")],ng=function(a,b){return mg.call(a,b)};"function"==typeof Sizzle&&(kg=function(a,b){return Sizzle(a,b)[0]||null},lg=Sizzle,ng=Sizzle.matchesSelector),Sf.selection=function(){return rg};var og=Sf.selection.prototype=[];og.select=function(a){var b,c,d,e,f=[];a=w(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return v(f)},og.selectAll=function(a){var b,c,d=[];a=x(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=Uf(a.call(c,c.__data__,h,e))),b.parentNode=c);return v(d)};var pg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Sf.ns={prefix:pg,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.substring(0,b),a=a.substring(b+1)),pg.hasOwnProperty(c)?{space:pg[c],local:a}:a}},og.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=Sf.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(y(b,a[b]));return this}return this.each(y(a,b))},og.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=B(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!A(a[e]).test(b))return!1;return!0}for(b in a)this.each(C(b,a[b]));return this}return this.each(C(a,b))},og.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b="");for(c in a)this.each(E(c,a[c],b));return this}if(2>d)return Xf.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(E(a,b,c))},og.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(F(b,a[b]));return this}return this.each(F(a,b))},og.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},og.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},og.append=function(a){return a=G(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},og.insert=function(a,b){return a=G(a),b=w(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},og.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},og.data=function(a,b){function c(a,c){var d,e,f,h=a.length,l=c.length,m=Math.min(h,l),n=new Array(l),o=new Array(l),p=new Array(h);if(b){var q,r=new g,s=new g,t=[];for(d=-1;++d<h;)q=b.call(e=a[d],e.__data__,d),r.has(q)?p[d]=e:r.set(q,e),t.push(q);for(d=-1;++d<l;)q=b.call(c,f=c[d],d),(e=r.get(q))?(n[d]=e,e.__data__=f):s.has(q)||(o[d]=H(f)),s.set(q,f),r.remove(q);for(d=-1;++d<h;)r.has(t[d])&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=H(f);for(;l>d;++d)o[d]=H(c[d]);for(;h>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,i.push(o),j.push(n),k.push(p)}var d,e,f=-1,h=this.length;if(!arguments.length){for(a=new Array(h=(d=this[0]).length);++f<h;)(e=d[f])&&(a[f]=e.__data__);return a}var i=L([]),j=v([]),k=v([]);if("function"==typeof a)for(;++f<h;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<h;)c(d=this[f],a);return j.enter=function(){return i},j.exit=function(){return k},j},og.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},og.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=I(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return v(e)},og.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},og.sort=function(a){a=J.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},og.each=function(a){return K(this,function(b,c,d){a.call(b,b.__data__,c,d)})},og.call=function(a){var b=Uf(arguments);return a.apply(b[0]=this,b),this},og.empty=function(){return!this.node()},og.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},og.size=function(){var a=0;return this.each(function(){++a}),a};var qg=[];Sf.selection.enter=L,Sf.selection.enter.prototype=qg,qg.append=og.append,qg.empty=og.empty,qg.node=og.node,qg.call=og.call,qg.size=og.size,qg.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return v(g)},qg.insert=function(a,b){return arguments.length<2&&(b=M(this)),og.insert.call(this,a,b)},og.transition=function(){for(var a,b,c=yi||++Di,d=[],e=zi||{time:Date.now(),ease:td,delay:0,duration:250},f=-1,g=this.length;++f<g;){d.push(a=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(b=h[i])&&Kf(b,i,c,e),a.push(b)}return Hf(d,c)},og.interrupt=function(){return this.each(N)},Sf.select=function(a){var b=["string"==typeof a?kg(a,Vf):a];return b.parentNode=Wf,v([b])},Sf.selectAll=function(a){var b=Uf("string"==typeof a?lg(a,Vf):a);return b.parentNode=Wf,v([b])};var rg=Sf.select(Wf);og.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(O(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(O(a,b,c))};var sg=Sf.map({mouseenter:"mouseover",mouseleave:"mouseout"});sg.forEach(function(a){"on"+a in Vf&&sg.remove(a)});var tg="onselectstart"in Vf?null:o(Wf.style,"userSelect"),ug=0;Sf.mouse=function(a){return S(a,t())};var vg=/WebKit/.test(Xf.navigator.userAgent)?-1:0;Sf.touches=function(a,b){return arguments.length<2&&(b=t().touches),b?Uf(b).map(function(b){var c=S(a,b);return c.identifier=b.identifier,c}):[]},Sf.behavior.drag=function(){function a(){this.on("mousedown.drag",e).on("touchstart.drag",f)}function b(a,b,e,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&Sf.event.target===l),n({type:"dragend"}))}var j,k=this,l=Sf.event.target,m=k.parentNode,n=c.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=Sf.select(e()).on(f+q,h).on(g+q,i),s=R(),t=b(m,p);d?(j=d.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var c=u(a,"drag","dragstart","dragend"),d=null,e=b(p,Sf.mouse,V,"mousemove","mouseup"),f=b(T,Sf.touch,U,"touchmove","touchend");return a.origin=function(b){return arguments.length?(d=b,a):d},Sf.rebind(a,c,"on")};var wg=Math.PI,xg=2*wg,yg=wg/2,zg=1e-6,Ag=zg*zg,Bg=wg/180,Cg=180/wg,Dg=Math.SQRT2,Eg=2,Fg=4;Sf.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=_(p),g=f/(Eg*m)*(c*aa(Dg*b+p)-$(p));return[d+g*j,e+g*k,f*c/_(Dg*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Dg*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Fg*l)/(2*f*Eg*m),o=(i*i-f*f-Fg*l)/(2*i*Eg*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Dg;return c.duration=1e3*s,c},Sf.behavior.zoom=function(){function a(a){a.on(B,j).on(Ig+".zoom",l).on("dblclick.zoom",m).on(E,k)}function b(a){return[(a[0]-y.x)/y.k,(a[1]-y.y)/y.k]}function c(a){return[a[0]*y.k+y.x,a[1]*y.k+y.y]}function d(a){y.k=Math.max(A[0],Math.min(A[1],a))}function e(a,b){b=c(b),y.x+=a[0]-b[0],y.y+=a[1]-b[1]}function f(){v&&v.domain(t.range().map(function(a){return(a-y.x)/y.k}).map(t.invert)),x&&x.domain(w.range().map(function(a){return(a-y.y)/y.k}).map(w.invert))}function g(a){a({type:"zoomstart"})}function h(a){f(),a({type:"zoom",scale:y.k,translate:[y.x,y.y]})}function i(a){a({type:"zoomend"})}function j(){function a(){k=1,e(Sf.mouse(d),m),h(j)}function c(){l.on(C,null).on(D,null),n(k&&Sf.event.target===f),i(j)}var d=this,f=Sf.event.target,j=F.of(d,arguments),k=0,l=Sf.select(Xf).on(C,a).on(D,c),m=b(Sf.mouse(d)),n=R();N.call(d),g(j)}function k(){function a(){var a=Sf.touches(n);return m=y.k,a.forEach(function(a){a.identifier in p&&(p[a.identifier]=b(a))}),a}function c(){var b=Sf.event.target;Sf.select(b).on(u,f).on(v,l),w.push(b);for(var c=Sf.event.changedTouches,g=0,i=c.length;i>g;++g)p[c[g].identifier]=null;var j=a(),k=Date.now();if(1===j.length){if(500>k-r){var m=j[0],n=p[m.identifier];d(2*y.k),e(m,n),s(),h(o)}r=k}else if(j.length>1){var m=j[0],t=j[1],x=m[0]-t[0],z=m[1]-t[1];q=x*x+z*z}}function f(){for(var a,b,c,f,g=Sf.touches(n),i=0,j=g.length;j>i;++i,f=null)if(c=g[i],f=p[c.identifier]){if(b)break;a=c,b=f}if(f){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=q&&Math.sqrt(k/q);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+f[0])/2,(b[1]+f[1])/2],d(l*m)}r=null,e(a,b),h(o)}function l(){if(Sf.event.touches.length){for(var b=Sf.event.changedTouches,c=0,d=b.length;d>c;++c)delete p[b[c].identifier];for(var e in p)return void a()}Sf.selectAll(w).on(t,null),x.on(B,j).on(E,k),z(),i(o)}var m,n=this,o=F.of(n,arguments),p={},q=0,t=".zoom-"+Sf.event.changedTouches[0].identifier,u="touchmove"+t,v="touchend"+t,w=[],x=Sf.select(n).on(B,null).on(E,c),z=R();N.call(n),c(),g(o)}function l(){var a=F.of(this,arguments);q?clearTimeout(q):(n=b(o=p||Sf.mouse(this)),N.call(this),g(a)),q=setTimeout(function(){q=null,i(a)},50),s(),d(Math.pow(2,.002*Gg())*y.k),e(o,n),h(a)}function m(){var a=F.of(this,arguments),c=Sf.mouse(this),f=b(c),j=Math.log(y.k)/Math.LN2;g(a),d(Math.pow(2,Sf.event.shiftKey?Math.ceil(j)-1:Math.floor(j)+1)),e(c,f),h(a),i(a)}var n,o,p,q,r,t,v,w,x,y={x:0,y:0,k:1},z=[960,500],A=Hg,B="mousedown.zoom",C="mousemove.zoom",D="mouseup.zoom",E="touchstart.zoom",F=u(a,"zoomstart","zoom","zoomend");return a.event=function(a){a.each(function(){var a=F.of(this,arguments),b=y;yi?Sf.select(this).transition().each("start.zoom",function(){y=this.__chart__||{x:0,y:0,k:1},g(a)}).tween("zoom:zoom",function(){var c=z[0],d=z[1],e=c/2,f=d/2,g=Sf.interpolateZoom([(e-y.x)/y.k,(f-y.y)/y.k,c/y.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),i=c/d[2];this.__chart__=y={x:e-d[0]*i,y:f-d[1]*i,k:i},h(a)}}).each("end.zoom",function(){i(a)}):(this.__chart__=y,g(a),h(a),i(a))})},a.translate=function(b){return arguments.length?(y={x:+b[0],y:+b[1],k:y.k},f(),a):[y.x,y.y]},a.scale=function(b){return arguments.length?(y={x:y.x,y:y.y,k:+b},f(),a):y.k},a.scaleExtent=function(b){return arguments.length?(A=null==b?Hg:[+b[0],+b[1]],a):A},a.center=function(b){return arguments.length?(p=b&&[+b[0],+b[1]],a):p},a.size=function(b){return arguments.length?(z=b&&[+b[0],+b[1]],a):z},a.x=function(b){return arguments.length?(v=b,t=b.copy(),y={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),y={x:0,y:0,k:1},a):x},Sf.rebind(a,F,"on")};var Gg,Hg=[0,1/0],Ig="onwheel"in Vf?(Gg=function(){return-Sf.event.deltaY*(Sf.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Vf?(Gg=function(){return Sf.event.wheelDelta},"mousewheel"):(Gg=function(){return-Sf.event.detail},"MozMousePixelScroll");Sf.color=ca,ca.prototype.toString=function(){return this.rgb()+""},Sf.hsl=da;var Jg=da.prototype=new ca;Jg.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new da(this.h,this.s,this.l/a)},Jg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new da(this.h,this.s,a*this.l)},Jg.rgb=function(){return ea(this.h,this.s,this.l)},Sf.hcl=fa;var Kg=fa.prototype=new ca;Kg.brighter=function(a){return new fa(this.h,this.c,Math.min(100,this.l+Lg*(arguments.length?a:1)))},Kg.darker=function(a){return new fa(this.h,this.c,Math.max(0,this.l-Lg*(arguments.length?a:1)))},Kg.rgb=function(){return ga(this.h,this.c,this.l).rgb()},Sf.lab=ha;var Lg=18,Mg=.95047,Ng=1,Og=1.08883,Pg=ha.prototype=new ca;Pg.brighter=function(a){return new ha(Math.min(100,this.l+Lg*(arguments.length?a:1)),this.a,this.b)},Pg.darker=function(a){return new ha(Math.max(0,this.l-Lg*(arguments.length?a:1)),this.a,this.b)},Pg.rgb=function(){return ia(this.l,this.a,this.b)},Sf.rgb=na;var Qg=na.prototype=new ca;Qg.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new na(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new na(e,e,e)},Qg.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new na(a*this.r,a*this.g,a*this.b)},Qg.hsl=function(){return sa(this.r,this.g,this.b)},Qg.toString=function(){return"#"+qa(this.r)+qa(this.g)+qa(this.b)};var Rg=Sf.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Rg.forEach(function(a,b){Rg.set(a,oa(b))}),Sf.functor=wa,Sf.xhr=ya(xa),Sf.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=za(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.substring(b+1,c).replace(/""/g,'"');
}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.substring(b,k-h)}return a.substring(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();(!b||(m=b(m,l++)))&&h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new m,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},Sf.csv=Sf.dsv(",","text/csv"),Sf.tsv=Sf.dsv(" ","text/tab-separated-values"),Sf.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=t().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return S(a,d)};var Sg,Tg,Ug,Vg,Wg,Xg=Xf[o(Xf,"requestAnimationFrame")]||function(a){setTimeout(a,17)};Sf.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};Tg?Tg.n=f:Sg=f,Tg=f,Ug||(Vg=clearTimeout(Vg),Ug=1,Xg(Ba))},Sf.timer.flush=function(){Ca(),Da()},Sf.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var Yg=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Fa);Sf.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=Sf.round(a,Ea(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),Yg[8+c/3]};var Zg=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,$g=Sf.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=Sf.round(a,Ea(a,b))).toFixed(Math.max(0,Math.min(20,Ea(a*(1+1e-15),b))))}}),_g=Sf.time={},ah=Date;Ia.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){bh.setUTCDate.apply(this._,arguments)},setDay:function(){bh.setUTCDay.apply(this._,arguments)},setFullYear:function(){bh.setUTCFullYear.apply(this._,arguments)},setHours:function(){bh.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){bh.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){bh.setUTCMinutes.apply(this._,arguments)},setMonth:function(){bh.setUTCMonth.apply(this._,arguments)},setSeconds:function(){bh.setUTCSeconds.apply(this._,arguments)},setTime:function(){bh.setTime.apply(this._,arguments)}};var bh=Date.prototype;_g.year=Ja(function(a){return a=_g.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),_g.years=_g.year.range,_g.years.utc=_g.year.utc.range,_g.day=Ja(function(a){var b=new ah(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),_g.days=_g.day.range,_g.days.utc=_g.day.utc.range,_g.dayOfYear=function(a){var b=_g.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=_g[a]=Ja(function(a){return(a=_g.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=_g.year(a).getDay();return Math.floor((_g.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});_g[a+"s"]=c.range,_g[a+"s"].utc=c.utc.range,_g[a+"OfYear"]=function(a){var c=_g.year(a).getDay();return Math.floor((_g.dayOfYear(a)+(c+b)%7)/7)}}),_g.week=_g.sunday,_g.weeks=_g.sunday.range,_g.weeks.utc=_g.sunday.utc.range,_g.weekOfYear=_g.sundayOfYear;var ch={"-":"",_:" ",0:"0"},dh=/^\s*\d+/,eh=/^%/;Sf.locale=function(a){return{numberFormat:Ga(a),timeFormat:La(a)}};var fh=Sf.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Sf.format=fh.numberFormat,Sf.geo={},eb.prototype={s:0,t:0,add:function(a){fb(a,this.t,gh),fb(gh.s,this.s,this),this.s?this.t+=gh.t:this.s=gh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gh=new eb;Sf.geo.stream=function(a,b){a&&hh.hasOwnProperty(a.type)?hh[a.type](a,b):gb(a,b)};var hh={Feature:function(a,b){gb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)gb(c[d].geometry,b)}},ih={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){hb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)hb(c[d],b,0)},Polygon:function(a,b){ib(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ib(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)gb(c[d],b)}};Sf.geo.area=function(a){return jh=0,Sf.geo.stream(a,lh),jh};var jh,kh=new eb,lh={sphere:function(){jh+=4*wg},point:p,lineStart:p,lineEnd:p,polygonStart:function(){kh.reset(),lh.lineStart=jb},polygonEnd:function(){var a=2*kh;jh+=0>a?4*wg+a:a,lh.lineStart=lh.lineEnd=lh.point=p}};Sf.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=kb([b*Bg,c*Bg]);if(r){var e=mb(r,d),f=[e[1],-e[0],0],g=mb(f,e);pb(g),g=qb(g);var i=b-o,j=i>0?1:-1,p=g[0]*Cg*j,q=eg(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Cg;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Cg;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=eg(d)>180?d+(d>0?360:-360):d}else p=a,q=c;lh.point(a,c),b(a,c)}function f(){lh.lineStart()}function g(){e(p,q),lh.lineEnd(),eg(s)>zg&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,lh.polygonStart()},polygonEnd:function(){lh.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>kh?(k=-(m=180),l=-(n=90)):s>zg?n=90:-zg>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],Sf.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-(1/0),b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,k===1/0||l===1/0?[[NaN,NaN],[NaN,NaN]]:[[k,l],[m,n]]}}(),Sf.geo.centroid=function(a){mh=nh=oh=ph=qh=rh=sh=th=uh=vh=wh=0,Sf.geo.stream(a,xh);var b=uh,c=vh,d=wh,e=b*b+c*c+d*d;return Ag>e&&(b=rh,c=sh,d=th,zg>nh&&(b=oh,c=ph,d=qh),e=b*b+c*c+d*d,Ag>e)?[NaN,NaN]:[Math.atan2(c,b)*Cg,Z(d/Math.sqrt(e))*Cg]};var mh,nh,oh,ph,qh,rh,sh,th,uh,vh,wh,xh={sphere:p,point:sb,lineStart:ub,lineEnd:vb,polygonStart:function(){xh.lineStart=wb},polygonEnd:function(){xh.lineStart=ub}},yh=Bb(xb,Gb,Ib,[-wg,-wg/2]),zh=1e9;Sf.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Lb(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(Sf.geo.conicEqualArea=function(){return Nb(Ob)}).raw=Ob,Sf.geo.albers=function(){return Sf.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Sf.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=Sf.geo.albers(),g=Sf.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=Sf.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+zg,l+.12*j+zg],[k-.214*j-zg,l+.234*j-zg]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+zg,l+.166*j+zg],[k-.115*j-zg,l+.234*j-zg]]).stream(i).point,a},a.scale(1070)};var Ah,Bh,Ch,Dh,Eh,Fh,Gh={point:p,lineStart:p,lineEnd:p,polygonStart:function(){Bh=0,Gh.lineStart=Pb},polygonEnd:function(){Gh.lineStart=Gh.lineEnd=Gh.point=p,Ah+=eg(Bh/2)}},Hh={point:Qb,lineStart:p,lineEnd:p,polygonStart:p,polygonEnd:p},Ih={point:Tb,lineStart:Ub,lineEnd:Vb,polygonStart:function(){Ih.lineStart=Wb},polygonEnd:function(){Ih.point=Tb,Ih.lineStart=Ub,Ih.lineEnd=Vb}};Sf.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),Sf.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Ah=0,Sf.geo.stream(a,e(Gh)),Ah},a.centroid=function(a){return oh=ph=qh=rh=sh=th=uh=vh=wh=0,Sf.geo.stream(a,e(Ih)),wh?[uh/wh,vh/wh]:th?[rh/th,sh/th]:qh?[oh/qh,ph/qh]:[NaN,NaN]},a.bounds=function(a){return Eh=Fh=-(Ch=Dh=1/0),Sf.geo.stream(a,e(Hh)),[[Ch,Dh],[Eh,Fh]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||Zb(a):xa,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Rb:new Xb(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(Sf.geo.albersUsa()).context(null)},Sf.geo.transform=function(a){return{stream:function(b){var c=new $b(b);for(var d in a)c[d]=a[d];return c}}},$b.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Sf.geo.projection=ac,Sf.geo.projectionMutator=bc,(Sf.geo.equirectangular=function(){return ac(dc)}).raw=dc.invert=dc,Sf.geo.rotation=function(a){function b(b){return b=a(b[0]*Bg,b[1]*Bg),b[0]*=Cg,b[1]*=Cg,b}return a=fc(a[0]%360*Bg,a[1]*Bg,a.length>2?a[2]*Bg:0),b.invert=function(b){return b=a.invert(b[0]*Bg,b[1]*Bg),b[0]*=Cg,b[1]*=Cg,b},b},ec.invert=dc,Sf.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=fc(-a[0]*Bg,-a[1]*Bg,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Cg,a[1]*=Cg}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=jc((b=+d)*Bg,e*Bg),a):b},a.precision=function(d){return arguments.length?(c=jc(b*Bg,(e=+d)*Bg),a):e},a.angle(90)},Sf.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Bg,e=a[1]*Bg,f=b[1]*Bg,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},Sf.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return Sf.range(Math.ceil(f/q)*q,e,q).map(m).concat(Sf.range(Math.ceil(j/r)*r,i,r).map(n)).concat(Sf.range(Math.ceil(d/o)*o,c,o).filter(function(a){return eg(a%q)>zg}).map(k)).concat(Sf.range(Math.ceil(h/p)*p,g,p).filter(function(a){return eg(a%r)>zg}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=lc(h,g,90),l=mc(d,c,s),m=lc(j,i,90),n=mc(f,e,s),a):s},a.majorExtent([[-180,-90+zg],[180,90-zg]]).minorExtent([[-180,-80-zg],[180,80+zg]])},Sf.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=nc,e=oc;return a.distance=function(){return Sf.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},Sf.geo.interpolate=function(a,b){return pc(a[0]*Bg,a[1]*Bg,b[0]*Bg,b[1]*Bg)},Sf.geo.length=function(a){return Jh=0,Sf.geo.stream(a,Kh),Jh};var Jh,Kh={sphere:p,point:p,lineStart:qc,lineEnd:p,polygonStart:p,polygonEnd:p},Lh=rc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(Sf.geo.azimuthalEqualArea=function(){return ac(Lh)}).raw=Lh;var Mh=rc(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},xa);(Sf.geo.azimuthalEquidistant=function(){return ac(Mh)}).raw=Mh,(Sf.geo.conicConformal=function(){return Nb(sc)}).raw=sc,(Sf.geo.conicEquidistant=function(){return Nb(tc)}).raw=tc;var Nh=rc(function(a){return 1/a},Math.atan);(Sf.geo.gnomonic=function(){return ac(Nh)}).raw=Nh,uc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-yg]},(Sf.geo.mercator=function(){return vc(uc)}).raw=uc;var Oh=rc(function(){return 1},Math.asin);(Sf.geo.orthographic=function(){return ac(Oh)}).raw=Oh;var Ph=rc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(Sf.geo.stereographic=function(){return ac(Ph)}).raw=Ph,wc.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-yg]},(Sf.geo.transverseMercator=function(){var a=vc(wc),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},a.rotate([0,0])}).raw=wc,Sf.geom={},Sf.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=wa(c),f=wa(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Ac),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=zc(h),k=zc(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=xc,d=yc;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},Sf.geom.polygon=function(a){return jg(a,Qh),a};var Qh=Sf.geom.polygon.prototype=[];Qh.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},Qh.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},Qh.clip=function(a){for(var b,c,d,e,f,g,h=Dc(a),i=-1,j=this.length-Dc(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Bc(g,k,e)?(Bc(f,k,e)||a.push(Cc(f,g,k,e)),a.push(g)):Bc(f,k,e)&&a.push(Cc(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var Rh,Sh,Th,Uh,Vh,Wh=[],Xh=[];Lc.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Nc),b.length},Xc.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Yc.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=ad(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&($c(this,c),a=c,c=a.U),c.C=!1,d.C=!0,_c(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(_c(this,c),a=c,c=a.U),c.C=!1,d.C=!0,$c(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?ad(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,$c(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,_c(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,$c(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,_c(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,$c(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,_c(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},Sf.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return bd(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/zg)*zg,y:Math.round(g(a,b)/zg)*zg,i:b}})}var d=xc,e=yc,f=d,g=e,h=Yh;return a?b(a):(b.links=function(a){return bd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return bd(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Nc),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&dd(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=wa(d=a),b):d},b.y=function(a){return arguments.length?(g=wa(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?Yh:a,b):h===Yh?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===Yh?null:h&&h[1]},b)};var Yh=[[-1e6,-1e6],[1e6,1e6]];Sf.geom.delaunay=function(a){return Sf.geom.voronoi().triangles(a)},Sf.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(eg(i-c)+eg(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=(m<<1)+l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=gd()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=wa(h),u=wa(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=gd();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){hd(a,z,p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=xc,i=yc;return(g=arguments.length)?(h=ed,i=fd,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},Sf.interpolateRgb=id,Sf.interpolateObject=jd,Sf.interpolateNumber=kd,Sf.interpolateString=ld;var Zh=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$h=new RegExp(Zh.source,"g");Sf.interpolate=md,Sf.interpolators=[function(a,b){var c=typeof b;return("string"===c?Rg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?id:ld:b instanceof ca?id:Array.isArray(b)?nd:"object"===c&&isNaN(b)?jd:kd)(a,b)}],Sf.interpolateArray=nd;var _h=function(){return xa},ai=Sf.map({linear:_h,poly:ud,quad:function(){return rd},cubic:function(){return sd},sin:function(){return vd},exp:function(){return wd},circle:function(){return xd},elastic:yd,back:zd,bounce:function(){return Ad}}),bi=Sf.map({"in":xa,out:pd,"in-out":qd,"out-in":function(a){return qd(pd(a))}});Sf.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return c=ai.get(c)||_h,d=bi.get(d)||xa,od(d(c.apply(null,Tf.call(arguments,1))))},Sf.interpolateHcl=Bd,Sf.interpolateHsl=Cd,Sf.interpolateLab=Dd,Sf.interpolateRound=Ed,Sf.transform=function(a){var b=Vf.createElementNS(Sf.ns.prefix.svg,"g");return(Sf.transform=function(a){if(null!=a){-1!==a.search("NaN")&&(a=a.replace("NaN","0")),b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Fd(c?c.matrix:ci)})(a)},Fd.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ci={a:1,b:0,c:0,d:1,e:0,f:0};Sf.interpolateTransform=Jd,Sf.layout={},Sf.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Md(a[c]));return b}},Sf.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=Sf.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(Sf.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(xg-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},Sf.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/q){if(o>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&o>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=Sf.event.x,a.py=Sf.event.y,h.resume()}var c,d,e,f,g,h={},i=Sf.dispatch("start","tick","end"),j=[1,1],k=.9,l=di,m=ei,n=-30,o=fi,p=.1,q=.64,r=[],s=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,t,u,v=r.length,w=s.length;for(c=0;w>c;++c)h=s[c],l=h.source,m=h.target,t=m.x-l.x,u=m.y-l.y,(o=t*t+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,t*=o,u*=o,m.x-=t*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=t*(q=1-q),l.y+=u*q);if((q=d*p)&&(t=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(t-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Td(b=Sf.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(s=a,h):s},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),Sf.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;i>h;++h)c[h]=[];for(h=0;j>h;++h){var e=s[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=s.length,o=j[0],p=j[1];for(b=0;i>b;++b)(d=r[b]).index=b,d.weight=0;for(b=0;k>b;++b)d=s[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;i>b;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;k>b;++b)e[b]=+l.call(this,s[b],b);else for(b=0;k>b;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;k>b;++b)f[b]=+m.call(this,s[b],b);else for(b=0;k>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;i>b;++b)g[b]=+n.call(this,r[b],b);else for(b=0;i>b;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=Sf.behavior.drag().origin(xa).on("dragstart.force",Pd).on("drag.force",b).on("dragend.force",Qd)),arguments.length?void this.on("mouseover.force",Rd).on("mouseout.force",Sd).call(c):c},Sf.rebind(h,i,"on")};var di=20,ei=1,fi=1/0;Sf.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return Wd(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=Zd,c=Xd,d=Yd;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&(Vd(b,function(a){a.children&&(a.value=0)}),Wd(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},Sf.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=Sf.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Ud(c,d)},Sf.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),h=+("function"==typeof d?d.apply(this,arguments):d),i=(("function"==typeof e?e.apply(this,arguments):e)-h)/Sf.sum(g),j=Sf.range(f.length);null!=c&&j.sort(c===gi?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var k=[];return j.forEach(function(a){var b;k[a]={data:f[a],value:b=g[a],startAngle:h,endAngle:h+=b*i}}),k}var b=Number,c=gi,d=0,e=xg;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a};var gi={};Sf.layout.stack=function(){function a(h,i){var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=Sf.permute(j,l),k=Sf.permute(k,l);var m,n,o,p=d.call(a,k,i),q=j.length,r=j[0].length;for(n=0;r>n;++n)for(e.call(a,j[0][n],o=p[n],k[0][n][1]),m=1;q>m;++m)e.call(a,j[m][n],o+=k[m-1][n][1],k[m][n][1]);return h}var b=xa,c=ce,d=de,e=be,f=_d,g=ae;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:hi.get(b)||ce,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:ii.get(b)||de,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var hi=Sf.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(ee),f=a.map(fe),g=Sf.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return Sf.range(a.length).reverse()},"default":ce}),ii=Sf.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:de});Sf.layout.histogram=function(){
function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[Sf.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=je,e=he;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=wa(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return ie(a,b)}:wa(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},Sf.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,Wd(h,function(a){a.r=+k(a.value)}),Wd(h,oe),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;Wd(h,function(a){a.r+=l}),Wd(h,oe),Wd(h,function(a){a.r-=l})}return re(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=Sf.layout.hierarchy().sort(ke),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Ud(a,c)},Sf.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(Wd(m,c),m.parent.m=-m.z,Vd(m,d),j)Vd(l,f);else{var n=l,o=l,p=l;Vd(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);Vd(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){xe(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=ve(g),e=ue(e),g&&e;)i=ue(i),f=ve(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(we(ye(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!ve(f)&&(f.t=g,f.m+=l-k),e&&!ue(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=Sf.layout.hierarchy().sort(null).value(null),h=te,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},Ud(a,g)},Sf.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;Wd(i,function(a){var b=a.children;b&&b.length?(a.x=Ae(b),a.y=ze(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Be(i),l=Ce(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return Wd(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=Sf.layout.hierarchy().sort(null).value(null),c=te,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Ud(a,b)},Sf.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=Sf.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=De,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?De(b):Ee(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Ee(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?De:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},Ud(f,h)},Sf.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=Sf.random.normal.apply(Sf,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=Sf.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},Sf.scale={};var ji={floor:xa,ceil:xa};Sf.scale.linear=function(){return Le([0,1],[0,1],md,!1)};var ki={s:1,g:1,p:1,r:1,e:1};Sf.scale.log=function(){return Te(Sf.scale.linear().domain([0,1]),10,!0,[1,10])};var li=Sf.format(".0e"),mi={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};Sf.scale.pow=function(){return Ue(Sf.scale.linear(),1,[0,1])},Sf.scale.sqrt=function(){return Sf.scale.pow().exponent(.5)},Sf.scale.ordinal=function(){return We([],{t:"range",a:[[]]})},Sf.scale.category10=function(){return Sf.scale.ordinal().range(ni)},Sf.scale.category20=function(){return Sf.scale.ordinal().range(oi)},Sf.scale.category20b=function(){return Sf.scale.ordinal().range(pi)},Sf.scale.category20c=function(){return Sf.scale.ordinal().range(qi)};var ni=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(pa),oi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(pa),pi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(pa),qi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(pa);Sf.scale.quantile=function(){return Xe([],[])},Sf.scale.quantize=function(){return Ye(0,1,[0,1])},Sf.scale.threshold=function(){return Ze([.5],[0,1])},Sf.scale.identity=function(){return $e([0,1])},Sf.svg={},Sf.svg.arc=function(){function a(){var a=b.apply(this,arguments),f=c.apply(this,arguments),g=d.apply(this,arguments)+ri,h=e.apply(this,arguments)+ri,i=(g>h&&(i=g,g=h,h=i),h-g),j=wg>i?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=si?a?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":a?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+a*m+","+a*n+"A"+a+","+a+" 0 "+j+",0 "+a*k+","+a*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0Z"}var b=_e,c=af,d=bf,e=cf;return a.innerRadius=function(c){return arguments.length?(b=wa(c),a):b},a.outerRadius=function(b){return arguments.length?(c=wa(b),a):c},a.startAngle=function(b){return arguments.length?(d=wa(b),a):d},a.endAngle=function(b){return arguments.length?(e=wa(b),a):e},a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+ri;return[Math.cos(f)*a,Math.sin(f)*a]},a};var ri=-yg,si=xg-zg;Sf.svg.line=function(){return df(xa)};var ti=Sf.map({linear:ef,"linear-closed":ff,step:gf,"step-before":hf,"step-after":jf,basis:pf,"basis-open":qf,"basis-closed":rf,bundle:sf,cardinal:mf,"cardinal-open":kf,"cardinal-closed":lf,monotone:yf});ti.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var ui=[0,2/3,1/3,0],vi=[0,1/3,2/3,0],wi=[0,1/6,2/3,1/6];Sf.svg.line.radial=function(){var a=df(zf);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},hf.reverse=jf,jf.reverse=hf,Sf.svg.area=function(){return Af(xa)},Sf.svg.area.radial=function(){var a=Af(zf);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},Sf.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)+ri,k=j.call(a,e,d)+ri;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>wg)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=nc,g=oc,h=Bf,i=bf,j=cf;return a.radius=function(b){return arguments.length?(h=wa(b),a):h},a.source=function(b){return arguments.length?(f=wa(b),a):f},a.target=function(b){return arguments.length?(g=wa(b),a):g},a.startAngle=function(b){return arguments.length?(i=wa(b),a):i},a.endAngle=function(b){return arguments.length?(j=wa(b),a):j},a},Sf.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=nc,c=oc,d=Cf;return a.source=function(c){return arguments.length?(b=wa(c),a):b},a.target=function(b){return arguments.length?(c=wa(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},Sf.svg.diagonal.radial=function(){var a=Sf.svg.diagonal(),b=Cf,c=a.projection;return a.projection=function(a){return arguments.length?c(Df(b=a)):b},a},Sf.svg.symbol=function(){function a(a,d){return(xi.get(b.call(this,a,d))||Gf)(c.call(this,a,d))}var b=Ff,c=Ef;return a.type=function(c){return arguments.length?(b=wa(c),a):b},a.size=function(b){return arguments.length?(c=wa(b),a):c},a};var xi=Sf.map({circle:Gf,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Bi)),c=b*Bi;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Ai),c=b*Ai/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Ai),c=b*Ai/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});Sf.svg.symbolTypes=xi.keys();var yi,zi,Ai=Math.sqrt(3),Bi=Math.tan(30*Bg),Ci=[],Di=0;Ci.call=og.call,Ci.empty=og.empty,Ci.node=og.node,Ci.size=og.size,Sf.transition=function(a){return arguments.length?yi?a.transition():a:rg.transition()},Sf.transition.prototype=Ci,Ci.select=function(a){var b,c,d,e=this.id,f=[];a=w(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]);for(var i=this[g],j=-1,k=i.length;++j<k;)(d=i[j])&&(c=a.call(d,d.__data__,j,g))?("__data__"in d&&(c.__data__=d.__data__),Kf(c,j,e,d.__transition__[e]),b.push(c)):b.push(null)}return Hf(f,e)},Ci.selectAll=function(a){var b,c,d,e,f,g=this.id,h=[];a=x(a);for(var i=-1,j=this.length;++i<j;)for(var k=this[i],l=-1,m=k.length;++l<m;)if(d=k[l]){f=d.__transition__[g],c=a.call(d,d.__data__,l,i),h.push(b=[]);for(var n=-1,o=c.length;++n<o;)(e=c[n])&&Kf(e,n,g,f),b.push(e)}return Hf(h,g)},Ci.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=I(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Hf(e,this.id)},Ci.tween=function(a,b){var c=this.id;return arguments.length<2?this.node().__transition__[c].tween.get(a):K(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})},Ci.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Jd:md,h=Sf.ns.qualify(a);return If(this,"attr."+a,b,h.local?f:e)},Ci.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=Sf.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Ci.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(b){return null==b?d:(b+="",function(){var d,e=Xf.getComputedStyle(this,null).getPropertyValue(a);return e!==b&&(d=md(e,b),function(b){this.style.setProperty(a,d(b),c)})})}var f=arguments.length;if(3>f){if("string"!=typeof a){2>f&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return If(this,"style."+a,b,e)},Ci.styleTween=function(a,b,c){function d(d,e){var f=b.call(this,d,e,Xf.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}}return arguments.length<3&&(c=""),this.tween("style."+a,d)},Ci.text=function(a){return If(this,"text",a,Jf)},Ci.remove=function(){return this.each("end.transition",function(){var a;this.__transition__.count<2&&(a=this.parentNode)&&a.removeChild(this)})},Ci.ease=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].ease:("function"!=typeof a&&(a=Sf.ease.apply(Sf,arguments)),K(this,function(c){c.__transition__[b].ease=a}))},Ci.delay=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].delay:K(this,"function"==typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))},Ci.duration=function(a){var b=this.id;return arguments.length<1?this.node().__transition__[b].duration:K(this,"function"==typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=a}))},Ci.each=function(a,b){var c=this.id;if(arguments.length<2){var d=zi,e=yi;yi=c,K(this,function(b,d,e){zi=b.__transition__[c],a.call(b,b.__data__,d,e)}),zi=d,yi=e}else K(this,function(d){var e=d.__transition__[c];(e.event||(e.event=Sf.dispatch("start","end"))).on(a,b)});return this},Ci.transition=function(){for(var a,b,c,d,e=this.id,f=++Di,g=[],h=0,i=this.length;i>h;h++){g.push(a=[]);for(var b=this[h],j=0,k=b.length;k>j;j++)(c=b[j])&&(d=Object.create(c.__transition__[e]),d.delay+=d.duration,Kf(c,j,f,d)),a.push(c)}return Hf(g,f)},Sf.svg.axis=function(){function a(a){a.each(function(){var a,j=Sf.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):xa:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",zg),q=Sf.transition(o.exit()).style("opacity",zg).remove(),r=Sf.transition(o.order()).style("opacity",1),s=Ge(l),t=j.selectAll(".domain").data([0]),u=(t.enter().append("path").attr("class","domain"),Sf.transition(t));p.append("line"),p.append("text");var v=p.select("line"),w=r.select("line"),x=o.select("text").text(n),y=p.select("text"),z=r.select("text");switch(d){case"bottom":a=Lf,v.attr("y2",e),y.attr("y",Math.max(e,0)+g),w.attr("x2",0).attr("y2",e),z.attr("x",0).attr("y",Math.max(e,0)+g),x.attr("dy",".71em").style("text-anchor","middle"),u.attr("d","M"+s[0]+","+f+"V0H"+s[1]+"V"+f);break;case"top":a=Lf,v.attr("y2",-e),y.attr("y",-(Math.max(e,0)+g)),w.attr("x2",0).attr("y2",-e),z.attr("x",0).attr("y",-(Math.max(e,0)+g)),x.attr("dy","0em").style("text-anchor","middle"),u.attr("d","M"+s[0]+","+-f+"V0H"+s[1]+"V"+-f);break;case"left":a=Mf,v.attr("x2",-e),y.attr("x",-(Math.max(e,0)+g)),w.attr("x2",-e).attr("y2",0),z.attr("x",-(Math.max(e,0)+g)).attr("y",0),x.attr("dy",".32em").style("text-anchor","end"),u.attr("d","M"+-f+","+s[0]+"H0V"+s[1]+"H"+-f);break;case"right":a=Mf,v.attr("x2",e),y.attr("x",Math.max(e,0)+g),w.attr("x2",e).attr("y2",0),z.attr("x",Math.max(e,0)+g).attr("y",0),x.attr("dy",".32em").style("text-anchor","start"),u.attr("d","M"+f+","+s[0]+"H0V"+s[1]+"H"+f)}if(l.rangeBand){var A=l,B=A.rangeBand()/2;k=l=function(a){return A(a)+B}}else k.rangeBand?k=l:q.call(a,l);p.call(a,k),r.call(a,l)})}var b,c=Sf.scale.linear(),d=Ei,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Fi?b+"":Ei,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Ei="bottom",Fi={top:1,right:1,bottom:1,left:1};Sf.svg.brush=function(){function a(f){f.each(function(){var f=Sf.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),g=f.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=f.selectAll(".resize").data(o,xa);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Gi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var k,l=Sf.transition(f),m=Sf.transition(g);i&&(k=Ge(i),m.attr("x",k[0]).attr("width",k[1]-k[0]),c(l)),j&&(k=Ge(j),m.attr("y",k[0]).attr("height",k[1]-k[0]),d(l)),b(l)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+k[+/e$/.test(a)]+","+l[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",k[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",k[1]-k[0])}function d(a){a.select(".extent").attr("y",l[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function e(){function e(){32==Sf.event.keyCode&&(C||(t=null,E[0]-=k[1],E[1]-=l[1],C=2),s())}function o(){32==Sf.event.keyCode&&2==C&&(E[0]+=k[1],E[1]+=l[1],C=0,s())}function p(){var a=Sf.mouse(v),e=!1;u&&(a[0]+=u[0],a[1]+=u[1]),C||(Sf.event.altKey?(t||(t=[(k[0]+k[1])/2,(l[0]+l[1])/2]),E[0]=k[+(a[0]<t[0])],E[1]=l[+(a[1]<t[1])]):t=null),A&&q(a,i,0)&&(c(y),e=!0),B&&q(a,j,1)&&(d(y),e=!0),e&&(b(y),x({type:"brush",mode:C?"move":"resize"}))}function q(a,b,c){var d,e,h=Ge(b),i=h[0],j=h[1],o=E[c],p=c?l:k,q=p[1]-p[0];return C&&(i-=o,j-=q+o),d=(c?n:m)?Math.max(i,Math.min(j,a[c])):a[c],C?e=(d+=o)+q:(t&&(o=Math.max(i,Math.min(j,2*t[c]-d))),d>o?(e=d,d=o):e=o),p[0]!=d||p[1]!=e?(c?g=null:f=null,p[0]=d,p[1]=e,!0):void 0}function r(){p(),y.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),Sf.select("body").style("cursor",null),F.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),D(),x({type:"brushend"})}var t,u,v=this,w=Sf.select(Sf.event.target),x=h.of(v,arguments),y=Sf.select(v),z=w.datum(),A=!/^(n|s)$/.test(z)&&i,B=!/^(e|w)$/.test(z)&&j,C=w.classed("extent"),D=R(),E=Sf.mouse(v),F=Sf.select(Xf).on("keydown.brush",e).on("keyup.brush",o);if(Sf.event.changedTouches?F.on("touchmove.brush",p).on("touchend.brush",r):F.on("mousemove.brush",p).on("mouseup.brush",r),y.interrupt().selectAll("*").interrupt(),C)E[0]=k[0]-E[0],E[1]=l[0]-E[1];else if(z){var G=+/w$/.test(z),H=+/^n/.test(z);u=[k[1-G]-E[0],l[1-H]-E[1]],E[0]=k[G],E[1]=l[H]}else Sf.event.altKey&&(t=E.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),Sf.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),p()}var f,g,h=u(a,"brushstart","brush","brushend"),i=null,j=null,k=[0,0],l=[0,0],m=!0,n=!0,o=Hi[0];return a.event=function(a){a.each(function(){var a=h.of(this,arguments),b={x:k,y:l,i:f,j:g},c=this.__chart__||b;this.__chart__=b,yi?Sf.select(this).transition().each("start.brush",function(){f=c.i,g=c.j,k=c.x,l=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=nd(k,b.x),d=nd(l,b.y);return f=g=null,function(e){k=b.x=c(e),l=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){f=b.i,g=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(i=b,o=Hi[!i<<1|!j],a):i},a.y=function(b){return arguments.length?(j=b,o=Hi[!i<<1|!j],a):j},a.clamp=function(b){return arguments.length?(i&&j?(m=!!b[0],n=!!b[1]):i?m=!!b:j&&(n=!!b),a):i&&j?[m,n]:i?m:j?n:null},a.extent=function(b){var c,d,e,h,m;return arguments.length?(i&&(c=b[0],d=b[1],j&&(c=c[0],d=d[0]),f=[c,d],i.invert&&(c=i(c),d=i(d)),c>d&&(m=c,c=d,d=m),(c!=k[0]||d!=k[1])&&(k=[c,d])),j&&(e=b[0],h=b[1],i&&(e=e[1],h=h[1]),g=[e,h],j.invert&&(e=j(e),h=j(h)),e>h&&(m=e,e=h,h=m),(e!=l[0]||h!=l[1])&&(l=[e,h])),a):(i&&(f?(c=f[0],d=f[1]):(c=k[0],d=k[1],i.invert&&(c=i.invert(c),d=i.invert(d)),c>d&&(m=c,c=d,d=m))),j&&(g?(e=g[0],h=g[1]):(e=l[0],h=l[1],j.invert&&(e=j.invert(e),h=j.invert(h)),e>h&&(m=e,e=h,h=m))),i&&j?[[c,e],[d,h]]:i?[c,d]:j&&[e,h])},a.clear=function(){return a.empty()||(k=[0,0],l=[0,0],f=g=null),a},a.empty=function(){return!!i&&k[0]==k[1]||!!j&&l[0]==l[1]},Sf.rebind(a,h,"on")};var Gi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Hi=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ii=_g.format=fh.timeFormat,Ji=Ii.utc,Ki=Ji("%Y-%m-%dT%H:%M:%S.%LZ");Ii.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nf:Ki,Nf.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Nf.toString=Ki.toString,_g.second=Ja(function(a){return new ah(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),_g.seconds=_g.second.range,_g.seconds.utc=_g.second.utc.range,_g.minute=Ja(function(a){return new ah(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),_g.minutes=_g.minute.range,_g.minutes.utc=_g.minute.utc.range,_g.hour=Ja(function(a){var b=a.getTimezoneOffset()/60;return new ah(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),_g.hours=_g.hour.range,_g.hours.utc=_g.hour.utc.range,_g.month=Ja(function(a){return a=_g.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),_g.months=_g.month.range,_g.months.utc=_g.month.utc.range;var Li=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Mi=[[_g.second,1],[_g.second,5],[_g.second,15],[_g.second,30],[_g.minute,1],[_g.minute,5],[_g.minute,15],[_g.minute,30],[_g.hour,1],[_g.hour,3],[_g.hour,6],[_g.hour,12],[_g.day,1],[_g.day,2],[_g.week,1],[_g.month,1],[_g.month,3],[_g.year,1]],Ni=Ii.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",xb]]),Oi={range:function(a,b,c){return Sf.range(Math.ceil(a/c)*c,+b,c).map(Pf)},floor:xa,ceil:xa};Mi.year=_g.year,_g.scale=function(){return Of(Sf.scale.linear(),Mi,Ni)};var Pi=Mi.map(function(a){return[a[0].utc,a[1]]}),Qi=Ji.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",xb]]);Pi.year=_g.year.utc,_g.scale.utc=function(){return Of(Sf.scale.linear(),Pi,Qi)},Sf.text=ya(function(a){return a.responseText}),Sf.json=function(a,b){return za(a,"application/json",Qf,b)},Sf.html=function(a,b){return za(a,"text/html",Rf,b)},Sf.xml=ya(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(Sf):"object"==typeof module&&module.exports&&(module.exports=Sf),this.d3=Sf}(),window.Rubix=window.Rubix||{};var RubixListeners=[],isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,useTable=isSafari?"inline":"table";Rubix=function(a,b){this.chart_counter=0,this.master_id=this.uid("master_id"),RubixListeners.push(this.master_id),this.data_stack={},this.chart_stack={},this.area_stack_data_stack=[],this.column_stack_data_stack=[],this.root_elem=$(a),this.root_elem.css("position","relative"),this.root_elem.addClass("rubixcc-main-chart"),this.root_elem.append('<div class="rubixcc-tooltip"></div>'),this.root_elem.append('<div class="rubixcc-title"></div>'),this.root_elem.append('<div class="rubixcc-subtitle"></div>'),this.root_elem.append('<div class="rubixcc-chart text-center"><div style="margin-top:5px">Loading...</div></div>'),this.root_elem.append('<div class="rubixcc-legend"></div>');var c=b.width||"100%",d=b.height||150;this.root_elem.width(c).height(d),this.elem=this.root_elem.find(".rubixcc-chart"),b.tooltip=b.tooltip||{},this.tooltip=this.root_elem.find(".rubixcc-tooltip"),this.tooltip.hide(),b&&b.tooltip&&b.tooltip.animate&&this.tooltip.addClass("animate"),this.tooltip.html(""),this.tooltip.css({"font-family":'Lato, "Lucida Grande", Arial, Helvetica, sans-serif',"font-size":"12px",position:"absolute",background:"white",color:"#89949B",padding:"10px 15px",display:"none","pointer-events":"none","border-radius":"5px","z-index":100,"min-height":75,"user-select":"none",cursor:"default",border:"3px solid "+(b.tooltip.color?b.tooltip.color:"#89949B"),"box-shadow":"rgba(0, 0, 0, 0.2) 2px 4px 8px",background:"white"}),b.legend=b.legend||{},this.legend=this.root_elem.find(".rubixcc-legend"),this.legend.css({"font-family":"Lato, 'Lucida Grande', Arial, Helvetica, sans-serif","text-align":"center","margin-top":b.legend.top||"-10px","margin-bottom":b.legend.bottom||"5px","user-select":"none",display:b.hideLegend?"none":"block"}),this.title=this.root_elem.find(".rubixcc-title"),this.subtitle=this.root_elem.find(".rubixcc-subtitle"),this.title.css({"font-family":"Lato, 'Lucida Grande', Arial, Helvetica, sans-serif","text-align":"center","user-select":"none","font-weight":"bold","font-size":"16px",color:"steelblue","margin-top":"10px",cursor:"default"}),this.subtitle.css({"font-family":"Lato, 'Lucida Grande', Arial, Helvetica, sans-serif","text-align":"center","user-select":"none","font-size":"12px",color:"steelblue","margin-top":"5px",cursor:"default",opacity:.8,"font-weight":"bold"});var e=this;this.tooltip.on({mouseover:function(a){d3.select(e.elem.find(".overlay").get(0)).node().__onmousemove(a)},mousemove:function(a){d3.select(e.elem.find(".overlay").get(0)).node().__onmousemove(a)},mouseout:function(a){$(this).hide()}}),this.elem.css({width:"100%",height:parseInt(this.root_elem.get(0).style.height),"user-select":"none",cursor:"default",position:"relative"}),this.root_elem.css("height","100%"),this.opts=b||{},this.data={},this.charts={},this.extent=[],this.extent_coordinates=[],this.is_touch_device="ontouchstart"in document.documentElement,this.d3_eventSource=function(){for(var a,b=d3.event;a=b.sourceEvent;)b=a;return b},this.custom_interpolations={sankey:function(a){for(var b,c,d,e=a[0][0],f=a[0][1],g=[e,",",f],h=0,i=a.length;++h<i;)b=a[h][0],c=a[h][1],d=(e+b)/2,g.push("C",d,",",f," ",d,",",c," ",b,",",c),e=b,f=c;return g.join("")}},this.xlabelcolor="steelblue",this.ylabelcolor="steelblue",this.first_time=!0,this.last_render=null,this.data_changed=!1,this.setup()},Rubix.prototype.setup=function(){this._setupOpts(),this._setupOnce(),this._setupRedraw(),this.draw()},Rubix.prototype.draw=function(){if(!this.data_changed){if(null!==this.last_render&&Date.now()-this.last_render<300)return;this.last_render=Date.now()}this.data_changed=!1,this.root_elem.is(":visible")&&this._draw($(window).width(),$(window).height())},Rubix.prototype.uid=function(a){return"rubixcc-"+a+"-"+Math.floor(2147483648*Math.random()).toString(36)},Rubix.prototype._setupOpts=function(){if(this.opts.theme_style=this.opts.theme_style||$("body").attr("data-theme")||"light",this.opts.theme_style_color=this.opts.gridColor||("light"===this.opts.theme_style?"#C0D0E0":"#555"),this.opts.theme_focus_line_color=this.opts.focusLineColor||("light"===this.opts.theme_style?"#C0D0E0":"#888"),this.opts.tickColor=this.opts.tickColor||("light"===this.opts.theme_style?"#666":"#999"),this.opts.titleColor=this.opts.titleColor||"steelblue",this.opts.subtitleColor=this.opts.subtitleColor||"steelblue",this.opts.legend_color_brightness=this.opts.legend_color_brightness||.5,this.title.css("color",this.opts.titleColor),this.subtitle.css("color",this.opts.subtitleColor),("dark"===this.opts.theme_style||"dark"===this.opts.tooltip.theme_style)&&this.tooltip.css({color:"#aaa","font-weight":"bold",border:"1px solid #222","background-color":"#303030"}),this.opts.margin=this.opts.margin||{},this.margin={top:this.opts.margin.top>=0?this.opts.margin.top:25,left:this.opts.margin.left>=0?this.opts.margin.left:25,right:this.opts.margin.right>=0?this.opts.margin.right:12.5,bottom:this.opts.margin.bottom>=0?this.opts.margin.bottom:25},this.opts.draw=this.opts.draw||{},this.opts.draw={grid:this.opts.draw.grid===!1?!1:!0},this.opts.invertAxes=this.opts.invertAxes||!1,this.opts.axis=this.opts.axis||{},this.opts.axis.x=this.opts.axis.x||{},this.opts.axis.y=this.opts.axis.y||{},this.axis={x:{type:this.opts.axis.x.type||"linear",range:this.opts.axis.x.range||"",tickCount:this.opts.axis.x.tickCount,tickFormat:this.opts.axis.x.tickFormat||"",label:this.opts.axis.x.label||"",labelColor:this.opts.axis.x.labelColor||"steelblue"},y:{type:this.opts.axis.y.type||"linear",range:this.opts.axis.y.range||"",
tickCount:this.opts.axis.y.tickCount,tickFormat:this.opts.axis.y.tickFormat||"",label:this.opts.axis.y.label||"",labelColor:this.opts.axis.y.labelColor||"steelblue"}},this.xlabelcolor=this.opts.axis.x.labelColor,this.ylabelcolor=this.opts.axis.y.labelColor,this.axis.x.label.length&&(this.opts.invertAxes?this.margin.left+=15:this.margin.bottom+=15),this.axis.y.label.length&&(this.opts.invertAxes?this.margin.bottom+=15:this.margin.left+=15),this.margin.defaultLeft=this.margin.left,this.opts.tooltip=this.opts.tooltip||{},this.opts.tooltip.format=this.opts.tooltip.format||{},this.opts.tooltip.abs=this.opts.tooltip.abs||{},this.tooltipFormatter={format:{x:this.opts.tooltip.format.x||"",y:this.opts.tooltip.format.y||""},abs:{x:this.opts.tooltip.abs.hasOwnProperty("x")?this.opts.tooltip.abs.x:!1,y:this.opts.tooltip.abs.hasOwnProperty("y")?this.opts.tooltip.abs.y:!1}},this.opts.invertAxes){var a=this.axis.x;this.axis.x=this.axis.y,this.axis.y=a;var b=this.tooltipFormatter.format.x;this.tooltipFormatter.format.x=this.tooltipFormatter.format.y,this.tooltipFormatter.format.y=b}switch(0!==this.opts.animationSpeed&&(this.animationSpeed=this.opts.animationSpeed||750),this.opts.interval=this.opts.start_interval||0,this.stacked=this.opts.stacked||!1,this.grouped=this.opts.grouped||!1,this.offset=this.opts.offset||"zero",this.order=this.opts.order||"default",this.show_markers=this.opts.show_markers||!1,this.resize=this.opts.resize||"debounced",this.interpolate=this.opts.interpolate||"linear",this.interpolate){case"sankey":this.interpolate=this.custom_interpolations[this.interpolate]}this.master_detail=this.opts.master_detail||!1,this.master_detail_height=this.opts.master_detail_height||50,this.master_detail&&(this.master_detail_margin_bottom=this.margin.bottom,this.margin.bottom=2*this.margin.bottom+this.master_detail_height),this.opts.title=this.opts.title||"",this.opts.subtitle=this.opts.subtitle||"",this.title.html(this.opts.title),this.subtitle.html(this.opts.subtitle),(this.opts.title.length||this.opts.subtitle.length)&&this.elem.css("margin-top","-20px"),this.opts.title.length?this.title.show():this.title.hide(),this.opts.subtitle.length?this.subtitle.show():this.subtitle.hide()},Rubix.prototype._setupOnce=function(){this.area_stack_data=[],this.area_stack=d3.layout.stack(),this.area_stack.offset(this.offset),this.area_stack.order(this.order),this.area_stack.values(function(a){return a.values}),this.area_stack.x(function(a){return a.x}),this.area_stack.y(function(a){return a.y}),this.area_stack.out(function(a,b,c){a.y0=b,a.y_new=c}),this.column_stack_data=[],this.column_stack=d3.layout.stack(),this.column_stack.offset("zero"),this.column_stack.order("default"),this.column_stack.values(function(a){return a.values}),this.column_stack.x(function(a){return a.x}),this.column_stack.y(function(a){return a.y}),this.column_stack.out(function(a,b,c){a.y0=b,a.y_new=c})},Rubix.prototype._setupAxis=function(a){switch(this.axis.x.type){case"linear":this.x=d3.scale.linear(),this.x.tickFormat(d3.format(this.axis.x.tickFormat));var b=[0,this.width],c=[0,this.width];this.master_detail&&(this.x2=d3.scale.linear()),"round"===this.axis.x.range?(this.x.rangeRound(b),this.master_detail&&this.x2.rangeRound(c)):(this.x.range(b),this.master_detail&&this.x2.range(c));break;case"ordinal":this.x=d3.scale.ordinal();var b=[0,this.width],c=[0,this.width];if(this.master_detail)throw this.canvas.select(".noData").text("Master-Detail chart only for quantitative scales."),new Error("Master-Detail chart only for quantitative scales.");"round"===this.axis.x.range?this.x.rangeRoundBands(b):"column"==this.axis.x.range||"bar"==this.axis.x.range?this.x.rangeRoundBands(b,.35):(this.x.rangePoints(b),this.master_detail&&this.x2.rangePoints(b));break;case"datetime":this.x=d3.time.scale(),this.x.ticks(d3.time.year,50),this.x.tickFormat(d3.format(this.axis.x.tickFormat));var b=[0,this.width],c=[0,this.width];this.master_detail&&(this.x2=d3.time.scale()),"round"===this.axis.x.range?(this.x.rangeRound(b),this.master_detail&&this.x2.rangeRound(c)):(this.x.range(b),this.master_detail&&this.x2.range(c));break;default:throw new Error("Unknown Scale for X Axis: "+this.axis.x.type)}switch(this.axis.y.type){case"linear":this.y=d3.scale.linear(),this.y.clamp(!0),this.y.tickFormat(d3.format(this.axis.y.tickFormat));var b=[this.height,0],c=[this.master_detail_height,0];this.master_detail&&(this.y2=d3.scale.linear(),this.y2.clamp(!0)),"round"===this.axis.y.range?(this.y.rangeRound(b),this.master_detail&&this.y2.rangeRound(c)):(this.y.range(b),this.master_detail&&this.y2.range(c));break;case"ordinal":this.y=d3.scale.ordinal();var b=[this.height,0],c=[this.master_detail_height,0];this.master_detail&&(this.y2=d3.scale.ordinal()),"round"===this.axis.y.range?(this.y.rangeRoundBands(b),this.master_detail&&this.y2.rangeRoundBands(c)):"column"==this.axis.y.range||"bar"==this.axis.y.range?this.y.rangeRoundBands(b,.35):(this.y.rangePoints(b),this.master_detail&&this.y2.rangePoints(c));break;case"datetime":this.y=d3.time.scale(),this.y.tickFormat(d3.format(this.axis.y.tickFormat)),this.y.clamp(!0);var b=[this.height,0],c=[this.master_detail_height,0];this.master_detail&&(this.y2=d3.time.scale(),this.y2.clamp(!0)),"round"===this.axis.y.range?(this.y.rangeRound(b),this.master_detail&&this.y2.rangeRound(c)):(this.y.range(b),this.master_detail&&this.y2.range(c));break;default:throw new Error("Unknown Scale for X Axis: "+this.axis.y.type)}this.fontSize=10;var d=Math.floor(this.height/(this.fontSize+3)/2);if(this.xAxis=d3.svg.axis(),this.xAxis.scale(this.x).orient("bottom"),this.master_detail&&(this.xAxis2=d3.svg.axis(),this.xAxis2.scale(this.x2).orient("bottom")),"round"!==this.axis.x.range||"linear"!==this.axis.x.type&&"datetime"!==this.axis.x.type||("linear"===this.axis.x.type?this.xAxis.tickFormat(d3.format(this.axis.x.tickFormat)):"datetime"===this.axis.x.type&&this.xAxis.tickFormat(d3.time.format(this.axis.x.tickFormat)),this.master_detail&&("linear"===this.axis.x.type?this.xAxis2.tickFormat(d3.format(this.axis.x.tickFormat)):this.xAxis2.tickFormat(d3.time.format(this.axis.x.tickFormat)))),this.axis.x.tickFormat&&("linear"===this.axis.x.type?this.xAxis.tickFormat(d3.format(this.axis.x.tickFormat)):"datetime"===this.axis.x.type&&this.xAxis.tickFormat(d3.time.format(this.axis.x.tickFormat)),this.master_detail&&("linear"===this.axis.x.type?this.xAxis2.tickFormat(d3.format(this.axis.x.tickFormat)):this.xAxis2.tickFormat(d3.time.format(this.axis.x.tickFormat)))),this.xGrid=d3.svg.axis(),this.xGrid.scale(this.x).orient("bottom").ticks(5).tickSize(-this.height,0,0).tickFormat(""),void 0!==this.axis.x.tickCount&&this.xGrid.ticks(this.axis.x.tickCount),this.master_detail&&(this.xGrid2=d3.svg.axis(),this.xGrid2.scale(this.x2).orient("bottom").ticks(5).tickSize(-this.master_detail_height,0,0).tickFormat("")),this.yAxis=d3.svg.axis(),this.yAxis.scale(this.y).orient("left"),this.yAxis.ticks(d),"round"!==this.axis.y.range||"linear"!==this.axis.y.type&&"datetime"!==this.axis.y.type||("linear"===this.axis.y.type?this.yAxis.tickFormat(d3.format(this.axis.y.tickFormat)):"datetime"===this.axis.y.type&&this.yAxis.tickFormat(d3.time.format(this.axis.y.tickFormat))),this.axis.y.tickFormat&&("linear"===this.axis.y.type?this.yAxis.tickFormat(d3.format(this.axis.y.tickFormat)):"datetime"===this.axis.y.type&&this.yAxis.tickFormat(d3.time.format(this.axis.y.tickFormat))),this.yGrid=d3.svg.axis(),this.yGrid.scale(this.y).orient("left").ticks(5).tickSize(-this.width,0,0).tickFormat(""),void 0!==this.axis.y.tickCount&&this.yGrid.ticks(this.axis.y.tickCount),this.xAxisGroup=this.axis_group.append("g"),this.xAxisGroup.attr("class","x axis"),this.xAxisGroup.attr("transform","translate(0, "+this.height+")"),this.xAxisGroup.call(this.xAxis),this.xAxisGroup.select("path").style("fill","none").style("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges"),this.xAxisGroup.selectAll("line").attr("fill","none").attr("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges"),this.master_detail&&(this.xAxisGroup2=this.md_root.append("g"),this.xAxisGroup2.attr("class","x axis"),this.xAxisGroup2.call(this.xAxis2),this.xAxisGroup2.select("path").style("fill","none"),this.xAxisGroup2.select("line").style("fill","none").style("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges"),this.xAxisGroup2.selectAll("line").attr("fill","none").attr("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges")),this.yAxisGroup=this.axis_group.append("g"),this.yAxisGroup.attr("class","y axis"),this.yAxisGroup.call(this.yAxis),this.yAxisGroup.select("path").style("fill","none").style("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges"),this.yAxisGroup.selectAll("line").attr("fill","none").attr("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges"),this.opts.draw.grid&&(this.xGridGroup=this.grid_group.append("g"),this.xGridGroup.attr("class","x grid"),this.xGridGroup.attr("transform","translate(0,"+this.height+")"),this.xGridGroup.call(this.xGrid),this.xGridGroup.selectAll("path").style("stroke-width",0),this.xGridGroup.selectAll(".tick").style("stroke",this.opts.theme_style_color).style("opacity",.7)),this.master_detail&&(this.xGridGroup2=this.md_root.select(".md-grid").append("g"),this.xGridGroup2.attr("class","x grid"),this.xGridGroup2.attr("transform","translate(0,"+this.master_detail_height+")"),this.xGridGroup2.call(this.xGrid2),this.xGridGroup2.selectAll("path").style("stroke-width",0),this.xGridGroup2.selectAll(".tick").style("stroke","lightgray").style("opacity",.7)),this.opts.draw.grid&&(this.yGridGroup=this.grid_group.append("g"),this.yGridGroup.attr("class","y grid"),this.yGridGroup.call(this.yGrid),this.yGridGroup.selectAll("path").style("stroke-width",0),this.yGridGroup.selectAll(".tick").style("stroke",this.opts.theme_style_color).style("opacity",.7)),this.resetAxis(a),this.master_detail){if("ordinal"===this.axis.x.type)throw this.canvas.select(".noData").text("Master-Detail chart only for quantitative scales."),new Error("Master-Detail chart only for quantitative scales.");this.brush=d3.svg.brush(),this.brush.x(this.x2);var e=this;"datetime"===this.axis.x.type?this.brush.on("brushend",function(){if(e.is_touch_device)var a=d3.touches(this,e.d3_eventSource().changedTouches)[0];else var a=d3.mouse(this);var b=a[0];if(e.brush.empty()){var c=e.x2(+new Date(e.extent[0])),d=e.x2(+new Date(e.extent[1])),f=c-b,g=[];if(0>f){var h=c+Math.abs(f),i=d+Math.abs(f),j=e.x2(+new Date(e.x2.domain()[1]));if(i>j)h-=i-j,i=j,g=[e.x2.invert(h),e.x2.invert(i)];else{var k=Math.abs(h-i);g=[e.x2.invert(h-k/2),e.x2.invert(i-k/2)]}}else{var h=c-Math.abs(f),i=d-Math.abs(f),k=Math.abs(h-i),l=h-k/2,m=i-k/2,n=e.x2(+new Date(e.x2.domain()[0]));n>l&&(m+=n-l,l=n),g=[e.x2.invert(l),e.x2.invert(m)]}e.extent=g,e.brush.extent(e.extent),e.brush_path.call(e.brush),e._brush()}var o=e.brush_path.select(".extent").attr("x"),p=e.brush_path.select(".extent").attr("width"),q=e.brush_path.select(".extent").attr("height");e.brush_path.select(".left-extent").attr("height",q).attr("width",o).attr("x",0);var r=parseFloat(o)+parseFloat(p);e.brush_path.select(".right-extent").attr("height",q).attr("x",r).attr("width",e.md_root.attr("width")-r),e.brush_path.select(".left-border").attr("width",1).attr("x",o),e.brush_path.select(".left-top-border").attr("width",o),e.brush_path.select(".right-border").attr("width",1).attr("x",r),e.brush_path.select(".right-top-border").attr("x",r).attr("width",e.md_root.attr("width")-r),e.brush_path.select(".bottom-border").attr("x",o).attr("width",p).attr("transform","translate(0, "+(e.master_detail_height+5)+")")}):this.brush.on("brushend",function(){if(e.is_touch_device)var a=d3.touches(this,e.d3_eventSource().changedTouches)[0];else var a=d3.mouse(this);var b=e.x2.invert(a[0]);if(e.brush.empty()){var c=e.extent[0],d=e.extent[1],f=c-b,g=[];if(0>f){var h=c+Math.abs(f),i=d+Math.abs(f),j=e.x2.domain()[1];if(i>j)h-=i-j,i=j,g=[h,i];else{var k=Math.abs(h-i);g=[h-k/2,i-k/2]}}else{var h=c-Math.abs(f),i=d-Math.abs(f),k=Math.abs(h-i),l=h-k/2,m=i-k/2,n=e.x2.domain()[0];n>l&&(m+=n-l,l=n),g=[l,m]}e.extent=g,e.brush.extent(e.extent),e.brush_path.call(e.brush),e._brush()}var o=e.brush_path.select(".extent").attr("x"),p=e.brush_path.select(".extent").attr("width"),q=e.brush_path.select(".extent").attr("height");e.brush_path.select(".left-extent").attr("height",q).attr("width",o).attr("x",0);var r=parseFloat(o)+parseFloat(p);e.brush_path.select(".right-extent").attr("height",q).attr("x",r).attr("width",e.md_root.attr("width")-r),e.brush_path.select(".left-border").attr("width",1).attr("x",o),e.brush_path.select(".left-top-border").attr("width",o),e.brush_path.select(".right-border").attr("width",1).attr("x",r),e.brush_path.select(".right-top-border").attr("x",r).attr("width",e.md_root.attr("width")-r),e.brush_path.select(".bottom-border").attr("x",o).attr("width",p).attr("transform","translate(0, "+(e.master_detail_height+5)+")")}),this.brush.on("brush",function(){var a=e.d3_eventSource().type;("mousemove"===a||"touchmove"===a)&&($(window).trigger("rubix.sidebar.off"),e._brush(!0,"root"));var b=e.brush_path.select(".extent").attr("x"),c=e.brush_path.select(".extent").attr("width"),d=e.brush_path.select(".extent").attr("height");e.brush_path.select(".left-extent").attr("height",d).attr("width",b).attr("x",0);var f=parseFloat(b)+parseFloat(c);e.brush_path.select(".right-extent").attr("height",d).attr("x",f).attr("width",e.md_root.attr("width")-f),e.brush_path.select(".left-border").attr("width",1).attr("x",b),e.brush_path.select(".left-top-border").attr("width",b),e.brush_path.select(".right-border").attr("width",1).attr("x",f),e.brush_path.select(".right-top-border").attr("x",f).attr("width",e.md_root.attr("width")-f),e.brush_path.select(".bottom-border").attr("x",b).attr("width",c).attr("transform","translate(0, "+(e.master_detail_height+5)+")")}),this.extent.length&&(this.brush.extent(this.extent),this.extent_coordinates.length||("datetime"===this.axis.x.type||"datetime"===this.axis.y.type?this.extent_coordinates=[this.x2(+new Date(this.extent[0])),this.x2(+new Date(this.extent[1]))]:this.extent_coordinates=[this.x2(this.extent[0]),this.x2(this.extent[1])]),this._brush())}},Rubix.prototype._setupSeries=function(){this.grid_group=this.root.append("g").attr("class","grid_group"),this.axis_group=this.root.append("g").attr("class","axis_group"),this.opts.hideGrid&&this.grid_group.style("display","none"),this.opts.hideAxisAndGrid&&(this.grid_group.style("display","none"),this.axis_group.style("display","none")),this.root_cb_series=this.root.append("g").attr("class","cb_series"),this.root_stacked_area_series=this.root.append("g").attr("class","stacked_area_series"),this.root_area_series=this.root.append("g").attr("class","area_series"),this.root_line_series=this.root.append("g").attr("class","line_series"),this.focus_line_group=this.root.append("g").attr("class","focus_line_group"),this.symbols_group=this.root.append("g").attr("class","symbols"),this.focus_group=this.root.append("g").attr("class","focus_group"),this.master_detail&&(this.md_root_stacked_area_series=this.md_layers.append("g").attr("class","md_stacked_area_series"),this.md_root_area_series=this.md_layers.append("g").attr("class","md_area_series"),this.md_root_line_series=this.md_layers.append("g").attr("class","md_line_series"))},Rubix.prototype.resetExtent=function(){var a=this.brush.extent();if(a.length){var b=this.extent_coordinates[0],c=this.extent_coordinates[1];"datetime"===this.axis.x.type||"datetime"===this.axis.y.type?this.extent=[this.x2.invert(+new Date(b)),this.x2.invert(+new Date(c))]:this.extent=[this.x2.invert(b),this.x2.invert(c)],this.brush.extent(this.extent),this._brush_nochange()}},Rubix.prototype._brush_nochange=function(){try{this.x.domain(this.extent),this.callAxis();for(var a in this.charts)this.charts[a].noRedraw(this)}catch(b){}},Rubix.prototype._brush=function(a,b){var c=this.brush.empty()?this.x2.domain():this.brush.extent();"datetime"===this.axis.x.type||"datetime"===this.axis.y.type?(this.extent=c,a&&"root"===b&&(this.extent_coordinates=[this.x2(+new Date(this.extent[0])),this.x2(+new Date(this.extent[1]))])):(this.extent=c,a&&"root"===b&&(this.extent_coordinates=[this.x2(this.extent[0]),this.x2(this.extent[1])])),this._brush_nochange()},Rubix.prototype._setupOrdinalAxis=function(a){var b,c,d={},e={},f=[],g=[];this.crosshair_data=[],_o_data=[];var h={},i={};if("ordinal"===this.axis.x.type||"ordinal"===this.axis.y.type){for(var j in this.data){c=this.data[j];for(var k=this.charts[j],l=0;l<c.length;l++){var m=c[l].x,n=0;if(this.stacked){if(c[l].hasOwnProperty("y0"))var n=c[l].y0;if(c[l].hasOwnProperty("y_new"))if(this.grouped&&"column_series"===k.type)var o=c[l].y_new;else var o=c[l].y_new+n;else var o=c[l].y}else var o=c[l].y;g.push(o),d.hasOwnProperty(m)||(d[m]=[]),d[m].push(o),a&&(e.hasOwnProperty(o)||(e[o]=[]),e[o].push(m)),h.hasOwnProperty(m)||(h[m]={}),h[m][j]=o,i.hasOwnProperty(m)||(i[m]={}),i[m][j]={y0:n}}}for(var p in d)f.push(p);if(a)for(var p in e)_o_data.push(p);if(this.stacked){var q=d3.min(g,function(a){return isNaN(a)?0:a});q=0>q?q:0;var b=[q,d3.max(g,function(a){return isNaN(a)?0:a})]}else var b=d3.extent(g);var r=b[0],s=b[1];if(this.opts.invertAxes){if(this.axis.y.tickFormat.length){for(var l=0;l<f.length;l++)f[l]=+f[l];f.sort(function(a,b){return a>b?1:a===b?0:-1})}if(a){if(this.axis.x.tickFormat.length){for(var l=0;l<_o_data.length;l++)_o_data[l]=+_o_data[l];_o_data.sort(function(a,b){return a>b?1:a===b?0:-1})}this.x.domain(_o_data),this.y.domain(f.reverse()),this.master_detail&&(this.x2.domain(_o_data),this.y2.domain(f))}else this.x.domain([r,s]),this.y.domain(f.reverse()),this.master_detail&&(this.x2.domain([r,s]),this.y2.domain(f))}else{if(this.axis.x.tickFormat.length){for(var l=0;l<f.length;l++)f[l]=+f[l];f.sort(function(a,b){return a>b?1:a===b?0:-1})}if(a){if(this.axis.y.tickFormat.length){for(var l=0;l<_o_data.length;l++)_o_data[l]=+_o_data[l];_o_data.sort(function(a,b){return a>b?1:a===b?0:-1})}this.x.domain(f),this.y.domain(_o_data),this.master_detail&&(this.x2.domain(f),this.y2.domain(_o_data))}else this.x.domain(f),this.y.domain([r,s]),this.master_detail&&(this.x2.domain(f),this.y2.domain([r,s]))}for(var m in h)if(this.opts.invertAxes){var t=this.y(m);this.crosshair_data.push({x:+t,y:h[m],others:i[m]})}else{var t=this.x(m);this.crosshair_data.push({x:+t,y:h[m],others:i[m]})}this.crosshair_data.sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1})}},Rubix.prototype._setupLinearAxis=function(){var a,b,c,d=null,e=null,f=null,g=null;this.crosshair_data=[];var h={},i={};for(var j in this.data){if(a=this.data[j],b=d3.extent(a,function(a){return a.x}),this.stacked){var k=d3.min(a,function(a){var b=a.y0+a.y_new;return isNaN(b)?a.y?a.y:0:b});k=0>k?k:0,c=[k,d3.max(a,function(a){var b=a.y0+a.y_new;return isNaN(b)?a.y?a.y:0:b})]}else c=d3.extent(a,function(a){return a.y});null===d?(d=b[0],e=b[1]):(d>=b[0]&&(d=b[0]),e<=b[1]&&(e=b[1])),null===f?(f=c[0],g=c[1]):(f>=c[0]&&(f=c[0]),g<=c[1]&&(g=c[1]));for(var l=0;l<a.length;l++){var m=a[l].x,n=0;if(this.stacked){if(a[l].hasOwnProperty("y0"))var n=a[l].y0;if(a[l].hasOwnProperty("y_new"))var o=a[l].y_new+n;else var o=a[l].y}else var o=a[l].y;h.hasOwnProperty(m)||(h[m]={}),h[m][j]=o,i.hasOwnProperty(m)||(i[m]={}),i[m][j]={y0:n}}}this.opts.invertAxes?(this.x.domain([f,g]),this.y.domain([e,d]),this.master_detail&&(this.x2.domain([f,g]),this.y2.domain([e,d]))):(this.x.domain([d,e]),this.y.domain([f,g]),this.master_detail&&(this.x2.domain([d,e]),this.y2.domain([f,g])));for(var m in h)this.crosshair_data.push({x:+m,y:h[m],others:i[m]});this.crosshair_data.sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1})},Rubix.prototype.resetAxis=function(a){try{"linear"===this.axis.x.type&&"linear"===this.axis.y.type?this._setupLinearAxis():"datetime"===this.axis.x.type&&"linear"===this.axis.y.type||"linear"===this.axis.x.type&&"datetime"===this.axis.y.type?this._setupLinearAxis():"ordinal"===this.axis.x.type&&"ordinal"===this.axis.y.type?this._setupOrdinalAxis(!0):("ordinal"===this.axis.x.type||"ordinal"===this.axis.y.type)&&this._setupOrdinalAxis(),this.callAxis(a)}catch(b){}},Rubix.prototype.callAxis=function(a){if(a){var b=this.root.transition().duration(this.animationSpeed);if(this.master_detail)var c=this.md_root.transition().duration(this.animationSpeed)}else{var b=this.root;if(this.master_detail)var c=this.md_root}if(this.hasData){if("ordinal"===this.axis.x.type){var d=this.x.domain();if(void 0!==this.axis.x.tickCount&&d.length>this.axis.x.tickCount){for(var e=this,f=d3.range(d.length).map(function(a){return a%e.axis.x.tickCount===0?d[a]:null}),g=[],h=0;h<f.length;h++)null!==f[h]&&g.push(f[h]);this.xAxis.tickValues(g)}}else void 0!==this.axis.x.tickCount&&(this.xAxis.ticks(this.axis.x.tickCount),this.master_detail&&this.xAxis2.ticks(this.axis.x.tickCount));if("ordinal"===this.axis.y.type||"linear"===this.axis.x.type||"datetime"===this.axis.x.type){var d=this.y.domain();if(void 0!==this.axis.y.tickCount&&d.length>this.axis.y.tickCount){var e=this,f=d3.range(d.length).map(function(a){return a%e.axis.y.tickCount===0?d[a]:""});this.yAxis.tickValues(f)}}else void 0!==this.axis.y.tickCount&&this.yAxis.ticks(this.axis.y.tickCount);this.canvas.select(".noData").style("display","none");try{b.selectAll(".x.axis").style("display",null).call(this.xAxis),b.selectAll(".y.axis").style("display",null).call(this.yAxis),b.selectAll(".x.grid").style("display",null).call(this.xGrid),b.selectAll(".y.grid").style("display",null).call(this.yGrid)}catch(i){}this.xAxisGroup.selectAll("line").attr("fill","none").attr("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges"),this.yAxisGroup.selectAll("line").attr("fill","none").attr("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges"),this.opts.draw.grid&&(this.xGridGroup.selectAll("path").style("stroke-width",0),this.xGridGroup.selectAll(".tick").style("stroke",this.opts.theme_style_color).style("opacity",.7),this.yGridGroup.selectAll("path").style("stroke-width",0),this.yGridGroup.selectAll(".tick").style("stroke",this.opts.theme_style_color).style("opacity",.7)),this.xAxisGroup.selectAll("text").style("font",this.fontSize+1+'px Lato, "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif').style("direction","ltr").style("fill",this.opts.tickColor).style("color",this.opts.tickColor).style("font-style","").style("font-variant","").style("font-weight","").style("line-height",""),this.yAxisGroup.selectAll("text").style("font",this.fontSize+1+'px Lato, "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif').style("direction","ltr").style("fill",this.opts.tickColor).style("color",this.opts.tickColor).style("font-style","").style("font-variant","").style("font-weight","").style("line-height",""),"dark"===this.opts.theme_style&&(this.xAxisGroup.selectAll("text").style("font-weight","bold"),this.yAxisGroup.selectAll("text").style("font-weight","bold"))}else this.canvas.select(".noData").style("display",null),b.selectAll(".x.axis").style("display","none"),b.selectAll(".y.axis").style("display","none"),b.selectAll(".x.grid").style("display","none"),b.selectAll(".y.grid").style("display","none");this.master_detail&&(this.hasData?(this.canvas.select(".noData").style("display","none"),c.selectAll(".x.axis").style("display",null).call(this.xAxis2),c.selectAll(".x.grid").style("display",null).call(this.xGrid2),this.xAxisGroup2&&(this.xAxisGroup2.selectAll("line").attr("fill","none").attr("stroke",this.opts.theme_style_color).style("shape-rendering","crispEdges"),this.xGridGroup2.selectAll("path").style("stroke-width",0),this.xGridGroup2.selectAll(".tick").style("stroke",this.opts.theme_style_color).style("opacity",.7),this.xAxisGroup2.selectAll("text").style("font",this.fontSize+1+'px Lato, "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif').style("direction","ltr").style("fill",this.opts.tickColor).style("color",this.opts.tickColor).style("font-style","").style("font-variant","").style("font-weight","").style("line-height",""),"dark"===this.opts.theme_style&&this.xAxisGroup2.selectAll("text").style("font-weight","bold")),this.yAxisGroup2&&(this.yAxisGroup2.selectAll("text").style("font",this.fontSize+1+'px Lato, "Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif').style("direction","ltr").style("fill",this.opts.tickColor).style("color",this.opts.tickColor).style("font-style","").style("font-variant","").style("font-weight","").style("line-height",""),"dark"===this.opts.theme_style&&this.yAxisGroup.selectAll("text").style("font-weight","bold"))):(this.canvas.select(".noData").style("display",null),c.selectAll(".x.axis").style("display","none"),c.selectAll(".y.axis").style("display","none"),c.selectAll(".x.grid").style("display","none"),c.selectAll(".y.grid").style("display","none"))),this.opts.hideYAxis&&this.yAxisGroup.style("display","none"),this.opts.hideXAxis&&this.xAxisGroup.style("display","none"),this.opts.hideXAxisTickLines&&this.xGridGroup.style("display","none"),this.opts.hideYAxisTickLines&&this.yGridGroup.style("display","none")},Rubix.prototype._setupRedraw=function(){var a=this;switch($(window).on("orientationchange."+this.master_id,function(){a.draw()}),$(window).on("rubix.redraw."+this.master_id,function(){a.draw()}),this.resize){case"always":$(window).on("resize.rubix."+this.master_id,function(){a.draw()});break;case"debounced":$(window).on("debouncedresize.rubix."+this.master_id,function(){a.draw()});break;case"throttled":$(window).on("throttledresize.rubix."+this.master_id,function(){a.draw()});break;default:throw new Error("Unknown resize type!")}},Rubix.prototype._draw=function(a,b){this._cleanElement(),this._setSize(),this._setupCanvas(),this._setupRoot(),this._setupSeries(),this._setupAxis();for(var c in this.charts)this.charts[c].redraw(this)},Rubix.prototype._cleanElement=function(){this.elem.children().remove()},Rubix.prototype._setSize=function(){this.outerWidth=this.elem.width(),this.outerHeight=this.elem.height(),this.opts.hideYAxis&&(this.margin.left=0,this.margin.right=0),this.opts.hideAxisAndGrid&&(this.margin.left=0,this.margin.right=0),this.width=this.outerWidth-this.margin.left-this.margin.right,this.height=this.outerHeight-this.margin.top-this.margin.bottom},Rubix.prototype._setupCanvas=function(){this.elem.html(""),this.canvas=d3.select(this.elem.get(0)).append("svg"),this.canvas.attr("width",this.outerWidth),this.canvas.attr("height",this.outerHeight),this.canvas.append("desc").text("Powered by Rubix"),this.defs=this.canvas.append("defs"),this.defs.append("clipPath").attr("id",this.master_id+"-clip").append("rect").attr("width",this.width).attr("height",this.height+20).attr("transform","translate(0, -20)")},Rubix.prototype._setupRoot=function(){if(this.root=this.canvas.append("g"),this.root.attr("width",this.width),this.root.attr("height",this.height),this.opts.hideAxisAndGrid?this.root.attr("transform","translate(0,"+this.margin.top+")"):this.root.attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.hasData?this.canvas.select(".noData").style("display","none"):this.canvas.append("text").attr("class","noData").attr("font-size","30px").attr("text-anchor","middle").attr("transform","translate("+this.outerWidth/2+","+this.outerHeight/2+")").attr("font-family",'Lato, "Lucida Grande", Arial, Helvetica, sans-serif').text("No Data"),this.master_detail){this.md_root=this.canvas.append("g"),this.md_root.attr("width",this.width),this.md_root.attr("height",this.master_detail_height),this.opts.hideAxisAndGrid||this.md_root.attr("transform","translate("+this.margin.left+","+(this.margin.top+this.height+this.master_detail_margin_bottom)+")");var a=this.md_root.append("rect");a.attr("width",this.md_root.attr("width")),a.attr("height",this.md_root.attr("height")),a.attr("fill","none"),a.attr("shape-rendering","crispEdges"),this.md_root.append("g").attr("class","md-grid").attr("width",this.md_root.attr("width")),this.md_layers=this.md_root.append("g").attr("class","md-layers").attr("clip-path","url(#"+this.master_id+"-clip)"),this.defs.append("clipPath").attr("id",this.master_id+"-clip-symbols").append("rect").attr("width",this.md_root.attr("width")).attr("height",this.height+20).attr("transform","translate(0, -10)"),this.defs.append("clipPath").attr("id",this.master_id+"-clip-brush").append("rect").attr("width",this.md_root.attr("width")+20).attr("height",this.master_detail_height).attr("transform","translate(-10, 1)")}},Rubix.prototype.marginLeft=function(a){return arguments.length?(10+a+10<this.margin.defaultLeft?this.margin.left=this.margin.defaultLeft:this.margin.left=10+a+10,this.axis.x.label.length&&this.opts.invertAxes&&(this.margin.left+=15),this.axis.y.label.length&&(this.opts.invertAxes||(this.margin.left+=15)),void this.draw()):this.margin.left},Rubix.prototype.forceRedraw=function(){try{this.hasData=!1;for(var a in this.charts)this.hasData=!0,this.charts[a].forceRedraw(this);this.hasData?(this.canvas.select(".noData").style("display","none"),this.root.selectAll(".axis").style("display",null)):(this.canvas.select(".noData").style("display",null),this.root.selectAll(".axis").style("display","none"))}catch(b){}},Rubix.prototype.resizePath=function(a){var b=+("e"==a),c=b?1:-1,d=this.master_detail_height/2;return"M"+.5*c+","+d+"A6,6 0 0 "+b+" "+6.5*c+","+(d+6)+"V"+(2*d-6)+"A6,6 0 0 "+b+" "+.5*c+","+2*d+"ZM"+2.5*c+","+(d+8)+"V"+(2*d-8)+"M"+4.5*c+","+(d+8)+"V"+(2*d-8)},Rubix.prototype._createBrushPath=function(){var a=this;this.brush_path&&this.brush_path.remove(),this.brush_path=this.md_root.append("g"),this.brush_path.attr("height",this.master_detail_height+5),this.brush_path.attr("width",this.md_root.attr("width")),this.brush_path.attr("class","x brush"),this.brush_path.attr("transform","translate(0, -4)"),this.brush_path.call(this.brush);var b="rgb(16, 16, 16)";"light"===this.opts.theme_style&&(b="white"),this.brush_path.selectAll(".extent").attr("stroke","none").attr("fill-opacity",0).attr("shape-rendering","crispEdges"),this.brush_path.insert("rect",".resize").attr("class","left-extent").attr("fill-opacity",.5).attr("fill",b).style("cursor","crosshair"),this.brush_path.insert("rect",".resize").attr("class","right-extent").attr("fill-opacity",.5).attr("fill",b).style("cursor","crosshair"),this.brush_path.insert("rect",".resize").attr("class","left-border").attr("x",0).style("fill",this.opts.theme_style_color),this.brush_path.insert("rect",".resize").attr("class","left-top-border").attr("x",0).style("fill",this.opts.theme_style_color),this.brush_path.insert("rect",".resize").attr("class","right-border").style("fill",this.opts.theme_style_color),this.brush_path.insert("rect",".resize").attr("class","right-top-border").style("fill",this.opts.theme_style_color),this.brush_path.insert("rect",".resize").attr("class","bottom-border").style("fill","rgb(16, 16, 16)").attr("fill-opacity",.3);var c=this.brush_path.select(".extent").attr("x"),d=this.brush_path.select(".extent").attr("width"),e=this.brush_path.select(".extent").attr("height");this.brush_path.select(".left-extent").attr("height",e).attr("width",c).attr("x",0);var f=parseFloat(c)+parseFloat(d);this.brush_path.select(".right-extent").attr("height",e).attr("x",f).attr("width",this.md_root.attr("width")-f),this.brush_path.select(".left-border").attr("width",1).attr("x",c),this.brush_path.select(".left-top-border").attr("width",c),this.brush_path.select(".right-border").attr("width",1).attr("x",f),this.brush_path.select(".right-top-border").attr("x",f).attr("width",this.md_root.attr("width")-f),this.brush_path.select(".bottom-border").attr("x",c).attr("width",d).attr("transform","translate(0, "+(this.master_detail_height+5)+")"),this.brush_path.selectAll(".resize").append("path").attr("d",function(b){return a.resizePath(b)}).style("fill","#EEE").style("stroke","#666").attr("transform","translate(0, -"+this.master_detail_height/5+")");
var g=this.brush_path.selectAll("rect");g.attr("height",this.master_detail_height+5),this.brush_path.select(".left-top-border").attr("height",1),this.brush_path.select(".right-top-border").attr("height",1),this.brush_path.select(".bottom-border").attr("height",1),this.extent.length||(this.extent=this.x2.domain(),this.brush.extent(this.extent),this._brush())},Rubix.prototype.bisectLeft=d3.bisector(function(a){return a.x}).left,Rubix.prototype.bisectRight=d3.bisector(function(a){return a.x}).right,Rubix.prototype.move_tooltip_x=function(a,b,c){var d;b.length&&(d=d3.mean(b)/b.length);var e=a;("column"===this.axis.x.range||"bar"===this.axis.x.range)&&(a+=this.x.rangeBand()/2);var f=this.root_elem,g=(this.tooltip.outerWidth()-this.tooltip.width())/2,h=a+this.margin.left+g,i=d,j=f.width(),k=h+this.tooltip.outerWidth();("column"===this.axis.x.range||"bar"===this.axis.x.range)&&(a=e-this.x.rangeBand()/2),k>j&&(h-=k-a-this.margin.left+g),this.tooltip.css("display","inline"),this.tooltip.css("display",useTable),this.tooltip.css({left:h,top:i});var l,m,n="";l=this.tooltipFormatter.format.x.length?"datetime"===this.axis.x.type?d3.time.format(this.tooltipFormatter.format.x):d3.format(this.tooltipFormatter.format.x):function(a){return a},m=this.tooltipFormatter.format.y.length?"datetime"===this.axis.y.type?d3.time.format(this.tooltipFormatter.format.y):d3.format(this.tooltipFormatter.format.y):function(a){return a};for(var o in c){var p,q;p=l("datetime"===this.axis.x.type?new Date(c[o].x):c[o].invert?this.x.invert(c[o].x):c[o].x),q="datetime"===this.axis.y.type?null!==c[o].y?m(new Date(c[o].y)):null:c[o].invert?null!==c[o].y?m(this.y.invert(c[o].y)):null:m(c[o].y),p=this.tooltipFormatter.abs.x?Math.abs(p):p,q=this.tooltipFormatter.abs.y?Math.abs(q):q;var r="<div style='color: "+c[o].opts.color+"; margin-bottom: 2px; line-height: 22px;'><b style='position:relative; top: -5px; left: -2px;'><span style='font-size: 22px;'>■ </span><span style='position:relative; top: -3px; left: -2px;'>"+o+"</span></b></div>",s="<div style='font-size: 10px; margin-top: -10px;'>x : "+p+" </div>",t="<div style='font-size: 10px; margin-top: -5px;'>y : "+q+" </div><br>";n=r+s+t+n}n=n.slice(0,n.length-4),this.tooltip.html(n);var u=this.tooltip.outerHeight(),v=u+d;v>=f.height()&&(i=this.margin.top,this.tooltip.css("top",i))},Rubix.prototype.move_tooltip_y=function(a,b,c){try{var d;b.length&&(d=d3.max(b));var e=d;("column"===this.axis.x.range||"bar"===this.axis.x.range)&&(d+=this.y.rangeBand()/2);var f=$(this.canvas.node()),g=(this.tooltip.outerWidth()-this.tooltip.width())/2,h=d+this.margin.left+g,i=a,j=f.width(),k=h+this.tooltip.outerWidth();("column"===this.axis.x.range||"bar"===this.axis.x.range)&&(d=e-this.y.rangeBand()/2),k>j&&(h-=k-d-this.margin.left+g);var l=f.height(),m=i+this.tooltip.outerHeight()+this.margin.bottom;m>l&&(i-=m-l),this.tooltip.css("display","inline"),this.tooltip.css("display",useTable),this.tooltip.css({left:h,top:i});var n,o,p="";n=this.tooltipFormatter.format.x.length?"datetime"===this.axis.x.type?d3.time.format(this.tooltipFormatter.format.x):d3.format(this.tooltipFormatter.format.x):function(a){return a},o=this.tooltipFormatter.format.y.length?"datetime"===this.axis.y.type?d3.time.format(this.tooltipFormatter.format.y):d3.format(this.tooltipFormatter.format.y):function(a){return a};for(var q in c){var r,s;r=o("datetime"===this.axis.y.type?new Date(c[q].y):c[q].invert?this.y.invert(c[q].y):c[q].y),s=n("datetime"===this.axis.x.type?new Date(c[q].x):c[q].invert?this.x.invert(c[q].x):c[q].x),r=this.tooltipFormatter.abs.x?Math.abs(r):r,s=this.tooltipFormatter.abs.y?Math.abs(s):s;var t="<div style='color: "+c[q].opts.color+"; margin-bottom: 2px'><b style='position:relative; top: -5px; left: -2px;'><span style='font-size: 22px;'>■ </span><span style='position:relative; top: -3px; left: -2px;'>"+q+"</span></b></div>",u="<div style='font-size: 10px; margin-top: -10px;'>x : "+r+" </div>",v="<div style='font-size: 10px; margin-top: -5px;'>y : "+s+" </div><br>";p=t+u+v+p}p=p.slice(0,p.length-4),this.tooltip.html(p)}catch(w){}},Rubix.prototype.overlayX=function(a,b){b[1];try{if("ordinal"===a.axis.x.type){var c=b[0];("column"===a.axis.x.range||"bar"===a.axis.x.range)&&(c-=a.x.rangeBand()/2);var d=a.bisectLeft(a.crosshair_data,c,1)}else var c=a.x.invert(b[0]+1),d=a.bisectLeft(a.crosshair_data,c,1);var e,f=a.crosshair_data[d-1],g=a.crosshair_data[d],h=c-f.x>g.x-c?g:f,i=h.y,j=(h.others,[]),k={},l=[];for(var m in a.charts)try{if(i.hasOwnProperty(m)){if("ordinal"===a.axis.x.type){if(null!==i[m]&&null!==h.others[m].y0){l.push(!0);var n=h.x,o=a.y(i[m]);("column"===a.axis.x.range||"bar"===a.axis.x.range)&&(a.grouped&&a.charts[m].hasOwnProperty("count")?n=h.x+a.x.rangeBand()/a.charts[m].layers.length*a.charts[m].count+a.x.rangeBand()/(2*a.charts[m].layers.length):n+=a.x.rangeBand()/2),a.charts[m].focus.attr("transform","translate("+n+","+o+")").style("display",null),e=("column"===a.axis.x.range||"bar"===a.axis.x.range)&&a.grouped&&a.charts[m].hasOwnProperty("count")?h.x+a.x.rangeBand()/2:n,j.push(o),k[m]={x:n,y:i[m]?o:null,opts:a.charts[m].opts,invert:!0}}}else{l.push(!0);var n=a.x(h.x),o=a.y(i[m]);a.charts[m].focus.attr("transform","translate("+n+","+o+")").style("display",null),e=n,j.push(o),k[m]={x:h.x,y:i[m],opts:a.charts[m].opts,invert:!1}}l.length&&a.charts[m].on_focus(n,o)}else a.charts[m].focus.style("display","none"),a.charts[m].off_focus()}catch(p){}if(l.length){if("ordinal"===a.axis.x.type){var n=h.x;("column"===a.axis.x.range||"bar"===a.axis.x.range)&&(n+=a.x.rangeBand()/2),a.focusLine.style("display",null).attr("transform","translate("+n+",0)")}else a.focusLine.style("display",null).attr("transform","translate("+a.x(h.x)+",0)");a.move_tooltip_x(e,j,k)}}catch(p){}},Rubix.prototype.overlayY=function(a,b){var c=(b[0],b[1]);try{"ordinal"===a.axis.y.type?("column"===a.axis.y.range||"bar"===a.axis.y.range)&&(c-=a.y.rangeBand()/2):c=a.y.invert(c);var d,e=a.bisectRight(a.crosshair_data,c,1),f=a.crosshair_data[e-1],g=a.crosshair_data[e],h=c-f.x>g.x-c?g:f,i=h.y,j=(h.others,[]),k={},l=[];for(var m in a.charts)try{if(i.hasOwnProperty(m)){if("ordinal"===a.axis.y.type){if(null!==i[m]&&null!==h.others[m].y0){l.push(!0);var n=h.x,o=a.x(i[m]);("column"===a.axis.y.range||"bar"===a.axis.y.range)&&(a.grouped&&a.charts[m].hasOwnProperty("count")?n=h.x+a.y.rangeBand()/a.charts[m].layers.length*a.charts[m].count+a.y.rangeBand()/(2*a.charts[m].layers.length):n+=a.y.rangeBand()/2),a.charts[m].focus.attr("transform","translate("+o+","+n+")").style("display",null),d=n,j.push(o),k[m]={x:o,y:n,opts:a.charts[m].opts,invert:!0}}}else{l.push(!0);var n=a.y(h.x),o=a.x(i[m]);a.charts[m].focus.attr("transform","translate("+o+","+n+")").style("display",null),d=n,j.push(o),k[m]={x:i[m],y:h.x,opts:a.charts[m].opts,invert:!1}}l.length&&a.charts[m].on_focus(o,n)}else a.charts[m].focus.style("display","none"),a.charts[m].off_focus()}catch(p){}if(l.length){if("ordinal"===a.axis.y.type){var n=h.x;("column"===a.axis.y.range||"bar"===a.axis.y.range)&&(n+=a.y.rangeBand()/2),a.focusLine.style("display",null).attr("transform","translate(0,"+n+")")}else a.focusLine.style("display",null).attr("transform","translate(0,"+a.y(h.x)+")");a.move_tooltip_y(d,j,k)}}catch(p){}},Rubix.prototype.resetFocus=function(a){if(this.width&&this.height){this.focusLine&&this.focusLine.remove(),this.symbols&&this.symbols.remove(),this.overlay&&this.overlay.remove(),this.xlabel&&this.xlabel.remove(),this.ylabel&&this.ylabel.remove();var b=this;this.axis.x.label.length&&(this.xlabel=this.root.append("text"),this.xlabel.style("font-size","12px"),this.xlabel.style("font-weight","bold"),this.xlabel.style("font-family",'Lato, "Lucida Grande", Arial, Helvetica, sans-serif'),this.xlabel.attr("fill",this.xlabelcolor||"steelblue"),this.xlabel.attr("stroke","none"),this.xlabel.style("text-anchor","middle"),this.opts.invertAxes?(this.xlabel.attr("y",-this.margin.left+20),this.xlabel.attr("x",-parseInt(this.root.attr("height"))/2),this.xlabel.attr("transform","rotate(-90)"),this.xlabel.text(this.axis.y.label)):(this.xlabel.attr("y",parseInt(this.root.attr("height"))+this.margin.bottom-15),this.xlabel.attr("x",parseInt(this.root.attr("width"))/2),this.xlabel.text(this.axis.x.label))),this.axis.y.label.length&&(this.ylabel=this.root.append("text"),this.ylabel.style("font-size","12px"),this.ylabel.style("font-weight","bold"),this.ylabel.style("font-family",'Lato, "Lucida Grande", Arial, Helvetica, sans-serif'),this.ylabel.attr("fill",this.ylabelcolor||"steelblue"),this.ylabel.attr("stroke","none"),this.ylabel.style("text-anchor","middle"),this.opts.invertAxes?(this.ylabel.attr("y",parseInt(this.root.attr("height"))+this.margin.bottom-15),this.ylabel.attr("x",parseInt(this.root.attr("width"))/2),this.ylabel.text(this.axis.x.label)):(this.ylabel.attr("y",-this.margin.left+20),this.ylabel.attr("x",-parseInt(this.root.attr("height"))/2),this.ylabel.attr("transform","rotate(-90)"),this.ylabel.text(this.axis.y.label))),this.opts.invertAxes?this.focusLine=this.focus_line_group.append("line").attr("x1",0).attr("y1",0).attr("x2",this.width).attr("y2",0).attr("stroke",this.opts.theme_focus_line_color).attr("stroke-width",1).attr("shape-rendering","crispEdges").style("display","none").attr("class","focus-line"):this.focusLine=this.focus_line_group.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",this.height).attr("stroke",this.opts.theme_focus_line_color).attr("stroke-width",1).attr("shape-rendering","crispEdges").style("display","none").attr("class","focus-line"),this.symbols=this.symbols_group.append("g");for(var c in b.charts)b.charts[c].on_complete_draw();var d=[];for(var c in b.charts)d.push(c);("column"==this.axis.x.range||"bar"==this.axis.x.range)&&d.reverse();for(var e=0;e<d.length;e++){var c=d[e];b.charts[c].setupFocus()}this.master_detail&&(a||this._createBrushPath()),this.overlay=this.root.append("rect"),this.overlay.attr("class","overlay"),this.overlay.attr("width",this.width),this.overlay.attr("height",this.height),this.overlay.attr("fill","none"),this.overlay.attr("pointer-events","all"),this.overlay.attr("clip-path","url(#"+this.master_id+"-clip)");var f=function(){$(window).trigger("rubix.sidebar.off"),d3.event.preventDefault(),b.focusLine.style("display",null),$(this).focus()},g=function(){if($(window).trigger("rubix.sidebar.off"),d3.event.preventDefault(),$(this).focus(),b.hasData){if(b.is_touch_device)var a=d3.touches(this)[0];else var a=d3.mouse(this);if(console.log(a),b.opts.invertAxes){if(a[1]<0||a[1]>b.height)return;b.overlayY.call(this,b,a)}else{if(a[0]<0||a[0]>b.width)return;b.overlayX.call(this,b,a)}}},h=function(){$(window).trigger("rubix.sidebar.on"),d3.event.preventDefault(),$(this).focus(),b.tooltip.hide();for(var a in b.charts)try{b.charts[a].focus.style("display","none"),b.charts[a].off_focus()}catch(c){}b.focusLine.style("display","none")};b.is_touch_device?window.navigator.msPointerEnabled?(this.overlay.on("MSPointerDown",f),this.overlay.on("MSPointerMove",g),this.overlay.on("MSPointerUp",h)):(this.overlay.on("touchstart",f),this.overlay.on("touchmove",g),this.overlay.on("touchend",h)):(this.overlay.on("mouseover",f),this.overlay.on("mousemove",g),this.overlay.on("mouseout",h))}},Rubix.prototype.runCommand=function(a){for(var b in this.charts)try{this.charts[b][a](this)}catch(c){}},Rubix.prototype.resetLabelHandlers=function(){var a=this;$("."+this.master_id+"-legend-labels").css({opacity:.9}),$("."+this.master_id+"-legend-labels").off().on({hover:function(a){var b=$(this).hasClass("toggle");if(!b)switch(a.type){case"mouseenter":$(this).css({opacity:1});break;case"mouseleave":$(this).css({opacity:.9})}},click:function(b){var c=$(this).hasClass("toggle"),d=$(this).attr("data-name"),e=$(this).attr("data-type")||"";if(c){$(this).css({opacity:1}),$(this).removeClass("toggle");var f=a.chart_stack[d];if(a.charts[d]=f,delete a.chart_stack[d],e.length){var g=a.column_stack_data_stack,h=a.column_stack_data;"astack"===e&&(g=a.area_stack_data_stack,h=a.area_stack_data);for(var i,j=0,k=0;k<g.length;k++)if(g[k]){var l=g[k].key;if(l===d){j=g[k].orderKey,i=g[k],g.splice(k,1);break}}h.splice(j,0,i)}var m=a.data_stack[d];a.data[d]=m,delete a.data_stack[d],a.charts[d].show()}else{$(this).css({opacity:.2}),$(this).addClass("toggle");var f=a.charts[d];if(f.hidden(),delete a.charts[d],a.chart_stack[d]=f,e.length){var n=a.column_stack_data,o=a.column_stack_data_stack;"astack"===e&&(n=a.area_stack_data,o=a.area_stack_data_stack);for(var i,j=0,k=0;k<n.length;k++)if(n[k]){var l=n[k].key;if(l===d){j=n[k].orderKey,i=n[k],n.splice(k,1);break}}o.splice(j,0,i)}var m=a.data[d];a.data_stack[d]=m,delete a.data[d]}a.draw(),a.draw()}})},Rubix.prototype.line_series=function(a){if(a=a||{},a.name=a.name||this._generate_name(),this.charts.hasOwnProperty(a.name))throw new Error("Series exists: "+name);var b=new Rubix.LineSeries(this,a);return this.charts[b.name]=b,this.legend.append("<div class='"+this.master_id+"-legend-labels' data-name='"+b.name+"' style='cursor: pointer; display: inline-block; font-weight: bold; margin-right: 10px; color: "+b.opts.color+"'><span style='font-size: 22px;'>■ </span><span style='font-size: 12px; position:relative; top: -3px; left: -2px;'>"+b.name+"</span></div>"),this.resetLabelHandlers(),b},Rubix.prototype.area_series=function(a){if(a=a||{},a.name=a.name||this._generate_name(),this.charts.hasOwnProperty(a.name))throw new Error("Series exists: "+name);if(this.stacked){var b=new Rubix.StackedAreaSeries(this,a);return this.charts[b.name]=b,this.legend.append("<div class='"+this.master_id+"-legend-labels' data-name='"+b.name+"' data-type='astack' style='cursor: pointer; display: inline-block; font-weight: bold; margin-right: 10px; color: "+b.opts.color+"'><span style='font-size: 22px;'>■ </span><span style='font-size: 12px; position:relative; top: -3px; left: -2px;'>"+b.name+"</span></div>"),this.resetLabelHandlers(),b}var c=new Rubix.AreaSeries(this,a);return this.charts[c.name]=c,this.legend.append("<div class='"+this.master_id+"-legend-labels' data-name='"+c.name+"' style='cursor: pointer; display: inline-block; font-weight: bold; margin-right: 10px; color: "+c.opts.color+"'><span style='font-size: 22px;'>■ </span><span style='font-size: 12px; position:relative; top: -3px; left: -2px;'>"+c.name+"</span></div>"),this.resetLabelHandlers(),c},Rubix.prototype._generate_name=function(){return"Series "+ ++this.chart_counter},Rubix.prototype.column_series=function(a){if(a=a||{},a.name=a.name||this._generate_name(),this.charts.hasOwnProperty(a.name))throw new Error("Series exists: "+name);(this.opts.invertAxes!==!1||"column"!==this.opts.axis.x.range)&&(this.opts.invertAxes=!1,this.opts.axis.x.type="ordinal",this.opts.axis.x.range="column",this.setup());var b=new Rubix.ColumnSeries(this,a);return this.charts[b.name]=b,this.legend.append("<div class='"+this.master_id+"-legend-labels' data-name='"+b.name+"' data-type='cstack' style='cursor: pointer; display: inline-block; font-weight: bold; margin-right: 10px; color: "+b.opts.color+"'><span style='font-size: 22px;'>■ </span><span style='font-size: 12px; position:relative; top: -3px; left: -2px;'>"+b.name+"</span></div>"),this.resetLabelHandlers(),b},Rubix.prototype.bar_series=function(a){if(a=a||{},a.name=a.name||this._generate_name(),this.charts.hasOwnProperty(a.name))throw new Error("Series exists: "+name);(this.opts.invertAxes!==!0||"column"!==this.opts.axis.x.range)&&(this.opts.invertAxes=!0,this.opts.axis.x.type="ordinal",this.opts.axis.x.range="column",this.setup());var b=new Rubix.ColumnSeries(this,a);return this.charts[b.name]=b,this.legend.append("<div class='"+this.master_id+"-legend-labels' data-name='"+b.name+"' data-type='cstack' style='cursor: pointer; display: inline-block; font-weight: bold; margin-right: 10px; color: "+b.opts.color+"'><span style='font-size: 22px;'>■ </span><span style='font-size: 12px; position:relative; top: -3px; left: -2px;'>"+b.name+"</span></div>"),this.resetLabelHandlers(),b},window.Rubix=window.Rubix||{},Rubix.StackedAreaSeries=function(a,b){if(this.opts=b,this.opts.color=this.opts.color||"steelblue",this.opts.marker=this.opts.marker||"circle",this.opts.fillopacity=this.opts.fillopacity||.5,this.opts.strokewidth=this.opts.strokewidth||1,this.opts.noshadow=this.opts.noshadow||!1,this.show_markers=this.opts.show_markers,!this.opts.hasOwnProperty("name"))throw new Error("StackedAreaSeries should have a 'name' property");this.name=this.opts.name,this.chart_hidden=!1,this.temp_stack=[],this.setup=!1,this.last_stack=[],this.last_stack_name="",this.last_stack_added=!1,this._setup(a)},Rubix.StackedAreaSeries.prototype._setup=function(a){this.rubix=a,this.root=this.rubix.root,this.data=this.rubix.data,this.width=this.rubix.width,this.height=this.rubix.height,this.stack=this.rubix.area_stack,this.offset=this.rubix.area_offset,this.area_stack_data=this.rubix.area_stack_data,this.stacked_area_series=this.rubix.root_stacked_area_series,this.show_markers=void 0===this.show_markers?this.rubix.show_markers:this.show_markers,this.master_detail=this.rubix.master_detail,this.master_detail&&(this.md_root=this.rubix.md_root),this.id||(this.id=this.rubix.uid("stacked-area"));var b=this;this.line=d3.svg.line(),this.line.defined(function(a){return"expand"===b.rubix.offset?0===a.y_new&&1===a.y0?!1:!0:null!==a.y_new&&null!==a.x}),this.rubix.opts.invertAxes?(this.line.x(function(a){var c=a.y0+a.y_new;return isNaN(c)?0:b.rubix.x(c)}),this.line.y(function(a){return"column"===b.rubix.axis.y.range||"bar"===b.rubix.axis.y.range?b.rubix.y(a.x)+b.rubix.y.rangeBand()/2:b.rubix.y(a.x)}),this.line.interpolate(this.rubix.interpolate)):(this.line.x(function(a){return"column"===b.rubix.axis.x.range||"bar"===b.rubix.axis.x.range?b.rubix.x(a.x)+b.rubix.x.rangeBand()/2:b.rubix.x(a.x)}),this.line.y(function(a){var c=a.y0+a.y_new;return isNaN(c)?0:b.rubix.y(c)}),this.line.interpolate(this.rubix.interpolate)),this.area=d3.svg.area(),this.area.defined(this.line.defined()),this.rubix.opts.invertAxes?(this.area.x0(function(a){var c=a.y0;return isNaN(c)?0:b.rubix.x(c)}),this.area.x1(function(a){var c=a.y0+a.y_new;return isNaN(c)?0:b.rubix.x(c)}),this.area.y(function(a){return"column"===b.rubix.axis.y.range||"bar"===b.rubix.axis.y.range?b.rubix.y(a.x)+b.rubix.y.rangeBand()/2:b.rubix.y(a.x)}),this.area.interpolate(this.rubix.interpolate)):(this.area.x(function(a){return"column"===b.rubix.axis.x.range||"bar"===b.rubix.axis.x.range?b.rubix.x(a.x)+b.rubix.x.rangeBand()/2:b.rubix.x(a.x)}),this.area.y0(function(a){var c=a.y0;return isNaN(c)?0:b.rubix.y(c)}),this.area.y1(function(a){var c=a.y0+a.y_new;return isNaN(c)?0:b.rubix.y(c)}),this.area.interpolate(this.rubix.interpolate)),this.master_detail&&(this.master_line=d3.svg.line(),this.master_line.defined(function(a){return"expand"===b.rubix.area_offset?0===a.y_new&&1===a.y0?!1:!0:null!==a.y_new&&null!==a.x}),this.master_line.x(function(a){return b.rubix.x2(a.x)}),this.master_line.y(function(a){var c=a.y0+a.y_new;return isNaN(c)?0:b.rubix.y2(c)}),this.master_line.interpolate(this.rubix.interpolate),this.master_area=d3.svg.area(),this.master_area.defined(this.master_line.defined()),this.master_area.x(function(a){return b.rubix.x2(a.x)}),this.master_area.y0(function(a){var c=a.y0;return isNaN(c)?0:b.rubix.y2(c)}),this.master_area.y1(function(a){var c=a.y0+a.y_new;return isNaN(c)?0:b.rubix.y2(c)}),this.master_area.interpolate(this.rubix.interpolate))},Rubix.StackedAreaSeries.prototype.redraw=function(a){this._setup(a),this.draw()},Rubix.StackedAreaSeries.prototype.noRedraw=function(a){this._setup(a),this.draw(!0)},Rubix.StackedAreaSeries.prototype.addData=function(a){if(this.rubix.data_changed=!0,!(a instanceof Array)){if(!(a instanceof Object))throw new Error("Data must be an array or object");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");a=[a]}a.length&&(this.rubix.opts.noSort||a.sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),this.data[this.name]=a,this.area_stack_data.push({key:this.name,color:this.opts.color,values:this.data[this.name],fillopacity:this.opts.fillopacity,strokewidth:this.opts.strokewidth,orderKey:this.area_stack_data.length}),this.rubix.resetAxis(!0),this.rubix.forceRedraw(),this._animate_draw())},Rubix.StackedAreaSeries.prototype.draw=function(a){if(this.name&&this.data&&this.data.hasOwnProperty(this.name)&&this.data[this.name].length){var b=this.layers;try{this.layers=this.stack(this.area_stack_data)}catch(c){this.layers=b}var d=this,e=this.stacked_area_series.selectAll("."+this.id)[0].length;if(e)this.rubix.runCommand("globalRedraw");else{try{this.stacked_area_series.selectAll(".layer").remove(),this.stacked_area_series.selectAll("."+this.id+"-line").remove();var f=this.stacked_area_series.selectAll(".layer").data(this.layers,function(a){return a.key}),g=f.enter().append("path");if(g.attr("class","layer").attr("d",function(a){return d.area(a.values)}).attr("fill",function(a){return a.color}).attr("fill-opacity",function(a){return a.fillopacity}).attr("stroke","none"),f.exit().remove(),this.master_detail&&(g.attr("clip-path","url(#"+d.rubix.master_id+"-clip)"),g.classed("clipped",!0),!a)){var h=this.md_root.select(".md-layers > .md_stacked_area_series").selectAll(".layer").data(this.layers,function(a){return a.key}),i=h.enter().append("path");i.attr("class","layer").attr("d",function(a){return d.master_area(a.values)}).attr("fill",function(a){return a.color}).attr("fill-opacity",function(a){return a.fillopacity}).attr("stroke","none"),i.attr("clip-path","url(#"+d.rubix.master_id+"-clip)"),i.classed("clipped",!0),h.exit().remove()}for(var j=0;j<this.layers.length;j++){var k=this.layers[j].key;if(this.name===k){var l=this.layers[j].values;this.opts.noshadow||(this.strokePath1=this.stacked_area_series.append("path").attr("class",this.id+"-line").datum(l).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",5*this.opts.strokewidth).attr("stroke-opacity",.05000000000000001).attr("transform","translate(1,1)"),this.strokePath2=this.stacked_area_series.append("path").attr("class",this.id+"-line").datum(l).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",3*this.opts.strokewidth).attr("stroke-opacity",.1).attr("transform","translate(1,1)"),this.strokePath3=this.stacked_area_series.append("path").attr("class",this.id+"-line").datum(l).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",1*this.opts.strokewidth).attr("stroke-opacity",.15000000000000002).attr("transform","translate(1,1)")),this.linePath=this.stacked_area_series.append("path").datum(l).attr("class",this.id+"-line").attr("stroke",this.opts.color).attr("fill","none").attr("stroke-linecap","round").attr("d",this.line).attr("stroke-width",2*this.opts.strokewidth),this.master_detail&&(a||(this.md_root.select(".md-layers > .md_stacked_area_series").selectAll("."+this.id+"-line").remove(),this.masterLinePath=this.md_root.select(".md-layers > .md_stacked_area_series").append("path").datum(l).attr("class",this.id+"-line").attr("stroke",this.opts.color).attr("fill","none").attr("stroke-linecap","round").attr("d",this.master_line).attr("stroke-width",2*this.opts.strokewidth),this.masterLinePath.attr("clip-path","url(#"+d.rubix.master_id+"-clip)"),this.masterLinePath.classed("clipped",!0),this.dataChanged&&(this.rubix.resetExtent(),this.dataChanged=!1)),this.opts.noshadow||(this.strokePath1.attr("clip-path","url(#"+d.rubix.master_id+"-clip)"),this.strokePath2.attr("clip-path","url(#"+d.rubix.master_id+"-clip)"),this.strokePath3.attr("clip-path","url(#"+d.rubix.master_id+"-clip)")),this.linePath.attr("clip-path","url(#"+d.rubix.master_id+"-clip)"),this.opts.noshadow||(this.strokePath1.classed("clipped",!0),this.strokePath2.classed("clipped",!0),this.strokePath3.classed("clipped",!0)),this.linePath.classed("clipped",!0));break}}}catch(c){}this.setup=!0}this.rubix.resetFocus(a)}},Rubix.StackedAreaSeries.prototype.updatePoint=function(a,b,c){this.addPoint(a,b,c)},Rubix.StackedAreaSeries.prototype.removePoint=function(a,b){if(this.chart_hidden)return void this.temp_stack.push({type:"removePoint",ref:a});this.data[this.name]||(this.data[this.name]=[]);for(var c=!1,d=0,e=0;e<this.data[this.name].length;e++)if(this.data[this.name][e].x===a){this.data[this.name][e].y=null,d=e,c=!0;break}if(c){for(var f=!1,e=0;e<this.area_stack_data.length;e++){var g=this.area_stack_data[e];try{if(g.values[d].x===a&&null!==g.values[d].y){f=!0;break}}catch(h){}}if(!f)for(var e=0;e<this.area_stack_data.length;e++)this.area_stack_data[e].values.splice(d,1);var i=this.layers;try{this.layers=this.stack(this.area_stack_data)}catch(h){this.layers=i}this.master_detail&&(this.dataChanged=!0),b||(this.setup?this._animate_draw():(this.rubix.resetAxis(!0),this.rubix.forceRedraw()))}},Rubix.StackedAreaSeries.prototype.addPoint=function(a,b,c){if(this.rubix.data_changed=!0,!(a instanceof Object)||a instanceof Array)throw new Error("Object required for addPoint");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");if(this.chart_hidden)return void this.temp_stack.push({type:"addPoint",data:a,shift:b});this.data[this.name]||(this.data[this.name]=[]);for(var d=!1,e=0;e<this.data[this.name].length;e++)if(this.data[this.name][e].x===a.x){this.data[this.name][e].y=a.y,d=!0;break}d||this.data[this.name].push(a),this.data[this.name].sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),this.rubix.opts.interval?this.rubix.opts.interval<this.data[this.name].length&&this.data[this.name].shift():b&&this.data[this.name].shift();for(var f=d3.max(this.area_stack_data,function(a){return a.values.length}),e=0;e<this.area_stack_data.length;e++){var g=this.area_stack_data[e];g.values.length<f&&g.values.push({x:a.x,y:null})}var h=this.layers;try{this.layers=this.stack(this.area_stack_data)}catch(i){this.layers=h}this.master_detail&&(this.dataChanged=!0),c||(this.setup?this._animate_draw():(this.rubix.resetAxis(!0),this.rubix.forceRedraw()))},Rubix.StackedAreaSeries.prototype._animate_draw=function(){for(var a=this.root.selectAll(".y.axis").selectAll("text")[0],b=[],c=0;c<a.length;c++)b.push(a[c].getBBox().width);d3.max(b);this.rubix.resetAxis(!0),this.rubix.runCommand("globalRedraw"),a=this.root.selectAll(".y.axis").selectAll("text")[0],b=[];for(var c=0;c<a.length;c++)b.push(a[c].getBBox().width);var d=d3.max(b);this.rubix.marginLeft(d),this.rubix.resetFocus()},Rubix.StackedAreaSeries.prototype.hidden=function(){this.chart_hidden=!0},Rubix.StackedAreaSeries.prototype.show=function(){for(this.chart_hidden=!1;this.temp_stack.length>1;){var a=this.temp_stack.shift();"addPoint"===a.type?this.addPoint(a.data,a.shift,!0):this.removePoint(a.ref)}if(this.temp_stack.length){var a=this.temp_stack.shift();"addPoint"===a.type?this.addPoint(a.data,a.shift,!0):this.removePoint(a.ref)}},Rubix.StackedAreaSeries.prototype.globalRedraw=function(a){this.stacked_area_series.select("."+this.id+"-line").attr("d",this.line)},Rubix.StackedAreaSeries.prototype.forceRedraw=function(a){this.redraw(a)},Rubix.StackedAreaSeries.prototype.on_complete_draw=function(){if(this.setup){var a=this;if(void 0!==this.opts.marker&&this.show_markers)switch(this.master_detail&&this.rubix.symbols.attr("clip-path","url(#"+a.rubix.master_id+"-clip-symbols)"),this.markers=this.rubix.symbols.selectAll("."+this.id+"-marker"),this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var b=d3.svg.symbol();b.type(this.opts.marker);var c=this.markers.data(this.data[this.name]),d=c.enter().append("path");d.attr("d",b).attr("class",this.id+"-marker").attr("fill",this.opts.color).style("display",function(b){return"expand"===a.rubix.area_offset?0===b.y_new&&1===b.y0?"none":null:null===b.y_new?"none":null}).attr("stroke","white").attr("transform",function(b){var c=b.y0+b.y_new;if(isNaN(c)&&(c=0),a.rubix.opts.invertAxes){var d=a.rubix.y(b.x),e=a.rubix.x(c);("column"===a.rubix.axis.y.range||"bar"===a.rubix.axis.y.range)&&(d+=a.rubix.y.rangeBand()/2)}else{var d=a.rubix.y(c),e=a.rubix.x(b.x);("column"===a.rubix.axis.x.range||"bar"===a.rubix.axis.x.range)&&(e+=a.rubix.x.rangeBand()/2)}return"translate("+e+","+d+")"}),c.exit().remove();break;default:throw new Error("Unknown marker type : "+this.opts.marker)}}},Rubix.StackedAreaSeries.prototype.setupFocus=function(){if(this.setup)switch(this.focus&&this.focus.remove(),this.focus=this.rubix.focus_group.append("g"),this.focus.attr("class","focus"),this.focus.style("display","none"),this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var a=d3.svg.symbol();a.type(this.opts.marker);this.focus.append("path").attr("d",a).attr("fill",this.opts.color).attr("stroke","white").attr("stroke-width",2);break;default:throw new Error("Unknown marker type : "+this.opts.marker)}},Rubix.StackedAreaSeries.prototype.on_focus=function(){this.setup&&this.linePath.attr("stroke-width",2*this.opts.strokewidth)},Rubix.StackedAreaSeries.prototype.off_focus=function(){this.setup&&this.linePath.attr("stroke-width",2*this.opts.strokewidth)},window.Rubix=window.Rubix||{};var slugify=function(a){return a=a.replace(/[^-a-zA-Z0-9,&\s]+/gi,""),a=a.replace(/-/gi,"_"),a=a.replace(/\s/gi,"-")};Rubix.Pie=function(a,b){return new Rubix.PieDonut(a,"pie",b)},Rubix.Donut=function(a,b){return new Rubix.PieDonut(a,"donut",b)},Rubix.PieDonut=function(a,b,c){c=c||{},this.type=b,this.is_touch_device="ontouchstart"in document.documentElement,this.legend_hidden={},this.chart_counter=0,this.master_id=this.uid("master_id"),this.area_stack_data_stack=[],this.column_stack_data_stack=[],this.root_elem=$(a),this.root_elem.css("position","relative"),this.root_elem.addClass("rubixccnium-main-chart"),this.root_elem.append('<div class="rubixccnium-tooltip"></div>'),this.root_elem.append('<div class="rubixccnium-title"></div>'),this.root_elem.append('<div class="rubixccnium-subtitle"></div>'),this.root_elem.append('<div class="rubixccnium-chart"><div style="margin-top:5px">Loading...</div></div>'),this.root_elem.append('<div class="rubixccnium-legend"></div>');var d=c.width||"100%",e=c.height||150;this.elem_width=d,this.elem_height=e,this.root_elem.width(d).height(e),this.elem=this.root_elem.find(".rubixccnium-chart"),this.tooltip=this.root_elem.find(".rubixccnium-tooltip"),this.tooltip.hide(),this.tooltip.html(""),c.tooltip=c.tooltip||{},this.tooltip.css({"font-family":'Lato, "Lucida Grande", Arial, Helvetica, sans-serif',"font-size":"12px",position:"absolute",background:"white",color:"#89949B",display:"none",padding:"5px 15px","pointer-events":"none","border-radius":"5px","z-index":100,"min-height":75,"user-select":"none",cursor:"default",border:"3px solid "+(c.tooltip.color?c.tooltip.color:"#89949B"),"box-shadow":"rgba(0, 0, 0, 0.2) 2px 4px 8px",background:"white"}),c.legend=c.legend||{},this.legend=this.root_elem.find(".rubixccnium-legend"),this.legend.css({"font-family":"Lato, 'Lucida Grande', Arial, Helvetica, sans-serif","text-align":"center","margin-top":c.legend.top||"-10px","margin-bottom":c.legend.bottom||"5px","user-select":"none",display:c.hideLegend?"none":"block"}),this.title=this.root_elem.find(".rubixccnium-title"),this.subtitle=this.root_elem.find(".rubixccnium-subtitle"),this.title.css({"font-family":"Lato, 'Lucida Grande', Arial, Helvetica, sans-serif","text-align":"center","user-select":"none","font-weight":"bold","font-size":"16px",color:"steelblue","margin-top":"10px",cursor:"default"}),this.subtitle.css({"font-family":"Lato, 'Lucida Grande', Arial, Helvetica, sans-serif","text-align":"center","user-select":"none","font-size":"10px",color:"steelblue","margin-top":"10px",cursor:"default",opacity:.8});this.elem.css({width:"100%",height:parseInt(this.root_elem.get(0).style.height),"user-select":"none",cursor:"default"}),
this.root_elem.css("height","100%"),this.opts=c||{},this.data=[],this.is_touch_device="ontouchstart"in document.documentElement,this.d3_eventSource=function(){for(var a,b=d3.event;a=b.sourceEvent;)b=a;return b},this.last_render=null,this.data_changed=!1,this.setup()},Rubix.PieDonut.prototype.setup=function(){this._setupOpts(),this._setupOnce(),this._setupRedraw(),this.draw()},Rubix.PieDonut.prototype._setupOpts=function(){this.opts.theme_style=this.opts.theme_style||"light",this.opts.theme_style_color="light"===this.opts.theme_style?"#C0D0E0":"#555",this.opts.theme_focus_line_color="light"===this.opts.theme_style?"#C0D0E0":"#888",this.opts.legend_color_brightness=this.opts.legend_color_brightness||.5,this.opts.global_legend_color=this.opts.global_legend_color||!1,this.opts.titleColor=this.opts.titleColor||"steelblue",this.opts.subtitleColor=this.opts.subtitleColor||"steelblue",this.title.css("color",this.opts.titleColor),this.subtitle.css("color",this.opts.subtitleColor),"dark"===this.opts.theme_style&&this.tooltip.css({color:"#aaa","font-weight":"bold",border:"1px solid #222","background-color":"#303030"}),this.opts.margin=this.opts.margin||{},this.margin={top:this.opts.margin.top||25,left:this.opts.margin.left||25,right:this.opts.margin.right||25,bottom:this.opts.margin.bottom||25},this.opts.tooltip=this.opts.tooltip||{},this.opts.tooltip.format=this.opts.tooltip.format||{},this.tooltipFormatter={format:{x:this.opts.tooltip.format.x||"",y:this.opts.tooltip.format.y||""}},this.resize=this.opts.resize||"throttled",this.opts.title=this.opts.title||"",this.opts.subtitle=this.opts.subtitle||"",this.title.html(this.opts.title),this.subtitle.html(this.opts.subtitle),(this.opts.title.length||this.opts.subtitle.length)&&this.elem.css("margin-top","-20px"),this.opts.title.length?this.title.show():this.title.hide(),this.opts.subtitle.length?this.subtitle.show():this.subtitle.hide()},Rubix.PieDonut.prototype._setupOnce=function(){},Rubix.PieDonut.prototype._setupRedraw=function(){var a=this;switch($(window).on("orientationchange",function(){a.draw()}),$(window).on("rubix.redraw."+this.master_id,function(){a.draw()}),this.resize){case"always":$(window).on("resize",function(){a.draw()});break;case"debounced":$(window).on("debouncedresize",function(){a.draw()});break;case"throttled":$(window).on("throttledresize",function(){a.draw()});break;default:throw new Error("Unknown resize type!")}},Rubix.PieDonut.prototype.draw=function(){this._draw($(window).width(),$(window).height())},Rubix.PieDonut.prototype._draw=function(a,b){this._cleanElement(),this._setSize(),this._setupCanvas(),this._setupRoot(),this._setupSeries(),this.final_draw()},Rubix.PieDonut.prototype._cleanElement=function(){this.elem.children().remove()},Rubix.PieDonut.prototype._setSize=function(){this.outerWidth=this.elem.width(),this.outerHeight=this.elem.height(),this.width=this.outerWidth-this.margin.left-this.margin.right,this.height=this.outerHeight-this.margin.top-this.margin.bottom,this.innerRadius=0,this.outerRadius=.5*Math.min(this.width,this.height)-10,"donut"===this.type&&(this.innerRadius=.6*this.outerRadius)},Rubix.PieDonut.prototype._setupCanvas=function(){this.elem.html(""),this.canvas=d3.select(this.elem.get(0)).append("svg"),this.canvas.attr("width",this.outerWidth),this.canvas.attr("height",this.outerHeight),this.canvas.append("desc").text("Powered by RubixÆžium")},Rubix.PieDonut.prototype._setupRoot=function(){this.root=this.canvas.append("g"),this.root.attr("width",this.width),this.root.attr("height",this.height),this.root.attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.hasData?this.canvas.select(".noData").style("display","none"):this.canvas.append("text").attr("class","noData").attr("font-size","30px").attr("text-anchor","middle").attr("transform","translate("+this.outerWidth/2+","+this.outerHeight/2+")").attr("font-family",'Lato, "Lucida Grande", Arial, Helvetica, sans-serif').text("No Data")},Rubix.PieDonut.prototype._setupSeries=function(){this.root_piedonut_series=this.root.append("g").attr("class","piedonut_series").attr("transform","translate("+this.width/2+","+this.height/2+")")},Rubix.PieDonut.prototype.uid=function(a){return"rubixcc-pie-donut-"+a+"-"+Math.floor(2147483648*Math.random()).toString(36)},Rubix.PieDonut.prototype.addData=function(a){this.data_changed=!0,a.forEach(function(a){a.value=+a.value}),this.data=a,this._setupLegend(),this.final_draw("launch")},Rubix.PieDonut.prototype._setupLegend=function(){var a=this;this.legend.children().remove();for(var b=0;b<this.data.length;b++){var c=this.opts.global_legend_color||this.data[b].color;this.legend.append("<div class='"+this.master_id+"-legend-labels' data-name='"+this.data[b].name+"' style='cursor: pointer; display: inline-block; font-weight: bold; margin-right: 10px; color: "+c+"'><span style='font-size: 22px;'>■ </span><span style='font-size: 12px; position:relative; top: -3px; left: -2px;'>"+this.data[b].name+"</span></div>")}$("."+this.master_id+"-legend-labels").css({opacity:.9});for(var d in this.legend_hidden){var e=this.legend_hidden[d];$("[data-name="+e+"]").css({opacity:.2}).addClass("toggle")}$("."+this.master_id+"-legend-labels").off().on({hover:function(b){var c=$(this).hasClass("toggle"),d=$(this).attr("data-name"),e="#"+a.master_id+"-"+slugify(d);if(!c)switch(b.type){case"mouseenter":$(this).css({opacity:1}),d3.select(e).node().__onmouseover(b);break;case"mouseleave":$(this).css({opacity:.9}),d3.select(e).node().__onmouseout(b)}},click:function(b){var c=$(this).hasClass("toggle"),d=$(this).attr("data-name"),e="#"+a.master_id+"-"+slugify(d);c?($(this).css({opacity:1}),$(this).removeClass("toggle"),$(e).fadeIn(),delete a.legend_hidden[e]):($(this).css({opacity:.2}),$(this).addClass("toggle"),$(e).fadeOut(),a.legend_hidden[e]=d)}})},Rubix.PieDonut.prototype.final_draw=function(a){var b=this;this.data.length&&this.canvas.select(".noData").style("display","none");var c=d3.svg.arc();c.innerRadius(this.innerRadius),c.outerRadius(this.outerRadius);var d=d3.layout.pie();d.sort(null),d.value(function(a){return a.value});var e=this.root_piedonut_series.selectAll(".arc").data(d(this.data),function(a){return a.data.name}),f=e.enter().append("g").attr("class","arc").style("position","relative"),g=(d3.scale.category20(),f.attr("id",function(a){return b.master_id+"-"+slugify(a.data.name)}).style("fill",function(a,b){return a.data.color}).style("stroke","white").append("path").attr("d",function(a){return c({startAngle:0,endAngle:0})}));if("launch"===a)this.old_pie_data=d(this.data),setTimeout(function(){g.transition().attrTween("d",function(a){var b=d3.interpolate({startAngle:0,endAngle:0},{startAngle:a.startAngle,endAngle:a.endAngle});return function(a){return c(b(a))}}).duration(500)},15);else if("add"===a){var h=e.transition().duration(500).each("end",function(){b.old_pie_data=d(b.data)});h.select("path").attrTween("d",function(a,d){var e=0,f=0;try{e=b.old_pie_data[d].startAngle,f=b.old_pie_data[d].endAngle}catch(g){e=b.old_pie_data[b.old_pie_data.length-1].startAngle,f=b.old_pie_data[b.old_pie_data.length-1].endAngle}var h=d3.interpolate({startAngle:e,endAngle:f},{startAngle:a.startAngle,endAngle:a.endAngle});return a.data.hasOwnProperty("_remove")&&b.data.splice(d,1),b._setupLegend(),function(a){return c(h(a))}})}else this.old_pie_data=d(this.data),g.attr("d",function(a){return c(a)});var i="mouseover",j="mousemove",k="mouseout";this.is_touch_device&&(i="touchstart",j="touchstart",k="touchend");var l;f.on(i,function(a){clearTimeout(l);var d=c.centroid(a),e=Math.sqrt(Math.pow(d[0],2)+Math.pow(d[1],2)),f=d[0]/e*8,g=d[1]/e*8;b.is_touch_device||d3.select(this).transition().duration(150).attr("transform","translate("+[f,g]+")")}),f.on(j,function(a,c){if(clearTimeout(l),b.is_touch_device)var d=d3.touches(this,b.d3_eventSource().changedTouches)[0];else var d=d3.mouse(this);b.tooltip.css("display",useTable),b.tooltip.css({left:b.width/2-b.margin.left/2+d[0],top:b.height/2-b.margin.top/2+d[1]}),b.tooltip.html("<div style='color: "+a.data.color+";'><b><span style='font-size: 22px;'>■ </span><span style='position:relative; top: -3px; left: -2px;'>"+a.data.name+" :</span></b> <span style='position:relative; top: -3px; left: -2px;'>"+a.data.value+"</span></div>"),d3.select(this).style("fill",a.data.color)}),f.on(k,function(a,c){var d=this;b.is_touch_device?(l=setTimeout(function(){b.tooltip.hide()},3e3),setTimeout(function(){d3.select(d).style("fill",a.data.color)},3e3)):(b.tooltip.hide(),d3.select(d).style("fill",a.data.color),d3.select(d).transition().duration(150).attr("transform","translate(0, 0)"))}),e.exit().remove();for(var m in this.legend_hidden)$(m).hide()},Rubix.PieDonut.prototype.removePoint=function(a){for(var b=!1,c=0;c<this.data.length;c++)if(this.data[c].name===a){b=!0,this.data[c].value=0,this.data[c]._remove=!0;break}b&&this.final_draw("add")},Rubix.PieDonut.prototype.updatePoint=function(a){this.addPoint(a)},Rubix.PieDonut.prototype.addPoint=function(a){this.data_changed=!0;for(var b=!1,c=0;c<this.data.length;c++)if(this.data[c].name===a.name){b=!0,this.data[c].value=+a.value;break}b||this.data.push(a),this.final_draw("add")},window.Rubix=window.Rubix||{},Rubix.LineSeries=function(a,b){if(this.opts=b,this.opts.color=this.opts.color||"steelblue",this.opts.marker=this.opts.marker||"circle",this.opts.scatter=this.opts.scatter||!1,this.opts.noshadow=this.opts.noshadow||!1,this.show_markers=this.opts.show_markers,this.opts.strokewidth=this.opts.strokewidth||1,!this.opts.hasOwnProperty("name"))throw new Error("LineSeries should have a 'name' property");this.name=this.opts.name,this.chart_hidden=!1,this.temp_stack=[],this.setup=!1,this._setup(a)},Rubix.LineSeries.prototype._setup=function(a){this.rubix=a,this.root=this.rubix.root,this.data=this.rubix.data,this.width=this.rubix.width,this.height=this.rubix.height,this.line_series=this.rubix.root_line_series,this.show_markers=void 0===this.show_markers?this.rubix.show_markers:this.show_markers,this.master_detail=this.rubix.master_detail,this.master_detail&&(this.md_root=this.rubix.md_root),this.id||(this.id=this.rubix.uid("line"));var b=this;this.line=d3.svg.line(),this.line.defined(function(a){return null!==a.x&&null!==a.y}),this.line.x(function(a){return b.rubix.opts.invertAxes?b.rubix.x(a.y):"column"===b.rubix.axis.x.range||"bar"===b.rubix.axis.x.range?b.rubix.x(a.x)+b.rubix.x.rangeBand()/2:b.rubix.x(a.x)}),this.line.y(function(a){return b.rubix.opts.invertAxes?"column"===b.rubix.axis.y.range||"bar"===b.rubix.axis.y.range?b.rubix.y(a.x)+b.rubix.y.rangeBand()/2:b.rubix.y(a.x):b.rubix.y(a.y)}),this.line.interpolate(this.rubix.interpolate),this.master_detail&&(this.master_line=d3.svg.line(),this.master_line.defined(function(a){return null!==a.x&&null!==a.y}),this.master_line.x(function(a){return b.rubix.opts.invertAxes?b.rubix.x2(a.y):b.rubix.x2(a.x)}),this.master_line.y(function(a){return b.rubix.opts.invertAxes?b.rubix.y2(a.x):b.rubix.y2(a.y)}),this.master_line.interpolate(this.rubix.interpolate))},Rubix.LineSeries.prototype.redraw=function(a){this._setup(a),this.draw()},Rubix.LineSeries.prototype.noRedraw=function(a){this._setup(a),this.draw(!0)},Rubix.LineSeries.prototype.addData=function(a){if(this.rubix.data_changed=!0,!(a instanceof Array)){if(!(a instanceof Object))throw new Error("Data must be an array or object");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");a=[a]}a.length&&(this.rubix.opts.noSort||a.sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),this.data[this.name]=a,this.rubix.resetAxis(!1),this.rubix.forceRedraw(),this._animate_draw())},Rubix.LineSeries.prototype.draw=function(a){if(this.name&&this.data&&this.data.hasOwnProperty(this.name)&&this.data[this.name].length){var b=this,c=this.line_series.selectAll("."+this.id)[0].length;if(c)this.rubix.runCommand("globalRedraw");else{if(this.line_series.selectAll("."+this.id+".clipped").remove(),this.opts.scatter||(this.opts.noshadow||(this.strokePath1=this.line_series.append("path").attr("class",this.id+" line").datum(this.data[this.name]).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",5*this.opts.strokewidth).attr("stroke-opacity",.05000000000000001).attr("transform","translate(1,1)"),this.strokePath2=this.line_series.append("path").attr("class",this.id+" line").datum(this.data[this.name]).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",3*this.opts.strokewidth).attr("stroke-opacity",.1).attr("transform","translate(1,1)"),this.strokePath3=this.line_series.append("path").attr("class",this.id+" line").datum(this.data[this.name]).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",1*this.opts.strokewidth).attr("stroke-opacity",.15000000000000002).attr("transform","translate(1,1)")),this.linePath=this.line_series.append("path").datum(this.data[this.name]).attr("class",this.id+" line").attr("stroke",this.opts.color).attr("fill","none").attr("stroke-linecap","round").attr("d",this.line).attr("stroke-width",2*this.opts.strokewidth)),this.master_detail){if(this.opts.scatter){this.md_root.select(".md-layers > .md_line_series").attr("clip-path","url(#"+b.rubix.master_id+"-clip)");var b=this,d=this.data[this.name];switch(this.markers_master=this.md_root.select(".md-layers > .md_line_series").selectAll("."+this.id+"-marker"),this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var e=d3.svg.symbol();e.type(this.opts.marker);var f=this.markers_master.data(d);f.enter().append("path").attr("d",e).attr("class",this.id+"-marker").attr("fill",this.opts.color).style("display",function(a){return null===a.y?"none":null}).attr("stroke","none").attr("transform",function(a){var c=a.y;if(isNaN(c)&&(c=0),b.rubix.opts.invertAxes){var d=b.rubix.y(a.x),e=b.rubix.x(c);("column"===b.rubix.axis.y.range||"bar"===b.rubix.axis.y.range)&&(d+=b.rubix.y.rangeBand()/2)}else{var d=b.rubix.y2(c),e=b.rubix.x2(a.x);("column"===b.rubix.axis.x.range||"bar"===b.rubix.axis.x.range)&&(e+=b.rubix.x.rangeBand()/2)}return"translate("+e+","+d+")"}),f.exit().remove();break;default:throw new Error("Unknown marker type : "+this.opts.marker)}}else this.md_root.select(".md-layers > .md_line_series").selectAll("."+this.id+".clipped").remove(),this.masterLinePath=this.md_root.select(".md-layers > .md_line_series").append("path").datum(this.data[this.name]).attr("class",this.id+" line").attr("stroke",this.opts.color).attr("fill","none").attr("stroke-linecap","round").attr("d",this.master_line).attr("stroke-width",2*this.opts.strokewidth),this.masterLinePath.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.masterLinePath.classed("clipped",!0);this.dataChanged&&(this.rubix.resetExtent(),this.dataChanged=!1),this.opts.scatter||(this.opts.noshadow||(this.strokePath1.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.strokePath2.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.strokePath3.attr("clip-path","url(#"+b.rubix.master_id+"-clip)")),this.linePath.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.opts.noshadow||(this.strokePath1.classed("clipped",!0),this.strokePath2.classed("clipped",!0),this.strokePath3.classed("clipped",!0)),this.linePath.classed("clipped",!0))}this.setup=!0}this.rubix.resetFocus(a)}},Rubix.LineSeries.prototype.update=function(a){if(!(a instanceof Array)){if(!(a instanceof Object))throw new Error("Data must be an array or object");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");a=[a]}this.rubix.opts.noSort||a.sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),this.data[this.name]=a,this.setup?this._animate_draw():(this.rubix.resetAxis(!1),this.rubix.forceRedraw())},Rubix.LineSeries.prototype.updatePoint=function(a,b,c){this.addPoint(a,b,c)},Rubix.LineSeries.prototype.removePoint=function(a,b){if(this.chart_hidden)return void this.temp_stack.push({type:"removePoint",ref:a});this.data[this.name]||(this.data[this.name]=[]);for(var c=!1,d=0;d<this.data[this.name].length;d++)if(this.data[this.name][d].x===a){this.data[this.name].splice(d,1),c=!0;break}this.master_detail&&(this.dataChanged=!0),b||(this.setup?this._animate_draw():(this.rubix.resetAxis(!0),this.rubix.forceRedraw()))},Rubix.LineSeries.prototype.addPoint=function(a,b,c){if(this.rubix.data_changed=!0,!(a instanceof Object)||a instanceof Array)throw new Error("Object required for addPoint");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");if(this.chart_hidden)return void this.temp_stack.push({type:"addPoint",data:a,shift:b});this.data[this.name]||(this.data[this.name]=[]);for(var d=!1,e=0;e<this.data[this.name].length;e++)if(this.data[this.name][e].x===a.x){this.data[this.name][e].y=a.y,d=!0;break}d||this.data[this.name].push(a),this.data[this.name].sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),this.rubix.opts.interval?this.rubix.opts.interval<this.data[this.name].length&&this.data[this.name].shift():b&&this.data[this.name].shift(),this.master_detail&&(this.dataChanged=!0),c||(this.setup?this._animate_draw():(this.rubix.resetAxis(!0),this.rubix.forceRedraw()))},Rubix.LineSeries.prototype._animate_draw=function(){for(var a=this.root.selectAll(".y.axis").selectAll("text")[0],b=[],c=0;c<a.length;c++)b.push(a[c].getBBox().width);d3.max(b);this.rubix.resetAxis(!0),this.rubix.runCommand("globalRedraw"),a=this.root.selectAll(".y.axis").selectAll("text")[0],b=[];for(var c=0;c<a.length;c++)b.push(a[c].getBBox().width);var d=d3.max(b);this.rubix.marginLeft(d),this.rubix.resetFocus()},Rubix.LineSeries.prototype.hidden=function(){this.chart_hidden=!0},Rubix.LineSeries.prototype.show=function(){for(this.chart_hidden=!1;this.temp_stack.length>1;){var a=this.temp_stack.shift();"addPoint"===a.type?this.addPoint(a.data,a.shift,!0):this.removePoint(a.ref)}if(this.temp_stack.length){var a=this.temp_stack.shift();"addPoint"===a.type?this.addPoint(a.data,a.shift,!0):this.removePoint(a.ref)}},Rubix.LineSeries.prototype.globalRedraw=function(a){this.line_series.selectAll("."+this.id+".line").attr("d",this.line)},Rubix.LineSeries.prototype.forceRedraw=function(a){this.redraw(a)},Rubix.LineSeries.prototype.on_complete_draw=function(){if(this.setup){var a=this,b=this.data[this.name];if(void 0!==this.opts.marker&&this.show_markers)switch(this.master_detail&&this.rubix.symbols.attr("clip-path","url(#"+a.rubix.master_id+"-clip-symbols)"),this.markers=this.rubix.symbols.selectAll("."+this.id+"-marker"),this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var c=d3.svg.symbol();c.type(this.opts.marker);var d=this.markers.data(b);d.enter().append("path").attr("d",c).attr("class",this.id+"-marker").attr("fill",this.opts.color).style("display",function(a){return null===a.y?"none":null}).attr("stroke","white").attr("transform",function(b){var c=b.y;if(isNaN(c)&&(c=0),a.rubix.opts.invertAxes){var d=a.rubix.y(b.x),e=a.rubix.x(c);("column"===a.rubix.axis.y.range||"bar"===a.rubix.axis.y.range)&&(d+=a.rubix.y.rangeBand()/2)}else{var d=a.rubix.y(c),e=a.rubix.x(b.x);("column"===a.rubix.axis.x.range||"bar"===a.rubix.axis.x.range)&&(e+=a.rubix.x.rangeBand()/2)}return"translate("+e+","+d+")"}),d.exit().remove();break;default:throw new Error("Unknown marker type : "+this.opts.marker)}}},Rubix.LineSeries.prototype.setupFocus=function(){if(this.setup)switch(this.focus&&this.focus.remove(),this.focus=this.rubix.focus_group.append("g"),this.focus.attr("class","focus"),this.focus.style("display","none"),this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var a=d3.svg.symbol();a.type(this.opts.marker);this.focus.append("path").attr("d",a).attr("fill",this.opts.color).attr("stroke","white").attr("stroke-width",2);break;default:throw new Error("Unknown marker type : "+this.opts.marker)}},Rubix.LineSeries.prototype.on_focus=function(){this.setup&&this.linePath.attr("stroke-width",2*this.opts.strokewidth)},Rubix.LineSeries.prototype.off_focus=function(){this.setup&&this.linePath.attr("stroke-width",2*this.opts.strokewidth)},window.Rubix=window.Rubix||{},Rubix.ColumnSeries=function(a,b){if(this.type="column_series",this.opts=b,this.opts.color=this.opts.color||"steelblue",this.opts.marker=this.opts.marker||"circle",this.opts.nostroke=this.opts.nostroke||"",this.opts.fillopacity=this.opts.fillopacity||.85,this.show_markers=this.opts.show_markers,!this.opts.hasOwnProperty("name"))throw new Error("ColumnSeries should have a 'name' property");this.name=this.opts.name,this.chart_hidden=!1,this.temp_stack=[],this.setup=!1,this.last_stack=[],this.last_stack_name="",this.last_stack_added=!1,this.count=0,this._setup(a)},Rubix.ColumnSeries.prototype._setup=function(a){this.rubix=a,this.rubix.stacked=!0,this.root=this.rubix.root,this.data=this.rubix.data,this.width=this.rubix.width,this.height=this.rubix.height,this.stack=this.rubix.column_stack,this.offset=this.rubix.column_offset,this.cb_series=this.rubix.root_cb_series,this.column_stack=this.rubix.column_stack_data,this.show_markers=void 0===this.show_markers?this.rubix.show_markers:this.show_markers,this.grouped=this.rubix.grouped,this.id||(this.id=this.rubix.uid("stacked-column"))},Rubix.ColumnSeries.prototype.redraw=function(a){this._setup(a),this.draw()},Rubix.ColumnSeries.prototype.noRedraw=function(a){this._setup(a),this.draw(!0)},Rubix.ColumnSeries.prototype.addData=function(a){if(this.rubix.data_changed=!0,!(a instanceof Array)){if(!(a instanceof Object))throw new Error("Data must be an array or object");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");a=[a]}if(a.length){this.rubix.opts.noSort||a.sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1});var b=0,c=[];for(var d in this.data){var e=this.data[d].length;if(e>b){b=e,c=[];for(var f=0;b>f;f++)c.push(this.data[d][f].x)}}this.rubix.maxLen=b,this.data[this.name]=a;for(var d in this.data){var e=this.data[d].length;if(b>e){for(var g=c.concat(),h=0;h<this.data[d].length;h++){var i=g.indexOf(this.data[d][h].x);g.splice(i,1)}for(var h=0;h<g.length;h++)this.rubix.charts[d].addPoint({x:g[h],y:null})}}this.column_stack.push({key:this.name,color:this.opts.color,marker:this.opts.marker,values:this.data[this.name],orderKey:this.column_stack.length}),this.rubix.resetAxis(),this.rubix.forceRedraw(),this._animate_draw()}},Rubix.ColumnSeries.prototype._createRect=function(){var a=this,b="white";this.opts.nostroke&&(b="none");var c=this.columnGroup.selectAll("rect").data(function(a){return a.values}).enter().append("rect").attr("stroke",b);this.grouped?this.rubix.opts.invertAxes?(c.attr("x",function(b,c,d){var e=a.rubix.x(0);return isNaN(e)?null:e}),c.attr("y",function(b,c,d){return a.rubix.y(b.x)+a.rubix.y.rangeBand()/a.layers.length*d}),c.attr("class",function(b,c,d){return"column-"+(a.rubix.y(b.x)+a.rubix.y.rangeBand()/a.layers.length*(a.layers.length-1)+a.rubix.y.rangeBand()/(2*a.layers.length))}),c.attr("width",function(b){var c=Math.abs(a.rubix.x(b.y)-a.rubix.x(0));return isNaN(c)?null:c}),c.attr("height",a.rubix.y.rangeBand()/a.layers.length),c.attr("transform",function(b){var c=a.rubix.x(b.y_new)-a.rubix.x(0);return b.y<0?"translate("+-Math.abs(c)+",0)":"translate(0,0)"})):(c.attr("x",function(b,c,d){return a.rubix.x(b.x)+a.rubix.x.rangeBand()/a.layers.length*d}),c.attr("y",function(b){var c=a.rubix.y(0);return isNaN(c)?null:c}),c.attr("class",function(b,c,d){return"column-"+(a.rubix.x(b.x)+a.rubix.x.rangeBand()/a.layers.length*(a.layers.length-1)+a.rubix.x.rangeBand()/(2*a.layers.length))}),c.attr("width",a.rubix.x.rangeBand()/a.layers.length),c.attr("height",function(b){var c=Math.abs(a.rubix.y(b.y)-a.rubix.y(0));return isNaN(c)?null:c}),c.attr("transform",function(b){var c=a.rubix.y(b.y_new)-a.rubix.y(0);return b.y>0?"translate(0,"+-Math.abs(c)+")":"translate(0,0)"})):this.rubix.opts.invertAxes?(c.attr("x",function(b){var c=a.rubix.x(b.y0);return isNaN(c)?null:c}),c.attr("y",function(b){return a.rubix.y(b.x)||0}),c.attr("class",function(b){return"column-"+(a.rubix.y(b.x)+a.rubix.y.rangeBand()/2)}),c.attr("width",function(b){var c=Math.abs(a.rubix.x(b.y0)-a.rubix.x(b.y+b.y0));return isNaN(c)?null:c}),c.attr("height",a.rubix.y.rangeBand()),c.attr("transform",function(b){if(b.y<0){var c=Math.abs(a.rubix.x(b.y0)-a.rubix.x(b.y+b.y0));return"translate("+-c+",0)"}return null})):(c.attr("x",function(b){return a.rubix.x(b.x)}),c.attr("y",function(b){var c=a.rubix.y(b.y0);return isNaN(c)?null:c}),c.attr("class",function(b){return"column-"+(a.rubix.x(b.x)+a.rubix.x.rangeBand()/2)}),c.attr("width",a.rubix.x.rangeBand()),c.attr("height",function(b){var c=Math.abs(a.rubix.y(b.y0)-a.rubix.y(b.y+b.y0));return isNaN(c)?null:c}),c.attr("transform",function(b){if(b.y>0){var c=Math.abs(a.rubix.y(b.y0)-a.rubix.y(b.y+b.y0));return"translate(0,"+-c+")"}return null}))},Rubix.ColumnSeries.prototype.draw=function(a){try{if(!this.name)return;if(!this.data)return;if(!this.data.hasOwnProperty(this.name))return;if(!this.data[this.name].length)return;var b=this.layers;try{this.layers=this.stack(this.column_stack)}catch(c){this.layers=b}if(!this.grouped)for(var d=this.rubix.maxLen,e=0;d>e;e++){for(var f=this.layers[0].values[e].x,g=null,h=0;h<this.layers.length;h++)for(var i=0;d>i;i++)try{if(this.layers[h].values[i].x===f){this.layers[h].values[i].y>=0&&(null===this.layers[h].values[i].y?this.layers[h].values[i].y0=null:(null===g&&(g=0),this.layers[h].values[i].y0=g,g+=this.layers[h].values[i].y));break}}catch(c){this.layers[h].values.push({x:f,y:null,y0:null,y_new:null})}g=null;for(var h=this.layers.length-1;h>=0;h--)for(var i=0;d>i;i++)try{if(this.layers[h].values[i].x===f){this.layers[h].values[i].y<0&&(null===this.layers[h].values[i].y?this.layers[h].values[i].y0=null:(null===g&&(g=0),this.layers[h].values[i].y0=-g,g+=Math.abs(this.layers[h].values[i].y)));break}}catch(c){this.layers[h].values.push({x:f,y:null,y0:null,y_new:null})}}var j=this,k=this.cb_series.selectAll("."+this.id)[0].length;if(k)this.rubix.runCommand("globalRedraw");else{try{this.cb_series.selectAll(".column-layer").remove();var l=this.cb_series.selectAll(".column-layer").data(this.layers,function(a,b){return a.key===j.name&&(j.count=b),a.key});this.columnGroup=l.enter().append("g"),this.columnGroup.attr("class","column-layer").attr("fill",function(a){return a.color}).attr("fill-opacity",this.opts.fillopacity),this._createRect(),l.exit().remove()}catch(c){}this.setup=!0}this.rubix.resetFocus(a)}catch(c){}},Rubix.ColumnSeries.prototype.update=function(a){if(!(a instanceof Array)){if(!(a instanceof Object))throw new Error("Data must be an array or object");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");a=[a]}this.rubix.opts.noSort||a.sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),this.data[this.name]=a,this.setup?this._animate_draw():(this.rubix.resetAxis(!0),this.rubix.forceRedraw())},Rubix.ColumnSeries.prototype.updatePoint=function(a,b,c){this.addPoint(a,b,c)},Rubix.ColumnSeries.prototype.removePoint=function(a,b){if(this.chart_hidden)return void this.temp_stack.push({type:"removePoint",ref:a});this.data[this.name]||(this.data[this.name]=[]);for(var c=!1,d=0,e=0;e<this.data[this.name].length;e++)if(this.data[this.name][e].x===a){this.data[this.name][e].y=null,this.data[this.name][e].y0=null,this.data[this.name][e].y_new=null,d=e,c=!0;break}if(c){for(var f=!1,e=0;e<this.column_stack.length;e++){var g=this.column_stack[e];try{if(g.values[d].x===a&&null!==g.values[d].y){f=!0;break}}catch(h){}}if(!f)for(var e=0;e<this.column_stack.length;e++)this.column_stack[e].values.splice(d,1);var i=0;for(var e in this.data){var j=this.data[e].length;j>i&&(i=j)}this.rubix.maxLen=i,b||(this.rubix.resetAxis(),this.rubix.forceRedraw(),this._animate_draw())}},Rubix.ColumnSeries.prototype.addPoint=function(a,b,c){if(this.rubix.data_changed=!0,!(a instanceof Object)||a instanceof Array)throw new Error("Object required for addPoint");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");if(this.chart_hidden)return void this.temp_stack.push({type:"addPoint",data:a,shift:b});this.data[this.name]||(this.data[this.name]=[]);for(var d=!1,e=0;e<this.data[this.name].length;e++)if(this.data[this.name][e].x===a.x){this.data[this.name][e].y=a.y,d=!0;break}d||this.data[this.name].push(a),this.data[this.name].sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),d=!1;for(var e=0;e<this.column_stack.length;e++)if(this.column_stack[e].key===this.name){d=!0;break}this.rubix.opts.interval?this.rubix.opts.interval<this.data[this.name].length&&this.data[this.name].shift():b&&this.data[this.name].shift();var f=0,g=[];for(var e in this.data){var h=this.data[e].length;if(h>f){f=h,g=[];for(var i=0;f>i;i++)g.push(this.data[e][i].x)}}this.rubix.maxLen=f;for(var e in this.data){var h=this.data[e].length;if(f>h){for(var j=g.concat(),k=0;k<this.data[e].length;k++){var l=j.indexOf(this.data[e][k].x);j.splice(l,1)}for(var k=0;k<j.length;k++)this.rubix.charts[e].addPoint({x:j[k],y:null})}}c||(this.rubix.resetAxis(),this.rubix.forceRedraw(),this._animate_draw())},Rubix.ColumnSeries.prototype._animate_draw=function(){try{for(var a=this.root.selectAll(".y.axis").selectAll("text")[0],b=[],c=0;c<a.length;c++)b.push(a[c].getBBox().width);d3.max(b);this.rubix.resetAxis(!0),this.rubix.runCommand("globalRedraw"),a=this.root.selectAll(".y.axis").selectAll("text")[0],b=[];for(var c=0;c<a.length;c++)b.push(a[c].getBBox().width);var d=d3.max(b);this.rubix.marginLeft(d),this.rubix.resetFocus()}catch(e){}},Rubix.ColumnSeries.prototype.hidden=function(){this.chart_hidden=!0},Rubix.ColumnSeries.prototype.show=function(){for(this.chart_hidden=!1;this.temp_stack.length>1;){var a=this.temp_stack.shift();"addPoint"===a.type?this.addPoint(a.data,a.shift,!0):this.removePoint(a.ref)}if(this.temp_stack.length){var a=this.temp_stack.shift();"addPoint"===a.type?this.addPoint(a.data,a.shift,!0):this.removePoint(a.ref)}},Rubix.ColumnSeries.prototype.globalRedraw=function(a){},Rubix.ColumnSeries.prototype.forceRedraw=function(a){this.redraw(a)},Rubix.ColumnSeries.prototype.on_complete_draw=function(){if(this.setup){var a="white",b=this;if(void 0!==this.opts.marker&&this.show_markers){this.markers=this.rubix.symbols,this.markers.selectAll(".column-symbols").remove();var c=this.markers.selectAll(".column-symbols").data(this.layers,function(a){return a.key}),d=c.enter().append("g");switch(d.attr("class","column-symbols"),this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var e=d.selectAll("path").data(function(a){for(var b=0;b<a.values.length;b++)a.values[b].marker=a.marker,a.values[b].color=a.color;return a.values}).enter().append("path");e.attr("d",function(a){var b=d3.svg.symbol();return b.type(a.marker),b()}).attr("fill",function(a){return a.color}).style("display",function(a){return"expand"===b.rubix.column_offset?0===a.y_new&&1===a.y0?"none":null:null===a.y_new?"none":null}).attr("stroke",a),this.rubix.opts.invertAxes?e.attr("transform",function(a,c,d){var e=a.y0+a.y_new;isNaN(e)&&(e=0);var f=b.rubix.x(e);b.grouped&&(f=b.rubix.x(a.y_new));var g=b.rubix.y(a.x)+b.rubix.y.rangeBand()/2;return b.grouped&&(g=b.rubix.y(a.x)+b.rubix.y.rangeBand()/b.layers.length*d+b.rubix.y.rangeBand()/(2*b.layers.length)),"translate("+f+","+g+")"}):e.attr("transform",function(a,c,d){var e=a.y0+a.y_new;isNaN(e)&&(e=0);var f=b.rubix.y(e);b.grouped&&(f=b.rubix.y(a.y_new));var g=b.rubix.x(a.x)+b.rubix.x.rangeBand()/2;return b.grouped&&(g=b.rubix.x(a.x)+b.rubix.x.rangeBand()/b.layers.length*d+b.rubix.x.rangeBand()/(2*b.layers.length)),"translate("+g+","+f+")"}),c.exit().remove();
break;default:throw new Error("Unknown marker type : "+this.opts.marker)}}}},Rubix.ColumnSeries.prototype.setupFocus=function(){if(this.setup){this.focus&&this.focus.remove(),this.focus=this.rubix.focus_group.append("g"),this.focus.attr("class","focus"),this.focus.style("display","none");var a="white";switch(this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var b=d3.svg.symbol();b.type(this.opts.marker),this.focus.append("path").attr("d",b).attr("fill",this.opts.color).attr("stroke",a).attr("stroke-width",2);break;default:throw new Error("Unknown marker type : "+this.opts.marker)}}},Rubix.ColumnSeries.prototype.on_focus=function(a,b){if(this.setup){if(this.off_focus(),this.rubix.opts.invertAxes){b=b.toString().replace(".","\\.");var c=this.cb_series.selectAll(".column-"+b)}else{a=a.toString().replace(".","\\.");var c=this.cb_series.selectAll(".column-"+a)}c.classed("filled",!0),c.attr("fill-opacity",1),c.attr("stroke-width",2)}},Rubix.ColumnSeries.prototype.off_focus=function(){if(this.setup){var a=this.cb_series.selectAll(".filled");a.classed("filled",!1),a.attr("fill-opacity",.85),a.attr("stroke-width",1)}},window.Rubix=window.Rubix||{},Rubix.AreaSeries=function(a,b){if(this.opts=b,this.opts.color=this.opts.color||"steelblue",this.opts.marker=this.opts.marker||"circle",this.opts.fillopacity=this.opts.fillopacity||.5,this.opts.strokewidth=this.opts.strokewidth||1,this.opts.noshadow=this.opts.noshadow||!1,this.show_markers=this.opts.show_markers,!this.opts.hasOwnProperty("name"))throw new Error("AreaSeries should have a 'name' property");this.name=this.opts.name,this.chart_hidden=!1,this.temp_stack=[],this.setup=!1,this.animating=!1,this._setup(a)},Rubix.AreaSeries.prototype._setup=function(a){this.rubix=a,this.root=this.rubix.root,this.data=this.rubix.data,this.width=this.rubix.width,this.height=this.rubix.height,this.area_series=this.rubix.root_area_series,this.show_markers=void 0===this.show_markers?this.rubix.show_markers:this.show_markers,this.master_detail=this.rubix.master_detail,this.master_detail&&(this.md_root=this.rubix.md_root),this.id||(this.id=this.rubix.uid("area"));var b=this;this.line=d3.svg.line(),this.line.defined(function(a){return null!==a.x&&null!==a.y}),this.line.x(function(a){return b.rubix.opts.invertAxes?b.rubix.x(a.y):"column"===b.rubix.axis.x.range||"bar"===b.rubix.axis.x.range?b.rubix.x(a.x)+b.rubix.x.rangeBand()/2:b.rubix.x(a.x)}),this.line.y(function(a){return b.rubix.opts.invertAxes?"column"===b.rubix.axis.y.range||"bar"===b.rubix.axis.y.range?b.rubix.y(a.x)+b.rubix.y.rangeBand()/2:b.rubix.y(a.x):b.rubix.y(a.y)}),this.line.interpolate(this.rubix.interpolate),this.area=d3.svg.area(),this.area.defined(this.line.defined()),this.rubix.opts.invertAxes?(this.area.x0(function(a){return b.rubix.x(0)}),this.area.x1(function(a){return b.rubix.x(a.y)}),this.area.y(function(a){return"column"===b.rubix.axis.y.range||"bar"===b.rubix.axis.y.range?b.rubix.y(a.x)+b.rubix.y.rangeBand()/2:b.rubix.y(a.x)}),this.area.interpolate(this.rubix.interpolate)):(this.area.x(function(a){return"column"===b.rubix.axis.x.range||"bar"===b.rubix.axis.x.range?b.rubix.x(a.x)+b.rubix.x.rangeBand()/2:b.rubix.x(a.x)}),this.area.y0(function(a){return b.rubix.y(0)}),this.area.y1(function(a){return b.rubix.y(a.y)}),this.area.interpolate(this.rubix.interpolate)),this.master_detail&&(this.master_line=d3.svg.line(),this.master_line.defined(function(a){return null!==a.x&&null!==a.y}),this.master_line.x(function(a){return b.rubix.opts.invertAxes?b.rubix.x2(a.y):b.rubix.x2(a.x)}),this.master_line.y(function(a){return b.rubix.opts.invertAxes?b.rubix.y2(a.x):b.rubix.y2(a.y)}),this.master_line.interpolate(this.rubix.interpolate),this.master_area=d3.svg.area(),this.master_area.defined(this.master_line.defined()),this.area.interpolate(this.rubix.interpolate),this.rubix.opts.invertAxes?(this.master_area.x0(function(a){return b.rubix.x2(0)}),this.master_area.x1(function(a){return b.rubix.x2(a.y)}),this.master_area.y(function(a){return b.rubix.y2(a.x)}),this.master_area.interpolate(this.rubix.interpolate)):(this.master_area.x(function(a){return b.rubix.x2(a.x)}),this.master_area.y0(function(a){return b.rubix.y2(0)}),this.master_area.y1(function(a){return b.rubix.y2(a.y)}),this.master_area.interpolate(this.rubix.interpolate)))},Rubix.AreaSeries.prototype.redraw=function(a){this._setup(a),this.draw()},Rubix.AreaSeries.prototype.noRedraw=function(a){this._setup(a),this.draw(!0)},Rubix.AreaSeries.prototype.addData=function(a){if(this.rubix.data_changed=!0,!(a instanceof Array)){if(!(a instanceof Object))throw new Error("Data must be an array or object");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");a=[a]}a.length&&(this.rubix.opts.noSort||a.sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),this.data[this.name]=a,this.rubix.resetAxis(!1),this.rubix.forceRedraw(),this._animate_draw())},Rubix.AreaSeries.prototype.draw=function(a){if(this.name&&this.data&&this.data.hasOwnProperty(this.name)&&this.data[this.name].length){var b=this,c=this.area_series.selectAll("."+this.id)[0].length;c?this.rubix.runCommand("globalRedraw"):(this.area_series.selectAll("."+this.id+".clipped").remove(),this.opts.noshadow||(this.strokePath1=this.area_series.append("path").attr("class",this.id+" line").datum(this.data[this.name]).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",5*this.opts.strokewidth).attr("stroke-opacity",.05000000000000001).attr("transform","translate(1,1)"),this.strokePath2=this.area_series.append("path").attr("class",this.id+" line").datum(this.data[this.name]).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",3*this.opts.strokewidth).attr("stroke-opacity",.1).attr("transform","translate(1,1)"),this.strokePath3=this.area_series.append("path").attr("class",this.id+" line").datum(this.data[this.name]).attr("d",this.line).attr("stroke","black").attr("fill","none").attr("stroke-linecap","round").attr("stroke-width",1*this.opts.strokewidth).attr("stroke-opacity",.15000000000000002).attr("transform","translate(1,1)")),this.areaPath=this.area_series.append("path").attr("class",this.id+" area").datum(this.data[this.name]).attr("d",this.area).attr("fill",this.opts.color).attr("fill-opacity",this.opts.fillopacity).attr("stroke","none"),this.linePath=this.area_series.append("path").datum(this.data[this.name]).attr("class",this.id+" line").attr("stroke",this.opts.color).attr("fill","none").attr("stroke-linecap","round").attr("d",this.line).attr("stroke-width",2*this.opts.strokewidth),this.master_detail&&(this.md_root.select(".md-layers > .md_area_series").selectAll("."+this.id+".clipped").remove(),this.masterLinePath=this.md_root.select(".md-layers > .md_area_series").append("path").datum(this.data[this.name]).attr("class",this.id+" line").attr("stroke",this.opts.color).attr("fill","none").attr("stroke-linecap","round").attr("d",this.master_line).attr("stroke-width",2*this.opts.strokewidth),this.masterLinePath.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.masterLinePath.classed("clipped",!0),this.masterAreaPath=this.md_root.select(".md-layers > .md_area_series").append("path").attr("class",this.id+" area").datum(this.data[this.name]).attr("d",this.master_area).attr("fill",this.opts.color).attr("fill-opacity",this.opts.fillopacity).attr("stroke","none"),this.masterAreaPath.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.masterAreaPath.classed("clipped",!0),this.dataChanged&&(this.rubix.resetExtent(),this.dataChanged=!1),this.opts.noshadow||(this.strokePath1.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.strokePath2.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.strokePath3.attr("clip-path","url(#"+b.rubix.master_id+"-clip)")),this.linePath.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.opts.noshadow||(this.strokePath1.classed("clipped",!0),this.strokePath2.classed("clipped",!0),this.strokePath3.classed("clipped",!0)),this.linePath.classed("clipped",!0),this.areaPath.classed("clipped",!0)),this.areaPath.attr("clip-path","url(#"+b.rubix.master_id+"-clip)"),this.setup=!0),this.rubix.resetFocus(a)}},Rubix.AreaSeries.prototype.updatePoint=function(a,b,c){this.addPoint(a,b,c)},Rubix.AreaSeries.prototype.removePoint=function(a,b){if(this.chart_hidden)return void this.temp_stack.push({type:"removePoint",ref:a});this.data[this.name]||(this.data[this.name]=[]);for(var c=!1,d=0;d<this.data[this.name].length;d++)if(this.data[this.name][d].x===a){this.data[this.name].splice(d,1),c=!0;break}this.master_detail&&(this.dataChanged=!0),b||(this.setup?this._animate_draw():(this.rubix.resetAxis(!0),this.rubix.forceRedraw()))},Rubix.AreaSeries.prototype.addPoint=function(a,b,c){if(this.rubix.data_changed=!0,!(a instanceof Object)||a instanceof Array)throw new Error("Object required for addPoint");if(!a.hasOwnProperty("x")&&!a.hasOwnProperty("y"))throw new Error("Object must be in the form: {x: ..., y: ...}");if(this.chart_hidden)return void this.temp_stack.push({type:"addPoint",data:a,shift:b});this.data[this.name]||(this.data[this.name]=[]);for(var d=!1,e=0;e<this.data[this.name].length;e++)if(this.data[this.name][e].x===a.x){this.data[this.name][e].y=a.y,d=!0;break}d||this.data[this.name].push(a),this.data[this.name].sort(function(a,b){return a.x>b.x?1:a.x===b.x?0:-1}),this.rubix.opts.interval?this.rubix.opts.interval<this.data[this.name].length&&this.data[this.name].shift():b&&this.data[this.name].shift(),this.master_detail&&(this.dataChanged=!0),c||(this.setup?this._animate_draw():(this.rubix.resetAxis(!0),this.rubix.forceRedraw()))},Rubix.AreaSeries.prototype._animate_draw=function(a){for(var b=this.root.selectAll(".y.axis").selectAll("text")[0],c=[],d=0;d<b.length;d++)c.push(b[d].getBBox().width);d3.max(c);this.rubix.resetAxis(!1),b=this.root.selectAll(".y.axis").selectAll("text")[0],c=[];for(var d=0;d<b.length;d++)c.push(b[d].getBBox().width);var e=d3.max(c);this.rubix.marginLeft(e),this.rubix.resetFocus()},Rubix.AreaSeries.prototype.hidden=function(){this.chart_hidden=!0},Rubix.AreaSeries.prototype.show=function(){for(this.chart_hidden=!1;this.temp_stack.length>1;){var a=this.temp_stack.shift();"addPoint"===a.type?this.addPoint(a.data,a.shift,!0):this.removePoint(a.ref)}if(this.temp_stack.length){var a=this.temp_stack.shift();"addPoint"===a.type?this.addPoint(a.data,a.shift,!0):this.removePoint(a.ref)}},Rubix.AreaSeries.prototype.globalRedraw=function(a){this.area_series.selectAll("."+this.id+".line").attr("d",this.line),this.area_series.selectAll("."+this.id+".area").attr("d",this.area)},Rubix.AreaSeries.prototype.forceRedraw=function(a){this.redraw(a)},Rubix.AreaSeries.prototype.on_complete_draw=function(){if(this.setup){var a=this,b=this.data[this.name];if(void 0!==this.opts.marker&&this.show_markers)switch(this.master_detail&&this.rubix.symbols.attr("clip-path","url(#"+a.rubix.master_id+"-clip-symbols)"),this.markers=this.rubix.symbols.selectAll("."+this.id+"-marker"),this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var c=d3.svg.symbol();c.type(this.opts.marker);var d=this.markers.data(b);d.enter().append("path").attr("d",c).attr("class",this.id+"-marker").attr("fill",this.opts.color).style("display",function(a){return null===a.y?"none":null}).attr("stroke","white").attr("transform",function(b){var c=b.y;if(isNaN(c)&&(c=0),a.rubix.opts.invertAxes){var d=a.rubix.y(b.x),e=a.rubix.x(c);("column"===a.rubix.axis.y.range||"bar"===a.rubix.axis.y.range)&&(d+=a.rubix.y.rangeBand()/2)}else{var d=a.rubix.y(c),e=a.rubix.x(b.x);("column"===a.rubix.axis.x.range||"bar"===a.rubix.axis.x.range)&&(e+=a.rubix.x.rangeBand()/2)}return"translate("+e+","+d+")"}),d.exit().remove();break;default:throw new Error("Unknown marker type : "+this.opts.marker)}}},Rubix.AreaSeries.prototype.setupFocus=function(){if(this.setup)switch(this.focus&&this.focus.remove(),this.focus=this.rubix.focus_group.append("g"),this.focus.attr("class","focus"),this.focus.style("display","none"),this.opts.marker){case"circle":case"cross":case"square":case"diamond":case"triangle-up":case"triangle-down":var a=d3.svg.symbol();a.type(this.opts.marker);this.focus.append("path").attr("d",a).attr("fill",this.opts.color).attr("stroke","white").attr("stroke-width",2);break;default:throw new Error("Unknown marker type : "+this.opts.marker)}},Rubix.AreaSeries.prototype.on_focus=function(){this.setup&&this.linePath.attr("stroke-width",2*this.opts.strokewidth)},Rubix.AreaSeries.prototype.off_focus=function(){this.setup&&this.linePath.attr("stroke-width",2*this.opts.strokewidth)},Rubix.Cleanup=function(){for(var a=null,b=0;b<RubixListeners.length;b++)a=RubixListeners[b],$(window).off("orientationchange."+a),$(window).off("rubix.redraw."+a),$(window).off("resize.rubix."+a),$(window).off("debouncedresize.rubix."+a),$(window).off("throttledresize.rubix."+a);RubixListeners=[]},jQuery.fn.dragToSelect=function(a){var b="object"==typeof a?a:{},c=jQuery.extend({className:"jquery-drag-to-select",activeClass:"active",disabledClass:"disabled",selectedClass:"selected",scrollTH:10,percentCovered:25,selectables:!1,autoScroll:!1,selectOnMove:!1,onShow:function(){return!0},onHide:function(){return!0},onEnter:function(){return!0},onMove:function(){return!0},onLeave:function(){return!0},onRefresh:function(){return!0}},b),d=jQuery(this),e=d;if("disable"==a)return e.addClass(c.disabledClass),this;if("enable"==a)return e.removeClass(c.disabledClass),this;var f=function(){var a=e.offset(),b={left:a.left,top:a.top,width:e.width(),height:e.height()};return b},g={left:0,top:0},h=jQuery("<div/>").appendTo(e).attr("class",c.className).css("position","absolute").hide(),i=function(a){if(!e.is("."+c.disabledClass)){h.show();var b=f();g.left=a.pageX-b.left+e[0].scrollLeft,g.top=a.pageY-b.top+e[0].scrollTop;var d={left:g.left+"px",top:g.top+"px",width:"1px",height:"1px"};h.addClass(c.activeClass).css(d).show(),c.onShow()}},j=function(a){if(h.is("."+c.activeClass)&&!e.is("."+c.disabledClass)){var b=f(),d=a.pageX-b.left+e[0].scrollLeft,i=a.pageY-b.top+e[0].scrollTop,j=d,k=i,l=g.left-j,m=g.top-k;d>g.left&&(j=g.left,l=d-g.left),b.left+b.width<b.left+j+l?l=b.width-j:0>j&&(j=0,l=g.left),i>g.top&&(k=g.top,m=i-g.top),b.top+b.height<b.top+k+m?m=b.height-k:0>k&&(k=0,m=g.top);var n={left:j+"px",top:k+"px",width:l+"px",height:m+"px"};h.css(n),c.onRefresh()}},k=function(a){h.is("."+c.activeClass)&&!e.is("."+c.disabledClass)&&(h.width()>=2&&h.height()>=2?c.onHide(h)!==!1&&h.removeClass(c.activeClass):h.hide())},l=function(a){if(h.is("."+c.activeClass)&&!e.is("."+c.disabledClass)){var b=f();a.pageY+c.scrollTH>b.top+b.height&&(e[0].scrollTop+=c.scrollTH),a.pageY-c.scrollTH<b.top&&(e[0].scrollTop-=c.scrollTH),a.pageX+c.scrollTH>b.left+b.width&&(e[0].scrollLeft+=c.scrollTH),a.pageX-c.scrollTH<b.left&&(e[0].scrollLeft-=c.scrollTH)}},m=function(){if(h.is("."+c.activeClass)&&!e.is("."+c.disabledClass)){var a=d.find(c.selectables),b=h.offset(),f={left:b.left,top:b.top,width:h.width(),height:h.height()};a.each(function(a){var b=$(this),d=b.offset(),e={left:d.left,top:d.top,width:b.width(),height:b.height()};n(f,e)>c.percentCovered?b.addClass(c.selectedClass):b.removeClass(c.selectedClass)})}},n=function(a,b){if(a.left<=b.left&&a.top<=b.top&&a.left+a.width>=b.left+b.width&&a.top+a.height>b.top+b.height)return 100;a.right=a.left+a.width,a.bottom=a.top+a.height,b.right=b.left+b.width,b.bottom=b.top+b.height;var c=Math.max(a.left,b.left),d=Math.min(a.right,b.right),e=Math.max(a.top,b.top),f=Math.min(a.bottom,b.bottom);if(f>=e&&d>=c){var g=(d-c)*(f-e)/(b.width*b.height)*100;return g}return 0},o=!1;return e.mousedown(function(a){a.pageX+20>jQuery(document.body).width()||(o=!0,i(a),a.preventDefault())}).mouseenter(function(a){c.onEnter(a)}).mousemove(function(a){c.onMove(a)}).mouseleave(function(a){c.onLeave(a)}),jQuery(document).mousemove(function(a){o&&(j(a),c.selectables&&c.selectOnMove&&m(),c.autoScroll&&l(a),a.preventDefault())}).mouseup(function(a){o&&(c.selectables&&m(),o=!1,k(a),a.preventDefault())}),this},d3.sankey=function(){function a(){n.forEach(function(a){a.sourceLinks=[],a.targetLinks=[]}),o.forEach(function(a){var b=a.source,c=a.target;"number"==typeof b&&(b=a.source=n[a.source]),"number"==typeof c&&(c=a.target=n[a.target]),b.sourceLinks.push(a),c.targetLinks.push(a)})}function b(){n.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,i),d3.sum(a.targetLinks,i))})}function c(){for(var a,b=n,c=0;b.length;)a=[],b.forEach(function(b){b.x=c,b.dx=k,b.sourceLinks.forEach(function(b){a.push(b.target)})}),b=a,++c;d(c),e((m[0]-k)/(c-1))}function d(a){n.forEach(function(b){b.sourceLinks.length||(b.x=a-1)})}function e(a){n.forEach(function(b){b.x*=a})}function f(a){function b(){var a=d3.min(g,function(a){return(m[1]-(a.length-1)*l)/d3.sum(a,i)});g.forEach(function(b){b.forEach(function(b,c){b.y=c,b.dy=b.value*a})}),o.forEach(function(b){b.dy=b.value*a})}function c(a){function b(a){return h(a.source)*a.value}g.forEach(function(c,d){c.forEach(function(c){if(c.targetLinks.length){var d=d3.sum(c.targetLinks,b)/d3.sum(c.targetLinks,i);c.y+=(d-h(c))*a}})})}function d(a){function b(a){return h(a.target)*a.value}g.slice().reverse().forEach(function(c){c.forEach(function(c){if(c.sourceLinks.length){var d=d3.sum(c.sourceLinks,b)/d3.sum(c.sourceLinks,i);c.y+=(d-h(c))*a}})})}function e(){g.forEach(function(a){var b,c,d,e=0,g=a.length;for(a.sort(f),d=0;g>d;++d)b=a[d],c=e-b.y,c>0&&(b.y+=c),e=b.y+b.dy+l;if(c=e-l-m[1],c>0)for(e=b.y-=c,d=g-2;d>=0;--d)b=a[d],c=b.y+b.dy+l-e,c>0&&(b.y-=c),e=b.y})}function f(a,b){return a.y-b.y}var g=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(n).map(function(a){return a.values});b(),e();for(var j=1;a>0;--a)d(j*=.99),e(),c(j),e()}function g(){function a(a,b){return a.source.y-b.source.y}function b(a,b){return a.target.y-b.target.y}n.forEach(function(c){c.sourceLinks.sort(b),c.targetLinks.sort(a)}),n.forEach(function(a){var b=0,c=0;a.sourceLinks.forEach(function(a){a.sy=b,b+=a.dy}),a.targetLinks.forEach(function(a){a.ty=c,c+=a.dy})})}function h(a){return a.y+a.dy/2}function i(a){return a.value}var j={},k=24,l=8,m=[1,1],n=[],o=[];return j.nodeWidth=function(a){return arguments.length?(k=+a,j):k},j.nodePadding=function(a){return arguments.length?(l=+a,j):l},j.nodes=function(a){return arguments.length?(n=a,j):n},j.links=function(a){return arguments.length?(o=a,j):o},j.size=function(a){return arguments.length?(m=a,j):m},j.layout=function(d){return a(),b(),c(),f(d),g(),j},j.relayout=function(){return g(),j},j.link=function(){function a(a){var c=a.source.x+a.source.dx,d=a.target.x,e=d3.interpolateNumber(c,d),f=e(b),g=e(1-b),h=a.source.y+a.sy+a.dy/2,i=a.target.y+a.ty+a.dy/2;return"M"+c+","+h+"C"+f+","+h+" "+g+","+i+" "+d+","+i}var b=.5;return a.curvature=function(c){return arguments.length?(b=+c,a):b},a},j},function(a,b,c){"use strict";function d(a,b){return b=b||Error,function(){var c,d,e=arguments[0],f="["+(a?a+":":"")+e+"] ",g=arguments[1],h=arguments;for(c=f+g.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1);return b+2<h.length?ma(h[b+2]):a}),c=c+"\nhttp://errors.angularjs.org/1.3.16/"+(a?a+"/":"")+e,d=2;d<arguments.length;d++)c=c+(2==d?"?":"&")+"p"+(d-2)+"="+encodeURIComponent(ma(arguments[d]));return new b(c)}}function e(a){if(null==a||z(a))return!1;var b="length"in Object(a)&&a.length;return a.nodeType===sd&&b?!0:u(a)||ld(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d,g;if(a)if(x(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(ld(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);return a}function g(a){return Object.keys(a).sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){return++jd}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){for(var b=a.$$hashKey,c=1,d=arguments.length;d>c;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;h>g;g++){var i=f[g];a[i]=e[i]}}return k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(Object.create(a),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===gd.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===gd.call(a)}function z(a){return a&&a.window===a}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===gd.call(a)}function C(a){return"[object FormData]"===gd.call(a)}function D(a){return"[object Blob]"===gd.call(a)}function E(a){return"boolean"==typeof a}function F(a){return a&&x(a.then)}function G(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function H(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function I(a){return Wc(a.nodeName||a[0]&&a[0].nodeName)}function J(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),b}function K(a,b,c,d){if(z(a)||A(a))throw hd("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw hd("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=c.indexOf(a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(ld(a)){b.length=0;for(var h=0;h<a.length;h++)g=K(a[h],null,c,d),t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;ld(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)a.hasOwnProperty(j)&&(g=K(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g);k(b,i)}}else if(b=a,a)if(ld(a))b=K(a,[],c,d);else if(w(a))b=new Date(a.getTime());else if(y(a))b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex;else if(t(a)){var l=Object.create(Object.getPrototypeOf(a));b=K(a,l,c,d)}return b}function L(a,b){if(ld(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function M(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!ld(a)){if(w(a))return w(b)?M(a.getTime(),b.getTime()):!1;if(y(a))return y(b)?a.toString()==b.toString():!1;if(A(a)||A(b)||z(a)||z(b)||ld(b)||w(b)||y(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!M(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!ld(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!M(a[e],b[e]))return!1;return!0}}return!1}function N(a,b,c){return a.concat(dd.call(b,c))}function O(a,b){return dd.call(a,b||0)}function P(a,b){var c=arguments.length>2?O(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,N(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Q(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function R(a,b){return"undefined"==typeof a?c:(v(b)||(b=b?2:null),JSON.stringify(a,Q,b))}function S(a){return u(a)?JSON.parse(a):a}function T(a){a=ad(a).clone();try{a.empty()}catch(b){}var c=ad("<div>").append(a).html();try{return a[0].nodeType===ud?Wc(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Wc(b)})}catch(b){return Wc(c)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;Xc.call(d,c)?ld(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){ld(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function Z(a,b){var c,d,e=pd.length;for(a=ad(a),d=0;e>d;++d)if(c=pd[d]+b,u(c=a.attr(c)))return c;return null}function $(a,b){var c,d,e={};f(pd,function(b){var e=b+"app";!c&&a.hasAttribute&&a.hasAttribute(e)&&(c=a,d=a.getAttribute(e))}),f(pd,function(b){var e,f=b+"app";!c&&(e=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(f))}),c&&(e.strictDi=null!==Z(c,"strict-di"),b(c,d?[d]:[],e))}function _(c,d,e){t(e)||(e={});var g={strictDi:!1};e=l(g,e);var h=function(){if(c=ad(c),c.injector()){var a=c[0]===b?"document":T(c);throw hd("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),d.unshift("ng");var f=Sa(d,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},i=/^NG_ENABLE_DEBUG_INFO!/,j=/^NG_DEFER_BOOTSTRAP!/;return a&&i.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(i,"")),a&&!j.test(a.name)?h():(a.name=a.name.replace(j,""),id.resumeBootstrap=function(a){return f(a,function(a){d.push(a)}),h()},void(x(id.resumeDeferredBootstrap)&&id.resumeDeferredBootstrap()))}function aa(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ba(a){var b=id.element(a).injector();if(!b)throw hd("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ca(a,b){return b=b||"_",a.replace(qd,function(a,c){return(c?b:"")+a.toLowerCase()})}function da(){var b;rd||(bd=a.jQuery,bd&&bd.fn.on?(ad=bd,l(bd.fn,{scope:Md.scope,isolateScope:Md.isolateScope,controller:Md.controller,injector:Md.injector,inheritedData:Md.inheritedData}),b=bd.cleanData,bd.cleanData=function(a){var c;if(kd)kd=!1;else for(var d,e=0;null!=(d=a[e]);e++)c=bd._data(d,"events"),c&&c.$destroy&&bd(d).triggerHandler("$destroy");b(a)}):ad=ua,id.element=ad,rd=!0)}function ea(a,b,c){if(!a)throw hd("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function fa(a,b,c){return c&&ld(a)&&(a=a[a.length-1]),ea(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ga(a,b){if("hasOwnProperty"===a)throw hd("badname","hasOwnProperty is not a valid {0} name",b)}function ha(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?P(f,a):a}function ia(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return ad(d)}function ja(){return Object.create(null)}function ka(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d,e){return e||(e=b),function(){return e[d||"push"]([a,c,arguments]),j}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=[],i=a("$injector","invoke","push",e),j={_invokeQueue:b,_configBlocks:e,_runBlocks:h,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:i,run:function(a){return h.push(a),this}};return g&&i(g),j})}})}function la(a){var b=[];return JSON.stringify(a,function(a,c){if(c=Q(a,c),t(c)){if(b.indexOf(c)>=0)return"<<already seen>>";b.push(c)}return c})}function ma(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?la(a):a}function na(b){l(b,{bootstrap:_,copy:K,extend:l,equals:M,element:ad,forEach:f,injector:Sa,noop:o,bind:P,toJson:R,fromJson:S,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:G,isArray:ld,version:yd,isDate:w,lowercase:Wc,uppercase:Yc,callbacks:{counter:0},getTestability:ba,$$minErr:d,$$csp:od,reloadWithDebugInfo:aa}),cd=ka(a);try{cd("ngLocale")}catch(c){cd("ngLocale",[]).provider("$locale",qb)}cd("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Wb}),a.provider("$compile",Za).directive({a:Ee,input:Ve,textarea:Ve,form:Je,script:Lf,select:Of,style:Qf,option:Pf,ngBind:Ye,ngBindHtml:$e,ngBindTemplate:Ze,ngClass:af,ngClassEven:cf,ngClassOdd:bf,ngCloak:df,ngController:ef,ngForm:Ke,ngHide:Ff,ngIf:hf,ngInclude:jf,ngInit:lf,ngNonBindable:zf,ngPluralize:Af,ngRepeat:Bf,ngShow:Ef,ngStyle:Gf,ngSwitch:Hf,ngSwitchWhen:If,ngSwitchDefault:Jf,ngOptions:Nf,ngTransclude:Kf,ngModel:wf,ngList:mf,ngChange:_e,pattern:Sf,ngPattern:Sf,required:Rf,ngRequired:Rf,minlength:Uf,ngMinlength:Uf,maxlength:Tf,ngMaxlength:Tf,ngValue:Xe,ngModelOptions:yf}).directive({ngInclude:kf}).directive(Fe).directive(ff),a.provider({$anchorScroll:Ta,$animate:Wd,$browser:Wa,$cacheFactory:Xa,$controller:bb,$document:cb,$exceptionHandler:db,$filter:gc,$interpolate:ob,$interval:pb,$http:kb,$httpBackend:mb,$location:Eb,$log:Fb,$parse:Qb,$rootScope:Vb,$q:Rb,$$q:Sb,$sce:$b,$sceDelegate:Zb,$sniffer:_b,$templateCache:Ya,$templateRequest:ac,$$testability:bc,$timeout:cc,$window:fc,$$rAF:Ub,$$asyncCallback:Ua,$$jqLite:Na})}])}function oa(){return++Ad}function pa(a){return a.replace(Dd,function(a,b,c,d){return d?c.toUpperCase():c}).replace(Ed,"Moz$1")}function qa(a){return!Id.test(a)}function ra(a){var b=a.nodeType;return b===sd||!b||b===wd}function sa(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(qa(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),d=(Jd.exec(a)||["",""])[1].toLowerCase(),e=Ld[d]||Ld._default,c.innerHTML=e[1]+a.replace(Kd,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=N(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function ta(a,c){c=c||b;var d;return(d=Hd.exec(a))?[c.createElement(d[1])]:(d=sa(a,c))?d.childNodes:[]}function ua(a){if(a instanceof ua)return a;var b;if(u(a)&&(a=md(a),b=!0),!(this instanceof ua)){if(b&&"<"!=a.charAt(0))throw Gd("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ua(a)}b?Ea(this,ta(a)):Ea(this,a)}function va(a){return a.cloneNode(!0)}function wa(a,b){if(b||ya(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)ya(c[d])}function xa(a,b,c,d){if(s(d))throw Gd("offargs","jqLite#off() does not support the `selector` argument");var e=za(a),g=e&&e.events,h=e&&e.handle;if(h)if(b)f(b.split(" "),function(b){if(s(c)){var d=g[b];if(J(d||[],c),d&&d.length>0)return}Cd(a,b,h),delete g[b]});else for(b in g)"$destroy"!==b&&Cd(a,b,h),delete g[b]}function ya(a,b){var d=a.ng339,e=d&&zd[d];if(e){if(b)return void delete e.data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),xa(a)),delete zd[d],a.ng339=c;
}}function za(a,b){var d=a.ng339,e=d&&zd[d];return b&&!e&&(a.ng339=d=oa(),e=zd[d]={events:{},data:{},handle:c}),e}function Aa(a,b,c){if(ra(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=za(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];l(h,b)}}}function Ba(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Ca(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",md((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+md(b)+" "," ")))})}function Da(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=md(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",md(c))}}function Ea(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Fa(a,b){return Ga(a,"$"+(b||"ngController")+"Controller")}function Ga(a,b,d){a.nodeType==wd&&(a=a.documentElement);for(var e=ld(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=ad.data(a,e[f]))!==c)return d;a=a.parentNode||a.nodeType===xd&&a.host}}function Ha(a){for(wa(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ia(a,b){b||wa(a);var c=a.parentNode;c&&c.removeChild(a)}function Ja(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):ad(c).on("load",b)}function Ka(a,b){var c=Nd[b.toLowerCase()];return c&&Od[I(a)]&&c}function La(a,b){var c=a.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Pd[b]}function Ma(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0},f>1&&(e=L(e));for(var h=0;f>h;h++)c.isImmediatePropagationStopped()||e[h].call(a,c)}};return c.elem=a,c}function Na(){this.$get=function(){return l(ua,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ba(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Da(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Ca(a,b)}})}}function Oa(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||j)():d+":"+a}function Pa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Qa(a){var b=a.toString().replace(Td,""),c=b.match(Qd);return c?"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ra(a,b,c){var d,e,g,h;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw u(c)&&c||(c=a.name||Qa(a)),Ud("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=a.toString().replace(Td,""),g=e.match(Qd),f(g[1].split(Rd),function(a){a.replace(Sd,function(a,b,c){d.push(c)})})}a.$inject=d}}else ld(a)?(h=a.length-1,fa(a[h],"fn"),d=a.slice(0,h)):fa(a,"fn",!0);return d}function Sa(a,b){function d(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function e(a,b){if(ga(a,"service"),(x(b)||ld(b))&&(b=A.instantiate(b)),!b.$get)throw Ud("pget","Provider '{0}' must define $get factory method.",a);return z[a+v]=b}function g(a,b){return function(){var c=C.invoke(b,this);if(r(c))throw Ud("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function j(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function k(a,b){return h(a,q(b),!1)}function l(a,b){ga(a,"constant"),z[a]=b,B[a]=b}function m(a,b){var c=A.get(a+v),d=c.$get;c.$get=function(){var a=C.invoke(d,c);return C.invoke(b,null,{$delegate:a})}}function n(a){var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=A.get(d[0]);e[d[1]].apply(e,d[2])}}if(!y.get(a)){y.put(a,!0);try{u(a)?(b=cd(a),c=c.concat(n(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):x(a)?c.push(A.invoke(a)):ld(a)?c.push(A.invoke(a)):fa(a,"module")}catch(e){throw ld(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ud("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function p(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===s)throw Ud("cdep","Circular dependency found: {0}",b+" <- "+w.join(" <- "));return a[b]}try{return w.unshift(b),a[b]=s,a[b]=c(b,d)}catch(e){throw a[b]===s&&delete a[b],e}finally{w.shift()}}function e(a,c,e,f){"string"==typeof e&&(f=e,e=null);var g,h,i,j=[],k=Sa.$$annotate(a,b,f);for(h=0,g=k.length;g>h;h++){if(i=k[h],"string"!=typeof i)throw Ud("itkn","Incorrect injection token! Expected service name as string, got {0}",i);j.push(e&&e.hasOwnProperty(i)?e[i]:d(i,f))}return ld(a)&&(a=a[g]),a.apply(c,j)}function f(a,b,c){var d=Object.create((ld(a)?a[a.length-1]:a).prototype||null),f=e(a,d,b,c);return t(f)||x(f)?f:d}return{invoke:e,instantiate:f,get:d,annotate:Sa.$$annotate,has:function(b){return z.hasOwnProperty(b+v)||a.hasOwnProperty(b)}}}b=b===!0;var s={},v="Provider",w=[],y=new Pa([],!0),z={$provide:{provider:d(e),factory:d(h),service:d(j),value:d(k),constant:d(l),decorator:m}},A=z.$injector=p(z,function(a,b){throw id.isString(b)&&w.push(b),Ud("unpr","Unknown provider: {0}",w.join(" <- "))}),B={},C=B.$injector=p(B,function(a,b){var d=A.get(a+v,b);return C.invoke(d.$get,d,c,a)});return f(n(a),function(a){C.invoke(a||o)}),C}function Ta(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===I(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(x(a))a=a();else if(G(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else v(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(){var a,b=c.hash();b?(a=i.getElementById(b))?g(a):(a=e(i.getElementsByName(b)))?g(a):"top"===b&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Ja(function(){d.$evalAsync(h)})}),h}]}function Ua(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Va(a,b,d,e){function g(a){try{a.apply(null,O(arguments,1))}finally{if(y--,0===y)for(;z.length;)try{z.pop()()}catch(b){d.error(b)}}}function h(a){var b=a.indexOf("#");return-1===b?"":a.substr(b+1)}function i(a,b){!function c(){f(B,function(a){a()}),A=b(c,a)}()}function j(){l(),m()}function k(){try{return t.state}catch(a){}}function l(){C=k(),C=r(C)?null:C,M(C,J)&&(C=J),J=C}function m(){(E!==p.url()||D!==C)&&(E=p.url(),D=C,f(H,function(a){a(p.url(),C)}))}function n(a){try{return decodeURIComponent(a)}catch(b){return a}}var p=this,q=b[0],s=a.location,t=a.history,v=a.setTimeout,w=a.clearTimeout,x={};p.isMock=!1;var y=0,z=[];p.$$completeOutstandingRequest=g,p.$$incOutstandingRequestCount=function(){y++},p.notifyWhenNoOutstandingRequests=function(a){f(B,function(a){a()}),0===y?a():z.push(a)};var A,B=[];p.addPollFn=function(a){return r(A)&&i(100,v),B.push(a),a};var C,D,E=s.href,F=b.find("base"),G=null;l(),D=C,p.url=function(b,c,d){if(r(d)&&(d=null),s!==a.location&&(s=a.location),t!==a.history&&(t=a.history),b){var f=D===d;if(E===b&&(!e.history||f))return p;var g=E&&vb(E)===vb(b);return E=b,D=d,!e.history||g&&f?(g||(G=b),c?s.replace(b):g?s.hash=h(b):s.href=b):(t[c?"replaceState":"pushState"](d,"",b),l(),D=C),p}return G||s.href.replace(/%27/g,"'")},p.state=function(){return C};var H=[],I=!1,J=null;p.onUrlChange=function(b){return I||(e.history&&ad(a).on("popstate",j),ad(a).on("hashchange",j),I=!0),H.push(b),b},p.$$checkUrlChange=m,p.baseHref=function(){var a=F.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var K={},L="",N=p.baseHref();p.cookies=function(a,b){var e,f,g,h,i;if(!a){if(q.cookie!==L)for(L=q.cookie,f=L.split("; "),K={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=n(g.substring(0,i)),K[a]===c&&(K[a]=n(g.substring(i+1))));return K}b===c?q.cookie=encodeURIComponent(a)+"=;path="+N+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(q.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+N).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},p.defer=function(a,b){var c;return y++,c=v(function(){delete x[c],g(a)},b||0),x[c]=!0,c},p.defer.cancel=function(a){return x[a]?(delete x[a],w(a),g(o),!0):!1}}function Wa(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Va(a,d,b,c)}]}function Xa(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Ya(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Za(a,d){function e(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};return f(a,function(a,e){var f=a.match(c);if(!f)throw Xd("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}}),d}function g(a){var b=a.charAt(0);if(!b||b!==Wc(b))throw Xd("baddir","Directive name '{0}' is invalid. The first character must be a lowercase letter",a);return a}var h={},j="Directive",k=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,m=/(([\w\-]+)(?:\:([^;]+))?;?)/,r=H("ngSrc,ngSrcset,src,srcset"),v=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,w=/^(on[a-z]+|formaction)$/;this.directive=function z(b,c){return ga(b,"directive"),u(b)?(g(b),ea(c,"directiveFactory"),h.hasOwnProperty(b)||(h[b]=[],a.factory(b+j,["$injector","$exceptionHandler",function(a,c){var d=[];return f(h[b],function(f,g){try{var h=a.invoke(f);x(h)?h={compile:q(h)}:!h.compile&&h.link&&(h.compile=q(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||b,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA",t(h.scope)&&(h.$$isolateBindings=e(h.scope,h.name)),d.push(h)}catch(i){c(i)}}),d}])),h[b].push(c)):f(b,i(z)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var y=!0;this.debugInfoEnabled=function(a){return s(a)?(y=a,this):y},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,g,i,q,s,z,B,C,D){function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,c,d,e){a instanceof ad||(a=ad(a)),f(a,function(b,c){b.nodeType==ud&&b.nodeValue.match(/\S+/)&&(a[c]=ad(b).wrap("<span></span>").parent()[0])});var g=H(a,b,a,c,d,e);F.$$addScopeClass(a);var h=null;return function(b,c,d){ea(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers,i=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),h||(h=G(i));var j;if(j="html"!==h?ad($(h,ad("<div>").append(a).html())):c?Md.clone.call(a):a,f)for(var k in f)j.data("$"+k+"Controller",f[k].instance);return F.$$addScopeInfo(j,b),c&&c(j,b),g&&g(b,j,j,e),j}}function G(a){var b=a&&a[0];return b&&"foreignobject"!==I(b)&&b.toString().match(/SVG/)?"svg":"html"}function H(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,q;if(o){var r=d.length;for(q=new Array(r),k=0;k<p.length;k+=3)m=p[k],q[m]=d[m]}else q=d;for(k=0,l=p.length;l>k;)i=q[p[k++]],g=p[k++],h=p[k++],g?(g.scope?(j=a.$new(),F.$$addScopeInfo(ad(i),j)):j=a,n=g.transcludeOnThisElement?K(a,g.transclude,f,g.elementTranscludeOnThisElement):!g.templateOnThisElement&&f?f:!f&&b?K(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o,p=[],q=0;q<a.length;q++)i=new ga,j=L(a[q],[],i,0===q?e:c,f),k=j.length?Q(j,a[q],i,b,d,null,[],[],g):null,k&&k.scope&&F.$$addScopeClass(i.$$element),m=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:H(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),(k||m)&&(p.push(q,k,m),n=!0,o=o||k),g=null;return n?h:null}function K(a,b,c,d){var e=function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return e}function L(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case sd:S(b,$a(I(a)),"E",d,e);for(var j,l,n,o,p,q,r=a.attributes,s=0,v=r&&r.length;v>s;s++){var w=!1,x=!1;j=r[s],l=j.name,p=md(j.value),o=$a(l),(q=la.test(o))&&(l=l.replace(Yd,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=o.replace(/(Start|End)$/,"");U(y)&&o===y+"Start"&&(w=l,x=l.substr(0,l.length-5)+"end",l=l.substr(0,l.length-6)),n=$a(l.toLowerCase()),i[n]=l,(q||!c.hasOwnProperty(n))&&(c[n]=p,Ka(a,n)&&(c[n]=!0)),aa(a,b,p,n,q),S(b,n,"A",d,e,w,x)}if(g=a.className,t(g)&&(g=g.animVal),u(g)&&""!==g)for(;f=m.exec(g);)n=$a(f[2]),S(b,n,"C",d,e)&&(c[n]=md(f[3])),g=g.substr(f.index+f[0].length);break;case ud:Z(b,a.nodeValue);break;case vd:try{f=k.exec(a.nodeValue),f&&(n=$a(f[1]),S(b,n,"M",d,e)&&(c[n]=md(f[2])))}catch(z){}}return b.sort(X),b}function N(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Xd("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==sd&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return ad(d)}function P(a,b,c){return function(d,e,f,g,h){return e=N(e[0],b,c),a(d,e,f,g,h)}}function Q(a,g,h,j,k,l,m,n,o){function p(a,b,c,d){a&&(c&&(a=P(a,c,d)),a.require=z.require,a.directiveName=B,(I===z||z.$$isolateScope)&&(a=da(a,{isolateScope:!0})),m.push(a)),b&&(c&&(b=P(b,c,d)),b.require=z.require,b.directiveName=B,(I===z||z.$$isolateScope)&&(b=da(b,{isolateScope:!0})),n.push(b))}function r(a,b,c,d){var e,g,h="data",i=!1,j=c;if(u(b)){if(g=b.match(v),b=b.substring(g[0].length),g[3]&&(g[1]?g[3]=null:g[1]=g[3]),"^"===g[1]?h="inheritedData":"^^"===g[1]&&(h="inheritedData",j=c.parent()),"?"===g[2]&&(i=!0),e=null,d&&"data"===h&&(e=d[b])&&(e=e.instance),e=e||j[h]("$"+b+"Controller"),!e&&!i)throw Xd("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e||null}return ld(b)&&(e=[],f(b,function(b){e.push(r(a,b,c,d))})),e}function s(a,b,e,j,k){function l(a,b,d){var e;return A(a)||(d=b,b=a,a=c),U&&(e=v),d||(d=U?x.parent():x),k(a,b,e,d,D)}var o,p,s,t,u,v,w,x,z;if(g===e?(z=h,x=h.$$element):(x=ad(e),z=new ga(x,h)),I&&(u=b.$new(!0)),k&&(w=l,w.$$boundTransclude=k),H&&(y={},v={},f(H,function(a){var c,d={$scope:a===I||a.$$isolateScope?u:b,$element:x,$attrs:z,$transclude:w};t=a.controller,"@"==t&&(t=z[a.name]),c=q(t,d,!0,a.controllerAs),v[a.name]=c,U||x.data("$"+a.name+"Controller",c.instance),y[a.name]=c})),I){F.$$addScopeInfo(x,u,!0,!(J&&(J===I||J===I.$$originalDirective))),F.$$addScopeClass(x,!0);var B=y&&y[I.name],C=u;B&&B.identifier&&I.bindToController===!0&&(C=B.instance),f(u.$$isolateBindings=I.$$isolateBindings,function(a,c){var e,f,g,h,j=a.attrName,k=a.optional,l=a.mode;switch(l){case"@":z.$observe(j,function(a){C[c]=a}),z.$$observers[j].$$scope=b,z[j]&&(C[c]=d(z[j])(b));break;case"=":if(k&&!z[j])return;f=i(z[j]),h=f.literal?M:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=C[c]=f(b),Xd("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",z[j],I.name)},e=C[c]=f(b);var m=function(a){return h(a,C[c])||(h(a,e)?g(b,a=C[c]):C[c]=a),e=a};m.$stateful=!0;var n;n=a.collection?b.$watchCollection(z[j],m):b.$watch(i(z[j],m),null,f.literal),u.$on("$destroy",n);break;case"&":f=i(z[j]),C[c]=function(a){return f(b,a)}}})}for(y&&(f(y,function(a){a()}),y=null),o=0,p=m.length;p>o;o++)s=m[o],fa(s,s.isolateScope?u:b,x,z,s.require&&r(s.directiveName,s.require,x,v),w);var D=b;for(I&&(I.template||null===I.templateUrl)&&(D=u),a&&a(D,e.childNodes,c,k),o=n.length-1;o>=0;o--)s=n[o],fa(s,s.isolateScope?u:b,x,z,s.require&&r(s.directiveName,s.require,x,v),w)}o=o||{};for(var w,y,z,B,C,D,E,G=-Number.MAX_VALUE,H=o.controllerDirectives,I=o.newIsolateScopeDirective,J=o.templateDirective,K=o.nonTlbTranscludeDirective,Q=!1,S=!1,U=o.hasElementTranscludeDirective,X=h.$$element=ad(g),Z=l,_=j,aa=0,ca=a.length;ca>aa;aa++){z=a[aa];var ea=z.$$start,ha=z.$$end;if(ea&&(X=N(g,ea,ha)),C=c,G>z.priority)break;if((E=z.scope)&&(z.templateUrl||(t(E)?(Y("new/isolated scope",I||w,z,X),I=z):Y("new/isolated scope",I,z,X)),w=w||z),B=z.name,!z.templateUrl&&z.controller&&(E=z.controller,H=H||{},Y("'"+B+"' controller",H[B],z,X),H[B]=z),(E=z.transclude)&&(Q=!0,z.$$tlb||(Y("transclusion",K,z,X),K=z),"element"==E?(U=!0,G=z.priority,C=X,X=h.$$element=ad(b.createComment(" "+B+": "+h[B]+" ")),g=X[0],ba(k,O(C),g),_=F(C,j,G,Z&&Z.name,{nonTlbTranscludeDirective:K})):(C=ad(va(g)).contents(),X.empty(),_=F(C,j))),z.template)if(S=!0,Y("template",J,z,X),J=z,E=x(z.template)?z.template(X,h):z.template,E=ka(E),z.replace){if(Z=z,C=qa(E)?[]:ab($(z.templateNamespace,md(E))),g=C[0],1!=C.length||g.nodeType!==sd)throw Xd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",B,"");ba(k,X,g);var ia={$attr:{}},ja=L(g,[],ia),la=a.splice(aa+1,a.length-(aa+1));I&&R(ja),a=a.concat(ja).concat(la),V(h,ia),ca=a.length}else X.html(E);if(z.templateUrl)S=!0,Y("template",J,z,X),J=z,z.replace&&(Z=z),s=W(a.splice(aa,a.length-aa),X,h,k,Q&&_,m,n,{controllerDirectives:H,newIsolateScopeDirective:I,templateDirective:J,nonTlbTranscludeDirective:K}),ca=a.length;else if(z.compile)try{D=z.compile(X,h,_),x(D)?p(null,D,ea,ha):D&&p(D.pre,D.post,ea,ha)}catch(ma){e(ma,T(X))}z.terminal&&(s.terminal=!0,G=Math.max(G,z.priority))}return s.scope=w&&w.scope===!0,s.transcludeOnThisElement=Q,s.elementTranscludeOnThisElement=U,s.templateOnThisElement=S,s.transclude=_,o.hasElementTranscludeDirective=U,s}function R(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function S(b,d,f,g,i,k,l){if(d===i)return null;var m=null;if(h.hasOwnProperty(d))for(var o,p=a.get(d+j),q=0,r=p.length;r>q;q++)try{o=p[q],(g===c||g>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){e(s)}return m}function U(b){if(h.hasOwnProperty(b))for(var c,d=a.get(b+j),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function V(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function W(a,b,c,d,e,h,i,j){var k,l,m=[],o=b[0],p=a.shift(),q=n(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=x(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),g(B.getTrustedResourceUrl(r)).then(function(g){var n,u,v,w;if(g=ka(g),p.replace){if(v=qa(g)?[]:ab($(s,md(g))),n=v[0],1!=v.length||n.nodeType!==sd)throw Xd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},ba(d,b,n);var x=L(n,[],u);t(p.scope)&&R(x),a=x.concat(a),V(c,u)}else n=o,b.html(g);for(a.unshift(q),k=Q(a,n,c,e,b,p,h,i,j),f(d,function(a,c){a==n&&(d[c]=b[0])}),l=H(b[0].childNodes,e);m.length;){var y=m.shift(),z=m.shift(),A=m.shift(),B=m.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=va(n)),ba(A,ad(z),C),E(ad(C),D)}w=k.transcludeOnThisElement?K(y,k.transclude,B):B,k(l,y,C,d,w)}}m=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(m?m.push(b,c,d,f):(k.transcludeOnThisElement&&(f=K(b,k.transclude,e)),k(l,b,c,d,f)))}}function X(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Y(a,b,c,d){if(b)throw Xd("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function Z(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=!!b.length;return d&&F.$$addBindingClass(b),function(a,b){var e=b.parent();d||F.$$addBindingClass(e),F.$$addBindingInfo(e,c.expressions),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function $(a,c){switch(a=Wc(a||"html")){case"svg":case"math":var d=b.createElement("div");return d.innerHTML="<"+a+">"+c+"</"+a+">",d.childNodes[0].childNodes;default:return c}}function _(a,b){if("srcdoc"==b)return B.HTML;var c=I(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?B.RESOURCE_URL:void 0}function aa(a,b,c,e,f){var g=_(a,e);f=r[e]||f;var h=d(c,!0,g,f);if(h){if("multiple"===e&&"select"===I(a))throw Xd("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers={});if(w.test(e))throw Xd("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==c&&(h=k&&d(k,!0,g,f),c=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function ba(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1,a.context===g&&(a.context=d);break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),ad(d).data(ad(g).data()),bd?(kd=!0,bd.cleanData([g])):delete ad.cache[g[ad.expando]];for(var n=1,o=c.length;o>n;n++){var p=c[n];ad(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function da(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function fa(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,T(c))}}var ga=function(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a};ga.prototype={$normalize:$a,$addClass:function(a){a&&a.length>0&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&C.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=_a(a,b);c&&c.length&&C.addClass(this.$$element,c);var d=_a(b,a);d&&d.length&&C.removeClass(this.$$element,d)},$set:function(a,b,d,g){var h,i=this.$$element[0],j=Ka(i,a),k=La(i,a),l=a;if(j?(this.$$element.prop(a,b),g=j):k&&(this[k]=b,l=k),this[a]=b,g?this.$attr[a]=g:(g=this.$attr[a],g||(this.$attr[a]=g=ca(a,"-"))),h=I(this.$$element),"a"===h&&"href"===a||"img"===h&&"src"===a)this[a]=b=D(b,"src"===a);else if("img"===h&&"srcset"===a){for(var m="",n=md(b),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(n)?o:/(,)/,q=n.split(p),r=Math.floor(q.length/2),s=0;r>s;s++){var t=2*s;m+=D(md(q[t]),!0),m+=" "+md(q[t+1])}var u=md(q[2*s]).split(/\s/);m+=D(md(u[0]),!0),2===u.length&&(m+=" "+md(u[1])),this[a]=b=m}d!==!1&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));var v=this.$$observers;v&&f(v[l],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ja()),e=d[a]||(d[a]=[]);return e.push(b),s.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){J(e,b)}}};var ha=d.startSymbol(),ia=d.endSymbol(),ka="{{"==ha||"}}"==ia?p:function(a){return a.replace(/\{\{/g,ha).replace(/}}/g,ia)},la=/^ngAttr[A-Z]/;return F.$$addBindingInfo=y?function(a,b){var c=a.data("$binding")||[];ld(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:o,F.$$addBindingClass=y?function(a){E(a,"ng-binding")}:o,F.$$addScopeInfo=y?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:o,F.$$addScopeClass=y?function(a,b){E(a,b?"ng-isolate-scope":"ng-scope")}:o,F}]}function $a(a){return pa(a.replace(Yd,""))}function _a(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function ab(a){a=ad(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===vd&&ed.call(a,b,1)}return a}function bb(){var a={},b=!1,e=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){ga(b,"controller"),t(b)?l(a,b):a[b]=c},this.allowGlobals=function(){b=!0},this.$get=["$injector","$window",function(f,g){function h(a,b,c,e){if(!a||!t(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,i,j,k){var m,n,o,p;if(j=j===!0,k&&u(k)&&(p=k),u(d)){if(n=d.match(e),!n)throw Zd("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",d);o=n[1],p=p||n[3],d=a.hasOwnProperty(o)?a[o]:ha(i.$scope,o,!0)||(b?ha(g,o,!0):c),fa(d,o,!0)}if(j){var q=(ld(d)?d[d.length-1]:d).prototype;return m=Object.create(q||null),p&&h(i,p,m,o||d.name),l(function(){return f.invoke(d,m,i,o),m},{instance:m,identifier:p})}return m=f.instantiate(d,i,o),p&&h(i,p,m,o||d.name),m}}]}function cb(){this.$get=["$window",function(a){return ad(a.document)}]}function db(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function eb(a,b){if(u(a)){var c=a.replace(ce,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf($d)||fb(c))&&(a=S(c))}}return a}function fb(a){var b=a.match(ae);return b&&be[b[0]].test(a)}function gb(a){var b,c,d,e=ja();return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Wc(md(a.substr(0,d))),c=md(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function hb(a){var b=t(a)?a:c;return function(c){if(b||(b=gb(a)),c){var d=b[Wc(c)];return void 0===d&&(d=null),d}return b}}function ib(a,b,c,d){return x(d)?d(a,b,c):(f(d,function(d){a=d(a,b,c)}),a)}function jb(a){return a>=200&&300>a}function kb(){var a=this.defaults={transformResponse:[eb],transformRequest:[function(a){return!t(a)||B(a)||D(a)||C(a)?a:R(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(_d),put:L(_d),patch:L(_d)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},b=!1;this.useApplyAsync=function(a){return s(a)?(b=!!a,this):b};var e=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(g,i,j,k,m,n){function o(b){function e(a){var b=l({},a);return a.data?b.data=ib(a.data,a.headers,a.status,i.transformResponse):b.data=a.data,jb(a.status)?b:m.reject(b)}function g(a){var b,c={};return f(a,function(a,d){x(a)?(b=a(),null!=b&&(c[d]=b)):c[d]=a}),c}function h(b){var c,d,e,f=a.headers,h=l({},b.headers);f=l({},f.common,f[Wc(b.method)]);a:for(c in f){d=Wc(c);for(e in h)if(Wc(e)===d)continue a;h[c]=f[c]}return g(h)}if(!id.isObject(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);var i=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},b);i.headers=h(b),i.method=Yc(i.method);var j=function(b){var d=b.headers,g=ib(b.data,hb(d),c,b.transformRequest);return r(g)&&f(d,function(a,b){"content-type"===Wc(b)&&delete d[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),v(b,g).then(e,e)},k=[j,c],n=m.when(i);for(f(A,function(a){(a.request||a.requestError)&&k.unshift(a.request,a.requestError),(a.response||a.responseError)&&k.push(a.response,a.responseError)});k.length;){var o=k.shift(),p=k.shift();n=n.then(o,p)}return n.success=function(a){return fa(a,"fn"),n.then(function(b){a(b.data,b.status,b.headers,i)}),n},n.error=function(a){return fa(a,"fn"),n.then(null,function(b){a(b.data,b.status,b.headers,i)}),n},n}function p(a){f(arguments,function(a){o[a]=function(b,c){return o(l(c||{},{method:a,url:b}))}})}function q(a){f(arguments,function(a){o[a]=function(b,c,d){return o(l(d||{},{method:a,url:b,data:c}))}})}function v(d,e){function f(a,c,d,e){function f(){h(c,a,d,e)}n&&(jb(a)?n.put(w,[a,c,gb(d),e]):n.remove(w)),b?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function h(a,b,c,e){b=Math.max(b,0),(jb(b)?q.resolve:q.reject)({data:a,status:b,headers:hb(c),config:d,statusText:e})}function j(a){h(a.data,a.status,L(a.headers()),a.statusText)}function l(){var a=o.pendingRequests.indexOf(d);-1!==a&&o.pendingRequests.splice(a,1)}var n,p,q=m.defer(),u=q.promise,v=d.headers,w=y(d.url,d.params);if(o.pendingRequests.push(d),u.then(l,l),!d.cache&&!a.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(n=t(d.cache)?d.cache:t(a.cache)?a.cache:z),n&&(p=n.get(w),s(p)?F(p)?p.then(j,j):ld(p)?h(p[1],p[0],L(p[2]),p[3]):h(p,200,{},"OK"):n.put(w,u)),r(p)){var x=ec(d.url)?i.cookies()[d.xsrfCookieName||a.xsrfCookieName]:c;x&&(v[d.xsrfHeaderName||a.xsrfHeaderName]=x),g(d.method,w,e,f,v,d.timeout,d.withCredentials,d.responseType)}return u}function y(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(ld(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():R(a)),c.push(Y(b)+"="+Y(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var z=j("$http"),A=[];return f(e,function(a){A.unshift(u(a)?n.get(a):n.invoke(a))}),o.pendingRequests=[],p("get","delete","head","jsonp"),q("post","put","patch"),o.defaults=a,o}]}function lb(){return new a.XMLHttpRequest}function mb(){this.$get=["$browser","$window","$document",function(a,b,c){return nb(a,lb,a.defer,b.angular.callbacks,c[0])}]}function nb(a,b,d,e,g){function h(a,b,c){var d=g.createElement("script"),f=null;return d.type="text/javascript",d.src=a,d.async=!0,f=function(a){Cd(d,"load",f),Cd(d,"error",f),g.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},Bd(d,"load",f),Bd(d,"error",f),g.body.appendChild(d),f}return function(g,i,j,k,l,m,n,p){function q(){u&&u(),v&&v.abort()}function r(b,e,f,g,h){y!==c&&d.cancel(y),u=v=null,b(e,f,g,h),a.$$completeOutstandingRequest(o)}if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==Wc(g)){var t="_"+(e.counter++).toString(36);e[t]=function(a){e[t].data=a,e[t].called=!0};var u=h(i.replace("JSON_CALLBACK","angular.callbacks."+t),t,function(a,b){r(k,a,e[t].data,"",b),e[t]=o})}else{var v=b();v.open(g,i,!0),f(l,function(a,b){s(a)&&v.setRequestHeader(b,a)}),v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:"file"==dc(i).protocol?404:0),r(k,c,b,v.getAllResponseHeaders(),a)};var w=function(){r(k,-1,null,null,"")};if(v.onerror=w,v.onabort=w,n&&(v.withCredentials=!0),p)try{v.responseType=p}catch(x){if("json"!==p)throw x}v.send(j||null)}if(m>0)var y=d(q,m);else F(m)&&m.then(q)}}function ob(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,m,n){function o(c){return c.replace(j,a).replace(k,b)}function p(a){
try{return a=D(a),n&&!s(a)?a:E(a)}catch(b){var c=de("interr","Can't interpolate: {0}\n{1}",f,b.toString());d(c)}}n=!!n;for(var q,t,u,v=0,w=[],y=[],z=f.length,A=[],B=[];z>v;){if(-1==(q=f.indexOf(a,v))||-1==(t=f.indexOf(b,q+h))){v!==z&&A.push(o(f.substring(v)));break}v!==q&&A.push(o(f.substring(v,q))),u=f.substring(q+h,t),w.push(u),y.push(c(u,p)),v=t+i,B.push(A.length),A.push("")}if(m&&A.length>1)throw de("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);if(!g||w.length){var C=function(a){for(var b=0,c=w.length;c>b;b++){if(n&&r(a[b]))return;A[B[b]]=a[b]}return A.join("")},D=function(a){return m?e.getTrusted(m,a):e.valueOf(a)},E=function(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=R(a)}return a};return l(function(a){var b=0,c=w.length,e=new Array(c);try{for(;c>b;b++)e[b]=y[b](a);return C(e)}catch(g){var h=de("interr","Can't interpolate: {0}\n{1}",f,g.toString());d(h)}},{exp:f,expressions:w,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(y,function(c,e){var f=C(c);x(b)&&b.call(this,f,c!==e?d:f,a),d=f},c)}})}}var h=a.length,i=b.length,j=new RegExp(a.replace(/./g,f),"g"),k=new RegExp(b.replace(/./g,f),"g");return g.startSymbol=function(){return a},g.endSymbol=function(){return b},g}]}function pb(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(e,g,h,i){var j=b.setInterval,k=b.clearInterval,l=0,m=s(i)&&!i,n=(m?d:c).defer(),o=n.promise;return h=s(h)?h:0,o.then(null,null,e),o.$$intervalId=j(function(){n.notify(l++),h>0&&l>=h&&(n.resolve(l),k(o.$$intervalId),delete f[o.$$intervalId]),m||a.$apply()},g),f[o.$$intervalId]=n,o}var f={};return e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1},e}]}function qb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(a){return 1===a?"one":"other"}}}}function rb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function sb(a,b){var c=dc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=m(c.port)||fe[c.protocol]||null}function tb(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=dc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=V(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function ub(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function vb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function wb(a){return a.replace(/(#.+)|#$/,"$1")}function xb(a){return a.substr(0,vb(a).lastIndexOf("/")+1)}function yb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function zb(a,b){this.$$html5=!0,b=b||"";var d=xb(a);sb(a,this),this.$$parse=function(a){var b=ub(d,a);if(!u(b))throw ge("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,d);tb(b,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),b=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h,i;return(g=ub(a,e))!==c?(h=g,i=(g=ub(b,g))!==c?d+(ub("/",g)||g):a+h):(g=ub(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function Ab(a,b){var c=xb(a);sb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=ub(a,d)||ub(c,d);"#"===g.charAt(0)?(f=ub(b,g),r(f)&&(f=g)):f=this.$$html5?g:"",tb(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return vb(a)==vb(b)?(this.$$parse(b),!0):!1}}function Bb(a,b){this.$$html5=!0,Ab.apply(this,arguments);var c=xb(a);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==vb(d)?f=d:(g=ub(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function Cb(a){return function(){return this[a]}}function Db(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Eb(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return E(a)?(b.enabled=a,this):t(a)?(E(a.enabled)&&(b.enabled=a.enabled),E(a.requireBase)&&(b.requireBase=a.requireBase),E(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw ge("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=yb(n)+(m||"/"),k=e.history?zb:Bb}else l=vb(n),k=Ab;j=new k(l,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var o=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=ad(a.target);"a"!==I(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=dc(h.animVal).href),o.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),wb(j.absUrl())!=wb(n)&&d.url(j.absUrl(),!0);var p=!0;return d.onUrlChange(function(a,b){c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(p=!1,i(e,f)))}),c.$$phase||c.$digest()}),c.$watch(function(){var a=wb(d.url()),b=wb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(p||k)&&(p=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Fb(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Gb(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw ie("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Hb(a,b){if(a){if(a.constructor===a)throw ie("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw ie("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw ie("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw ie("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function Ib(a,b){if(a){if(a.constructor===a)throw ie("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===je||a===ke||a===le)throw ie("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function Jb(a){return a.constant}function Kb(a,b,c,d,e){Hb(a,e),Hb(b,e);for(var f,g=c.split("."),h=0;g.length>1;h++){f=Gb(g.shift(),e);var i=0===h&&b&&b[f]||a[f];i||(i={},a[f]=i),a=Hb(i,e)}return f=Gb(g.shift(),e),Hb(a[f],e),a[f]=d,d}function Lb(a){return"constructor"==a}function Mb(a,b,d,e,f,g,h){Gb(a,g),Gb(b,g),Gb(d,g),Gb(e,g),Gb(f,g);var i=function(a){return Hb(a,g)},j=h||Lb(a)?i:p,k=h||Lb(b)?i:p,l=h||Lb(d)?i:p,m=h||Lb(e)?i:p,n=h||Lb(f)?i:p;return function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=j(i[a]),b?null==i?c:(i=k(i[b]),d?null==i?c:(i=l(i[d]),e?null==i?c:(i=m(i[e]),f?null==i?c:i=n(i[f]):i):i):i):i)}}function Nb(a,b){return function(c,d){return a(c,d,Hb,b)}}function Ob(a,b,d){var e=b.expensiveChecks,g=e?se:re,h=g[a];if(h)return h;var i=a.split("."),j=i.length;if(b.csp)h=6>j?Mb(i[0],i[1],i[2],i[3],i[4],d,e):function(a,b){var f,g=0;do f=Mb(i[g++],i[g++],i[g++],i[g++],i[g++],d,e)(a,b),b=c,a=f;while(j>g);return f};else{var k="";e&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=e;f(i,function(a,b){Gb(a,d);var c=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;(e||Lb(a))&&(c="eso("+c+", fe)",l=!0),k+="if(s == null) return undefined;\ns="+c+";\n"}),k+="return s;";var m=new Function("s","l","eso","fe",k);m.toString=q(k),l&&(m=Nb(m,d)),h=m}return h.sharedGetter=!0,h.assign=function(b,c,d){return Kb(b,d,a,c,a)},g[a]=h,h}function Pb(a){return x(a.valueOf)?a.valueOf():te.call(a)}function Qb(){var a=ja(),b=ja();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;return a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign),b}function g(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.constant||(e.inputs?g(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function h(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=Pb(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function i(a,b,c,d){var e,f=d.$$inputs||(d.$$inputs=g(d.inputs,[]));if(1===f.length){var i=h;return f=f[0],a.$watch(function(a){var b=f(a);return h(b,i)||(e=d(a),i=b&&Pb(b)),e},b,c)}for(var j=[],k=0,l=f.length;l>k;k++)j[k]=h;return a.$watch(function(a){for(var b=!1,c=0,g=f.length;g>c;c++){var i=f[c](a);(b||(b=!h(i,j[c])))&&(j[c]=i&&Pb(i))}return b&&(e=d(a)),e},b,c)}function j(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,x(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;return f(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a,x(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function l(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){x(b)&&b.apply(this,arguments),e()},c)}function m(a,b){if(!b)return a;var c=a.$$watchDelegate,d=c!==k&&c!==j,e=d?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return s(e)?f:e};return a.$$watchDelegate&&a.$$watchDelegate!==i?e.$$watchDelegate=a.$$watchDelegate:b.$stateful||(e.$$watchDelegate=i,e.inputs=[a]),e}var n={csp:d.csp,expensiveChecks:!1},p={csp:d.csp,expensiveChecks:!0};return function(d,f,g){var h,q,r;switch(typeof d){case"string":r=d=d.trim();var s=g?b:a;if(h=s[r],!h){":"===d.charAt(0)&&":"===d.charAt(1)&&(q=!0,d=d.substring(2));var t=g?p:n,u=new pe(t),v=new qe(u,c,t);h=v.parse(d),h.constant?h.$$watchDelegate=l:q?(h=e(h),h.$$watchDelegate=h.literal?k:j):h.inputs&&(h.$$watchDelegate=i),s[r]=h}return m(h,f);case"function":return m(d,f);default:return m(o,f)}}}]}function Rb(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Tb(function(b){a.$evalAsync(b)},b)}]}function Sb(){this.$get=["$browser","$exceptionHandler",function(a,b){return Tb(function(b){a.defer(b)},b)}]}function Tb(a,b){function e(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function i(a){var d,e,f;f=a.pending,a.processScheduled=!1,a.pending=c;for(var g=0,h=f.length;h>g;++g){e=f[g][0],d=f[g][a.status];try{x(d)?e.resolve(d(a.value)):1===a.status?e.resolve(a.value):e.reject(a.value)}catch(i){e.reject(i),b(i)}}}function j(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){i(b)}))}function k(){this.promise=new g,this.resolve=h(this,this.resolve),this.reject=h(this,this.reject),this.notify=h(this,this.notify)}function l(a){var b=new k,c=0,d=ld(a)?[]:{};return f(a,function(a,e){c++,r(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var m=d("$q",TypeError),n=function(){return new k};g.prototype={then:function(a,b,c){var d=new k;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&j(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}},k.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,this.$$reject);try{(t(a)||x(a))&&(c=a&&a.then),x(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,j(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,j(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(x(a)?a(c):c)}catch(h){b(h)}}})}};var o=function(a){var b=new k;return b.reject(a),b.promise},p=function(a,b){var c=new k;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{x(c)&&(d=c())}catch(e){return p(e,!1)}return F(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},r=function(a,b,c,d){var e=new k;return e.resolve(a),e.promise.then(b,c,d)},s=function u(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!x(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);if(!(this instanceof u))return new u(a);var d=new k;return a(b,c),d.promise};return s.defer=n,s.reject=o,s.when=r,s.all=l,s}function Ub(){this.$get=["$window","$timeout",function(a,b){function c(){for(var a=0;a<k.length;a++){var b=k[a];b&&(k[a]=null,b())}j=k.length=0}function d(a){var b=k.length;return j++,k.push(a),0===b&&(i=h(c)),function(){b>=0&&(k[b]=null,b=null,0===--j&&i&&(i(),i=null,k.length=0))}}var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame,f=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,g=!!e,h=g?function(a){var b=e(a);return function(){f(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};d.supported=g;var i,j=0,k=[];return d}]}function Vb(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=j(),this.$$ChildScope=null}return b.prototype=a,b}var b=10,c=d("$rootScope"),g=null,h=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,i,k,l){function m(a){a.currentScope.$$destroyed=!0}function n(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function p(a){if(y.$$phase)throw c("inprog","{0} already in progress",y.$$phase);y.$$phase=a}function q(){y.$$phase=null}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function u(){}function v(){for(;B.length;)try{B.shift()()}catch(a){i(a)}h=null}function w(){null===h&&(h=l.defer(function(){y.$apply(v)}))}n.prototype={constructor:n,$new:function(b,c){var d;return c=c||this,b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",m),d},$watch:function(a,b,c){var d=k(a);if(d.$$watchDelegate)return d.$$watchDelegate(this,b,c,d);var e=this,f=e.$$watchers,h={fn:b,last:u,get:d,exp:a,eq:!!c};return g=null,x(b)||(h.fn=o),f||(f=e.$$watchers=[]),f.unshift(h),function(){J(f,h),g=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!r(f)){if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,d||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)f.hasOwnProperty(c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,d||i===h||(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)f.hasOwnProperty(c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,i)):b(f,h,i),j)if(t(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)Xc.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,i=this,j=b.length>1,l=0,m=k(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var a,d,e,f,j,k,m,n,o,r,s=b,t=this,w=[];p("$digest"),l.$$checkUrlChange(),this===y&&null!==h&&(l.defer.cancel(h),v()),g=null;do{for(k=!1,n=t;z.length;){try{r=z.shift(),r.scope.$eval(r.expression,r.locals)}catch(B){i(B)}g=null}a:do{if(f=n.$$watchers)for(j=f.length;j--;)try{if(a=f[j])if((d=a.get(n))===(e=a.last)||(a.eq?M(d,e):"number"==typeof d&&"number"==typeof e&&isNaN(d)&&isNaN(e))){if(a===g){k=!1;break a}}else k=!0,g=a,a.last=a.eq?K(d,null):d,a.fn(d,e===u?d:e,n),5>s&&(o=4-s,w[o]||(w[o]=[]),w[o].push({msg:x(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:d,oldVal:e}))}catch(B){i(B)}if(!(m=n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(m=n.$$nextSibling);)n=n.$parent}while(n=m);if((k||z.length)&&!s--)throw q(),c("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",b,w)}while(k||z.length);for(q();A.length;)try{A.shift()()}catch(B){i(B)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==y){for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=o,this.$on=this.$watch=this.$watchGroup=function(){return o},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return k(a)(this,b)},$evalAsync:function(a,b){y.$$phase||z.length||l.defer(function(){z.length&&y.$digest()}),z.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){A.push(a)},$apply:function(a){try{return p("$apply"),this.$eval(a)}catch(b){i(b)}finally{q();try{y.$digest()}catch(b){throw i(b),b}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&B.push(b),w()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,s(e,1,a))}},$emit:function(a,b){var c,d,e,f=[],g=this,h=!1,j={name:a,targetScope:g,stopPropagation:function(){h=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=N([j],arguments,1);do{for(c=g.$$listeners[a]||f,j.currentScope=g,d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){i(l)}else c.splice(d,1),d--,e--;if(h)return j.currentScope=null,j;g=g.$parent}while(g);return j.currentScope=null,j},$broadcast:function(a,b){var c=this,d=c,e=c,f={name:a,targetScope:c,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!c.$$listenerCount[a])return f;for(var g,h,j,k=N([f],arguments,1);d=e;){for(f.currentScope=d,g=d.$$listeners[a]||[],h=0,j=g.length;j>h;h++)if(g[h])try{g[h].apply(null,k)}catch(l){i(l)}else g.splice(h,1),h--,j--;if(!(e=d.$$listenerCount[a]&&d.$$childHead||d!==c&&d.$$nextSibling))for(;d!==c&&!(e=d.$$nextSibling);)d=d.$parent}return f.currentScope=null,f}};var y=new n,z=y.$$asyncQueue=[],A=y.$$postDigestQueue=[],B=y.$$applyAsyncQueue=[];return y}]}function Wb(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=dc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Xb(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw ue("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=nd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw ue("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Yb(a){var b=[];return s(a)&&f(a,function(a){b.push(Xb(a))}),b}function Zb(){this.SCE_CONTEXTS=ve;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Yb(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Yb(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?ec(b):!!a.exec(b.href)}function f(c){var d,f,g=dc(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw ue("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw ue("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===ve.RESOURCE_URL){if(f(b))return b;throw ue("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===ve.HTML)return k(b);throw ue("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(a){throw ue("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[ve.HTML]=g(l),m[ve.CSS]=g(l),m[ve.URL]=g(l),m[ve.JS]=g(l),m[ve.RESOURCE_URL]=g(m[ve.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function $b(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>_c)throw ue("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=L(ve);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=p),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(ve,function(a,b){var c=Wc(b);d[pa("parse_as_"+c)]=function(b){return e(a,b)},d[pa("get_trusted_"+c)]=function(b){return g(a,b)},d[pa("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function _b(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(Wc((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var n in j)if(d=i.exec(n)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k=!!("transition"in j||c+"Transition"in j),l=!!("animation"in j||c+"Animation"in j),!f||k&&l||(k=u(h.body.style.webkitTransition),l=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hasEvent:function(a){if("input"===a&&11>=_c)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:od(),vendorPrefix:c,transitions:k,animations:l,android:f}}]}function ac(){this.$get=["$templateCache","$http","$q",function(a,b,c){function d(e,f){function g(a){if(!f)throw Xd("tpload","Failed to load template: {0}",e);return c.reject(a)}d.totalPendingRequests++;var h=b.defaults&&b.defaults.transformResponse;ld(h)?h=h.filter(function(a){return a!==eb}):h===eb&&(h=null);var i={cache:a,transformResponse:h};return b.get(e,i)["finally"](function(){d.totalPendingRequests--}).then(function(a){return a.data},g)}return d.totalPendingRequests=0,d}]}function bc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=id.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+nd(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else-1!=d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function cc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){var j,k=s(i)&&!i,l=(k?d:c).defer(),m=l.promise;return j=b.defer(function(){try{l.resolve(f())}catch(b){l.reject(b),e(b)}finally{delete g[m.$$timeoutId]}k||a.$apply()},h),m.$$timeoutId=j,g[j]=l,m}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function dc(a){var b=a;return _c&&(we.setAttribute("href",b),b=we.href),we.setAttribute("href",b),{href:we.href,protocol:we.protocol?we.protocol.replace(/:$/,""):"",host:we.host,search:we.search?we.search.replace(/^\?/,""):"",hash:we.hash?we.hash.replace(/^#/,""):"",hostname:we.hostname,port:we.port,pathname:"/"===we.pathname.charAt(0)?we.pathname:"/"+we.pathname}}function ec(a){var b=u(a)?dc(a):a;return b.protocol===xe.protocol&&b.host===xe.host}function fc(){this.$get=q(a)}function gc(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",kc),b("date",xc),b("filter",hc),b("json",yc),b("limitTo",zc),b("lowercase",Ce),b("number",lc),b("orderBy",Ac),b("uppercase",De)}function hc(){return function(a,b,c){if(!ld(a))return a;var d,e,f=null!==b?typeof b:"null";switch(f){case"function":d=b;break;case"boolean":case"null":case"number":case"string":e=!0;case"object":d=ic(b,c,e);break;default:return a}return a.filter(d)}}function ic(a,b,c){var d,e=t(a)&&"$"in a;return b===!0?b=M:x(b)||(b=function(a,b){return r(a)?!1:null===a||null===b?a===b:t(a)||t(b)?!1:(a=Wc(""+a),b=Wc(""+b),-1!==a.indexOf(b))}),d=function(d){return e&&!t(d)?jc(d,a.$,b,!1):jc(d,a,b,c)}}function jc(a,b,c,d,e){var f=null!==a?typeof a:"null",g=null!==b?typeof b:"null";if("string"===g&&"!"===b.charAt(0))return!jc(a,b.substring(1),c,d);if(ld(a))return a.some(function(a){return jc(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&jc(a[h],b,c,!0))return!0;return e?!1:jc(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!x(i)&&!r(i)){var j="$"===h,k=j?a:a[h];if(!jc(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function kc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:mc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function lc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:mc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function mc(a,b,c,d,e){if(!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?a=0:(h=g,j=!0)}if(j)e>0&&1>a&&(h=a.toFixed(e),a=parseFloat(h));else{var l=(g.split(ye)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var m=(""+a).split(ye),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return 0===a&&(f=!1),i.push(f?b.negPre:b.posPre,h,f?b.negSuf:b.posSuf),i.join("")}function nc(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function oc(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),nc(f,b,d)}}function pc(a,b){return function(c,d){var e=c["get"+a](),f=Yc(b?"SHORT"+a:a);return d[f][e]}}function qc(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=nc(Math[b>0?"floor":"ceil"](b/60),2)+nc(Math.abs(b%60),2);
}function rc(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function sc(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function tc(a){return function(b){var c=rc(b.getFullYear()),d=sc(b),e=+d-+c,f=1+Math.round(e/6048e5);return nc(f,a)}}function uc(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function vc(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function wc(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function xc(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Be.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)h=Ae.exec(d),h?(j=N(j,h,1),d=j.pop()):(j.push(d),d=null);return e&&"UTC"===e&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset())),f(j,function(b){g=ze[b],i+=g?g(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function yc(){return function(a,b){return r(b)&&(b=2),R(a,b)}}function zc(){return function(a,b){return v(a)&&(a=a.toString()),ld(a)||u(a)?(b=Math.abs(Number(b))===1/0?Number(b):m(b),b?b>0?a.slice(0,b):a.slice(b):u(a)?"":[]):a}}function Ac(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return b?function(b,c){return a(c,b)}:a}function h(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function i(a){return null===a?"null":"function"==typeof a.valueOf&&(a=a.valueOf(),h(a))?a:"function"==typeof a.toString&&(a=a.toString(),h(a))?a:""}function j(a,b){var c=typeof a,d=typeof b;return c===d&&"object"===c&&(a=i(a),b=i(b)),c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}return e(b)?(c=ld(c)?c:[c],0===c.length&&(c=["+"]),c=c.map(function(b){var c=!1,d=b||p;if(u(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(j,c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return j(a[e],b[e])},c)}}return g(function(a,b){return j(d(a),d(b))},c)}),dd.call(b).sort(g(f,d))):b}}function Bc(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Cc(a,b){a.$name=b}function Dc(a,b,d,e,g){var h=this,i=[],j=h.$$parentForm=a.parent().controller("form")||Ge;h.$error={},h.$$success={},h.$pending=c,h.$name=g(b.name||b.ngForm||"")(d),h.$dirty=!1,h.$pristine=!0,h.$valid=!0,h.$invalid=!1,h.$submitted=!1,j.$addControl(h),h.$rollbackViewValue=function(){f(i,function(a){a.$rollbackViewValue()})},h.$commitViewValue=function(){f(i,function(a){a.$commitViewValue()})},h.$addControl=function(a){ga(a.$name,"input"),i.push(a),a.$name&&(h[a.$name]=a)},h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c],h[b]=a,a.$name=b},h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name],f(h.$pending,function(b,c){h.$setValidity(c,null,a)}),f(h.$error,function(b,c){h.$setValidity(c,null,a)}),f(h.$$success,function(b,c){h.$setValidity(c,null,a)}),J(i,a)},Sc({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(J(d,c),0===d.length&&delete a[b])},parentForm:j,$animate:e}),h.$setDirty=function(){e.removeClass(a,pf),e.addClass(a,qf),h.$dirty=!0,h.$pristine=!1,j.$setDirty()},h.$setPristine=function(){e.setClass(a,pf,qf+" "+He),h.$dirty=!1,h.$pristine=!0,h.$submitted=!1,f(i,function(a){a.$setPristine()})},h.$setUntouched=function(){f(i,function(a){a.$setUntouched()})},h.$setSubmitted=function(){e.addClass(a,He),h.$submitted=!0,j.$setSubmitted()}}function Ec(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Fc(a,b,c,d,e,f){Gc(a,b,c,d,e,f),Ec(d)}function Gc(a,b,c,d,e,f){var g=Wc(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(a){h=!0}),b.on("compositionend",function(){h=!1,i()})}var i=function(a){if(j&&(f.defer.cancel(j),j=null),!h){var e=b.val(),i=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=md(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,i)}};if(e.hasEvent("input"))b.on("input",i);else{var j,k=function(a,b,c){j||(j=f.defer(function(){j=null,b&&b.value===c||i(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",i),d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Hc(a,b){if(w(a))return a;if(u(a)){Re.lastIndex=0;var c=Re.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=rc(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function Ic(a,b){return function(c,d){var e,g;if(w(c))return c;if(u(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Le.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function Jc(a,b,d,e){return function(f,g,h,i,j,k,l){function m(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return s(a)?w(a)?a:d(a):c}Kc(f,g,h,i),Gc(f,g,h,i,j,k);var o,p=i&&i.$options&&i.$options.timezone;if(i.$$parserName=a,i.$parsers.push(function(a){if(i.$isEmpty(a))return null;if(b.test(a)){var e=d(a,o);return"UTC"===p&&e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}return c}),i.$formatters.push(function(a){if(a&&!w(a))throw uf("datefmt","Expected `{0}` to be a date",a);if(m(a)){if(o=a,o&&"UTC"===p){var b=6e4*o.getTimezoneOffset();o=new Date(o.getTime()+b)}return l("date")(a,e,p)}return o=null,""}),s(h.min)||h.ngMin){var q;i.$validators.min=function(a){return!m(a)||r(q)||d(a)>=q},h.$observe("min",function(a){q=n(a),i.$validate()})}if(s(h.max)||h.ngMax){var t;i.$validators.max=function(a){return!m(a)||r(t)||d(a)<=t},h.$observe("max",function(a){t=n(a),i.$validate()})}}}function Kc(a,b,d,e){var f=b[0],g=e.$$hasNativeValidators=t(f.validity);g&&e.$parsers.push(function(a){var d=b.prop(Vc)||{};return d.badInput&&!d.typeMismatch?c:a})}function Lc(a,b,d,e,f,g){if(Kc(a,b,d,e),Gc(a,b,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:Oe.test(a)?parseFloat(a):c}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!v(a))throw uf("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),s(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||r(h)||a>=h},d.$observe("min",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),h=v(a)&&!isNaN(a)?a:c,e.$validate()})}if(s(d.max)||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||r(i)||i>=a},d.$observe("max",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),i=v(a)&&!isNaN(a)?a:c,e.$validate()})}}function Mc(a,b,c,d,e,f){Gc(a,b,c,d,e,f),Ec(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Me.test(c)}}function Nc(a,b,c,d,e,f){Gc(a,b,c,d,e,f),Ec(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Ne.test(c)}}function Oc(a,b,c,d){r(c.name)&&b.attr("name",j());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Pc(a,b,c,e,f){var g;if(s(e)){if(g=a(e),!g.constant)throw d("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,e);return g(b)}return f}function Qc(a,b,c,d,e,f,g,h){var i=Pc(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Pc(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return M(a,i)}),d.$parsers.push(function(a){return a?i:j})}function Rc(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(ld(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);e=l(e,1),f=l(f,-1),e&&e.length&&c.addClass(h,e),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!M(a,o)){var d=e(o);m(d,c)}}else j(c)}o=L(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}function Sc(a){function b(a,b,i){b===c?d("$pending",a,i):e("$pending",a,i),E(b)?b?(l(h.$error,a,i),k(h.$$success,a,i)):(k(h.$error,a,i),l(h.$$success,a,i)):(l(h.$error,a,i),l(h.$$success,a,i)),h.$pending?(f(tf,!0),h.$valid=h.$invalid=c,g("",null)):(f(tf,!1),h.$valid=Tc(h.$error),h.$invalid=!h.$valid,g("",h.$valid));var j;j=h.$pending&&h.$pending[a]?c:h.$error[a]?!1:h.$$success[a]?!0:null,g(a,j),m.$setValidity(a,j,h)}function d(a,b,c){h[a]||(h[a]={}),k(h[a],b,c)}function e(a,b,d){h[a]&&l(h[a],b,d),Tc(h[a])&&(h[a]=c)}function f(a,b){b&&!j[a]?(n.addClass(i,a),j[a]=!0):!b&&j[a]&&(n.removeClass(i,a),j[a]=!1)}function g(a,b){a=a?"-"+ca(a,"-"):"",f(nf+a,b===!0),f(of+a,b===!1)}var h=a.ctrl,i=a.$element,j={},k=a.set,l=a.unset,m=a.parentForm,n=a.$animate;j[of]=!(j[nf]=i.hasClass(nf)),h.$setValidity=b}function Tc(a){if(a)for(var b in a)return!1;return!0}var Uc=/^\/(.+)\/([a-z]*)$/,Vc="validity",Wc=function(a){return u(a)?a.toLowerCase():a},Xc=Object.prototype.hasOwnProperty,Yc=function(a){return u(a)?a.toUpperCase():a},Zc=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},$c=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Wc=Zc,Yc=$c);var _c,ad,bd,cd,dd=[].slice,ed=[].splice,fd=[].push,gd=Object.prototype.toString,hd=d("ng"),id=a.angular||(a.angular={}),jd=0;_c=b.documentMode,o.$inject=[],p.$inject=[];var kd,ld=Array.isArray,md=function(a){return u(a)?a.trim():a},nd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},od=function(){if(s(od.isActive_))return od.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return od.isActive_=a},pd=["ng-","data-ng-","ng:","x-ng-"],qd=/[A-Z]/g,rd=!1,sd=1,td=2,ud=3,vd=8,wd=9,xd=11,yd={full:"1.3.16",major:1,minor:3,dot:16,codeName:"cookie-oatmealification"};ua.expando="ng339";var zd=ua.cache={},Ad=1,Bd=function(a,b,c){a.addEventListener(b,c,!1)},Cd=function(a,b,c){a.removeEventListener(b,c,!1)};ua._data=function(a){return this.cache[a[this.expando]]||{}};var Dd=/([\:\-\_]+(.))/g,Ed=/^moz([A-Z])/,Fd={mouseleave:"mouseout",mouseenter:"mouseover"},Gd=d("jqLite"),Hd=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Id=/<|&#?\w+;/,Jd=/<([\w:]+)/,Kd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ld={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ld.optgroup=Ld.option,Ld.tbody=Ld.tfoot=Ld.colgroup=Ld.caption=Ld.thead,Ld.th=Ld.td;var Md=ua.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),ua(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return ad(a>=0?this[a]:this[this.length+a])},length:0,push:fd,sort:[].sort,splice:[].splice},Nd={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Nd[Wc(a)]=a});var Od={};f("input,select,option,textarea,button,form,details".split(","),function(a){Od[a]=!0});var Pd={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:Aa,removeData:ya},function(a,b){ua[b]=a}),f({data:Aa,inheritedData:Ga,scope:function(a){return ad.data(a,"$scope")||Ga(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return ad.data(a,"$isolateScope")||ad.data(a,"$isolateScopeNoTemplate")},controller:Fa,injector:function(a){return Ga(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ba,css:function(a,b,c){return b=pa(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,d){var e=a.nodeType;if(e!==ud&&e!==td&&e!==vd){var f=Wc(b);if(Nd[f]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?f:c;d?(a[b]=!0,a.setAttribute(b,f)):(a[b]=!1,a.removeAttribute(f))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var g=a.getAttribute(b,2);return null===g?c:g}}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===sd||c===ud?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===I(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(wa(a,!0),void(a.innerHTML=b))},empty:Ha},function(a,b){ua.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Ha&&(2==a.length&&a!==Ba&&a!==Fa?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===Aa)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:ya,on:function Vf(a,b,c,d){if(s(d))throw Gd("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ra(a)){var e=za(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Ma(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length;i--;){b=h[i];var j=f[b];j||(f[b]=[],"mouseenter"===b||"mouseleave"===b?Vf(a,Fd[b],function(a){var c=this,d=a.relatedTarget;(!d||d!==c&&!c.contains(d))&&g(a,b)}):"$destroy"!==b&&Bd(a,b,g),j=f[b]),j.push(c)}}},off:xa,one:function(a,b,c){a=ad(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;wa(a),f(new ua(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===sd&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===sd||c===xd){b=new ua(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===sd){var c=a.firstChild;f(new ua(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=ad(b).eq(0).clone()[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:Ia,detach:function(a){Ia(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new ua(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Da,removeClass:Ca,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!Ba(a,b)),(d?Da:Ca)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==xd?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:va,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=za(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=L(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){ua.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=ad(e))):Ea(e,a(this[f],b,c,d));return s(e)?e:this},ua.prototype.bind=ua.prototype.on,ua.prototype.unbind=ua.prototype.off}),Pa.prototype={put:function(a,b){this[Oa(a,this.nextUid)]=b},get:function(a){return this[Oa(a,this.nextUid)]},remove:function(a){var b=this[a=Oa(a,this.nextUid)];return delete this[a],b}};var Qd=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Rd=/,/,Sd=/^\s*(_?)(\S+?)\1\s*$/,Td=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ud=d("$injector");Sa.$$annotate=Ra;var Vd=d("$animate"),Wd=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw Vd("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(a,b,c){function d(b){var d,e=a.defer();return e.promise.$$cancelFn=function(){d&&d()},c.$$postDigest(function(){d=b(function(){e.resolve()})}),e.promise}function e(a,b){var c=[],d=[],e=ja();return f((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0}),f(b,function(a,b){var f=e[b];a===!1&&f?d.push(b):a!==!0||f||c.push(b)}),c.length+d.length>0&&[c.length?c:null,d.length?d:null]}function g(a,b,c){for(var d=0,e=b.length;e>d;++d){var f=b[d];a[f]=c}}function h(){return j||(j=a.defer(),b(function(){j.resolve(),j=null})),j.promise}function i(a,b){if(id.isObject(b)){var c=l(b.from||{},b.to||{});a.css(c)}}var j;return{animate:function(a,b,c){return i(a,{from:b,to:c}),h()},enter:function(a,b,c,d){return i(a,d),c?c.after(a):b.prepend(a),h()},leave:function(a,b){return i(a,b),a.remove(),h()},move:function(a,b,c,d){return this.enter(a,b,c,d)},addClass:function(a,b,c){return this.setClass(a,b,[],c)},$$addClassImmediately:function(a,b,c){return a=ad(a),b=u(b)?b:ld(b)?b.join(" "):"",f(a,function(a){Da(a,b)}),i(a,c),h()},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},$$removeClassImmediately:function(a,b,c){return a=ad(a),b=u(b)?b:ld(b)?b.join(" "):"",f(a,function(a){Ca(a,b)}),i(a,c),h()},setClass:function(a,b,c,f){var h=this,i="$$animateClasses",j=!1;a=ad(a);var k=a.data(i);k?f&&k.options&&(k.options=id.extend(k.options||{},f)):(k={classes:{},options:f},j=!0);var l=k.classes;return b=ld(b)?b:b.split(" "),c=ld(c)?c:c.split(" "),g(l,b,!0),g(l,c,!1),j&&(k.promise=d(function(b){var c=a.data(i);if(a.removeData(i),c){var d=e(a,c.classes);d&&h.$$setClassImmediately(a,d[0],d[1],c.options)}b()}),a.data(i,k)),k.promise},$$setClassImmediately:function(a,b,c,d){return b&&this.$$addClassImmediately(a,b),c&&this.$$removeClassImmediately(a,c),i(a,d),h()},enabled:o,cancel:o}}]}],Xd=d("$compile");Za.$inject=["$provide","$$sanitizeUriProvider"];var Yd=/^((?:x|data)[\:\-_])/i,Zd=d("$controller"),$d="application/json",_d={"Content-Type":$d+";charset=utf-8"},ae=/^\[|^\{(?!\{)/,be={"[":/]$/,"{":/}$/},ce=/^\)\]\}',?\n/,de=d("$interpolate"),ee=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,fe={http:80,https:443,ftp:21},ge=d("$location"),he={$$html5:!1,$$replace:!1,absUrl:Cb("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=ee.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Cb("$$protocol"),host:Cb("$$host"),port:Cb("$$port"),path:Db("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=V(a);else{if(!t(a))throw ge("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=K(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Db("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([Bb,Ab,zb],function(a){a.prototype=Object.create(he),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==zb||!this.$$html5)throw ge("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var ie=d("$parse"),je=Function.prototype.call,ke=Function.prototype.apply,le=Function.prototype.bind,me=ja();f({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,b){a.constant=a.literal=a.sharedGetter=!0,me[b]=a}),me["this"]=function(a){return a},me["this"].sharedGetter=!0;var ne=l(ja(),{"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"!":function(a,b,c){return!c(a,b)},"=":!0,"|":!0}),oe={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},pe=function(a){this.options=a};pe.prototype={constructor:pe,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(b))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=ne[b],f=ne[c],g=ne[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw ie("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Wc(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=oe[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var qe=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};qe.ZERO=l(function(){return 0},{sharedGetter:!0,constant:!0}),qe.prototype={constructor:qe,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in me?a=me[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b,c;b=this.expect("(","[",".");)"("===b.text?(a=this.functionCall(a,c),c=null):"["===b.text?(c=a,a=this.objectIndex(a)):"."===b.text?(c=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw ie("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw ie("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){if(0===this.tokens.length)throw ie("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},unaryFn:function(a,b){var c=ne[a];return l(function(a,d){return c(a,d,b)},{constant:b.constant,inputs:[b]})},binaryFn:function(a,b,c,d){var e=ne[b];return l(function(b,d){return e(b,d,a,c)},{constant:a.constant&&c.constant,inputs:!d&&[a,c]})},identifier:function(){for(var a=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return Ob(a,this.options,this.text)},constant:function(){var a=this.consume().value;return l(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0,f=a.length;f>e;e++)d=a[e](b,c);return d}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},filter:function(a){var b,d,e=this.$filter(this.consume().text);if(this.peek(":"))for(b=[],d=[];this.expect(":");)b.push(this.expression());var f=[a].concat(b||[]);return l(function(f,g){var h=a(f,g);if(d){d[0]=h;for(var i=b.length;i--;)d[i+1]=b[i](f,g);return e.apply(c,d)}return e(h)},{constant:!e.$stateful&&f.every(Jb),inputs:!e.$stateful&&f})},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),l(function(b,d){return c.assign(b,a(b,d),d)},{inputs:[c,a]})):c},ternary:function(){var a,b,c=this.logicalOR();if((b=this.expect("?"))&&(a=this.assignment(),this.consume(":"))){var d=this.assignment();return l(function(b,e){return c(b,e)?a(b,e):d(b,e)},{constant:c.constant&&a.constant&&d.constant})}return c},logicalOR:function(){for(var a,b=this.logicalAND();a=this.expect("||");)b=this.binaryFn(b,a.text,this.logicalAND(),!0);return b},logicalAND:function(){for(var a,b=this.equality();a=this.expect("&&");)b=this.binaryFn(b,a.text,this.equality(),!0);return b},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b=this.binaryFn(b,a.text,this.relational());return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b=this.binaryFn(b,a.text,this.additive());return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.text,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.text,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(qe.ZERO,a.text,this.unary()):(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var b=this.identifier();return l(function(d,e,f){var g=f||a(d,e);return null==g?c:b(g)},{assign:function(c,d,e){var f=a(c,e);return f||a.assign(c,f={},e),b.assign(f,d)}})},objectIndex:function(a){var b=this.text,d=this.expression();return this.consume("]"),l(function(e,f){var g,h=a(e,f),i=d(e,f);return Gb(i,b),h?g=Hb(h[i],b):c},{assign:function(c,e,f){var g=Gb(d(c,f),b),h=Hb(a(c,f),b);return h||a.assign(c,h={},f),h[g]=e}})},functionCall:function(a,b){var d=[];if(")"!==this.peekToken().text)do d.push(this.expression());while(this.expect(","));this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var i=b?b(g,h):s(b)?c:g,j=a(g,h,i)||o;if(f)for(var k=d.length;k--;)f[k]=Hb(d[k](g,h),e);Hb(i,e),Ib(j,e);var l=j.apply?j.apply(i,f):j(f[0],f[1],f[2],f[3],f[4]);return f&&(f.length=0),Hb(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push(a[e](b,c));return d},{literal:!0,constant:a.every(Jb),inputs:a})},object:function(){var a=[],b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.consume();c.constant?a.push(c.value):c.identifier?a.push(c.text):this.throwError("invalid key",c),this.consume(":"),b.push(this.expression())}while(this.expect(","));return this.consume("}"),l(function(c,d){for(var e={},f=0,g=b.length;g>f;f++)e[a[f]]=b[f](c,d);return e},{literal:!0,constant:b.every(Jb),inputs:b})}};var re=ja(),se=ja(),te=Object.prototype.valueOf,ue=d("$sce"),ve={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Xd=d("$compile"),we=b.createElement("a"),xe=dc(a.location.href);gc.$inject=["$provide"],kc.$inject=["$locale"],lc.$inject=["$locale"];var ye=".",ze={yyyy:oc("FullYear",4),yy:oc("FullYear",2,0,!0),y:oc("FullYear",1),MMMM:pc("Month"),MMM:pc("Month",!0),MM:oc("Month",2,1),M:oc("Month",1,1),dd:oc("Date",2),d:oc("Date",1),HH:oc("Hours",2),H:oc("Hours",1),hh:oc("Hours",2,-12),h:oc("Hours",1,-12),mm:oc("Minutes",2),m:oc("Minutes",1),ss:oc("Seconds",2),s:oc("Seconds",1),sss:oc("Milliseconds",3),EEEE:pc("Day"),EEE:pc("Day",!0),a:uc,Z:qc,ww:tc(2),w:tc(1),G:vc,GG:vc,GGG:vc,GGGG:wc},Ae=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Be=/^\-?\d+$/;
xc.$inject=["$locale"];var Ce=q(Wc),De=q(Yc);Ac.$inject=["$parse"];var Ee=q({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref||b.name?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===gd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Fe={};f(Nd,function(a,b){if("multiple"!=a){var c=$a("ng-"+b);Fe[c]=function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(Pd,function(a,b){Fe[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Uc);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=$a("ng-"+a);Fe[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===gd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(_c&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Ge={$addControl:o,$$renameControl:Cc,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o,$setSubmitted:o},He="ng-submitted";Dc.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Ie=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:Dc,compile:function(d,e){d.addClass(pf).addClass(nf);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,d,e,g){if(!("action"in e)){var h=function(b){a.$apply(function(){g.$commitViewValue(),g.$setSubmitted()}),b.preventDefault()};Bd(d[0],"submit",h),d.on("$destroy",function(){b(function(){Cd(d[0],"submit",h)},0,!1)})}var i=g.$$parentForm;f&&(Kb(a,null,g.$name,g,g.$name),e.$observe(f,function(b){g.$name!==b&&(Kb(a,null,g.$name,c,g.$name),i.$$renameControl(g,b),Kb(a,null,g.$name,g,g.$name))})),d.on("$destroy",function(){i.$removeControl(g),f&&Kb(a,null,e[f],c,g.$name),l(g,Ge)})}}}};return d}]},Je=Ie(),Ke=Ie(!0),Le=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Me=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Ne=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Oe=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Pe=/^(\d{4})-(\d{2})-(\d{2})$/,Qe=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Re=/^(\d{4})-W(\d\d)$/,Se=/^(\d{4})-(\d\d)$/,Te=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ue={text:Fc,date:Jc("date",Pe,Ic(Pe,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Jc("datetimelocal",Qe,Ic(Qe,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Jc("time",Te,Ic(Te,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Jc("week",Re,Hc,"yyyy-Www"),month:Jc("month",Se,Ic(Se,["yyyy","MM"]),"yyyy-MM"),number:Lc,url:Mc,email:Nc,radio:Oc,checkbox:Qc,hidden:o,button:o,submit:o,reset:o,file:o},Ve=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Ue[Wc(g.type)]||Ue.text)(e,f,g,h[0],b,a,c,d)}}}}],We=/^(true|false|\d+)$/,Xe=function(){return{restrict:"A",priority:100,compile:function(a,b){return We.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Ye=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,d,e){a.$$addBindingInfo(d,e.ngBind),d=d[0],b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],Ze=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(d,e,f){var g=a(e.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(e,g.expressions),e=e[0],f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],$e=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],_e=q({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),af=Rc("",!0),bf=Rc("Odd",0),cf=Rc("Even",1),df=Bc({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),ef=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ff={},gf={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=$a("ng-"+a);ff[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};gf[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var hf=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=ia(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],jf=["$templateRequest","$anchorScroll","$animate","$sce",function(a,b,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:id.noop,compile:function(e,f){var g=f.ngInclude||f.src,h=f.onload||"",i=f.autoscroll;return function(e,f,j,k,l){var m,n,o,p=0,q=function(){n&&(n.remove(),n=null),m&&(m.$destroy(),m=null),o&&(c.leave(o).then(function(){n=null}),n=o,o=null)};e.$watch(d.parseAsResourceUrl(g),function(d){var g=function(){!s(i)||i&&!e.$eval(i)||b()},j=++p;d?(a(d,!0).then(function(a){if(j===p){var b=e.$new();k.template=a;var i=l(b,function(a){q(),c.enter(a,null,f).then(g)});m=b,o=i,m.$emit("$includeContentLoaded",d),e.$eval(h)}},function(){j===p&&(q(),e.$emit("$includeContentError",d))}),e.$emit("$includeContentRequested",d)):(q(),k.template=null)})}}}}],kf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return/SVG/.test(d[0].toString())?(d.empty(),void a(sa(f.template,b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void a(d.contents())(c))}}}],lf=Bc({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),mf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,i=h?md(g):g,j=function(a){if(!r(a)){var b=[];return a&&f(a.split(i),function(a){a&&b.push(h?md(a):a)}),b}};e.$parsers.push(j),e.$formatters.push(function(a){return ld(a)?a.join(g):c}),e.$isEmpty=function(a){return!a||!a.length}}}},nf="ng-valid",of="ng-invalid",pf="ng-pristine",qf="ng-dirty",rf="ng-untouched",sf="ng-touched",tf="ng-pending",uf=new d("ngModel"),vf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,i,j,k,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=c,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=c,this.$name=l(d.name||"",!1)(a);var m,n=g(d.ngModel),p=n.assign,q=n,t=p,u=null,w=this;this.$$setOptions=function(a){if(w.$options=a,a&&a.getterSetter){var b=g(d.ngModel+"()"),c=g(d.ngModel+"($$$p)");q=function(a){var c=n(a);return x(c)&&(c=b(a)),c},t=function(a,b){x(n(a))?c(a,{$$$p:w.$modelValue}):p(a,w.$modelValue)}}else if(!n.assign)throw uf("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,T(e))},this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var y=e.inheritedData("$formController")||Ge,z=0;Sc({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:y,$animate:h}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,h.removeClass(e,qf),h.addClass(e,pf)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,h.removeClass(e,pf),h.addClass(e,qf),y.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,h.setClass(e,rf,sf)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,h.setClass(e,sf,rf)},this.$rollbackViewValue=function(){i.cancel(u),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!v(w.$modelValue)||!isNaN(w.$modelValue)){var a=w.$$lastCommittedViewValue,b=w.$$rawModelValue,d=w.$valid,e=w.$modelValue,f=w.$options&&w.$options.allowInvalid;w.$$runValidators(b,a,function(a){f||d===a||(w.$modelValue=a?b:c,w.$modelValue!==e&&w.$$writeModelToScope())})}},this.$$runValidators=function(a,b,d){function e(){var a=w.$$parserName||"parse";return m!==c?(m||(f(w.$validators,function(a,b){i(b,null)}),f(w.$asyncValidators,function(a,b){i(b,null)})),i(a,m),m):(i(a,null),!0)}function g(){var c=!0;return f(w.$validators,function(d,e){var f=d(a,b);c=c&&f,i(e,f)}),c?!0:(f(w.$asyncValidators,function(a,b){i(b,null)}),!1)}function h(){var d=[],e=!0;f(w.$asyncValidators,function(f,g){var h=f(a,b);if(!F(h))throw uf("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h);i(g,c),d.push(h.then(function(){i(g,!0)},function(a){e=!1,i(g,!1)}))}),d.length?k.all(d).then(function(){j(e)},o):j(!0)}function i(a,b){l===z&&w.$setValidity(a,b)}function j(a){l===z&&d(a)}z++;var l=z;return e()&&g()?void h():void j(!1)},this.$commitViewValue=function(){var a=w.$viewValue;i.cancel(u),(w.$$lastCommittedViewValue!==a||""===a&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=a,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){w.$modelValue!==g&&w.$$writeModelToScope()}var d=w.$$lastCommittedViewValue,e=d;if(m=r(e)?c:!0)for(var f=0;f<w.$parsers.length;f++)if(e=w.$parsers[f](e),r(e)){m=!1;break}v(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=q(a));var g=w.$modelValue,h=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=e,h&&(w.$modelValue=e,b()),w.$$runValidators(e,w.$$lastCommittedViewValue,function(a){h||(w.$modelValue=a?e:c,b())})},this.$$writeModelToScope=function(){t(a,w.$modelValue),f(w.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){w.$viewValue=a,(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=w.$options;e&&s(e.debounce)&&(c=e.debounce,v(c)?d=c:v(c[b])?d=c[b]:v(c["default"])&&(d=c["default"])),i.cancel(u),d?u=i(function(){w.$commitViewValue()},d):j.$$phase?w.$commitViewValue():a.$apply(function(){w.$commitViewValue()})},a.$watch(function(){var b=q(a);if(b!==w.$modelValue&&(w.$modelValue===w.$modelValue||b===b)){w.$modelValue=w.$$rawModelValue=b,m=c;for(var d=w.$formatters,e=d.length,f=b;e--;)f=d[e](f);w.$viewValue!==f&&(w.$viewValue=w.$$lastCommittedViewValue=f,w.$render(),w.$$runValidators(b,f,o))}return b})}],wf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:vf,priority:1,compile:function(b){return b.addClass(pf).addClass(rf).addClass(nf),{pre:function(a,b,c,d){var e=d[0],f=d[1]||Ge;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)}),a.$on("$destroy",function(){f.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(c){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],xf=/(\s+|^)default(\s+|$)/,yf=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=a.$eval(b.ngModelOptions),this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=md(this.$options.updateOn.replace(xf,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},zf=Bc({terminal:!0,priority:1e3}),Af=["$locale","$interpolate",function(a,b){var c=/{}/g,d=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(e,g,h){function i(a){g.text(a||"")}var j,k=h.count,l=h.$attr.when&&g.attr(h.$attr.when),m=h.offset||0,n=e.$eval(l)||{},o={},p=b.startSymbol(),q=b.endSymbol(),r=p+k+"-"+m+q,s=id.noop;f(h,function(a,b){var c=d.exec(b);if(c){var e=(c[1]?"-":"")+Wc(c[2]);n[e]=g.attr(h.$attr[b])}}),f(n,function(a,d){o[d]=b(a.replace(c,r))}),e.$watch(k,function(b){var c=parseFloat(b),d=isNaN(c);d||c in n||(c=a.pluralCat(c-m)),c===j||d&&isNaN(j)||(s(),s=e.$watch(o[c],i),j=c)})}}}],Bf=["$parse","$animate",function(a,g){var h="$$NG_REMOVED",i=d("ngRepeat"),j=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,m){var n=m.ngRepeat,o=b.createComment(" end ngRepeat: "+n+" "),p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var q=p[1],r=p[2],s=p[3],t=p[4];if(p=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!p)throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var u=p[3]||p[1],v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(s)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s);var w,x,y,z,A={$id:Oa};return t?w=a(t):(y=function(a,b){return Oa(b)},z=function(a){return a}),function(a,b,d,m,p){w&&(x=function(b,c,d){return v&&(A[v]=b),A[u]=c,A.$index=d,w(a,A)});var q=ja();a.$watchCollection(r,function(d){var m,r,t,w,A,B,C,D,E,F,G,H,I=b[0],J=ja();if(s&&(a[s]=d),e(d))E=d,D=x||y;else{D=x||z,E=[];for(var K in d)d.hasOwnProperty(K)&&"$"!=K.charAt(0)&&E.push(K);E.sort()}for(w=E.length,G=new Array(w),m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],C=D(A,B,m),q[C])F=q[C],delete q[C],J[C]=F,G[m]=F;else{if(J[C])throw f(G,function(a){a&&a.scope&&(q[a.id]=a)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,C,B);G[m]={id:C,scope:c,clone:c},J[C]=!0}for(var L in q){if(F=q[L],H=ia(F.clone),g.leave(H),H[0].parentNode)for(m=0,r=H.length;r>m;m++)H[m][h]=!0;F.scope.$destroy()}for(m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],F=G[m],F.scope){t=I;do t=t.nextSibling;while(t&&t[h]);k(F)!=t&&g.move(ia(F.clone),null,ad(I)),I=l(F),j(F.scope,m,u,B,v,A,w)}else p(function(a,b){F.scope=b;var c=o.cloneNode(!1);a[a.length++]=c,g.enter(a,null,ad(I)),I=c,F.clone=a,J[F.id]=F,j(F.scope,m,u,B,v,A,w)});q=J})}}}}],Cf="ng-hide",Df="ng-hide-animate",Ef=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,Cf,{tempClasses:Df})})}}}],Ff=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,Cf,{tempClasses:Df})})}}}],Gf=Bc(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Hf=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var d,e;for(d=0,e=k.length;e>d;++d)a.cancel(k[d]);for(k.length=0,d=0,e=l.length;e>d;++d){var h=ia(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.then(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],If=Bc({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),Jf=Bc({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Kf=Bc({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(b));f(function(a){b.empty(),b.append(a)})}}),Lf=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Mf=d("ngOptions"),Nf=q({restrict:"A",terminal:!0}),Of=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b,c){ga(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove()),c&&c[0].hasAttribute("selected")&&(c[0].selected=!0)},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue===a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Oa(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(y.parent()&&y.remove(),b.val(a),""===a&&o.prop("selected",!0)):null==a&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){y.parent()&&y.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Pa(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){M(d,c.$viewValue)||(d=L(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,h,i){function j(a,c,d){return M[B]=d,E&&(M[E]=c),a(b,M)}function k(){b.$apply(function(){var a,c=H(b)||[];if(r)a=[],f(h.val(),function(b){b=J?K[b]:b,a.push(l(b,c[b]))});else{var d=J?K[h.val()]:h.val();a=l(d,c[d])}i.$setViewValue(a),y()})}function l(a,b){if("?"===a)return c;if(""===a)return null;var d=D?D:G;return j(d,a,b)}function m(){var a,c=H(b);if(c&&ld(c)){a=new Array(c.length);for(var d=0,e=c.length;e>d;d++)a[d]=j(A,d,c[d]);return a}if(c){a={};for(var f in c)c.hasOwnProperty(f)&&(a[f]=j(A,f,c[f]))}return a}function n(a){var b;if(r)if(J&&ld(a)){b=new Pa([]);for(var c=0;c<a.length;c++)b.put(j(J,null,a[c]),!0)}else b=new Pa(a);else J&&(a=j(J,null,a));return function(c,d){var e;return e=J?J:D?D:G,r?s(b.remove(j(e,c,d))):a===j(e,c,d)}}function o(){v||(b.$$postDigest(y),v=!0)}function q(a,b,c){a[b]=a[b]||0,a[b]+=c?1:-1}function y(){v=!1;var a,c,d,e,k,l,m,o,t,y,z,B,C,D,G,I,N,O={"":[]},P=[""],Q=i.$viewValue,R=H(b)||[],S=E?g(R):R,T={},U=n(Q),V=!1;for(K={},B=0;y=S.length,y>B;B++)m=B,E&&(m=S[B],"$"===m.charAt(0))||(o=R[m],a=j(F,m,o)||"",(c=O[a])||(c=O[a]=[],P.push(a)),C=U(m,o),V=V||C,I=j(A,m,o),I=s(I)?I:"",N=J?J(b,M):E?S[B]:B,J&&(K[N]=m),c.push({id:N,label:I,selected:C}));for(r||(u||null===Q?O[""].unshift({id:"",label:"",selected:!V}):V||O[""].unshift({id:"?",label:"",selected:!0})),z=0,t=P.length;t>z;z++){for(a=P[z],c=O[a],L.length<=z?(e={element:x.clone().attr("label",a),label:c.label},k=[e],L.push(k),h.append(e.element)):(k=L[z],e=k[0],e.label!=a&&e.element.attr("label",e.label=a)),D=null,B=0,y=c.length;y>B;B++)d=c[B],(l=k[B+1])?(D=l.element,l.label!==d.label&&(q(T,l.label,!1),q(T,d.label,!0),D.text(l.label=d.label),D.prop("label",l.label)),l.id!==d.id&&D.val(l.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",l.selected=d.selected),_c&&D.prop("selected",l.selected))):(""===d.id&&u?G=u:(G=w.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),k.push(l={element:G,label:d.label,id:d.id,selected:d.selected}),q(T,d.label,!0),D?D.after(G):e.element.append(G),D=G);for(B++;k.length>B;)d=k.pop(),q(T,d.label,!1),d.element.remove()}for(;L.length>z;){for(c=L.pop(),B=1;B<c.length;++B)q(T,c[B].label,!1);c[0].element.remove()}f(T,function(a,b){a>0?p.addOption(b):0>a&&p.removeOption(b)})}var z;if(!(z=t.match(e)))throw Mf("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",t,T(h));var A=d(z[2]||z[1]),B=z[4]||z[6],C=/ as /.test(z[0])&&z[1],D=C?d(C):null,E=z[5],F=d(z[3]||""),G=d(z[2]?z[1]:B),H=d(z[7]),I=z[8],J=I?d(z[8]):null,K={},L=[[{element:h,label:""}]],M={};u&&(a(u)(b),u.removeClass("ng-scope"),u.remove()),h.empty(),h.on("change",k),i.$render=y,b.$watchCollection(H,o),b.$watchCollection(m,o),r&&b.$watchCollection(function(){return i.$modelValue},o)}if(k[1]){for(var o,p=k[0],q=k[1],r=j.multiple,t=j.ngOptions,u=!1,v=!1,w=ad(b.createElement("option")),x=ad(b.createElement("optgroup")),y=w.clone(),z=0,A=i.children(),B=A.length;B>z;z++)if(""===A[z].value){o=u=A.eq(z);break}p.init(q,u,y),r&&(q.$isEmpty=function(a){return!a||0===a.length}),t?n(h,i,q):r?m(h,i,q):l(h,i,q,p)}}}}],Pf=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound||(h=b),e?a.$watch(e,function(a,b){d.$set("value",a),b!==a&&h.removeOption(b),h.addOption(a,c)}):h.addOption(d.value,c),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],Qf=q({restrict:"E",terminal:!1}),Rf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},Sf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(u(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,T(b));g=a||c,f.$validate()}),f.$validators.pattern=function(a){return f.$isEmpty(a)||r(g)||g.test(a)}}}}},Tf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=m(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},Uf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=m(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(da(),na(id),void ad(b).ready(function(){$(b,_)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){b(c.offsetWidth)})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==q)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j,k=b.noop,l=b.forEach,m=e.$$selectors,n=b.isArray,o=b.isString,p=b.isObject,q=1,r="$$ngAnimateState",s="$$ngAnimateChildren",t="ng-animate",u={running:!0};d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(a,c,d,q,v,w,x,y,z,A){function B(a,b){var c=a.data(r)||{};return b&&(c.running=!0,c.structural=!0,a.data(r,c)),c.disabled||c.running&&c.structural}function C(a){var b,d=c.defer();return d.promise.$$cancelFn=function(){b&&b()},x.$$postDigest(function(){b=a(function(){d.resolve()})}),d.promise}function D(a){return p(a)?(a.tempClasses&&o(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a):void 0}function E(a,b,c){c=c||{};var d={};l(c,function(a,b){l(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);l((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0});var f=[],g=[];return l(b&&b.classes||[],function(a,b){var c=e[b],h=d[b]||{};a===!1?(c||"addClass"==h.event)&&g.push(b):a===!0&&(c&&"removeClass"!=h.event||f.push(b))}),f.length+g.length>0&&[f.join(" "),g.join(" ")]}function F(a){if(a){var b=[],c={},e=a.substr(1).split(".");(q.transitions||q.animations)&&b.push(d.get(m[""]));for(var f=0;f<e.length;f++){var g=e[f],h=m[g];h&&!c[g]&&(b.push(d.get(h)),c[g]=!0)}return b}}function G(a,c,d,e){function f(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),w.push({event:b,fn:c}),t.push({event:b,fn:d}),!0):void 0}function g(b,c,f){function g(a){if(c){if((c[a]||k)(),++m<h.length)return;c=null}f()}var h=[];l(b,function(a){a.fn&&h.push(a)});var m=0;l(h,function(b,f){var h=function(){g(f)};switch(b.event){case"setClass":c.push(b.fn(a,i,j,h,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,h));break;case"addClass":c.push(b.fn(a,i||d,h,e));break;case"removeClass":c.push(b.fn(a,j||d,h,e));break;default:c.push(b.fn(a,h,e))}}),c&&0===c.length&&f()}var h=a[0];if(h){e&&(e.to=e.to||{},e.from=e.from||{});var i,j;n(d)&&(i=d[0],j=d[1],i?j?d=i+" "+j:(d=i,c="addClass"):(d=j,c="removeClass"));var m="setClass"==c,o=m||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class"),q=p+" "+d;if(O(q)){var r=k,s=[],t=[],u=k,v=[],w=[],x=(" "+q).replace(/\s+/g,".");return l(F(x),function(a){var b=f(a,c);!b&&m&&(f(a,"addClass"),f(a,"removeClass"))}),{node:h,event:c,className:d,isClassBased:o,isSetClassOperation:m,applyStyles:function(){e&&a.css(b.extend(e.from||{},e.to||{}))},before:function(a){r=a,g(t,s,function(){r=k,a()})},after:function(a){u=a,g(w,v,function(){u=k,a()})},cancel:function(){s&&(l(s,function(a){(a||k)(!0)}),r(!0)),v&&(l(v,function(a){(a||k)(!0)}),u(!0))}}}}}function H(a,c,d,e,f,g,h,i){function m(b){var e="$animate:"+b;x&&x[e]&&x[e].length>0&&w(function(){d.triggerHandler(e,{event:a,className:c})})}function n(){m("before")}function o(){m("after")}function p(){m("close"),i()}function q(){q.hasBeenRun||(q.hasBeenRun=!0,g())}function s(){if(!s.hasBeenRun){v&&v.applyStyles(),s.hasBeenRun=!0,h&&h.tempClasses&&l(h.tempClasses,function(a){j.removeClass(d,a)});var b=d.data(r);b&&(v&&v.isClassBased?J(d,c):(w(function(){var b=d.data(r)||{};H==b.index&&J(d,c,a)}),d.data(r,b))),p()}}var u=k,v=G(d,a,c,h);if(!v)return q(),n(),o(),s(),u;a=v.event,c=v.className;var x=b.element._data(v.node);if(x=x&&x.events,e||(e=f?f.parent():d.parent()),K(d,e))return q(),n(),o(),s(),u;var y=d.data(r)||{},z=y.active||{},A=y.totalActive||0,B=y.last,C=!1;if(A>0){var D=[];if(v.isClassBased){if("setClass"==B.event)D.push(B),J(d,c);else if(z[c]){var E=z[c];E.event==a?C=!0:(D.push(E),J(d,c))}}else if("leave"==a&&z["ng-leave"])C=!0;else{for(var F in z)D.push(z[F]);y={},J(d,!0)}D.length>0&&l(D,function(a){a.cancel()})}if(!v.isClassBased||v.isSetClassOperation||"animate"==a||C||(C="addClass"==a==d.hasClass(c)),C)return q(),n(),o(),p(),u;z=y.active||{},A=y.totalActive||0,"leave"==a&&d.one("$destroy",function(a){var c=b.element(this),d=c.data(r);if(d){var e=d.active["ng-leave"];e&&(e.cancel(),J(c,"ng-leave"))}}),j.addClass(d,t),h&&h.tempClasses&&l(h.tempClasses,function(a){j.addClass(d,a)});var H=M++;return A++,z[c]=v,d.data(r,{last:v,active:z,index:H,totalActive:A}),n(),v.before(function(b){var e=d.data(r);b=b||!e||!e.active[c]||v.isClassBased&&e.active[c].event!=a,q(),b===!0?s():(o(),v.after(s))}),v.cancel}function I(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(t):c.querySelectorAll("."+t);l(d,function(a){a=b.element(a);var c=a.data(r);c&&c.active&&l(c.active,function(a){a.cancel()})})}}function J(a,b){if(i(a,v))u.disabled||(u.running=!1,u.structural=!1);else if(b){var c=a.data(r)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(j.removeClass(a,t),a.removeData(r))}}function K(a,c){if(u.disabled)return!0;if(i(a,v))return u.running;var d,e,f;do{if(0===c.length)break;var g=i(c,v),h=g?u:c.data(r)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(s);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}j=A,v.data(r,u);var L=x.$watch(function(){return z.totalPendingRequests},function(a,b){0===a&&(L(),x.$$postDigest(function(){x.$$postDigest(function(){u.running=!1})}))}),M=0,N=e.classNameFilter(),O=N?function(a){return N.test(a)}:function(){return!0};return{animate:function(a,b,c,d,e){return d=d||"ng-inline-animate",e=D(e)||{},e.from=c?b:null,e.to=c?c:b,C(function(b){return H("animate",d,h(a),null,null,k,e,b)})},enter:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),B(c,!0),a.enter(c,d,e),C(function(a){return H("enter","ng-enter",h(c),d,e,k,f,a)})},leave:function(c,d){return d=D(d),c=b.element(c),I(c),B(c,!0),C(function(b){return H("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d,b)})},move:function(c,d,e,f){return f=D(f),c=b.element(c),d=g(d),e=g(e),I(c),B(c,!0),a.move(c,d,e),C(function(a){return H("move","ng-move",h(c),d,e,k,f,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,g){g=D(g);var i="$$animateClasses";if(c=b.element(c),c=h(c),B(c))return a.$$setClassImmediately(c,d,e,g);var j,k=c.data(i),m=!!k;return k||(k={},k.classes={}),j=k.classes,d=n(d)?d:d.split(" "),l(d,function(a){a&&a.length&&(j[a]=!0)}),e=n(e)?e:e.split(" "),l(e,function(a){a&&a.length&&(j[a]=!1)}),m?(g&&k.options&&(k.options=b.extend(k.options||{},g)),k.promise):(c.data(i,k={classes:j,options:g}),k.promise=C(function(b){var d=c.parent(),e=f(c),g=e.parentNode;if(!g||g.$$NG_REMOVED||e.$$NG_REMOVED)return void b();var h=c.data(i);c.removeData(i);var j=c.data(r)||{},k=E(c,h,j.active);return k?H("setClass",k,c,d,null,function(){k[0]&&a.$$addClassImmediately(c,k[0]),k[1]&&a.$$removeClassImmediately(c,k[1])},h.options,b):b()}))},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a)J(b);else{var c=b.data(r)||{};c.disabled=!0,b.data(r,c)}break;case 1:u.disabled=!a;break;default:a=!u.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){J||(J=h(function(){W=[],J=null,
U={}}))}function m(a,b){J&&J(),W.push(b),J=h(function(){l(W,function(a){a()}),W=[],J=null,U={}})}function p(a,c){var d=f(a);a=b.element(d),Z.push(a);var e=Date.now()+c;Y>=e||(g.cancel(X),Y=e,X=g(function(){r(Z),Z=[]},c,!1))}function r(a){l(a,function(a){var b=a.data(Q);b&&l(b.closeAnimationFns,function(a){a()})})}function s(a,b){var c=b?U[b]:null;if(!c){var e=0,f=0,g=0,h=0;l(a,function(a){if(a.nodeType==q){var b=d.getComputedStyle(a)||{},c=b[E+K];e=Math.max(t(c),e);var i=b[E+M];f=Math.max(t(i),f);b[G+M];h=Math.max(t(b[G+M]),h);var j=t(b[G+K]);j>0&&(j*=parseInt(b[G+N],10)||1),g=Math.max(j,g)}}),c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:h,animationDuration:g},b&&(U[b]=c)}return c}function t(a){var b=0,c=o(a)?a.split(/\s*,\s*/):[];return l(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function u(a){var b=a.parent(),c=b.data(P);return c||(b.data(P,++V),c=V),c+"-"+f(a).getAttribute("class")}function v(a,b,c,d){var e=["ng-enter","ng-leave","ng-move"].indexOf(c)>=0,g=u(b),h=g+" "+c,i=U[h]?++U[h].total:0,k={};if(i>0){var l=c+"-stagger",m=g+" "+l,n=!U[m];n&&j.addClass(b,l),k=s(b,m),n&&j.removeClass(b,l)}j.addClass(b,c);var o=b.data(Q)||{},p=s(b,h),q=p.transitionDuration,r=p.animationDuration;if(e&&0===q&&0===r)return j.removeClass(b,c),!1;var t=d||e&&q>0,v=r>0&&k.animationDelay>0&&0===k.animationDuration,w=o.closeAnimationFns||[];b.data(Q,{stagger:k,cacheKey:h,running:o.running||0,itemIndex:i,blockTransition:t,closeAnimationFns:w});var z=f(b);return t&&(x(z,!0),d&&b.css(d)),v&&y(z,!0),!0}function w(a,b,c,d,e){function h(){b.off(M,i),j.removeClass(b,n),j.removeClass(b,o),K&&g.cancel(K),C(b,c);var a=f(b);for(var d in r)a.style.removeProperty(r[d])}function i(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(R));Math.max(c-L,0)>=G&&e>=D&&d()}var k=f(b),m=b.data(Q);if(-1==k.getAttribute("class").indexOf(c)||!m)return void d();var n="",o="";l(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;n+=c+"-active",o+=c+"-pending"});var q="",r=[],t=m.itemIndex,u=m.stagger,v=0;if(t>0){var w=0;u.transitionDelay>0&&0===u.transitionDuration&&(w=u.transitionDelay*t);var z=0;u.animationDelay>0&&0===u.animationDuration&&(z=u.animationDelay*t,r.push(I+"animation-play-state")),v=Math.round(100*Math.max(w,z))/100}v||(j.addClass(b,n),m.blockTransition&&x(k,!1));var A=m.cacheKey+" "+n,B=s(b,A),D=Math.max(B.transitionDuration,B.animationDuration);if(0===D)return j.removeClass(b,n),C(b,c),void d();!v&&e&&Object.keys(e).length>0&&(B.transitionDuration||(b.css("transition",B.animationDuration+"s linear all"),r.push("transition")),b.css(e));var E=Math.max(B.transitionDelay,B.animationDelay),G=E*T;if(r.length>0){var J=k.getAttribute("style")||"";";"!==J.charAt(J.length-1)&&(J+=";"),k.setAttribute("style",J+" "+q)}var K,L=Date.now(),M=H+" "+F,N=(E+D)*S,O=(v+N)*T;return v>0&&(j.addClass(b,o),K=g(function(){K=null,B.transitionDuration>0&&x(k,!1),B.animationDuration>0&&y(k,!1),j.addClass(b,n),j.removeClass(b,o),e&&(0===B.transitionDuration&&b.css("transition",B.animationDuration+"s linear all"),b.css(e),r.push("transition"))},v*T,!1)),b.on(M,i),m.closeAnimationFns.push(function(){h(),d()}),m.running++,p(b,O),h}function x(a,b){a.style[E+L]=b?"none":""}function y(a,b){a.style[G+O]=b?"paused":""}function z(a,b,c,d){return v(a,b,c,d)?function(a){a&&C(b,c)}:void 0}function A(a,b,c,d,e){return b.data(Q)?w(a,b,c,d,e):(C(b,c),void d())}function B(a,b,c,d,e){var f=z(a,b,c,e.from);if(!f)return i(),void d();var g=f;return m(b,function(){g=A(a,b,c,d,e.to)}),function(a){(g||k)(a)}}function C(a,b){j.removeClass(a,b);var c=a.data(Q);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(Q))}function D(a,b){var c="";return a=n(a)?a:a.split(/\s+/),l(a,function(a,d){a&&a.length>0&&(c+=(d>0?" ":"")+a+b)}),c}var E,F,G,H,I="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(I="-webkit-",E="WebkitTransition",F="webkitTransitionEnd transitionend"):(E="transition",F="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(I="-webkit-",G="WebkitAnimation",H="webkitAnimationEnd animationend"):(G="animation",H="animationend");var J,K="Duration",L="Property",M="Delay",N="IterationCount",O="PlayState",P="$$ngAnimateKey",Q="$$ngAnimateCSS3Data",R=3,S=1.5,T=1e3,U={},V=0,W=[],X=null,Y=0,Z=[];return{animate:function(a,b,c,d,e,f){return f=f||{},f.from=c,f.to=d,B("animate",a,b,e,f)},enter:function(a,b,c){return c=c||{},B("enter",a,"ng-enter",b,c)},leave:function(a,b,c){return c=c||{},B("leave",a,"ng-leave",b,c)},move:function(a,b,c){return c=c||{},B("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){e=e||{};var f=D(c,"-remove")+" "+D(b,"-add"),g=z("setClass",a,f,e.from);return g?(m(a,d),g):(i(),void d())},beforeAddClass:function(a,b,c,d){d=d||{};var e=z("addClass",a,D(b,"-add"),d.from);return e?(m(a,c),e):(i(),void c())},beforeRemoveClass:function(a,b,c,d){d=d||{};var e=z("removeClass",a,D(b,"-remove"),d.from);return e?(m(a,c),e):(i(),void c())},setClass:function(a,b,c,d,e){e=e||{},c=D(c,"-remove"),b=D(b,"-add");var f=c+" "+b;return A("setClass",a,f,d,e.to)},addClass:function(a,b,c,d){return d=d||{},A("addClass",a,D(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){return d=d||{},A("removeClass",a,D(b,"-remove"),c,d.to)}}}])}])}(window,window.angular),function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&(d.cookies(a,c),delete h[a]);for(a in g)e=g[a],b.isString(e)||(e=""+e,g[a]=e),e!==h[a]&&(d.cookies(a,e),h[a]=e,i=!0);if(i){f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?(delete g[a],delete h[a]):g[a]=h[a]=f[a])}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular),function(a,b,c){"use strict";function d(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&h.test("."+a)}function e(a,b){if(!d(b))throw g("badmember",'Dotted member path "@{0}" is invalid.',b);for(var e=b.split("."),f=0,h=e.length;h>f&&a!==c;f++){var i=e[f];a=null!==a?a[i]:c}return a}function f(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var g=b.$$minErr("$resource"),h=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;b.module("ngResource",["ng"]).provider("$resource",function(){var a=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function(d,h){function i(a){return j(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function j(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function k(b,c){this.template=b,this.defaults=o({},a.defaults,c),this.urlParams={}}function l(i,j,r,s){function t(a,b){var c={};return b=o({},j,b),n(b,function(b,d){q(b)&&(b=b()),c[d]=b&&b.charAt&&"@"==b.charAt(0)?e(a,b.substr(1)):b}),c}function u(a){return a.resource}function v(a){f(a||{},this)}var w=new k(i,s);return r=o({},a.defaults.actions,r),v.prototype.toJSON=function(){var a=o({},this);return delete a.$promise,delete a.$resolved,a},n(r,function(a,e){var i=/^(POST|PUT|PATCH)$/i.test(a.method);v[e]=function(j,k,l,r){var s,x,y,z={};switch(arguments.length){case 4:y=r,x=l;case 3:case 2:if(!q(k)){z=j,s=k,x=l;break}if(q(j)){x=j,y=k;break}x=k,y=l;case 1:q(j)?x=j:i?s=j:z=j;break;case 0:break;default:throw g("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var A=this instanceof v,B=A?s:a.isArray?[]:new v(s),C={},D=a.interceptor&&a.interceptor.response||u,E=a.interceptor&&a.interceptor.responseError||c;n(a,function(a,b){"params"!=b&&"isArray"!=b&&"interceptor"!=b&&(C[b]=p(a))}),i&&(C.data=s),w.setUrlParams(C,o({},t(s,a.params||{}),z),a.url);var F=d(C).then(function(c){var d=c.data,h=B.$promise;if(d){if(b.isArray(d)!==!!a.isArray)throw g("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2}",e,a.isArray?"array":"object",b.isArray(d)?"array":"object");a.isArray?(B.length=0,n(d,function(a){"object"==typeof a?B.push(new v(a)):B.push(a)})):(f(d,B),B.$promise=h)}return B.$resolved=!0,c.resource=B,c},function(a){return B.$resolved=!0,(y||m)(a),h.reject(a)});return F=F.then(function(a){var b=D(a);return(x||m)(b,a.headers),b},E),A?F:(B.$promise=F,B.$resolved=!1,B)},v.prototype["$"+e]=function(a,b,c){q(a)&&(c=b,b=a,a={});var d=v[e].call(this,a,this,b,c);return d.$promise||d}}),v.bind=function(a){return l(i,o({},j,a),r)},v}var m=b.noop,n=b.forEach,o=b.extend,p=b.copy,q=b.isFunction;return k.prototype={setUrlParams:function(a,c,d){var e,f,h=this,j=d||h.template,k=h.urlParams={};n(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw g("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(k[a]=!0)}),j=j.replace(/\\:/g,":"),c=c||{},n(h.urlParams,function(a,d){e=c.hasOwnProperty(d)?c[d]:h.defaults[d],b.isDefined(e)&&null!==e?(f=i(e),j=j.replace(new RegExp(":"+d+"(\\W|$)","g"),function(a,b){return f+b})):j=j.replace(new RegExp("(/?):"+d+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),h.defaults.stripTrailingSlashes&&(j=j.replace(/\/+$/,"")||"/"),j=j.replace(/\/\.(?=\w+($|\?))/,"."),a.url=j.replace(/\/\\\./,"/."),n(c,function(b,c){h.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}},l}]})}(window,window.angular),function(a,b,c){"use strict";function d(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return g(b,j(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function e(a){var c=[],d=j(c,b.noop);return d.chars(a),c.join("")}function f(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function g(a,c){function d(a,d,f,g){if(d=b.lowercase(d),z[d])for(;t.last()&&A[t.last()];)e("",t.last());y[d]&&t.last()==d&&e("",d),g=v[d]||!!g,g||t.push(d);var i={};f.replace(n,function(a,b,c,d,e){var f=c||d||e||"";i[b]=h(f)}),c.start&&c.start(d,i,g)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=t.length-1;f>=0&&t[f]!=d;f--);if(f>=0){for(e=t.length-1;e>=f;e--)c.end&&c.end(t[e]);t.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,g,i,j,t=[],u=a;for(t.last=function(){return t[t.length-1]};a;){if(j="",g=!0,t.last()&&C[t.last()]?(a=a.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+t.last()+"[^>]*>","i"),function(a,b){return b=b.replace(q,"$1").replace(s,"$1"),c.chars&&c.chars(h(b)),""}),e("",t.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),g=!1)):r.test(a)?(i=a.match(r),i&&(a=a.replace(i[0],""),g=!1)):p.test(a)?(i=a.match(m),i&&(a=a.substring(i[0].length),i[0].replace(m,e),g=!1)):o.test(a)&&(i=a.match(l),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(l,d)),g=!1):(j+="<",a=a.substring(1))),g&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(h(j)))),a==u)throw k("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function h(a){return a?(I.innerHTML=a.replace(/</g,"&lt;"),I.textContent):""}function i(a){return a.replace(/&/g,"&amp;").replace(t,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function j(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&C[a]&&(d=a),d||D[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),h="img"===a&&"src"===g||"background"===g;H[g]!==!0||E[g]===!0&&!c(d,h)||(e(" "),e(f),e('="'),e(i(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||D[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(i(a))}}}var k=b.$$minErr("$sanitize"),l=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,m=/^<\/\s*([\w:-]+)[^>]*>/,n=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,o=/^</,p=/^<\//,q=/<!--(.*?)-->/g,r=/<!DOCTYPE([^>]*?)>/i,s=/<!\[CDATA\[(.*?)]]>/g,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^\#-~| |!])/g,v=f("area,br,col,hr,img,wbr"),w=f("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=f("rp,rt"),y=b.extend({},x,w),z=b.extend({},w,f("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),A=b.extend({},x,f("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),B=f("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),C=f("script,style"),D=b.extend({},v,z,A,y,B),E=f("background,cite,href,longdesc,src,usemap,xlink:href"),F=f("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),G=f("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),H=b.extend({},E,G,F),I=document.createElement("pre");b.module("ngSanitize",[]).provider("$sanitize",d),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,d=/^mailto:/;return function(f,g){function h(a){a&&n.push(e(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(d,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(a,b,c){"use strict";function d(a){return b.lowercase(a.nodeName||a[0]&&a[0].nodeName)}function e(a,c,d){f.directive(a,["$parse","$swipe",function(e,f){var g=75,h=.3,i=30;return function(j,k,l){function m(a){if(!n)return!1;var b=Math.abs(a.y-n.y),d=(a.x-n.x)*c;return o&&g>b&&d>0&&d>i&&h>b/d}var n,o,p=e(l[a]),q=["touch"];b.isDefined(l.ngSwipeDisableMouse)||q.push("mouse"),f.bind(k,{start:function(a,b){n=a,o=!0},cancel:function(a){o=!1},end:function(a,b){m(a)&&j.$apply(function(){k.triggerHandler(d),p(j,{$event:b})})}},q)}}])}var f=b.module("ngTouch",[]);f.factory("$swipe",[function(){function a(a){var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],d=b.changedTouches&&b.changedTouches[0]||c[0];return{x:d.clientX,y:d.clientY}}function c(a,c){var d=[];return b.forEach(a,function(a){var b=e[a][c];b&&d.push(b)}),d.join(" ")}var d=10,e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(b,e,f){var g,h,i,j,k=!1;f=f||["mouse","touch"],b.on(c(f,"start"),function(b){i=a(b),k=!0,g=0,h=0,j=i,e.start&&e.start(i,b)});var l=c(f,"cancel");l&&b.on(l,function(a){k=!1,e.cancel&&e.cancel(a)}),b.on(c(f,"move"),function(b){if(k&&i){var c=a(b);if(g+=Math.abs(c.x-j.x),h+=Math.abs(c.y-j.y),j=c,!(d>g&&d>h))return h>g?(k=!1,void(e.cancel&&e.cancel(b))):(b.preventDefault(),void(e.move&&e.move(c,b)))}}),b.on(c(f,"end"),function(b){k&&(k=!1,e.end&&e.end(a(b),b))})}}}]),f.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),f.directive("ngClick",["$parse","$timeout","$rootElement",function(a,c,e){function f(a,b,c,d){return Math.abs(a-c)<q&&Math.abs(b-d)<q}function g(a,b,c){for(var d=0;d<a.length;d+=2)if(f(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function h(a){if(!(Date.now()-k>p)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,e=b[0].clientY;1>c&&1>e||m&&m[0]===c&&m[1]===e||(m&&(m=null),"label"===d(a.target)&&(m=[c,e]),g(l,c,e)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur&&a.target.blur()))}}function i(a){var b=a.touches&&a.touches.length?a.touches:[a],d=b[0].clientX,e=b[0].clientY;l.push(d,e),c(function(){for(var a=0;a<l.length;a+=2)if(l[a]==d&&l[a+1]==e)return void l.splice(a,a+2)},p,!1)}function j(a,b){l||(e[0].addEventListener("click",h,!0),e[0].addEventListener("touchstart",i,!0),l=[]),k=Date.now(),g(l,a,b)}var k,l,m,n=750,o=12,p=2500,q=25,r="ng-click-active";return function(c,d,e){function f(){m=!1,d.removeClass(r)}var g,h,i,k,l=a(e.ngClick),m=!1;d.on("touchstart",function(a){m=!0,g=a.target?a.target:a.srcElement,3==g.nodeType&&(g=g.parentNode),d.addClass(r),h=Date.now();var b=a.originalEvent||a,c=b.touches&&b.touches.length?b.touches:[b],e=c[0];i=e.clientX,k=e.clientY}),d.on("touchmove",function(a){f()}),d.on("touchcancel",function(a){f()}),d.on("touchend",function(a){var c=Date.now()-h,l=a.originalEvent||a,p=l.changedTouches&&l.changedTouches.length?l.changedTouches:l.touches&&l.touches.length?l.touches:[l],q=p[0],r=q.clientX,s=q.clientY,t=Math.sqrt(Math.pow(r-i,2)+Math.pow(s-k,2));m&&n>c&&o>t&&(j(r,s),g&&g.blur(),b.isDefined(e.disabled)&&e.disabled!==!1||d.triggerHandler("click",[a])),f()}),d.onclick=function(a){},d.on("click",function(a,b){c.$apply(function(){l(c,{$event:b||a})})}),d.on("mousedown",function(a){d.addClass(r)}),d.on("mousemove mouseup",function(a){d.removeClass(r)})}}]),e("ngSwipeLeft",-1,"swipeleft"),e("ngSwipeRight",1,"swiperight")}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return N(new(N(function(){},{prototype:a})),b)}function e(a){return M(arguments,function(b){b!==a&&M(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return M(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return N({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return M(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return M(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=L(a),d=c?[]:{};return M(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=L(a)?[]:{};return M(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=N(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,J(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);M(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return K(a)&&a.then&&a.$$promises}if(!K(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return M(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!H(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;M(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!K(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=N({},d),u=1+q.length/3,v=!1;if(H(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),N(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return H(a.template)?this.fromString(a.template,b):H(a.templateUrl)?this.fromUrl(a.templateUrl,b):H(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return I(a)?a(b):a},this.fromUrl=function(c,d){return I(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new P.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:e=["?(",")?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),j=P.type(h||"string")||d(P.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)}),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=N({params:{}},K(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new P.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){N(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return I(a)||L(a)&&I(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){N(this,a||{})}P=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!H(a)||"string"==typeof a},pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return H(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return H(a)&&(m=a),m},this.strictMode=function(a){return H(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!H(a))return q;if(a!==!0&&a!==!1&&!J(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,N(f(),b))},this.isMatcher=function(a){if(!K(a))return!1;var b=!0;return M(r.prototype,function(c,d){I(c)&&(b=b&&H(a[d])&&I(a[d]))}),b},this.type=function(a,b,c){if(!H(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(N({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},M(x,function(a,b){u[b]=new s(N({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),M(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=K(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function j(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof s?b.type:new s(b.type):"config"===d?u.any:u.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return N(b,c,d).array}function m(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!H(c)||null==c)return q;if(c===!0||J(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=L(a.replace)?a.replace:[],J(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function r(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(d.$$fn);if(null!==a&&a!==c&&!w.type.is(a))throw new Error("Default value ("+a+") for parameter '"+w.id+"' is not an instance of Type ("+w.type.name+")");return a}function t(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),H(a)?w.type.$normalize(a):r()}function v(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=j(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=m(d,y),A=p(d,x,y,z);N(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:t,dynamic:c,config:d,toString:v})},k.prototype={$$new:function(){return d(this,N(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),M(b,function(b){M(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return M(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return M(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],f=a[i[d]],f!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return H(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(J(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){o&&d.url()===o;o=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!I(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(J(a)){var b=a;a=function(){return b}}else if(!I(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=J(b);if(J(a)&&(a=d.compile(a)),!h&&!I(b)&&!L(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),N(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:J(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");
return h&&(c=b,b=["$match",function(a){return f(c,a)}]),N(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=J(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=z[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!J(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):J(b.parent)?b.parent:K(b.parent)&&J(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)I(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length?!1:c.join("")===b.join("")}function t(a,b){return J(a)&&!H(b)?C[a]:I(b)&&J(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return K(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return M(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(I(d.controllerProvider)||L(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,N({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=N({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!H(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!H(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,I=[];if(f.reload){if(J(f.reload)||K(f.reload)){if(K(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var L=f.reload===!0?o[0]:m(f.reload);if(f.reload&&!L)throw new Error("No such reload state '"+(J(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==L;)G=I[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=I[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,O(y.params,n),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),p.update(),C;for(var M=e.when(G),P=D;P<z.length;P++,F=z[P])G=I[P]=d(G),M=v(F,c,F===b,M,G,f);var Q=y.transition=M.then(function(){var d,e,g;if(y.transition!==Q)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=I[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return r&&(c["#"]=r),y.transition!==Q?A:(y.$current=b,y.current=b.self,y.params=c,O(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==Q?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return Q},y.is=function(a,b,d){d=N({relative:y.$current},d||{});var e=m(a,d.relative);return H(e)?y.$current!==e?!1:b?j(e.params.$$values(b),n):!0:c},y.includes=function(a,b,d){if(d=N({relative:y.$current},d||{}),J(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return H(e)?H(y.$current.includes[e.name])?b?j(e.params.$$values(b),n,g(b)):!0:!1:c},y.href=function(a,b,d){d=N({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!H(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e)),g=new P.ParamSet(f);return g.$$equals(b,c)}return!f.reload&&a===c&&(e===c.locals||a.self.reloadOnSearch===!1&&g(c,d,b))?!0:void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(H(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=N({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(J(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new P.ParamSet;return M(a.params||{},function(a,c){b[c]||(b[c]=new P.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?N(a.parent.params.$$new(),a.ownParams):new P.ParamSet},views:function(a){var b={};return M(H(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?N({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,"abstract":!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=N(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a,c){var d=["location","inherit","reload","absolute"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=B(g.uiSref,a.current.name),j=null,k=C(f)||a.$current,l="[object SVGAnimatedString]"===Object.prototype.toString.call(f.prop("href"))?"xlink:href":"href",m=null,n="A"===f.prop("tagName").toUpperCase(),o="FORM"===f[0].nodeName,p=o?"action":l,q=!0,r={relative:k,inherit:!0},s=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in s&&(r[a]=s[a])});var t=function(c){if(c&&(j=b.copy(c)),q){m=a.href(i.state,j,r);var d=h[1]||h[0];return d&&d.$$addStateInfo(i.state,j),null===m?(q=!1,!1):void g.$set(p,m)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a,b){a!==j&&t(a)},!0),j=b.copy(e.$eval(i.paramExpr))),t(),o||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,r)});b.preventDefault();var g=n&&!m?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function E(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(i):d.removeClass(i)}function g(){for(var a=0;a<j.length;a++)if(h(j[a].state,j[a].params))return!0;return!1}function h(b,c){return"undefined"!=typeof e.uiSrefActiveEq?a.is(b.name,c):a.includes(b.name,c)}var i,j=[];i=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$addStateInfo=function(b,c){var e=a.get(b,C(d));j.push({state:e||{name:b},params:c}),f()},b.$on("$stateChangeSuccess",f)}]}}function F(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function G(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var H=b.isDefined,I=b.isFunction,J=b.isString,K=b.isObject,L=b.isArray,M=b.forEach,N=b.extend,O=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var P;r.prototype.concat=function(a,b){var c={caseInsensitive:P.caseInsensitive(),strict:P.strictMode(),squash:P.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,N(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}var d=b(a).split(/-(?!\\)/),e=o(d,b);return o(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},r.prototype.parameters=function(a){return H(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=p?m.squash:!1,r=m.type.encode(n);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=L(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else J(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;L(r)||(r=[r]),r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return L(a)?a:H(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=o(c,a);return b===!0?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x),y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),D.$inject=["$state","$timeout"],E.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",D).directive("uiSrefActive",E).directive("uiSrefActiveEq",E),F.$inject=["$state"],G.$inject=["$state"],b.module("ui.router.state").filter("isState",F).filter("includedByState",G)}(window,window.angular),function(a,b){"use strict";return"function"==typeof define&&define.amd?void define("ngStorage",["angular"],function(a){return b(a)}):b(a)}("undefined"==typeof angular?null:angular,function(a){"use strict";function b(b){return["$rootScope","$window","$log","$timeout",function(c,d,e,f){function g(a){var b=d[a];if(b&&"localStorage"===a){var c="__"+Math.round(1e7*Math.random());try{localStorage.setItem(c,c),localStorage.removeItem(c)}catch(e){b=!1}}return b}var h,i,j=g(b)||(e.warn("This browser does not support Web Storage!"),{setItem:function(){},getItem:function(){}}),k={$default:function(b){for(var c in b)a.isDefined(k[c])||(k[c]=b[c]);return k},$reset:function(a){for(var b in k)"$"===b[0]||delete k[b]&&j.removeItem("ngStorage-"+b);return k.$default(a)}};try{j=d[b],j.length}catch(l){e.warn("This browser does not support Web Storage!"),j={}}for(var m,n=0,o=j.length;o>n;n++)(m=j.key(n))&&"ngStorage-"===m.slice(0,10)&&(k[m.slice(10)]=a.fromJson(j.getItem(m)));return h=a.copy(k),c.$watch(function(){var b;i||(i=f(function(){if(i=null,!a.equals(k,h)){b=a.copy(h),a.forEach(k,function(c,d){a.isDefined(c)&&"$"!==d[0]&&j.setItem("ngStorage-"+d,a.toJson(c)),delete b[d]});for(var c in b)j.removeItem("ngStorage-"+c);h=a.copy(k)}},100,!1))}),"localStorage"===b&&d.addEventListener&&d.addEventListener("storage",function(b){"ngStorage-"===b.key.slice(0,10)&&(b.newValue?k[b.key.slice(10)]=a.fromJson(b.newValue):delete k[b.key.slice(10)],h=a.copy(k),c.$apply())}),k}]}a.module("ngStorage",[]).factory("$localStorage",b("localStorage")).factory("$sessionStorage",b("sessionStorage"))}),angular.module("ui.alias",[]).config(["$compileProvider","uiAliasConfig",function(a,b){"use strict";b=b||{},angular.forEach(b,function(b,c){angular.isString(b)&&(b={replace:!0,template:b}),a.directive(c,function(){return b})})}]),angular.module("ui.event",[]).directive("uiEvent",["$parse",function(a){"use strict";return function(b,c,d){var e=b.$eval(d.uiEvent);angular.forEach(e,function(d,e){var f=a(d);c.bind(e,function(a){var c=Array.prototype.slice.call(arguments);c=c.splice(1),f(b,{$event:a,$params:c}),b.$$phase||b.$apply()})})}}]),angular.module("ui.format",[]).filter("format",function(){"use strict";return function(a,b){var c=a;if(angular.isString(c)&&void 0!==b)if(angular.isArray(b)||angular.isObject(b)||(b=[b]),angular.isArray(b)){var d=b.length,e=function(a,c){return c=parseInt(c,10),c>=0&&d>c?b[c]:a};c=c.replace(/\$([0-9]+)/g,e)}else angular.forEach(b,function(a,b){c=c.split(":"+b).join(a)});return c}}),angular.module("ui.highlight",[]).filter("highlight",function(){"use strict";return function(a,b,c){return a&&(b||angular.isNumber(b))?(a=a.toString(),b=b.toString(),c?a.split(b).join('<span class="ui-match">'+b+"</span>"):a.replace(new RegExp(b,"gi"),'<span class="ui-match">$&</span>')):a}}),angular.module("ui.include",[]).directive("uiInclude",["$http","$templateCache","$anchorScroll","$compile",function(a,b,c,d){"use strict";return{restrict:"ECA",terminal:!0,compile:function(e,f){var g=f.uiInclude||f.src,h=f.fragment||"",i=f.onload||"",j=f.autoscroll;return function(e,f){function k(){var k=++m,o=e.$eval(g),p=e.$eval(h);o?a.get(o,{cache:b}).success(function(a){if(k===m){l&&l.$destroy(),l=e.$new();var b;b=p?angular.element("<div/>").html(a).find(p):angular.element("<div/>").html(a).contents(),f.html(b),d(b)(l),!angular.isDefined(j)||j&&!e.$eval(j)||c(),l.$emit("$includeContentLoaded"),e.$eval(i)}}).error(function(){k===m&&n()}):n()}var l,m=0,n=function(){l&&(l.$destroy(),l=null),f.html("")};e.$watch(h,k),e.$watch(g,k)}}}}]),angular.module("ui.indeterminate",[]).directive("uiIndeterminate",[function(){"use strict";return{compile:function(a,b){return b.type&&"checkbox"===b.type.toLowerCase()?function(a,b,c){a.$watch(c.uiIndeterminate,function(a){b[0].indeterminate=!!a})}:angular.noop}}}]),angular.module("ui.inflector",[]).filter("inflector",function(){"use strict";function a(a){return a=a.replace(/([A-Z])|([\-|\_])/g,function(a,b){return" "+(b||"")}),a.replace(/\s\s+/g," ").trim().toLowerCase().split(" ")}function b(a){var b=[];return angular.forEach(a,function(a){b.push(a.charAt(0).toUpperCase()+a.substr(1))}),b}var c={humanize:function(c){return b(a(c)).join(" ")},underscore:function(b){return a(b).join("_")},variable:function(c){return c=a(c),c=c[0]+b(c.slice(1)).join("")}};return function(a,b){return b!==!1&&angular.isString(a)?(b=b||"humanize",c[b](a)):a}}),angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function(a,b){"use strict";return{restrict:"A",compile:function(c,d){if(!angular.isFunction(c[d.uiJq]))throw new Error('ui-jq: The "'+d.uiJq+'" function does not exist');var e=a&&a[d.uiJq];return function(a,c,d){function f(){var b=[];return d.uiOptions?(b=a.$eval("["+d.uiOptions+"]"),angular.isObject(e)&&angular.isObject(b[0])&&(b[0]=angular.extend({},e,b[0]))):e&&(b=[e]),b}function g(){b(function(){c[d.uiJq].apply(c,f())},0,!1)}d.ngModel&&c.is("select,input,textarea")&&c.bind("change",function(){c.trigger("input")}),d.uiRefresh&&a.$watch(d.uiRefresh,function(){g()}),g()}}}}]),angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function(a){"use strict";var b={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"},c=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};return function(d,e,f,g){var h,i=[];h=e.$eval(g["ui"+c(d)]),angular.forEach(h,function(b,c){var d,e;e=a(b),angular.forEach(c.split(" "),function(a){d={expression:e,keys:{}},angular.forEach(a.split("-"),function(a){d.keys[a]=!0}),i.push(d)})}),f.bind(d,function(a){var c=!(!a.metaKey||a.ctrlKey),f=!!a.altKey,g=!!a.ctrlKey,h=!!a.shiftKey,j=a.keyCode;"keypress"===d&&!h&&j>=97&&122>=j&&(j-=32),angular.forEach(i,function(d){var i=d.keys[b[j]]||d.keys[j.toString()],k=!!d.keys.meta,l=!!d.keys.alt,m=!!d.keys.ctrl,n=!!d.keys.shift;i&&k===c&&l===f&&m===g&&n===h&&e.$apply(function(){d.expression(e,{$event:a})})})})}}]),angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(a){"use strict";return{link:function(b,c,d){a("keydown",b,c,d)}}}]),angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(a){"use strict";return{link:function(b,c,d){a("keypress",b,c,d)}}}]),angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(a){"use strict";return{link:function(b,c,d){a("keyup",b,c,d)}}}]),angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0}).directive("uiMask",["uiMaskConfig","$parse",function(a,b){"use strict";return{priority:100,require:"ngModel",restrict:"A",compile:function(){var c=a;return function(a,d,e,f){function g(a){return angular.isDefined(a)?(t(a),O?(l(),m(),!0):k()):k()}function h(a){angular.isDefined(a)&&(E=a,O&&x())}function i(a){return O?(H=p(a||""),J=o(H),f.$setValidity("mask",J),J&&H.length?q(H):void 0):a}function j(a){return O?(H=p(a||""),J=o(H),f.$viewValue=H.length?q(H):"",f.$setValidity("mask",J),""===H&&e.required&&f.$setValidity("required",!f.$error.required),J?H:void 0):a}function k(){return O=!1,n(),angular.isDefined(Q)?d.attr("placeholder",Q):d.removeAttr("placeholder"),angular.isDefined(R)?d.attr("maxlength",R):d.removeAttr("maxlength"),d.val(f.$modelValue),f.$viewValue=f.$modelValue,!1}function l(){H=L=p(f.$viewValue||""),I=K=q(H),J=o(H);var a=J&&H.length?I:"";e.maxlength&&d.attr("maxlength",2*C[C.length-1]),d.attr("placeholder",E),d.val(a),f.$viewValue=a}function m(){P||(d.bind("blur",u),d.bind("mousedown mouseup",v),d.bind("input keyup click focus",x),P=!0)}function n(){P&&(d.unbind("blur",u),d.unbind("mousedown",v),d.unbind("mouseup",v),d.unbind("input",x),d.unbind("keyup",x),d.unbind("click",x),d.unbind("focus",x),P=!1)}function o(a){return a.length?a.length>=G:!0}function p(a){var b="",c=D.slice();return a=a.toString(),angular.forEach(F,function(b){a=a.replace(b,"")}),angular.forEach(a.split(""),function(a){c.length&&c[0].test(a)&&(b+=a,c.shift())}),b}function q(a){var b="",c=C.slice();return angular.forEach(E.split(""),function(d,e){a.length&&e===c[0]?(b+=a.charAt(0)||"_",a=a.substr(1),c.shift()):b+=d}),b}function r(a){var b=e.placeholder;return"undefined"!=typeof b&&b[a]?b[a]:"_"}function s(){return E.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function t(a){var b=0;if(C=[],D=[],E="","string"==typeof a){G=0;var c=!1,d=0,e=a.split("");angular.forEach(e,function(a,e){S.maskDefinitions[a]?(C.push(b),E+=r(e-d),D.push(S.maskDefinitions[a]),b++,c||G++):"?"===a?(c=!0,d++):(E+=a,b++)})}C.push(C.slice().pop()+1),F=s(),O=C.length>1?!0:!1}function u(){S.clearOnBlur&&(M=0,N=0,J&&0!==H.length||(I="",d.val(""),a.$apply(function(){f.$setViewValue("")})))}function v(a){"mousedown"===a.type?d.bind("mouseout",w):d.unbind("mouseout",w)}function w(){N=B(this),d.unbind("mouseout",w)}function x(b){b=b||{};var c=b.which,e=b.type;if(16!==c&&91!==c){var g,h=d.val(),i=K,j=p(h),k=L,l=!1,m=z(this)||0,n=M||0,o=m-n,r=C[0],s=C[j.length]||C.slice().shift(),t=N||0,u=B(this)>0,v=t>0,w=h.length>i.length||t&&h.length>i.length-t,x=h.length<i.length||t&&h.length===i.length-t,D=c>=37&&40>=c&&b.shiftKey,E=37===c,F=8===c||"keyup"!==e&&x&&-1===o,G=46===c||"keyup"!==e&&x&&0===o&&!v,H=(E||F||"click"===e)&&m>r;if(N=B(this),!D&&(!u||"click"!==e&&"keyup"!==e)){if("input"===e&&x&&!v&&j===k){for(;F&&m>r&&!y(m);)m--;for(;G&&s>m&&-1===C.indexOf(m);)m++;var I=C.indexOf(m);j=j.substring(0,I)+j.substring(I+1),l=!0}for(g=q(j),K=g,L=j,d.val(g),l&&a.$apply(function(){f.$setViewValue(j)}),w&&r>=m&&(m=r+1),H&&m--,m=m>s?s:r>m?r:m;!y(m)&&m>r&&s>m;)m+=H?-1:1;(H&&s>m||w&&!y(n))&&m++,M=m,A(this,m)}}}function y(a){return C.indexOf(a)>-1}function z(a){if(!a)return 0;if(void 0!==a.selectionStart)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange();return b.moveStart("character",a.value?-a.value.length:0),b.text.length}return 0}function A(a,b){if(!a)return 0;if(0!==a.offsetWidth&&0!==a.offsetHeight)if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}}function B(a){return a?void 0!==a.selectionStart?a.selectionEnd-a.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var C,D,E,F,G,H,I,J,K,L,M,N,O=!1,P=!1,Q=e.placeholder,R=e.maxlength,S={};e.uiOptions?(S=a.$eval("["+e.uiOptions+"]"),angular.isObject(S[0])&&(S=function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(void 0===b[c]?b[c]=angular.copy(a[c]):angular.extend(b[c],a[c]));return b}(c,S[0]))):S=c,e.$observe("uiMask",g),e.$observe("placeholder",h);var T=!1;e.$observe("modelViewValue",function(a){"true"===a&&(T=!0)}),a.$watch(e.ngModel,function(c){if(T&&c){var d=b(e.ngModel);d.assign(a,f.$viewValue)}}),f.$formatters.push(i),f.$parsers.push(j),d.bind("mousedown mouseup",v),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1})}}}}]),angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(a){"use strict";var b=null;return void 0!==a&&(b=a),{require:"ngModel",link:function(a,c,d,e){var f;f=angular.element('<a class="ui-reset" />'),c.wrap('<span class="ui-resetwrap" />').after(f),f.bind("click",function(c){c.preventDefault(),a.$apply(function(){d.uiReset?e.$setViewValue(a.$eval(d.uiReset)):e.$setViewValue(b),e.$render()})})}}}]),angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function(a,b){"use strict";return{restrict:"AC",scope:!0,compile:function(c,d){var e;if(d.uiRoute)e="uiRoute";else if(d.ngHref)e="ngHref";else{if(!d.href)throw new Error("uiRoute missing a route or href property on "+c[0]);e="href"}return function(c,d,f){function g(b){var d=b.indexOf("#");d>-1&&(b=b.substr(d+1)),(j=function(){i(c,a.path().indexOf(b)>-1)})()}function h(b){var d=b.indexOf("#");d>-1&&(b=b.substr(d+1)),(j=function(){var d=new RegExp("^"+b+"$",["i"]);i(c,d.test(a.path()))})()}var i=b(f.ngModel||f.routeModel||"$uiRoute").assign,j=angular.noop;switch(e){case"uiRoute":f.uiRoute?h(f.uiRoute):f.$observe("uiRoute",h);break;case"ngHref":f.ngHref?g(f.ngHref):f.$observe("ngHref",g);break;case"href":g(f.href)}c.$on("$routeChangeSuccess",function(){j()}),c.$on("$stateChangeSuccess",function(){j()})}}}}]),angular.module("ui.scroll.jqlite",["ui.scroll"]).service("jqLiteExtras",["$log","$window",function(a,b){"use strict";return{registerFor:function(a){var c,d,e,f,g,h,i;return d=angular.element.prototype.css,a.prototype.css=function(a,b){var c,e;return e=this,c=e[0],c&&3!==c.nodeType&&8!==c.nodeType&&c.style?d.call(e,a,b):void 0},h=function(a){return a&&a.document&&a.location&&a.alert&&a.setInterval},i=function(a,b,c){var d,e,f,g,i;return d=a[0],i={top:["scrollTop","pageYOffset","scrollLeft"],left:["scrollLeft","pageXOffset","scrollTop"]}[b],e=i[0],g=i[1],f=i[2],h(d)?angular.isDefined(c)?d.scrollTo(a[f].call(a),c):g in d?d[g]:d.document.documentElement[e]:angular.isDefined(c)?d[e]=c:d[e]},b.getComputedStyle?(f=function(a){return b.getComputedStyle(a,null)},c=function(a,b){return parseFloat(b)}):(f=function(a){return a.currentStyle},c=function(a,b){var c,d,e,f,g,h,i;return c=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,f=new RegExp("^("+c+")(?!px)[a-z%]+$","i"),f.test(b)?(i=a.style,d=i.left,g=a.runtimeStyle,h=g&&g.left,g&&(g.left=i.left),i.left=b,e=i.pixelLeft,i.left=d,h&&(g.left=h),e):parseFloat(b)}),e=function(a,b){var d,e,g,i,j,k,l,m,n,o,p,q,r;return h(a)?(d=document.documentElement[{height:"clientHeight",width:"clientWidth"}[b]],{base:d,padding:0,border:0,margin:0}):(r={width:[a.offsetWidth,"Left","Right"],height:[a.offsetHeight,"Top","Bottom"]}[b],d=r[0],l=r[1],m=r[2],k=f(a),p=c(a,k["padding"+l])||0,q=c(a,k["padding"+m])||0,e=c(a,k["border"+l+"Width"])||0,g=c(a,k["border"+m+"Width"])||0,i=k["margin"+l],j=k["margin"+m],n=c(a,i)||0,o=c(a,j)||0,{base:d,padding:p+q,border:e+g,margin:n+o})},g=function(a,b,c){var d,g,h;return g=e(a,b),g.base>0?{base:g.base-g.padding-g.border,
outer:g.base,outerfull:g.base+g.margin}[c]:(d=f(a),h=d[b],(0>h||null===h)&&(h=a.style[b]||0),h=parseFloat(h)||0,{base:h-g.padding-g.border,outer:h,outerfull:h+g.padding+g.border+g.margin}[c])},angular.forEach({before:function(a){var b,c,d,e,f,g,h;if(f=this,c=f[0],e=f.parent(),b=e.contents(),b[0]===c)return e.prepend(a);for(d=g=1,h=b.length-1;h>=1?h>=g:g>=h;d=h>=1?++g:--g)if(b[d]===c)return void angular.element(b[d-1]).after(a);throw new Error("invalid DOM structure "+c.outerHTML)},height:function(a){var b;return b=this,angular.isDefined(a)?(angular.isNumber(a)&&(a+="px"),d.call(b,"height",a)):g(this[0],"height","base")},outerHeight:function(a){return g(this[0],"height",a?"outerfull":"outer")},offset:function(a){var b,c,d,e,f,g;if(f=this,arguments.length){if(void 0===a)return f;throw new Error("offset setter method is not implemented")}return b={top:0,left:0},e=f[0],(c=e&&e.ownerDocument)?(d=c.documentElement,null!=e.getBoundingClientRect&&(b=e.getBoundingClientRect()),g=c.defaultView||c.parentWindow,{top:b.top+(g.pageYOffset||d.scrollTop)-(d.clientTop||0),left:b.left+(g.pageXOffset||d.scrollLeft)-(d.clientLeft||0)}):void 0},scrollTop:function(a){return i(this,"top",a)},scrollLeft:function(a){return i(this,"left",a)}},function(b,c){return a.prototype[c]?void 0:a.prototype[c]=b})}}}]).run(["$log","$window","jqLiteExtras",function(a,b,c){"use strict";return b.jQuery?void 0:c.registerFor(angular.element)}]),angular.module("ui.scroll",[]).directive("uiScrollViewport",["$log",function(){"use strict";return{controller:["$scope","$element",function(a,b){return this.viewport=b,this}]}}]).directive("uiScroll",["$log","$injector","$rootScope","$timeout",function(a,b,c,d){"use strict";return{require:["?^uiScrollViewport"],transclude:"element",priority:1e3,terminal:!0,compile:function(e,f,g){return function(e,f,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da;if(O=a.debug||a.log,P=h.uiScroll.match(/^\s*(\w+)\s+in\s+([\w\.]+)\s*$/),!P)throw new Error("Expected uiScroll in form of '_item_ in _datasource_' but got '"+h.uiScroll+"'");if(M=P[1],x=P[2],I=function(a,b){var c;if(a)return c=b.match(/^([\w]+)\.(.+)$/),c&&3===c.length?I(a[c[1]],c[2]):a[b]},X=function(a,b,c,d){var e;if(a&&b&&((e=b.match(/^([\w]+)\.(.+)$/))||-1===b.indexOf(".")))return e&&3===e.length?(angular.isObject(a[e[1]])||d||(a[e[1]]={}),X(a[e[1]],e[2],c,d)):angular.isObject(a[b])||d?a[b]=c:a[b]=c},w=I(e,x),L=function(){return angular.isObject(w)&&"function"==typeof w.get},!L()&&(w=b.get(x),!L()))throw new Error(""+x+" is not a valid datasource");return s=Math.max(3,+h.bufferSize||10),r=function(){return ba.outerHeight()*Math.max(.1,+h.padding||.1)},W=function(a){var b;return null!=(b=a[0].scrollHeight)?b:a[0].document.documentElement.scrollHeight},t=null,g(e.$new(),function(a){var b,c,d,g,h,j;if(g=a[0].localName,"dl"===g)throw new Error("ui-scroll directive does not support <"+a[0].localName+"> as a repeating tag: "+a[0].outerHTML);return"li"!==g&&"tr"!==g&&(g="div"),j=i[0]&&i[0].viewport?i[0].viewport:angular.element(window),j.css({"overflow-y":"auto",display:"block"}),d=function(a){var b,c,d;switch(a){case"tr":return d=angular.element("<table><tr><td><div></div></td></tr></table>"),b=d.find("div"),c=d.find("tr"),c.paddingHeight=function(){return b.height.apply(b,arguments)},c;default:return c=angular.element("<"+a+"></"+a+">"),c.paddingHeight=c.height,c}},c=function(a,b,c){return b[{top:"before",bottom:"after"}[c]](a),{paddingHeight:function(){return a.paddingHeight.apply(a,arguments)},insert:function(b){return a[{top:"after",bottom:"before"}[c]](b)}}},h=c(d(g),f,"top"),b=c(d(g),f,"bottom"),e.$on("$destroy",a.remove),t={viewport:j,topPadding:h.paddingHeight,bottomPadding:b.paddingHeight,append:b.insert,prepend:h.insert,bottomDataPos:function(){return W(j)-b.paddingHeight()},topDataPos:function(){return h.paddingHeight()}}}),ba=t.viewport,ca=ba.scope()||c,_=function(a){return j.topVisible=a.scope[M],j.topVisibleElement=a.element,j.topVisibleScope=a.scope,h.topVisible&&X(ca,h.topVisible,j.topVisible),h.topVisibleElement&&X(ca,h.topVisibleElement,j.topVisibleElement),h.topVisibleScope&&X(ca,h.topVisibleScope,j.topVisibleScope),"function"==typeof w.topVisible?w.topVisible(a):void 0},N=function(a){return j.isLoading=a,h.isLoading&&X(e,h.isLoading,a),"function"==typeof w.loading?w.loading(a):void 0},V=0,H=1,Q=1,q=[],R=[],D=!1,o=!1,T=function(a,b){var c,d;for(c=d=a;b>=a?b>d:d>b;c=b>=a?++d:--d)q[c].scope.$destroy(),q[c].element.remove();return q.splice(a,b-a)},S=function(){return V++,H=1,Q=1,T(0,q.length),t.topPadding(0),t.bottomPadding(0),R=[],D=!1,o=!1,l(V)},p=function(){return ba.scrollTop()+ba.outerHeight()},aa=function(){return ba.scrollTop()},Y=function(){return!D&&t.bottomDataPos()<p()+r()},u=function(){var a,b,c,d,e,f,g,h,i,j;for(a=0,g=0,b=i=j=q.length-1;0>=j?0>=i:i>=0;b=0>=j?++i:--i)if(c=q[b],e=c.element.offset().top,f=h!==e,h=e,f&&(d=c.element.outerHeight(!0)),t.bottomDataPos()-a-d>p()+r())f&&(a+=d),g++,D=!1;else{if(f)break;g++}return g>0?(t.bottomPadding(t.bottomPadding()+a),T(q.length-g,q.length),Q-=g):void 0},Z=function(){return!o&&t.topDataPos()>aa()-r()},v=function(){var a,b,c,d,e,f,g,h,i;for(g=0,e=0,h=0,i=q.length;i>h;h++)if(a=q[h],c=a.element.offset().top,d=f!==c,f=c,d&&(b=a.element.outerHeight(!0)),t.topDataPos()+g+b<aa()-r())d&&(g+=b),e++,o=!1;else{if(d)break;e++}return e>0?(t.topPadding(t.topPadding()+g),T(0,e),H+=e):void 0},C=function(a,b){return j.isLoading||N(!0),1===R.push(b)?F(a):void 0},J=function(a){return a.displayTemp=a.css("display"),a.css("display","none")},$=function(a){return a.hasOwnProperty("displayTemp")?a.css("display",a.displayTemp):void 0},K=function(a,b){var c,d,f;return c=e.$new(),c[M]=b,d=a>H,c.$index=a,d&&c.$index--,f={scope:c},g(c,function(b){return f.element=b,d?a===Q?(J(b),t.append(b),q.push(f)):(q[a-H].element.after(b),q.splice(a-H+1,0,f)):(J(b),t.prepend(b),q.unshift(f))}),{appended:d,wrapper:f}},m=function(a,b){var c;return a?t.bottomPadding(Math.max(0,t.bottomPadding()-b.element.outerHeight(!0))):(c=t.topPadding()-b.element.outerHeight(!0),c>=0?t.topPadding(c):ba.scrollTop(ba.scrollTop()+b.element.outerHeight(!0)))},y=function(a,b){var c,d,e,f,g,h,i,j,k;if(Y()?C(a,!0):Z()&&C(a,!1),b&&b(a),0===R.length){for(h=0,k=[],i=0,j=q.length;j>i;i++){if(c=q[i],e=c.element.offset().top,f=g!==e,g=e,f&&(d=c.element.outerHeight(!0)),!(f&&t.topDataPos()+h+d<aa())){f&&_(c);break}k.push(h+=d)}return k}},l=function(a,b,c){return b&&b.length?d(function(){var d,e,f,g,h,i,j,k,l;for(h=[],i=0,k=b.length;k>i;i++)f=b[i],d=f.wrapper.element,$(d),e=d.offset().top,g!==e&&(h.push(f),g=e);for(j=0,l=h.length;l>j;j++)f=h[j],m(f.appended,f.wrapper);return y(a,c)}):y(a,c)},G=function(a,b){return l(a,b,function(){return R.shift(),0===R.length?N(!1):F(a)})},F=function(a){var b;return b=R[0],b?q.length&&!Y()?G(a):w.get(Q,s,function(b){var c,d,f,g;if(!(a&&a!==V||e.$$destroyed)){if(d=[],b.length<s&&(D=!0,t.bottomPadding(0)),b.length>0)for(v(),f=0,g=b.length;g>f;f++)c=b[f],d.push(K(++Q,c));return G(a,d)}}):q.length&&!Z()?G(a):w.get(H-s,s,function(b){var c,d,f,g;if(!(a&&a!==V||e.$$destroyed)){if(d=[],b.length<s&&(o=!0,t.topPadding(0)),b.length>0)for(q.length&&u(),c=f=g=b.length-1;0>=g?0>=f:f>=0;c=0>=g?++f:--f)d.unshift(K(--H,b[c]));return G(a,d)}})},U=function(){return c.$$phase||j.isLoading?void 0:(l(),e.$apply())},da=function(a){var b,c;return b=ba[0].scrollTop,c=ba[0].scrollHeight-ba[0].clientHeight,0===b&&!o||b===c&&!D?a.preventDefault():void 0},ba.bind("resize",U),ba.bind("scroll",U),ba.bind("mousewheel",da),e.$watch(w.revision,S),E=w.scope?w.scope.$new():e.$new(),e.$on("$destroy",function(){var a,b,c;for(b=0,c=q.length;c>b;b++)a=q[b],a.scope.$destroy(),a.element.remove();return ba.unbind("resize",U),ba.unbind("scroll",U),ba.unbind("mousewheel",da)}),j={},j.isLoading=!1,n=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n;if(d=[],angular.isArray(b))if(b.length){if(1===b.length&&b[0]===a.scope[M])return d;for(f=a.scope.$index,h=f>H?f-H:1,c=i=0,l=b.length;l>i;c=++i)g=b[c],d.push(K(f+c,g));for(T(h,h+1),c=j=0,m=q.length;m>j;c=++j)e=q[c],e.scope.$index=H+c}else for(T(a.scope.$index-H,a.scope.$index-H+1),Q--,c=k=0,n=q.length;n>k;c=++k)e=q[c],e.scope.$index=H+c;return d},j.applyUpdates=function(a,b){var c,d,e,f,g,h;if(c=[],V++,angular.isFunction(a))for(g=q.slice(0),e=0,f=g.length;f>e;e++)d=g[e],c.concat(c,n(d,a(d.scope[M],d.scope,d.element)));else{if(a%1!==0)throw new Error("applyUpdates - "+a+" is not a valid index or outside of range");0<=(h=a-H-1)&&h<q.length&&(c=n(q[a-H],b))}return l(V,c)},h.adapter&&(k=I(e,h.adapter),k||(X(e,h.adapter,{}),k=I(e,h.adapter)),angular.extend(k,j),j=k),B=function(a,b){var c,d,e,f,g;if(angular.isFunction(a))for(d=function(b){return a(b.scope)},e=0,f=q.length;f>e;e++)c=q[e],d(c);else 0<=(g=a-H-1)&&g<q.length&&(q[a-H-1].scope[M]=b);return null},z=function(a){var b,c,d,e,f,g,h,i,j,k,m,n;if(angular.isFunction(a)){for(d=[],g=0,j=q.length;j>g;g++)c=q[g],d.unshift(c);for(f=function(c){return a(c.scope)?(T(d.length-1-b,d.length-b),Q--):void 0},b=h=0,k=d.length;k>h;b=++h)e=d[b],f(e)}else 0<=(n=a-H-1)&&n<q.length&&(T(a-H-1,a-H),Q--);for(b=i=0,m=q.length;m>i;b=++i)c=q[b],c.scope.$index=H+b;return l()},A=function(a,b){var c,d,e,f,g;if(d=[],angular.isFunction(a))throw new Error("not implemented - Insert with locator function");for(0<=(g=a-H-1)&&g<q.length&&(d.push(K(a,b)),Q++),c=e=0,f=q.length;f>e;c=++e)b=q[c],b.scope.$index=H+c;return l(null,d)},E.$on("insert.item",function(a,b,c){return A(b,c)}),E.$on("update.items",function(a,b,c){return B(b,c)}),E.$on("delete.items",function(a,b){return z(b)})}}}}]),angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function(a){"use strict";function b(){if(angular.isDefined(a.pageYOffset))return a.pageYOffset;var b=document.compatMode&&"BackCompat"!==document.compatMode?document.documentElement:document.body;return b.scrollTop}return{require:"^?uiScrollfixTarget",link:function(c,d,e,f){function g(){var a=i?e.uiScrollfix:d[0].offsetTop+j,c=f?k[0].scrollTop:b();!d.hasClass("ui-scrollfix")&&c>a?(d.addClass("ui-scrollfix"),h=a):d.hasClass("ui-scrollfix")&&h>c&&d.removeClass("ui-scrollfix")}var h,i=!0,j=0,k=f&&f.$element||angular.element(a);e.uiScrollfix?"string"==typeof e.uiScrollfix&&("-"===e.uiScrollfix.charAt(0)?(i=!1,j=-parseFloat(e.uiScrollfix.substr(1))):"+"===e.uiScrollfix.charAt(0)&&(i=!1,j=parseFloat(e.uiScrollfix.substr(1)))):i=!1,h=i?e.uiScrollfix:d[0].offsetTop+j,k.on("scroll",g),c.$on("$destroy",function(){k.off("scroll",g)})}}}]).directive("uiScrollfixTarget",[function(){"use strict";return{controller:["$element",function(a){this.$element=a}]}}]),angular.module("ui.showhide",[]).directive("uiShow",[function(){"use strict";return function(a,b,c){a.$watch(c.uiShow,function(a){a?b.addClass("ui-show"):b.removeClass("ui-show")})}}]).directive("uiHide",[function(){"use strict";return function(a,b,c){a.$watch(c.uiHide,function(a){a?b.addClass("ui-hide"):b.removeClass("ui-hide")})}}]).directive("uiToggle",[function(){"use strict";return function(a,b,c){a.$watch(c.uiToggle,function(a){a?b.removeClass("ui-hide").addClass("ui-show"):b.removeClass("ui-show").addClass("ui-hide")})}}]),angular.module("ui.unique",[]).filter("unique",["$parse",function(a){"use strict";return function(b,c){if(c===!1)return b;if((c||angular.isUndefined(c))&&angular.isArray(b)){var d=[],e=angular.isString(c)?a(c):function(a){return a},f=function(a){return angular.isObject(a)?e(a):a};angular.forEach(b,function(a){for(var b=!1,c=0;c<d.length;c++)if(angular.equals(f(d[c]),f(a))){b=!0;break}b||d.push(a)}),b=d}return b}}]),angular.module("ui.uploader",[]).service("uiUploader",uiUploader),uiUploader.$inject=["$log"],angular.module("ui.validate",[]).directive("uiValidate",function(){"use strict";return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(b){return angular.isString(b)?void a.$watch(b,function(){angular.forEach(g,function(a){a(d.$modelValue)})}):angular.isArray(b)?void angular.forEach(b,function(b){a.$watch(b,function(){angular.forEach(g,function(a){a(d.$modelValue)})})}):void(angular.isObject(b)&&angular.forEach(b,function(b,c){angular.isString(b)&&a.$watch(b,function(){g[c](d.$modelValue)}),angular.isArray(b)&&angular.forEach(b,function(b){a.$watch(b,function(){g[c](d.$modelValue)})})}))}var f,g={},h=a.$eval(c.uiValidate);h&&(angular.isString(h)&&(h={validator:h}),angular.forEach(h,function(b,c){f=function(e){var f=a.$eval(b,{$value:e});return angular.isObject(f)&&angular.isFunction(f.then)?(f.then(function(){d.$setValidity(c,!0)},function(){d.$setValidity(c,!1)}),e):f?(d.$setValidity(c,!0),e):(d.$setValidity(c,!1),e)},g[c]=f,d.$formatters.push(f),d.$parsers.push(f)}),c.uiValidateWatch&&e(a.$eval(c.uiValidateWatch)))}}}),angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.include","ui.indeterminate","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.scroll","ui.scroll.jqlite","ui.showhide","ui.unique","ui.validate"]),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.transition","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("collapse",["$animate",function(a){return{link:function(b,c,d){function e(){c.removeClass("collapse").addClass("collapsing"),a.addClass(c,"in",{to:{height:c[0].scrollHeight+"px"}}).then(f)}function f(){c.removeClass("collapsing"),c.css({height:"auto"})}function g(){c.css({height:c[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing"),a.removeClass(c,"in",{to:{height:"0"}}).then(h)}function h(){c.css({height:"0"}),c.removeClass("collapsing"),c.addClass("collapse")}b.$watch(d.collapse,function(a){a?g():e()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("CarouselController",["$scope","$interval","$animate",function(a,b,c){function d(a){if(angular.isUndefined(k[a].index))return k[a];var b;k.length;for(b=0;b<k.length;++b)if(k[b].index==a)return k[b]}function e(){f();var c=+a.interval;!isNaN(c)&&c>0&&(h=b(g,c))}function f(){h&&(b.cancel(h),h=null)}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause()}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(b,d){function f(){m||(angular.extend(b,{direction:d,active:!0}),angular.extend(j.currentSlide||{},{direction:d,active:!1}),c.enabled()&&!a.noTransition&&b.$element&&(a.$currentTransition=!0,b.$element.one("$animate:close",function(){a.$currentTransition=null})),j.currentSlide=b,l=g,e())}var g=j.indexOfSlide(b);void 0===d&&(d=g>j.getCurrentIndex()?"next":"prev"),b&&b!==j.currentSlide&&f()},a.$on("$destroy",function(){m=!0}),j.getCurrentIndex=function(){return j.currentSlide&&angular.isDefined(j.currentSlide.index)?+j.currentSlide.index:l},j.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:k.indexOf(a)},a.next=function(){var b=(j.getCurrentIndex()+1)%k.length;return a.$currentTransition?void 0:j.select(d(b),"next")},a.prev=function(){var b=j.getCurrentIndex()-1<0?k.length-1:j.getCurrentIndex()-1;return a.$currentTransition?void 0:j.select(d(b),"prev")},a.isActive=function(a){return j.currentSlide===a},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){angular.isDefined(a.index)&&k.sort(function(a,b){return+a.index>+b.index});var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?b>=k.length?j.select(k[b-1]):j.select(k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$animate",function(a){return{beforeAddClass:function(b,c,d){if("active"==c&&b.parent()&&!b.parent().scope().noTransition){var e=!1,f=b.isolateScope().direction,g="next"==f?"left":"right";return b.addClass(f),a.addClass(b,g).then(function(){e||b.removeClass(g+" "+f),d()}),function(){e=!0}}d()},beforeRemoveClass:function(b,c,d){if("active"==c&&b.parent()&&!b.parent().scope().noTransition){var e=!1,f=b.isolateScope().direction,g="next"==f?"left":"right";return a.addClass(b,g).then(function(){e||b.removeClass(g),d()}),function(){e=!0}}d()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(f,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}var e=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.parsers={};var f={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a}},H:{regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a}},mm:{regex:"[0-5][0-9]",apply:function(a){this.minutes=+a}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a}},sss:{regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a}},ss:{regex:"[0-5][0-9]",apply:function(a){this.seconds=+a}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a}}};this.parse=function(b,f,g){if(!angular.isString(b)||!f)return b;f=a.DATETIME_FORMATS[f]||f,f=f.replace(e,"\\$&"),this.parsers[f]||(this.parsers[f]=c(f));var h=this.parsers[f],i=h.regex,j=h.map,k=b.match(i);if(k&&k.length){var l,m;l=g?{year:g.getFullYear(),month:g.getMonth(),date:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),milliseconds:g.getMilliseconds()}:{year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0};for(var n=1,o=k.length;o>n;n++){var p=j[n-1];p.apply&&p.apply.call(l,k[n])}return d(l.year,l.month,l.date)&&(m=new Date(l.year,l.month,l.date,l.hours,l.minutes,l.seconds,l.milliseconds||0)),m}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange","shortcutPropagation"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.maxMode=i.maxMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=a.$parent.$eval(b.initDate)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(j.$isEmpty(j.$modelValue)||j.$invalid)&&(i.activeDate=a,i.refreshView())})):this.activeDate=new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$viewValue){var a=new Date(j.$viewValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$viewValue?new Date(j.$viewValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$viewValue?new Date(j.$viewValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date),customClass:this.customClass(a)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$viewValue?new Date(j.$viewValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),i.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=(11-e.startingDay)%7,p=b.rows.length,q=0;p>q;q++)b.weekNumbers.push(h(b.rows[q][o].date))}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a,b){var c=e.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(d,1),c=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(c)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{
uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a,b){var c=e.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);e.activeDate.setMonth(c)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a,b){var c=d.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=5:"right"===a?c+=1:"down"===a?c+=5:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*d.step.years:"home"===a?c=e(d.activeDate.getFullYear()):"end"===a&&(c=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(c)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(angular.isNumber(a)&&(a=new Date(a)),a){if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=f.parse(a,o,h.date)||new Date(a);return isNaN(b)?void 0:b}return void 0}return null}function n(a,b){var c=a||b;if(angular.isNumber(c)&&(c=new Date(c)),c){if(angular.isDate(c)&&!isNaN(c))return!0;if(angular.isString(c)){var d=f.parse(c,o)||new Date(c);return!isNaN(d)}return!1}return!0}var o,p=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,q=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]};var r=!1;if(g.html5Types[j.type]?(o=g.html5Types[j.type],r=!0):(o=j.datepickerPopup||g.datepickerPopup,j.$observe("datepickerPopup",function(a,b){var c=a||g.datepickerPopup;if(c!==o&&(o=c,k.$modelValue=null,!o))throw new Error("datepickerPopup must have a date format specified.")})),!o)throw new Error("datepickerPopup must have a date format specified.");if(r&&j.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");var s=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");s.attr({"ng-model":"date","ng-change":"dateSelection()"});var t=angular.element(s.children()[0]);if(r&&"month"==j.type&&(t.attr("datepicker-mode",'"month"'),t.attr("min-mode","month")),j.datepickerOptions){var u=h.$parent.$eval(j.datepickerOptions);u.initDate&&(h.initDate=u.initDate,t.attr("init-date","initDate"),delete u.initDate),angular.forEach(u,function(a,b){t.attr(l(b),a)})}h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),t.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&t.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),j.showWeeks&&t.attr("show-weeks",j.showWeeks),j.customClass&&t.attr("custom-class","customClass({ date: date, mode: mode })"),r?k.$formatters.push(function(a){return h.date=a,a}):(k.$$parserName="date",k.$validators.date=n,k.$parsers.unshift(m),k.$formatters.push(function(a){return h.date=a,k.$isEmpty(a)?a:e(a,o)})),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a);var b=h.date?e(h.date,o):"";i.val(b),k.$setViewValue(b),p&&(h.isOpen=!1,i[0].focus())},k.$viewChangeListeners.push(function(){h.date=f.parse(k.$viewValue,o,h.date)||new Date(k.$viewValue)});var v=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},w=function(a,b){h.keydown(a)};i.bind("keydown",w),h.keydown=function(a){27===a.which?(a.preventDefault(),h.isOpen&&a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=q?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",v)):c.unbind("click",v)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(h.date)?(a=new Date(h.date),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var x=a(s)(h);s.remove(),q?c.find("body").append(x):i.after(x),h.$on("$destroy",function(){x.remove(),i.unbind("keydown",w),c.unbind("click",v)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b,c){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.bind("click",d),a.bind("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.unbind("click",d),a.unbind("keydown",e))};var d=function(a){if(c&&(!a||"disabled"!==c.getAutoClose())){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which&&(c.focusToggleElement(),d())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate","$position","$document",function(a,b,c,d,e,f,g,h){var i,j=this,k=a.$new(),l=d.openClass,m=angular.noop,n=b.onToggle?c(b.onToggle):angular.noop,o=!1;this.init=function(d){j.$element=d,b.isOpen&&(i=c(b.isOpen),m=i.assign,a.$watch(i,function(a){k.isOpen=!!a})),o=angular.isDefined(b.dropdownAppendToBody),o&&j.dropdownMenu&&(h.find("body").append(j.dropdownMenu),d.on("$destroy",function(){j.dropdownMenu.remove()}))},this.toggle=function(a){return k.isOpen=arguments.length?!!a:!k.isOpen},this.isOpen=function(){return k.isOpen},k.getToggleElement=function(){return j.toggleElement},k.getAutoClose=function(){return b.autoClose||"always"},k.getElement=function(){return j.$element},k.focusToggleElement=function(){j.toggleElement&&j.toggleElement[0].focus()},k.$watch("isOpen",function(b,c){if(o&&j.dropdownMenu){var d=g.positionElements(j.$element,j.dropdownMenu,"bottom-left",!0);j.dropdownMenu.css({top:d.top+"px",left:d.left+"px",display:b?"block":"none"})}f[b?"addClass":"removeClass"](j.$element,l),b?(k.focusToggleElement(),e.open(k)):e.close(k),m(a,b),angular.isDefined(b)&&b!==c&&n(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){k.isOpen=!1}),a.$on("$destroy",function(){k.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownMenu",function(){return{restrict:"AC",require:"?^dropdown",link:function(a,b,c,d){d&&(d.dropdownMenu=b)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){function b(b,c,d){b.animate=!1,a(function(){b.animate=!0})}return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(a,c){return a.addClass(c.backdropClass),b}}}]).directive("modalWindow",["$modalStack","$q",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},c.$isRendered=!0;var f=b.defer();e.$observe("modalRender",function(a){"true"==a&&f.resolve()}),f.promise.then(function(){c.animate=!0;var b=d[0].querySelectorAll("[autofocus]");b.length?b[0].focus():d[0].focus();var e=a.getTop();e&&a.modalRendered(e.key)})}}}]).directive("modalAnimationClass",[function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.modalAnimationClass)}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=o.keys(),c=0;c<b.length;c++)o.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=o.get(a).value;o.remove(a),j(d.modalDomEl,d.modalScope,function(){b.toggleClass(n,o.length()>0),i()})}function i(){if(l&&-1==g()){var a=m;j(l,m,function(){a=null}),l=void 0,m=void 0}}function j(c,d,f){function g(){g.done||(g.done=!0,c.remove(),d.$destroy(),f&&f())}d.animate=!1,c.attr("modal-animation")&&a.enabled()?c.one("$animate:close",function(){e.$evalAsync(g)}):b(g)}function k(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var l,m,n="modal-open",o=f.createNew(),p={};return e.$watch(g,function(a){m&&(m.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=o.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){p.dismiss(b.key,"escape key press")})))}),p.open=function(a,b){var f=c[0].activeElement;o.add(a,{deferred:b.deferred,renderDeferred:b.renderDeferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var h=c.find("body").eq(0),i=g();if(i>=0&&!l){m=e.$new(!0),m.index=i;var j=angular.element('<div modal-backdrop="modal-backdrop"></div>');j.attr("backdrop-class",b.backdropClass),b.animation&&j.attr("modal-animation","true"),l=d(j)(m),h.append(l)}var k=angular.element('<div modal-window="modal-window"></div>');k.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:o.length()-1,animate:"animate"}).html(b.content),b.animation&&k.attr("modal-animation","true");var p=d(k)(b.scope);o.top().value.modalDomEl=p,o.top().value.modalOpener=f,h.append(p),h.addClass(n)},p.close=function(a,b){var c=o.get(a);return c&&k(c,b,!0)?(c.value.deferred.resolve(b),h(a),c.value.modalOpener.focus(),!0):!c},p.dismiss=function(a,b){var c=o.get(a);return c&&k(c,b,!1)?(c.value.deferred.reject(b),h(a),c.value.modalOpener.focus(),!0):!c},p.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},p.getTop=function(){return o.top()},p.modalRendered=function(a){var b=o.get(a);b&&b.value.renderDeferred.resolve()},p}]).provider("$modal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$modalStack",function(b,c,d,e,f,g){function h(a){return a.template?d.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}function i(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var j={};return j.open=function(b){var e=d.defer(),j=d.defer(),k=d.defer(),l={result:e.promise,opened:j.promise,rendered:k.promise,close:function(a){return g.close(l,a)},dismiss:function(a){return g.dismiss(l,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var m=d.all([h(b)].concat(i(b.resolve)));return m.then(function(a){var d=(b.scope||c).$new();d.$close=l.close,d.$dismiss=l.dismiss;var h,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=l,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),h=f(b.controller,i),b.controllerAs&&(d[b.controllerAs]=h)),g.open(l,{scope:d,deferred:e,renderDeferred:k,content:a[0],animation:b.animation,backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),m.then(function(){j.resolve(!0)},function(a){j.reject(a)}),l},j}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(g,h){e=g,this.config=h,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=h.itemsPerPage,a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b,c){a.page!==b&&b>0&&b<=a.totalPages&&(c&&c.target&&c.target.blur(),e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages}}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l,m){function n(a){var b=a||m.trigger||l,d=c[b]||b;return{show:b,hide:d}}m=angular.extend({},b,d,m);var o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" '+(m.useContentExp?'content-exp="contentExp()" ':'content="'+p+"content"+q+'" ')+'placement="'+p+"placement"+q+'" popup-class="'+p+"popupClass"+q+'" animation="animation" is-open="isOpen"origin-scope="origScope" ></div>';return{restrict:"EA",compile:function(a,b){var c=f(r);return function(a,b,d,f){function j(){F.isOpen?o():l()}function l(){(!E||a.$eval(d[k+"Enable"]))&&(t(),F.popupDelay?B||(B=g(p,F.popupDelay,!1),B.then(function(a){a()})):p()())}function o(){a.$apply(function(){q()})}function p(){return B=null,A&&(g.cancel(A),A=null),(m.useContentExp?F.contentExp():F.content)?(r(),y.css({top:0,left:0,display:"block"}),F.$digest(),G(),F.isOpen=!0,F.$apply(),G):angular.noop}function q(){F.isOpen=!1,g.cancel(B),B=null,F.animation?A||(A=g(s,500)):s()}function r(){y&&s(),z=F.$new(),y=c(z,function(a){C?h.find("body").append(a):b.after(a)}),z.$watch(function(){g(G,0,!1)}),m.useContentExp&&z.$watch("contentExp()",function(a){!a&&F.isOpen&&q()})}function s(){A=null,y&&(y.remove(),y=null),z&&(z.$destroy(),z=null)}function t(){u(),v(),w()}function u(){F.popupClass=d[k+"Class"]}function v(){var a=d[k+"Placement"];F.placement=angular.isDefined(a)?a:m.placement}function w(){var a=d[k+"PopupDelay"],b=parseInt(a,10);F.popupDelay=isNaN(b)?m.popupDelay:b}function x(){var a=d[k+"Trigger"];H(),D=n(a),D.show===D.hide?b.bind(D.show,j):(b.bind(D.show,l),b.bind(D.hide,o))}var y,z,A,B,C=angular.isDefined(m.appendToBody)?m.appendToBody:!1,D=n(void 0),E=angular.isDefined(d[k+"Enable"]),F=a.$new(!0),G=function(){if(y){var a=i.positionElements(b,y,F.placement,C);a.top+="px",a.left+="px",y.css(a)}};F.origScope=a,F.isOpen=!1,F.contentExp=function(){return a.$eval(d[e])},m.useContentExp||d.$observe(e,function(a){F.content=a,!a&&F.isOpen&&q()}),d.$observe("disabled",function(a){a&&F.isOpen&&q()}),d.$observe(k+"Title",function(a){F.title=a});var H=function(){b.unbind(D.show,l),b.unbind(D.hide,o)};x();var I=a.$eval(d[k+"Animation"]);F.animation=angular.isDefined(I)?!!I:m.animation;var J=a.$eval(d[k+"AppendToBody"]);C=angular.isDefined(J)?J:C,C&&a.$on("$locationChangeSuccess",function(){F.isOpen&&q()}),a.$on("$destroy",function(){g.cancel(A),g.cancel(B),H(),s(),F=null})}}}}}]}).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.tooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("tooltipClasses",function(){return{restrict:"A",link:function(a,b,c){a.placement&&b.addClass(a.placement),a.popupClass&&b.addClass(a.popupClass),a.animation()&&b.addClass(c.tooltipAnimationClass)}}}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html"}}).directive("tooltipTemplate",["$tooltip",function(a){return a("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",function(){return{restrict:"EA",replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html"}}).directive("tooltipHtml",["$tooltip",function(a){return a("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).value("tooltipHtmlUnsafeSuppressDeprecated",!1).directive("tooltipHtmlUnsafe",["$tooltip","tooltipHtmlUnsafeSuppressDeprecated","$log",function(a,b,c){return b||c.warn("tooltip-html-unsafe is now deprecated. Use tooltip-html or tooltip-template instead."),a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverTemplatePopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html"}}).directive("popoverTemplate",["$tooltip",function(a){return a("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse","$log",function(a,b){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(c,d,e){return function(c,d,f,g){c.$watch("active",function(a){a&&g.select(c)}),c.disabled=!1,f.disable&&c.$parent.$watch(a(f.disable),function(a){c.disabled=!!a}),f.disabled&&(b.warn('Use of "disabled" attribute has been deprecated, please use "disable"'),c.$parent.$watch(a(f.disabled),function(a){c.disabled=!!a})),c.select=function(){c.disabled||(c.active=!0)},g.addTab(c),c.$on("$destroy",function(){g.removeTab(c)}),c.$transcludeFn=e}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b,c,d){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),"m"!==b&&(a.minutes=i(d)),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render,o.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g);var i=angular.isDefined(b.arrowkeys)?a.$parent.$eval(b.arrowkeys):f.arrowkeys;i&&this.setupArrowkeyEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c){b.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply())}),c.bind("keydown",function(b){38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply())})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(b){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(b){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$viewValue;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",
link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.transition",[]).value("$transitionSuppressDeprecated",!1).factory("$transition",["$q","$timeout","$rootScope","$log","$transitionSuppressDeprecated",function(a,b,c,d,e){function f(a){for(var b in a)if(void 0!==h.style[b])return a[b]}e||d.warn("$transition is now deprecated. Use $animate from ngAnimate instead.");var g=function(d,e,f){f=f||{};var h=a.defer(),i=g[f.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(e)?d.addClass(e):angular.isFunction(e)?e(d):angular.isObject(e)&&d.css(e),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},h=document.createElement("trans"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},j={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return g.transitionEndEventName=f(i),g.animationEndEventName=f(j),g}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1)},B=function(a){return y+"-option-"+a};x.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a))});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c&&c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++)b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else A();d&&q(i,!1)},function(){A(),q(i,!1)})};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a)},o)},F=function(){D&&d.cancel(D)};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return p||l.$setValidity("editable",!0),s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),l.$setValidity("parse",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(-1!=x.activeIdx||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),A(),x.$digest()))}),j.bind("blur",function(a){m=!1});var G=function(a){j[0]!==a.target&&(A(),x.$digest())};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove(),z.remove()});var H=a(z)(x);t?e.find("body").append(H):j.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"template/typeahead/typeahead-match.html";a(g).then(function(a){b(a.trim())(d,function(a){e.replaceWith(a)})})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href="javascript:void(0)" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides | orderBy:\'index\' track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}" ng-class="dt.customClass">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop"\n     modal-animation-class="fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    modal-animation-class="fade"\n	ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1, $event)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1, $event)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1, $event)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1, $event)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages, $event)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-window.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover-window.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen, fade: animation }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" tooltip-template-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),function(){"use strict";function a(a){var b=[];return angular.forEach(a.requires,function(a){-1===i.indexOf(a)&&b.push(a)}),b}function b(a){if(!angular.isString(a))return!1;try{return t(a)}catch(b){if(/No module/.test(b)||b.message.indexOf("$injector:nomod")>-1)return!1}}function c(a){try{return t(a)}catch(b){throw(/No module/.test(b)||b.message.indexOf("$injector:nomod")>-1)&&(b.message='The module "'+a+'" that you are trying to load does not exist. '+b.message),b}}function d(a,b,c,d){if(b){var e,g,h,i;for(e=0,g=b.length;g>e;e++)if(h=b[e],angular.isArray(h)){if(null!==a){if(!a.hasOwnProperty(h[0]))throw new Error("unsupported provider "+h[0]);i=a[h[0]]}var j=f(h,c);if("invoke"!==h[1])j&&angular.isDefined(i)&&i[h[1]].apply(i,h[2]);else{var l=function(a){var b=k.indexOf(c+"-"+a);(-1===b||d)&&(-1===b&&k.push(c+"-"+a),angular.isDefined(i)&&i[h[1]].apply(i,h[2]))};if(angular.isFunction(h[2][0]))l(h[2][0]);else if(angular.isArray(h[2][0]))for(var m=0,n=h[2][0].length;n>m;m++)angular.isFunction(h[2][0][m])&&l(h[2][0][m])}}}}function e(a,b,c){if(b){var f,h,j,k=[];for(f=b.length-1;f>=0;f--)if(h=b[f],"string"!=typeof h&&(h=g(h)),h&&-1===l.indexOf(h)){var n=-1===i.indexOf(h);if(j=t(h),n&&(i.push(h),e(a,j.requires,c)),j._runBlocks.length>0)for(m[h]=[];j._runBlocks.length>0;)m[h].push(j._runBlocks.shift());angular.isDefined(m[h])&&(n||c.rerun)&&(k=k.concat(m[h])),d(a,j._invokeQueue,h,c.reconfig),d(a,j._configBlocks,h,c.reconfig),o(n?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",h),b.pop(),l.push(h)}var p=a.getInstanceInjector();angular.forEach(k,function(a){p.invoke(a)})}}function f(a,b){var c=a[2][0],d=a[1],e=!1;angular.isUndefined(j[b])&&(j[b]={}),angular.isUndefined(j[b][d])&&(j[b][d]={});var f=function(a,c){e=!0,j[b][d][a].push(c),o("ocLazyLoad.componentLoaded",[b,d,a])},g=function(a){return angular.isArray(a)?u(a.toString()):angular.isObject(a)?u(v(a)):angular.isDefined(a)&&null!==a?u(a.toString()):a};if(angular.isString(c))angular.isUndefined(j[b][d][c])&&(j[b][d][c]=[]),-1===j[b][d][c].indexOf(g(a[2][1]))&&f(c,g(a[2][1]));else{if(!angular.isObject(c))return!1;angular.forEach(c,function(a){angular.isString(a)&&(angular.isUndefined(j[b][d][a])&&(j[b][d][a]=[]),-1===j[b][d][a].indexOf(g(c[1]))&&f(a,g(c[1])))})}return e}function g(a){var b=null;return angular.isString(a)?b=a:angular.isObject(a)&&a.hasOwnProperty("name")&&angular.isString(a.name)&&(b=a.name),b}function h(a){if(0===p.length){var b=[a],c=["ng:app","ng-app","x-ng-app","data-ng-app"],e=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,f=function(a){return a&&b.push(a)};angular.forEach(c,function(b){c[b]=!0,f(document.getElementById(b)),b=b.replace(":","\\:"),a[0].querySelectorAll&&(angular.forEach(a[0].querySelectorAll("."+b),f),angular.forEach(a[0].querySelectorAll("."+b+"\\:"),f),angular.forEach(a[0].querySelectorAll("["+b+"]"),f))}),angular.forEach(b,function(b){if(0===p.length){var d=" "+a.className+" ",f=e.exec(d);f?p.push((f[2]||"").replace(/\s+/g,",")):angular.forEach(b.attributes,function(a){0===p.length&&c[a.name]&&p.push(a.value)})}})}0!==p.length||(window.jasmine||window.mocha)&&angular.isDefined(angular.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");var g=function h(a){if(-1===i.indexOf(a)){i.push(a);var b=angular.module(a);d(null,b._invokeQueue,a),d(null,b._configBlocks,a),angular.forEach(b.requires,h)}};angular.forEach(p,function(a){g(a)}),p=[],q.pop()}var i=["ng"],j={},k=[],l=[],m={},n=angular.module("oc.lazyLoad",["ng"]),o=angular.noop,p=[],q=[!0];n.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(d,f,j,k,m,n){var r,t,u,v={},w={$controllerProvider:d,$compileProvider:j,$filterProvider:k,$provide:f,$injector:m,$animateProvider:n},x=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0],y=!1,z=!1;h(angular.element(window.document)),this.$get=["$log","$q","$templateCache","$http","$rootElement","$rootScope","$cacheFactory","$interval",function(d,f,h,j,k,m,n,A){var B,C=n("ocLazyLoad"),D=!1,E=!1;y||(d={},d.error=angular.noop,d.warn=angular.noop,d.info=angular.noop),w.getInstanceInjector=function(){return B?B:B=k.data("$injector")||angular.injector()},o=function(a,b){z&&m.$broadcast(a,b),y&&d.info(a,b)};var F=function(a,b,c){var d,e,g=f.defer(),h=function(a){var b=(new Date).getTime();return a.indexOf("?")>=0?"&"===a.substring(0,a.length-1)?a+"_dc="+b:a+"&_dc="+b:a+"?_dc="+b};switch(angular.isUndefined(C.get(b))&&C.put(b,g.promise),a){case"css":d=document.createElement("link"),d.type="text/css",d.rel="stylesheet",d.href=c.cache===!1?h(b):b;break;case"js":d=document.createElement("script"),d.src=c.cache===!1?h(b):b;break;default:g.reject(new Error('Requested type "'+a+'" is not known. Could not inject "'+b+'"'))}d.onload=d.onreadystatechange=function(a){d.readyState&&!/^c|loade/.test(d.readyState)||e||(d.onload=d.onreadystatechange=null,e=1,o("ocLazyLoad.fileLoaded",b),g.resolve())},d.onerror=function(){g.reject(new Error("Unable to load "+b))},d.async=c.serie?0:1;var i=x.lastChild;if(c.insertBefore){var j=angular.element(c.insertBefore);j&&j.length>0&&(i=j[0])}if(x.insertBefore(d,i),"css"==a){if(!D){var k=navigator.userAgent.toLowerCase();if(/iP(hone|od|ad)/.test(navigator.platform)){var l=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),m=parseFloat([parseInt(l[1],10),parseInt(l[2],10),parseInt(l[3]||0,10)].join("."));E=6>m}else if(k.indexOf("android")>-1){var n=parseFloat(k.slice(k.indexOf("android")+8));E=4.4>n}else if(k.indexOf("safari")>-1&&-1==k.indexOf("chrome")){var p=parseFloat(k.match(/version\/([\.\d]+)/i)[1]);E=6>p}}if(E)var q=1e3,r=A(function(){try{d.sheet.cssRules,A.cancel(r),d.onload()}catch(a){--q<=0&&d.onerror()}},20)}return g.promise};angular.isUndefined(r)&&(r=function(a,b,c){var d=[];angular.forEach(a,function(a){d.push(F("js",a,c))}),f.all(d).then(function(){b()},function(a){b(a)})},r.ocLazyLoadLoader=!0),angular.isUndefined(t)&&(t=function(a,b,c){var d=[];angular.forEach(a,function(a){d.push(F("css",a,c))}),f.all(d).then(function(){b()},function(a){b(a)})},t.ocLazyLoadLoader=!0),angular.isUndefined(u)&&(u=function(a,b,c){var d=[];return angular.forEach(a,function(a){var b=f.defer();d.push(b.promise),j.get(a,c).success(function(c){angular.isString(c)&&c.length>0&&angular.forEach(angular.element(c),function(a){"SCRIPT"===a.nodeName&&"text/ng-template"===a.type&&h.put(a.id,a.innerHTML)}),angular.isUndefined(C.get(a))&&C.put(a,!0),b.resolve()}).error(function(c){b.reject(new Error('Unable to load template file "'+a+'": '+c))})}),f.all(d).then(function(){b()},function(a){b(a)})},u.ocLazyLoadLoader=!0);var G=function H(a,b){var c=[],e=[],g=[],h=[],i=null;q.push(!0),angular.extend(b||{},a);var j=function(a){var f,j=null;if("object"==typeof a&&(j=a.type,a=a.path),i=C.get(a),angular.isUndefined(i)||b.cache===!1){if(null!==(f=/^(css|less|html|htm|js)?(?=!)/.exec(a))&&(j=f[1],a=a.substr(f[1].length+1,a.length)),!j)if(null!==(f=/[.](css|less|html|htm|js)?(\?.*)?$/.exec(a)))j=f[1];else{if(r.hasOwnProperty("ocLazyLoadLoader")||!r.hasOwnProperty("load"))return void d.error("File type could not be determined. "+a);j="js"}"css"!==j&&"less"!==j||-1!==c.indexOf(a)?"html"!==j&&"htm"!==j||-1!==e.indexOf(a)?"js"===j||-1===g.indexOf(a)?g.push(a):d.error("File type is not valid. "+a):e.push(a):c.push(a)}else i&&h.push(i)};if(b.serie?j(b.files.shift()):angular.forEach(b.files,function(a){j(a)}),c.length>0){var k=f.defer();t(c,function(a){angular.isDefined(a)&&t.hasOwnProperty("ocLazyLoadLoader")?(d.error(a),k.reject(a)):k.resolve()},b),h.push(k.promise)}if(e.length>0){var l=f.defer();u(e,function(a){angular.isDefined(a)&&u.hasOwnProperty("ocLazyLoadLoader")?(d.error(a),l.reject(a)):l.resolve()},b),h.push(l.promise)}if(g.length>0){var m=f.defer();r(g,function(a){angular.isDefined(a)&&r.hasOwnProperty("ocLazyLoadLoader")?(d.error(a),m.reject(a)):m.resolve();
},b),h.push(m.promise)}return b.serie&&b.files.length>0?f.all(h).then(function(){return H(a,b)}):f.all(h)["finally"](function(a){return q.pop(),a})};return{getModuleConfig:function(a){if(!angular.isString(a))throw new Error("You need to give the name of the module to get");return v[a]?v[a]:null},setModuleConfig:function(a){if(!angular.isObject(a))throw new Error("You need to give the module config object to set");return v[a.name]=a,a},getModules:function(){return i},isLoaded:function(a){var c=function(a){var c=i.indexOf(a)>-1;return c||(c=!!b(a)),c};if(angular.isString(a)&&(a=[a]),angular.isArray(a)){var d,e;for(d=0,e=a.length;e>d;d++)if(!c(a[d]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},load:function(h,i){var j,k=this,m=null,n=[],o=[],r=f.defer();if(angular.isUndefined(i)&&(i={}),angular.isArray(h))return angular.forEach(h,function(a){a&&o.push(k.load(a,i))}),f.all(o).then(function(){r.resolve(h)},function(a){r.reject(a)}),r.promise;if("string"==typeof h?(m=k.getModuleConfig(h),m||(m={files:[h]})):"object"==typeof h&&(m=angular.isDefined(h.path)&&angular.isDefined(h.type)?{files:[h]}:k.setModuleConfig(h)),null===m){var t=g(h);return j='Module "'+(t||"unknown")+'" is not configured, cannot load.',d.error(j),r.reject(new Error(j)),r.promise}angular.isDefined(m.template)&&(angular.isUndefined(m.files)&&(m.files=[]),angular.isString(m.template)?m.files.push(m.template):angular.isArray(m.template)&&m.files.concat(m.template)),n.push=function(a){-1===this.indexOf(a)&&Array.prototype.push.apply(this,arguments)};var u={};angular.extend(u,i,m);var v=function x(e){var h,i,j,l,m=[];if(h=g(e),null===h)return f.when();try{i=c(h)}catch(o){var p=f.defer();return d.error(o.message),p.reject(o),p.promise}return j=a(i),angular.forEach(j,function(a){if("string"==typeof a){var c=k.getModuleConfig(a);if(null===c)return void n.push(a);a=c}return b(a.name)?void("string"!=typeof e&&(l=a.files.filter(function(b){return k.getModuleConfig(a.name).files.indexOf(b)<0}),0!==l.length&&d.warn('Module "',h,'" attempted to redefine configuration for dependency. "',a.name,'"\n Additional Files Loaded:',l),m.push(G(a.files,u).then(function(){return x(a)})))):(angular.isArray(a)?a={files:a}:"object"==typeof a&&a.hasOwnProperty("name")&&a.name&&(k.setModuleConfig(a),n.push(a.name)),void(a.hasOwnProperty("files")&&0!==a.files.length&&a.files&&m.push(G(a,u).then(function(){return x(a)}))))}),f.all(m)};return angular.isUndefined(m.files)&&angular.isDefined(m.name)&&b(m.name)&&(q.push(!0),s(m.name),q.pop()),G(m,u).then(function(){if(0===p.length)r.resolve(h);else{var a=function b(a){n.push(a),v(a).then(function(){try{l=[],e(w,n,u)}catch(a){return d.error(a.message),void r.reject(a)}p.length>0?b(p.shift()):r.resolve(h)},function(a){r.reject(a)})};a(p.shift())}},function(a){r.reject(a)}),r.promise}}}],this.config=function(a){if(angular.isDefined(a.jsLoader)||angular.isDefined(a.asyncLoader)){if(!angular.isFunction(a.jsLoader||a.asyncLoader))throw"The js loader needs to be a function";r=a.jsLoader||a.asyncLoader}if(angular.isDefined(a.cssLoader)){if(!angular.isFunction(a.cssLoader))throw"The css loader needs to be a function";t=a.cssLoader}if(angular.isDefined(a.templatesLoader)){if(!angular.isFunction(a.templatesLoader))throw"The template loader needs to be a function";u=a.templatesLoader}angular.isDefined(a.modules)&&(angular.isArray(a.modules)?angular.forEach(a.modules,function(a){v[a.name]=a}):v[a.modules.name]=a.modules),angular.isDefined(a.debug)&&(y=a.debug),angular.isDefined(a.events)&&(z=a.events)}}]),n.directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse",function(a,b,c,d){return{restrict:"A",terminal:!0,priority:1e3,compile:function(e,f){var g=e[0].innerHTML;return e.html(""),function(e,f,h){var i=d(h.ocLazyLoad);e.$watch(function(){return i(e)||h.ocLazyLoad},function(d){angular.isDefined(d)&&a.load(d).then(function(a){c.enter(b(g)(e),null,f)})},!0)}}}}]);var r=angular.bootstrap;angular.bootstrap=function(a,b,c){return angular.forEach(b.slice(),function(a){s(a)}),r(a,b,c)};var s=function(a){q.length>0&&angular.isString(a)&&-1===p.indexOf(a)&&p.push(a)},t=angular.module;angular.module=function(a,b,c){return s(a),t(a,b,c)};var u=function(a){var b,c,d,e=0;if(0==a.length)return e;for(b=0,d=a.length;d>b;b++)c=a.charCodeAt(b),e=(e<<5)-e+c,e|=0;return e},v=function(a){var b=[];return JSON.stringify(a,function(a,c){if("object"==typeof c&&null!==c){if(-1!==b.indexOf(c))return;b.push(c)}return c})};Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1})}(),function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a){"use strict";var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};d.displayName="fallbackFromIncorrectStorageValue",c?c.get(b)?a.use(c.get(b))["catch"](d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}function b(){"use strict";var a,b,c=null,d=!1,e=!1;b={sanitize:function(a,b){return"text"===b&&(a=g(a)),a},escape:function(a,b){return"text"===b&&(a=f(a)),a},sanitizeParameters:function(a,b){return"params"===b&&(a=h(a,g)),a},escapeParameters:function(a,b){return"params"===b&&(a=h(a,f)),a}},b.escaped=b.escapeParameters,this.addStrategy=function(a,c){return b[a]=c,this},this.removeStrategy=function(a){return delete b[a],this},this.useStrategy=function(a){return d=!0,c=a,this},this.$get=["$injector","$log",function(f,g){var h=function(a,c,d){return angular.forEach(d,function(d){if(angular.isFunction(d))a=d(a,c);else{if(!angular.isFunction(b[d]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+d+"'");a=b[d](a,c)}}),a},i=function(){d||e||(g.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),e=!0)};return f.has("$sanitize")&&(a=f.get("$sanitize")),{useStrategy:function(a){return function(b){a.useStrategy(b)}}(this),sanitize:function(a,b,d){if(c||i(),arguments.length<3&&(d=c),!d)return a;var e=angular.isArray(d)?d:[d];return h(a,b,e)}}}];var f=function(a){var b=angular.element("<div></div>");return b.text(a),b.html()},g=function(b){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return a(b)},h=function(a,b){if(angular.isObject(a)){var c=angular.isArray(a)?[]:{};return angular.forEach(a,function(a,d){c[d]=h(a,b)}),c}return angular.isNumber(a)?a:b(a)}}function c(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={},u=[],v=a,w=[],x="translate-cloak",y=!1,z=!1,A=".",B=0,C=!0,D="default",E={"default":function(a){return(a||"").split("-").join("_")},java:function(a){var b=(a||"").split("-").join("_"),c=b.split("_");return c.length>1?c[0].toLowerCase()+"_"+c[1].toUpperCase():b},bcp47:function(a){var b=(a||"").split("_").join("-"),c=b.split("-");return c.length>1?c[0].toLowerCase()+"-"+c[1].toUpperCase():b}},F="2.7.2",G=function(){if(angular.isFunction(d.getLocale))return d.getLocale();var a,c,e=b.$get().navigator,f=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(e.languages))for(a=0;a<e.languages.length;a++)if(c=e.languages[a],c&&c.length)return c;for(a=0;a<f.length;a++)if(c=e[f[a]],c&&c.length)return c;return null};G.displayName="angular-translate/service: getFirstBrowserLanguage";var H=function(){var a=G()||"";return E[D]&&(a=E[D](a)),a};H.displayName="angular-translate/service: getLocale";var I=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},J=function(){return this.toString().replace(/^\s+|\s+$/g,"")},K=function(a){for(var b=[],c=angular.lowercase(a),d=0,e=u.length;e>d;d++)b.push(angular.lowercase(u[d]));if(I(b,c)>-1)return a;if(f){var g;for(var h in f){var i=!1,j=Object.prototype.hasOwnProperty.call(f,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=f[h],I(b,angular.lowercase(g))>-1))return g}}if(a){var k=a.split("_");if(k.length>1&&I(b,angular.lowercase(k[0]))>-1)return k[0]}return a},L=function(a,b){if(!a&&!b)return t;if(a&&!b){if(angular.isString(a))return t[a]}else angular.isObject(t[a])||(t[a]={}),angular.extend(t[a],M(b));return this};this.translations=L,this.cloakClassName=function(a){return a?(x=a,this):x};var M=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?M(h,b.concat(e),c,e):(f=b.length?""+b.join(A)+A+e:e,b.length&&e===d&&(g=""+b.join(A),c[g]="@:"+f),c[f]=h));return c};M.displayName="flatObject",this.addInterpolation=function(a){return w.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return n=a,this},this.useSanitizeValueStrategy=function(a){return c.useStrategy(a),this},this.preferredLanguage=function(a){return N(a),this};var N=function(a){return a&&(e=a),e};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(q=a,this):q},this.translationNotFoundIndicatorRight=function(a){return a?(r=a,this):r},this.fallbackLanguage=function(a){return O(a),this};var O=function(a){return a?(angular.isString(a)?(h=!0,g=[a]):angular.isArray(a)&&(h=!1,g=a),angular.isString(e)&&I(g,e)<0&&g.push(e),this):h?g[0]:g};this.use=function(a){if(a){if(!t[a]&&!o)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return i=a,this}return i};var P=function(a){return a?(v=a,this):l?l+v:v};this.storageKey=P,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return o=a,p=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return k=a,this},this.storagePrefix=function(a){return a?(l=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return m=a,this},this.usePostCompiling=function(a){return y=!!a,this},this.forceAsyncReload=function(a){return z=!!a,this},this.uniformLanguageTag=function(a){return a?angular.isString(a)&&(a={standard:a}):a={},D=a.standard,this},this.determinePreferredLanguage=function(a){var b=a&&angular.isFunction(a)?a():H();return e=u.length?K(b):b,this},this.registerAvailableLanguageKeys=function(a,b){return a?(u=a,b&&(f=b),this):u},this.useLoaderCache=function(a){return a===!1?s=void 0:a===!0?s=!0:"undefined"==typeof a?s="$translationCache":a&&(s=a),this},this.directivePriority=function(a){return void 0===a?B:(B=a,this)},this.statefulFilter=function(a){return void 0===a?C:(C=a,this)},this.$get=["$log","$injector","$rootScope","$q",function(a,b,c,d){var f,l,u,A=b.get(n||"$translateDefaultInterpolation"),D=!1,E={},G={},H=function(a,b,c,h){if(angular.isArray(a)){var j=function(a){for(var e={},f=[],g=function(a){var f=d.defer(),g=function(b){e[a]=b,f.resolve([a,b])};return H(a,b,c,h).then(g,g),f.promise},i=0,j=a.length;j>i;i++)f.push(g(a[i]));return d.all(f).then(function(){return e})};return j(a)}var m=d.defer();a&&(a=J.apply(a));var n=function(){var a=e?G[e]:G[i];if(l=0,k&&!a){var b=f.get(v);if(a=G[b],g&&g.length){var c=I(g,b);l=0===c?1:0,I(g,e)<0&&g.push(e)}}return a}();if(n){var o=function(){aa(a,b,c,h).then(m.resolve,m.reject)};o.displayName="promiseResolved",n["finally"](o,m.reject)}else aa(a,b,c,h).then(m.resolve,m.reject);return m.promise},Q=function(a){return q&&(a=[q,a].join(" ")),r&&(a=[a,r].join(" ")),a},R=function(a){i=a,c.$emit("$translateChangeSuccess",{language:a}),k&&f.put(H.storageKey(),i),A.setLocale(i);var b=function(a,b){E[b].setLocale(i)};b.displayName="eachInterpolatorLocaleSetter",angular.forEach(E,b),c.$emit("$translateChangeEnd",{language:a})},S=function(a){if(!a)throw"No language key specified for loading.";var e=d.defer();c.$emit("$translateLoadingStart",{language:a}),D=!0;var f=s;"string"==typeof f&&(f=b.get(f));var g=angular.extend({},p,{key:a,$http:angular.extend({},{cache:f},p.$http)}),h=function(b){var d={};c.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(b)?angular.forEach(b,function(a){angular.extend(d,M(a))}):angular.extend(d,M(b)),D=!1,e.resolve({key:a,table:d}),c.$emit("$translateLoadingEnd",{language:a})};h.displayName="onLoaderSuccess";var i=function(a){c.$emit("$translateLoadingError",{language:a}),e.reject(a),c.$emit("$translateLoadingEnd",{language:a})};return i.displayName="onLoaderError",b.get(o)(g).then(h,i),e.promise};if(k&&(f=b.get(k),!f.get||!f.put))throw new Error("Couldn't use storage '"+k+"', missing get() or put() method!");if(w.length){var T=function(a){var c=b.get(a);c.setLocale(e||i),E[c.getInterpolationIdentifier()]=c};T.displayName="interpolationFactoryAdder",angular.forEach(w,T)}var U=function(a){var b=d.defer();if(Object.prototype.hasOwnProperty.call(t,a))b.resolve(t[a]);else if(G[a]){var c=function(a){L(a.key,a.table),b.resolve(a.table)};c.displayName="translationTableResolver",G[a].then(c,b.reject)}else b.reject();return b.promise},V=function(a,b,c,e){var f=d.defer(),g=function(d){if(Object.prototype.hasOwnProperty.call(d,b)){e.setLocale(a);var g=d[b];"@:"===g.substr(0,2)?V(a,g.substr(2),c,e).then(f.resolve,f.reject):f.resolve(e.interpolate(d[b],c)),e.setLocale(i)}else f.reject()};return g.displayName="fallbackTranslationResolver",U(a).then(g,f.reject),f.promise},W=function(a,b,c,d){var e,f=t[a];if(f&&Object.prototype.hasOwnProperty.call(f,b)){if(d.setLocale(a),e=d.interpolate(f[b],c),"@:"===e.substr(0,2))return W(a,e.substr(2),c,d);d.setLocale(i)}return e},X=function(a,c){if(m){var d=b.get(m)(a,i,c);return void 0!==d?d:a}return a},Y=function(a,b,c,e,f){var h=d.defer();if(a<g.length){var i=g[a];V(i,b,c,e).then(h.resolve,function(){Y(a+1,b,c,e,f).then(h.resolve)})}else f?h.resolve(f):h.resolve(X(b,c));return h.promise},Z=function(a,b,c,d){var e;if(a<g.length){var f=g[a];e=W(f,b,c,d),e||(e=Z(a+1,b,c,d))}return e},$=function(a,b,c,d){return Y(u>0?u:l,a,b,c,d)},_=function(a,b,c){return Z(u>0?u:l,a,b,c)},aa=function(a,b,c,e){var f=d.defer(),h=i?t[i]:t,j=c?E[c]:A;if(h&&Object.prototype.hasOwnProperty.call(h,a)){var k=h[a];"@:"===k.substr(0,2)?H(k.substr(2),b,c,e).then(f.resolve,f.reject):f.resolve(j.interpolate(k,b))}else{var l;m&&!D&&(l=X(a,b)),i&&g&&g.length?$(a,b,j,e).then(function(a){f.resolve(a)},function(a){f.reject(Q(a))}):m&&!D&&l?e?f.resolve(e):f.resolve(l):e?f.resolve(e):f.reject(Q(a))}return f.promise},ba=function(a,b,c){var d,e=i?t[i]:t,f=A;if(E&&Object.prototype.hasOwnProperty.call(E,c)&&(f=E[c]),e&&Object.prototype.hasOwnProperty.call(e,a)){var h=e[a];d="@:"===h.substr(0,2)?ba(h.substr(2),b,c):f.interpolate(h,b)}else{var j;m&&!D&&(j=X(a,b)),i&&g&&g.length?(l=0,d=_(a,b,f)):d=m&&!D&&j?j:Q(a)}return d},ca=function(a){j===a&&(j=void 0),G[a]=void 0};if(H.preferredLanguage=function(a){return a&&N(a),e},H.cloakClassName=function(){return x},H.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(O(a),o&&g&&g.length)for(var b=0,c=g.length;c>b;b++)G[g[b]]||(G[g[b]]=S(g[b]));H.use(H.use())}return h?g[0]:g},H.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=I(g,a);b>-1&&(u=b)}else u=0},H.proposedLanguage=function(){return j},H.storage=function(){return f},H.use=function(a){if(!a)return i;var b=d.defer();c.$emit("$translateChangeStart",{language:a});var e=K(a);return e&&(a=e),!z&&t[a]||!o||G[a]?j===a&&G[a]?G[a].then(function(a){return b.resolve(a.key),a},function(a){return b.reject(a),d.reject(a)}):(b.resolve(a),R(a)):(j=a,G[a]=S(a).then(function(a){return L(a.key,a.table),b.resolve(a.key),R(a.key),a},function(a){return c.$emit("$translateChangeError",{language:a}),b.reject(a),c.$emit("$translateChangeEnd",{language:a}),d.reject(a)}),G[a]["finally"](function(){ca(a)})),b.promise},H.storageKey=function(){return P()},H.isPostCompilingEnabled=function(){return y},H.isForceAsyncReloadEnabled=function(){return z},H.refresh=function(a){function b(){f.resolve(),c.$emit("$translateRefreshEnd",{language:a})}function e(){f.reject(),c.$emit("$translateRefreshEnd",{language:a})}if(!o)throw new Error("Couldn't refresh translation table, no loader registered!");var f=d.defer();if(c.$emit("$translateRefreshStart",{language:a}),a)if(t[a]){var h=function(c){L(c.key,c.table),a===i&&R(i),b()};h.displayName="refreshPostProcessor",S(a).then(h,e)}else e();else{var j=[],k={};if(g&&g.length)for(var l=0,m=g.length;m>l;l++)j.push(S(g[l])),k[g[l]]=!0;i&&!k[i]&&j.push(S(i));var n=function(a){t={},angular.forEach(a,function(a){L(a.key,a.table)}),i&&R(i),b()};n.displayName="refreshPostProcessor",d.all(j).then(n,e)}return f.promise},H.instant=function(a,b,c){if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var d={},f=0,h=a.length;h>f;f++)d[a[f]]=H.instant(a[f],b,c);return d}if(angular.isString(a)&&a.length<1)return a;a&&(a=J.apply(a));var j,k=[];e&&k.push(e),i&&k.push(i),g&&g.length&&(k=k.concat(g));for(var l=0,n=k.length;n>l;l++){var o=k[l];if(t[o]&&("undefined"!=typeof t[o][a]?j=ba(a,b,c):(q||r)&&(j=Q(a))),"undefined"!=typeof j)break}return j||""===j||(j=A.interpolate(a,b),m&&!D&&(j=X(a,b))),j},H.versionInfo=function(){return F},H.loaderCache=function(){return s},H.directivePriority=function(){return B},H.statefulFilter=function(){return C},o&&(angular.equals(t,{})&&H.use(H.use()),g&&g.length))for(var da=function(a){return L(a.key,a.table),c.$emit("$translateChangeEnd",{language:a.key}),a},ea=0,fa=g.length;fa>ea;ea++){var ga=g[ea];(z||!t[ga])&&(G[ga]=S(ga).then(da))}return H}]}function d(a,b){"use strict";var c,d={},e="default";return d.setLocale=function(a){c=a},d.getInterpolationIdentifier=function(){return e},d.useSanitizeValueStrategy=function(a){return b.useStrategy(a),this},d.interpolate=function(c,d){d=d||{},d=b.sanitize(d,"params");var e=a(c)(d);return e=b.sanitize(e,"text")},d}function e(a,b,c,d,e,f){"use strict";var g=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:a.directivePriority(),compile:function(b,h){var i=h.translateValues?h.translateValues:void 0,j=h.translateInterpolation?h.translateInterpolation:void 0,k=b[0].outerHTML.match(/translate-value-+/i),l="^(.*)("+c.startSymbol()+".*"+c.endSymbol()+")(.*)",m="^(.*)"+c.startSymbol()+"(.*)"+c.endSymbol()+"(.*)";return function(b,n,o){b.interpolateParams={},b.preText="",b.postText="";var p={},q=function(a,c,d){if(c.translateValues&&angular.extend(a,e(c.translateValues)(b.$parent)),k)for(var f in d)if(Object.prototype.hasOwnProperty.call(c,f)&&"translateValue"===f.substr(0,14)&&"translateValues"!==f){var g=angular.lowercase(f.substr(14,1))+f.substr(15);a[g]=d[f]}},r=function(a){if(angular.isFunction(r._unwatchOld)&&(r._unwatchOld(),r._unwatchOld=void 0),angular.equals(a,"")||!angular.isDefined(a)){var d=g.apply(n.text()).match(l);if(angular.isArray(d)){b.preText=d[1],b.postText=d[3],p.translate=c(d[2])(b.$parent);var e=n.text().match(m);angular.isArray(e)&&e[2]&&e[2].length&&(r._unwatchOld=b.$watch(e[2],function(a){p.translate=a,x()}))}else p.translate=n.text().replace(/^\s+|\s+$/g,"")}else p.translate=a;x()},s=function(a){o.$observe(a,function(b){p[a]=b,x()})};q(b.interpolateParams,o,h);var t=!0;o.$observe("translate",function(a){"undefined"==typeof a?r(""):""===a&&t||(p.translate=a,x()),t=!1});for(var u in o)o.hasOwnProperty(u)&&"translateAttr"===u.substr(0,13)&&s(u);if(o.$observe("translateDefault",function(a){b.defaultText=a}),i&&o.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),k){var v=function(a){o.$observe(a,function(c){var d=angular.lowercase(a.substr(14,1))+a.substr(15);b.interpolateParams[d]=c})};for(var w in o)Object.prototype.hasOwnProperty.call(o,w)&&"translateValue"===w.substr(0,14)&&"translateValues"!==w&&v(w)}var x=function(){for(var a in p)p.hasOwnProperty(a)&&void 0!==p[a]&&y(a,p[a],b,b.interpolateParams,b.defaultText)},y=function(b,c,d,e,f){c?a(c,e,j,f).then(function(a){z(a,d,!0,b)},function(a){z(a,d,!1,b)}):z(c,d,!1,b)},z=function(b,c,e,f){if("translate"===f){e||"undefined"==typeof c.defaultText||(b=c.defaultText),n.html(c.preText+b+c.postText);var g=a.isPostCompilingEnabled(),i="undefined"!=typeof h.translateCompile,j=i&&"false"!==h.translateCompile;(g&&!i||j)&&d(n.contents())(c)}else{e||"undefined"==typeof c.defaultText||(b=c.defaultText);var k=o.$attr[f];"data-"===k.substr(0,5)&&(k=k.substr(5)),k=k.substr(15),n.attr(k,b)}};(i||k||o.translateDefault)&&b.$watch("interpolateParams",x,!0);var A=f.$on("$translateChangeSuccess",x);n.text().length?r(o.translate?o.translate:""):o.translate&&r(o.translate),x(),b.$on("$destroy",A)}}}}function f(a,b){"use strict";return{compile:function(c){var d=function(){c.addClass(b.cloakClassName())},e=function(){c.removeClass(b.cloakClassName())},f=a.$on("$translateChangeEnd",function(){e(),f(),f=null});return d(),function(a,c,f){f.translateCloak&&f.translateCloak.length&&f.$observe("translateCloak",function(a){b(a).then(e,d)})}}}}function g(a,b){"use strict";var c=function(c,d,e){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e)};return b.statefulFilter()&&(c.$stateful=!0),c}function h(a){"use strict";return a("translations")}return angular.module("pascalprecht.translate",["ng"]).run(a),a.$inject=["$translate"],a.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",b),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",c),c.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],c.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",d),d.$inject=["$interpolate","$translateSanitization"],d.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",e),e.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],e.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",f),f.$inject=["$rootScope","$translate"],f.displayName="translateCloakDirective",angular.module("pascalprecht.translate").filter("translate",g),g.$inject=["$parse","$translate"],g.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",h),h.$inject=["$cacheFactory"],h.displayName="$translationCache","pascalprecht.translate"}),function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a,b){"use strict";return function(c){if(!(c&&(angular.isArray(c.files)||angular.isString(c.prefix)&&angular.isString(c.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");c.files||(c.files=[{prefix:c.prefix,suffix:c.suffix}]);for(var d=function(d){if(!d||!angular.isString(d.prefix)||!angular.isString(d.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var e=a.defer();return b(angular.extend({url:[d.prefix,c.key,d.suffix].join(""),method:"GET",params:""},c.$http)).success(function(a){e.resolve(a)}).error(function(){e.reject(c.key)}),e.promise},e=a.defer(),f=[],g=c.files.length,h=0;g>h;h++)f.push(d({prefix:c.files[h].prefix,key:c.key,suffix:c.files[h].suffix}));return a.all(f).then(function(a){for(var b=a.length,c={},d=0;b>d;d++)for(var f in a[d])c[f]=a[d][f];e.resolve(c)},function(a){e.reject(a)}),e.promise}}return angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",a),a.$inject=["$q","$http"],a.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a){"use strict";var b={get:function(b){return a.get(b)},set:function(b,c){a.put(b,c)},put:function(b,c){a.put(b,c)}};return b}return angular.module("pascalprecht.translate").factory("$translateCookieStorage",a),a.$inject=["$cookieStore"],a.displayName="$translateCookieStorage","pascalprecht.translate"}),function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a,b){"use strict";var c=function(){var b;return{get:function(c){return b||(b=a.localStorage.getItem(c)),b},set:function(c,d){b=d,a.localStorage.setItem(c,d)},put:function(c,d){b=d,a.localStorage.setItem(c,d)}}}(),d="localStorage"in a;if(d){var e="pascalprecht.translate.storageTest";try{null!==a.localStorage?(a.localStorage.setItem(e,"foo"),a.localStorage.removeItem(e),d=!0):d=!1}catch(f){d=!1}}var g=d?c:b;return g}return angular.module("pascalprecht.translate").factory("$translateLocalStorage",a),a.$inject=["$window","$translateCookieStorage"],a.displayName="$translateLocalStorageFactory","pascalprecht.translate"}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Dc.apply(null,arguments)}function b(a){Dc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return za(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(NaN);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Fc.length>0)for(c in Fc)d=Fc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(+b._d),Gc===!1&&(Gc=!0,a.updateOffset(this),Gc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function q(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&p(a[d])!==p(b[d]))&&g++;return g+f}function r(){}function s(a){return a?a.toLowerCase().replace("_","-"):a}function t(a){for(var b,c,d,e,f=0;f<a.length;){for(e=s(a[f]).split("-"),b=e.length,c=s(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=u(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&q(e,c,!0)>=b-1)break;b--}f++}return null}function u(a){var b=null;if(!Hc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ec._abbr,require("./locale/"+a),v(b)}catch(c){}return Hc[a]}function v(a,b){var c;return a&&(c="undefined"==typeof b?x(a):w(a,b),c&&(Ec=c)),Ec._abbr}function w(a,b){return null!==b?(b.abbr=a,Hc[a]||(Hc[a]=new r),Hc[a].set(b),v(a),Hc[a]):(delete Hc[a],null)}function x(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ec;if(!c(a)){if(b=u(a))return b;a=[a]}return t(a)}function y(a,b){var c=a.toLowerCase();Ic[c]=Ic[c+"s"]=Ic[b]=a}function z(a){return"string"==typeof a?Ic[a]||Ic[a.toLowerCase()]:void 0}function A(a){var b,c,d={};for(c in a)f(a,c)&&(b=z(c),b&&(d[b]=a[c]));return d}function B(b,c){return function(d){return null!=d?(D(this,b,d),a.updateOffset(this,c),this):C(this,b)}}function C(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function D(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function E(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=z(a),"function"==typeof this[a])return this[a](b);return this}function F(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function G(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Mc[a]=e),b&&(Mc[b[0]]=function(){return F(e.apply(this,arguments),b[1],b[2])}),c&&(Mc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function H(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function I(a){var b,c,d=a.match(Jc);for(b=0,c=d.length;c>b;b++)Mc[d[b]]?d[b]=Mc[d[b]]:d[b]=H(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function J(a,b){return a.isValid()?(b=K(b,a.localeData()),Lc[b]||(Lc[b]=I(b)),Lc[b](a)):a.localeData().invalidDate()}function K(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Kc.lastIndex=0;d>=0&&Kc.test(a);)a=a.replace(Kc,c),Kc.lastIndex=0,d-=1;return a}function L(a,b,c){_c[a]="function"==typeof b?b:function(a){return a&&c?c:b}}function M(a,b){return f(_c,a)?_c[a](b._strict,b._locale):new RegExp(N(a))}function N(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function O(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=p(a)}),c=0;c<a.length;c++)ad[a[c]]=d}function P(a,b){O(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function Q(a,b,c){null!=b&&f(ad,a)&&ad[a](b,c._a,c,a)}function R(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function S(a){return this._months[a.month()]}function T(a){return this._monthsShort[a.month()]}function U(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d;
}}function V(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),R(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function W(b){return null!=b?(V(this,b),a.updateOffset(this,!0),this):C(this,"Month")}function X(){return R(this.year(),this.month())}function Y(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[cd]<0||c[cd]>11?cd:c[dd]<1||c[dd]>R(c[bd],c[cd])?dd:c[ed]<0||c[ed]>24||24===c[ed]&&(0!==c[fd]||0!==c[gd]||0!==c[hd])?ed:c[fd]<0||c[fd]>59?fd:c[gd]<0||c[gd]>59?gd:c[hd]<0||c[hd]>999?hd:-1,j(a)._overflowDayOfYear&&(bd>b||b>dd)&&(b=dd),j(a).overflow=b),a}function Z(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function $(a,b){var c=!0,d=a+"\n"+(new Error).stack;return g(function(){return c&&(Z(d),c=!1),b.apply(this,arguments)},b)}function _(a,b){kd[a]||(Z(b),kd[a]=!0)}function aa(a){var b,c,d=a._i,e=ld.exec(d);if(e){for(j(a).iso=!0,b=0,c=md.length;c>b;b++)if(md[b][1].exec(d)){a._f=md[b][0]+(e[6]||" ");break}for(b=0,c=nd.length;c>b;b++)if(nd[b][1].exec(d)){a._f+=nd[b][0];break}d.match(Yc)&&(a._f+="Z"),ta(a)}else a._isValid=!1}function ba(b){var c=od.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(aa(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ca(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function da(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ea(a){return fa(a)?366:365}function fa(a){return a%4===0&&a%100!==0||a%400===0}function ga(){return fa(this.year())}function ha(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Aa(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ia(a){return ha(a,this._week.dow,this._week.doy).week}function ja(){return this._week.dow}function ka(){return this._week.doy}function la(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function ma(a){var b=ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function na(a,b,c,d,e){var f,g,h=da(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:ea(a-1)+g}}function oa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function pa(a,b,c){return null!=a?a:null!=b?b:c}function qa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ra(a){var b,c,d,e,f=[];if(!a._d){for(d=qa(a),a._w&&null==a._a[dd]&&null==a._a[cd]&&sa(a),a._dayOfYear&&(e=pa(a._a[bd],d[bd]),a._dayOfYear>ea(e)&&(j(a)._overflowDayOfYear=!0),c=da(e,0,a._dayOfYear),a._a[cd]=c.getUTCMonth(),a._a[dd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ed]&&0===a._a[fd]&&0===a._a[gd]&&0===a._a[hd]&&(a._nextDay=!0,a._a[ed]=0),a._d=(a._useUTC?da:ca).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ed]=24)}}function sa(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=pa(b.GG,a._a[bd],ha(Aa(),1,4).year),d=pa(b.W,1),e=pa(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=pa(b.gg,a._a[bd],ha(Aa(),f,g).year),d=pa(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=na(c,d,e,g,f),a._a[bd]=h.year,a._dayOfYear=h.dayOfYear}function ta(b){if(b._f===a.ISO_8601)return void aa(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=K(b._f,b._locale).match(Jc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(M(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Mc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),Q(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[ed]<=12&&b._a[ed]>0&&(j(b).bigHour=void 0),b._a[ed]=ua(b._locale,b._a[ed],b._meridiem),ra(b),Y(b)}function ua(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function va(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(NaN));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],ta(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function wa(a){if(!a._d){var b=A(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ra(a)}}function xa(a){var b,e=a._i,f=a._f;return a._locale=a._locale||x(a._l),null===e||void 0===f&&""===e?l({nullInput:!0}):("string"==typeof e&&(a._i=e=a._locale.preparse(e)),o(e)?new n(Y(e)):(c(f)?va(a):f?ta(a):d(e)?a._d=e:ya(a),b=new n(Y(a)),b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b))}function ya(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?ba(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ra(b)):"object"==typeof f?wa(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function za(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,xa(f)}function Aa(a,b,c,d){return za(a,b,c,d,!1)}function Ba(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Aa();for(d=b[0],e=1;e<b.length;++e)b[e][a](d)&&(d=b[e]);return d}function Ca(){var a=[].slice.call(arguments,0);return Ba("isBefore",a)}function Da(){var a=[].slice.call(arguments,0);return Ba("isAfter",a)}function Ea(a){var b=A(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=x(),this._bubble()}function Fa(a){return a instanceof Ea}function Ga(a,b){G(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+F(~~(a/60),2)+b+F(~~a%60,2)})}function Ha(a){var b=(a||"").match(Yc)||[],c=b[b.length-1]||[],d=(c+"").match(td)||["-",0,0],e=+(60*d[1])+p(d[2]);return"+"===d[0]?e:-e}function Ia(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Aa(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Aa(b).local()}function Ja(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Ka(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ha(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ja(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?$a(this,Va(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ja(this)}function La(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Ma(a){return this.utcOffset(0,a)}function Na(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ja(this),"m")),this}function Oa(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ha(this._i)),this}function Pa(a){return a=a?Aa(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Qa(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ra(){if(this._a){var a=this._isUTC?h(this._a):Aa(this._a);return this.isValid()&&q(this._a,a.toArray())>0}return!1}function Sa(){return!this._isUTC}function Ta(){return this._isUTC}function Ua(){return this._isUTC&&0===this._offset}function Va(a,b){var c,d,e,g=a,h=null;return Fa(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=ud.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:p(h[dd])*c,h:p(h[ed])*c,m:p(h[fd])*c,s:p(h[gd])*c,ms:p(h[hd])*c}):(h=vd.exec(a))?(c="-"===h[1]?-1:1,g={y:Wa(h[2],c),M:Wa(h[3],c),d:Wa(h[4],c),h:Wa(h[5],c),m:Wa(h[6],c),s:Wa(h[7],c),w:Wa(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=Ya(Aa(g.from),Aa(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ea(g),Fa(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Wa(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Xa(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Ya(a,b){var c;return b=Ia(b,a),a.isBefore(b)?c=Xa(a,b):(c=Xa(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function Za(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(_(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Va(c,d),$a(this,e,a),this}}function $a(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&D(b,"Date",C(b,"Date")+g*d),h&&V(b,C(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function _a(a){var b=a||Aa(),c=Ia(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,Aa(b)))}function ab(){return new n(this)}function bb(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Aa(a),+this>+a):(c=o(a)?+a:+Aa(a),c<+this.clone().startOf(b))}function cb(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Aa(a),+a>+this):(c=o(a)?+a:+Aa(a),+this.clone().endOf(b)<c)}function db(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function eb(a,b){var c;return b=z(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Aa(a),+this===+a):(c=+Aa(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function fb(a){return 0>a?Math.ceil(a):Math.floor(a)}function gb(a,b,c){var d,e,f=Ia(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=z(b),"year"===b||"month"===b||"quarter"===b?(e=hb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:fb(e)}function hb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function ib(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function jb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():J(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):J(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function kb(b){var c=J(this,b||a.defaultFormat);return this.localeData().postformat(c)}function lb(a,b){return this.isValid()?Va({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function mb(a){return this.from(Aa(),a)}function nb(a,b){return this.isValid()?Va({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.to(Aa(),a)}function pb(a){var b;return void 0===a?this._locale._abbr:(b=x(a),null!=b&&(this._locale=b),this)}function qb(){return this._locale}function rb(a){switch(a=z(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function sb(a){return a=z(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function tb(){return+this._d-6e4*(this._offset||0)}function ub(){return Math.floor(+this/1e3)}function vb(){return this._offset?new Date(+this):this._d}function wb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function xb(){return k(this)}function yb(){return g({},j(this))}function zb(){return j(this).overflow}function Ab(a,b){G(0,[a,a.length],0,b)}function Bb(a,b,c){return ha(Aa([a,11,31+b-c]),b,c).week}function Cb(a){var b=ha(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Db(a){var b=ha(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Eb(){return Bb(this.year(),1,4)}function Fb(){var a=this.localeData()._week;return Bb(this.year(),a.dow,a.doy)}function Gb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Hb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Ib(a){return this._weekdays[a.day()]}function Jb(a){return this._weekdaysShort[a.day()]}function Kb(a){return this._weekdaysMin[a.day()]}function Lb(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Aa([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Mb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Hb(a,this.localeData()),this.add(a-b,"d")):b}function Nb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Ob(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Pb(a,b){G(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Qb(a,b){return b._meridiemParse}function Rb(a){return"p"===(a+"").toLowerCase().charAt(0)}function Sb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Tb(a){G(0,[a,3],0,"millisecond")}function Ub(){return this._isUTC?"UTC":""}function Vb(){return this._isUTC?"Coordinated Universal Time":""}function Wb(a){return Aa(1e3*a)}function Xb(){return Aa.apply(null,arguments).parseZone()}function Yb(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function Zb(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b}function $b(){return this._invalidDate}function _b(a){return this._ordinal.replace("%d",a)}function ac(a){return a}function bc(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function cc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function dc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ec(a,b,c,d){var e=x(),f=h().set(d,b);return e[c](f,a)}function fc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return ec(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=ec(a,f,c,e);return g}function gc(a,b){return fc(a,b,"months",12,"month")}function hc(a,b){return fc(a,b,"monthsShort",12,"month")}function ic(a,b){return fc(a,b,"weekdays",7,"day")}function jc(a,b){return fc(a,b,"weekdaysShort",7,"day")}function kc(a,b){return fc(a,b,"weekdaysMin",7,"day")}function lc(){var a=this._data;return this._milliseconds=Rd(this._milliseconds),this._days=Rd(this._days),this._months=Rd(this._months),a.milliseconds=Rd(a.milliseconds),a.seconds=Rd(a.seconds),a.minutes=Rd(a.minutes),a.hours=Rd(a.hours),a.months=Rd(a.months),a.years=Rd(a.years),this}function mc(a,b,c,d){var e=Va(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function nc(a,b){return mc(this,a,b,1)}function oc(a,b){return mc(this,a,b,-1)}function pc(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;return g.milliseconds=d%1e3,a=fb(d/1e3),g.seconds=a%60,b=fb(a/60),g.minutes=b%60,c=fb(b/60),g.hours=c%24,e+=fb(c/24),h=fb(qc(e)),e-=fb(rc(h)),f+=fb(e/30),e%=30,h+=fb(f/12),f%=12,g.days=e,g.months=f,g.years=h,this}function qc(a){return 400*a/146097}function rc(a){return 146097*a/400}function sc(a){var b,c,d=this._milliseconds;if(a=z(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+12*qc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(rc(this._months/12)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function tc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*p(this._months/12)}function uc(a){return function(){return this.as(a)}}function vc(a){return a=z(a),this[a+"s"]()}function wc(a){return function(){return this._data[a]}}function xc(){return fb(this.days()/7)}function yc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function zc(a,b,c){var d=Va(a).abs(),e=fe(d.as("s")),f=fe(d.as("m")),g=fe(d.as("h")),h=fe(d.as("d")),i=fe(d.as("M")),j=fe(d.as("y")),k=e<ge.s&&["s",e]||1===f&&["m"]||f<ge.m&&["mm",f]||1===g&&["h"]||g<ge.h&&["hh",g]||1===h&&["d"]||h<ge.d&&["dd",h]||1===i&&["M"]||i<ge.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,yc.apply(null,k)}function Ac(a,b){return void 0===ge[a]?!1:void 0===b?ge[a]:(ge[a]=b,!0)}function Bc(a){var b=this.localeData(),c=zc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Cc(){var a=he(this.years()),b=he(this.months()),c=he(this.days()),d=he(this.hours()),e=he(this.minutes()),f=he(this.seconds()+this.milliseconds()/1e3),g=this.asSeconds();return g?(0>g?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}var Dc,Ec,Fc=a.momentProperties=[],Gc=!1,Hc={},Ic={},Jc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Kc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Lc={},Mc={},Nc=/\d/,Oc=/\d\d/,Pc=/\d{3}/,Qc=/\d{4}/,Rc=/[+-]?\d{6}/,Sc=/\d\d?/,Tc=/\d{1,3}/,Uc=/\d{1,4}/,Vc=/[+-]?\d{1,6}/,Wc=/\d+/,Xc=/[+-]?\d+/,Yc=/Z|[+-]\d\d:?\d\d/gi,Zc=/[+-]?\d+(\.\d{1,3})?/,$c=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_c={},ad={},bd=0,cd=1,dd=2,ed=3,fd=4,gd=5,hd=6;G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),G("MMMM",0,0,function(a){return this.localeData().months(this,a)}),y("month","M"),L("M",Sc),L("MM",Sc,Oc),L("MMM",$c),L("MMMM",$c),O(["M","MM"],function(a,b){b[cd]=p(a)-1}),O(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[cd]=e:j(c).invalidMonth=a});var id="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),jd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),kd={};a.suppressDeprecationWarnings=!1;var ld=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,md=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],nd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],od=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=$("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),y("year","y"),L("Y",Xc),L("YY",Sc,Oc),L("YYYY",Uc,Qc),L("YYYYY",Vc,Rc),L("YYYYYY",Vc,Rc),O(["YYYY","YYYYY","YYYYYY"],bd),O("YY",function(b,c){c[bd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return p(a)+(p(a)>68?1900:2e3)};var pd=B("FullYear",!1);G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),y("week","w"),y("isoWeek","W"),L("w",Sc),L("ww",Sc,Oc),L("W",Sc),L("WW",Sc,Oc),P(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=p(a)});var qd={dow:0,doy:6};G("DDD",["DDDD",3],"DDDo","dayOfYear"),y("dayOfYear","DDD"),L("DDD",Tc),L("DDDD",Pc),O(["DDD","DDDD"],function(a,b,c){c._dayOfYear=p(a)}),a.ISO_8601=function(){};var rd=$("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Aa.apply(null,arguments);return this>a?this:a}),sd=$("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Aa.apply(null,arguments);return a>this?this:a});Ga("Z",":"),Ga("ZZ",""),L("Z",Yc),L("ZZ",Yc),O(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ha(a)});var td=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var ud=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,vd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Va.fn=Ea.prototype;var wd=Za(1,"add"),xd=Za(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var yd=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ab("gggg","weekYear"),Ab("ggggg","weekYear"),Ab("GGGG","isoWeekYear"),Ab("GGGGG","isoWeekYear"),y("weekYear","gg"),y("isoWeekYear","GG"),L("G",Xc),L("g",Xc),L("GG",Sc,Oc),L("gg",Sc,Oc),L("GGGG",Uc,Qc),L("gggg",Uc,Qc),L("GGGGG",Vc,Rc),L("ggggg",Vc,Rc),P(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=p(a)}),P(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),G("Q",0,0,"quarter"),y("quarter","Q"),L("Q",Nc),O("Q",function(a,b){b[cd]=3*(p(a)-1)}),G("D",["DD",2],"Do","date"),y("date","D"),L("D",Sc),L("DD",Sc,Oc),L("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),O(["D","DD"],dd),O("Do",function(a,b){b[dd]=p(a.match(Sc)[0],10)});var zd=B("Date",!0);G("d",0,"do","day"),G("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),G("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),G("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),y("day","d"),y("weekday","e"),y("isoWeekday","E"),L("d",Sc),L("e",Sc),L("E",Sc),L("dd",$c),L("ddd",$c),L("dddd",$c),P(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),P(["d","e","E"],function(a,b,c,d){b[d]=p(a)});var Ad="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Bd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Cd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");G("H",["HH",2],0,"hour"),G("h",["hh",2],0,function(){return this.hours()%12||12}),Pb("a",!0),Pb("A",!1),y("hour","h"),L("a",Qb),L("A",Qb),L("H",Sc),L("h",Sc),L("HH",Sc,Oc),L("hh",Sc,Oc),O(["H","HH"],ed),O(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),O(["h","hh"],function(a,b,c){b[ed]=p(a),j(c).bigHour=!0});var Dd=/[ap]\.?m?\.?/i,Ed=B("Hours",!0);G("m",["mm",2],0,"minute"),y("minute","m"),L("m",Sc),L("mm",Sc,Oc),O(["m","mm"],fd);var Fd=B("Minutes",!1);G("s",["ss",2],0,"second"),y("second","s"),L("s",Sc),L("ss",Sc,Oc),O(["s","ss"],gd);var Gd=B("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Tb("SSS"),Tb("SSSS"),y("millisecond","ms"),L("S",Tc,Nc),L("SS",Tc,Oc),L("SSS",Tc,Pc),L("SSSS",Wc),O(["S","SS","SSS","SSSS"],function(a,b){b[hd]=p(1e3*("0."+a))});var Hd=B("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var Id=n.prototype;Id.add=wd,Id.calendar=_a,Id.clone=ab,Id.diff=gb,Id.endOf=sb,Id.format=kb,Id.from=lb,Id.fromNow=mb,Id.to=nb,Id.toNow=ob,Id.get=E,Id.invalidAt=zb,Id.isAfter=bb,Id.isBefore=cb,Id.isBetween=db,Id.isSame=eb,Id.isValid=xb,Id.lang=yd,Id.locale=pb,Id.localeData=qb,Id.max=sd,Id.min=rd,Id.parsingFlags=yb,Id.set=E,Id.startOf=rb,Id.subtract=xd,Id.toArray=wb,Id.toDate=vb,Id.toISOString=jb,Id.toJSON=jb,Id.toString=ib,Id.unix=ub,Id.valueOf=tb,Id.year=pd,Id.isLeapYear=ga,Id.weekYear=Cb,Id.isoWeekYear=Db,Id.quarter=Id.quarters=Gb,Id.month=W,Id.daysInMonth=X,Id.week=Id.weeks=la,Id.isoWeek=Id.isoWeeks=ma,Id.weeksInYear=Fb,Id.isoWeeksInYear=Eb,Id.date=zd,Id.day=Id.days=Mb,Id.weekday=Nb,Id.isoWeekday=Ob,Id.dayOfYear=oa,Id.hour=Id.hours=Ed,Id.minute=Id.minutes=Fd,Id.second=Id.seconds=Gd,Id.millisecond=Id.milliseconds=Hd,Id.utcOffset=Ka,Id.utc=Ma,Id.local=Na,Id.parseZone=Oa,Id.hasAlignedHourOffset=Pa,Id.isDST=Qa,Id.isDSTShifted=Ra,Id.isLocal=Sa,Id.isUtcOffset=Ta,Id.isUtc=Ua,Id.isUTC=Ua,Id.zoneAbbr=Ub,Id.zoneName=Vb,Id.dates=$("dates accessor is deprecated. Use date instead.",zd),Id.months=$("months accessor is deprecated. Use month instead",W),Id.years=$("years accessor is deprecated. Use year instead",pd),Id.zone=$("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",La);var Jd=Id,Kd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ld={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Md="Invalid date",Nd="%d",Od=/\d{1,2}/,Pd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Qd=r.prototype;Qd._calendar=Kd,Qd.calendar=Yb,Qd._longDateFormat=Ld,Qd.longDateFormat=Zb,Qd._invalidDate=Md,Qd.invalidDate=$b,Qd._ordinal=Nd,Qd.ordinal=_b,Qd._ordinalParse=Od,Qd.preparse=ac,Qd.postformat=ac,Qd._relativeTime=Pd,Qd.relativeTime=bc,Qd.pastFuture=cc,Qd.set=dc,Qd.months=S,Qd._months=id,Qd.monthsShort=T,Qd._monthsShort=jd,Qd.monthsParse=U,Qd.week=ia,Qd._week=qd,Qd.firstDayOfYear=ka,Qd.firstDayOfWeek=ja,Qd.weekdays=Ib,Qd._weekdays=Ad,Qd.weekdaysMin=Kb,Qd._weekdaysMin=Cd,Qd.weekdaysShort=Jb,Qd._weekdaysShort=Bd,Qd.weekdaysParse=Lb,Qd.isPM=Rb,Qd._meridiemParse=Dd,Qd.meridiem=Sb,v("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===p(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=$("moment.lang is deprecated. Use moment.locale instead.",v),a.langData=$("moment.langData is deprecated. Use moment.localeData instead.",x);var Rd=Math.abs,Sd=uc("ms"),Td=uc("s"),Ud=uc("m"),Vd=uc("h"),Wd=uc("d"),Xd=uc("w"),Yd=uc("M"),Zd=uc("y"),$d=wc("milliseconds"),_d=wc("seconds"),ae=wc("minutes"),be=wc("hours"),ce=wc("days"),de=wc("months"),ee=wc("years"),fe=Math.round,ge={s:45,m:45,h:22,d:26,M:11},he=Math.abs,ie=Ea.prototype;ie.abs=lc,ie.add=nc,ie.subtract=oc,ie.as=sc,ie.asMilliseconds=Sd,ie.asSeconds=Td,ie.asMinutes=Ud,ie.asHours=Vd,ie.asDays=Wd,ie.asWeeks=Xd,ie.asMonths=Yd,ie.asYears=Zd,ie.valueOf=tc,ie._bubble=pc,ie.get=vc,ie.milliseconds=$d,ie.seconds=_d,ie.minutes=ae,ie.hours=be,ie.days=ce,ie.weeks=xc,ie.months=de,ie.years=ee,ie.humanize=Bc,ie.toISOString=Cc,ie.toString=Cc,ie.toJSON=Cc,ie.locale=pb,ie.localeData=qb,ie.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Cc),ie.lang=yd,G("X",0,0,"unix"),G("x",0,0,"valueOf"),L("x",Xc),L("X",Zc),O("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),O("x",function(a,b,c){c._d=new Date(p(a))}),a.version="2.10.3",b(Aa),a.fn=Jd,a.min=Ca,a.max=Da,a.utc=h,a.unix=Wb,a.months=gc,a.isDate=d,a.locale=v,a.invalid=l,a.duration=Va,a.isMoment=o,a.weekdays=ic,a.parseZone=Xb,a.localeData=x,a.isDuration=Fa,a.monthsShort=hc,a.weekdaysMin=kc,a.defineLocale=w,a.weekdaysShort=jc,a.normalizeUnits=z,a.relativeTimeThreshold=Ac;var je=a;return je}),function(){"use strict";angular.module("toaster",["ngAnimate"]).constant("toasterConfig",{limit:0,"tap-to-dismiss":!0,"close-button":!1,"newest-on-top":!0,"time-out":5e3,"icon-classes":{error:"toast-error",info:"toast-info",wait:"toast-wait",success:"toast-success",warning:"toast-warning"},"body-output-type":"","body-template":"toasterBodyTmpl.html","icon-class":"toast-info","position-class":"toast-top-right","title-class":"toast-title","message-class":"toast-message","prevent-duplicates":!1,"mouseover-timer-stop":!0}).service("toaster",["$rootScope","toasterConfig",function(a,b){this.pop=function(b,c,d,e,f,g,h,i,j){if(angular.isObject(b)){var k=b;this.toast={type:k.type,title:k.title,body:k.body,timeout:k.timeout,bodyOutputType:k.bodyOutputType,clickHandler:k.clickHandler,showCloseButton:k.showCloseButton,uid:k.toastId},j=k.toastId,h=k.toasterId}else this.toast={type:b,title:c,body:d,timeout:e,bodyOutputType:f,clickHandler:g,showCloseButton:i,uid:j};a.$emit("toaster-newToast",h,j)},this.clear=function(b,c){a.$emit("toaster-clearToasts",b,c)};for(var c in b["icon-classes"])this[c]=function(a){return function(b,c,d,e,f,g,h,i){angular.isString(b)?this.pop(a,b,c,d,e,f,g,h,i):this.pop(angular.extend(b,{type:a}))}}(c)}]).factory("toasterEventRegistry",["$rootScope",function(a){var b,c=null,d=null,e=[],f=[];return b={setup:function(){c||(c=a.$on("toaster-newToast",function(a,b,c){for(var d=0,f=e.length;f>d;d++)e[d](a,b,c)})),d||(d=a.$on("toaster-clearToasts",function(a,b,c){for(var d=0,e=f.length;e>d;d++)f[d](a,b,c)}))},subscribeToNewToastEvent:function(a){e.push(a)},subscribeToClearToastsEvent:function(a){f.push(a)},unsubscribeToNewToastEvent:function(a){var b=e.indexOf(a);b>=0&&e.splice(b,1),0===e.length&&(c(),c=null)},unsubscribeToClearToastsEvent:function(a){var b=f.indexOf(a);b>=0&&f.splice(b,1),0===f.length&&(d(),d=null)}},{setup:b.setup,subscribeToNewToastEvent:b.subscribeToNewToastEvent,subscribeToClearToastsEvent:b.subscribeToClearToastsEvent,unsubscribeToNewToastEvent:b.unsubscribeToNewToastEvent,unsubscribeToClearToastsEvent:b.unsubscribeToClearToastsEvent}}]).directive("toasterContainer",["$parse","$rootScope","$interval","$sce","toasterConfig","toaster","toasterEventRegistry",function(a,b,c,d,e,f,g){return{replace:!0,restrict:"EA",scope:!0,link:function(b,h,i){function j(a,d){a.timeoutPromise=c(function(){b.removeToast(a.id)},d,1)}function k(c,e){if(c.type=o["icon-classes"][c.type],c.type||(c.type=o["icon-class"]),o["prevent-duplicates"]===!0)if(n(e)){if(b.toasters.length>0&&b.toasters[b.toasters.length-1].body===c.body)return}else{var f,g;for(f=0,g=b.toasters.length;g>f;f++)b.toasters[f].uid===e&&(l(f),f--,g=b.toasters.length)}c.id=++p,n(e)||(c.uid=e);var h=o["close-button"];if("boolean"==typeof c.showCloseButton);else if("boolean"==typeof h)c.showCloseButton=h;else if("object"==typeof h){var i=h[c.type];"undefined"!=typeof i&&null!==i&&(c.showCloseButton=i)}else c.showCloseButton=!1;switch(c.bodyOutputType=c.bodyOutputType||o["body-output-type"],c.bodyOutputType){case"trustedHtml":c.html=d.trustAsHtml(c.body);break;case"template":c.bodyTemplate=c.body||o["body-template"];break;case"templateWithData":var j=a(c.body||o["body-template"]),k=j(b);c.bodyTemplate=k.template,c.data=k.data}b.configureTimer(c),o["newest-on-top"]===!0?(b.toasters.unshift(c),o.limit>0&&b.toasters.length>o.limit&&b.toasters.pop()):(b.toasters.push(c),o.limit>0&&b.toasters.length>o.limit&&b.toasters.shift())}function l(a){var d=b.toasters[a];d&&(d.timeoutPromise&&c.cancel(d.timeoutPromise),b.toasters.splice(a,1))}function m(a){for(var c=b.toasters.length-1;c>=0;c--)n(a)?l(c):b.toasters[c].uid==a&&l(c)}function n(a){return angular.isUndefined(a)||null===a}var o,p=0;o=angular.extend({},e,b.$eval(i.toasterOptions)),
b.config={toasterId:o["toaster-id"],position:o["position-class"],title:o["title-class"],message:o["message-class"],tap:o["tap-to-dismiss"],closeButton:o["close-button"],animation:o["animation-class"],mouseoverTimer:o["mouseover-timer-stop"]},b.$on("$destroy",function(){g.unsubscribeToNewToastEvent(b._onNewToast),g.unsubscribeToClearToastsEvent(b._onClearToasts)}),b.configureTimer=function(a){var b=angular.isNumber(a.timeout)?a.timeout:o["time-out"];"object"==typeof b&&(b=b[a.type]),b>0&&j(a,b)},b.removeToast=function(a){var c,d;for(c=0,d=b.toasters.length;d>c;c++)if(b.toasters[c].id===a){l(c);break}},b.toasters=[],b._onNewToast=function(a,c,d){(n(b.config.toasterId)&&n(c)||!n(b.config.toasterId)&&!n(c)&&b.config.toasterId==c)&&k(f.toast,d)},b._onClearToasts=function(a,c,d){("*"==c||n(b.config.toasterId)&&n(c)||!n(b.config.toasterId)&&!n(c)&&b.config.toasterId==c)&&m(d)},g.setup(),g.subscribeToNewToastEvent(b._onNewToast),g.subscribeToClearToastsEvent(b._onClearToasts)},controller:["$scope","$element","$attrs",function(a,b,d){a.stopTimer=function(b){a.config.mouseoverTimer===!0&&b.timeoutPromise&&(c.cancel(b.timeoutPromise),b.timeoutPromise=null)},a.restartTimer=function(b){a.config.mouseoverTimer===!0?b.timeoutPromise||a.configureTimer(b):null===b.timeoutPromise&&a.removeToast(b.id)},a.click=function(b,c){if(a.config.tap===!0||b.showCloseButton===!0&&c===!0){var d=!0;b.clickHandler&&(angular.isFunction(b.clickHandler)?d=b.clickHandler(b,!0):angular.isFunction(a.$parent.$eval(b.clickHandler))?d=a.$parent.$eval(b.clickHandler)(b,b.showCloseButton):console.log("TOAST-NOTE: Your click handler is not inside a parent scope of toaster-container.")),d&&a.removeToast(b.id)}}}],template:'<div id="toast-container" ng-class="[config.position, config.animation]"><div ng-repeat="toaster in toasters" class="toast" ng-class="toaster.type" ng-click="click(toaster)" ng-mouseover="stopTimer(toaster)" ng-mouseout="restartTimer(toaster)"><button type="button" class="toast-close-button" ng-show="toaster.showCloseButton" ng-click="click(toaster, true)">&times;</button><div ng-class="config.title">{{toaster.title}}</div><div ng-class="config.message" ng-switch on="toaster.bodyOutputType"><div ng-switch-when="trustedHtml" ng-bind-html="toaster.html"></div><div ng-switch-when="template"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-when="templateWithData"><div ng-include="toaster.bodyTemplate"></div></div><div ng-switch-default >{{toaster.body}}</div></div></div></div>'}}])}(window,document),function(a,b){"use strict";var c,d,e,f=a,g=f.document,h=f.navigator,i=f.setTimeout,j=f.clearTimeout,k=f.setInterval,l=f.clearInterval,m=f.getComputedStyle,n=f.encodeURIComponent,o=f.ActiveXObject,p=f.Error,q=f.Number.parseInt||f.parseInt,r=f.Number.parseFloat||f.parseFloat,s=f.Number.isNaN||f.isNaN,t=f.Date.now,u=f.Object.keys,v=f.Object.defineProperty,w=f.Object.prototype.hasOwnProperty,x=f.Array.prototype.slice,y=function(){var a=function(a){return a};if("function"==typeof f.wrap&&"function"==typeof f.unwrap)try{var b=g.createElement("div"),c=f.unwrap(b);1===b.nodeType&&c&&1===c.nodeType&&(a=f.unwrap)}catch(d){}return a}(),z=function(a){return x.call(a,0)},A=function(){var a,c,d,e,f,g,h=z(arguments),i=h[0]||{};for(a=1,c=h.length;c>a;a++)if(null!=(d=h[a]))for(e in d)w.call(d,e)&&(f=i[e],g=d[e],i!==g&&g!==b&&(i[e]=g));return i},B=function(a){var b,c,d,e;if("object"!=typeof a||null==a||"number"==typeof a.nodeType)b=a;else if("number"==typeof a.length)for(b=[],c=0,d=a.length;d>c;c++)w.call(a,c)&&(b[c]=B(a[c]));else{b={};for(e in a)w.call(a,e)&&(b[e]=B(a[e]))}return b},C=function(a,b){for(var c={},d=0,e=b.length;e>d;d++)b[d]in a&&(c[b[d]]=a[b[d]]);return c},D=function(a,b){var c={};for(var d in a)-1===b.indexOf(d)&&(c[d]=a[d]);return c},E=function(a){if(a)for(var b in a)w.call(a,b)&&delete a[b];return a},F=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument))do{if(a===b)return!0;a=a.parentNode}while(a);return!1},G=function(a){var b;return"string"==typeof a&&a&&(b=a.split("#")[0].split("?")[0],b=a.slice(0,a.lastIndexOf("/")+1)),b},H=function(a){var b,c;return"string"==typeof a&&a&&(c=a.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),c&&c[1]?b=c[1]:(c=a.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),c&&c[1]&&(b=c[1]))),b},I=function(){var a,b;try{throw new p}catch(c){b=c}return b&&(a=b.sourceURL||b.fileName||H(b.stack)),a},J=function(){var a,c,d;if(g.currentScript&&(a=g.currentScript.src))return a;if(c=g.getElementsByTagName("script"),1===c.length)return c[0].src||b;if("readyState"in c[0])for(d=c.length;d--;)if("interactive"===c[d].readyState&&(a=c[d].src))return a;return"loading"===g.readyState&&(a=c[c.length-1].src)?a:(a=I())?a:b},K=function(){var a,c,d,e=g.getElementsByTagName("script");for(a=e.length;a--;){if(!(d=e[a].src)){c=null;break}if(d=G(d),null==c)c=d;else if(c!==d){c=null;break}}return c||b},L=function(){var a=G(J())||K()||"";return a+"ZeroClipboard.swf"},M=function(){return null==a.opener&&(!!a.top&&a!=a.top||!!a.parent&&a!=a.parent)}(),N={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},O="11.0.0",P={},Q={},R=null,S=0,T=0,U={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},V=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],W=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],X=new RegExp("^flash-("+W.map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),Y=new RegExp("^flash-("+W.slice(1).map(function(a){return a.replace(/^flash-/,"")}).join("|")+")$"),Z={swfPath:L(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},$=function(a){if("object"==typeof a&&null!==a)for(var b in a)if(w.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))Z[b]=a[b];else if(null==N.bridge)if("containerId"===b||"swfObjectId"===b){if(!na(a[b]))throw new Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");Z[b]=a[b]}else Z[b]=a[b];{if("string"!=typeof a||!a)return B(Z);if(w.call(Z,a))return Z[a]}},_=function(){return Ta(),{browser:C(h,["userAgent","platform","appName"]),flash:D(N,["bridge"]),zeroclipboard:{version:Va.version,config:Va.config()}}},aa=function(){return!!(N.disabled||N.outdated||N.sandboxed||N.unavailable||N.degraded||N.deactivated)},ba=function(a,d){var e,f,g,h={};if("string"==typeof a&&a)g=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof d)for(e in a)w.call(a,e)&&"string"==typeof e&&e&&"function"==typeof a[e]&&Va.on(e,a[e]);if(g&&g.length){for(e=0,f=g.length;f>e;e++)a=g[e].replace(/^on/,""),h[a]=!0,P[a]||(P[a]=[]),P[a].push(d);if(h.ready&&N.ready&&Va.emit({type:"ready"}),h.error){for(e=0,f=W.length;f>e;e++)if(N[W[e].replace(/^flash-/,"")]===!0){Va.emit({type:"error",name:W[e]});break}c!==b&&Va.version!==c&&Va.emit({type:"error",name:"version-mismatch",jsVersion:Va.version,swfVersion:c})}}return Va},ca=function(a,b){var c,d,e,f,g;if(0===arguments.length)f=u(P);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)w.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&Va.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=P[a],g&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return Va},da=function(a){var b;return b="string"==typeof a&&a?B(P[a])||null:B(P)},ea=function(a){var b,c,d;return a=oa(a),a&&!va(a)?"ready"===a.type&&N.overdue===!0?Va.emit({type:"error",name:"flash-overdue"}):(b=A({},a),ta.call(this,b),"copy"===a.type&&(d=Da(Q),c=d.data,R=d.formatMap),c):void 0},fa=function(){var a=N.sandboxed;if(Ta(),"boolean"!=typeof N.ready&&(N.ready=!1),N.sandboxed!==a&&N.sandboxed===!0)N.ready=!1,Va.emit({type:"error",name:"flash-sandboxed"});else if(!Va.isFlashUnusable()&&null===N.bridge){var b=Z.flashLoadTimeout;"number"==typeof b&&b>=0&&(S=i(function(){"boolean"!=typeof N.deactivated&&(N.deactivated=!0),N.deactivated===!0&&Va.emit({type:"error",name:"flash-deactivated"})},b)),N.overdue=!1,Ba()}},ga=function(){Va.clearData(),Va.blur(),Va.emit("destroy"),Ca(),Va.off()},ha=function(a,b){var c;if("object"==typeof a&&a&&"undefined"==typeof b)c=a,Va.clearData();else{if("string"!=typeof a||!a)return;c={},c[a]=b}for(var d in c)"string"==typeof d&&d&&w.call(c,d)&&"string"==typeof c[d]&&c[d]&&(Q[d]=c[d])},ia=function(a){"undefined"==typeof a?(E(Q),R=null):"string"==typeof a&&w.call(Q,a)&&delete Q[a]},ja=function(a){return"undefined"==typeof a?B(Q):"string"==typeof a&&w.call(Q,a)?Q[a]:void 0},ka=function(a){if(a&&1===a.nodeType){d&&(La(d,Z.activeClass),d!==a&&La(d,Z.hoverClass)),d=a,Ka(a,Z.hoverClass);var b=a.getAttribute("title")||Z.title;if("string"==typeof b&&b){var c=Aa(N.bridge);c&&c.setAttribute("title",b)}var e=Z.forceHandCursor===!0||"pointer"===Ma(a,"cursor");Ra(e),Qa()}},la=function(){var a=Aa(N.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px"),d&&(La(d,Z.hoverClass),La(d,Z.activeClass),d=null)},ma=function(){return d||null},na=function(a){return"string"==typeof a&&a&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(a)},oa=function(a){var b;if("string"==typeof a&&a?(b=a,a={}):"object"==typeof a&&a&&"string"==typeof a.type&&a.type&&(b=a.type),b){b=b.toLowerCase(),!a.target&&(/^(copy|aftercopy|_click)$/.test(b)||"error"===b&&"clipboard-error"===a.name)&&(a.target=e),A(a,{type:b,target:a.target||d||null,relatedTarget:a.relatedTarget||null,currentTarget:N&&N.bridge||null,timeStamp:a.timeStamp||t()||null});var c=U[a.type];return"error"===a.type&&a.name&&c&&(c=c[a.name]),c&&(a.message=c),"ready"===a.type&&A(a,{target:null,version:N.version}),"error"===a.type&&(X.test(a.name)&&A(a,{target:null,minimumVersion:O}),Y.test(a.name)&&A(a,{version:N.version})),"copy"===a.type&&(a.clipboardData={setData:Va.setData,clearData:Va.clearData}),"aftercopy"===a.type&&(a=Ea(a,R)),a.target&&!a.relatedTarget&&(a.relatedTarget=pa(a.target)),qa(a)}},pa=function(a){var b=a&&a.getAttribute&&a.getAttribute("data-clipboard-target");return b?g.getElementById(b):null},qa=function(a){if(a&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)){var c=a.target,d="_mouseover"===a.type&&a.relatedTarget?a.relatedTarget:b,e="_mouseout"===a.type&&a.relatedTarget?a.relatedTarget:b,h=Na(c),i=f.screenLeft||f.screenX||0,j=f.screenTop||f.screenY||0,k=g.body.scrollLeft+g.documentElement.scrollLeft,l=g.body.scrollTop+g.documentElement.scrollTop,m=h.left+("number"==typeof a._stageX?a._stageX:0),n=h.top+("number"==typeof a._stageY?a._stageY:0),o=m-k,p=n-l,q=i+o,r=j+p,s="number"==typeof a.movementX?a.movementX:0,t="number"==typeof a.movementY?a.movementY:0;delete a._stageX,delete a._stageY,A(a,{srcElement:c,fromElement:d,toElement:e,screenX:q,screenY:r,pageX:m,pageY:n,clientX:o,clientY:p,x:o,y:p,movementX:s,movementY:t,offsetX:0,offsetY:0,layerX:0,layerY:0})}return a},ra=function(a){var b=a&&"string"==typeof a.type&&a.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(b)},sa=function(a,b,c,d){d?i(function(){a.apply(b,c)},0):a.apply(b,c)},ta=function(a){if("object"==typeof a&&a&&a.type){var b=ra(a),c=P["*"]||[],d=P[a.type]||[],e=c.concat(d);if(e&&e.length){var g,h,i,j,k,l=this;for(g=0,h=e.length;h>g;g++)i=e[g],j=l,"string"==typeof i&&"function"==typeof f[i]&&(i=f[i]),"object"==typeof i&&i&&"function"==typeof i.handleEvent&&(j=i,i=i.handleEvent),"function"==typeof i&&(k=A({},a),sa(i,j,[k],b))}return this}},ua=function(a){var b=null;return(M===!1||a&&"error"===a.type&&a.name&&-1!==V.indexOf(a.name))&&(b=!1),b},va=function(a){var b=a.target||d||null,f="swf"===a._source;switch(delete a._source,a.type){case"error":var g="flash-sandboxed"===a.name||ua(a);"boolean"==typeof g&&(N.sandboxed=g),-1!==W.indexOf(a.name)?A(N,{disabled:"flash-disabled"===a.name,outdated:"flash-outdated"===a.name,unavailable:"flash-unavailable"===a.name,degraded:"flash-degraded"===a.name,deactivated:"flash-deactivated"===a.name,overdue:"flash-overdue"===a.name,ready:!1}):"version-mismatch"===a.name&&(c=a.swfVersion,A(N,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Pa();break;case"ready":c=a.swfVersion;var h=N.deactivated===!0;A(N,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:h,ready:!h}),Pa();break;case"beforecopy":e=b;break;case"copy":var i,j,k=a.relatedTarget;!Q["text/html"]&&!Q["text/plain"]&&k&&(j=k.value||k.outerHTML||k.innerHTML)&&(i=k.value||k.textContent||k.innerText)?(a.clipboardData.clearData(),a.clipboardData.setData("text/plain",i),j!==i&&a.clipboardData.setData("text/html",j)):!Q["text/plain"]&&a.target&&(i=a.target.getAttribute("data-clipboard-text"))&&(a.clipboardData.clearData(),a.clipboardData.setData("text/plain",i));break;case"aftercopy":wa(a),Va.clearData(),b&&b!==Ja()&&b.focus&&b.focus();break;case"_mouseover":Va.focus(b),Z.bubbleEvents===!0&&f&&(b&&b!==a.relatedTarget&&!F(a.relatedTarget,b)&&xa(A({},a,{type:"mouseenter",bubbles:!1,cancelable:!1})),xa(A({},a,{type:"mouseover"})));break;case"_mouseout":Va.blur(),Z.bubbleEvents===!0&&f&&(b&&b!==a.relatedTarget&&!F(a.relatedTarget,b)&&xa(A({},a,{type:"mouseleave",bubbles:!1,cancelable:!1})),xa(A({},a,{type:"mouseout"})));break;case"_mousedown":Ka(b,Z.activeClass),Z.bubbleEvents===!0&&f&&xa(A({},a,{type:a.type.slice(1)}));break;case"_mouseup":La(b,Z.activeClass),Z.bubbleEvents===!0&&f&&xa(A({},a,{type:a.type.slice(1)}));break;case"_click":e=null,Z.bubbleEvents===!0&&f&&xa(A({},a,{type:a.type.slice(1)}));break;case"_mousemove":Z.bubbleEvents===!0&&f&&xa(A({},a,{type:a.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)?!0:void 0},wa=function(a){if(a.errors&&a.errors.length>0){var b=B(a);A(b,{type:"error",name:"clipboard-error"}),delete b.success,i(function(){Va.emit(b)},0)}},xa=function(a){if(a&&"string"==typeof a.type&&a){var b,c=a.target||null,d=c&&c.ownerDocument||g,e={view:d.defaultView||f,canBubble:!0,cancelable:!0,detail:"click"===a.type?1:0,button:"number"==typeof a.which?a.which-1:"number"==typeof a.button?a.button:d.createEvent?0:1},h=A(e,a);c&&d.createEvent&&c.dispatchEvent&&(h=[h.type,h.canBubble,h.cancelable,h.view,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget],b=d.createEvent("MouseEvents"),b.initMouseEvent&&(b.initMouseEvent.apply(b,h),b._source="js",c.dispatchEvent(b)))}},ya=function(){var a=Z.flashLoadTimeout;if("number"==typeof a&&a>=0){var b=Math.min(1e3,a/10),c=Z.swfObjectId+"_fallbackContent";T=k(function(){var a=g.getElementById(c);Oa(a)&&(Pa(),N.deactivated=null,Va.emit({type:"error",name:"swf-not-found"}))},b)}},za=function(){var a=g.createElement("div");return a.id=Z.containerId,a.className=Z.containerClass,a.style.position="absolute",a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px",a.style.zIndex=""+Sa(Z.zIndex),a},Aa=function(a){for(var b=a&&a.parentNode;b&&"OBJECT"===b.nodeName&&b.parentNode;)b=b.parentNode;return b||null},Ba=function(){var a,b=N.bridge,c=Aa(b);if(!b){var d=Ia(f.location.host,Z),e="never"===d?"none":"all",h=Ga(A({jsVersion:Va.version},Z)),i=Z.swfPath+Fa(Z.swfPath,Z);c=za();var j=g.createElement("div");c.appendChild(j),g.body.appendChild(c);var k=g.createElement("div"),l="activex"===N.pluginType;k.innerHTML='<object id="'+Z.swfObjectId+'" name="'+Z.swfObjectId+'" width="100%" height="100%" '+(l?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+i+'"')+">"+(l?'<param name="movie" value="'+i+'"/>':"")+'<param name="allowScriptAccess" value="'+d+'"/><param name="allowNetworking" value="'+e+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+h+'"/><div id="'+Z.swfObjectId+'_fallbackContent">&nbsp;</div></object>',b=k.firstChild,k=null,y(b).ZeroClipboard=Va,c.replaceChild(b,j),ya()}return b||(b=g[Z.swfObjectId],b&&(a=b.length)&&(b=b[a-1]),!b&&c&&(b=c.firstChild)),N.bridge=b||null,b},Ca=function(){var a=N.bridge;if(a){var d=Aa(a);d&&("activex"===N.pluginType&&"readyState"in a?(a.style.display="none",function e(){if(4===a.readyState){for(var b in a)"function"==typeof a[b]&&(a[b]=null);a.parentNode&&a.parentNode.removeChild(a),d.parentNode&&d.parentNode.removeChild(d)}else i(e,10)}()):(a.parentNode&&a.parentNode.removeChild(a),d.parentNode&&d.parentNode.removeChild(d))),Pa(),N.ready=null,N.bridge=null,N.deactivated=null,c=b}},Da=function(a){var b={},c={};if("object"==typeof a&&a){for(var d in a)if(d&&w.call(a,d)&&"string"==typeof a[d]&&a[d])switch(d.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":b.text=a[d],c.text=d;break;case"text/html":case"html":case"air:html":case"flash:html":b.html=a[d],c.html=d;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":b.rtf=a[d],c.rtf=d}return{data:b,formatMap:c}}},Ea=function(a,b){if("object"!=typeof a||!a||"object"!=typeof b||!b)return a;var c={};for(var d in a)if(w.call(a,d))if("errors"===d){c[d]=a[d]?a[d].slice():[];for(var e=0,f=c[d].length;f>e;e++)c[d][e].format=b[c[d][e].format]}else if("success"!==d&&"data"!==d)c[d]=a[d];else{c[d]={};var g=a[d];for(var h in g)h&&w.call(g,h)&&w.call(b,h)&&(c[d][b[h]]=g[h])}return c},Fa=function(a,b){var c=null==b||b&&b.cacheBust===!0;return c?(-1===a.indexOf("?")?"?":"&")+"noCache="+t():""},Ga=function(a){var b,c,d,e,g="",h=[];if(a.trustedDomains&&("string"==typeof a.trustedDomains?e=[a.trustedDomains]:"object"==typeof a.trustedDomains&&"length"in a.trustedDomains&&(e=a.trustedDomains)),e&&e.length)for(b=0,c=e.length;c>b;b++)if(w.call(e,b)&&e[b]&&"string"==typeof e[b]){if(d=Ha(e[b]),!d)continue;if("*"===d){h.length=0,h.push(d);break}h.push.apply(h,[d,"//"+d,f.location.protocol+"//"+d])}return h.length&&(g+="trustedOrigins="+n(h.join(","))),a.forceEnhancedClipboard===!0&&(g+=(g?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof a.swfObjectId&&a.swfObjectId&&(g+=(g?"&":"")+"swfObjectId="+n(a.swfObjectId)),"string"==typeof a.jsVersion&&a.jsVersion&&(g+=(g?"&":"")+"jsVersion="+n(a.jsVersion)),g},Ha=function(a){if(null==a||""===a)return null;if(a=a.replace(/^\s+|\s+$/g,""),""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return a=-1===c?a:-1===b||0===c?null:a.slice(0,c),a&&".swf"===a.slice(-4).toLowerCase()?null:a||null},Ia=function(){var a=function(a){var b,c,d,e=[];if("string"==typeof a&&(a=[a]),"object"!=typeof a||!a||"number"!=typeof a.length)return e;for(b=0,c=a.length;c>b;b++)if(w.call(a,b)&&(d=Ha(a[b]))){if("*"===d){e.length=0,e.push("*");break}-1===e.indexOf(d)&&e.push(d)}return e};return function(b,c){var d=Ha(c.swfPath);null===d&&(d=b);var e=a(c.trustedDomains),f=e.length;if(f>0){if(1===f&&"*"===e[0])return"always";if(-1!==e.indexOf(b))return 1===f&&b===d?"sameDomain":"always"}return"never"}}(),Ja=function(){try{return g.activeElement}catch(a){return null}},Ka=function(a,b){var c,d,e,f=[];if("string"==typeof b&&b&&(f=b.split(/\s+/)),a&&1===a.nodeType&&f.length>0)if(a.classList)for(c=0,d=f.length;d>c;c++)a.classList.add(f[c]);else if(a.hasOwnProperty("className")){for(e=" "+a.className+" ",c=0,d=f.length;d>c;c++)-1===e.indexOf(" "+f[c]+" ")&&(e+=f[c]+" ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},La=function(a,b){var c,d,e,f=[];if("string"==typeof b&&b&&(f=b.split(/\s+/)),a&&1===a.nodeType&&f.length>0)if(a.classList&&a.classList.length>0)for(c=0,d=f.length;d>c;c++)a.classList.remove(f[c]);else if(a.className){for(e=(" "+a.className+" ").replace(/[\r\n\t]/g," "),c=0,d=f.length;d>c;c++)e=e.replace(" "+f[c]+" "," ");a.className=e.replace(/^\s+|\s+$/g,"")}return a},Ma=function(a,b){var c=m(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},Na=function(a){var b={left:0,top:0,width:0,height:0};if(a.getBoundingClientRect){var c=a.getBoundingClientRect(),d=f.pageXOffset,e=f.pageYOffset,h=g.documentElement.clientLeft||0,i=g.documentElement.clientTop||0,j=0,k=0;if("relative"===Ma(g.body,"position")){var l=g.body.getBoundingClientRect(),m=g.documentElement.getBoundingClientRect();j=l.left-m.left||0,k=l.top-m.top||0}b.left=c.left+d-h-j,b.top=c.top+e-i-k,b.width="width"in c?c.width:c.right-c.left,b.height="height"in c?c.height:c.bottom-c.top}return b},Oa=function(a){if(!a)return!1;var b=m(a,null),c=r(b.height)>0,d=r(b.width)>0,e=r(b.top)>=0,f=r(b.left)>=0,g=c&&d&&e&&f,h=g?null:Na(a),i="none"!==b.display&&"collapse"!==b.visibility&&(g||!!h&&(c||h.height>0)&&(d||h.width>0)&&(e||h.top>=0)&&(f||h.left>=0));return i},Pa=function(){j(S),S=0,l(T),T=0},Qa=function(){var a;if(d&&(a=Aa(N.bridge))){var b=Na(d);A(a.style,{width:b.width+"px",height:b.height+"px",top:b.top+"px",left:b.left+"px",zIndex:""+Sa(Z.zIndex)})}},Ra=function(a){N.ready===!0&&(N.bridge&&"function"==typeof N.bridge.setHandCursor?N.bridge.setHandCursor(a):N.ready=!1)},Sa=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;return"number"!=typeof a||s(a)?"string"==typeof a&&(b=Sa(q(a,10))):b=a,"number"==typeof b?b:"auto"},Ta=function(b){var c,d,e,f=N.sandboxed,g=null;if(b=b===!0,M===!1)g=!1;else{try{d=a.frameElement||null}catch(h){e={name:h.name,message:h.message}}if(d&&1===d.nodeType&&"IFRAME"===d.nodeName)try{g=d.hasAttribute("sandbox")}catch(h){g=null}else{try{c=document.domain||null}catch(h){c=null}(null===c||e&&"SecurityError"===e.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(e.message.toLowerCase()))&&(g=!0)}}return N.sandboxed=g,f===g||b||Ua(o),g},Ua=function(a){function b(a){var b=a.match(/[\d]+/g);return b.length=3,b.join(".")}function c(a){return!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))}function d(a){a&&(i=!0,a.version&&(l=b(a.version)),!l&&a.description&&(l=b(a.description)),a.filename&&(k=c(a.filename)))}var e,f,g,i=!1,j=!1,k=!1,l="";if(h.plugins&&h.plugins.length)e=h.plugins["Shockwave Flash"],d(e),h.plugins["Shockwave Flash 2.0"]&&(i=!0,l="2.0.0.11");else if(h.mimeTypes&&h.mimeTypes.length)g=h.mimeTypes["application/x-shockwave-flash"],e=g&&g.enabledPlugin,d(e);else if("undefined"!=typeof a){j=!0;try{f=new a("ShockwaveFlash.ShockwaveFlash.7"),i=!0,l=b(f.GetVariable("$version"))}catch(m){try{f=new a("ShockwaveFlash.ShockwaveFlash.6"),i=!0,l="6.0.21"}catch(n){try{f=new a("ShockwaveFlash.ShockwaveFlash"),i=!0,l=b(f.GetVariable("$version"))}catch(o){j=!1}}}}N.disabled=i!==!0,N.outdated=l&&r(l)<r(O),N.version=l||"0.0.0",N.pluginType=k?"pepper":j?"activex":i?"netscape":"unknown"};Ua(o),Ta(!0);var Va=function(){return this instanceof Va?void("function"==typeof Va._createClient&&Va._createClient.apply(this,z(arguments))):new Va};v(Va,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Va.config=function(){return $.apply(this,z(arguments))},Va.state=function(){return _.apply(this,z(arguments))},Va.isFlashUnusable=function(){return aa.apply(this,z(arguments))},Va.on=function(){return ba.apply(this,z(arguments))},Va.off=function(){return ca.apply(this,z(arguments))},Va.handlers=function(){return da.apply(this,z(arguments))},Va.emit=function(){return ea.apply(this,z(arguments))},Va.create=function(){return fa.apply(this,z(arguments))},Va.destroy=function(){return ga.apply(this,z(arguments))},Va.setData=function(){return ha.apply(this,z(arguments))},Va.clearData=function(){return ia.apply(this,z(arguments))},Va.getData=function(){return ja.apply(this,z(arguments))},Va.focus=Va.activate=function(){return ka.apply(this,z(arguments))},Va.blur=Va.deactivate=function(){return la.apply(this,z(arguments))},Va.activeElement=function(){return ma.apply(this,z(arguments))};var Wa=0,Xa={},Ya=0,Za={},$a={};A(Z,{autoActivate:!0});var _a=function(a){var b=this;b.id=""+Wa++,Xa[b.id]={instance:b,elements:[],handlers:{}},a&&b.clip(a),Va.on("*",function(a){return b.emit(a)}),Va.on("destroy",function(){b.destroy()}),Va.create()},ab=function(a,d){var e,f,g,h={},i=Xa[this.id],j=i&&i.handlers;if(!i)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof a&&a)g=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof d)for(e in a)w.call(a,e)&&"string"==typeof e&&e&&"function"==typeof a[e]&&this.on(e,a[e]);if(g&&g.length){for(e=0,f=g.length;f>e;e++)a=g[e].replace(/^on/,""),h[a]=!0,j[a]||(j[a]=[]),j[a].push(d);if(h.ready&&N.ready&&this.emit({type:"ready",client:this}),h.error){for(e=0,f=W.length;f>e;e++)if(N[W[e].replace(/^flash-/,"")]){this.emit({type:"error",name:W[e],client:this});break}c!==b&&Va.version!==c&&this.emit({type:"error",name:"version-mismatch",jsVersion:Va.version,swfVersion:c})}}return this},bb=function(a,b){var c,d,e,f,g,h=Xa[this.id],i=h&&h.handlers;if(!i)return this;if(0===arguments.length)f=u(i);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)w.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=i[a],g&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return this},cb=function(a){var b=null,c=Xa[this.id]&&Xa[this.id].handlers;return c&&(b="string"==typeof a&&a?c[a]?c[a].slice(0):[]:B(c)),b},db=function(a){if(ib.call(this,a)){"object"==typeof a&&a&&"string"==typeof a.type&&a.type&&(a=A({},a));var b=A({},oa(a),{client:this});jb.call(this,b)}return this},eb=function(a){if(!Xa[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");a=kb(a);for(var b=0;b<a.length;b++)if(w.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===Za[a[b].zcClippingId].indexOf(this.id)&&Za[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+Ya++,Za[a[b].zcClippingId]=[this.id],Z.autoActivate===!0&&lb(a[b]));var c=Xa[this.id]&&Xa[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},fb=function(a){var b=Xa[this.id];if(!b)return this;var c,d=b.elements;a="undefined"==typeof a?d.slice(0):kb(a);for(var e=a.length;e--;)if(w.call(a,e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=d.indexOf(a[e],c));)d.splice(c,1);var f=Za[a[e].zcClippingId];if(f){for(c=0;-1!==(c=f.indexOf(this.id,c));)f.splice(c,1);0===f.length&&(Z.autoActivate===!0&&mb(a[e]),delete a[e].zcClippingId)}}return this},gb=function(){var a=Xa[this.id];return a&&a.elements?a.elements.slice(0):[]},hb=function(){Xa[this.id]&&(this.unclip(),this.off(),delete Xa[this.id])},ib=function(a){if(!a||!a.type)return!1;if(a.client&&a.client!==this)return!1;var b=Xa[this.id],c=b&&b.elements,d=!!c&&c.length>0,e=!a.target||d&&-1!==c.indexOf(a.target),f=a.relatedTarget&&d&&-1!==c.indexOf(a.relatedTarget),g=a.client&&a.client===this;return b&&(e||f||g)?!0:!1},jb=function(a){var b=Xa[this.id];if("object"==typeof a&&a&&a.type&&b){var c=ra(a),d=b&&b.handlers["*"]||[],e=b&&b.handlers[a.type]||[],g=d.concat(e);if(g&&g.length){var h,i,j,k,l,m=this;for(h=0,i=g.length;i>h;h++)j=g[h],k=m,"string"==typeof j&&"function"==typeof f[j]&&(j=f[j]),"object"==typeof j&&j&&"function"==typeof j.handleEvent&&(k=j,j=j.handleEvent),"function"==typeof j&&(l=A({},a),sa(j,k,[l],c))}}},kb=function(a){return"string"==typeof a&&(a=[]),"number"!=typeof a.length?[a]:a},lb=function(a){if(a&&1===a.nodeType){var b=function(a){(a||(a=f.event))&&("js"!==a._source&&(a.stopImmediatePropagation(),a.preventDefault()),delete a._source)},c=function(c){(c||(c=f.event))&&(b(c),Va.focus(a))};a.addEventListener("mouseover",c,!1),a.addEventListener("mouseout",b,!1),a.addEventListener("mouseenter",b,!1),a.addEventListener("mouseleave",b,!1),a.addEventListener("mousemove",b,!1),$a[a.zcClippingId]={mouseover:c,mouseout:b,mouseenter:b,mouseleave:b,mousemove:b}}},mb=function(a){if(a&&1===a.nodeType){var b=$a[a.zcClippingId];if("object"==typeof b&&b){for(var c,d,e=["move","leave","enter","out","over"],f=0,g=e.length;g>f;f++)c="mouse"+e[f],d=b[c],"function"==typeof d&&a.removeEventListener(c,d,!1);delete $a[a.zcClippingId]}}};Va._createClient=function(){_a.apply(this,z(arguments))},Va.prototype.on=function(){return ab.apply(this,z(arguments))},Va.prototype.off=function(){return bb.apply(this,z(arguments))},Va.prototype.handlers=function(){return cb.apply(this,z(arguments))},Va.prototype.emit=function(){return db.apply(this,z(arguments))},Va.prototype.clip=function(){return eb.apply(this,z(arguments))},Va.prototype.unclip=function(){return fb.apply(this,z(arguments))},Va.prototype.elements=function(){return gb.apply(this,z(arguments))},Va.prototype.destroy=function(){return hb.apply(this,z(arguments))},Va.prototype.setText=function(a){if(!Xa[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Va.setData("text/plain",a),this},Va.prototype.setHtml=function(a){if(!Xa[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Va.setData("text/html",a),this},Va.prototype.setRichText=function(a){if(!Xa[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Va.setData("application/rtf",a),this},Va.prototype.setData=function(){if(!Xa[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Va.setData.apply(this,z(arguments)),this},Va.prototype.clearData=function(){if(!Xa[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Va.clearData.apply(this,z(arguments)),this},Va.prototype.getData=function(){if(!Xa[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Va.getData.apply(this,z(arguments))},"function"==typeof define&&define.amd?define(function(){return Va}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Va:a.ZeroClipboard=Va;
}(function(){return this||window}()),!function(a,b){b["true"]=a,function(a,b){"use strict";function c(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,k(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function d(a){var c=[],d=k(c,b.noop);return d.chars(a),c.join("")}function e(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),A[d])for(;k.last()&&B[k.last()];)e("",k.last());z[d]&&k.last()==d&&e("",d),h=w[d]||!!h,h||k.push(d);var i={};f.replace(o,function(a,b,c,d,e){var f=c||d||e||"";i[b]=g(f)}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=k.length-1;f>=0&&k[f]!=d;f--);if(f>=0){for(e=k.length-1;e>=f;e--)c.end&&c.end(k[e]);k.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,j,k=[],u=a;for(k.last=function(){return k[k.length-1]};a;){if(j="",h=!0,k.last()&&D[k.last()]?(a=a.replace(new RegExp("([^]*)<\\s*\\/\\s*"+k.last()+"[^>]*>","i"),function(a,b){return b=b.replace(r,"$1").replace(t,"$1"),c.chars&&c.chars(g(b)),""}),e("",k.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):s.test(a)?(i=a.match(s),i&&(a=a.replace(i[0],""),h=!1)):q.test(a)?(i=a.match(n),i&&(a=a.substring(i[0].length),i[0].replace(n,e),h=!1)):p.test(a)&&(i=a.match(m),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(m,d)),h=!1):(j+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),j+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(j)))),a==u)throw l("badparse","The sanitizer was unable to parse the following block of html: {0}",a);u=a}e()}function g(a){if(!a)return"";var b=K.exec(a),c=b[1],d=b[3],e=b[2];return e&&(J.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in J?J.textContent:J.innerText),c+e+d}function h(a){return a.replace(/&/g,"&amp;").replace(u,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(v,function(a){var b=a.charCodeAt(0);return 159>=b||173==b||b>=1536&&1540>=b||1807==b||6068==b||6069==b||b>=8204&&8207>=b||b>=8232&&8239>=b||b>=8288&&8303>=b||65279==b||b>=65520&&65535>=b?"&#"+b+";":a}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a){var c="",d=a.split(";");return b.forEach(d,function(a){var d=a.split(":");if(2==d.length){var e=L(b.lowercase(d[0])),a=L(b.lowercase(d[1]));(("color"===e||"background-color"===e)&&(a.match(/^rgb\([0-9%,\. ]*\)$/i)||a.match(/^rgba\([0-9%,\. ]*\)$/i)||a.match(/^hsl\([0-9%,\. ]*\)$/i)||a.match(/^hsla\([0-9%,\. ]*\)$/i)||a.match(/^#[0-9a-f]{3,6}$/i)||a.match(/^[a-z]*$/i))||"text-align"===e&&("left"===a||"right"===a||"center"===a||"justify"===a)||"float"===e&&("left"===a||"right"===a||"none"===a)||("width"===e||"height"===e)&&a.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===e&&a.match(/^ltr|rtl|initial|inherit$/))&&(c+=e+": "+a+";")}}),c}function j(a,b,c,d){return"img"===a&&b["ta-insert-video"]&&("ta-insert-video"===c||"allowfullscreen"===c||"frameborder"===c||"contenteditable"===c&&"false"===d)?!0:!1}function k(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&D[a]&&(d=a),d||E[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,g){var k=b.lowercase(g),l="img"===a&&"src"===k||"background"===k;("style"===k&&""!==(d=i(d))||j(a,f,k,d)||I[k]===!0&&(F[k]!==!0||c(d,l)))&&(e(" "),e(g),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||E[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var l=b.$$minErr("$sanitize"),m=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,n=/^<\/\s*([\w:-]+)[^>]*>/,o=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,p=/^</,q=/^<\//,r=/<!--(.*?)-->/g,s=/<!DOCTYPE([^>]*?)>/i,t=/<!\[CDATA\[(.*?)]]>/g,u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,v=/([^\#-~| |!])/g,w=e("area,br,col,hr,img,wbr"),x=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),y=e("rp,rt"),z=b.extend({},y,x),A=b.extend({},x,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),B=b.extend({},y,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),C=e("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),D=e("script,style"),E=b.extend({},w,A,B,z,C),F=e("background,cite,href,longdesc,src,usemap,xlink:href"),G=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),H=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),I=b.extend({},F,H,G),J=document.createElement("pre"),K=/^(\s*)([\s\S]*?)(\s*)$/,L=function(){return String.prototype.trim?function(a){return b.isString(a)?a.trim():a}:function(a){return b.isString(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}();b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&n.push('target="',g,'" '),n.push('href="',a.replace(/"/g,"&quot;"),'">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]||j[4]||(k=(j[3]?"http://":"mailto:")+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular)}({},function(){return this}()),!function(a,b){b["true"]=a,angular.module("textAngularSetup",[]).value("taOptions",{toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(a,b){var c=new FileReader;return"image"===a.type.substring(0,5)?(c.onload=function(){""!==c.result&&b("insertImage",c.result,!0)},c.readAsDataURL(a),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(a){var b=angular.element("<iframe></iframe>"),c=a.prop("attributes");angular.forEach(c,function(a){b.attr(a.name,a.value)}),b.attr("src",b.attr("ta-insert-video")),a.replaceWith(b)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).run(["taRegisterTool","$window","taTranslations","taSelection",function(a,b,c,d){a("html",{iconclass:"fa fa-code",tooltiptext:c.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var e=function(a){return function(){return this.$editor().queryFormatBlockState(a)}},f=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(b){a(b.toLowerCase(),{buttontext:b.toUpperCase(),tooltiptext:c.heading.tooltip+b.charAt(1),action:f,activeState:e(b.toLowerCase())})}),a("p",{buttontext:"P",tooltiptext:c.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),a("pre",{buttontext:"pre",tooltiptext:c.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),a("ul",{iconclass:"fa fa-list-ul",tooltiptext:c.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),a("ol",{iconclass:"fa fa-list-ol",tooltiptext:c.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),a("quote",{iconclass:"fa fa-quote-right",tooltiptext:c.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("undo",{iconclass:"fa fa-undo",tooltiptext:c.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),a("redo",{iconclass:"fa fa-repeat",tooltiptext:c.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),a("bold",{iconclass:"fa fa-bold",tooltiptext:c.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),a("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:c.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(a){var b=!1;return a&&(b="left"===a.css("text-align")||"left"===a.attr("align")||"right"!==a.css("text-align")&&"center"!==a.css("text-align")&&"justify"!==a.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),b=b||this.$editor().queryCommandState("justifyLeft")}}),a("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:c.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(a){var b=!1;return a&&(b="right"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyRight")}}),a("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:c.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(a){var b=!1;return a&&(b="center"===a.css("text-align")),b=b||this.$editor().queryCommandState("justifyCenter")}}),a("indent",{iconclass:"fa fa-indent",tooltiptext:c.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),a("outdent",{iconclass:"fa fa-outdent",tooltiptext:c.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1}}),a("italics",{iconclass:"fa fa-italic",tooltiptext:c.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),a("underline",{iconclass:"fa fa-underline",tooltiptext:c.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),a("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:c.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),a("clear",{iconclass:"fa fa-ban",tooltiptext:c.clear.tooltip,action:function(a,b){var c;this.$editor().wrapSelection("removeFormat",null);var e=angular.element(d.getSelectionElement()),f=function(a){a=angular.element(a);var b=a;angular.forEach(a.children(),function(a){var c=angular.element("<p></p>");c.html(angular.element(a).html()),b.after(c),b=c}),a.remove()};if(angular.forEach(e.find("ul"),f),angular.forEach(e.find("ol"),f),"li"===e[0].tagName.toLowerCase()){var g=e[0].parentNode.childNodes,h=[],i=[],j=!1;for(c=0;c<g.length;c++)g[c]===e[0]?j=!0:j?i.push(g[c]):h.push(g[c]);var k=angular.element(e[0].parentNode),l=angular.element("<p></p>");if(l.html(angular.element(e[0]).html()),0===h.length||0===i.length)0===i.length?k.after(l):k[0].parentNode.insertBefore(l[0],k[0]),0===h.length&&0===i.length?k.remove():angular.element(e[0]).remove();else{var m=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">"),n=angular.element("<"+k[0].tagName+"></"+k[0].tagName+">");for(c=0;c<h.length;c++)m.append(angular.element(h[c]));for(c=0;c<i.length;c++)n.append(angular.element(i[c]));k.after(n),k.after(l),k.after(m),k.remove()}d.setSelectionToElementEnd(l[0])}var o=this.$editor(),p=function(a){a=angular.element(a),a[0]!==o.displayElements.text[0]&&a.removeAttr("class"),angular.forEach(a.children(),p)};angular.forEach(e,p),"li"!==e[0].tagName.toLowerCase()&&"ol"!==e[0].tagName.toLowerCase()&&"ul"!==e[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),b()}});var g=function(a,b,c){var d=function(){c.updateTaBindtaTextElement(),c.hidePopover()};a.preventDefault(),c.displayElements.popover.css("width","375px");var e=c.displayElements.popoverContainer;e.empty();var f=angular.element('<div class="btn-group" style="padding-right: 6px;">'),g=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');g.on("click",function(a){a.preventDefault(),b.css({width:"100%",height:""}),d()});var h=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');h.on("click",function(a){a.preventDefault(),b.css({width:"50%",height:""}),d()});var i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');i.on("click",function(a){a.preventDefault(),b.css({width:"25%",height:""}),d()});var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');j.on("click",function(a){a.preventDefault(),b.css({width:"",height:""}),d()}),f.append(g),f.append(h),f.append(i),f.append(j),e.append(f),f=angular.element('<div class="btn-group" style="padding-right: 6px;">');var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');k.on("click",function(a){a.preventDefault(),b.css("float","left"),b.css("cssFloat","left"),b.css("styleFloat","left"),d()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');l.on("click",function(a){a.preventDefault(),b.css("float","right"),b.css("cssFloat","right"),b.css("styleFloat","right"),d()});var m=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');m.on("click",function(a){a.preventDefault(),b.css("float",""),b.css("cssFloat",""),b.css("styleFloat",""),d()}),f.append(k),f.append(m),f.append(l),e.append(f),f=angular.element('<div class="btn-group">');var n=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');n.on("click",function(a){a.preventDefault(),b.remove(),d()}),f.append(n),e.append(f),c.showPopover(b),c.showResizeOverlay(b)};a("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:c.insertImage.tooltip,action:function(){var a;return a=b.prompt(c.insertImage.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("insertImage",a,!0):void 0},onElementSelect:{element:"img",action:g}}),a("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:c.insertVideo.tooltip,action:function(){var a;if(a=b.prompt(c.insertVideo.dialogPrompt,"https://"),a&&""!==a&&"https://"!==a){var d=a.match(/(\?|&)v=[^&]*/);if(d&&d.length>0){var e="https://www.youtube.com/embed/"+d[0].substring(3),f='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+d[0].substring(3)+'/hqdefault.jpg" ta-insert-video="'+e+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",f,!0)}}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:g}}),a("insertLink",{tooltiptext:c.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var a;return a=b.prompt(c.insertLink.dialogPrompt,"http://"),a&&""!==a&&"http://"!==a?this.$editor().wrapSelection("createLink",a,!0):void 0},activeState:function(a){return a?"A"===a[0].tagName:!1},onElementSelect:{element:"a",action:function(a,d,e){a.preventDefault(),e.displayElements.popover.css("width","436px");var f=e.displayElements.popoverContainer;f.empty(),f.css("line-height","28px");var g=angular.element('<a href="'+d.attr("href")+'" target="_blank">'+d.attr("href")+"</a>");g.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),f.append(g);var h=angular.element('<div class="btn-group pull-right">'),i=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');i.on("click",function(a){a.preventDefault();var f=b.prompt(c.insertLink.dialogPrompt,d.attr("href"));f&&""!==f&&"http://"!==f&&(d.attr("href",f),e.updateTaBindtaTextElement()),e.hidePopover()}),h.append(i);var j=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+c.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');j.on("click",function(a){a.preventDefault(),d.replaceWith(d.contents()),e.updateTaBindtaTextElement(),e.hidePopover()}),h.append(j);var k=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+c.editLink.targetToggle.buttontext+"</button>");"_blank"===d.attr("target")&&k.addClass("active"),k.on("click",function(a){a.preventDefault(),d.attr("target","_blank"===d.attr("target")?"":"_blank"),k.toggleClass("active"),e.updateTaBindtaTextElement()}),h.append(k),f.append(h),e.showPopover(d)}}}),a("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerHTML||"",c=0;return""!==b.replace(/\s*<[^>]*?>\s*/g,"")&&(c=b.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=c,this.$editor().wordcount=c,!1}}),a("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var a=this.$editor().displayElements.text,b=a[0].innerText||a[0].textContent,c=b.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=c,this.$editor().charcount=c,!1}})}]),function(){"use strict";function a(a){try{return 0!==angular.element(a).length}catch(b){return!1}}function b(b,c){if(!b||""===b||r.hasOwnProperty(b))throw"textAngular Error: A unique name is required for a Tool Definition";if(c.display&&(""===c.display||!a(c.display))||!c.display&&!c.buttontext&&!c.iconclass)throw'textAngular Error: Tool Definition for "'+b+'" does not have a valid display/iconclass/buttontext value';r[b]=c}var c={ie:function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},d=!1;c.webkit&&(document.addEventListener("mousedown",function(a){var b=a||window.event,c=b.target;if(d&&null!==c){for(var e=!1,f=c;null!==f&&"html"!==f.tagName.toLowerCase()&&!e;)e="true"===f.contentEditable,f=f.parentNode;e||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),c.focus(),c.select&&c.select())}d=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" unselectable="on" tabIndex="-1">'))}));var e=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,f=/^(ul|li|ol)$/i,g=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,i,j,k,l,m;if(c.ie>8||void 0===c.ie){for(var n=document.styleSheets,o=0;o<n.length;o++)if((0===n[o].media.length||n[o].media.mediaText.match(/(all|screen)/gi))&&n[o].href&&n[o].href.match(/textangular\.(min\.|)css/gi)){h=n[o];break}h||(h=function(){var a=document.createElement("style");return c.webkit&&a.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(a),a.sheet}()),i=function(a,b){return k(h,a,b)},k=function(a,b,c){var d,e;return a.cssRules?d=Math.max(a.cssRules.length-1,0):a.rules&&(d=Math.max(a.rules.length-1,0)),a.insertRule?a.insertRule(b+"{"+c+"}",d):a.addRule(b,c,d),h.rules?e=h.rules[d]:h.cssRules&&(e=h.cssRules[d]),e},m=function(a,b){var c,d;for(c=0;c<b.length;c++)if(b[c].cssText===a.cssText){d=c;break}return d},j=function(a){l(h,a)},l=function(a,b){var c=a.cssRules||a.rules;if(c){var d=m(b,c);a.removeRule?a.removeRule(d):a.deleteRule(d)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(a){return a?""===a?void 0===c.ie?"div":c.ie<=8?"P":"p":c.ie<=8?a.toUpperCase():a:c.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(a,b){return function(c){var d=angular.element("<div></div>");return d[0].innerHTML=c,angular.forEach(a,function(a){var c=[];a.selector&&""!==a.selector?c=d.find(a.selector):a.customAttribute&&""!==a.customAttribute&&(c=b.getByAttribute(d,a.customAttribute)),angular.forEach(c,function(b){b=angular.element(b),a.selector&&""!==a.selector&&a.customAttribute&&""!==a.customAttribute?void 0!==b.attr(a.customAttribute)&&a.renderLogic(b):a.renderLogic(b)})}),d[0].innerHTML}}]).factory("taFixChrome",function(){var a=function(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c,d,e=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",g=0;b=e.exec(a);)c=b[3]||b[4],c&&c.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(c=c.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),d="<"+b[1].trim(),c.trim().length>0&&(d+=" style="+b[2].substring(0,1)+c+b[2].substring(0,1)),d+=b[5].trim()+">",f+=a.substring(g,b.index)+d,g=b.index+b[0].length);return f+=a.substring(g),g>0?f.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):a};return a}).factory("taSanitize",["$sanitize",function(a){function b(a,b){for(var c,d=0,e=0,f=/<[^>]*>/gi;c=f.exec(a);)if(e=c.index,"/"===c[0].substr(1,1)){if(0===d)break;d--}else d++;return b+a.substring(0,e)+angular.element(b)[0].outerHTML.substring(b.length)+a.substring(e)}function c(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var d,f,g,h,i,k,l=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,m="",n="",o=0;f=l.exec(a);){h=f[3]||f[4];var p=new RegExp(j,"i");if(angular.isString(h)&&p.test(h)){i="";for(var q=new RegExp(j,"ig");g=q.exec(h);)for(d=0;d<e.length;d++)g[2*d+2]&&(i+="<"+e[d].tag+">");k=c(a.substring(o,f.index)),n+=m.length>0?b(k,m):k,h=h.replace(new RegExp(j,"ig"),""),n+="<"+f[1].trim(),h.length>0&&(n+=' style="'+h+'"'),n+=f[5]+">",o=f.index+f[0].length,m=i}}return n+=m.length>0?b(a.substring(o),m):a.substring(o)}function d(a){if(!a||!angular.isString(a)||a.length<=0)return a;for(var b,c=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",e=0;b=c.exec(a);){d+=a.substring(e,b.index),e=b.index+b[0].length;var f="<"+b[1]+b[5];/style=("([^"]+)"|'([^']+)')/gi.test(f)?f=f.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(b[3]||b[4])+';"'):f+=' style="text-align:'+(b[3]||b[4])+';"',f+=">",d+=f}return d+a.substring(e)}for(var e=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],f=[],g=0;g<e.length;g++){for(var h="("+e[g].property+":\\s*(",i=0;i<e[g].values.length;i++)i>0&&(h+="|"),h+=e[g].values[i];h+=");)",f.push(h)}var j="("+f.join("|")+")";return function(b,e,f){if(!f)try{b=c(b)}catch(g){}b=d(b);var h;try{h=a(b),f&&(h=b)}catch(g){h=e||""}var i,j=h.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),k=h.replace(/(&#(9|10);)*/gi,""),l=/<pre[^>]*>.*?<\/pre[^>]*>/gi,m=0,n=0;for(h="";null!==(i=l.exec(k))&&m<j.length;)h+=k.substring(n,i.index)+j[m],n=i.index+i[0].length,m++;return h+k.substring(n)}}]).factory("taToolExecuteAction",["$q","$log",function(a,b){return function(c){void 0!==c&&(this.$editor=function(){return c});var d,e=a.defer(),f=e.promise,g=this.$editor();try{d=this.action(e,g.startAction()),f["finally"](function(){g.endAction.call(g)})}catch(h){b.error(h)}(d||void 0===d)&&e.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(a,b,c){var d=function(b,c){var d,e,f=b.find("li");for(e=f.length-1;e>=0;e--)d=angular.element("<"+c+">"+f[e].innerHTML+"</"+c+">"),b.after(d);b.remove(),a.setSelectionToElementEnd(d[0])},g=function(b){/(<br(|\/)>)$/i.test(b.innerHTML.trim())?a.setSelectionBeforeElement(angular.element(b).find("br")[0]):a.setSelectionToElementEnd(b)},h=function(a,b){var c=angular.element("<"+b+">"+a[0].innerHTML+"</"+b+">");a.after(c),a.remove(),g(c.find("li")[0])},i=function(a,c,d){for(var e="",f=0;f<a.length;f++)e+="<"+b("li")+">"+a[f].innerHTML+"</"+b("li")+">";var h=angular.element("<"+d+">"+e+"</"+d+">");c.after(h),c.remove(),g(h.find("li")[0])};return function(g,j){return g=b(g),function(k,l,m,n){var o,p,q,r,s,t,u,v=angular.element("<"+g+">");try{u=a.getSelectionElement()}catch(w){}var x=angular.element(u);if(void 0!==u){var y=u.tagName.toLowerCase();if("insertorderedlist"===k.toLowerCase()||"insertunorderedlist"===k.toLowerCase()){var z=b("insertorderedlist"===k.toLowerCase()?"ol":"ul");if(y===z)return d(x,g);if("li"===y&&x.parent()[0].tagName.toLowerCase()===z&&1===x.parent().children().length)return d(x.parent(),g);if("li"===y&&x.parent()[0].tagName.toLowerCase()!==z&&1===x.parent().children().length)return h(x.parent(),z);if(y.match(e)&&!x.hasClass("ta-bind")){if("ol"===y||"ul"===y)return h(x,z);var A=!1;return angular.forEach(x.children(),function(a){a.tagName.match(e)&&(A=!0)}),A?i(x.children(),x,z):i([angular.element("<div>"+u.innerHTML+"</div>")[0]],x,z)}if(y.match(e)){if(r=a.getOnlySelectedElements(),0===r.length)p=angular.element("<"+z+"><li>"+u.innerHTML+"</li></"+z+">"),x.html(""),x.append(p);else{if(1===r.length&&("ol"===r[0].tagName.toLowerCase()||"ul"===r[0].tagName.toLowerCase()))return r[0].tagName.toLowerCase()===z?d(angular.element(r[0]),g):h(angular.element(r[0]),z);q="";var B=[];for(o=0;o<r.length;o++)if(3!==r[o].nodeType){var C=angular.element(r[o]);if("li"===r[o].tagName.toLowerCase())continue;q+="ol"===r[o].tagName.toLowerCase()||"ul"===r[o].tagName.toLowerCase()?C[0].innerHTML:"span"!==r[o].tagName.toLowerCase()||"ol"!==r[o].childNodes[0].tagName.toLowerCase()&&"ul"!==r[o].childNodes[0].tagName.toLowerCase()?"<"+b("li")+">"+C[0].innerHTML+"</"+b("li")+">":C[0].childNodes[0].innerHTML,B.unshift(C)}p=angular.element("<"+z+">"+q+"</"+z+">"),B.pop().replaceWith(p),angular.forEach(B,function(a){a.remove()})}return void a.setSelectionToElementEnd(p[0])}}else{if("formatblock"===k.toLowerCase()){for(t=m.toLowerCase().replace(/[<>]/gi,""),"default"===t.trim()&&(t=g,m="<"+g+">"),p="li"===y?x.parent():x;!p[0].tagName||!p[0].tagName.match(e)&&!p.parent().attr("contenteditable");)p=p.parent(),y=(p[0].tagName||"").toLowerCase();if(y===t){r=p.children();var D=!1;for(o=0;o<r.length;o++)D=D||r[o].tagName.match(e);D?(p.after(r),s=p.next(),p.remove(),p=s):(v.append(p[0].childNodes),p.after(v),p.remove(),p=v)}else if(p.parent()[0].tagName.toLowerCase()!==t||p.parent().hasClass("ta-bind"))if(y.match(f))p.wrap(m);else{for(r=a.getOnlySelectedElements(),0===r.length&&(r=[p[0]]),o=0;o<r.length;o++)if(3===r[o].nodeType||!r[o].tagName.match(e))for(;3===r[o].nodeType||!r[o].tagName||!r[o].tagName.match(e);)r[o]=r[o].parentNode;if(angular.element(r[0]).hasClass("ta-bind"))p=angular.element(m),p[0].innerHTML=r[0].innerHTML,r[0].innerHTML=p[0].outerHTML;else if("blockquote"===t){for(q="",o=0;o<r.length;o++)q+=r[o].outerHTML;for(p=angular.element(m),p[0].innerHTML=q,r[0].parentNode.insertBefore(p[0],r[0]),o=r.length-1;o>=0;o--)r[o].parentNode&&r[o].parentNode.removeChild(r[o])}else for(o=0;o<r.length;o++)p=angular.element(m),p[0].innerHTML=r[o].innerHTML,
r[o].parentNode.insertBefore(p[0],r[o]),r[o].parentNode.removeChild(r[o])}else{var E=p.parent(),F=E.contents();for(o=0;o<F.length;o++)E.parent().hasClass("ta-bind")&&3===F[o].nodeType&&(v=angular.element("<"+g+">"),v[0].innerHTML=F[o].outerHTML,F[o]=v[0]),E.parent()[0].insertBefore(F[o],E[0]);E.remove()}return void a.setSelectionToElementEnd(p[0])}if("createlink"===k.toLowerCase()){var G='<a href="'+m+'" target="'+(n.a.target?n.a.target:"")+'">',H="</a>",I=a.getSelection();if(I.collapsed)a.insertHtml(G+m+H,j);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var J=angular.element(G+H)[0];rangy.getSelection().getRangeAt(0).surroundContents(J)}return}if("inserthtml"===k.toLowerCase())return void a.insertHtml(m,j)}}try{c[0].execCommand(k,l,m)}catch(w){}}}}]).service("taSelection",["$window","$document","taDOM",function(a,b,c){var d=b[0],f=a.rangy,h=function(a,b){return a.tagName&&a.tagName.match(/^br$/i)&&0===b&&!a.previousSibling?{element:a.parentNode,offset:0}:{element:a,offset:b}},i={getSelection:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer,c={start:h(a.startContainer,a.startOffset),end:h(a.endContainer,a.endOffset),collapsed:a.collapsed};return b=3===b.nodeType?b.parentNode:b,c.container=b.parentNode===c.start.element||b.parentNode===c.end.element?b.parentNode:b,c},getOnlySelectedElements:function(){var a=f.getSelection().getRangeAt(0),b=a.commonAncestorContainer;return b=3===b.nodeType?b.parentNode:b,a.getNodes([1],function(a){return a.parentNode===b})},getSelectionElement:function(){return i.getSelection().container},setSelection:function(a,b,c){var d=f.createRange();d.setStart(a,b),d.setEnd(a,c),f.getSelection().setSingleRange(d)},setSelectionBeforeElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionAfterElement:function(a){var b=f.createRange();b.selectNode(a),b.collapse(!1),f.getSelection().setSingleRange(b)},setSelectionToElementStart:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!0),f.getSelection().setSingleRange(b)},setSelectionToElementEnd:function(a){var b=f.createRange();b.selectNodeContents(a),b.collapse(!1),a.childNodes&&a.childNodes[a.childNodes.length-1]&&"br"===a.childNodes[a.childNodes.length-1].nodeName&&(b.startOffset=b.endOffset=b.startOffset-1),f.getSelection().setSingleRange(b)},insertHtml:function(a,b){var h,j,k,l,m,n,o,p=angular.element("<div>"+a+"</div>"),q=f.getSelection().getRangeAt(0),r=d.createDocumentFragment(),s=p[0].childNodes,t=!0;if(s.length>0){for(l=[],k=0;k<s.length;k++)"p"===s[k].nodeName.toLowerCase()&&""===s[k].innerHTML.trim()||3===s[k].nodeType&&""===s[k].nodeValue.trim()||(t=t&&!e.test(s[k].nodeName),l.push(s[k]));for(var u=0;u<l.length;u++)n=r.appendChild(l[u]);!t&&q.collapsed&&/^(|<br(|\/)>)$/i.test(q.startContainer.innerHTML)&&q.selectNode(q.startContainer)}else t=!0,n=r=d.createTextNode(a);if(t)q.deleteContents();else if(q.collapsed&&q.startContainer!==b)if(q.startContainer.innerHTML&&q.startContainer.innerHTML.match(/^<[^>]*>$/i))h=q.startContainer,1===q.startOffset?(q.setStartAfter(h),q.setEndAfter(h)):(q.setStartBefore(h),q.setEndBefore(h));else{if(3===q.startContainer.nodeType&&q.startContainer.parentNode!==b)for(h=q.startContainer.parentNode,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,q.startContainer,q.startOffset);!g.test(h.nodeName);){angular.element(h).after(j),h=h.parentNode;var v=j;j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,v)}else h=q.startContainer,j=h.cloneNode(),c.splitNodes(h.childNodes,h,j,void 0,void 0,q.startOffset);if(angular.element(h).after(j),q.setStartAfter(h),q.setEndAfter(h),/^(|<br(|\/)>)$/i.test(h.innerHTML.trim())&&(q.setStartBefore(h),q.setEndBefore(h),angular.element(h).remove()),/^(|<br(|\/)>)$/i.test(j.innerHTML.trim())&&angular.element(j).remove(),"li"===h.nodeName.toLowerCase()){for(o=d.createDocumentFragment(),m=0;m<r.childNodes.length;m++)p=angular.element("<li>"),c.transferChildNodes(r.childNodes[m],p[0]),c.transferNodeAttributes(r.childNodes[m],p[0]),o.appendChild(p[0]);r=o,n&&(n=r.childNodes[r.childNodes.length-1],n=n.childNodes[n.childNodes.length-1])}}else q.deleteContents();q.insertNode(r),n&&i.setSelectionToElementEnd(n)}};return i}]).service("taDOM",function(){var a={getByAttribute:function(b,c){var d=[],e=b.children();return e.length&&angular.forEach(e,function(b){d=d.concat(a.getByAttribute(angular.element(b),c))}),void 0!==b.attr(c)&&d.push(b),d},transferChildNodes:function(a,b){for(b.innerHTML="";a.childNodes.length>0;)b.appendChild(a.childNodes[0]);return b},splitNodes:function(b,c,d,e,f,g){if(!e&&isNaN(g))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var h=document.createDocumentFragment(),i=document.createDocumentFragment(),j=0;b.length>0&&(isNaN(g)||g!==j)&&b[0]!==e;)h.appendChild(b[0]),j++;for(!isNaN(f)&&f>=0&&b[0]&&(h.appendChild(document.createTextNode(b[0].nodeValue.substring(0,f))),b[0].nodeValue=b[0].nodeValue.substring(f));b.length>0;)i.appendChild(b[0]);a.transferChildNodes(h,c),a.transferChildNodes(i,d)},transferNodeAttributes:function(a,b){for(var c=0;c<a.attributes.length;c++)b.setAttribute(a.attributes[c].name,a.attributes[c].value);return b}};return a}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMaxText));if(isNaN(e))throw"Max text must be an integer";c.$observe("taMaxText",function(a){if(e=parseInt(a),isNaN(e))throw"Max text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMaxText=function(a){var b=angular.element("<div/>");return b.html(a),b.text().length<=e}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){var e=parseInt(a.$eval(c.taMinText));if(isNaN(e))throw"Min text must be an integer";c.$observe("taMinText",function(a){if(e=parseInt(a),isNaN(e))throw"Min text must be an integer";d.$dirty&&d.$validate()}),d.$validators.taMinText=function(a){var b=angular.element("<div/>");return b.html(a),!b.text().length||b.text().length>=e}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var a=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(b){return function(c){if(!c)return!0;var d,e=/(^[^<]|>)[^<]/i.exec(c);return e?d=e.index:(c=c.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),d=c.indexOf(">")),c=c.trim().substring(d,d+100),/^[^<>]+$/i.test(c)?!1:0===c.length||c===b||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(c)?!0:/>\s*[^\s<]/i.test(c)||a.test(c)?!1:!0}}}]).directive("taButton",[function(){return{link:function(a,b){b.attr("unselectable","on"),b.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM",function(a,b,f,h,k,l,m,n,o,q,r,s,t){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(l,u,v,w){var x,y,z,A,B=w[0],C=w[1]||{},D=void 0!==u.attr("contenteditable")&&u.attr("contenteditable"),E=D||"textarea"===u[0].tagName.toLowerCase()||"input"===u[0].tagName.toLowerCase(),F=!1,G=!1,H=!1,I=v.taUnsafeSanitizer||q.disableSanitizer,J=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,K=/^(8|13|32|46|59|61|107|109|186|187|188|189|190|191|192|219|220|221|222)$/i;void 0===v.taDefaultWrap&&(v.taDefaultWrap="p"),""===v.taDefaultWrap?(z="",A=void 0===c.ie?"<div><br></div>":c.ie>=11?"<p><br></p>":c.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(z=void 0===c.ie||c.ie>=11?"<"+v.taDefaultWrap+"><br></"+v.taDefaultWrap+">":c.ie<=8?"<"+v.taDefaultWrap.toUpperCase()+"></"+v.taDefaultWrap.toUpperCase()+">":"<"+v.taDefaultWrap+"></"+v.taDefaultWrap+">",A=void 0===c.ie||c.ie>=11?"<"+v.taDefaultWrap+"><br></"+v.taDefaultWrap+">":c.ie<=8?"<"+v.taDefaultWrap.toUpperCase()+">&nbsp;</"+v.taDefaultWrap.toUpperCase()+">":"<"+v.taDefaultWrap+">&nbsp;</"+v.taDefaultWrap+">"),C.$options||(C.$options={});var L=r(A),M=function(a){if(L(a))return a;var b=angular.element("<div>"+a+"</div>");if(0===b.children().length)a="<"+v.taDefaultWrap+">"+a+"</"+v.taDefaultWrap+">";else{var c,d=b[0].childNodes,f=!1;for(c=0;c<d.length&&!(f=d[c].nodeName.toLowerCase().match(e));c++);if(f)for(a="",c=0;c<d.length;c++)if(d[c].nodeName.toLowerCase().match(e))a+=d[c].outerHTML;else{var g=d[c].outerHTML||d[c].nodeValue;a+=""!==g.trim()?"<"+v.taDefaultWrap+">"+g+"</"+v.taDefaultWrap+">":g}else a="<"+v.taDefaultWrap+">"+a+"</"+v.taDefaultWrap+">"}return a};v.taPaste&&(y=s(v.taPaste)),u.addClass("ta-bind");var N;l["$undoManager"+(v.id||"")]=B.$undoManager={_stack:[],_index:0,_max:1e3,push:function(a){return"undefined"==typeof a||null===a||"undefined"!=typeof this.current()&&null!==this.current()&&a===this.current()?a:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(a),N&&b.cancel(N),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,a)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(a){return 0>a||a>this._stack.length-1?void 0:(this._index=a,this.current())},current:function(){return this._stack[this._index]}};var O,P=l["$undoTaBind"+(v.id||"")]=function(){if(!F&&D){var a=B.$undoManager.undo();"undefined"!=typeof a&&null!==a&&(ca(a),S(a,!1),O&&b.cancel(O),O=b(function(){u[0].focus(),m.setSelectionToElementEnd(u[0])},1))}},Q=l["$redoTaBind"+(v.id||"")]=function(){if(!F&&D){var a=B.$undoManager.redo();"undefined"!=typeof a&&null!==a&&(ca(a),S(a,!1),O&&b.cancel(O),O=b(function(){u[0].focus(),m.setSelectionToElementEnd(u[0])},1))}},R=function(){if(D)return u[0].innerHTML;if(E)return u.val();throw"textAngular Error: attempting to update non-editable taBind"},S=function(a,b,c){H=c||!1,("undefined"==typeof b||null===b)&&(b=!0&&D),("undefined"==typeof a||null===a)&&(a=R()),L(a)?(""!==B.$viewValue&&B.$setViewValue(""),b&&""!==B.$undoManager.current()&&B.$undoManager.push("")):(ba(),B.$viewValue!==a&&(B.$setViewValue(a),b&&B.$undoManager.push(a))),B.$render()};l["updateTaBind"+(v.id||"")]=function(){F||S(void 0,void 0,!0)};var T=function(b){return B.$oldViewValue=a(k(b),B.$oldViewValue,I)};if(u.attr("required")&&(B.$validators.required=function(a,b){return!L(a||b)}),B.$parsers.push(T),B.$parsers.unshift(M),B.$formatters.push(T),B.$formatters.unshift(M),B.$formatters.unshift(function(a){return B.$undoManager.push(a||"")}),E)if(l.events={},D){var U=!1,V=function(c){if(c&&c.trim().length){if(c.match(/class=["']*Mso(Normal|List)/i)){var d=c.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);d=d?d[1]:c,d=d.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var e=angular.element("<div>"+d+"</div>"),f=angular.element("<div></div>"),g={element:null,lastIndent:[],lastLi:null,isUl:!1};g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0};for(var h=function(a){g.isUl=a,g.element=angular.element(a?"<ul>":"<ol>"),g.lastIndent=[],g.lastIndent.peek=function(){var a=this.length;return a>0?this[a-1]:void 0},g.lastLevelMatch=null},i=0;i<=e[0].childNodes.length;i++)if(e[0].childNodes[i]&&"#text"!==e[0].childNodes[i].nodeName&&"p"===e[0].childNodes[i].tagName.toLowerCase()){var j=angular.element(e[0].childNodes[i]),k=(j.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(k){if(j[0].childNodes.length<2||j[0].childNodes[1].childNodes.length<1)continue;var n="bullet"===k[1].toLowerCase()||"number"!==k[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(j[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(j[0].childNodes[1].childNodes[0].innerHTML)),o=(j.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),p=parseFloat(o?o[1]:0),q=(j.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(q&&q[2]&&(p=parseInt(q[2])),q&&(!g.lastLevelMatch||q[1]!==g.lastLevelMatch[1])||!k[3]||"first"===k[3].toLowerCase()||null===g.lastIndent.peek()||g.isUl!==n&&g.lastIndent.peek()===p)h(n),f.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()<p)g.element=angular.element(n?"<ul>":"<ol>"),g.lastLi.append(g.element);else if(null!=g.lastIndent.peek()&&g.lastIndent.peek()>p){for(;null!=g.lastIndent.peek()&&g.lastIndent.peek()>p;)if("li"!==g.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(g.element.parent()[0].tagName.toLowerCase()))break;g.element=g.element.parent(),g.lastIndent.pop()}else g.element=g.element.parent();g.isUl="ul"===g.element[0].tagName.toLowerCase(),n!==g.isUl&&(h(n),f.append(g.element))}g.lastLevelMatch=q,p!==g.lastIndent.peek()&&g.lastIndent.push(p),g.lastLi=angular.element("<li>"),g.element.append(g.lastLi),g.lastLi.html(j.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),j.remove()}else h(!1),f.append(j)}var r=function(a){a=angular.element(a);for(var b=a[0].childNodes.length-1;b>=0;b--)a.after(a[0].childNodes[b]);a.remove()};angular.forEach(f.find("span"),function(a){a.removeAttribute("lang"),a.attributes.length<=0&&r(a)}),angular.forEach(f.find("font"),r),c=f.html()}else{if(c=c.replace(/<(|\/)meta[^>]*?>/gi,""),c.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(c.match(/<[^>]*?(text-angular)[^>]*?>/)){var s=angular.element("<div>"+c+"</div>");s.find("textarea").remove();for(var v=t.getByAttribute(s,"ta-bind"),w=0;w<v.length;w++){for(var x=v[w][0].parentNode.parentNode,z=0;z<v[w][0].childNodes.length;z++)x.parentNode.insertBefore(v[w][0].childNodes[z],x);x.parentNode.removeChild(x)}c=s.html().replace('<br class="Apple-interchange-newline">',"")}}else c.match(/^<span/)&&(c=c.replace(/<(|\/)span[^>]*?>/gi,""));c=c.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(c)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(c)===!1&&(c=c.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),y&&(c=y(l,{$html:c})||c),c=a(c,"",I),m.insertHtml(c,u[0]),b(function(){B.$setViewValue(R()),U=!1,u.removeClass("processing-paste")},0)}else U=!1,u.removeClass("processing-paste")};u.on("paste",l.events.paste=function(a,c){if(c&&angular.extend(a,c),F||U)return a.stopPropagation(),a.preventDefault(),!1;U=!0,u.addClass("processing-paste");var d,e=(a.originalEvent||a).clipboardData;if(e&&e.getData&&e.types.length>0){for(var g="",i=0;i<e.types.length;i++)g+=" "+e.types[i];return/text\/html/i.test(g)?d=e.getData("text/html"):/text\/plain/i.test(g)&&(d=e.getData("text/plain")),V(d),a.stopPropagation(),a.preventDefault(),!1}var j=f.rangy.saveSelection(),k=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');h.find("body").append(k),k[0].focus(),b(function(){f.rangy.restoreSelection(j),V(k[0].innerHTML),u[0].focus(),k.remove()},0)}),u.on("cut",l.events.cut=function(a){F?a.preventDefault():b(function(){B.$setViewValue(R())},0)}),u.on("keydown",l.events.keydown=function(a,b){if(b&&angular.extend(a,b),!F)if(a.altKey||!a.metaKey&&!a.ctrlKey){if(13===a.keyCode&&!a.shiftKey){var c,d=m.getSelectionElement();if(!d.tagName.match(g))return;var e=angular.element(z);if(/^<br(|\/)>$/i.test(d.innerHTML.trim())&&"blockquote"===d.parentNode.tagName.toLowerCase()&&!d.nextSibling){c=angular.element(d);var f=c.parent();f.after(e),c.remove(),0===f.children().length&&f.remove(),m.setSelectionToElementStart(e[0]),a.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(d.innerHTML.trim())&&"blockquote"===d.tagName.toLowerCase()&&(c=angular.element(d),c.after(e),c.remove(),m.setSelectionToElementStart(e[0]),a.preventDefault())}}else 90!==a.keyCode||a.shiftKey?(90===a.keyCode&&a.shiftKey||89===a.keyCode&&!a.shiftKey)&&(Q(),a.preventDefault()):(P(),a.preventDefault())});var W;if(u.on("keyup",l.events.keyup=function(a,c){if(c&&angular.extend(a,c),9===a.keyCode){var d=m.getSelection();return void(d.start.element===u[0]&&u.children().length&&m.setSelectionToElementStart(u.children()[0]))}if(N&&b.cancel(N),!F&&!J.test(a.keyCode)){if(""!==z&&13===a.keyCode&&!a.shiftKey){for(var e=m.getSelectionElement();!e.tagName.match(g)&&e!==u[0];)e=e.parentNode;if(e.tagName.toLowerCase()!==v.taDefaultWrap&&"li"!==e.tagName.toLowerCase()&&(""===e.innerHTML.trim()||"<br>"===e.innerHTML.trim())){var h=angular.element(z);angular.element(e).replaceWith(h),m.setSelectionToElementStart(h[0])}}var i=R();if(""!==z&&""===i.trim())ca(z),m.setSelectionToElementStart(u.children()[0]);else if("<"!==i.substring(0,1)&&""!==v.taDefaultWrap){var j=f.rangy.saveSelection();i=R(),i="<"+v.taDefaultWrap+">"+i+"</"+v.taDefaultWrap+">",ca(i),f.rangy.restoreSelection(j)}var k=x!==a.keyCode&&K.test(a.keyCode);W&&b.cancel(W),W=b(function(){S(i,k,!0)},C.$options.debounce||400),k||(N=b(function(){B.$undoManager.push(i)},250)),x=a.keyCode}}),u.on("blur",l.events.blur=function(){G=!1,F?(H=!0,B.$render()):S(void 0,void 0,!0)}),v.placeholder&&(c.ie>8||void 0===c.ie)){var X;if(!v.id)throw"textAngular Error: An unique ID is required for placeholders to work";X=i("#"+v.id+".placeholder-text:before",'content: "'+v.placeholder+'"'),l.$on("$destroy",function(){j(X)})}u.on("focus",l.events.focus=function(){G=!0,u.removeClass("placeholder-text")}),u.on("mouseup",l.events.mouseup=function(){var a=m.getSelection();a.start.element===u[0]&&u.children().length&&m.setSelectionToElementStart(u.children()[0])}),u.on("mousedown",l.events.mousedown=function(a,b){b&&angular.extend(a,b),a.stopPropagation()})}else{u.on("change blur",l.events.change=l.events.blur=function(){F||B.$setViewValue(R())}),u.on("keydown",l.events.keydown=function(a,b){if(b&&angular.extend(a,b),9===a.keyCode){var c=this.selectionStart,d=this.selectionEnd,e=u.val();if(a.shiftKey){var f=e.lastIndexOf("\n",c),g=e.lastIndexOf("	",c);-1!==g&&g>=f&&(u.val(e.substring(0,g)+e.substring(g+1)),this.selectionStart=this.selectionEnd=c-1)}else u.val(e.substring(0,c)+"	"+e.substring(d)),this.selectionStart=this.selectionEnd=c+1;a.preventDefault()}});var Y=function(a,b){for(var c="",d=0;b>d;d++)c+=a;return c},Z=function(a,b){var c="",d=a.childNodes;b++,c+=Y("	",b-1)+a.outerHTML.substring(0,a.outerHTML.indexOf("<li"));for(var e=0;e<d.length;e++)d[e].outerHTML&&(c+="ul"===d[e].nodeName.toLowerCase()||"ol"===d[e].nodeName.toLowerCase()?"\n"+Z(d[e],b):"\n"+Y("	",b)+d[e].outerHTML);return c+="\n"+Y("	",b-1)+a.outerHTML.substring(a.outerHTML.lastIndexOf("<"))};B.$formatters.unshift(function(a){var b=angular.element("<div>"+a+"</div>")[0].childNodes;if(b.length>0){a="";for(var c=0;c<b.length;c++)b[c].outerHTML&&(a.length>0&&(a+="\n"),a+="ul"===b[c].nodeName.toLowerCase()||"ol"===b[c].nodeName.toLowerCase()?""+Z(b[c],0):""+b[c].outerHTML)}return a})}var $,_=function(a){return l.$emit("ta-element-select",this),a.preventDefault(),!1},aa=function(a,c){if(c&&angular.extend(a,c),!p&&!F){p=!0;var d;d=a.originalEvent?a.originalEvent.dataTransfer:a.dataTransfer,l.$emit("ta-drop-event",this,a,d),b(function(){p=!1,S(void 0,void 0,!0)},100)}},ba=l["reApplyOnSelectorHandlers"+(v.id||"")]=function(){F||angular.forEach(n,function(a){u.find(a).off("click",_).on("click",_)})},ca=function(a){u[0].innerHTML=a},da=!1;B.$render=function(){if(!da){da=!0;var a=B.$viewValue||"";H||(D&&G&&(u.removeClass("placeholder-text"),$&&b.cancel($),$=b(function(){G||(u[0].focus(),m.setSelectionToElementEnd(u.children()[u.children().length-1])),$=void 0},1)),D?(ca(v.placeholder?""===a?z:a:""===a?z:a),F?u.off("drop",aa):(ba(),u.on("drop",aa))):"textarea"!==u[0].tagName.toLowerCase()&&"input"!==u[0].tagName.toLowerCase()?ca(o(a)):u.val(a)),D&&v.placeholder&&(""===a?G?u.removeClass("placeholder-text"):u.addClass("placeholder-text"):u.removeClass("placeholder-text")),da=H=!1}},v.taReadonly&&(F=l.$eval(v.taReadonly),F?(u.addClass("ta-readonly"),("textarea"===u[0].tagName.toLowerCase()||"input"===u[0].tagName.toLowerCase())&&u.attr("disabled","disabled"),void 0!==u.attr("contenteditable")&&u.attr("contenteditable")&&u.removeAttr("contenteditable")):(u.removeClass("ta-readonly"),"textarea"===u[0].tagName.toLowerCase()||"input"===u[0].tagName.toLowerCase()?u.removeAttr("disabled"):D&&u.attr("contenteditable","true")),l.$watch(v.taReadonly,function(a,b){b!==a&&(a?(u.addClass("ta-readonly"),("textarea"===u[0].tagName.toLowerCase()||"input"===u[0].tagName.toLowerCase())&&u.attr("disabled","disabled"),void 0!==u.attr("contenteditable")&&u.attr("contenteditable")&&u.removeAttr("contenteditable"),angular.forEach(n,function(a){u.find(a).on("click",_)}),u.off("drop",aa)):(u.removeClass("ta-readonly"),"textarea"===u[0].tagName.toLowerCase()||"input"===u[0].tagName.toLowerCase()?u.removeAttr("disabled"):D&&u.attr("contenteditable","true"),angular.forEach(n,function(a){u.find(a).off("click",_)}),u.on("drop",aa)),F=a)})),D&&!F&&(angular.forEach(n,function(a){u.find(a).on("click",_)}),u.on("drop",aa),u.on("blur",function(){c.webkit&&(d=!0)}))}}}]);var p=!1,q=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]),r={};q.constant("taRegisterTool",b),q.value("taTools",r),q.config([function(){angular.forEach(r,function(a,b){delete r[b]})}]),q.run([function(){if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}]),q.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(a,b,c,d,e,f,g,h,i,j,k,l){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B=o.serial?o.serial:Math.floor(1e16*Math.random());m._name=o.name?o.name:"textAngularEditor"+B;var C=function(a,c,d){b(function(){var b=function(){a.off(c,b),d.apply(this,arguments)};a.on(c,b)},100)};if(y=e(o.taDefaultWrap),angular.extend(m,angular.copy(c),{wrapSelection:function(a,b,c){"undo"===a.toLowerCase()?m["$undoTaBindtaTextElement"+B]():"redo"===a.toLowerCase()?m["$redoTaBindtaTextElement"+B]():(y(a,!1,b,m.defaultTagAttributes),c&&m["reApplyOnSelectorHandlerstaTextElement"+B](),m.displayElements.text[0].focus())},showHtml:m.$eval(o.taShowHtml)||!1}),o.taFocussedClass&&(m.classes.focussed=o.taFocussedClass),o.taTextEditorClass&&(m.classes.textEditor=o.taTextEditorClass),o.taHtmlEditorClass&&(m.classes.htmlEditor=o.taHtmlEditorClass),o.taDefaultTagAttributes)try{angular.extend(m.defaultTagAttributes,angular.fromJson(o.taDefaultTagAttributes))}catch(D){j.error(D)}o.taTextEditorSetup&&(m.setup.textEditorSetup=m.$parent.$eval(o.taTextEditorSetup)),o.taHtmlEditorSetup&&(m.setup.htmlEditorSetup=m.$parent.$eval(o.taHtmlEditorSetup)),m.fileDropHandler=o.taFileDrop?m.$parent.$eval(o.taFileDrop):m.defaultFileDropHandler,w=n[0].innerHTML,n[0].innerHTML="",m.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},m.displayElements.popover.append(m.displayElements.popoverArrow),m.displayElements.popover.append(m.displayElements.popoverContainer),m.displayElements.scrollWindow.append(m.displayElements.popover),m.displayElements.popover.on("mousedown",function(a,b){return b&&angular.extend(a,b),a.preventDefault(),!1}),m.showPopover=function(a){m.displayElements.popover.css("display","block"),m.reflowPopover(a),i.addClass(m.displayElements.popover,"in"),C(h.find("body"),"click keyup",function(){m.hidePopover()})},m.reflowPopover=function(a){m.displayElements.text[0].offsetHeight-51>a[0].offsetTop?(m.displayElements.popover.css("top",a[0].offsetTop+a[0].offsetHeight+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("top").addClass("bottom")):(m.displayElements.popover.css("top",a[0].offsetTop-54+m.displayElements.scrollWindow[0].scrollTop+"px"),m.displayElements.popover.removeClass("bottom").addClass("top"));var b=m.displayElements.text[0].offsetWidth-m.displayElements.popover[0].offsetWidth,c=a[0].offsetLeft+a[0].offsetWidth/2-m.displayElements.popover[0].offsetWidth/2;m.displayElements.popover.css("left",Math.max(0,Math.min(b,c))+"px"),m.displayElements.popoverArrow.css("margin-left",Math.min(c,Math.max(0,c-b))-11+"px")},m.hidePopover=function(){var a=function(){m.displayElements.popover.css("display",""),m.displayElements.popoverContainer.attr("style",""),m.displayElements.popoverContainer.attr("class","popover-content")};k.when(i.removeClass(m.displayElements.popover,"in",a)).then(a)},m.displayElements.resize.overlay.append(m.displayElements.resize.background),angular.forEach(m.displayElements.resize.anchors,function(a){m.displayElements.resize.overlay.append(a)}),m.displayElements.resize.overlay.append(m.displayElements.resize.info),m.displayElements.scrollWindow.append(m.displayElements.resize.overlay),m.reflowResizeOverlay=function(a){a=angular.element(a)[0],m.displayElements.resize.overlay.css({display:"block",left:a.offsetLeft-5+"px",top:a.offsetTop-5+"px",width:a.offsetWidth+10+"px",height:a.offsetHeight+10+"px"}),m.displayElements.resize.info.text(a.offsetWidth+" x "+a.offsetHeight)},m.showResizeOverlay=function(a){var b=h.find("body");z=function(c){var d={width:parseInt(a.attr("width")),height:parseInt(a.attr("height")),x:c.clientX,y:c.clientY};(void 0===d.width||isNaN(d.width))&&(d.width=a[0].offsetWidth),(void 0===d.height||isNaN(d.height))&&(d.height=a[0].offsetHeight),m.hidePopover();var e=d.height/d.width,f=function(b){var c={x:Math.max(0,d.width+(b.clientX-d.x)),y:Math.max(0,d.height+(b.clientY-d.y))};if(b.shiftKey){var f=c.y/c.x;c.x=e>f?c.x:c.y/e,c.y=e>f?c.x*e:c.y}var g=angular.element(a);g.attr("height",Math.max(0,c.y)),g.attr("width",Math.max(0,c.x)),m.reflowResizeOverlay(a)};b.on("mousemove",f),C(b,"mouseup",function(c){c.preventDefault(),c.stopPropagation(),b.off("mousemove",f),m.showPopover(a)}),c.stopPropagation(),c.preventDefault()},m.displayElements.resize.anchors[3].on("mousedown",z),m.reflowResizeOverlay(a),C(b,"click",function(){m.hideResizeOverlay()})},m.hideResizeOverlay=function(){m.displayElements.resize.anchors[3].off("mousedown",z),m.displayElements.resize.overlay.css("display","")},m.setup.htmlEditorSetup(m.displayElements.html),m.setup.textEditorSetup(m.displayElements.text),m.displayElements.html.attr({id:"taHtmlElement"+B,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.text.attr({id:"taTextElement"+B,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":n.attr("ng-model-options")}),m.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),o.taDefaultWrap&&m.displayElements.text.attr("ta-default-wrap",o.taDefaultWrap),o.taUnsafeSanitizer&&(m.displayElements.text.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer),m.displayElements.html.attr("ta-unsafe-sanitizer",o.taUnsafeSanitizer)),m.displayElements.scrollWindow.append(m.displayElements.text),n.append(m.displayElements.scrollWindow),n.append(m.displayElements.html),m.displayElements.forminput.attr("name",m._name),n.append(m.displayElements.forminput),o.tabindex&&(n.removeAttr("tabindex"),m.displayElements.text.attr("tabindex",o.tabindex),m.displayElements.html.attr("tabindex",o.tabindex)),o.placeholder&&(m.displayElements.text.attr("placeholder",o.placeholder),m.displayElements.html.attr("placeholder",o.placeholder)),o.taDisabled&&(m.displayElements.text.attr("ta-readonly","disabled"),m.displayElements.html.attr("ta-readonly","disabled"),m.disabled=m.$parent.$eval(o.taDisabled),m.$parent.$watch(o.taDisabled,function(a){m.disabled=a,m.disabled?n.addClass(m.classes.disabled):n.removeClass(m.classes.disabled)})),o.taPaste&&(m._pasteHandler=function(a){return l(o.taPaste)(m.$parent,{$html:a})},m.displayElements.text.attr("ta-paste","_pasteHandler($html)")),a(m.displayElements.scrollWindow)(m),a(m.displayElements.html)(m),m.updateTaBindtaTextElement=m["updateTaBindtaTextElement"+B],m.updateTaBindtaHtmlElement=m["updateTaBindtaHtmlElement"+B],n.addClass("ta-root"),m.displayElements.scrollWindow.addClass("ta-text ta-editor "+m.classes.textEditor),m.displayElements.html.addClass("ta-html ta-editor "+m.classes.htmlEditor),m._actionRunning=!1;var E=!1;if(m.startAction=function(){return m._actionRunning=!0,E=g.rangy.saveSelection(),function(){E&&g.rangy.restoreSelection(E)}},m.endAction=function(){m._actionRunning=!1,E&&(m.showHtml?m.displayElements.html[0].focus():m.displayElements.text[0].focus(),g.rangy.restoreSelection(E),g.rangy.removeMarkers(E)),E=!1,m.updateSelectedStyles(),m.showHtml||m["updateTaBindtaTextElement"+B]()},u=function(){m.focussed=!0,n.addClass(m.classes.focussed),x.focus(),n.triggerHandler("focus")},m.displayElements.html.on("focus",u),m.displayElements.text.on("focus",u),v=function(a){return m._actionRunning||h[0].activeElement===m.displayElements.html[0]||h[0].activeElement===m.displayElements.text[0]||(n.removeClass(m.classes.focussed),x.unfocus(),b(function(){m._bUpdateSelectedStyles=!1,n.triggerHandler("blur"),m.focussed=!1},0)),a.preventDefault(),!1},m.displayElements.html.on("blur",v),m.displayElements.text.on("blur",v),m.displayElements.text.on("paste",function(a){n.triggerHandler("paste",a)}),m.queryFormatBlockState=function(a){return!m.showHtml&&a.toLowerCase()===h[0].queryCommandValue("formatBlock").toLowerCase()},m.queryCommandState=function(a){return m.showHtml?"":h[0].queryCommandState(a)},m.switchView=function(){m.showHtml=!m.showHtml,i.enabled(!1,m.displayElements.html),i.enabled(!1,m.displayElements.text),m.showHtml?b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.html[0].focus()},100):b(function(){return i.enabled(!0,m.displayElements.html),i.enabled(!0,m.displayElements.text),m.displayElements.text[0].focus()},100)},o.ngModel){var F=!0;p.$render=function(){if(F){F=!1;var a=m.$parent.$eval(o.ngModel);void 0!==a&&null!==a||!w||""===w||p.$setViewValue(w)}m.displayElements.forminput.val(p.$viewValue),m.html=p.$viewValue||""},n.attr("required")&&(p.$validators.required=function(a,b){var c=a||b;return!(!c||""===c.trim())})}else m.displayElements.forminput.val(w),m.html=w;if(m.$watch("html",function(a,b){a!==b&&(o.ngModel&&p.$viewValue!==a&&p.$setViewValue(a),m.displayElements.forminput.val(a))}),o.taTargetToolbars)x=f.registerEditor(m._name,m,o.taTargetToolbars.split(","));else{var G=angular.element('<div text-angular-toolbar name="textAngularToolbar'+B+'">');o.taToolbar&&G.attr("ta-toolbar",o.taToolbar),o.taToolbarClass&&G.attr("ta-toolbar-class",o.taToolbarClass),o.taToolbarGroupClass&&G.attr("ta-toolbar-group-class",o.taToolbarGroupClass),
o.taToolbarButtonClass&&G.attr("ta-toolbar-button-class",o.taToolbarButtonClass),o.taToolbarActiveButtonClass&&G.attr("ta-toolbar-active-button-class",o.taToolbarActiveButtonClass),o.taFocussedClass&&G.attr("ta-focussed-class",o.taFocussedClass),n.prepend(G),a(G)(m.$parent),x=f.registerEditor(m._name,m,["textAngularToolbar"+B])}m.$on("$destroy",function(){f.unregisterEditor(m._name)}),m.$on("ta-element-select",function(a,b){x.triggerElementSelect(a,b)&&m["reApplyOnSelectorHandlerstaTextElement"+B]()}),m.$on("ta-drop-event",function(a,c,d,e){m.displayElements.text[0].focus(),e&&e.files&&e.files.length>0?(angular.forEach(e.files,function(a){try{k.when(m.fileDropHandler(a,m.wrapSelection)||m.fileDropHandler!==m.defaultFileDropHandler&&k.when(m.defaultFileDropHandler(a,m.wrapSelection))).then(function(){m["updateTaBindtaTextElement"+B]()})}catch(b){j.error(b)}}),d.preventDefault(),d.stopPropagation()):b(function(){m["updateTaBindtaTextElement"+B]()},0)}),m._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){m._bUpdateSelectedStyles=!1,m.focussed=!1}),m.updateSelectedStyles=function(){var a;A&&b.cancel(A),void 0!==(a=d.getSelectionElement())&&a.parentNode!==m.displayElements.text[0]?x.updateSelectedStyles(angular.element(a)):x.updateSelectedStyles(),m._bUpdateSelectedStyles&&(A=b(m.updateSelectedStyles,200))},q=function(){return m.focussed?void(m._bUpdateSelectedStyles||(m._bUpdateSelectedStyles=!0,m.$apply(function(){m.updateSelectedStyles()}))):void(m._bUpdateSelectedStyles=!1)},m.displayElements.html.on("keydown",q),m.displayElements.text.on("keydown",q),r=function(){m._bUpdateSelectedStyles=!1},m.displayElements.html.on("keyup",r),m.displayElements.text.on("keyup",r),s=function(a,b){b&&angular.extend(a,b),m.$apply(function(){return x.sendKeyCommand(a)?(m._bUpdateSelectedStyles||m.updateSelectedStyles(),a.preventDefault(),!1):void 0})},m.displayElements.html.on("keypress",s),m.displayElements.text.on("keypress",s),t=function(){m._bUpdateSelectedStyles=!1,m.$apply(function(){m.updateSelectedStyles()})},m.displayElements.html.on("mouseup",t),m.displayElements.text.on("mouseup",t)}}}]),q.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(a,b,c){var d={},e={};return{registerEditor:function(c,f,g){if(!c||""===c)throw"textAngular Error: An editor requires a name";if(!f)throw"textAngular Error: An editor requires a scope";if(e[c])throw'textAngular Error: An Editor with name "'+c+'" already exists';var h=[];return angular.forEach(g,function(a){d[a]&&h.push(d[a])}),e[c]={scope:f,toolbars:g,_registerToolbar:function(a){this.toolbars.indexOf(a.name)>=0&&h.push(a)},editorFunctions:{disable:function(){angular.forEach(h,function(a){a.disabled=!0})},enable:function(){angular.forEach(h,function(a){a.disabled=!1})},focus:function(){angular.forEach(h,function(a){a._parent=f,a.disabled=!1,a.focussed=!0,f.focussed=!0})},unfocus:function(){angular.forEach(h,function(a){a.disabled=!0,a.focussed=!1}),f.focussed=!1},updateSelectedStyles:function(a){angular.forEach(h,function(b){angular.forEach(b.tools,function(c){c.activeState&&(b._parent=f,c.active=c.activeState(a))})})},sendKeyCommand:function(c){var d=!1;return(c.ctrlKey||c.metaKey)&&angular.forEach(b,function(b,e){if(b.commandKeyCode&&b.commandKeyCode===c.which)for(var g=0;g<h.length;g++)if(void 0!==h[g].tools[e]){a.call(h[g].tools[e],f),d=!0;break}}),d},triggerElementSelect:function(a,c){var d=function(a,b){for(var c=!0,d=0;d<b.length;d++)c=c&&a.attr(b[d]);return c},e=[],g={},i=!1;c=angular.element(c);var j=!1;if(angular.forEach(b,function(a,b){a.onElementSelect&&a.onElementSelect.element&&a.onElementSelect.element.toLowerCase()===c[0].tagName.toLowerCase()&&(!a.onElementSelect.filter||a.onElementSelect.filter(c))&&(j=j||angular.isArray(a.onElementSelect.onlyWithAttrs)&&d(c,a.onElementSelect.onlyWithAttrs),(!a.onElementSelect.onlyWithAttrs||d(c,a.onElementSelect.onlyWithAttrs))&&(g[b]=a))}),j?(angular.forEach(g,function(a,b){a.onElementSelect.onlyWithAttrs&&d(c,a.onElementSelect.onlyWithAttrs)&&e.push({name:b,tool:a})}),e.sort(function(a,b){return b.tool.onElementSelect.onlyWithAttrs.length-a.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(g,function(a,b){e.push({name:b,tool:a})}),e.length>0)for(var k=0;k<e.length;k++){for(var l=e[k].tool,m=e[k].name,n=0;n<h.length;n++)if(void 0!==h[n].tools[m]){l.onElementSelect.action.call(h[n].tools[m],a,c,f),i=!0;break}if(i)break}return i}}},e[c].editorFunctions},retrieveEditor:function(a){return e[a]},unregisterEditor:function(a){delete e[a]},registerToolbar:function(a){if(!a)throw"textAngular Error: A toolbar requires a scope";if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";if(d[a.name])throw'textAngular Error: A toolbar with name "'+a.name+'" already exists';d[a.name]=a,angular.forEach(e,function(b){b._registerToolbar(a)})},retrieveToolbar:function(a){return d[a]},retrieveToolbarsViaEditor:function(a){var b=[],c=this;return angular.forEach(this.retrieveEditor(a).toolbars,function(a){b.push(c.retrieveToolbar(a))}),b},unregisterToolbar:function(a){delete d[a]},updateToolsDisplay:function(a){var b=this;angular.forEach(a,function(a,c){b.updateToolDisplay(c,a)})},resetToolsDisplay:function(){var a=this;angular.forEach(b,function(b,c){a.resetToolDisplay(c)})},updateToolDisplay:function(a,b){var c=this;angular.forEach(d,function(d,e){c.updateToolbarToolDisplay(e,a,b)})},resetToolDisplay:function(a){var b=this;angular.forEach(d,function(c,d){b.resetToolbarToolDisplay(d,a)})},updateToolbarToolDisplay:function(a,b,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(b,c)},resetToolbarToolDisplay:function(a,c){if(!d[a])throw'textAngular Error: No Toolbar with name "'+a+'" exists';d[a].updateToolDisplay(c,b[c],!0)},removeTool:function(a){delete b[a],angular.forEach(d,function(b){delete b.tools[a];for(var c=0;c<b.toolbar.length;c++){for(var d,e=0;e<b.toolbar[c].length;e++){if(b.toolbar[c][e]===a){d={group:c,index:e};break}if(void 0!==d)break}void 0!==d&&(b.toolbar[d.group].slice(d.index,1),b._$element.children().eq(d.group).children().eq(d.index).remove())}})},addTool:function(a,b,e,f){c(a,b),angular.forEach(d,function(c){c.addTool(a,b,e,f)})},addToolToToolbar:function(a,b,e,f,g){c(a,b),d[e].addTool(a,b,f,g)},refreshEditor:function(a){if(!e[a])throw'textAngular Error: No Editor with name "'+a+'" exists';e[a].scope.updateTaBindtaTextElement(),e[a].scope.$$phase||e[a].scope.$digest()}}}]),q.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(a,b,c,d,e,f){return{scope:{name:"@"},restrict:"EA",link:function(g,h,i){if(!g.name||""===g.name)throw"textAngular Error: A toolbar requires a name";angular.extend(g,angular.copy(c)),i.taToolbar&&(g.toolbar=g.$parent.$eval(i.taToolbar)),i.taToolbarClass&&(g.classes.toolbar=i.taToolbarClass),i.taToolbarGroupClass&&(g.classes.toolbarGroup=i.taToolbarGroupClass),i.taToolbarButtonClass&&(g.classes.toolbarButton=i.taToolbarButtonClass),i.taToolbarActiveButtonClass&&(g.classes.toolbarButtonActive=i.taToolbarActiveButtonClass),i.taFocussedClass&&(g.classes.focussed=i.taFocussedClass),g.disabled=!0,g.focussed=!1,g._$element=h,h[0].innerHTML="",h.addClass("ta-toolbar "+g.classes.toolbar),g.$watch("focussed",function(){g.focussed?h.addClass(g.classes.focussed):h.removeClass(g.classes.focussed)});var j=function(b,c){var d;if(d=angular.element(b&&b.display?b.display:"<button type='button'>"),d.addClass(b&&b["class"]?b["class"]:g.classes.toolbarButton),d.attr("name",c.name),d.attr("ta-button","ta-button"),d.attr("ng-disabled","isDisabled()"),d.attr("tabindex","-1"),d.attr("ng-click","executeAction()"),d.attr("ng-class","displayActiveToolClass(active)"),b&&b.tooltiptext&&d.attr("title",b.tooltiptext),b&&!b.display&&!c._display&&(d[0].innerHTML="",b.buttontext&&(d[0].innerHTML=b.buttontext),b.iconclass)){var e=angular.element("<i>"),f=d[0].innerHTML;e.addClass(b.iconclass),d[0].innerHTML="",d.append(e),f&&""!==f&&d.append("&nbsp;"+f)}return c._lastToolDefinition=angular.copy(b),a(d)(c)};g.tools={},g._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var k={$window:f,$editor:function(){return g._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(a){return a?g.classes.toolbarButtonActive:""},executeAction:e};angular.forEach(g.toolbar,function(a){var b=angular.element("<div>");b.addClass(g.classes.toolbarGroup),angular.forEach(a,function(a){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]),b.append(g.tools[a].$element)}),h.append(b)}),g.updateToolDisplay=function(a,b,c){var d=g.tools[a];if(d){if(d._lastToolDefinition&&!c&&(b=angular.extend({},d._lastToolDefinition,b)),null===b.buttontext&&null===b.iconclass&&null===b.display)throw'textAngular Error: Tool Definition for updating "'+a+'" does not have a valid display/iconclass/buttontext value';null===b.buttontext&&delete b.buttontext,null===b.iconclass&&delete b.iconclass,null===b.display&&delete b.display;var e=j(b,d);d.$element.replaceWith(e),d.$element=e}},g.addTool=function(a,b,c,e){g.tools[a]=angular.extend(g.$new(!0),d[a],k,{name:a}),g.tools[a].$element=j(d[a],g.tools[a]);var f;void 0===c&&(c=g.toolbar.length-1),f=angular.element(h.children()[c]),void 0===e?(f.append(g.tools[a].$element),g.toolbar[c][g.toolbar[c].length-1]=a):(f.children().eq(e).after(g.tools[a].$element),g.toolbar[c][e]=a)},b.registerToolbar(g),g.$on("$destroy",function(){b.unregisterToolbar(g.name)})}}}])}()}({},function(){return this}());var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=CryptoJS,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,j=[],k=0;64>k;k++)j[k]=4294967296*a.abs(a.sin(k+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],k=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,j[0]),B=b(B,y,z,A,i,12,j[1]),A=b(A,B,y,z,k,17,j[2]),z=b(z,A,B,y,l,22,j[3]),y=b(y,z,A,B,m,7,j[4]),B=b(B,y,z,A,n,12,j[5]),A=b(A,B,y,z,o,17,j[6]),z=b(z,A,B,y,p,22,j[7]),y=b(y,z,A,B,q,7,j[8]),B=b(B,y,z,A,r,12,j[9]),A=b(A,B,y,z,s,17,j[10]),z=b(z,A,B,y,t,22,j[11]),y=b(y,z,A,B,u,7,j[12]),B=b(B,y,z,A,v,12,j[13]),A=b(A,B,y,z,w,17,j[14]),z=b(z,A,B,y,x,22,j[15]),y=c(y,z,A,B,i,5,j[16]),B=c(B,y,z,A,o,9,j[17]),A=c(A,B,y,z,t,14,j[18]),z=c(z,A,B,y,h,20,j[19]),y=c(y,z,A,B,n,5,j[20]),B=c(B,y,z,A,s,9,j[21]),A=c(A,B,y,z,x,14,j[22]),z=c(z,A,B,y,m,20,j[23]),y=c(y,z,A,B,r,5,j[24]),B=c(B,y,z,A,w,9,j[25]),A=c(A,B,y,z,l,14,j[26]),z=c(z,A,B,y,q,20,j[27]),y=c(y,z,A,B,v,5,j[28]),B=c(B,y,z,A,k,9,j[29]),A=c(A,B,y,z,p,14,j[30]),z=c(z,A,B,y,u,20,j[31]),y=d(y,z,A,B,n,4,j[32]),B=d(B,y,z,A,q,11,j[33]),A=d(A,B,y,z,t,16,j[34]),z=d(z,A,B,y,w,23,j[35]),y=d(y,z,A,B,i,4,j[36]),B=d(B,y,z,A,m,11,j[37]),A=d(A,B,y,z,p,16,j[38]),z=d(z,A,B,y,s,23,j[39]),y=d(y,z,A,B,v,4,j[40]),B=d(B,y,z,A,h,11,j[41]),A=d(A,B,y,z,l,16,j[42]),z=d(z,A,B,y,o,23,j[43]),y=d(y,z,A,B,r,4,j[44]),B=d(B,y,z,A,u,11,j[45]),A=d(A,B,y,z,x,16,j[46]),z=d(z,A,B,y,k,23,j[47]),y=e(y,z,A,B,h,6,j[48]),B=e(B,y,z,A,p,10,j[49]),A=e(A,B,y,z,w,15,j[50]),z=e(z,A,B,y,n,21,j[51]),y=e(y,z,A,B,u,6,j[52]),B=e(B,y,z,A,l,10,j[53]),A=e(A,B,y,z,s,15,j[54]),z=e(z,A,B,y,i,21,j[55]),y=e(y,z,A,B,q,6,j[56]),B=e(B,y,z,A,x,10,j[57]),A=e(A,B,y,z,o,15,j[58]),z=e(z,A,B,y,v,21,j[59]),y=e(y,z,A,B,m,6,j[60]),B=e(B,y,z,A,t,10,j[61]),A=e(A,B,y,z,k,15,j[62]),z=e(z,A,B,y,r,21,j[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),function(){var a=CryptoJS,b=a.lib,c=b.Base,d=b.WordArray,b=a.algo,e=b.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,e=c.hasher.create(),f=d.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&e.update(i);var i=e.update(a).finalize(b);e.reset();for(var j=1;c>j;j++)i=e.finalize(i),e.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return e.create(c).compute(a,b)}}(),CryptoJS.lib.Cipher||function(a){var b=CryptoJS,c=b.lib,d=c.Base,e=c.WordArray,f=c.BufferedBlockAlgorithm,g=b.enc.Base64,h=b.algo.EvpKDF,i=c.Cipher=f.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?o:n).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?o:n).decrypt(a,b,c,d)}}}});c.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var j=b.mode={},k=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;d>f;f++)b[c+f]^=e[f]},l=(c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();l.Encryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;k.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),l.Decryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),k.call(this,a,b,d),this._prevBlock=e}}),j=j.CBC=l,l=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,f=[],g=0;c>g;g+=4)f.push(d);c=e.create(f,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},c.BlockCipher=i.extend({cfg:i.cfg.extend({mode:j,padding:l}),reset:function(){i.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var m=c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),j=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?e.create([1398893684,1701076831]).concat(a).concat(b):b).toString(g)},parse:function(a){a=g.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=e.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return m.create({ciphertext:a,salt:c})}},n=c.SerializableCipher=d.extend({cfg:d.extend({format:j}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,m.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=e.random(8)),a=h.create({keySize:b+c}).compute(a,d),c=e.create(a.words.slice(b),4*c),a.sigBytes=4*b,m.create({key:a,iv:c,salt:d})}},o=c.PasswordBasedCipher=n.extend({cfg:n.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=n.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,n.decrypt.call(this,a,b,c.key,d)}})}(),function(){function a(a,b){var c=(this._lBlock>>>a^this._rBlock)&b;this._rBlock^=c,this._lBlock^=c<<a}function b(a,b){var c=(this._rBlock>>>a^this._lBlock)&b;this._lBlock^=c,this._rBlock^=c<<a}var c=CryptoJS,d=c.lib,e=d.WordArray,d=d.BlockCipher,f=c.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],i=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],j=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],k=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=f.DES=d.extend({_doReset:function(){for(var a=this._key.words,b=[],c=0;56>c;c++){var d=g[c]-1;b[c]=a[d>>>5]>>>31-d%32&1}for(a=this._subKeys=[],d=0;16>d;d++){for(var e=a[d]=[],f=i[d],c=0;24>c;c++)e[c/6|0]|=b[(h[c]-1+f)%28]<<31-c%6,e[4+(c/6|0)]|=b[28+(h[c+24]-1+f)%28]<<31-c%6;for(e[0]=e[0]<<1|e[0]>>>31,c=1;7>c;c++)e[c]>>>=4*(c-1)+3;e[7]=e[7]<<5|e[7]>>>27}for(b=this._invSubKeys=[],c=0;16>c;c++)b[c]=a[15-c]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._subKeys)},decryptBlock:function(a,b){this._doCryptBlock(a,b,this._invSubKeys)},_doCryptBlock:function(c,d,e){this._lBlock=c[d],this._rBlock=c[d+1],a.call(this,4,252645135),a.call(this,16,65535),b.call(this,2,858993459),b.call(this,8,16711935),a.call(this,1,1431655765);for(var f=0;16>f;f++){for(var g=e[f],h=this._lBlock,i=this._rBlock,l=0,m=0;8>m;m++)l|=j[m][((i^g[m])&k[m])>>>0];this._lBlock=i,this._rBlock=h^l}e=this._lBlock,this._lBlock=this._rBlock,this._rBlock=e,a.call(this,1,1431655765),b.call(this,8,16711935),b.call(this,2,858993459),a.call(this,16,65535),a.call(this,4,252645135),c[d]=this._lBlock,c[d+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});c.DES=d._createHelper(l),f=f.TripleDES=d.extend({_doReset:function(){var a=this._key.words;this._des1=l.createEncryptor(e.create(a.slice(0,2))),this._des2=l.createEncryptor(e.create(a.slice(2,4))),this._des3=l.createEncryptor(e.create(a.slice(4,6)))},encryptBlock:function(a,b){this._des1.encryptBlock(a,b),this._des2.decryptBlock(a,b),this._des3.encryptBlock(a,b)},decryptBlock:function(a,b){this._des3.decryptBlock(a,b),this._des2.encryptBlock(a,b),this._des1.decryptBlock(a,b)},keySize:6,ivSize:2,blockSize:2}),c.TripleDES=d._createHelper(f)}(),function(a,b,c){"use strict";var d,e={},f={sdk:!1,ready:!1};b.module("facebook",[]).value("settings",e).value("flags",f).provider("Facebook",[function(){e.appId=null,this.setAppId=function(a){e.appId=a},this.getAppId=function(){return e.appId},e.locale="en_US",this.setLocale=function(a){e.locale=a},this.getLocale=function(){return e.locale},e.status=!0,this.setStatus=function(a){e.status=a},this.getStatus=function(){return e.status},e.channelUrl=null,this.setChannel=function(a){e.channelUrl=a},this.getChannel=function(){return e.channelUrl},e.cookie=!0,this.setCookie=function(a){e.cookie=a},this.getCookie=function(){return e.cookie},e.xfbml=!0,this.setXfbml=function(a){e.xfbml=a},this.getXfbml=function(){return e.xfbml},this.setAuthResponse=function(a){e.authResponse=a||!0},this.getAuthResponse=function(){return e.authResponse},e.frictionlessRequests=!1,this.setFrictionlessRequests=function(a){e.frictionlessRequests=a},this.getFrictionlessRequests=function(){
return e.frictionlessRequests},e.hideFlashCallback=null,this.setHideFlashCallback=function(a){e.hideFlashCallback=a||null},this.getHideFlashCallback=function(){return e.hideFlashCallback},this.setInitCustomOption=function(a,c){return b.isString(a)?(e[a]=c,e[a]):!1},this.getInitOption=function(a){return b.isString(a)&&e.hasOwnProperty(a)?e[a]:!1},e.loadSDK=!0,this.setLoadSDK=function(a){e.loadSDK=!!a},this.getLoadSDK=function(){return e.loadSDK},e.version="v2.1",this.setSdkVersion=function(a){e.version=a},this.getSdkVersion=function(){return e.version},this.init=function(a,c){b.isString(a)&&(e.appId=a),b.isNumber(a)&&(e.appId=a.toString()),b.isObject(a)&&b.extend(e,a),b.isDefined(c)&&(e.loadSDK=!!c)},this.$get=["$q","$rootScope","$timeout","$window",function(a,c,g,h){function i(){this.appId=e.appId}return i.prototype.isReady=function(){return f.ready},i.prototype.login=function(){var c,d,e=a.defer(),f=Array.prototype.slice.call(arguments);return b.forEach(f,function(a,e){b.isFunction(a)&&(c=a,d=e)}),b.isFunction(c)&&b.isNumber(d)&&f.splice(d,1,function(a){g(function(){a&&b.isUndefined(a.error)?e.resolve(a):e.reject(a),b.isFunction(c)&&c(a)})}),this.isReady()?h.FB.login.apply(h.FB,f):g(function(){e.reject("Facebook.login() called before Facebook SDK has loaded.")}),e.promise},b.forEach(["logout","api","ui","getLoginStatus"],function(c){i.prototype[c]=function(){var e,f,i=a.defer(),j=Array.prototype.slice.call(arguments);return b.forEach(j,function(a,c){b.isFunction(a)&&(e=a,f=c)}),b.isFunction(e)&&b.isNumber(f)&&j.splice(f,1,function(a){g(function(){a&&b.isUndefined(a.error)?i.resolve(a):i.reject(a),b.isFunction(e)&&e(a)})}),g(function(){d.promise.then(function(){h.FB[c].apply(FB,j)})}),i.promise}}),i.prototype.parseXFBML=function(){var b=a.defer();return g(function(){d.promise.then(function(){h.FB.XFBML.parse(),b.resolve()})}),b.promise},b.forEach(["subscribe","unsubscribe"],function(c){i.prototype[c]=function(){var e,f,i=a.defer(),j=Array.prototype.slice.call(arguments);return b.forEach(j,function(a,c){b.isFunction(a)&&(e=a,f=c)}),b.isFunction(e)&&b.isNumber(f)&&j.splice(f,1,function(a){g(function(){a&&b.isUndefined(a.error)?i.resolve(a):i.reject(a),b.isFunction(e)&&e(a)})}),g(function(){d.promise.then(function(){h.FB.Event[c].apply(FB,j)})}),i.promise}}),new i}]}]).run(["$rootScope","$q","$window","$timeout",function(a,c,g,h){d=c.defer();var i=e.loadSDK;delete e.loadSDK,function(){var a=document.getElementById("fb-root");return a||(a=document.createElement("div"),a.id="fb-root",document.body.insertBefore(a,document.body.childNodes[0])),a}();var j=function(){f.sdk=!0,h(function(){if(!e.appId)throw"Missing appId setting.";FB.init(e),f.ready=!0,b.forEach({"auth.login":"login","auth.logout":"logout","auth.prompt":"prompt","auth.sessionChange":"sessionChange","auth.statusChange":"statusChange","auth.authResponseChange":"authResponseChange","xfbml.render":"xfbmlRender","edge.create":"like","edge.remove":"unlike","comment.create":"comment","comment.remove":"uncomment"},function(b,c){FB.Event.subscribe(c,function(c){h(function(){a.$broadcast("Facebook:"+b,c)})})}),a.$broadcast("Facebook:load"),d.resolve(FB)})};i&&!function(){var a="//connect.facebook.net/"+e.locale+"/sdk.js",b=document.createElement("script");b.id="facebook-jssdk",b.async=!0,-1!==g.location.protocol.indexOf("file:")&&(a="https:"+a),b.src=a,b.onload=j,b.onreadystatechange=function(){"complete"==this.readyState&&j()},document.getElementsByTagName("head")[0].appendChild(b)}()}])}(window,angular),function(a,b,c){"use strict";var d={},e={sdk:!1,ready:!1};b.module("googleplus",[]).value("settings",d).value("flags",e).provider("GooglePlus",[function(){d.clientId=null,this.setClientId=function(a){return d.clientId=a,this},this.getClientId=function(){return d.clientId},d.loadSDK=!0,this.setLoadSDK=function(a){d.loadSDK=!!a},this.getLoadSDK=function(){return d.loadSDK},d.apiKey=null,this.setApiKey=function(a){return d.apiKey=a,this},this.getApiKey=function(){return d.apiKey},d.scopes="https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email",this.setScopes=function(a){return d.scopes=a,this},this.getScopes=function(){return d.scopes},this.init=function(a,c){b.extend(d,a),b.isDefined(c)&&(d.loadSDK=!!c)},this.$get=["$q","$rootScope","$window","$timeout",function(a,b,c,f){var g=a.defer(),h=function(){};return h.prototype.isReady=function(){return e.ready},h.prototype.login=function(){return gapi.auth.authorize({client_id:d.clientId,scope:d.scopes,immediate:!1},this.handleAuthResult),g.promise},h.prototype.checkAuth=function(){return gapi.auth.authorize({client_id:d.clientId,scope:d.scopes,immediate:!0},this.handleAuthResult),g.promise},h.prototype.handleClientLoad=function(){gapi.client.setApiKey(d.apiKey),gapi.auth.init(function(){}),f(this.checkAuth,1)},h.prototype.handleAuthResult=function(a){a&&!a.error?(a.status="loggin",b.$broadcast("GooglePlus:statusChange",a),g.resolve(a),b.$apply()):g.reject("error")},h.prototype.getUser=function(){var c=a.defer();return gapi.client.load("oauth2","v2",function(){gapi.client.oauth2.userinfo.get().execute(function(a){c.resolve(a),b.$apply()})}),c.promise},h.prototype.logout=function(){var a=gapi.auth.getToken(),c="https://accounts.google.com/o/oauth2/revoke?token="+a.access_token;console.log(c),$.ajax({type:"GET",url:c,async:!1,contentType:"application/json",dataType:"jsonp",success:function(a){var c={};c.status="disconnect",console.log("logout success"),b.$broadcast("GooglePlus:statusChange",c)},error:function(a){console.log("logout fail")}})},h.prototype.getToken=function(){return gapi.auth.getToken()},h.prototype.setToken=function(a){return gapi.auth.setToken(a)},new h}]}]).run(["$rootScope","$timeout",function(a,b){var c=function(){e.sdk=!0,b(function(){e.ready=!0,gapi.auth.authorize({client_id:d.clientId,scope:d.scopes,immediate:!0},function(b){b&&!b.error&&(b.status="connected",a.$broadcast("GooglePlus:statusChange",b))})},1500)},f=d.loadSDK;delete d.loadSDK,f&&!function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://apis.google.com/js/client:plusone.js",a.onload=c,a.onreadystatechange=function(){"complete"==this.readyState&&c()};var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}])}(window,angular),function(a,b){"use strict";b.module("user",["facebook","googleplus"]).service("UserService",["$rootScope","$http","$state","Facebook","GooglePlus","$localStorage","$sessionStorage","$q",function(a,b,c,d,e,f,g,h){this.UserInfo=function(a,c){var d=h.defer();return b({url:"user/getfortoken",method:"POST",data:"csrf-token="+a+"&token="+c+"&provider=WEB",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){a.data.user?d.resolve(a.data):d.reject(a.data)},function(a){d.reject({error:"Server Error"})}),d.promise},this.Login=function(a,c,d){var e=h.defer();return b({url:"user/login",method:"POST",data:"csrf-token="+d+"&email="+a+"&password="+c+"&provider=WEB",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){if(a.data.user){var b=a.data;e.resolve(b)}else e.reject(a.data)},function(a){e.reject({error:"Server Error"})}),e.promise},this.Signup=function(a,c,d,e){var f=h.defer();return b({url:"user/add",method:"POST",data:"csrf-token="+e+"&email="+c+"&password="+d+"&name="+a+"&provider=WEB",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){console.log(a),a.data.email?f.resolve(a.data):f.reject(a.data)},function(a){f.reject({error:"Server Error"})}),f.promise},this.Logout=function(a){try{"FACEBOOK"==a?d.logout():"GOOGLE"==a&&e.logout()}catch(b){}},this.FacebookIsReady=function(){return d.isReady()},this.FacebookMe=function(a,c){var e=h.defer();return d.api("/me",function(d){b({url:"snsuser/add",method:"POST",data:"csrf-token="+a+"&email="+d.email+"&password=&name="+d.name+"&provider=FACEBOOK&timezone="+d.timezone+"&locale="+d.locale+"&gender="+d.gender+"&token="+c,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){a.data?e.resolve(a.data):e.reject(a)},function(a){e.reject({error:"Server Error"})})}),e.promise},this.FacebookLogin=function(){d.login(function(a){})},this.GooglePlusIsReady=function(){return e.isReady()},this.GoogleMe=function(a,c){var d=h.defer();return e.getUser().then(function(e){console.log(JSON.stringify(e)),g.user=e,b({url:"snsuser/add",method:"POST",data:"csrf-token="+a+"&email="+e.email+"&password=&name="+e.name+"&provider=GOOGLE&timezone="+e.timezone+"&locale="+e.locale+"&gender="+e.gender+"&token="+c,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){a.data?d.resolve(a.data):(console.log(a),d.reject(a))},function(a){d.reject({error:"Server Error"})})}),d.promise},this.GoogleLogin=function(){e.login().then(function(a){},function(a){console.log(a)})}}]).run(["$rootScope","$q","$window","$timeout",function(a,b,c,d){}])}(window,angular),function(window){function ca(a,b,c){t.Ac(this),this.JB=a,this.Zb=b,this.yH=c}function xa(){this.IB=[]}function ya(){}function Aa(a){this.key=-1,this.value=a}function Ba(a){this.Dd=a,this.Ij=null,this.reset()}function Ca(a){this.Dd=a,this.reset()}function B(a){t.Ac(this),this.nb=!1,this.n=[],this.V=0,this.fo=this.Cd=null,void 0===a||null===a?this.da=null:"string"==typeof a?"object"===a||"string"===a||"number"===a||"boolean"===a||"function"===a?this.da=a:t.ka(a,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof a?this.da=a===Object?"object":a===String?"string":a===Number?"number":a===Boolean?"boolean":a===Function?"function":a:t.ka(a,"null, a primitive type name, or a class type","List constructor: type")}function Da(a){this.p=a,this.reset()}function ma(a){t.Ac(this),this.nb=!1,void 0===a||null===a?this.da=null:"string"==typeof a?"object"===a||"string"===a||"number"===a?this.da=a:t.ka(a,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof a?this.da=a===Object?"object":a===String?"string":a===Number?"number":a:t.ka(a,"null, a primitive type name, or a class type","Set constructor: type"),this.fd={},this.ed=0,this.Cd=null,this.V=0,this.Ih=this.cb=null}function Fa(a){this.Xa=a,this.reset()}function Ha(a){t.Ac(this),this.nb=!0,this.Xa=a}function Ka(a){this.Xa=a,this.reset()}function Ea(a,b){this.key=a,this.value=b,this.uo=this.Tb=null}function La(a){this.Xa=a,this.reset()}function ia(a,b){t.Ac(this),this.nb=!1,void 0===a||null===a?this.Hh=null:"string"==typeof a?"object"===a||"string"===a||"number"===a?this.Hh=a:t.ka(a,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof a?this.Hh=a===Object?"object":a===String?"string":a===Number?"number":a:t.ka(a,"null, a primitive type name, or a class type","Map constructor: keytype"),void 0===b||null===b?this.Ri=null:"string"==typeof b?"object"===b||"string"===b||"boolean"===b||"number"===b||"function"===b?this.Ri=b:t.ka(b,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof b?this.Ri=b===Object?"object":b===String?"string":b===Number?"number":b===Boolean?"boolean":b===Function?"function":b:t.ka(b,"null, a primitive type name, or a class type","Map constructor: valtype"),this.fd={},this.ed=0,this.ho=this.Cd=null,this.V=0,this.Ih=this.cb=null}function Ma(a,b){null!==a.Hh&&("string"==typeof a.Hh?typeof b===a.Hh&&null!==b||t.bc(b,a.Hh):b instanceof a.Hh||t.bc(b,a.Hh))}function w(a,b){void 0===a||void 0===b?this.y=this.x=0:!e||"number"==typeof a&&"number"==typeof b?(this.x=a,this.y=b):t.m("Invalid arguments to Point constructor")}function Oa(a,b){if(0===a)return b>0?90:0>b?270:0;if(0===b)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;var c=180*Math.atan(Math.abs(b/a))/Math.PI;return 0>a?c=0>b?c+180:180-c:0>b&&(c=360-c),c}function Qa(a,b){return e&&t.l(b,ga,w,"transformInverted:t"),b.ai(a),a}function fa(a,b){void 0===a||void 0===b?this.height=this.width=0:!e||"number"==typeof a&&(a>=0||isNaN(a))&&"number"==typeof b&&(b>=0||isNaN(b))?(this.width=a,this.height=b):t.m("Invalid arguments to Size constructor")}function x(a,b,c,d){void 0===a?this.height=this.width=this.y=this.x=0:a instanceof w?b instanceof w?(this.x=Math.min(a.x,b.x),this.y=Math.min(a.y,b.y),this.width=Math.abs(a.x-b.x),this.height=Math.abs(a.y-b.y)):b instanceof fa?(this.x=a.x,this.y=a.y,this.width=b.width,this.height=b.height):t.m("Incorrect arguments supplied"):!e||"number"==typeof a&&"number"==typeof b&&"number"==typeof c&&(c>=0||isNaN(c))&&"number"==typeof d&&(d>=0||isNaN(d))?(this.x=a,this.y=b,this.width=c,this.height=d):t.m("Invalid arguments to Rect constructor")}function Va(a,b,c){a.width=b,a.height=c}function Wa(a,b,c,d,e){t.L(a);var f=a.width;return-f>=c+e?(a.x+=f/2,a.width=0):(a.x-=e,a.width+=c+e),c=a.height,-c>=b+d?(a.y+=c/2,a.height=0):(a.y-=b,a.height+=b+d),a}function cb(a,b,c,d,e){t.L(a);var f=Math.max(a.x,b),g=Math.max(a.y,c);return b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e),a.x=f,a.y=g,a.width=Math.max(0,b-f),a.height=Math.max(0,c-g),a}function eb(a,b){var c=a.width,d=b.width+10+10,e=a.x,f=b.x-10;return e>d+f||f>c+e?!1:(c=a.height,d=b.height+10+10,e=a.y,f=b.y-10,e>d+f||f>c+e?!1:!0)}function hb(a,b,c,d,e){var f=Math.min(a.x,b),g=Math.min(a.y,c);return b=Math.max(a.x+a.width,b+d),c=Math.max(a.y+a.height,c+e),a.x=f,a.y=g,a.width=b-f,a.height=c-g,a}function ab(a,b,c,d){void 0===a?this.left=this.bottom=this.right=this.top=0:void 0===b?this.left=this.bottom=this.right=this.top=a:void 0===c?(d=b,this.top=a,this.right=b,this.bottom=a,this.left=d):void 0!==d?(this.top=a,this.right=b,this.bottom=c,this.left=d):t.m("Invalid arguments to Margin constructor")}function ga(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function H(a,b,c,d){void 0===a?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d)}function ub(a,b){return a.x=NaN,a.y=NaN,a.offsetX=b,a}function pb(a,b){(isNaN(a)||a>1||0>a)&&t.ka(a,"0 <= "+b+" <= 1",H,b)}function qb(a,b){(isNaN(a)||1/0===a||-(1/0)===a)&&t.ka(a,"real number, not NaN or Infinity",H,b)}function hc(){this.cf=[1,0,0,1,0,0]}function mc(a){this.type=a,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.XD=[]}function nc(a,b,c){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.Zw=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.document=b||document,this.wE=c,this.Vw=null,this.path=[],this.$i=new hc,this.stack=[],this.vf=[],this.qG=this.KE=this.mw=0,this.zw=a,this.tJ="http://www.w3.org/2000/svg",this.width=this.zw.width,this.height=this.zw.height,this.Bl=oc(this,"svg",{width:this.width+"px",height:this.height+"px",UK:"0 0 "+this.zw.width+" "+this.zw.height}),this.Bl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.Bl.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),rc(this,1,0,0,1,0,0),a=oc(this,"clipPath",{id:"mainClip"}),a.appendChild(oc(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.Bl.appendChild(a),this.vf[0].setAttributeNS(null,"clip-path","url(#mainClip)")}function oc(a,b,c,d){if(a=a.document.createElementNS(a.tJ,b),c)for(var e in c)a.setAttributeNS("href"===e?"http://www.w3.org/1999/xlink":"",e,c[e]);return d&&(a.textContent=d),a}function uc(a,b,c,d,e){1!==a.globalAlpha&&(c.opacity=a.globalAlpha),"fill"==b?(/^rgba\(/.test(a.fillStyle)?(a=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.fillStyle),c.fill="rgb("+a[1]+","+a[2]+","+a[3]+")",c["fill-opacity"]=a[4]):c.fill=a.fillStyle instanceof mc?wc(a,a.fillStyle):a.fillStyle,c.stroke="none"):"stroke"==b&&(c.fill="none",/^rgba\(/.test(a.strokeStyle)?(b=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(a.strokeStyle),c.stroke="rgb("+b[1]+","+b[2]+","+b[3]+")",c["stroke-opacity"]=b[4]):c.stroke=a.strokeStyle instanceof mc?wc(a,a.strokeStyle):a.strokeStyle,c["stroke-width"]=a.lineWidth,c["stroke-linecap"]=a.lineCap,c["stroke-linejoin"]=a.lineJoin,c["stroke-miterlimit"]=a.miterLimit),d=d.cf,d="matrix("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")",void 0!==e&&(d+=e),c.transform=d}function wc(a,b){var c="GRAD"+a.KE;a.KE++;var d;if("linear"===b.type)d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,id:c,gradientUnits:"userSpaceOnUse"},d=oc(a,"linearGradient",d);else{if("radial"!==b.type)throw Error("invalid gradient");d={x1:b.x1,x2:b.x2,y1:b.y1,y2:b.y2,r1:b.r1,r2:b.r2,id:c},d=oc(a,"radialGradient",d)}for(var e=b.XD,f=e.length,g=[],h=0;f>h;h++){var i=e[h],j=i.color,i={offset:i.offset,"stop-color":j};/^rgba\(/.test(j)&&(j=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(j),i["stop-color"]="rgb("+j[1]+","+j[2]+","+j[3]+")",i["stop-opacity"]=j[4]),g.push(i)}for(g.sort(function(a,b){return a.offset>b.offset?1:-1}),h=0;f>h;h++)d.appendChild(oc(a,"stop",g[h]));return a.Bl.appendChild(d),"url(#"+c+")"}function vc(a,b,c,d){c={x:c[0],y:c[1],width:c[2],height:c[3]},uc(a,b,c,d),a.addElement("rect",c)}function tc(a,b,c,d){for(var e=[],f=0;f<c.length;f++){var g=Array.prototype.slice.call(c[f]),h=[g.shift()];if("A"==h[0])h.push(g.shift()+","+g.shift(),g.shift(),g.shift()+","+g.shift(),g.shift()+","+g.shift());else for(;g.length;)h.push(g.shift()+","+g.shift());e.push(h.join(" "))}c={d:e.join(" ")},uc(a,b,c,d),"clipPath"===b?(b="CLIP"+a.mw,a.mw++,d=oc(a,"clipPath",{id:b}),d.appendChild(oc(a,"path",c)),a.Bl.appendChild(d),0<a.vf.length&&a.vf[a.vf.length-1].setAttributeNS(null,"clip-path","url(#"+b+")")):a.addElement("path",c)}function sc(a,b,c,d,e,f,g){var h=Math.abs(e-f);if(e!=f){var i=b+d*Math.cos(f);f=c+d*Math.sin(f),h>=2*Math.PI?(sc(a,b,c,d,e,e+Math.PI,g),sc(a,b,c,d,e+Math.PI,e+2*Math.PI,g),a.path.push(["M",i,f])):(b+=d*Math.cos(e),c+=d*Math.sin(e),h=180*h/Math.PI,e=g?0:1,g=h>=180==!!g?0:1,0!==a.path.length?a.path.push(["L",b,c]):a.path.push(["M",b,c]),a.path.push(["A",d,d,h,g,e,i,f]))}}function rc(a,b,c,d,e,f,g){var h=new hc;h.cf=[b,c,d,e,f,g],b={},uc(a,"g",b,h),h=a.addElement("g",b),a.vf.push(h)}function zc(a){1<arguments.length&&t.m("Geometry constructor can take at most one optional argument, the Geometry type."),t.Ac(this),void 0===a?a=Ac:e&&t.Aa(a,zc,zc,"constructor:type"),this.da=a,this.tb=this.jb=this.yc=this.oc=0,this.Ck=new B(Bc),this.Iu=this.Ck.V,this.tu=(new x).freeze(),this.Va=!0,this.Mi=Eb,this.Ni=Pb,this.Zn=this.$n=NaN,this.Hc=Cc}function Nc(a,b){if(a.type!==Dc||b.type!==Ac)return!1;if(1===b.Bb.count){var c=b.Bb.wa(0);if(1===c.Ea.count&&F.I(a.qa,c.qa)&&F.I(a.ra,c.ra)&&(c=c.Ea.wa(0),c.type===Oc&&F.I(a.D,c.D)&&F.I(a.F,c.F)))return!0}return!1}function $c(a,b){for(var c=a.length,d=t.K(),e=0;c>e;e++){var f=a[e];d.x=f.x1,d.y=f.y1,b.Sa(d),f.x1=d.x,f.y1=d.y,d.x=f.x2,d.y=f.y2,b.Sa(d),f.x2=d.x,f.y2=d.y,d.x=f.ge,d.y=f.he,b.Sa(d),f.ge=d.x,f.he=d.y,d.x=f.Vb,d.y=f.Wb,b.Sa(d),f.Vb=d.x,f.Wb=d.y}t.B(d)}function ad(a,b,c){switch(a.type){case Dc:case Ec:case Mc:c?b.p(a.oc,a.yc,0,0):hb(b,a.oc,a.yc,0,0),hb(b,a.jb,a.tb,0,0);break;case Ac:a=a.Bb;for(var d=a.length,e=0;d>e;e++){var f=a.n[e];c&&0===e?b.p(f.qa,f.ra,0,0):hb(b,f.qa,f.ra,0,0);for(var g=f.Ea,h=g.length,i=f.qa,j=f.ra,k=0;h>k;k++){var l=g.n[k];switch(l.type){case Oc:case bd:i=l.D,j=l.F,hb(b,i,j,0,0);break;case cd:F.So(i,j,l.Cb,l.Sb,l.re,l.se,l.D,l.F,.5,b),i=l.D,j=l.F;break;case dd:F.NA(i,j,l.Cb,l.Sb,l.D,l.F,.5,b),i=l.D,j=l.F;break;case ed:case fd:for(var l=l.type===ed?gd(l,f):hd(l,f,i,j),m=l.length,n=null,o=0;m>o;o++)n=l[o],F.So(n.x1,n.y1,n.x2,n.y2,n.ge,n.he,n.Vb,n.Wb,.5,b);null!==n&&(i=n.Vb,j=n.Wb);break;default:t.m("Unknown Segment type: "+l.type)}}}break;default:t.m("Unknown Geometry type: "+a.type)}}function jd(a,b,c,d,e,f,g,h){if(F.Md(e,f,g,h,.05,a,b))return!0;var i=(a-c)*(f-h);if(0===i)return 0;var j=((a*d-b*c)*(e-g)-(a-c)*(e*h-f*g))/i;if(b=(a*d-b*c)*(f-h)/i,j>=a)return 0;if((f>h?f-h:h-f)>(e>g?e-g:g-e)){if(h>f?(a=f,e=h):(a=h,e=f),a>b||b>e)return 0}else if(g>e?(a=e,e=g):a=g,a>j||j>e)return 0;return i>0?1:-1}function kd(a,b,c,d){for(var e=a.Bb.length,f=0;e>f;f++)if(a.Bb.n[f].Fa(b,c,d))return!0;return!1}function Bc(a,b,c){t.Ac(this),void 0===c&&(c=!0),this.Wl=c,this.bo=!0,void 0!==a?(e&&t.q(a,Bc,"sx"),this.oc=a):this.oc=0,void 0!==b?(e&&t.q(b,Bc,"sy"),this.yc=b):this.yc=0,this.hs=new B(id),this.Hv=this.hs.V,this.Va=!0}function id(a,b,c,d,f,g,h,i){t.Ac(this),void 0===a?a=Oc:e&&t.Aa(a,id,id,"constructor:type"),this.da=a,void 0!==b?(e&&t.q(b,id,"ex"),this.jb=b):this.jb=0,void 0!==c?(e&&t.q(c,id,"ey"),this.tb=c):this.tb=0,a===fd?(void 0!==g&&(a=g%360,0>a&&(a+=360),this.jd=a),void 0!==d&&(e&&t.q(d,id,"x1"),this.ng=Math.max(d,0)),void 0!==f&&(e&&t.q(f,id,"y1"),this.og=Math.max(f,0)),this.jo=!!h,this.yn=!!i):(void 0!==d&&(e&&t.q(d,id,"x1"),this.jd=d),void 0!==f&&(e&&t.q(f,id,"y1"),this.ye=f),void 0!==g&&(e&&t.q(g,id,"x2"),a===ed&&(g=Math.max(g,0)),this.ng=g),void 0!==h&&"number"==typeof h&&(e&&t.q(h,id,"y2"),a===ed&&(h=Math.max(h,0)),this.og=h)),this.Gh=!1,this.Va=!0,this.nj=null}function gd(a,b){if(null!==a.nj&&!1===b.Va)return a.nj;var c=a.radiusX,d=a.radiusY;void 0===d&&(d=c);var e=a.jd,f=a.ye,g=F.gE(0,0,d>c?c:d,a.mh,a.mh+a.gi);if(c!==d){var h=t.oh();h.reset(),d>c?h.scale(1,d/c):h.scale(c/d,1);for(var c=g.length,d=t.K(),i=0;c>i;i++){var j=g[i];d.x=j.x1,d.y=j.y1,h.Sa(d),j.x1=d.x,j.y1=d.y,d.x=j.x2,d.y=j.y2,h.Sa(d),j.x2=d.x,j.y2=d.y,d.x=j.ge,d.y=j.he,h.Sa(d),j.ge=d.x,j.he=d.y,d.x=j.Vb,d.y=j.Wb,h.Sa(d),j.Vb=d.x,j.Wb=d.y}t.B(d),t.We(h)}for(h=g.length,c=0;h>c;c++)d=g[c],d.x1+=e,d.y1+=f,d.x2+=e,d.y2+=f,d.ge+=e,d.he+=f,d.Vb+=e,d.Wb+=f;return a.nj=g,a.nj}function hd(a,b,c,d){function e(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(f(a,b))}function f(a,b){return(a[0]*b[0]+a[1]*b[1])/(Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))*Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)))}if(null!==a.nj&&!1===b.Va)return a.nj;b=a.ng;var g=a.og,h=Math.PI/180*a.jd,i=a.jo,j=a.yn,k=a.jb,l=a.tb,m=Math.cos(h)*(c-k)/2+Math.sin(h)*(d-l)/2,n=-Math.sin(h)*(c-k)/2+Math.cos(h)*(d-l)/2,o=Math.pow(m,2)/Math.pow(b,2)+Math.pow(n,2)/Math.pow(g,2);return o>1&&(b*=Math.sqrt(o),g*=Math.sqrt(o)),o=(i===j?-1:1)*Math.sqrt((Math.pow(b,2)*Math.pow(g,2)-Math.pow(b,2)*Math.pow(n,2)-Math.pow(g,2)*Math.pow(m,2))/(Math.pow(b,2)*Math.pow(n,2)+Math.pow(g,2)*Math.pow(m,2))),isNaN(o)&&(o=0),i=o*b*n/g,o=o*-g*m/b,isNaN(i)&&(i=0),isNaN(o)&&(o=0),c=(c+k)/2+Math.cos(h)*i-Math.sin(h)*o,d=(d+l)/2+Math.sin(h)*i+Math.cos(h)*o,h=e([1,0],[(m-i)/b,(n-o)/g]),l=[(m-i)/b,(n-o)/g],n=[(-m-i)/b,(-n-o)/g],m=e(l,n),-1>=f(l,n)&&(m=Math.PI),1<=f(l,n)&&(m=0),!j&&m>0&&(m-=2*Math.PI),j&&0>m&&(m+=2*Math.PI),j=b>g?1:b/g,n=b>g?g/b:1,b=F.gE(0,0,b>g?b:g,h,h+m,!0),g=t.oh(),g.reset(),g.translate(c,d),g.rotate(a.jd,0,0),g.scale(j,n),$c(b,g),t.We(g),a.nj=b,a.nj}function ld(){this.U=null,this.Cz=new w(0,0).freeze(),this.Jy=new w(0,0).freeze(),this.qu=this.jv=0,this.Yu="",this.Vv=this.Fu=!1,this.Cu=this.su=0,this.oj=this.Nu=!1,this.Mq=null,this.Tv=0,this.pg=this.Rv=null}function rd(){this.U=null,this.Zb="",this.xv=this.Nv=null,this.ru=!1}function td(){this.clear()}function E(a){1<arguments.length&&t.m("Model constructor can only take one optional argument, the Array of node data."),t.Ac(this),this.Dy=this.Zb="",this.Jk=this.yC=!1,this.hz={},this.Me=[],this.Bc=new ia(null,Object),this.jm="key",this.wu=this.bv=null,this.vy=this.wy=!1,this.Hr="category",this.xh=new ia(null,ma),this.Bj=null,this.Li=!1,this.Bz=null,this.la=new zd,void 0!==a&&(this.Gg=a)}function Cd(a,b,c){var d=t.ub(b),e="[ ";c&&d>1&&(e+="\n");for(var f=0;d>f;f++){var g=t.lb(b,f);void 0!==g&&(f>0&&(e+=",",c&&(e+="\n")),e+=a.au(g))}return c&&d>1&&(e+="\n"),e+" ]"}function Ad(a,b){return void 0===b||"__gohashid"===a||"_"===a[0]||"function"==typeof b?!0:!1}function Md(a){return isNaN(a)?"NaN":1/0===a?"9e9999":-(1/0)===a?"-9e9999":a}function Bd(a,b){var c=b;if(c instanceof w)b={"class":"go.Point",x:Md(c.x),y:Md(c.y)};else if(c instanceof fa)b={"class":"go.Size",width:Md(c.width),height:Md(c.height)};else if(c instanceof x)b={"class":"go.Rect",x:Md(c.x),y:Md(c.y),width:Md(c.width),height:Md(c.height)};else if(c instanceof ab)b={"class":"go.Margin",top:Md(c.top),right:Md(c.right),bottom:Md(c.bottom),left:Md(c.left)};else if(c instanceof H)b=c.xd()?{"class":"go.Spot",x:Md(c.x),y:Md(c.y),offsetX:Md(c.offsetX),offsetY:Md(c.offsetY)}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof ea){if(b={"class":"go.Brush",type:c.type.name},c.type===Nd?b.color=c.color:(c.type===Yd||c.type===Zd)&&(b.start=c.start,b.end=c.end,c.type===Zd&&(0!==c.Vp&&(b.startRadius=Md(c.Vp)),isNaN(c.ap)||(b.endRadius=Md(c.ap)))),null!==c.Vo){for(var d={},c=c.Vo.k;c.next();)d[c.key.toString()]=c.value;b.colorStops=d}}else if(c instanceof zc)b={"class":"go.Geometry",type:c.type.name},0!==c.qa&&(b.startX=Md(c.qa)),0!==c.ra&&(b.startY=Md(c.ra)),0!==c.D&&(b.endX=Md(c.D)),0!==c.F&&(b.endY=Md(c.F)),c.G.M(Eb)||(b.spot1=c.G),c.H.M(Pb)||(b.spot2=c.H),c.type===Ac&&(b.path=Pc(c));else if(c instanceof Q||c instanceof z||c instanceof $d||c instanceof E||c instanceof ae||c instanceof oa||c instanceof be||c instanceof ta||c instanceof zd||c instanceof ce)return t.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+c.toString()),"{}";var e,d="{",f=!0;for(e in b)if(c=t.ib(b,e),!Ad(e,c))if(f?f=!1:d+=", ",d+='"'+e+'":',"points"===e&&c instanceof B&&c.da===w){for(var g="[",c=c.k;c.next();){var h=c.value;1<g.length&&(g+=","),g+=a.au(h.x),g+=",",g+=a.au(h.y)}g+="]",d+=g}else d+=a.au(c);return d+"}"}function Ld(a){return"number"==typeof a?a:"NaN"===a?NaN:"9e9999"===a?1/0:"-9e9999"===a?-(1/0):parseFloat(a)}function me(a,b,c,d,e,f,g,h,i){void 0===h&&(h=null),void 0===i&&(i=null);var j=new td;j.ba=a,j.td=c,j.Af=b,j.propertyName=d,j.object=e,j.oldValue=f,j.Yf=h,j.newValue=g,j.Wf=i,a.iw(j)}function ne(a,b,c){"string"!=typeof a&&"function"!=typeof a&&t.bc(a,"string or function",b,c)}function oe(a){return"number"==typeof a||"string"==typeof a}function qe(a,b,c){if(void 0!==b){var d=a.xh.za(b);null===d&&(d=new ma,a.xh.add(b,d)),d.add(c)}}function re(a,b,c){if(void 0!==b){var d=a.xh.za(b);d instanceof ma&&(void 0===c||null===c?a.xh.remove(b):(d.remove(c),0===d.count&&a.xh.remove(b)))}}function pe(a,b){if(void 0===b)return null;var c=a.xh.za(b);return c instanceof ma?c:null}function ze(a,b,c){return c instanceof Q||c instanceof z||c instanceof $d||c instanceof Ae||c instanceof Be||c instanceof ae||c instanceof oa||c instanceof be||c instanceof ld||c instanceof rd?("_"!==b[0]&&t.trace("Warning: found GraphObject or Diagram reference when copying model data on property '"+b+"' of data object: "+a.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+c.toString()),!0):c instanceof E||c instanceof zd||c instanceof ce||c instanceof td?!0:!1}function M(a,b){2<arguments.length&&t.m("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),E.call(this),this.Xg=[],this.em=new ma(Object),this.xk=this.vu=null,this.xj="from",this.Aj="to",this.pr=this.or="",this.lr="category",this.Jh=this.pv="",this.ov="isGroup",this.Gj="group",this.xy=!1,void 0!==a&&(this.Gg=a),void 0!==b&&(this.hj=b)}function Ce(a,b){var c=a.il(b),c=a.bn(c);null===a.uf(c)&&qe(a,c,b),c=a.ml(b),c=a.bn(c),null===a.uf(c)&&qe(a,c,b);var d=a.kl(b);if(t.isArray(d))for(var e=t.ub(d),f=0;e>f;f++)c=t.lb(d,f),null===a.uf(c)&&qe(a,c,b)}function Kd(a){1<arguments.length&&t.m("TreeModel constructor can only take one optional argument, the Array of node data."),E.call(this),this.Hj="parent",this.yy=!1,this.Lr="parentLinkCategory",void 0!==a&&(this.Gg=a)}function De(a,b,c){t.Ac(this),void 0===a?a="":t.i(a,"string",De,"constructor:targetprop"),void 0===b?b=a:t.i(b,"string",De,"constructor:sourceprop"),void 0===c?c=null:null!==c&&t.i(c,"function",De,"constructor:conv"),this.kD="",this.pg=null,this.Sv=a,this.Qv=this.xz=0,this.fD=null,this.Kv=b,this.uy=c,this.gz=Ee,this.my=null}function ce(){this.iH=new B(td).freeze(),this.Zb="",this.nC=!1}function zd(){this.iz=new ma(E),this.Le=!1,this.oH=new B(ce).freeze(),this.Ug=-1,this.CC=999,this.xi=!1,this.Bu=null,this.Vk=0,this.ny=!1,e&&(this.ny=!0),this.$g=new B("string").freeze(),this.ro=new B("number"),this.Ry=!0,this.cz=!1}function Ge(a,b,c){if(a.vb)return!1;a.Tz&&1>a.Je&&t.trace("Ending transaction without having started a transaction: "+c);var d=1===a.Je;d&&b&&a.isEnabled&&a.Xc("CommittingTransaction",c,a.Zi);var e=0;if(0<a.Je&&(a.Vk--,a.isEnabled)){var f=a.$g.count;f>0&&(""===c&&(c=a.$g.wa(0)),a.$g.Ma(),a.$g.qd(f-1),a.$g.freeze()),f=a.ro.count,f>0&&(e=a.ro.wa(f-1),a.ro.qd(f-1))}if(f=a.Zi,d){if(b){if(a.cz=!1,a.isEnabled&&null!==f){for(b=f,b.op=!0,b.name=c,d=a.history,d.Ma(),e=d.count-1;e>a.cj;e--)f=d.wa(e),null!==f&&f.clear(),d.qd(e),a.cz=!0;e=a.AA,0===e&&(e=1),e>0&&d.count>=e&&(f=d.wa(0),null!==f&&f.clear(),d.qd(0),a.Ug--),d.add(b),a.Ug++,d.freeze(),f=b}a.Xc("CommittedTransaction",c,f)}else{a.xi=!0;try{a.isEnabled&&null!==f&&(f.op=!0,f.undo())}finally{a.Xc("RolledBackTransaction",c,f),a.xi=!1}null!==f&&f.clear()}return a.Bu=null,!0}if(a.isEnabled&&!b&&null!==f){for(a=e,c=f.dh,b=c.count-1;b>=a;b--)d=c.wa(b),null!==d&&d.undo(),c.Ma(),c.qd(b);c.freeze()}return!1}function oa(){0<arguments.length&&t.ad(oa),t.Ac(this),this.U=null,this.MB=this.NB=this.YB=this.OB=!1,this.Ok=this.jy=null,this.CD=1.05,this.WB=1,this.dz=NaN,this.zC=null,this.DD=NaN}function Ie(a,b,c,d,e){if(!(a.contains(b)||(void 0===e&&(e=null),null!==e&&!e(b)||b instanceof Je)))if(a.add(b),b instanceof R){if(c&&b instanceof S)for(var f=b.Rc;f.next();){var g=f.value;Ie(a,g,c,d,e)}for(g=b.qe;g.next();)if(f=g.value,!a.contains(f)){var h=f.aa,i=f.ca;null!==h&&a.contains(h)&&null!==i&&a.contains(i)?Ie(a,f,c,d,e):null!==h&&null!==i||Ie(a,f,c,d,e)}if(d>1)for(b=b.BE();b.next();)g=b.value,Ie(a,g,c,d-1,e)}else if(b instanceof T)for(g=b.fk;g.next();)Ie(a,g.value,c,d,e)}function Ke(a,b,c,d,e){if(null===b||e&&!b.canCopy())return null;if(d.contains(b))return a=d.za(b),a instanceof C?a:null;var f=null,g=b.data;if(null!==g&&null!==c){var h=c.ba;b instanceof T?h instanceof M&&(g=h.eE(g),t.qb(g)&&(h.aw(g),f=c.Qf(g))):(g=h.copyNodeData(g),t.qb(g)&&(h.Am(g),f=c.fh(g)))}else Le(b),f=b.copy(),null!==c&&f instanceof C&&c.add(f);if(!(f instanceof C))return null;if(f.eb=!1,f.zg=!1,d.add(b,f),b instanceof R){for(h=b.qe;h.next();){if(g=h.value,g.aa===b){var i=d.za(g);null!==i&&(i.aa=f)}g.ca===b&&(i=d.za(g),null!==i&&(i.ca=f))}if(b instanceof S&&f instanceof S)for(b=b.Rc;b.next();)h=Ke(a,b.value,c,d,e),h instanceof T||null===h||(h.hb=f)}else if(b instanceof T)for(h=b.aa,null!==h&&(h=d.za(h),null!==h&&(f.aa=h)),h=b.ca,null!==h&&(h=d.za(h),null!==h&&(f.ca=h)),b=b.fk;b.next();)h=Ke(a,b.value,c,d,e),null!==h&&(h.$d=f);return f}function Ye(a){var b=t.Db();for(a=a.k;a.next();){var c=a.value;c instanceof T||b.push(c)}a=new ma(C);for(var c=b.length,d=0;c>d;d++){for(var e=b[d],f=!0,g=0;c>g;g++)if(e.nl(b[g])){f=!1;break}f&&a.add(e)}return t.ya(b),a}function ae(){0<arguments.length&&t.ad(ae),t.Ac(this),this.U=null,this.Zb="",this.Le=!0,this.lC=!1,this.yD=null,this.Zv=-1}function $e(a,b,c){var d=0;b.left?d=1===b.Ae?1:2===b.Ae?2:1:b.right&&1===b.Ae&&(d=3);var e="";if(null!==a){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}0!==d&&c.Ba(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}0!==d&&c.Ba(e)}if(null!==a)for(;null!==a;){switch(e=null,d){case 1:e=a.click;break;case 2:e=a.Om?a.Om:a.click;break;case 3:e=a.Ws}if(null!==e&&(e(b,a),b.Ee))break;a=a.ja}else{switch(e=null,d){case 1:e=c.click;break;case 2:e=c.Om?c.Om:c.click;break;case 3:e=c.Ws}null!==e&&e(b)}}function cf(){0<arguments.length&&t.ad(cf),ae.call(this),this.name="Dragging",this.LB=this.pC=!0,
this.Wq=this.cC=!1,this.tC=!0,this.Ty=new fa(NaN,NaN).freeze(),this.Uy=Eb,this.Vy=new w(NaN,NaN).freeze(),this.bC=!1,this.$B=this.KB=this.aC=this.RB=this.Ki=null,this.Iq=this.rC=!1,this.Bo=new w(NaN,NaN),this.Lv=new w,this.Ov=!1,this.Jv=this.oC=!0,this.Ln=100,this.Nl=this.zv=null}function df(a,b){if(a.Zh){var c=a.h;null!==c&&c.Sj&&(c.ba instanceof M&&1===b.count&&b.$a()instanceof T?(a.Mc=b.$a(),a.Mc.canRelinkFrom()&&a.Mc.canRelinkTo()&&a.Mc.Wi(),a.Ki=c.wb.SA,null===a.Ki&&(a.Ki=new hf,a.Ki.h=c)):(a.Mc=null,a.Ki=null))}}function kf(a){return void 0===a?{point:F.mj,tz:F.mj}:{point:a.copy(),tz:F.mj}}function jf(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof R){if(b.add(c,kf(c.location)),c instanceof S)for(var e=c.Rc;e.next();){var f=e.value;jf(a,b,f,d)}for(f=c.qe;f.next();)if(e=f.value,!b.contains(e)){var g=e.aa,h=e.ca;null!==g&&b.contains(g)&&null!==h&&b.contains(h)&&jf(a,b,e,d)}if(a.vE)for(c=c.BE();c.next();)f=c.value,jf(a,b,f,d)}else if(c instanceof T)for(e=c,b.add(e,kf()),f=e.fk;f.next();)jf(a,b,f.value,d);else c instanceof Je||b.add(c,kf(c.location))}function uf(a){var b=a.h;if(null!==b){var c=b.Wa;b.Wa=!0;for(var d=b.R,e=a.Nl;null!==e;){var f=e.CA;if(null!==f&&(f(d,e,null),d.Ee))break;e=e.ja}b.Wa=c}a.zv=null,a.Nl=null}function zf(){var a=ff;yf(a),Af(a);var b=a.h;null!==b&&a.Bo.N()&&(b.position=a.Bo),null!==b&&tf(b)}function ef(a,b){if(null!==b){a.Ov=!0;for(var c=b.k;c.next();){var d=c.key;d instanceof T&&(d.Wp=!0)}}}function vf(a,b){if(null!==b){for(var c=b.k;c.next();){var d=c.key;d instanceof T&&(d.Wp=!1,d.dj&&Bf(d)&&d.ac())}a.Ov=!1}}function Cf(a,b){for(var c=1/0,d=1/0,e=-(1/0),f=-(1/0),g=a.k;g.next();){var h=g.value;if(h.Ld()&&h.La()){var i=h.location,h=i.x,i=i.y;isNaN(h)||isNaN(i)||(c>h&&(c=h),d>i&&(d=i),h>e&&(e=h),i>f&&(f=i))}}1/0===c?b.p(0,0,0,0):b.p(c,d,e-c,f-d)}function Df(a,b){if(null===a.Dc){var c=a.h;if(!(null===c||b&&(c.ab||c.Ze))&&null!==a.qc){var d=c.la;for(d.isEnabled&&d.dF?null!==d.Zi&&0<d.Zi.dh.count&&(c.la.Np(),c.uc("Drag")):Af(a),c.Wa=!b,c.un=!b,a.jj=c.Nc.ea,d=a.cE?a.qc.Fl():c.selection,c=c.Wo(d,c,!0),d=c.k;d.next();)d.value.location=d.key.location;d=t.Gf(),Cf(c,d),t.hc(d);for(var d=new ia(C,Object),e=a.qc.k;e.next();){var f=e.key;f.Ld()&&f.canCopy()&&(f=c.za(f),null!==f&&(f.sf(),d.add(f,kf(f.location))))}for(c=c.k;c.next();)e=c.value,e instanceof T&&e.canCopy()&&d.add(e,kf());a.Dc=d,df(a,d.Fl()),null!==a.Mc&&(c=a.Mc,d=c.uj(),c.ql(a.jj.x-(d.x+d.width/2),a.jj.y-(d.y+d.height/2)))}}}function yf(a){var b=a.h;if(null!==b){if(null!==a.Dc&&(b.VA(a.Dc.Fl(),!1),a.Dc=null,null!==a.qc))for(var c=a.qc.k;c.next();)c.key instanceof T&&(c.value.point=new w(0,0));b.Wa=!1,b.un=!1,a.jj=b.Nc.ea}}function xf(a){if(null!==a.Mc){if(a.Zh&&null!==a.Ki){var b=a.Ki;b.h.remove(b.de),b.h.remove(b.ee)}a.Mc=null,a.Ki=null}}function Ef(a,b,c){var d=a.h;if(null!==d){var e=a.jj,f=t.K();f.assign(d.R.ea),a.moveParts(b,f.Vt(e),c),t.B(f)}}function Ff(a,b,c){if(b=b.hb,null!==b){if(a=Ff(a,b,c),null!==a)return a;if(a=c.za(b),null!==a)return a}return null}function Af(a){if(null!==a.qc){for(var b=a.h,c=a.qc.k;c.next();){var d=c.key;d.Ld()&&(d.location=c.value.point)}for(c=a.qc.k;c.next();)if(d=c.key,d instanceof T&&d.Wp){var e=c.value.point;a.qc.add(d,kf()),d.ql(-e.x,-e.y)}b.Uf()}}function Gf(a,b){if(null===b)return!0;var c=b.S;return null===c||c instanceof Je||c.layer.rc||a.qc&&a.qc.contains(c)||a.Dc&&a.Dc.contains(c)?!0:!1}function Hf(a,b,c,d){var e=a.h;if(null!==e){a.Zh&&(null!==a.Mc&&(a.Mc.aa=null,a.Mc.ca=null),If(a,!1));var f=!1;!1===a.Jv&&(f=e.Wa,e.Wa=!0);var g=!1,h=Jf(e,b,null,function(b){return!Gf(a,b)}),i=e.R;i.ce=h;var j=e.Wa;if(e.Wa=!0,h!==a.Nl){var k=a.Nl;for(a.zv=k,a.Nl=h;null!==k;){var l=k.CA;if(null!==l){if(h===k)break;if(null!==h&&h.ej(k))break;if(l(i,k,h),g=!0,i.Ee)break}k=k.ja}if(k=a.zv,!a.ia&&null===ff)return;for(;null!==h;){if(l=h.AF,null!==l){if(k===h)break;if(null!==k&&k.ej(h))break;if(l(i,h,k),g=!0,i.Ee)break}h=h.ja}if(h=a.Nl,!a.ia&&null===ff)return}null===h&&(l=e.BF,null!==l&&(l(i),g=!0)),(a.ia||null!==ff)&&(a.doDragOver(b,h),(a.ia||null!==ff)&&(e.Wa=j,g&&e.Uf(),!1===a.Jv&&(e.Wa=f),(e.of||e.pf)&&(c||d)&&Uf(e,i.Ke)))}}function Vf(a,b,c){var d=a.Ki;if(null===d)return null;var e=a.h.Qm(b,d.LA,function(a){return d.findValidLinkablePort(a,c)});a=t.K();for(var f=1/0,g=null,e=e.k;e.next();){var h=e.value;if(null!==h.S){var i=h.pb(Hb,a),i=b.Zj(i);f>i&&(g=h,f=i)}}return t.B(a),g}function If(a,b){var c=a.Mc;if(null!==c&&!(2>c.pa)){var d=a.h;if(null!==d&&!d.ab&&(d=a.Ki,null!==d)){var e=null,f=null;null===c.aa&&(e=Vf(a,c.o(0),!1),null!==e&&(f=e.S));var g=null,h=null;if(null===c.ca&&(g=Vf(a,c.o(c.pa-1),!0),null!==g&&(h=g.S)),(null===f||f instanceof R)&&(null===h||h instanceof R)){var i=d.isValidLink(f,e,h,g);b?(c.Fn=c.o(0).copy(),c.Jn=c.o(c.pa-1).copy(),c.Wp=!1,c.aa=f,null!==e&&(c.Rf=e.Nd),c.ca=h,null!==g&&(c.Og=g.Nd)):i?Wf(d,f,e,h,g):Wf(d,null,null,null,null)}}}}function Xf(a,b){var c=a.h;if(null!==c&&null!==c.ba){a.Zh&&If(a,!0),uf(a);var d=Jf(c,b,null,function(b){return!Gf(a,b)}),e=c.R;if(e.ce=d,null!==d)for(var f=d;null!==f;){var g=f.wt;if(null!==g&&(g(e,f),e.Ee))break;f=f.ja}else g=c.wt,null!==g&&g(e);if((a.ia||null!==ff)&&(a.doDropOnto(b,d),a.ia||null!==ff))for(d=c.selection.k;d.next();)e=d.value,e instanceof R&&Yf(c,e.oa)}}function $f(a,b,c){if(null===a.Dc){var d=a.h;if(null!==d&&!d.ab&&!d.Ze&&null!==d.ba){d.Wa=!c,d.un=!c,a.jj=d.R.ea,d=d.Wo(b,d,!0),c=t.Gf(),Cf(b,c);var e=c.x+c.width/2,f=c.y+c.height/2;t.hc(c);var g=a.Lv;c=new ia(C,Object);var h=t.K();for(b=b.k;b.next();){var i=b.value;if(i.Ld()&&i.canCopy()){var j=i.location,i=d.za(i);h.p(g.x-(e-j.x),g.y-(f-j.y)),i.location=h,i.sf(),c.add(i,kf(h))}}for(t.B(h),d=d.k;d.next();)e=d.value,e instanceof T&&e.canCopy()&&c.add(e,kf());a.Dc=c,df(a,c.Fl()),null!==a.Mc&&(c=a.Mc,d=c.uj(),c.ql(a.jj.x-(d.x+d.width/2),a.jj.y-(d.y+d.height/2)))}}}function ag(){0<arguments.length&&t.ad(ag),ae.call(this),this.XC=100,this.wC=!1;var a=new T,b=new V;b.fj=!0,b.stroke="blue",a.add(b),b=new V,b.on="Standard",b.fill="blue",b.stroke="blue",a.add(b),a.af="Tool",this.rD=a,a=new R,b=new V,b.Nd="",b.Ab="Rectangle",b.fill=null,b.stroke="magenta",b.fb=2,b.Ca=F.Ux,a.add(b),a.wl=!1,a.af="Tool",this.pD=a,this.qD=b,a=new R,b=new V,b.Nd="",b.Ab="Rectangle",b.fill=null,b.stroke="magenta",b.fb=2,b.Ca=F.Ux,a.add(b),a.wl=!1,a.af="Tool",this.sD=a,this.tD=b,this.VC=this.UC=this.QC=this.PC=this.RC=null,this.sC=!0,this.xH=new ia(Q,"boolean"),this.YC=this.Lk=this.lD=null}function bg(a,b,c){if(null===b)return!1;var d=b.$d;if(null===d)return!1;if(d===c)return!0;var e=new ma(R);return e.add(b),dg(a,d,c,e)}function dg(a,b,c,d){if(b===c)return!0;var e=b.aa;return null!==e&&e.bi&&(d.add(e),dg(a,e.$d,c,d))?!0:(b=b.ca,null!==b&&b.bi&&(d.add(b),dg(a,b.$d,c,d))?!0:!1)}function cg(a,b,c,d){if(null===b||null===c)return a.Wm;var e=a.h.QG;if(e!==eg){if(e===fg){if(null!==d&&!d.Ec)return!0;for(e=c.qe;e.next();){var f=e.value;if(f!==d&&f.Ec&&f.ca===c)return!1}return!mg(a,b,c,d,!0)}if(e===ng){if(null!==d&&!d.Ec)return!0;for(e=b.qe;e.next();)if(f=e.value,f!==d&&f.Ec&&f.aa===b)return!1;return!mg(a,b,c,d,!0)}if(e===og)return b===c?a=!0:(e=new ma(R),e.add(c),a=pg(a,e,b,c,d)),!a;if(e===qg)return!mg(a,b,c,d,!1);if(e===rg)return b===c?a=!0:(e=new ma(R),e.add(c),a=sg(a,e,b,c,d)),!a}return!0}function mg(a,b,c,d,e){if(b===c)return!0;if(null===b||null===c)return!1;for(var f=b.qe;f.next();){var g=f.value;if(g!==d&&(!e||g.Ec)&&g.ca===b&&(g=g.aa,g!==b&&mg(a,g,c,d,e)))return!0}return!1}function pg(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.qe;f.next();){var g=f.value;if(g!==e&&g.ca===c&&(g=g.aa,g!==c&&pg(a,b,g,d,e)))return!0}return!1}function sg(a,b,c,d,e){if(c===d)return!0;if(null===c||null===d||b.contains(c))return!1;b.add(c);for(var f=c.qe;f.next();){var g=f.value;if(g!==e){var h=g.aa,g=g.ca,h=h===c?g:h;if(h!==c&&sg(a,b,h,d,e))return!0}}return!1}function qa(){0<arguments.length&&t.ad(qa),ag.call(this),this.name="Linking",this.ly={},this.ky=null,this.sa=tg,this.uz=this.hD=null}function hf(){0<arguments.length&&t.ad(hf),ag.call(this),this.name="Relinking";var a=new V;a.Ab="Diamond",a.Ca=F.Nx,a.fill="lightblue",a.stroke="dodgerblue",a.cursor="pointer",a.Cf=0,this.hC=a,a=new V,a.Ab="Diamond",a.Ca=F.Nx,a.fill="lightblue",a.stroke="dodgerblue",a.cursor="pointer",a.Cf=-1,this.uD=a,this.dc=null,this.SC=new x}function Wf(a,b,c,d,e){null!==b?(a.copyPortProperties(b,c,a.de,a.Dl,!1),a.h.add(a.de)):a.h.remove(a.de),null!==d?(a.copyPortProperties(d,e,a.ee,a.El,!0),a.h.add(a.ee)):a.h.remove(a.ee)}function Bg(){0<arguments.length&&t.ad(Bg),ae.call(this),this.name="LinkReshaping";var a=new V;a.Ab="Rectangle",a.Ca=F.dq,a.fill="lightblue",a.stroke="dodgerblue",this.Fk=a,a=new V,a.Ab="Diamond",a.Ca=F.dq,a.fill="lightblue",a.stroke="dodgerblue",this.DC=a,this.ZC=3,this.iy=this.dc=null,this.TC=new w,this.mz=null}function Og(a,b){t.l(a,Q,Bg,"setReshapingBehavior:obj"),t.Aa(b,Bg,Bg,"setReshapingBehavior:behavior"),a.Av=b}function Qg(a,b,c,d,e,f){return f?Math.abs(b.y-c.y)<a.Lg&&Math.abs(c.y-d.y)<a.Lg&&Math.abs(d.y-e.y)<a.Lg:Math.abs(b.x-c.x)<a.Lg&&Math.abs(c.x-d.x)<a.Lg&&Math.abs(d.x-e.x)<a.Lg}function Rg(){0<arguments.length&&t.ad(Rg),ae.call(this),this.name="Resizing",this.Ej=new fa(1,1).freeze(),this.Dj=new fa(9999,9999).freeze(),this.pj=new fa(NaN,NaN).freeze(),this.Wq=!1,this.sb=null;var a=new V;a.Qj=Hb,a.Ab="Rectangle",a.Ca=F.dq,a.fill="lightblue",a.stroke="dodgerblue",a.fb=1,a.cursor="pointer",this.Fk=a,this.dc=null,this.vv=new fa,this.lz=new w,this.Qy=new fa(0,0),this.Py=new fa(1/0,1/0),this.Oy=new fa(1,1),this.MC=!0}function Sg(a,b,c){if(null!==b)if(b.alignment.Pc()||""===b.cursor){if(b instanceof y)for(b=b.elements;b.next();)Sg(a,b.value,c)}else a:{if(a=b.alignment,a.Ge()&&(a=Hb),0>=a.x)c=0>=a.y?c+225:1<=a.y?c+135:c+180;else if(1<=a.x)0>=a.y?c+=315:1<=a.y&&(c+=45);else if(0>=a.y)c+=270;else{if(!(1<=a.y))break a;c+=90}0>c?c+=360:c>=360&&(c-=360),b.cursor=22.5>c?"e-resize":67.5>c?"se-resize":112.5>c?"s-resize":157.5>c?"sw-resize":202.5>c?"w-resize":247.5>c?"nw-resize":292.5>c?"n-resize":337.5>c?"ne-resize":"e-resize"}}function Zg(){0<arguments.length&&t.ad(Zg),ae.call(this),this.name="Rotating",this.eD=45,this.dD=2,this.sb=null;var a=new V;a.Ab="Ellipse",a.Ca=F.Nx,a.fill="lightblue",a.stroke="dodgerblue",a.fb=1,a.cursor="pointer",this.Fk=a,this.dc=null,this.uv=0,this.$C=new w}function ah(){0<arguments.length&&t.ad(ah),ae.call(this),this.name="ClickSelecting"}function bh(){0<arguments.length&&t.ad(bh),ae.call(this),this.name="Action",this.tn=null}function ra(){0<arguments.length&&t.ad(ra),ae.call(this),this.name="ClickCreating",this.xk=null,this.qC=!0,this.gC=new w(0,0)}function ch(){if(0<arguments.length&&t.ad(ch),ae.call(this),this.name="ContextMenu",this.Cn=this.PB=null,this.GC=new w,this.Kn=null,!0===t.gB){this.Kn=new Je,this.Ey=null;var a=this;if(this.vD=function(){a.stopTool()},!1===t.lE){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d),d.sheet.insertRule(".defaultCXul { list-style: none; }",0),d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),b.addEventListener("contextmenu",function(a){return a.preventDefault(),!1},!1),b.addEventListener("selectstart",function(a){return a.preventDefault(),!1},!1),c.addEventListener("contextmenu",function(a){return a.preventDefault(),!1},!1),document.body&&(document.body.appendChild(b),document.body.appendChild(c)),t.Us=b,t.Ts=c,t.lE=!0}}}function Ze(a,b,c){a.ia=!0,b&&a.standardMouseSelect(),a.standardMouseClick(),a.Cn=null,void 0===c&&(c=a.findObjectWithContextMenu()),null!==c?(b=c.contextMenu,null!==b?(a.Cn=c instanceof Q?c:null,a.showContextMenu(b,a.Cn)):a.showDefaultContextMenu()):a.showDefaultContextMenu()}function dh(){0<arguments.length&&t.ad(dh),ae.call(this),this.name="DragSelecting",this.Ln=175,this.vC=!1;var a=new C;a.af="Tool",a.wl=!1;var b=new V;b.name="SHAPE",b.Ab="Rectangle",b.fill=null,b.stroke="magenta",a.add(b),this.Kl=a}function eh(){0<arguments.length&&t.ad(eh),ae.call(this),this.name="Panning",this.nz=new w,this.oj=!1;var a=this;this.jD=function(){document.removeEventListener("scroll",a.jD,!1),a.stopTool()}}function fh(){0<arguments.length&&t.ad(fh),ae.call(this),this.name="TextEditing",this.nD=null,this.Xy=0,this.SB=this.Az=null,this.iD=gh,this.Tk=null,this.Ya=hh,this.Pk=null;var a=document.createElement("textarea");a.CB=!0,this.XB=a,a.addEventListener("input",function(){var a=this.textEditingTool,b=a.nD;b.text=this.value,ih(b,a.Xy,1/0),this.rows=b.nF},!1),a.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(null!==c)if(13===b)c.acceptText(jh);else{if(9===b)return c.acceptText(kh),a.preventDefault(),!1;27===b&&(c.doCancel(),c.h&&c.h.focus())}},!1),a.addEventListener("focus",function(){var a=this.textEditingTool;a.Ya===lh?a.Ya=mh:a.Ya===nh?a.Ya=wh:a.Ya===wh&&(a.Ya=mh),"function"==typeof this.select&&this.select()},!1),a.addEventListener("blur",function(){"function"==typeof this.focus&&this.focus(),"function"==typeof this.select&&this.select()},!1)}function Bh(a){if(null!==a.Ng&&null!==a.Pf){var b=a.Ng,c=a.Ng.text,d=a.Pf.value,e="",e="function"==typeof d?d():d;if(!a.isValidText(a.Ng,c,e))return a.Ya=mh,null!==b.at&&b.at(a,c,e),null===a.Pk&&(a.Pk=a.Pf.style.border,a.Pf.style.border="3px solid red"),void("function"==typeof a.Pf.focus&&a.Pf.focus());a.uc(a.name),a.Ya=nh,c!==e&&(a.Ng.text=e),a.gf=a.name,b=a.h,null!==b&&b.Ba("TextEdited",a.Ng,c),a.hk(),a.stopTool(),null!==b&&b.focus()}null!==a.Pk&&(a.Pf.style.border=a.Pk,a.Pk=null)}function He(){ae.call(this),this.name="ToolManager",this.HC=new B(ae),this.IC=new B(ae),this.JC=new B(ae),this.jC=this.kC=1e3,this.ZB=new fa(2,2).Ja(),this.Au=this.Cy=null,this.KC=bf}function Ch(a,b,c,d){t.i(b,"string",He,"replaceStandardTool:name"),t.l(d,B,He,"replaceStandardTool:list"),null!==c&&(t.l(c,ae,He,"replaceStandardTool:newtool"),c.h&&c.h!==a.h&&t.m("Cannot share tools between Diagrams: "+c.toString()),c.name=b,c.yd(a.h)),a.findTool(b)?a.replaceTool(b,c):null!==c&&d.add(c)}function Be(){this.lH=Dh,this.U=null,new ia,this.Sl=this.Tl=null,this.FB=this.sd=this.cr=this.wj=!1,this.Le=!0,this.zu=this.yu=this.QB=null,this.Ay=0,this.Ly=600,this.rH=new w(0,0),this.HB=this.GB=this.zD=!1,this.so=new ia}function Dh(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}function Eh(a){a.Le&&requestAnimationFrame(function(){!1===a.sd||a.wj||(a.sd=!1,a.U.Ba("AnimationStarting"),Fh(a))})}function Gh(a,b,c,d){if(a.sd&&(e&&(b instanceof Q||t.m("addToAnimation:object must be a GraphObject.")),!(b instanceof C)||b.oA)){var f,g=a.so;g.contains(b)?(b=g.za(b),a=b[0],f=b[1],void 0===a.position&&(a.position=Hh(c)),f.position=Hh(d)):(a={},f={},a.position=Hh(c),f.position=Hh(d),g.add(b,[a,f]))}}function Hh(a){return a instanceof w?a.copy():a instanceof fa?a.copy():a}function Fh(a){var b,c=a.U;if(null!==c)if(0===a.so.count)a.wj=!1,c.Uf();else{a.wj=!0,b||(b={});var d=b.xK||a.lH,e=b.JK||null,f=b.KK||null,g=b.duration||a.Ly;b=a.so.k;for(var h=a.rH;b.next();){var i=b.value[0].position;i&&!i.N()&&i.assign(h)}a.QB=d,a.yu=e,a.zu=f,a.Ay=g;var j=a.kH=a.so;Ih(a),Jh(a,c,j,d,0,g,null!==a.Tl&&null!==a.Sl),Zf(a.U),Kh(a),requestAnimationFrame(function(b){var e,f=b||+new Date,h=f+g;!function i(b){!1!==a.wj&&(e=b||+new Date,b=e>h?g:e-f,Ih(a),Jh(a,c,j,d,b,g,null!==a.Tl&&null!==a.Sl),a.yu&&a.yu(),Zf(c),Kh(a),e>h?Lh(a):requestAnimationFrame(i))}(f)})}}function Ih(a){if(!a.cr){var b=a.U;a.zD=b.Wa,a.GB=b.Tt,a.HB=b.yo,b.Wa=!0,b.Tt=!0,b.yo=!0,a.cr=!0}}function Kh(a){var b=a.U;b.Wa=a.zD,b.Tt=a.GB,b.yo=a.HB,a.cr=!1}function Jh(a,b,c,d,e,f,g){for(c=c.k;c.next();){var h,i=c.key,j=c.value,k=j[0],j=j[1];for(h in j)void 0!==Mh[h]&&Mh[h](i,k[h],j[h],d,e,f)}g&&(g=a.Tl,a=a.Sl,h=a.y-g.y,a=d(e,g.x,a.x-g.x,f),d=d(e,g.y,h,f),e=b.Yb,b.Yb=!0,b.position=new w(a,d),b.Yb=e)}function Lh(a){a.wj=!1,a.Tl=null,a.Sl=null,a.so=new ia,Ih(a);for(var b=a.U.links;b.next();){var c=b.value;null!==c.xo&&(c.points=c.xo,c.xo=null)}b=a.U,b.Oc(),b.Uf(),Kh(a),a.zu&&a.zu(),a.zu=null,a.yu=null,b.Ba("AnimationFinished")}function Nh(a,b,c){var d=b.oa,e=c.oa;c instanceof S&&c.placeholder?(c=c.placeholder,d=c.pb(Eb),d.x+=c.padding.left,d.y+=c.padding.top,Gh(a,b,d,b.position)):Gh(a,b,new w(e.x+e.width/2-d.width/2,e.y+e.height/2-d.height/2),b.position)}function Oh(a,b,c){a.sd&&(null===a.Tl&&b.N()&&null===a.Sl&&(a.Tl=b.copy()),a.Sl=c.copy())}function $d(){0<arguments.length&&t.ad($d),t.Ac(this),this.U=null,this.zb=new B(C),this.Zb="",this.Lf=1,this.bz=!1,this.Rk=this.Dz=this.uk=this.tk=this.sk=this.rk=this.pk=this.qk=this.ok=this.wk=this.nk=this.vk=this.mk=this.lk=!0,this.Zy=!1,this.wv=[]}function Sh(a,b,c,d){if(a.visible){b.globalAlpha=a.Lf;var e=a.zb;a=a.wv,a.length=0;for(var f=c.scale,g=e.length,h=d.length,i=0;g>i;i++){var j=e.n[i];if(Ph(j)){if(j instanceof T&&(j.ic&&a.push(j),!1===j.rg))continue;var k,l=Th(j,j.oa);a:{k=l;for(var m=d,n=h,o=2/f,p=4/f,q=0;n>q;q++){var r=m[q];if(0!==r[2]&&0!==r[3]&&k.$E(r[0]-o,r[1]-o,r[2]+p,r[3]+p)){k=!0;break a}}k=!1}k&&(1<l.width*f||1<l.height*f?j.Ue(b,c):Rh(j,b))}}b.globalAlpha=1}}function z(a){function b(){document.removeEventListener("DOMContentLoaded",b,!1),Uh(c)}1<arguments.length&&t.m("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),t.Ac(this),t.$z=[],this.Yb=!0,this.li=new Be,this.li.U=this,this.nf=17;var c=this;null!==document.body?Uh(this):document.addEventListener("DOMContentLoaded",b,!1),this.Rb=new B($d),this.Eb=this.Fb=0,this.Nb=this.Sg=this.gb=null,this.Sk={},this.RF(),this.Yy={},this.Yy.twoTouchPan=!0,this.Ra=new w(NaN,NaN).freeze(),this.xc=1,this.Su=new w(NaN,NaN).freeze(),this.Tu=NaN,this.hv=1e-4,this.ev=100,this.md=new ga,this.$v=new w(NaN,NaN).freeze(),this.Ju=new x(NaN,NaN,NaN,NaN).freeze(),this.Hl=Xe,this.An=xb,this.Hk=Xe,this.Xn=xb,this.Uu=this.Ru=Eb,this.fg=new ma(Q),this.ve=!0,this.Rl=new ia(T,x),this.Mn=!0,this.hH=250,this.Il=null,this.ou=new ab(16,16,16,16).freeze(),this.Du=this.Nf=!1,this.Qn=!0,this.Dk=new ld,this.Ed=new ld,this.ec=new ld,this.qj=null,this.Pv=-1,this.wz=!1,this.Iy=new ia("string",B),this.Hy=new ia("string","string"),Vh(this),this.rv=new ma(R),this.Uk=new ma(S),this.av=new ma(T),this.zb=new ma(C),this.Wu=!0,this.mC=!1,this.Wv=eg,this.yj=10,this.By=this.Fy=this.Uv=null,this.zy="",this.Gq="auto",this.qi=this.Oi=this.Bi=this.kv=this.Ci=this.Di=this.Ei=this.pi=this.ti=this.ni=null,this.vi=!0,this.jz=!1,this.py=null,this.Xu=this.un=this.Gy=this.yo=this.cD=this.Li=!1,this.xC=!0,this.Bd=!1,this.ke=null;var d=this;this.EC=function(a){if(a.ba===d.ba&&d.Na){d.Na=!1;try{var b=a.td;""===a.Af&&b===vd&&Wh(d,a.object,a.propertyName)}finally{d.Na=!0}}},this.FC=function(a){Xh(d,a)},this.BD=!0,this.Ug=-2,this.ri=new ia(Object,C),this.Ak=new ia(Object,T),this.$l=new ia(Object,Array),this.Jk=!1,this.mk=this.lk=this.eu=this.Le=!0,this.gu=this.fu=!1,this.lu=this.ju=this.uk=this.tk=this.sk=this.rk=this.pk=this.qk=this.ok=this.iu=this.wk=this.nk=this.vk=!0,this.ao=this.uC=!1,this.ku=this.hu=this.Pu=this.Ou=!0,this.Fv=this.Ev=16,this.qz=this.Dv=!1,this.sz=this.rz=this.Lj=this.Kj=null,this.Ne=new ab(5).freeze(),this.Iv=new ma(C).freeze(),this.fv=999999999,this.Qu=new ma(C).freeze(),this.Ik=this.vj=this.wi=!0,this.Vl=this.Ul=!1,this.Pd=null,this.mu=!0,this.lf=!1,this.Sd=null,this.km=1,this.Tn=!1,this.gD=0,this.po=null,this.AD=new x(NaN,NaN,NaN,NaN).freeze(),this.Eu=new x(NaN,NaN,NaN,NaN).freeze(),this.lm=new ma,Yh(this),this.$u=this.Lu=this.qv=this.UB=this.TB=this.VB=this.zj=this.Ek=this.Fi=null,Zh(this),this.gd=null,this.Ku=!1,this.Bn=null,this.wb=new He,this.wb.initializeStandardTools(),this.Ua=this.uw=this.wb,this.Se=new oa,this.ba=new M,this.Li=!0,this.jc=new be,this.Li=!1,this.dC=this.Ky=null,this.Yv=!0,t.WI&&(this.Yv=!1),this.pz=!1,this.tj=null,this.mg=1,this.Gk=new $h,void 0!==a&&ai(this,a),this.bm=1,this.cm=0,this.AC=new w,this.xD=500,this.nu=new w,this.ns=null,this.Yb=!1}function Zh(a){a.Fi=new ia("string",C);var b=new R,c=new na;c.bind(new De("text","",yd)),b.add(c),a.VB=b,a.Fi.add("",b),b=new R,c=new na,c.stroke="brown",c.bind(new De("text","",yd)),b.add(c),a.Fi.add("Comment",b),b=new R,b.wl=!1,b.Qz=!1,c=new V,c.Ab="Ellipse",c.fill="black",c.stroke=null,c.Ca=new fa(3,3).Ja(),b.add(c),a.Fi.add("LinkLabel",b),a.Ek=new ia("string",S),b=new S,b.qx="GROUPPANEL",b.type=bi,c=new na,c.font="bold 12pt sans-serif",c.bind(new De("text","",yd)),b.add(c),c=new y(ci),c.name="GROUPPANEL";var d=new V;d.Ab="Rectangle",d.fill="rgba(128,128,128,0.2)",d.stroke="black",c.add(d),d=new Ug,d.padding=new ab(5,5,5,5).Ja(),c.add(d),b.add(c),a.TB=b,a.Ek.add("",b),a.zj=new ia("string",T),b=new T,c=new V,c.fj=!0,b.add(c),c=new V,c.on="Standard",c.fill="black",c.stroke=null,c.fb=0,b.add(c),a.UB=b,a.zj.add("",b),b=new T,c=new V,c.fj=!0,c.stroke="brown",b.add(c),a.zj.add("Comment",b),b=new Je,b.type=ci,c=new V,c.fill=null,c.stroke="dodgerblue",c.fb=3,b.add(c),c=new Ug,c.margin=new ab(1.5,1.5,1.5,1.5).Ja(),b.add(c),a.qv=b,a.Lu=b,b=new Je,b.type=wg,c=new V,c.fj=!0,c.fill=null,c.stroke="dodgerblue",c.fb=3,b.add(c),a.$u=b}function Uh(a){var b=document.createElement("p");b.style.width="100%",b.style.height="200px",b.style.boxSizing="content-box";var c=document.createElement("div");c.style.position="absolute",c.style.visibility="hidden",c.style.width="200px",c.style.height="150px",c.style.overflow="hidden",c.style.boxSizing="content-box",c.appendChild(b),document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll",b=b.offsetWidth,d===b&&(b=c.clientWidth),document.body.removeChild(c),a.nf=d-b}function di(a){var b=a.gb;b.addEventListener("touchstart",a.FG,!1),b.addEventListener("touchmove",a.EG,!1),b.addEventListener("touchend",a.DG,!1),b.addEventListener("gesturestart",function(){!1!==a.vi&&(a.km=a.scale,a.Ua.doCancel(),a.iC=0)},!1),b.addEventListener("gesturechange",function(b){if(!1!==a.vi){var c=b.scale;if(a.iC++,a.Yy.twoTouchPan){if(1===a.iC){if(!(c>1.02||.98>c))return void(a.km=null);b.preventDefault()}}else b.preventDefault();if(null!==a.km){var d=a.Fb,e=a.Eb,f=a.gb.getBoundingClientRect();b=new w(b.pageX-window.scrollX-d/f.width*f.left,b.pageY-window.scrollY-e/f.height*f.top),c*=a.km,d=a.Se,c!==a.scale&&d.canResetZoom(c)&&(e=a.$f,a.$f=b,d.resetZoom(c),a.$f=e)}}},!1),window.MSGesture&&(a.po=new window.MSGesture,a.po.target=b,b.addEventListener("pointerdown",function(b){a.po.addPointer(b.pointerId)},!1),b.addEventListener("MSGestureStart",function(b){!1!==a.vi&&(a.km=a.scale,a.Tn=!0,b.preventDefault())},!1),b.addEventListener("MSGestureChange",function(b){if(!1!==a.vi){var c=b.scale;if(1===c)b.gestureObject.stop(),b.preventDefault();else{a.Tn&&(a.Ua.doCancel(),a.Tn=!1),b=a.IG(a.Un(b));var c=a.scale*c,d=a.Se;if(c!==a.scale&&d.canResetZoom(c)){var e=a.$f;a.$f=b,d.resetZoom(c),a.$f=e}}}},!1)),b.addEventListener("mousemove",a.Dp,!1),b.addEventListener("mousedown",a.Cp,!1),b.addEventListener("mouseup",a.Fp,!1),b.addEventListener("mousewheel",a.hh,!1),b.addEventListener("DOMMouseScroll",a.hh,!1),b.addEventListener("mouseout",a.Ep,!1),b.addEventListener("keydown",a.fJ,!1),b.addEventListener("keyup",a.gJ,!1),b.addEventListener("selectstart",function(a){return a.preventDefault(),!1},!1),b.addEventListener("contextmenu",function(a){return a.preventDefault(),!1},!1),window.addEventListener("resize",a.YG,!1)}function $h(){this.wH="63ad05bbe23a1786468a4c741b6d2",this.wH===this._tk?this.yh=!0:ei(this,!1)}function ei(a,b){var c="p",d=window[t.Ha("76a715b2f73f148a")][t.Ha("72ba13b5")];if(t.Ha("77bb5bb2f32603de")===window[t.Ha("76a715b2f73f148a")][t.Ha("6aba19a7ec351488")])try{if(a.yh=!window[t.Ha("4da118b7ec2108")]([t.Ha("5bb806bfea351a904a84515e1b6d38b6")])([t.Ha("49bc19a1e6")])([t.Ha("59bd04a1e6380fa5539b")])([t.Ha("7bb8069ae7")]===t.Ha(t.dw)),!1===a.yh)return;if(a.yh=!window[t.Ha("4da118b7ec2108")]([t.Ha("5bb806bfea351a904a84515e1b6d38b6")])([t.Ha("49bc19a1e6")])([t.Ha("59bd04a1e6380fa5539b6c7a197c31bb4cfd3e")])([t.Ha("7bb8069ae7")]===t.Ha(t.dw)),!1===a.yh)return}catch(e){}for(var f=d[t.Ha("76ad18b4f73e")],g=d[t.Ha("73a612b6fb191d")](t.Ha("35e7"))+2;f>g;g++)c+=d[g];d=c[t.Ha("73a612b6fb191d")](t.Ha(t.dw)),0>=d&&t.Ha(t.dw)!==t.Ha("7da71ca0ad381e90")&&(d=c[t.Ha("73a612b6fb191d")](t.Ha("76a715b2ef3e149757"))),a.yh=!(d>0&&d<c[t.Ha("73a612b6fb191d")](t.Ha("35"))),a.yh&&(c=document[t.Ha("79ba13b2f7333e8846865a7d00")]("div"),d=t.Ha("02cncncn"),"."===d[0]&&(d=d[t.Ha("69bd14a0f724128a44")](1)),c[t.Ha("79a417a0f0181a8946")]=d,document[t.Ha("78a712aa")]?(document[t.Ha("78a712aa")][t.Ha("7bb806b6ed32388c4a875b")](c),d=window[t.Ha("7dad0290ec3b0b91578e5b40007031bf")](c)[t.Ha("7dad0283f1390b81519f4645156528bf")](t.Ha("78a704b7e62456904c9b12701b6532a8")),document[t.Ha("78a712aa")][t.Ha('"68ad1bbcf533388c4a875b')](c),d&&-1!==d.indexOf(t.Ha(t.cI))&&-1!==d.indexOf(t.Ha(t.dI))&&(a.yh=!1)):(a.yh=null,b&&(a.yh=!1)))}function ai(a,b){void 0!==b&&null!==b||t.m("Diagram setup requires an argument DIV."),null!==a.Nb&&t.m("Diagram has already completed setup."),"string"==typeof b?a.Nb=document.getElementById(b):b instanceof HTMLDivElement?a.Nb=b:t.m("No DIV or DIV id supplied: "+b),null===a.Nb&&t.m("Invalid DIV id; could not get element with id: "+b),void 0!==a.Nb.U&&t.m("Invalid div id; div already has a Diagram associated with it."),"static"===window.getComputedStyle(a.Nb,null).position&&(a.Nb.style.position="relative"),a.Nb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",a.Nb.style["-ms-touch-action"]="none",a.Nb.innerHTML="",a.Nb.U=a;var c=document.createElement("canvas");if(c.getContext&&c.getContext("2d")){c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",void 0!==c.style&&(c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.zIndex="2",c.style.TK="none",c.style.webkitUserSelect="none",c.style.MozUserSelect="none"),a.Fb=a.Nb.clientWidth||1,a.Eb=a.Nb.clientHeight||1,a.gb=c,a.Sg=c.getContext("2d");var d=a.Sg;a.mg=a.computePixelRatio(),fi(a,a.Fb,a.Eb),c.U=a,a.hy=d[t.Ha("7eba17a4ca3b1a8346")][t.Ha("78a118b7")](d,t.Gl,4,4),a.Nb.insertBefore(c,a.Nb.firstChild),d=document.createElement("canvas"),d.width=1,d.height=1,a.Ky=d,a.dC=d.getContext("2d");var d=document.createElement("div"),f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div");d.style.position="absolute",d.style.overflow="auto",d.style.width=a.Fb+"px",d.style.height=a.Eb+"px",d.style.zIndex="1",f.style.position="absolute",f.style.overflow="auto",f.style.width=a.Fb+"px",f.style.height=a.Eb+"px",f.style.zIndex="1",g.style.position="absolute",g.style.width="1px",g.style.height="1px",h.style.position="absolute",h.style.width="1px",h.style.height="1px",a.Nb.appendChild(d),a.Nb.appendChild(f),d.appendChild(g),f.appendChild(h),d.onscroll=a.NC,d.onmousedown=a.OC,d.U=a,d.aD=!0,f.onscroll=a.NC,f.onmousedown=a.OC,f.U=a,f.bD=!0,a.Kj=d,a.Lj=f,a.rz=g,a.sz=h,a.FJ=t.iE(function(){a.fa()},300,!1),a.YG=t.iE(function(){gi(a)},250,!1),a.preventDefault=function(a){return a.preventDefault(),!1},a.Dp=function(b){if(a.isEnabled){a.ao=!0;var c=a.Ed;t.Um&&c.Uw?(b.preventDefault(),b.simulated=!0,a.ns=b):(a.Ed=a.ec,a.ec=c,hi(a,a,b,c,!0),a.dB(b,null,b.target.U)||(a.doMouseMove(),a.Ua.isBeyondDragSize()&&(ii(a),a.bm=0)))}},a.Cp=function(b){if(a.isEnabled){a.ao=!0;var c=a.Ed;if(t.Um&&null!==a.ns)a.ns=b,b.preventDefault();else if(t.Um&&400>b.timeStamp-a.cm)b.preventDefault();else if(a.Ed=a.ec,a.ec=c,hi(a,a,b,c,!0),c.ak=!0,c.Ae=b.detail,a.Dk=c.copy(),!0===c.Mq.simulated)b.preventDefault(),b.simulated=!0;else if(e&&e.FF&&(window.FF=a.cp(c.ea)),ff=null,a.doMouseDown(),1===b.button)return b.preventDefault(),!1}},a.Fp=function(b){if(a.isEnabled){a.ao=!0;var c=a.Ed;if(t.Um){if(400>b.timeStamp-a.cm)return void b.preventDefault();a.cm=b.timeStamp}t.Um&&null!==a.ns?(a.ns=null,b.preventDefault()):(a.Ed=a.ec,a.ec=c,hi(a,a,b,c,!0),c.lj=!0,c.Ae=b.detail,(t.Qw||t.tA)&&(b.timeStamp-a.cm<a.xD&&!a.Ua.isBeyondDragSize()?a.bm++:a.bm=1,a.cm=b.timeStamp,c.Ae=a.bm),c.bubbles=b.bubbles,b.target.U&&(c.nh=b.target.U),a.rG(b,null,new w,c.nh)||(a.doMouseUp(),tf(a),ti(a,c,b)))}},a.hh=function(b){if(a.isEnabled){var c=a.Ed;a.Ed=a.ec,a.ec=c,hi(a,a,b,c,!0),c.bubbles=!0,c.Yj=void 0!==b.wheelDelta?b.wheelDelta:-40*b.detail,a.doMouseWheel(),ti(a,c,b)}},a.Ep=function(){if(a.isEnabled){a.ao=!1;var b=a.Ua;b.cancelWaitAfter(),b instanceof He&&b.hideToolTip()}},a.FG=function(b){if(a.isEnabled){if(a.wz=!1,1<b.touches.length){if(a.Ua.doCancel(),a.vi){a.Tn=!0,a.km=a.scale;var c=a.Fb,d=a.Eb,e=a.gb.getBoundingClientRect(),f=b.targetTouches[0],g=f.clientX-c/e.width*e.left,h=f.clientY-d/e.height*e.top,f=b.targetTouches[1],c=f.clientX-c/e.width*e.left-g,d=f.clientY-d/e.height*e.top-h,d=Math.sqrt(c*c+d*d);return a.gD=d,b.preventDefault(),b.cancelBubble=!0,!1}return ii(a),b.cancelBubble=!1,!0}d=a.Ed,a.Ed=a.ec,a.ec=d,d.h=a,ui(a,b.targetTouches[0],d),d.$c=0,d.button=0,d.ak=!0,d.lj=!1,d.Ae=1,d.Yj=0,d.Ee=!1,d.bubbles=!1,d.event=b,d.timestamp=Date.now(),d.nh=b.target.U?b.target.U:null,d.ce=null,a.Dk=d.copy(),ff=null,a.doMouseDown(),vi(a,d),ti(a,d,b)}},a.EG=function(b){if(a.isEnabled){if(1<b.touches.length){if(a.Ua.doCancel(),ii(a),a.vi&&a.Tn&&1<b.targetTouches.length){var c=a.Fb,d=a.Eb,e=a.gb.getBoundingClientRect(),f=b.targetTouches[0],g=f.clientX-c/e.width*e.left,h=f.clientY-d/e.height*e.top,f=b.targetTouches[1],c=f.clientX-c/e.width*e.left,f=f.clientY-d/e.height*e.top,d=c-g,e=f-h,d=Math.sqrt(d*d+e*e)/a.gD,f=new w((Math.min(c,g)+Math.max(c,g))/2,(Math.min(f,h)+Math.max(f,h))/2),g=a.km*d,h=a.Se;return g!==a.scale&&h.canResetZoom(g)&&(c=a.$f,a.$f=f,h.resetZoom(g),a.$f=c),b.preventDefault(),b.cancelBubble=!0,!1}return b.cancelBubble=!1,!0}g=a.Ed,a.Ed=a.ec,a.ec=g,f=h=null,0<b.changedTouches.length?f=b.changedTouches[0]:0<b.targetTouches.length&&(f=b.targetTouches[0]),g.h=a,f?((h=document.elementFromPoint(f.clientX,f.clientY))&&h.U?(d=f,c=h.U):(d=b.changedTouches[0],c=a),ui(c,d,g)):null!==a.Ed?(g.ea=a.Ed.ea,g.Ke=a.Ed.Ke,h=a.Ed.nh):null!==a.Dk&&(g.ea=a.Dk.ea,g.Ke=a.Dk.Ke,h=a.Dk.nh),g.$c=0,g.button=0,g.ak=!1,g.lj=!1,g.Ae=1,g.Yj=0,g.Ee=!1,g.bubbles=!1,g.event=b,g.timestamp=Date.now(),g.nh=null===h?b.target.U:h.U?h.U:null,g.ce=null,a.Ua.isBeyondDragSize()&&ii(a),a.dB(f?f:b,null,g.nh)||(a.doMouseMove(),ti(a,g,b))}},a.DG=function(b){if(a.isEnabled){if(ii(a),a.wz)return b.preventDefault(),!1;var c=a.Ed;if(a.Ed=a.ec,a.ec=c,1<b.touches.length)a.vi&&(a.Tn=!1);else{var d=null,e=null;if(0<b.changedTouches.length?e=b.changedTouches[0]:0<b.targetTouches.length&&(e=b.targetTouches[0]),c.h=a,c.Ae=1,e){var f,g,d=document.elementFromPoint(e.clientX,e.clientY);d&&d.U?(g=e,f=d.U):(g=b.changedTouches[0],f=a),ui(f,g,c),f=e.screenX,g=e.screenY;var h=a.AC;b.timeStamp-a.cm<a.xD&&!(25<Math.abs(h.x-f)||25<Math.abs(h.y-g))?a.bm++:a.bm=1,c.Ae=a.bm,a.cm=b.timeStamp,a.AC.p(f,g)}else d=c.nh;c.$c=0,c.button=0,c.ak=!1,c.lj=!0,c.Yj=0,c.Ee=!1,c.bubbles=!1,c.event=b,c.timestamp=Date.now(),c.nh=null===d?b.target.U:d.U?d.U:null,c.ce=null,a.rG(e?e:b,null,new w,c.nh)||(a.doMouseUp(),ti(a,c,b))}}},c.tabIndex=0,wi(a),di(a)}else a.Nb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element."}function gi(a){if(null!==a.gb){var b=a.Nb;if(0!==b.clientWidth&&0!==b.clientHeight){var c=a.Vl?a.nf:0,d=a.Ul?a.nf:0,e=a.mg;a.mg=a.computePixelRatio(),a.mg!==e&&(fi(a,a.Fb,a.Eb),wi(a),a.te()),(b.clientWidth!==a.Fb+c||b.clientHeight!==a.Eb+d)&&(a.vj=!0,a.ve=!0,b=a.jc,null!==b&&b.st&&b.J(),a.Bd||a.te())}}}function wi(a,b,c){void 0===b&&(b=a.Sg),void 0===c&&(c=!0),c&&(b.du=""),b.sn="",
b.rn=""}function Yh(a){var b=new $d;b.name="Background",a.Js(b),b=new $d,b.name="",a.Js(b),b=new $d,b.name="Foreground",a.Js(b),b=new $d,b.name="Adornment",b.rc=!0,a.Js(b),b=new $d,b.name="Tool",b.rc=!0,b.pA=!0,a.Js(b),b=new $d,b.name="Grid",b.Pe=!1,b.Bf=!1,b.rc=!0,a.DH(b,a.ct("Background"))}function xi(a){a.gd=new y(yi),a.gd.name="GRID";var b=new V;b.Ab="LineH",b.stroke="lightgray",b.fb=.5,b.interval=1,a.gd.add(b),b=new V,b.Ab="LineH",b.stroke="gray",b.fb=.5,b.interval=5,a.gd.add(b),b=new V,b.Ab="LineH",b.stroke="gray",b.fb=1,b.interval=10,a.gd.add(b),b=new V,b.Ab="LineV",b.stroke="lightgray",b.fb=.5,b.interval=1,a.gd.add(b),b=new V,b.Ab="LineV",b.stroke="gray",b.fb=.5,b.interval=5,a.gd.add(b),b=new V,b.Ab="LineV",b.stroke="gray",b.fb=1,b.interval=10,a.gd.add(b),b=new C,b.add(a.gd),b.af="Grid",b.Rw=!1,b.oA=!1,b.Bf=!1,b.ax="GRID",a.add(b),a.zb.remove(b),a.gd.visible=!1}function Ci(a){if(a.eA.N()){var b=a.eA.copy();return b.bw(a.padding),b}for(var c=!0,d=a.Rb.n,e=d.length,f=0;e>f;f++){var g=d[f];if(g.visible&&(!g.rc||g.pA))for(var g=g.zb.n,h=g.length,i=0;h>i;i++){var j=g[i];j.Rw&&j.La()&&(j=j.oa,j.N()&&(c?(c=!1,b=j.copy()):b.ii(j)))}}return c&&(b=new x(0,0,0,0)),b.bw(a.padding),b}function Di(a,b){if(!a.Ub.yg&&(void 0===b&&(b=!1),(b||a.lf)&&!a.Yb&&a.Gd.N()&&null!==a.gb)){a.Yb=!0;var c=a.Hl;b&&a.Hk!==Xe&&(c=a.Hk);var d=c!==Xe?Ei(a,c):a.scale,c=a.xb.copy(),e=a.Fb/d,f=a.Eb/d,g=null,h=a.Ub;h.sd&&(g=a.Ra.copy()),a.position.Ma();var i=a.An;b&&a.Xn.xd()&&(i=a.Xn),Fi(a,a.Ra,a.Gd,e,f,i),a.position.freeze(),null!==g&&Oh(h,g,a.Ra),a.scale=d,a.Yb=!1,d=a.xb,d.tf(c)||a.Et(c,d)}}function Ei(a,b){if(null!==a.gb){a.wi&&Gi(a,a.qf());var c=a.Se.Ys,d=a.Gd;if(!d.N())return c;var e=d.width,d=d.height,f=a.Fb,g=a.Eb,h=f/e,i=g/d;return b===Hi?(e=Math.min(i,h),e>c&&(e=c),e<a.Cg&&(e=a.Cg),e>a.Bg&&(e=a.Bg),e):b===Ii?(e=i>h?(g-a.nf)/d:(f-a.nf)/e,e>c&&(e=c),e<a.Cg&&(e=a.Cg),e>a.Bg&&(e=a.Bg),e):a.scale}}function Fi(a,b,c,d,e,f){var g;g=b.x;var h=b.y;f.xd()&&(d>c.width&&(g=c.x+(f.x*c.width+f.offsetX)-(f.x*d-f.offsetX)),e>c.height&&(h=c.y+(f.y*c.height+f.offsetY)-(f.y*e-f.offsetY))),d<c.width?(g=Math.min(g+d/2,c.right-d/2),g=Math.max(g,c.left+d/2),g-=d/2):g>c.left?g=c.left:g<c.right-d&&(g=c.right-d),e<c.height?(d=Math.min(h+e/2,c.bottom-e/2),d=Math.max(d,c.top+e/2),h=d-e/2):h>c.top?h=c.top:h<c.bottom-e&&(h=c.bottom-e),b.x=isFinite(g)?g:-a.padding.left,b.y=isFinite(h)?h:-a.padding.top}function Jf(a,b,c,d){void 0===c&&(c=null),void 0===d&&(d=null);var e=a.Rb.Xm;for(Bi(a);e.next();)if(a=e.value,a.visible&&!a.rc&&(a=a.pe(b,c,d),null!==a))return a;return null}function ii(a){-1!==a.Pv&&(clearTimeout(a.Pv),a.Pv=-1)}function vi(a,b){var c=b.copy();a.Pv=setTimeout(function(){c.button=2,a.R=c,a.wz=!0,a.doMouseUp()},850)}function hi(a,b,c,d,e){d.h=b,e?ui(a,c,d):(d.Ke=b.ec.Ke,d.ea=b.ec.ea),a=0,c.ctrlKey&&(a+=1),c.altKey&&(a+=2),c.shiftKey&&(a+=4),c.metaKey&&(a+=8),d.$c=a,d.button=c.button,t.Vm&&0===c.button&&c.ctrlKey&&(d.button=2),d.ak=!1,d.lj=!1,d.Ae=1,d.Yj=0,d.Ee=!1,d.bubbles=!1,d.event=c,d.timestamp=Date.now(),d.nh=c.target.U?c.target.U:null,d.ce=null}function ti(a,b,c){return b.bubbles?(e&&e.QE&&t.trace("NOT handled "+c.type+" "+b.toString()),!0):(e&&e.QE&&t.trace("handled "+c.type+" "+a.Ua.name+" "+b.toString()),void 0!==c.stopPropagation&&c.stopPropagation(),(void 0===c.touches||2>c.touches.length)&&c.preventDefault(),c.cancelBubble=!0,!1)}function ui(a,b,c){var d=a.gb,e=a.Fb,f=a.Eb,g=0,h=0;null!==d&&(d=d.getBoundingClientRect(),g=b.clientX-e/d.width*d.left,h=b.clientY-f/d.height*d.top),c.Ke.p(g,h),null!==a.md?(b=t.mc(g,h),a.md.ai(b),c.ea.assign(b),t.B(b)):c.ea.p(g,h)}function Ji(a){for(a.Bd||Bi(a),a.wi&&Gi(a,a.qf()),Di(a),a=a.lm.k;a.next();)Ji(a.value)}function Zf(a){if(!a.Bd&&(a.Nf=!1,null!==a.Nb)){a.Bd=!0;var b=a.li,c=!1,d=!1;b.yg?(d=!0,c=a.Wa,a.Wa=!0):b.sd||gi(a),a.Yb||b.yg||!a.vj||Ai(a)||Ai(a),null!==a.gd&&(a.gd.visible&&!a.Ku&&(Li(a),a.Ku=!0),!a.gd.visible&&a.Ku&&(a.Ku=!1)),Bi(a),0!==a.Rl.count&&(Mi(a),Bi(a));var e=!1;if((!a.lf||a.mu)&&(a.lf?Ni(a,!a.Du):(a.uc("Initial Layout"),!1===b.isEnabled&&b.Al(),Ni(a,!1)),e=!0),a.Du=!1,Bi(a),a.yo||b.yg||Ji(a),e){if(!a.lf){var f=a.Rb.n;a.Df(f,f.length,a),Oi(a),Li(a)}a.Ba("LayoutCompleted")}Bi(a),a.Yb||b.yg||!a.vj||Ai(a)||(Ai(a),Bi(a)),e&&!a.lf&&(a.lf=!0,a.Ce("Initial Layout"),a.Wa||a.la.clear(),setTimeout(function(){a.gh=!1},1)),a.Ue(),d&&(a.Wa=c),a.Bd=!1}}function Oi(a){if(a.Hk!==Xe)a.scale=Ei(a,a.Hk);else if(a.Hl!==Xe)a.scale=Ei(a,a.Hl);else{var b=a.XE;isFinite(b)&&b>0&&(a.scale=b)}if(a.wi&&Gi(a,a.qf()),b=a.WE,b.N())a.position=b;else{b=t.K(),b.Qt(a.Gd,a.VE);var c=a.xb,c=t.ik(0,0,c.width,c.height),d=t.K();d.Qt(c,a.YE),a.position=new w(b.x-d.x,b.y-d.y),t.hc(c),t.B(d),t.B(b),Di(a,!0)}a.Ba("InitialLayoutCompleted")}function Bi(a){if((a.Bd||!a.Ub.yg)&&0!==a.fg.count)for(var b=0;23>b;b++){var c=a.fg.k;if(null===c||0===a.fg.count)break;a.fg=new ma(Q);var d=a,e=a.fg;for(c.reset();c.next();){var f=c.value;!f.Ld()||f instanceof S||(f.ol()?(ih(f,1/0,1/0),f.Lc()):e.add(f))}for(c.reset();c.next();)f=c.value,f instanceof S&&Pi(d,f);for(c.reset();c.next();)d=c.value,d instanceof T&&(d.ol()?(ih(d,1/0,1/0),d.Lc(),d.bx()):e.add(d));for(c.reset();c.next();)d=c.value,d instanceof Je&&(d.ol()?(ih(d,1/0,1/0),d.Lc()):e.add(d))}}function Pi(a,b){for(var c=b.Rc,d=t.Db();c.next();){var e=c.value;e.La()&&(e instanceof S?(Qi(e)||Ri(e)||Si(e))&&Pi(a,e):e instanceof T?d.push(e):(ih(e,1/0,1/0),e.Lc()))}for(c=d.length,e=0;c>e;e++){var f=d[e];ih(f,1/0,1/0),f.Lc()}t.ya(d),ih(b,1/0,1/0),b.Lc()}function Vi(a,b,c,d,f){null===a.Nb&&t.m("No div specified");var g=a.gb;null===g&&t.m("No canvas specified");var h=a.Sg;if(a.ve){var i=a.mg;t.Um?(g.width=g.width,wi(a,h)):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.Fb*i,a.Eb*i)),h.UE=!1,h.drawImage(a.Ky,d>0?0:Math.round(-d),f>0?0:Math.round(-f)),f=a.Ra;var g=a.xc,j=Math.round(f.x*g)/g,k=Math.round(f.y*g)/g;for(d=a.md,d.reset(),1!==g&&d.scale(g),0===f.x&&0===f.y||d.translate(-j,-k),h.save(),h.beginPath(),f=c.length,g=0;f>g;g++)j=c[g],0!==j[2]&&0!==j[3]&&h.rect(Math.floor(j[0]),Math.floor(j[1]),Math.ceil(j[2]),Math.ceil(j[3]));for(h.clip(),h.setTransform(1,0,0,1,0,0),h.scale(i,i),h.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e&&e.Rz&&e.AI(a,h),c=a.Rb.n,f=c.length,a.Df(c,f,a),Ui(a,h),g=0;f>g;g++)Sh(c[g],h,a,b);h.restore(),wi(a),a.Gk?a.Gk.Gl(a)&&a.hy():a.Un=function(){},a.Ik=!1,a.ve=!1,a.FJ()}}function Wi(a,b,c,d,e,f,g,h,i,j){null===a.Nb&&t.m("No div specified"),null===a.gb&&t.m("No canvas specified"),wi(a),zi(a);var k=void 0;f&&d&&e&&(k=new x(f.x,f.y,d.width/e,d.height/e));var l=k.copy();l.bw(c),Li(a,l),Bi(a);var l=a.Rb.n,m=l.length;a.Df(l,m,a,k);var n=a.mg;if(b.setTransform(1,0,0,1,0,0),b.scale(n,n),b.clearRect(0,0,d.width,d.height),h&&(b.fillStyle=h,b.fillRect(0,0,d.width,d.height)),d=t.oh(),d.reset(),d.translate(c.left,c.top),d.scale(e),0===f.x&&0===f.y||d.translate(-f.x,-f.y),b.setTransform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),t.We(d),Ui(a,b),g){var o=new ma;for(c=g.k,c.reset();c.next();)e=c.value.S,!1===j&&"Grid"===e.layer.name||null===e||o.add(e);c=function(c){var d=i;if(c.visible&&(void 0===d&&(d=!0),d||!c.rc)){b.globalAlpha=c.Lf,d=c.zb,c=c.wv,c.length=0;for(var e=a.scale,f=d.length,g=0;f>g;g++){var h=d.n[g];if(Ph(h)&&o.contains(h)){if(h instanceof T&&(h.ic&&c.push(h),!1===h.rg))continue;var j=h.oa;1<j.width*e||1<j.height*e?h.Ue(b,a):Rh(h,b)}}b.globalAlpha=1}}}else if(!i&&j){var p=a.lp.S,q=p.layer;c=function(c){c===q?p.Ue(b,a):c.Ue(b,a,k,i,j)}}else c=function(c){c.Ue(b,a,k,i,j)};for(e=0;m>e;e++)c(l[e]);a.Gk?a.Gk.Gl(a)&&a.hy():a.Un=function(){},wi(a),zi(a),a.Df(l,m,a),Li(a)}function Ui(a,b){var c=a.Sk;if(null!==c){if(void 0!==c.imageSmoothingEnabled){var d=!!c.imageSmoothingEnabled;b.UE=d,b.IK=d}c=c.defaultFont,void 0!==c&&null!==c&&(b.font=c,b.du=c)}}function Mi(a){if(0===a.la.Je){for(var b=a.Rl.k;b.next();){var c=b.key,d=b.value;c.Ye(),Ag(c,d)}a.Rl.clear()}}function Xi(a,b,c,d,e){b=Math.floor(b),c=Math.floor(c),d=Math.ceil(d),e=Math.ceil(e);for(var f=a.tj,g=f.length,h=0;g>h;h++){var i=f[h];if(b>=i[0]&&c>=i[1]&&b+d<=i[0]+i[2]&&c+e<=i[1]+i[3])return!1;b<=i[0]&&c<=i[1]&&b+d>=i[0]+i[2]&&c+e>=i[1]+i[3]?(f[h][2]=0,f[h][3]=0):b>=i[0]&&b<i[0]+i[2]&&c>=i[1]&&c+e<=i[1]+i[3]?(d=b+d-(i[0]+i[2]),b=i[0]+i[2],h=-1):b+d>i[0]&&b+d<=i[0]+i[2]&&c>=i[1]&&c+e<=i[1]+i[3]?(d=i[0]-b,h=-1):b>=i[0]&&b+d<=i[0]+i[2]&&c>=i[1]&&c<i[1]+i[3]?(e=c+e-(i[1]+i[3]),c=i[1]+i[3],h=-1):b>=i[0]&&b+d<=i[0]+i[2]&&c+e>i[1]&&c+e<=i[1]+i[3]?(e=i[1]-c,h=-1):f[h][0]>=b&&f[h][0]<b+d&&f[h][1]>=c&&f[h][1]+f[h][3]<=c+e?(f[h][2]-=b+d-f[h][0],f[h][0]=b+d,h=-1):f[h][0]+f[h][2]>b&&f[h][0]+f[h][2]<=b+d&&f[h][1]>=c&&f[h][1]+f[h][3]<=c+e?(f[h][2]=b-f[h][0],h=-1):f[h][0]>=b&&f[h][0]+f[h][2]<=b+d&&f[h][1]>=c&&f[h][1]<c+e?(f[h][3]-=c+e-f[h][1],f[h][1]=c+e,h=-1):f[h][0]>=b&&f[h][0]+f[h][2]<=b+d&&f[h][1]+f[h][3]>c&&f[h][1]+f[h][3]<=c+e&&(f[h][3]=c-f[h][1],h=-1)}for(h=0;g>h;h++)if(i=f[h],d>0&&e>0&&0<i[2]&&0<i[3]&&(Math.max(b+d,i[0]+i[2])-Math.min(b,i[0]))*(Math.max(c+e,i[1]+i[3])-Math.min(c,i[1]))<d*e+i[2]*i[3]+50){var g=Math.min(i[0],b),j=Math.min(i[1],c);return b=Math.max(b+d,i[0]+i[2])-Math.min(i[0],b),c=Math.max(c+e,i[1]+i[3])-Math.min(i[1],c),f[h][2]=0,f[h][3]=0,Xi(a,g,j,b,c)}return f.push([b,c,d,e]),!0}function Yi(a,b,c){if(!0!==a.ve){if(a.ve=!0,a instanceof Zi)$i(a);else if(!0===a.Yv&&c.width===b.width&&c.height===b.height){var d=a.scale,e=t.Gf(),f=Math.max(b.x,c.x),g=Math.max(b.y,c.y),h=Math.min(b.x+b.width,c.x+c.width),i=Math.min(b.y+b.height,c.y+c.height);if(e.x=f,e.y=g,e.width=Math.max(0,h-f)*d,e.height=Math.max(0,i-g)*d,0<e.width&&0<e.height){if(!a.Bd&&(a.Nf=!1,null!==a.Nb)){a.Bd=!0,Bi(a),0!==a.Rl.count&&(Mi(a),Bi(a)),a.Gd.N()||Gi(a,a.qf());var j=a.gb;if(null!==j){h=a.mg,f=a.Fb*h,g=a.Eb*h,i=a.scale*h,d=Math.round(Math.round(c.x*i)-Math.round(b.x*i)),b=Math.round(Math.round(c.y*i)-Math.round(b.y*i)),c=a.Ky;var k=a.dC;c.width!==f&&(c.width=f),c.height!==g&&(c.height=g),k.clearRect(0,0,f,g),c=190*a.mg;var i=70*a.mg,l=Math.max(d,0),m=Math.max(b,0),n=f-l,o=g-m;k.UE=!1,k.drawImage(j,l,m,n,o,0,0,n,o),a.Gk.Gl(a)&&k.clearRect(0,0,c,i);var j=t.Db(),k=t.Db(),o=Math.abs(d),n=Math.abs(b),p=0===l?0:f-o,l=t.mc(p,0),o=t.mc(o+p,g);k.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]);var q=a.md;q.reset(),q.scale(h,h),1!==a.xc&&q.scale(a.xc),h=a.Ra,(0!==h.x||0!==h.y)&&isFinite(h.x)&&isFinite(h.y)&&q.translate(-h.x,-h.y),Qa(l,q),Qa(o,q),j.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),p=0===m?0:g-n,l.p(0,p),o.p(f,n+p),k.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),Qa(l,q),Qa(o,q),j.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),a.Gk.Gl(a)&&(f=d>0?0:-d,g=b>0?0:-b,l.p(f,g),o.p(c+f,i+g),k.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)]),Qa(l,q),Qa(o,q),j.push([Math.min(l.x,o.x),Math.min(l.y,o.y),Math.abs(l.x-o.x),Math.abs(l.y-o.y)])),t.B(l),t.B(o),!a.Yb&&a.vj&&(Ai(a)||Ai(a)),Vi(a,j,k,d,b),t.ya(j),t.ya(k),a.Bd=!1}}}else a.Uf();t.hc(e)}else a.Uf();for(a=a.lm.k;a.next();)Yi(a.value)}}function Ki(a){!1===a.vj&&(a.vj=!0)}function zi(a){!1===a.Ik&&(a.Ik=!0)}function fi(a,b,c){var d=a.gb,e=a.mg,f=b*e,e=c*e;(d.width!==f||d.height!==e)&&(d.width=f,d.height=e,d.style.width=b+"px",d.style.height=c+"px",a.ve=!0)}function Ai(a){if(null!==a.gb&&!a.Ub.sd){var b=a.Nb,c=a.Fb,d=a.Eb,e=a.AD.copy(),f=!1,g=a.Vl?a.nf:0,h=a.Ul?a.nf:0,i=b.clientWidth||c+g,b=b.clientHeight||d+h;if((i!==c+g||b!==d+h)&&(a.Vl=!1,a.Ul=!1,a.Fb=i,a.Eb=b,fi(a,i,b),f=!0),a.vj=!1,!a.Dv){var j=a.xb,k=a.Gd,g=k.width,h=k.height,l=j.width,m=j.height,n=k.x,o=j.x,p=k.right,q=j.right,r=k.y,s=j.y,t=k.bottom,u=j.bottom,k=j="1px",v=a.scale;return i/v>g&&b/v>h||(a.RE&&a.of&&(g>l+1?(j=(g-l)*v+a.Fb+"px",a.Kj.scrollLeft=(a.position.x-n)*v):o>n+1?(j=(o-n)*v+a.Fb+"px",a.Kj.scrollLeft=a.Kj.scrollWidth-a.Kj.clientWidth):p>q+1&&(j=(p-q)*v+a.Fb+"px",a.Kj.scrollLeft=a.position.x*v)),a.SE&&a.pf&&(h>m+1?(k=(h-m)*v+a.Eb+"px",a.Lj.scrollTop=(a.position.y-r)*v):s>r+1?(k=(s-r)*v+a.Eb+"px",a.Lj.scrollTop=a.Lj.scrollHeight-a.Lj.clientHeight):t>u+1&&(k=(t-u)*v+a.Eb+"px",a.Lj.scrollTop=a.position.y*v))),i="1px"!==j,b="1px"!==k,i!==a.Ul&&(a.Eb="1px"===j?a.Eb+a.nf:Math.max(a.Eb-a.nf,1),f=!0),a.Ul=i,a.rz.style.width=j,b!==a.Vl&&(a.Fb="1px"===k?a.Fb+a.nf:Math.max(a.Fb-a.nf,1),f=!0),a.Vl=b,a.sz.style.height=k,f&&(fi(a,a.Fb,a.Eb),wi(a)),i=a.Fb,b=a.Eb,a.Lj.style.height=b+"px",a.Lj.style.width=i+(a.Vl?a.nf:0)+"px",a.Kj.style.width=i+"px",a.Kj.style.height=b+(a.Ul?a.nf:0)+"px",a.qz=!1,c!==i||d!==b?(j=a.xb,a.Et(e,j,f?!0:void 0),!1):!0}c===a.Fb&&d===a.Eb||a.Uf()}}function hj(a,b,c){if(t.l(b,$d,z,"addLayer:layer"),null!==b.h&&b.h!==a&&t.m("Cannot share a Layer with another Diagram: "+b+" of "+b.h),null===c?null!==b.h&&t.m("Cannot add an existing Layer to this Diagram again: "+b):(t.l(c,$d,z,"addLayer:existingLayer"),c.h!==a&&t.m("Existing Layer must be in this Diagram: "+c+" not in "+c.h),b===c&&t.m("Cannot move a Layer before or after itself: "+b)),b.h!==a){b=b.name,a=a.Rb,c=a.count;for(var d=0;c>d;d++)a.wa(d).name===b&&t.m("Cannot add Layer with the name '"+b+"'; a Layer with the same name is already present in this Diagram.")}}function Li(a,b){var c=a.gd;if(null!==c&&c.visible){for(var d=t.Cl(),e=1,f=1,g=c.xa.length,h=0;g>h;h++){var i=c.xa.n[h],j=i.interval;2>j||(kj(i.Ab)?f=f*j/F.GE(f,j):e=e*j/F.GE(e,j))}if(g=c.ht,d.p(f*g.width,e*g.height),b)h=b.width,i=b.height,f=b.x,g=b.y;else{for(e=t.Gf(),f=a.xb,e.p(f.x,f.y,f.width,f.height),g=a.lm.k;g.next();)f=g.value.xb,f.N()&&hb(e,f.x,f.y,f.width,f.height);if(h=e.width,i=e.height,f=e.x,g=e.y,!e.N())return}c.width=h+2*d.width,c.height=i+2*d.height,e=t.K(),F.dt(f,g,0,0,d.width,d.height,e),e.offset(-d.width,-d.height),t.ck(d),c.S.location=e,t.B(e)}}function Me(a){if(a=a.selection,0<a.count){for(var b=a.Ie(),c=b.length,d=0;c>d;d++)b[d].eb=!1;a.Ma(),a.clear(),a.freeze()}}function Ti(a,b){var c=a.md,d=b[0],e=b[1],f=d+b[2],g=e+b[3],h=c.m11,i=c.m12,j=c.m21,k=c.m22,l=c.dx,m=c.dy,n=d*h+e*j+l,o=d*i+e*k+m,c=f*h+e*j+l,e=f*i+e*k+m,p=d*h+g*j+l,d=d*i+g*k+m,h=f*h+g*j+l,f=f*i+g*k+m,g=n,i=o,n=Math.min(n,c),g=Math.max(g,c),i=Math.min(i,e),o=Math.max(o,e),n=Math.min(n,p),g=Math.max(g,p),i=Math.min(i,d),o=Math.max(o,d),n=Math.min(n,h),g=Math.max(g,h),i=Math.min(i,f),o=Math.max(o,f);return[n,i,g-n,o-i]}function lj(a){var b=a.gh;a.BD!==b&&(a.BD=b,a.Ba("Modified"))}function Xh(a,b){if(b.ba===a.ba){var c=b.td,d=b.propertyName;if(c===ud&&"S"===d[0])if("StartingFirstTransaction"===d){for(c=a.wb,d=c.ef.k;d.next();)d.value.yd(a);for(d=c.Dg.k;d.next();)d.value.yd(a);for(d=c.Eg.k;d.next();)d.value.yd(a);a.Bd||a.lf||(a.Du=!0,a.Qn&&(a.Nf=!0),a.li.ul())}else if("StartingUndo"===d||"StartingRedo"===d){var e=a.Ub;e.yg&&!a.Wa&&e.Al(),a.Ba("ChangingSelection")}else"StartedTransaction"===d&&(e=a.Ub,e.yg&&!a.Wa&&e.Al(),a.Xu&&e.ul());else if(a.Na){a.Na=!1;try{var f=b.Af;if(""!==f){if(c===vd){if("linkFromKey"===f){var g=b.object,h=a.Qf(g);if(null!==h){var i=b.newValue,j=a.Ve(i);h.aa=j}}else if("linkToKey"===f)g=b.object,h=a.Qf(g),null!==h&&(i=b.newValue,j=a.Ve(i),h.ca=j);else if("linkFromPortId"===f){if(g=b.object,h=a.Qf(g),null!==h){var k=b.newValue;"string"==typeof k&&(h.Rf=k)}}else if("linkToPortId"===f)g=b.object,h=a.Qf(g),null!==h&&(k=b.newValue,"string"==typeof k&&(h.Og=k));else if("nodeGroupKey"===f){var g=b.object,l=a.fh(g);if(null!==l){var m=b.newValue;if(void 0!==m){var n=a.Ve(m);l.hb=n instanceof S?n:null}else l.hb=null}}else if("linkLabelKeys"===f){if(g=b.object,h=a.Qf(g),null!==h){var o=b.oldValue,p=b.newValue;if(t.isArray(o))for(var q=t.ub(o),r=0;q>r;r++){var s=t.lb(o,r),j=a.Ve(s);null!==j&&(j.$d=null)}if(t.isArray(p))for(q=t.ub(p),r=0;q>r;r++)s=t.lb(p,r),j=a.Ve(s),null!==j&&(j.$d=h)}}else if("nodeParentKey"===f){var u=b.object,v=a.Ve(b.newValue),w=a.Ew(u);if(null!==w){var x=w.ft();null!==x?null===v?a.remove(x):a.pd?x.aa=v:x.ca=v:pj(a,v,w)}}else if("parentLinkCategory"===f){var u=b.object,w=a.Ew(u),y=b.newValue;null!==w&&"string"==typeof y&&(x=w.ft(),null!==x&&(x.Zc=y))}else if("nodeCategory"===f){var g=b.object,z=a.fh(g),y=b.newValue;null!==z&&"string"==typeof y&&(z.Zc=y)}else if("linkCategory"===f){var g=b.object,A=a.Qf(g),y=b.newValue;null!==A&&"string"==typeof y&&(A.Zc=y)}else if("nodeDataArray"===f){a.fa();var B=b.oldValue;mj(a,B);var C=b.newValue;nj(a,C)}else"linkDataArray"===f&&(a.fa(),B=b.oldValue,mj(a,B),C=b.newValue,oj(a,C));a.gh=!0}else if(c===wd)C=b.newValue,"nodeDataArray"===f&&t.qb(C)?qj(a,C):"linkDataArray"===f&&t.qb(C)?rj(a,C):"linkLabelKeys"===f&&oe(C)&&(h=a.Qf(b.object),j=a.Ve(C),null!==h&&null!==j&&(j.$d=h)),a.gh=!0;else if(c===xd)B=b.oldValue,"nodeDataArray"===f&&t.qb(B)?sj(a,B):"linkDataArray"===f&&t.qb(B)?sj(a,B):"linkLabelKeys"===f&&oe(B)&&(j=a.Ve(B),null!==j&&(j.$d=null)),a.gh=!0;else if(c===ud&&"SourceChanged"===f){var l=a.fh(b.object),D=b.propertyName;null!==l&&"string"==typeof D&&(l.Kb(D),a.ba instanceof Kd&&(h=a.Qf(b.object),null!==h&&h.Kb(D)))}}else if(c===vd){var E=b.propertyName,g=b.object;g===a.ba?("nodeKeyProperty"===E||"nodeCategoryProperty"===E||"linkFromKeyProperty"===E||"linkToKeyProperty"===E||"linkFromPortIdProperty"===E||"linkToPortIdProperty"===E||"linkLabelKeysProperty"===E||"nodeIsGroupProperty"===E||"nodeGroupKeyProperty"===E||"nodeParentKeyProperty"===E||"linkCategoryProperty"===E)&&(a.la.vb||a.hn()):Wh(a,g,E),a.gh=!0}else c===wd||c===xd?(tj(a,b),a.gh=!0):c===ud&&(("FinishedUndo"===d||"FinishedRedo"===d)&&(a.la.xi=!0,a.Ba("ChangedSelection"),Bi(a),a.la.xi=!1),a.Du=!0,a.Uf(),e=a.li,e.sd&&0===a.la.Je&&Eh(e),"CommittedTransaction"===d&&a.la.cz&&(a.Ug=Math.min(a.Ug,a.la.cj-1)),lj(a),a.jz||"CommittedTransaction"!==d||(a.jz=!0,setTimeout(function(){a.Ua.standardMouseOver(),a.jz=!1},10)))}finally{a.Na=!0}}}}function Wh(a,b,c){var d=a.fh(b);if(null!==d&&"string"==typeof c)d.Kb(c),a.ba instanceof Kd&&(b=a.Qf(b),null!==b&&b.Kb(c));else if("string"==typeof c){for(d=null,a=a.$l.k;a.next();){for(var e=a.value,f=0;f<e.length;f++){var g=e[f];null!==g.gg&&(g=g.gg.za(b),null!==g&&(null===d&&(d=t.Db()),d.push(g)))}if(null!==d)break}if(b=d,null!==b){for(d=0;d<b.length;d++)b[d].Kb(c);t.ya(b)}}}function tj(a,b){var c=b.td===wd,d=c?b.Wf:b.Yf,e=c?b.newValue:b.oldValue,f=a.$l.za(b.object);if(Array.isArray(f)&&"number"==typeof d)for(var g=0;g<f.length;g++){var h=f[g];h.type!==Tg&&h.type!==ci||d++,c?uj(h,e,d):(h.Xe(d),vj(h,d-1))}}function cj(a,b){var c=b.yi;if(t.isArray(c)){var d=a.$l.za(c);if(null===d)a.$l.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}function fj(a,b){var c=b.yi;if(t.isArray(c)){var d=a.$l.za(c);if(null!==d)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1),0===d.length&&a.$l.remove(c);break}}}function nj(a,b){if(null!==b){for(var c=a.ba,d=t.ub(b),e=0;d>e;e++){var f=t.lb(b,e);c.ne(f)?qj(a,f,!1):c instanceof M&&rj(a,f)}if(c instanceof M||c instanceof Kd){for(e=0;d>e;e++)f=t.lb(b,e),c.ne(f)&&yj(a,f);if(c instanceof M)for(c=a.links;c.next();)Lj(c.value)}Mj(a,!1)}}function qj(a,b,c){if(void 0!==b&&null!==b&&!a.la.vb&&!a.ri.contains(b)){void 0===c&&(c=!0);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);e instanceof C&&(Le(e),e=e.copy(),e instanceof C&&(e.rh=d,a.un&&(e.Kk="Tool"),a.add(e),e.data=b,c&&yj(a,b)))}}function yj(a,b){var c=a.ba;if(c instanceof M||c instanceof Kd){var d=c.Hb(b);if(void 0!==d){var e=pe(c,d),f=a.fh(b);if(null!==e&&null!==f){for(e=e.k;e.next();){var g=e.value;if(c instanceof M){if(c.ne(g)){if(f instanceof S&&c.Sm(g)===d){var h=a.fh(g);null!==h&&(h.hb=f)}}else if(h=a.Qf(g),null!==h&&f instanceof R&&(c.il(g)===d&&(h.aa=f),c.ml(g)===d&&(h.ca=f),g=c.kl(g),t.isArray(g)))for(var i=0;i<t.ub(g);i++)if(t.lb(g,i)===d){f.$d=h;break}}else c instanceof Kd&&c.ne(g)&&f instanceof R&&c.Tm(g)===d&&(h=a.Ew(g),pj(a,f,h))}re(c,d)}c instanceof M?(c=c.Sm(b),void 0!==c&&(c=a.Ve(c),c instanceof S&&(f.hb=c))):c instanceof Kd&&(c=c.Tm(b),void 0!==c&&f instanceof R&&(c=a.Ve(c),pj(a,c,f)))}}}function pj(a,b,c){if(null!==b&&null!==c){var d=a.wb.zA,e=b,f=c;if(a.pd)for(b=f.qe;b.next();){var g=b.value;if(g.ca===f)return}else for(e=c,f=b,b=e.qe;b.next();)if(g=b.value,g.aa===e)return;null!==d&&mg(d,e,f,null,!0)||(d=a.getCategoryForLinkData(c.data),b=a.findTemplateForLinkData(c.data,d),b instanceof T&&(Le(b),b=b.copy(),b instanceof T&&(b.rh=d,b.aa=e,b.ca=f,a.add(b),b.data=c.data)))}}function oj(a,b){if(null!==b){for(var c=t.ub(b),d=0;c>d;d++){var e=t.lb(b,d);rj(a,e)}Mj(a,!1)}}function rj(a,b){if(void 0!==b&&null!==b&&!a.la.vb&&!a.Ak.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof T&&(Le(d),d=d.copy(),d instanceof T)){d.rh=c;var c=a.ba,e=c.HI(b);if(""!==e&&(d.Rf=e),e=c.il(b),void 0!==e&&(e=a.Ve(e),e instanceof R&&(d.aa=e)),e=c.KI(b),""!==e&&(d.Og=e),e=c.ml(b),void 0!==e&&(e=a.Ve(e),e instanceof R&&(d.ca=e)),c=c.kl(b),t.isArray(c))for(var e=t.ub(c),f=0;e>f;f++){var g=t.lb(c,f),g=a.Ve(g);null!==g&&(g.$d=d)}a.add(d),d.data=b}}}function mj(a,b){for(var c=t.ub(b),d=0;c>d;d++){var e=t.lb(b,d);sj(a,e)}}function sj(a,b){if(void 0!==b&&null!==b){var c=a.fh(b);if(c instanceof C){c.eb=!1,c.zg=!1;var d=c.layer;if(null!==d&&d.h===a){var e=a.ba;if(e instanceof M&&c instanceof R){var f=e.Hb(c.data);if(void 0!==f){for(var g=c.qe;g.next();){var h=g.value.data;qe(e,f,h)}if(c.bi&&(g=c.$d,null!==g&&(h=g.data,qe(e,f,h))),c instanceof S)for(g=c.Rc;g.next();)h=g.value.data,e.ne(h)&&qe(e,f,h)}}else if(e instanceof Kd&&c instanceof R){if(g=a.Qf(c.data),null!==g&&(g.eb=!1,g.zg=!1,h=g.layer,null!==h)){var i=h.Xe(-1,g,!1);i>=0&&a.Ic(xd,"parts",h,g,null,i,null),i=g.tp,null!==i&&i(g,h,null)}for(g=a.pd,h=c.qe;h.next();)i=h.value,i=(g?i.ca:i.aa).data,e.ne(i)&&qe(e,f,i)}e=d.Xe(-1,c,!1),e>=0&&a.Ic(xd,"parts",d,c,null,e,null),e=c.tp,null!==e&&e(c,d,null)}}}}function Gi(a,b){a.wi=!1;var c=a.Eu;c.M(b)||(b=b.Z(),a.Eu=b,a.tj=null,Di(a),a.Ba("DocumentBoundsChanged",null,c.copy()),Ki(a))}function Mj(a,b){for(var c=a.Uk.k;c.next();)Nj(a,c.value,b);null!==a.jc&&(b?a.jc.$e=!1:a.jc.J())}function Nj(a,b,c){if(null!==b){for(var d=b.qo.k;d.next();)Nj(a,d.value,c);null!==b.jc&&(c?b.jc.$e=!1:b.jc.J())}}function Ni(a,b){if(!a.Gy){var c=a.jc,d=a.Xu;a.Xu=!0;var e=a.Na;a.Na=!0;try{for(var f=a.Uk.k;f.next();)Oj(a,f.value,b);c.$e||b&&!c.wA||(c.doLayout(a),Bi(a),c.$e=!0)}finally{a.mu=!c.$e,a.Xu=d,a.Na=e}}}function Oj(a,b,c){if(null!==b){for(var d=b.qo.k;d.next();)Oj(a,d.value,c);d=b.jc,null===d||d.$e||c&&!d.wA||(b.LC=!b.location.N(),d.doLayout(b),b.J(Pj),d.$e=!0,Pi(a,b))}}function Vh(a){function b(a){var b=a.toLowerCase(),e=new B("function");c.add(a,e),c.add(b,e),d.add(a,a),d.add(b,a)}var c=new ia("string",B),d=new ia("string","string");b("AnimationStarting"),b("AnimationFinished"),b("BackgroundSingleClicked"),b("BackgroundDoubleClicked"),b("BackgroundContextClicked"),b("ClipboardChanged"),b("ClipboardPasted"),b("DocumentBoundsChanged"),b("ExternalObjectsDropped"),b("InitialLayoutCompleted"),b("LayoutCompleted"),b("LinkDrawn"),b("LinkRelinked"),b("LinkReshaped"),b("Modified"),b("ObjectSingleClicked"),b("ObjectDoubleClicked"),b("ObjectContextClicked"),b("PartCreated"),b("PartResized"),b("PartRotated"),b("SelectionMoved"),b("SelectionCopied"),b("SelectionDeleting"),b("SelectionDeleted"),b("SelectionGrouped"),b("SelectionUngrouped"),b("ChangingSelection"),b("ChangedSelection"),b("SubGraphCollapsed"),b("SubGraphExpanded"),b("TextEdited"),b("TreeCollapsed"),b("TreeExpanded"),b("ViewportBoundsChanged"),a.Iy=c,a.Hy=d}function ja(a,b){var c=a.Hy.za(b);return null!==c?c:a.Hy.za(b.toLowerCase())}function Rj(a,b){var c=a.Iy.za(b);return null!==c?c:(c=a.Iy.za(b.toLowerCase()),null!==c?c:(t.m("Unknown DiagramEvent name: "+b),null))}function Yf(a,b){var c=!1;if(a.xb.Vj(b)&&(c=!0),c=a.cA(b,function(a){return a.S},function(a){return a instanceof T},!0,function(a){return a instanceof T},c),0!==c.count)for(c=c.k;c.next();){var d=c.value;d.dj&&d.ac()}}function Sj(a,b){null===a.Sd&&(a.Sd=new Tj);var c=null!==b?b.hb:null;if(a.Sd.nt||a.Sd.group!==c){if(null===c){var d;d=a.wi?Ci(a):a.Gd.copy(),d.Sf(100,100),a.Sd.initialize(d),d=t.Gf();for(var e=a.jh;e.next();){var f=e.value,g=f.layer;null!==g&&g.visible&&!g.rc&&Uj(a,f,null,d)}}else for(c.oa.N()||c.sf(),d=c.oa.copy(),d.Sf(20,20),a.Sd.initialize(d),d=t.Gf(),e=c.Rc;e.next();)f=e.value,f instanceof R&&Uj(a,f,null,d);t.hc(d),a.Sd.group=c,a.Sd.nt=!1}else Vj(a.Sd);return a.Sd}function Uj(a,b,c,d){if(b!==c)if(b.La()&&b.canAvoid()){c=b.getAvoidableRect(d),d=a.Sd.Hm,b=a.Sd.Gm;for(var e=c.x+c.width,f=c.y+c.height,g=c.x;e>g;g+=d){for(var h=c.y;f>h;h+=b)Wj(a.Sd,g,h);Wj(a.Sd,g,f)}for(h=c.y;f>h;h+=b)Wj(a.Sd,e,h);Wj(a.Sd,e,f)}else if(b instanceof S)for(b=b.Rc;b.next();)e=b.value,e instanceof R&&Uj(a,e,c,d)}function Xj(a,b){null===a.Sd||a.Sd.nt||null!==b&&!b.canAvoid()||(a.Sd.nt=!0)}function Uf(a,b){a.nu.assign(b),Yj(a,a.nu).tf(a.position)?tf(a):Zj(a)}function Zj(a){null===a.Il&&(a.Il={},a.Il.id=setInterval(function(){if(null!==a.Il){tf(a);var b=a.R.event;if(null!==b){var c=Yj(a,a.nu);c.tf(a.position)||(a.position=c,a.R.ea=a.KG(a.nu),a.dB(b,null,b.target.U)||a.doMouseMove(),a.wi=!0,Gi(a,a.qf()),a.ve=!0,a.Uf(),Zj(a))}}},a.hH))}function tf(a){null!==a.Il&&(clearInterval(a.Il.id),a.Il=null)}function Yj(a,b){var c=a.position,d=a.OD;if(0>=d.top&&0>=d.left&&0>=d.right&&0>=d.bottom)return c;var e=a.xb,f=a.scale,e=t.ik(0,0,e.width*f,e.height*f),g=t.mc(0,0);if(b.x>=e.x&&b.x<e.x+d.left){var h=Math.max(a.Qp,1),h=0|h;g.x-=h,b.x<e.x+d.left/2&&(g.x-=h),b.x<e.x+d.left/4&&(g.x-=4*h)}else b.x<=e.x+e.width&&b.x>e.x+e.width-d.right&&(h=Math.max(a.Qp,1),h|=0,g.x+=h,b.x>e.x+e.width-d.right/2&&(g.x+=h),b.x>e.x+e.width-d.right/4&&(g.x+=4*h));return b.y>=e.y&&b.y<e.y+d.top?(h=Math.max(a.Rp,1),h|=0,g.y-=h,b.y<e.y+d.top/2&&(g.y-=h),b.y<e.y+d.top/4&&(g.y-=4*h)):b.y<=e.y+e.height&&b.y>e.y+e.height-d.bottom&&(h=Math.max(a.Rp,1),h|=0,g.y+=h,b.y>e.y+e.height-d.bottom/2&&(g.y+=h),b.y>e.y+e.height-d.bottom/4&&(g.y+=4*h)),g.tf(F.mj)||(c=new w(c.x+g.x/f,c.y+g.y/f)),t.hc(e),t.B(g),c}function ak(a,b){if(a.Ub.Al(),a.Uf(),null===a.gb)return null;"object"!=typeof b&&t.m("properties argument must be an Object.");var c=!1,d=b.size||null,e=b.scale||null;void 0!==b.scale&&isNaN(b.scale)&&(e="NaN");var f=b.maxSize;void 0===b.maxSize&&(c=!0,f="svg"===b.context?new fa(1/0,1/0):new fa(2e3,2e3));var g=b.position||null,h=b.parts||null,i=void 0===b.padding?1:b.padding,j=b.background||null,k=b.omitTemporary;void 0===k&&(k=!0);var l=b.document||document,m=b.elementFinished||null,n=b.showTemporary;void 0===n&&(n=!k),k=b.showGrid,void 0===k&&(k=n),null!==d&&isNaN(d.width)&&isNaN(d.height)&&(d=null),i&&"number"==typeof i&&(i=new ab(i)),i||(i=new ab(0)),i.left=Math.max(i.left,0),i.right=Math.max(i.right,0),i.top=Math.max(i.top,0),i.bottom=Math.max(i.bottom,0),a.Mn=!1,wi(a);var o=l.createElement("canvas"),p=o.getContext("2d"),q=o;if(!(d||e||h||g))return o.width=a.Fb+Math.ceil(i.left+i.right),o.height=a.Eb+Math.ceil(i.top+i.bottom),"svg"===b.context&&(p=q=new nc(o,l,m),p instanceof nc&&(a.Mn=!0)),Wi(a,p,i,new fa(o.width,o.height),a.xc,a.Ra,h,j,n,k),a.Mn=!0,q;var r,s=a.Se.Ys,u=new w(0,0);if(r=a.Gd.copy(),r.YJ(a.padding),n)for(var v=!0,v=a.Rb.n,y=v.length,z=0;y>z;z++){var A=v[z];if(A.visible&&A.rc)for(var A=A.zb.n,B=A.length,D=0;B>D;D++){var E=A[D];E.Rw&&E.La()&&(E=E.oa,E.N()&&r.ii(E))}}if(u.x=r.x,u.y=r.y,h){var F,v=!0,h=h.k;for(h.reset();h.next();)E=h.value,E instanceof C&&(A=E.layer,A&&!A.visible||null!==A&&!n&&A.rc||!E.La()||(E=E.oa,E.N()&&(v?(v=!1,F=E.copy()):F.ii(E))));v&&(F=new x(0,0,0,0)),r.width=F.width,r.height=F.height,u.x=F.x,u.y=F.y}return null!==g&&g.N()&&(u=g,e||(e=s)),F=g=0,i&&(g=i.left+i.right,F=i.top+i.bottom),v=y=0,d&&(y=d.width,v=d.height,isFinite(y)&&(y=Math.max(0,y-g)),isFinite(v)&&(v=Math.max(0,v-F))),d&&e?("NaN"===e&&(e=s),d.N()?(d=y,r=v):isNaN(v)?(d=y,r=r.height*e):(d=r.width*e,r=v)):d?d.N()?(e=Math.min(y/r.width,v/r.height),d=y,r=v):isNaN(v)?(e=y/r.width,d=y,r=r.height*e):(e=v/r.height,d=r.width*e,r=v):e?"NaN"===e&&f.N()?(e=Math.min((f.width-g)/r.width,(f.height-F)/r.height),e>s?(e=s,d=r.width,r=r.height):(d=f.width,r=f.height)):(d=r.width*e,r=r.height*e):(e=s,d=r.width,r=r.height),i?(d+=g,r+=F):i=new ab(0),f&&(s=f.width,f=f.height,"svg"!==b.context&&c&&!t.SG&&(d>s||r>f)&&(t.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(d)+"x"+Math.ceil(r)+" vs 2000x2000) Consider increasing the max size."),t.SG=!0),isNaN(s)&&(s=2e3),isNaN(f)&&(f=2e3),isFinite(s)&&(d=Math.min(d,s)),isFinite(f)&&(r=Math.min(r,f))),o.width=Math.ceil(d),o.height=Math.ceil(r),"svg"===b.context&&(p=q=new nc(o,l,m),p instanceof nc&&(a.Mn=!0)),Wi(a,p,i,new fa(Math.ceil(d),Math.ceil(r)),e,u,h,j,n,k),a.Mn=!0,q}function bk(a){1<arguments.length&&t.m("Palette constructor can only take one optional argument, the DIV HTML element or its id."),z.call(this,a),this.Ms=!0,this.Rj=!1,this.ab=!0,this.ow=Fb,this.jc=new ck}function Zi(a){1<arguments.length&&t.m("Overview constructor can only take one optional argument, the DIV HTML element or its id."),z.call(this,a),this.li.isEnabled=!1,this.Yb=!0,this.Gi=null,this.nH=this.Gu=!0,this.PJ("drawShadows",!1);var b=new C,c=new V;c.stroke="magenta",c.fb=2,c.fill="transparent",c.name="BOXSHAPE",b.qx="BOXSHAPE",b.ax="BOXSHAPE",b.cursor="move",b.add(c),this.Kl=b,this.yz=document.createElement("canvas"),this.vH=this.yz.getContext("2d"),b=new dk,b.yd(this),this.wb.ef.Jd(0,b);var d=this;this.IF=function(){ek(d)},this.HF=function(){null!==d.Gi&&(d.Oc(),d.fa())},this.ab=!0,this.Pe=!1,this.Fm=Hi,this.wb.cn=af,this.Yb=!1}function $i(a){a.Yb||a.Bd||!1!==a.Nf||(a.Nf=!0,requestAnimationFrame(function(){if(a.Nf&&!a.Bd&&(a.Nf=!1,null!==a.Nb)){if(a.Bd=!0,Bi(a),a.Gd.N()||Gi(a,a.qf()),null===a.Nb&&t.m("No div specified"),null===a.gb&&t.m("No canvas specified"),a.ve){var b=a.Gi;if(null!==b&&!b.Ub.yg&&!b.Ub.sd){var b=a.Sg,c=a.yz;b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,a.gb.width,a.gb.height),b.drawImage(c,0,0),c=a.md,c.reset(),1!==a.xc&&c.scale(a.scale),0===a.position.x&&0===a.position.y||c.translate(-a.Ra.x,-a.Ra.y),b.setTransform(c.m11,c.m12,c.m21,c.m22,c.dx,c.dy);for(var c=a.Rb.length,d=0;c>d;d++)a.Rb.n[d].Ue(b,a);a.Ik=!1,a.ve=!1}}a.Bd=!1}}))}function ek(a){var b=a.vg;if(null!==b){var c=a.Gi;if(null!==c){a.ve=!0;var c=c.xb,d=b.Pt,e=t.Cl();e.p(c.width,c.height),d.Ca=e,t.ck(e),a=2/a.scale,d instanceof V&&(d.fb=a),b.location=new w(c.x-a/2,c.y-a/2)}}}function dk(){ae.call(this),this.name="MoveBox"}function ea(a){1<arguments.length&&t.m("Brush constructor can take at most one optional argument, the Brush type."),t.Ac(this),this.nb=!1,void 0===a?(this.da=Nd,this.zn="black"):"string"==typeof a?(this.da=Nd,e&&t.To("Brush constructor",a),this.zn=a):(e&&t.Aa(a,ea,ea,"constructor:type"),this.da=a,this.zn="black");var b=this.da;b===Yd?(this.Ao=Fb,this.On=Mb):this.On=b===Zd?this.Ao=Hb:this.Ao=wb,this.Mv=0,this.Hu=NaN,this.Rg=this.yv=this.Qg=null,this.sy=this.ty=0}function Q(){t.Ac(this),this.ma=30723,this.Lf=1,this.Ii=null,this.Zb="",this.vc=this.Mb=null,this.Ra=new w(NaN,NaN).freeze(),this.jf=new fa(NaN,NaN).freeze(),this.Ej=F.gq,this.Dj=F.fH,this.md=new ga,this.kk=new ga,this.Mk=new ga,this.xc=1,this.wn=0,this.Oh=gk,this.sr=F.fq,this.Wc=new x(NaN,NaN,NaN,NaN).freeze(),this.cc=new x(NaN,NaN,NaN,NaN).freeze(),this.hd=new x(0,0,NaN,NaN).freeze(),this.ys=this.Nq=this.P=this.Nr=this.Pr=null,this.zs=this.Oq=1/0,this.mq=this.ue=xb,this.as=0,this.Jj=1,this.tq=0,this.rj=1,this.es=-(1/0),this.ds=0,this.fs=F.mj,this.gs=zg,this.Aq="",this.nm=this.oi=this.Ml=this.Kc=this.Q=null}function jk(a){a.Q={ni:null,ti:null,pi:null,Dr:null,Er:null,Ei:null,Di:null,Ci:null,Br:null,Cr:null,Bi:null,iq:null,jq:null,kq:null,hq:null,Oi:null,qi:null}}function lk(a,b,c,d,e,f,g){var h=.001,i=f.length;a.moveTo(b,c),d-=b,h=e-c,0===d&&(d=.001),e=h/d;for(var j=Math.sqrt(d*d+h*h),k=0,l=!0,m=0===g?!1:!0;j>=.1;){if(m){for(h=f[k++%i],h-=g;0>h;)h+=f[k++%i],l=!l;m=!1}else h=f[k++%i];h>j&&(h=j);var n=Math.sqrt(h*h/(1+e*e));0>d&&(n=-n),b+=n,c+=e*n,l?a.lineTo(b,c):a.moveTo(b,c),j-=h,l=!l}}function mk(a,b,c){var d=a.ep();if(null!==d)for(var e=a.Kc.k;e.next();){var f=e.value,g=f.Ut;if(null!==g){var h=d.oe(g);if(null===h)continue;f.nB(a,h,c,null)}else{if(h=d.data,null===h)continue;var i=b.h;null!==i&&i.Tt||f.nB(a,h,c,i)}null!==g&&(h=d,""!==g&&(h=d.oe(g)),
null!==h&&(g=f.nn,i=d,""!==g&&(i=d.oe(g)),null!==i&&f.PG(i,h,c)))}}function nk(a,b,c,d,e){var f=a.Wc,g=a.Mk;g.reset(),ok(a,g,b,c,d,e),a.Mk=g,f.x=b,f.y=c,f.width=d,f.height=e,g.qt()||g.JG(f)}function pk(a,b,c,d){return!1===a.Bf?!1:(d.multiply(a.transform),c?a.Tf(b,d):a.Km(b,d))}function ih(a,b,c,d,e){if(!1!==Qi(a)){var f=a.margin,g=f.right+f.left,f=f.top+f.bottom;b=Math.max(b-g,0),c=Math.max(c-f,0),e=e||0,d=Math.max((d||0)-g,0),e=Math.max(e-f,0),g=a.angle,(90===g||270===g)&&(g=b,b=c,c=g,g=d,d=e,e=g),g=a.Ca,f=0,a.fb&&(f=a.fb),b=isFinite(g.width)?g.width+f:b,c=isFinite(g.height)?g.height+f:c;var g=d||0,f=e||0,h=a instanceof y;switch(qk(a)){case Vg:f=g=0,h&&(c=b=1/0);break;case Cc:isFinite(b)&&b>d&&(g=b),isFinite(c)&&c>e&&(f=c);break;case ik:isFinite(b)&&b>d&&(g=b),f=0,h&&(c=1/0);break;case hk:isFinite(c)&&c>e&&(f=c),g=0,h&&(b=1/0)}var h=a.He,i=a.Vf;g>h.width&&i.width<h.width&&(g=h.width),f>h.height&&i.height<h.height&&(f=h.height),d=Math.max(g/a.scale,i.width),e=Math.max(f/a.scale,i.height),h.width<d&&(d=Math.min(i.width,d)),h.height<e&&(e=Math.min(i.height,e)),b=Math.min(h.width,b),c=Math.min(h.height,c),b=Math.max(d,b),c=Math.max(e,c),a.Wc.Ma(),a.ut(b,c,d,e),a.Wc.freeze(),a.Wc.N()||t.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.Wc.toString()),rk(a,!1)}}function uk(a,b,c,d,e){var f=a.oa;if(f.x=b,f.y=c,f.width=d,f.height=e,!a.Ca.N()){f=a.Wc,c=a.margin,b=c.right+c.left;var g=c.top+c.bottom;switch(c=f.width+b,f=f.height+g,d+=b,e+=g,b=qk(a),c===d&&f===e&&(b=Vg),b){case Vg:(c>d||f>e)&&(rk(a,!0),ih(a,c>d?d:c,f>e?e:f));break;case Cc:rk(a,!0),ih(a,d,e,0,0);break;case ik:rk(a,!0),ih(a,d,f,0,0);break;case hk:rk(a,!0),ih(a,c,e,0,0)}}}function tk(a,b,c){vk(a,!1);var d=a.S;if(null!==d){var e=d.h;if(null!==e)if(wk(d),a instanceof C){var f=!1,d=b.N();if(!1===e.wi){var g=e.Gd,h=e.padding,i=g.x+h.left,j=g.y+h.top,k=g.width-2*h.right,g=g.height-2*h.bottom;d&&b.x>i&&b.y>j&&b.right<k&&b.bottom<g&&c.x>i&&c.y>j&&c.right<k&&c.bottom<g&&(f=!0)}0!==(65536&a.W)!=!0&&b.M(c)||dj(a,f,e),e.pz&&null!==e.tj?(f=null,d&&(f=t.Gf(),Th(a,b,f)),e.fa(c.N()?Th(a,c):null,f),null!==f&&t.hc(f)):e.fa()}else xk(a,d),a.fa(),b=a.S,null!==b&&(b.Pt!==a&&b.WF!==a&&b.aG!==a||yk(b,!0))}}function xk(a,b){if(null!==a.Nd&&yk(b,!0),a instanceof y)for(var c=a.xa,d=c.length,e=0;d>e;e++)xk(c.n[e],b)}function Bk(a,b,c){var d=a.cc;0===d.width||0===d.height||isNaN(d.x)||isNaN(d.y)||(null!==a.vc&&(Dk(a,b,a.vc,!0,!0),a.vc instanceof ea&&a.vc.type===Zd?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Ek(b,a.vc,!0)):b.fillRect(d.x,d.y,d.width,d.height)),null!==a.Mb&&(Dk(a,b,a.Mb,!0),a.Mb instanceof ea&&a.Mb.type===Zd?(b.beginPath(),b.rect(d.x,d.y,d.width,d.height),Ek(b,a.Mb,!0)):b.fillRect(d.x,d.y,d.width,d.height)),a.fl(b,c))}function Ek(a,b,c){if(c)if(a instanceof CanvasRenderingContext2D&&b instanceof ea&&b.type===Zd){var d=b.ty;b=b.sy,b>d?(a.scale(d/b,1),a.translate((b-d)/2,0),c?a.fill():a.stroke(),a.translate(-(b-d)/2,0),a.scale(1/(d/b),1)):d>b?(a.scale(1,b/d),a.translate(0,(d-b)/2),c?a.fill():a.stroke(),a.translate(0,-(d-b)/2),a.scale(1,1/(b/d))):c?a.fill():a.stroke()}else c?a.fill():a.stroke();else a.stroke()}function Dk(a,b,c,d,e){if(null!==c){var f=1,g=1;if("string"==typeof c)d?b.rn!==c&&(b.fillStyle=c,b.rn=c):b.sn!==c&&(b.strokeStyle=c,b.sn=c);else if(c.type===Nd)c=c.color,d?b.rn!==c&&(b.fillStyle=c,b.rn=c):b.sn!==c&&(b.strokeStyle=c,b.sn=c);else{var h,g=a.Pa,f=g.width,g=g.height;if(e)var i=a.oa,f=i.width,g=i.height;var j=b instanceof CanvasRenderingContext2D;if(j&&(c.Rg&&c.type===fk||c.ty===f&&c.sy===g))h=c.Rg;else{var k,l,m=l=0;if(e&&(i=a.oa,f=i.width,g=i.height,l=i.x,m=i.y),c.start instanceof w?(a=c.start.x,e=c.start.y):c.start instanceof H?(a=c.start.x*f+c.start.offsetX,e=c.start.y*g+c.start.offsetY):(a=Hb.x*f+c.start.offsetX,e=Hb.y*g+c.start.offsetY),c.end instanceof w?(i=c.end.x,k=c.end.y):c.end instanceof H?(i=c.end.x*f+c.end.offsetX,k=c.end.y*g+c.end.offsetY):c.type===Yd?(i=Mb.x*f+c.end.offsetX,k=Mb.y*g+c.end.offsetY):(i=Hb.x*f+c.end.offsetX,k=Hb.y*g+c.end.offsetY),a+=l,i+=l,e+=m,k+=m,c.type===Yd?h=b.createLinearGradient(a,e,i,k):c.type===Zd?(l=isNaN(c.ap)?Math.max(f,g)/2:c.ap,isNaN(c.Vp)?(h=0,l=Math.max(f,g)/2):h=c.Vp,h=b.createRadialGradient(a,e,h,i,k,l)):c.type===fk?h=b.createPattern(c.pattern,"repeat"):t.bc(c.type,"Brush type"),c.type!==fk&&(l=c.Vo))for(l=l.k;l.next();)h.addColorStop(l.key,l.value);j&&(c.Rg=h,c.ty=f,c.sy=g)}d?b.rn!==h&&(b.fillStyle=h,b.rn=h):b.sn!==h&&(b.strokeStyle=h,b.sn=h)}}}function Gk(a){if(0!==(2048&a.ma)==!0){var b=a.md;if(b.reset(),!a.cc.N()||!a.Wc.N())return void Hk(a,!1);b.translate(a.cc.x,a.cc.y),b.translate(-a.Ga.x,-a.Ga.y);var c=a.Pa;ok(a,b,c.x,c.y,c.width,c.height),Hk(a,!1),Ik(a,!0)}0!==(4096&a.ma)==!0&&(b=a.ja,null===b?(a.kk.set(a.md),Ik(a,!1)):null!==b.me&&(c=a.kk,c.reset(),b.Hf()?c.multiply(b.kk):null!==b.ja&&c.multiply(b.ja.kk),c.multiply(a.md),Ik(a,!1)))}function ok(a,b,c,d,e,f){if(1!==a.scale&&b.scale(a.scale),0!==a.angle){var g=Hb;a.bf&&a.bf.xd()&&(g=a.bf);var h=t.K();if(a instanceof C&&a.kc!==a)for(c=a.kc,d=c.Pa,h.Rt(d.x,d.y,d.width,d.height,g),c.Mk.Sa(h),h.offset(-c.Ga.x,-c.Ga.y),g=c.ja;null!==g&&g!==a;)g.Mk.Sa(h),h.offset(-g.Ga.x,-g.Ga.y),g=g.ja;else h.Rt(c,d,e,f,g);b.rotate(a.angle,h.x,h.y),t.B(h)}}function Lk(a){if(!1===Qi(a)&&(rk(a,!0),vk(a,!0),a instanceof y)){a=a.xa.n;for(var b=a.length,c=0;b>c;c++)Lk(a[c])}}function Jk(a){if(!1===Ri(a)){if(null!==a.ja)a.ja.ha();else{var b=a.h;null!==b&&(a.La()&&b.fg.add(a),a instanceof R&&a.wf(),b.te())}vk(a,!0)}}function sk(a){if(0!==(2048&a.ma)==!1&&(Hk(a,!0),Ik(a,!0),a instanceof y)){a=a.xa.n;for(var b=a.length,c=0;b>c;c++)Mk(a[c])}}function Mk(a){if(Ik(a,!0),a instanceof y){a=a.xa.n;for(var b=a.length,c=0;b>c;c++)Mk(a[c])}}function qk(a){var b=a.fi,c=a.ja;return c&&c.da===Nk?Ok(a,c.wd(a.lc),c.vd(a.column)):c&&c.da===ci&&c.Dw()===a?Cc:b===gk?c?(c.da===Tg&&null===c.Eo&&(b=c.xa,Kk(c,b,b.length)),c.Eo===a?Cc:(a=c.Zz,a===gk?Vg:a)):Vg:b}function Ok(a,b,c){var d=a.fi;if(d!==gk)return d;var e=d=void 0;switch(b.fi){case hk:e=!0;break;case Cc:e=!0}switch(c.fi){case ik:d=!0;break;case Cc:d=!0}return a=a.ja.Zz,d=void 0!==d||a!==ik&&a!==Cc?!1:!0,e=void 0!==e||a!==hk&&a!==Cc?!1:!0,!0===d&&!0===e?Cc:!0===d?ik:!0===e?hk:Vg}function Fk(a,b){a.ma=b?512|a.ma:-513&a.ma}function Qk(a,b){a.ma=b?1024|a.ma:-1025&a.ma}function Hk(a,b){a.ma=b?2048|a.ma:-2049&a.ma}function Ik(a,b){a.ma=b?4096|a.ma:-4097&a.ma}function Qi(a){return 0!==(8192&a.ma)}function rk(a,b){a.ma=b?8192|a.ma:-8193&a.ma}function Ri(a){return 0!==(16384&a.ma)}function vk(a,b){a.ma=b?16384|a.ma:-16385&a.ma}function Uk(a){var b={value:null};return Vk(a,b),b.value}function Vk(a,b){var c=a.ja;return null===c||!Vk(c,b)&&a.visible?(b.value=a,!1):!0}function Pk(a){var b=a.S;b instanceof R&&(a=a.h)&&!a.la.vb&&b.wf()}function $k(a,b){if("string"==typeof b){var c=a;if(c instanceof na)c.text=b;else if(c instanceof V)c.Ab=b;else if(c instanceof al)c.source=b;else if(c instanceof y){var d=t.Pm(y,b);null!==d?c.type=d:t.m("Unknown Panel type as an argument to GraphObject.make: "+b)}else c instanceof ea?(d=t.Pm(ea,b),null!==d?c.type=d:t.m("Unknown Brush type as an argument to GraphObject.make: "+b)):c instanceof zc?(d=t.Pm(zc,b),null!==d?c.type=d:t.m("Unknown Geometry type as an argument to GraphObject.make: "+b)):c instanceof id?(d=t.Pm(id,b),null!==d?c.type=d:t.m("Unknown PathSegment type as an argument to GraphObject.make: "+b)):t.m("Unable to use a string as an argument to GraphObject.make: "+b)}else if(b instanceof Q)a instanceof y||t.m("A GraphObject can only be added to a Panel, not to: "+a),a.add(b);else if(b instanceof Ae)a instanceof y||t.m("A RowColumnDefinition can only be added to a Panel, not to: "+a),jj(b.xf?a.wd(b.index):a.vd(b.index),b);else if(b instanceof ca)c=a,c instanceof T&&b.Re===T?2===(2&b.value)?c.Lt=b:b===Pg||b===yg||b===xg?c.De=b:b===bl||b===cl||b===dl?c.Lo=b:b!==el&&b!==zg&&t.m("Unknown Link enum value for a Link property: "+b):c instanceof y&&b.Re===y?c.type=b:c instanceof na&&b.Re===na?c.pB=b:c instanceof Q&&b.Re===T?0===b.name.indexOf("Orient")?c.Ot=b:t.m("Unknown Link enum value for GraphObject.segmentOrientation property: "+b):c instanceof Q&&b.Re===Q?c.fi=b:c instanceof z&&b.Re===z?c.Fm=b:c instanceof ea&&b.Re===ea?c.type=b:c instanceof zc&&b.Re===zc?c.type=b:c instanceof id&&b.Re===id?c.type=b:c instanceof De&&b.Re===De?c.mode=b:c instanceof td&&b.Re===td?c.td=b:c instanceof W&&b.Re===W?0===b.name.indexOf("Alignment")?c.alignment=b:0===b.name.indexOf("Arrangement")?c.Qe=b:0===b.name.indexOf("Compaction")?c.compaction=b:0===b.name.indexOf("Path")?c.path=b:0===b.name.indexOf("Sorting")?c.sorting=b:0===b.name.indexOf("Style")?c.MG=b:t.m("Unknown enum value: "+b):c instanceof Y&&b.Re===Y?0===b.name.indexOf("Aggressive")?c.JD=b:0===b.name.indexOf("Cycle")?c.hE=b:0===b.name.indexOf("Init")?c.ZE=b:0===b.name.indexOf("Layer")?c.lF=b:t.m("Unknown enum value: "+b):c instanceof ck&&b.Re===ck?b===fl||b===gl||b===hl||b===il?c.sorting=b:b===jl||b===kl?c.Qe=b:b===ll||b===ml?c.alignment=b:t.m("Unknown enum value: "+b):c instanceof nl&&b.Re===nl?b===ol||b===pl||b===ql||b===rl||b===sl?c.sorting=b:b===tl||b===ul||b===vl||b===wl?c.direction=b:b===xl||b===Dl||b===El||b===Fl?c.Qe=b:b===Gl||b===Hl?c.Bt=b:t.m("Unknown enum value: "+b):t.m("No property to set for this enum value: "+b);else if(b instanceof De)if(a instanceof Q||a instanceof Ae){var d=b.Wt,e=d.indexOf(".");e>0&&a instanceof y&&(c=d.substr(e+1),d=a.oe(d.substring(0,e)),null!==d&&(a=d,b.Wt=c)),a.bind(b)}else t.m("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+a);else if(b instanceof Bc)a instanceof zc?a.Bb.add(b):t.m("A PathFigure can only be added to a Geometry, not to: "+a);else if(b instanceof id)a instanceof Bc?a.Ea.add(b):t.m("A PathSegment can only be added to a PathFigure, not to: "+a);else if(Array.isArray(b))for(c=0;c<b.length;c++)$k(a,b[c]);else if("object"==typeof b&&null!==b)if(c=a,c instanceof ea){d={};for(e in b){var f=parseFloat(e);isNaN(f)?d[e]=b[e]:c.addColorStop(f,b[e])}t.tx(c,d)}else c instanceof Ae?(void 0!==b.row?(d=b.row,(void 0===d||null===d||1/0===d||isNaN(d)||0>d)&&t.m("Must specify non-negative integer row for RowColumnDefinition "+b),c.Xl=!0,c.Vc=d):void 0!==b.column?(d=b.column,(void 0===d||null===d||1/0===d||isNaN(d)||0>d)&&t.m("Must specify non-negative integer column for RowColumnDefinition "+b),c.Xl=!1,c.Vc=d):t.m("Must specify row or column value in a RowColumnDefinition "+b),d=t.gI(b,"row","column"),t.tx(c,d)):t.tx(c,b);else t.m('Unknown initializer "'+b+'" for object being constructed by GraphObject.make: '+a)}function y(a){Q.call(this),void 0===a?0===arguments.length?this.da=$g:t.m("invalid argument to Panel constructor: undefined"):(t.Aa(a,y,y,"type"),this.da=a),this.xa=new B(Q),this.Ne=F.fq,this.Vg=!1,this.da===yi&&(this.Vg=!0),this.Dq=xb,this.Hc=gk,this.da===Nk&&Il(this),this.Io=Xg,this.Sq=new fa(10,10).freeze(),this.Tq=F.mj,this.Jl=this.Ol=null,this.hr=NaN,this.hg=this.yi=null,this.eo="category",this.gg=null,this.Qi=new x(NaN,NaN,NaN,NaN),this.Eo=null,this.Eh=!1,this.bs=null}function Il(a){a.sj=F.fq,a.wh=1,a.si=null,a.Ql=null,a.vh=1,a.uh=null,a.Pl=null,a.kd=[],a.dd=[],a.sm=Jl,a.Ll=Jl,a.Pi=0,a.zi=0}function Ml(a,b,c,d){for(var e,f=d.length,g=a.oa,h=c?a.wd(0):a.vd(0),i=0;f>i;i++)if(e=d[i],void 0!==e&&e!==h&&0!==e.fc){var j=e.kn;isNaN(j)&&(j=c?a.wh:a.vh);var k=e.jn;if(null===k&&(k=c?a.si:a.uh),0!==j&&null!==k){Dk(a,b,k,!1);var k=!1,l=e.kG;if(null!==l){var m=k=!0;void 0!==b.setLineDash?(b.setLineDash(l),b.lineDashOffset=a.ld):void 0!==b.webkitLineDash?(b.webkitLineDash=l,b.webkitLineDashOffset=a.ld):void 0!==b.mozDash?(b.mozDash=l,b.mozDashOffset=a.ld):m=!1}b.beginPath();var n=e.position+j;c?n>g.height&&(j-=n-g.height):n>g.width&&(j-=n-g.width),e=e.position+j/2,b.lineWidth=j,n=a.padding,c?(e+=n.top,j=n.left,n=g.width-n.right,k&&!m?lk(b,j,e,n,e,l,0):(b.moveTo(j,e),b.lineTo(n,e))):(e+=n.left,j=n.top,n=g.height-n.bottom,k&&!m?lk(b,e,j,e,n,l,0):(b.moveTo(e,j),b.lineTo(e,n))),b.stroke(),k&&(void 0!==b.setLineDash?(b.setLineDash(t.ji),b.lineDashOffset=0):void 0!==b.webkitLineDash?(b.webkitLineDash=t.ji,b.webkitLineDashOffset=0):void 0!==b.mozDash&&(b.mozDash=null,b.mozDashOffset=0))}}}function Ll(a,b,c,d,e){for(var f,g=d.length,h=a.oa,i=0;g>i;i++)if(f=d[i],void 0!==f&&null!==f.background&&f.tw!==e&&0!==f.fc){var j=c?h.height:h.width;if(!(f.position>j)){var k=Nl(f),l=f.kn;isNaN(l)&&(l=c?a.wh:a.vh);var m=f.jn;null===m&&(m=c?a.si:a.uh),null===m&&(l=0),k-=l,l=f.position+l,k+=f.fc,l+k>j&&(k=j-l),0>=k||(j=a.padding,Dk(a,b,f.background,!0),c?b.fillRect(j.left,l+j.top,h.width-(j.left+j.right),k):b.fillRect(l+j.left,j.top,k,h.height-(j.top+j.bottom)))}}}function Kl(a,b,c){if(0!==a%b)return!1;b=c.length;for(var d=0;b>d;d++)if(0===a%c[d])return!1;return!0}function kj(a){return"LineV"===a||"BarV"===a}function Kk(a,b,c){for(var d=0;c>d;d++){var e=b.n[d];if(!0===e.fj)return a.Eo=e}return b=b.n[0],a.Eo=b}function Vl(a,b,c){if(c(a,b),b instanceof y){b=b.xa.n;for(var d=b.length,e=0;d>e;e++)Vl(a,b[e],c)}}function bj(a,b){Wl(a,a,b)}function Wl(a,b,c){c(b),b=b.xa.n;for(var d=b.length,e=0;d>e;e++){var f=b[e];f instanceof y&&Wl(a,f,c)}}function Xl(a,b,c){if(c(b),b instanceof y){b=b.xa.n;for(var d=b.length,e=0;d>e;e++)Xl(a,b[e],c)}}function Yl(a,b,c){if(c(b))return b;if(b instanceof y){b=b.xa.n;for(var d=b.length,e=0;d>e;e++){var f=Yl(a,b[e],c);if(null!==f)return f}}return null}function $l(a){a=a.xa.n;for(var b=a.length,c=0,d=0;b>d;d++){var e=a[d];if(e instanceof y)c=Math.max(c,$l(e));else if(e instanceof V){a:{if(!e.ah)switch(e.Pn){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":e=0;break a}e=e.bh/2*e.ym*e.ek()}c=Math.max(c,e)}}return c}function am(a,b,c,d){for(var e=a.xa.length;e--;){var f=a.xa.n[e];if(f.visible){var g=f.oa,h=a.Pa;g.x>h.width||g.y>h.height||0>g.x+g.width||0>g.y+g.height||(f instanceof y&&am(f,b,c,d),null!==b&&(f=b(f)),f&&(null===c||c(f))&&d.add(f))}}}function Ol(a){var b=a.G;return(void 0===b||b===xb)&&(b=null),null===b&&a instanceof V&&(a=a.Ta,null!==a&&(b=a.G)),null===b&&(b=Eb),b}function Pl(a){var b=a.H;return(void 0===b||b===xb)&&(b=null),null===b&&a instanceof V&&(a=a.Ta,null!==a&&(b=a.H)),null===b&&(b=Pb),b}function Wk(a){return a=a.Jl,null!==a&&a.nb}function Le(a){var b=a.Jl;if(null===b)null!==a.data&&t.m("Template cannot have .data be non-null: "+a),a.Jl=b=new B(De);else if(b.nb)return;var c=new B(Q);Vl(a,a,function(a,d){var e=d.Kc;if(null!==e){Qk(d,!1);for(var f=e.k;f.next();){e=f.value,e.mode===Fe&&Qk(d,!0);var g=e.Ut;if(null!==g){var h=a;""!==g&&(h=a.oe(g)),null!==h&&(c.add(h),void 0===h.rs&&(h.rs=new B(De)),h.rs.add(e))}b.add(e)}}if(d instanceof y&&d.type===Nk){if(0<d.kd.length)for(f=d.kd,g=f.length,h=0;g>h;h++){var i=f[h];if(void 0!==i&&null!==i.Kc)for(var j=i.Kc.k;j.next();)e=j.value,e.pg=i,e.xz=2,e.Qv=i.index,b.add(e)}if(0<d.dd.length)for(f=d.dd,g=f.length,h=0;g>h;h++)if(i=f[h],void 0!==i&&null!==i.Kc)for(j=i.Kc.k;j.next();)e=j.value,e.pg=i,e.xz=1,e.Qv=i.index,b.add(e)}});for(var d=c.k;d.next();){var e=d.value;if(void 0!==e.rs){Qk(e,!0);for(var f=e.rs.k;f.next();){var g=f.value;null===e.Kc&&(e.Kc=new B(De)),e.Kc.add(g)}}delete e.rs}for(d=b.k;d.next();)e=d.value,f=e.pg,null!==f&&(e.pg=null,f===a?e.nn="":(f instanceof Ae&&(f=f.ja),e.nn=""!==f.name?f.name:f.name="_"+t.od(f)));b.freeze(),a instanceof C&&a.Ld()&&(ih(a,1/0,1/0),a.Lc())}function Zl(a){return a.type===Tg||a.type===ci||a.type===wg}function uj(a,b,c){if(void 0!==b&&null!==b){var d=a.getCategoryForItemData(b,c),d=a.findTemplateForItemData(b,c,d);d instanceof y&&(Le(d),d=d.copy(),"object"==typeof b&&(null===a.gg&&(a.gg=new ia(Object,y)),a.gg.add(b,d)),a.type!==Tg&&a.type!==ci||c++,a.Jd(c,d),bm(d,c),vj(a,c),d.data=b)}}function vj(a,b){for(var c=a.xa,d=b+1;d<c.length;){var e=c.wa(d);e instanceof y&&bm(e,d),d++}}function bm(a,b){a.type===zk?a.lc=b:a.type===Ak&&(a.column=b),a.hF=b}function Ae(){t.Ac(this),this.Ii=null,this.Xl=!0,this.Vc=0,this.Mf=NaN,this.hm=0,this.gm=1/0,this.ue=xb,this.Ra=this.Lb=0,this.Kc=null,this.os=cm,this.Oh=gk,this.ls=this.Mj=null,this.ms=NaN,this.Mb=this.Kh=null,this.zq=!1}function jj(a,b){t.l(b,Ae,Ae,"copyFrom:pd"),b.xf?a.height=b.height:a.width=b.width,a.di=b.di,a.zf=b.zf,a.alignment=b.alignment,a.St=b.St,a.Mj=null===b.Mj?null:b.Mj.Z(),a.jn=b.jn,a.kn=b.kn,a.Kh=null,b.Kh&&(a.Kh=b.Kh.slice(0)),a.background=b.background,a.tw=b.tw,a.Kc=b.Kc}function Ql(a,b){a.Lb=isNaN(a.Mf)?Math.max(Math.min(a.gm,b),a.hm):Math.max(Math.min(a.gm,a.Mf),a.hm)}function Ul(a){var b=a.Ii,c=a.jn;null===c&&(c=a.xf?b.si:b.uh);var d=a.kn;return isNaN(d)&&(d=a.xf?b.wh:b.vh),d=null!==c?d:0,0===a.index&&(d=0),c=a.ZA,null===c&&(c=b.sj),d+(a.xf?c.top:c.left)}function Nl(a){var b=a.Ii,c=a.jn;null===c&&(c=a.xf?b.si:b.uh);var d=a.kn;return isNaN(d)&&(d=a.xf?b.wh:b.vh),d=null!==c?d:0,0===a.index&&(d=0),c=a.ZA,null===c&&(c=b.sj),d+(a.xf?c.top+c.bottom:c.left+c.right)}function Rl(a){if(a.St===cm){var b=a.Ii;return a.xf?b.dG:b.YD}return a.St}function V(){Q.call(this),this.Ta=null,this.Pn="None",this.ah=!1,this.Qq=gk,this.yk=null,this.Gb=this.Uc="black",this.bh=1,this.Co="butt",this.Do="miter",this.ym=10,this.xm=null,this.ld=0,this.Ni=this.Mi=xb,this.Kr=this.Jr=0,this.Vq=!1,this.ar=!0,this.Mr=null,this.Sn=this.Fo="None",this.Uq=1}function dm(a,b,c,d){var e,f,g,h=.001,i=d.Ga,j=i.width,i=i.height,k=c.length;if(!(2>k)){e=c[0][0],f=c[0][1];for(var l,m,n,o,p=0,q=t.Db(),r=1;k>r;r++)l=c[r],h=l[0],g=l[1],l=h-e,e=g-f,0===l&&(l=.001),m=e/l,o=Math.atan2(e,l),e=Math.sqrt(l*l+e*e),q.push([l,o,m,e]),p+=e,e=h,f=g;e=c[0][0],f=c[0][1],c=0,h=j,k=j/2,r=0===k?!1:!0,g=0,n=q[g],l=n[0],o=n[1],m=n[2],n=n[3];for(var s=0;p>=.1;){if(0===s&&(r?(h=j,c++,h-=k,p-=k,r=!1):(h=j,c++),0===h&&(h=1)),h>p)return void t.ya(q);h>n?(s=h-n,h=n):s=0;var u=Math.sqrt(h*h/(1+m*m));if(0>l&&(u=-u),e+=u,f+=m*u,a.translate(e,f),a.rotate(o),a.translate(-(j/2),-(i/2)),0===s&&d.fl(a,b),a.translate(j/2,i/2),a.rotate(-o),a.translate(-e,-f),p-=h,n-=h,0!==s){if(g++,g===q.length)return void t.ya(q);n=q[g],l=n[0],o=n[1],m=n[2],n=n[3],h=s}}t.ya(q)}}function em(a,b,c,d){var e,f,g,h=.001,i=c.length,j=b.length;if(!(2>j))if(e=b[0][0],f=b[0][1],2===j)lk(a,e,f,b[1][0],b[1][1],c,d);else{a.moveTo(e,f);for(var k,l,m,n=0,o=t.Db(),p=1;j>p;p++)k=b[p],h=k[0],g=k[1],k=h-e,e=g-f,0===k&&(k=.001),l=e/k,e=Math.sqrt(k*k+e*e),o.push([k,l,e]),n+=e,e=h,f=g;e=b[0][0],f=b[0][1],b=0,j=!0,h=c[b%i],p=0!==d,g=0,m=o[g],k=m[0],l=m[1],m=m[2];for(var q=0;n>=.1;){0===q&&(h=c[b%i],b++,p&&(d%=h,h-=d,p=!1)),h>n&&(h=n),h>m?(q=h-m,h=m):q=0;var r=Math.sqrt(h*h/(1+l*l));if(0>k&&(r=-r),e+=r,f+=l*r,j?a.lineTo(e,f):a.moveTo(e,f),n-=h,m-=h,0!==q){if(g++,g===o.length)return void t.ya(o);m=o[g],k=m[0],l=m[1],m=m[2],h=q}else j=!j}t.ya(o)}}function Tl(a,b,c){if(!1!==Qi(a)){a.Wc.Ma();var d=a.bh;if(0===d){var e=a.S;e instanceof Je&&e.type===wg&&e.pc instanceof V&&(d=e.pc.fb)}d*=a.xc,nk(a,-(d/2),-(d/2),b+d,c+d),b=a.Wc,c=a.He,d=a.Vf,b.width=Math.min(c.width,b.width),b.height=Math.min(c.height,b.height),b.width=Math.max(d.width,b.width),b.height=Math.max(d.height,b.height),a.Wc.freeze(),a.Wc.N()||t.m("Non-real measuredBounds has been set. Object "+a+", measuredBounds: "+a.Wc.toString()),rk(a,!1)}}function Wg(a){var b=a.HE;return a.ah?b===gk?Cc:b:b===gk?F.MA[a.Ab].Hc:b}function gm(a,b,c,d,e){return a=c.x-a,b=c.y-b,b=a*a+b*b,d>b?(e.x=c.x,e.y=c.y,b):d}function fm(a,b,c,d,e,f,g,h,i){var j=!1,k=(e-g)*(b-d)-(f-h)*(a-c);return 0===k?!1:(i.x=((e*h-f*g)*(a-c)-(e-g)*(a*d-b*c))/k,i.y=((e*h-f*g)*(b-d)-(f-h)*(a*d-b*c))/k,(b>d?b-d:d-b)>(a>c?a-c:c-a)?(e=d>b?b:d,a=d>b?d:b,(i.y>e||F.mb(i.y,e))&&(i.y<a||F.mb(i.y,a))&&(j=!0)):(e=c>a?a:c,a=c>a?c:a,(i.x>e||F.mb(i.x,e))&&(i.x<a||F.mb(i.x,a))&&(j=!0)),j)}function hm(a,b,c,d){if(!a.ll(b,c,d))return!1;a=b.x,b=b.y;var e=c.x,f=c.y;if(c=d.x,d=d.y,a===e){var g;return f>b?(g=b,a=f):(g=f,a=b),d>=g&&a>=d}return e>a?(g=a,a=e):g=e,c>=g&&a>=c}function im(a){var b=a.h;null!==b&&b.la.vb||(a.Ot=jm,"None"!==a.Fo?(a.Cf=-1,a.Qj=Wb):"None"!==a.Sn&&(a.Cf=0,a.Qj=new H(1-Wb.x,Wb.y)))}function na(){Q.call(this),this.le="",this.Gb="black",this.Tg="13px sans-serif",this.Td="start",this.Yq=!0,this.Yl=this.Zl=!1,this.Qk=km,this.zm=lm,this.dv=this.mf=0,this.Rn=this.ez=this.fz=null,this.no={},this.Kq=!1,this.kf=this.Tk=this.xs=null,this.Pj=this.Oj=0,this.Ai=1/0}function Ck(a,b){var c=a.Tg;null!==c&&b.du!==c&&(b.font=c,b.du=c)}function pm(a,b,c,d){b=b.replace(/^\s+|\s+$/g,""),void 0===c.Ag&&(c.Ag=0),void 0===c.ug&&(c.ug=[]),void 0===c.Of&&(c.Of=[]);var e,f,g=0,h=a.Tg;e=a.Oj+a.Pj;var i=Math.max(0,Ah(a)+e),j=a.Qk===om?tm(h):0;if(!(a.mf>=a.Ai)){if(a.zm===mm){if(c.ph=1,e=sm(b,h),0===j||d>=e)return c.Ag=e,c.ug.push(c.Ag),c.Of.push(b),new fa(e,i);var k=um(b);for(b=b.substr(k.length),f=um(b),e=sm(k+f,h);0<f.length&&d>=e;)k+=f,b=b.substr(f.length),f=um(b),e=sm((k+f).replace(/^\s+|\s+$/g,""),h);for(k+=f.replace(/^\s+|\s+$/g,""),d=Math.max(1,d-j);sm(k,h)>d&&1<k.length;)k=k.substr(0,k.length-1);return k+=t.$s,f=sm(k,h),c.ug.push(f),c.Ag=f,c.Of.push(k),new fa(f,i)}for(j=0,0===b.length&&(j=1,c.ug.push(0),c.Of.push(b));0<b.length;){for(k=um(b),b=b.substr(k.length);sm(k,h)>d;){var l=1;for(e=sm(k.substr(0,l),h),f=0;d>=e;)l++,f=e,e=sm(k.substr(0,l),h);if(1===l?(c.ug[a.mf+j]=e,g=Math.max(g,e)):(c.ug[a.mf+j]=f,g=Math.max(g,f)),l--,1>l&&(l=1),c.Of[a.mf+j]=k.substr(0,l),j++,k=k.substr(l),a.mf+j>a.Ai)break}for(f=um(b),e=sm(k+f,h);0<f.length&&d>=e;)k+=f,b=b.substr(f.length),f=um(b),e=sm((k+f).replace(/^\s+|\s+$/g,""),h);if(k=k.replace(/^\s+|\s+$/g,""),""!==k&&(0===f.length?(c.ug.push(e),g=Math.max(g,e)):(f=sm(k,h),c.ug.push(f),g=Math.max(g,f)),c.Of.push(k),j++,a.mf+j>a.Ai))break}return c.ph=Math.min(a.Ai,j),c.Ag=Math.max(c.Ag,g),new fa(c.Ag,i*c.ph)}}function um(a){for(var b=a.length,c=0;b>c&&" "!==a.charAt(c);)c++;for(;b>c&&" "===a.charAt(c);)c++;return c>=b?a:a.substr(0,c)}function sm(a,b){return t.Tp!==b&&(t.ln.font=b,t.Tp=b),t.ln.measureText(a).width}function Ah(a){if(null!==a.Rn)return a.Rn;var b=a.Tg;t.Tp!==b&&(t.ln.font=b,t.Tp=b);var c=0;return void 0!==t.gA[b]&&5e3>t.CE?c=t.gA[b]:(c=1.3*t.ln.measureText("M").width,t.gA[b]=c,t.CE++),a.Rn=c}function tm(a){t.Tp!==a&&(t.ln.font=a,t.Tp=a);var b=0;return void 0!==t.Gw[a]&&5e3>t.fA?b=t.Gw[a]:(b=t.ln.measureText(t.$s).width,t.Gw[a]=b,t.fA++),b}function rm(a,b,c){void 0===c.ph&&(c.ph=0);var d=a.indexOf("\r",b);return-1===d&&(d=a.indexOf("\n",b)),d>=0&&(c.ph="\r"===a[d]&&d+1<a.length&&"\n"===a[d+1]?d+2:d+1),d}function qm(a,b,c){var d=a.le,e=a.Oj+a.Pj,e=Math.max(0,Ah(a)+e);if(0===d.length)return c.Ag=0,a.mf=1,e;if(!a.Tw){var f=rm(d,0,{});f>=0&&(d=d.substr(0,f))}for(var f=0,g=a.mf=0,h=-1,i={ph:0},j=!1;!j;)h=rm(d,g,i),-1===h&&(h=d.length,j=!0),h>=g&&(g=d.substr(g,h-g),a.zm!==mm?(c.ph=0,g=pm(a,g,c,b),f+=g.height,a.mf+=c.ph):(pm(a,g,c,b),f+=e,a.mf++),a.mf===a.Ai&&(j=!0)),g=i.ph;return a.dv=f}function al(){Q.call(this),this.dg=null,this.qs="",this.Nj=new x(NaN,NaN,NaN,NaN).freeze(),this.Wn=Cc,this.vs=this.kf=null,this.Vu=this.Mu=this.fm=!1,this.fC=!0,this.zo=null}function ha(){this.s=new zc,this.Xb=null}function I(a,b,c,d,e,f){null===a.s&&t.m("StreamGeometryContext has been closed"),void 0!==e&&!0===e?(null===a.Xb&&t.m("Need to call beginFigure first"),d=new id(bd),d.D=b,d.F=c,a.Xb.Ea.add(d)):(a.Xb=new Bc,a.Xb.qa=b,a.Xb.ra=c,a.Xb.pp=d,a.s.Bb.add(a.Xb)),void 0!==f&&(a.Xb.bo=f)}function L(a){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.Xb&&t.m("Need to call beginFigure first");var b=a.Xb.Ea.length;b>0&&a.Xb.Ea.n[b-1].close()}function Zc(a){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.Xb&&t.m("Need to call beginFigure first"),0<a.Xb.Ea.length&&(a.Xb.pp=!0)}function J(a,b,c,d,e,f,g,h){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.Xb&&t.m("Need to call beginFigure first");var i=new id(cd);i.Cb=b,i.Sb=c,i.re=d,i.se=e,i.D=f,i.F=g,h&&i.close(),a.Xb.Ea.add(i)}function Sc(a,b,c,d,e){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.Xb&&t.m("Need to call beginFigure first");var f=new id(dd);f.Cb=b,f.Sb=c,f.D=d,f.F=e,a.Xb.Ea.add(f)}function Tc(a,b,c,d,e,f,g,h){null===a.s&&t.m("StreamGeometryContext has been closed"),null===a.Xb&&t.m("Need to call beginFigure first"),b=new id(fd,g,h,b,c,d,e,f),a.Xb.Ea.add(b)}function C(a){0===arguments.length?y.call(this):y.call(this,a),this.W=311807,this.Kk=this.rh="",this.Zr=this.Wr=this.is=this.jr=null,this.ks="",this.ki=this.js=this.tm=null,this.Yr="",this.vo=null,this.Xr=new fa(NaN,NaN).freeze(),this.$r="",this.wo=null,this.le="",this.lo=this.xq=this.zk=null,this.Yg=new w(NaN,NaN).freeze(),this.qr="",this.Nk=null,this.rr=Eb,this.Ar=F.cH,this.tr=F.bH,this.Hq=null,this.kr=xm,this.wm=new w(6,6).freeze(),this.vm="gray",this.um=4,this.BC=-1,this.mH=new x,this.Fj=null,this.Cj=NaN}function ym(a,b){if(a.eb&&a.hG){var c=a.Pt;if(null===c||!(a.oa.N()&&a.La()&&c.pl()&&c.oa.N()))return;var d=a.bp("Selection");if(null===d){if(d=a.iG,null===d&&(a instanceof T?d=b.rF:a instanceof C&&(d=a instanceof S?b.NE:b.GF)),!(d instanceof Je))return;if(Le(d),d=d.copy(),!(d instanceof Je))return;d.Zc="Selection",d.pc=c}if(null!==d){var e=d.placeholder;if(null!==e){var f=c.ek(),g=0;c instanceof V&&(g=c.fb);var h=t.Cl();h.p((c.Pa.width+g)*f,(c.Pa.height+g)*f),e.Ca=h,t.ck(h)}return d.angle=c.hl(),d.type!==wg&&(e=t.K(),d.location=c.pb(Eb,e),t.B(e)),void a.Wk("Selection",d)}}a.vl("Selection")}function ij(a){var b=a.h;null!==b&&(zi(b),0!==(16384&a.W)!=!0&&(a.W|=16384,b.te()))}function Qh(a){0!==(16384&a.W)!=!1&&(a.updateAdornments(),a.W&=-16385,a=a.h,null!==a&&(a.ve=!0))}function Rk(a,b){if(!1===Si(a)){var c=a.h;null!==c&&(a.La()&&c.fg.add(a),a instanceof R&&!c.la.vb&&a.wf(),b||c.te()),zm(a,!0)}}function Am(a){if(!1!==Si(a)){var b=a.position,c=a.location;c.N()&&b.N()||(Bm(a,b,c),sk(a));var b=a.Ra,c=a.cc,d=c.copy();c.Ma(),c.x=b.x,c.y=b.y,c.freeze(),tk(a,d,c),zm(a,!1)}}function Cm(a,b,c,d){void 0===d&&(d=new w),c.Ge()&&(c=Hb);var e=b.Pa;if(d.p(e.width*c.x+c.offsetX,e.height*c.y+c.offsetY),null===b||b===a)return d;for(b.transform.Sa(d),b=b.ja;null!==b&&b!==a;)b.transform.Sa(d),b=b.ja;return a.Mk.Sa(d),d.offset(-a.Wc.x,-a.Wc.y),d}function Th(a,b,c){c=void 0===c?a.mH:c;var d;isNaN(a.Cj)&&(a.Cj=$l(a)),d=a.Cj;var e=2*d;if(!a.gj)return c.p(b.x-1-d,b.y-1-d,b.width+2+e,b.height+2+e),c;d=b.x;var e=b.y,f=b.width;b=b.height;var g=a.shadowBlur;return a=a.pG,f+=g,b+=g,d-=g/2,e-=g/2,0<a.x?f+=a.x:(d+=a.x,f-=a.x),0<a.y?b+=a.y:(e+=a.y,b-=a.y),c.p(d-1,e-1,f+2,b+2),c}function Bm(a,b,c){var d=NaN,e=NaN,f=t.K(),g=a.bf,h=a.kc;g.Ge()&&t.m("determineOffset: Part's locationSpot must be real: "+g.toString());var i=h.Pa,d=0;if(h.fb&&(d=h.bh),f.Rt(0,0,i.width+d,i.height+d,g),h!==a)for(h.fb&&f.offset(-d/2,-d/2),h.transform.Sa(f),g=h.ja;null!==g&&g!==a;)g.transform.Sa(f),g=g.ja;a.Mk.Sa(f),f.offset(-a.Wc.x,-a.Wc.y),g=a.h,c.N()?(h=b.x,i=b.y,d=c.x-f.x,e=c.y-f.y,b.p(d,e),c=!1,null!==g&&(d=g.li,d.wj?c=!0:!d.sd||a instanceof Je||Gh(d,a,new w(h,i),b),c||b.x===h&&b.y===i||(d=g.Wa,g.Wa=!0,a.j("position",new w(h,i),b),g.Wa=d))):b.N()&&(d=b.x,e=b.y,b=c.copy(),c.p(d+f.x,e+f.y),c.M(b)||null===g||(d=g.Wa,g.Wa=!0,a.j("location",b,c),g.Wa=d)),t.B(f)}function dj(a,b,c){yk(a,!1),a instanceof R&&Xj(c,a),a.layer.rc||b||c.Oc(),b=a.cc;var d=c.xb;d.N()?(Ph(a)?eb(b,d)||(a.Df(!1),ij(a)):b.Tf(d)&&a.Df(!0),a.updateAdornments()):c.Ik=!0}function Rh(a,b){if(a.visible){var c=a.cc;if(0!==c.width&&0!==c.height&&!isNaN(c.x)&&!isNaN(c.y)){var d=a.transform,e=a.ja,f=a.kk;f.reset(),null!==e&&(e.Hf()?f.multiply(e.me):null!==e.ja&&f.multiply(e.ja.me)),f.multiply(a.md),null!==a.vc&&(Dk(a,b,a.vc,!0,!0),b.fillRect(c.x,c.y,c.width,c.height)),null===a.vc&&null===a.Mb&&(b.fillStyle="rgba(0,0,0,0.4)",b.fillRect(c.x,c.y,c.width,c.height)),null!==a.Mb&&(d.qt()||b.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),e=a.Pa,c=e.width,e=e.height,Dk(a,b,a.Mb,!0),b.fillRect(0,0,c+0,e+0),d.qt()||(c=1/(d.m11*d.m22-d.m12*d.m21),b.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.dy-d.m22*d.dx),c*(d.m12*d.dx-d.m11*d.dy))))}}}function Dm(a,b,c,d){b.constructor===a.constructor||t.RG||(t.RG=!0,t.trace('Should not change the class of the Part when changing category from "'+c+'" to "'+d+'"'),t.trace("  Old class: "+t.xg(a)+", new class: "+t.xg(b)+", part: "+a.toString())),a.Wi();var e=a.data;c=a.af;var f=a.eb,g=a.zg,h=!0,i=!0,j=!1;a instanceof R&&(h=a.ci,i=a.Qc,j=a.pn),b.Yh(a),b.cloneProtected(a),a.rh=d,a.ha(),a.fa(),b=a.h,d=!0,null!==b&&(d=b.Wa,b.Wa=!0),a.Ol=e,null!==e&&a.Kb(),null!==b&&(b.Wa=d),e=a.af,e!==c&&(a.Kk=c,a.af=e),a instanceof R&&(a.ci=h,a.Qc=i,a.pn=j,a.Ld()&&a.J(64)),a.eb=f,a.zg=g}function Si(a){return 0!==(32768&a.W)}function zm(a,b){a.W=b?32768|a.W:-32769&a.W}function yk(a,b){a.W=b?65536|a.W:-65537&a.W}function Ph(a){return 0!==(131072&a.W)}function wk(a){a=a.hb,null!==a&&(a.ha(),null!==a.Jb&&a.Jb.ha(),a.wf())}function Gm(a,b){var c=b.hb;return null!==c?Gm(a,c):b instanceof R&&(c=b.$d,null!==c)?Gm(a,c):b}function Hm(a,b,c){if(b===c||null===c)return!1;var d=b.hb;return null===d||d!==c&&!Hm(a,d,c)?b instanceof R&&(b=b.$d,null!==b)?Hm(a,b,c):!1:!0}function Im(a,b,c){if(null===b||null===c)return null;var d=b.hb;if(null===d)return null;if(b===c)return d;var e=c.hb;return null===e?null:d===e?e:Hm(a,c,d)?d:Hm(a,b,e)?e:Im(a,d,e)}function ej(a){return a.La()?(a=a.layer,null!==a&&a.rc?!1:!0):!1}function Je(a){0===arguments.length?C.call(this,$g):C.call(this,a),this.af="Adornment",this.sb=null,this.W&=-257,this.Yg=new w(NaN,NaN),this.mi=new B(x),this.Jb=null}function R(a){0===arguments.length?C.call(this,$g):C.call(this,a),this.nc=new B(T),this.io=this.Lk=this.nr=this.mr=null,this.dr=!0,this.Gs=!1,this.Bs=null,this.qq=this.er=!0,this.rq=F.eH,this.Rd=this.qh=null,this.Qr=Jm,this.Uh=!1}function Nm(a,b){null!==b&&(null===a.qh&&(a.qh=new ma(Om)),a.qh.add(b))}function Pm(a,b){if(null!==b){b.Pr=null;var c=a.hb;null===c||c.Yd||Pm(c,c.gl(""))}}function Qm(a,b,c){if(Pm(a,c),!a.nc.contains(b)){a.nc.add(b);var d=a.oF;if(null!==d){var e=!0,f=a.h;null!==f&&(e=f.Na,f.Na=!0),d(a,b,c),null!==f&&(f.Na=e)}b.Ec&&(c=b.aa,b=b.ca,null!==c&&null!==b&&c!==b&&(d=!0,f=a.h,null!==f&&(d=f.pd),a=d?b:c,e=d?c:b,a.Uh||(a.Uh=e),!e.ci||null!==f&&f.la.vb||(d?c===e&&(e.ci=!1):b===e&&(e.ci=!1))))}}function Rm(a,b,c){if(Pm(a,c),a.nc.remove(b)){var d=a.pF,e=a.h;if(null!==d){var f=!0;null!==e&&(f=e.Na,e.Na=!0),d(a,b,c),null!==e&&(e.Na=f)}b.Ec&&(c=!0,null!==e&&(c=e.pd),a=c?b.ca:b.aa,b=c?b.aa:b.ca,null!==a&&(a.Uh=!1),null===b||b.ci||(0===b.nc.count?(b.Uh=null,null!==e&&e.la.vb||(b.ci=!0)):Qj(b)))}}function Qj(a){if(a.Uh=!1,0!==a.nc.count){var b=!0,c=a.h;if(null===c||!c.la.vb){for(null!==c&&(b=c.pd),c=a.nc.k;c.next();){var d=c.value;if(d.Ec)if(b){if(d.aa===a)return void(a.ci=!1)}else if(d.ca===a)return void(a.ci=!1)}a.ci=!0}}}function Tk(a){null===a.Rd?a.Rd=new ia("string",Q):a.Rd.clear(),Vl(a,a,function(a,b){var c=b.Nd;null!==c&&a.Rd.add(c,b)}),0===a.Rd.count&&a.Rd.add("",a)}function Sk(a,b,c){var d=b.Nd;if(null!==d&&(null!==a.Rd&&a.Rd.remove(d),b=a.h,null!==b&&c)){for(c=null,a=a.yE(d);a.next();)null===c&&(c=t.Db()),c.push(a.value);if(null!==c){for(a=0;a<c.length;a++)b.remove(c[a]);t.ya(c)}}}function Tm(a,b,c,d,e){if(d>1)for(e=c?a.Cw():a.wg();e.next();){var f=e.value;f.Ec&&(f=f.jA(a),null===f||f===a||b.contains(f)||(b.add(f),Tm(f,b,c,d-1,f.Qc)))}else Um(a,b,c,e)}function Um(a,b,c,d){for(var e=c?a.Cw():a.wg();e.next();){var f=e.value;d&&f.Wi(),f.Ec&&(f=f.jA(a),null===f||f===a||b.contains(f)||(b.add(f),d&&(f.fa(),wk(f),f.df(!1)),f.Qc&&(f.pn=f.Qc,Um(f,b,c,f.pn))))}a.Qc=!1}function Vm(a,b,c,d,e,f,g){for(var h=c?a.Cw():a.wg();h.next();){var i=h.value;i.Ec&&(e||(i.rg||i.ac(),i.updateAdornments()),i=i.jA(a),null!==i&&i!==a&&!b.contains(i)&&(b.add(i),e||(i.df(!0),wk(i),Nh(f,i,g)),d>2||i.pn))&&(i.pn=!1,Vm(i,b,c,d-1,i.Qc,f,g))}a.Qc=!0}function T(){C.call(this,wg),this.eg=null,this.Bh="",this.qg=this.Pq=null,this.Rh="",this.As=null,this.Vr=this.Ur=this.Tr=!1,this.fr=!0,this.lq=zg,this.yq=0,this.Bq=zg,this.Cq=NaN,this.pm=el,this.ps=.5,this.Ji=this.we=null,this.Cc=new B(w).freeze(),this.xo=this.xe=null,this.rg=!1,
this.oz=null,this.vz=!1,this.xn=this.ui=this.Ta=null,this.hf=0,this.Jn=this.Fn=null,this.mi=new B(x),this.zz=new w,this.oD=this.mD=null,this.qy=!1,this.P=null}function Lj(a){var b=a.aa,c=a.ca;null!==b&&null!==c?fn(a,b.EI(c)):fn(a,null)}function fn(a,b){var c=a.zk;if(c!==b){null!==c&&Em(c,a),a.zk=b,null!==b&&Fm(b,a);var d=a.Wz;if(null!==d){var e=!0,f=a.h;null!==f&&(e=f.Na,f.Na=!0),d(a,c,b),null!==f&&(f.Na=e)}!a.rg||a.mD!==c&&a.oD!==c||a.ac()}}function Sm(a,b){null===a.we&&(a.we=new ma(R)),a.we.add(b),a.ha()}function hn(a){0===a.Cc.count?a.rg=!1:(a.rg=!0,a.Fn=a.o(0).copy(),a.Jn=a.o(a.pa-1).copy(),jn(a,!1))}function mn(a,b){return Math.abs(b.x-a.x)>Math.abs(b.y-a.y)?(b.x=b.x>=a.x?a.x+9e9:a.x-9e9,b.y=a.y):(b.y=b.y>=a.y?a.y+9e9:a.y-9e9,b.x=a.x),b}function nn(a,b){var c=b.Pr;return null===c&&(c=new on,c.port=b,c.Fc=b.S,b.Pr=c),pn(c,a)}function kn(a,b){if(null===b)return Hb;var c=a.ob;return c.Pc()&&(void 0===b&&(b=a.ud),null!==b&&(c=b.ob)),c===xb?wb:c}function ln(a,b){if(null===b)return Hb;var c=a.rb;return c.Pc()&&(void 0===b&&(b=a.fe),null!==b&&(c=b.rb)),c===xb?wb:c}function qn(a){var b=a.ip;return isNaN(b)&&(a=a.ud,null!==a&&(b=a.ip)),isNaN(b)?0:b}function rn(a){var b=a.Yp;return isNaN(b)&&(a=a.fe,null!==a&&(b=a.Yp)),isNaN(b)?0:b}function Bf(a){if(!a.dj)return!1;var b=a.points.n,c=b.length;if(4>c)return!1;a=Sj(a.h,a);for(var d=1;c-2>d;d++){var e=b[d],f=b[d+1];if(!sn(a,Math.min(e.x,f.x),Math.min(e.y,f.y),Math.abs(e.x-f.x),Math.abs(e.y-f.y)))return!0}return!1}function wn(a,b,c,d,e,f){var g=b.Hm,h=b.Gm,i=un(b,c,d),j=c,k=d;for(0===e?j+=g:90===e?k+=h:180===e?j-=g:k-=h;i>xn&&un(b,j,k)===i-yn;)c=j,d=k,0===e?j+=g:90===e?k+=h:180===e?j-=g:k-=h,i-=yn;f?i>xn&&(180===e||0===e?c=Math.floor(c/g)*g+g/2:(90===e||270===e)&&(d=Math.floor(d/h)*h+h/2)):(c=Math.floor(c/g)*g+g/2,d=Math.floor(d/h)*h+h/2),i>xn&&(f=e,j=c,k=d,0===e?(f=90,k+=h):90===e?(f=180,j-=g):180===e?(f=270,k-=h):270===e&&(f=0,j+=g),un(b,j,k)===i-yn?wn(a,b,j,k,f,!1):(j=c,k=d,0===e?(f=270,k-=h):90===e?(f=0,j+=g):180===e?(f=90,k+=h):270===e&&(f=180,j-=g),un(b,j,k)===i-yn&&wn(a,b,j,k,f,!1))),a.Xk(c,d)}function Bn(a,b,c,d){return a=c-a,isNaN(a)||1/0===a||-(1/0)===a?NaN:(0>a&&(a=-a),b=d-b,isNaN(b)||1/0===b||-(1/0)===b?NaN:(0>b&&(b=-b),F.mb(a,0)?b:F.mb(b,0)?a:Math.sqrt(a*a+b*b)))}function zn(a,b,c,d){var e=a.pa;if(!(2>e))if(c){var f=a.o(1);c=f.x-d.x,d=f.y-d.y,f=Bn(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=qn(a),a>e&&(a=e),c=a*(c-b.x)/f,a=a*(d-b.y)/f,b.x+=c,b.y+=a)}else f=a.o(e-2),c=f.x-d.x,d=f.y-d.y,f=Bn(b.x,b.y,c,d),0!==f&&(e=2===e?.5*f:f,a=rn(a),a>e&&(a=e),c=a*(b.x-c)/f,a=a*(b.y-d)/f,b.x-=c,b.y-=a)}function An(a,b,c,d){for(var e=a.pa,f=b;F.mb(b.x,f.x)&&F.mb(b.y,f.y);){if(c>=e)return e-1;f=a.o(c++)}if(!F.mb(b.x,f.x)&&!F.mb(b.y,f.y))return c-1;for(var g=f;F.mb(b.x,f.x)&&F.mb(f.x,g.x)&&(!d||(b.y>=f.y?f.y>=g.y:f.y<=g.y))||F.mb(b.y,f.y)&&F.mb(f.y,g.y)&&(!d||(b.x>=f.x?f.x>=g.x:f.x<=g.x));){if(c>=e)return e-1;g=a.o(c++)}return c-2}function Cn(a,b,c,d,e,f,g){if(!g&&gn(a)){g=[];var h=0;a.La()&&(h=Dn(a,e,f,g));var i=e.x,i=e.y;if(h>0)if(F.I(e.y,f.y))if(e.x<f.x)for(var j=0;h>j;){var k=Math.max(e.x,Math.min(g[j++]-5,f.x-10));b.lineTo(k+c,f.y+d);for(var i=k+c,l=Math.min(k+10,f.x);h>j;){var m=g[j];if(!(l+10>m))break;j++,l=Math.min(m+5,f.x)}m=(k+l)/2+c,m=f.y-10+d,k=l+c,l=f.y+d,a.De===yg?I(b,k,l,!1,!1):J(b,i,m,k,m,k,l)}else for(j=h-1;j>=0;){for(k=Math.min(e.x,Math.max(g[j--]+5,f.x+10)),b.lineTo(k+c,f.y+d),i=k+c,l=Math.max(k-10,f.x);j>=0&&(m=g[j],m>l-10);)j--,l=Math.max(m-5,f.x);m=f.y-10+d,k=l+c,l=f.y+d,a.De===yg?I(b,k,l,!1,!1):J(b,i,m,k,m,k,l)}else if(F.I(e.x,f.x))if(e.y<f.y)for(j=0;h>j;){for(k=Math.max(e.y,Math.min(g[j++]-5,f.y-10)),b.lineTo(f.x+c,k+d),i=k+d,l=Math.min(k+10,f.y);h>j&&(m=g[j],l+10>m);)j++,l=Math.min(m+5,f.y);m=f.x-10+c,k=f.x+c,l+=d,a.De===yg?I(b,k,l,!1,!1):J(b,m,i,m,l,k,l)}else for(j=h-1;j>=0;){for(k=Math.min(e.y,Math.max(g[j--]+5,f.y+10)),b.lineTo(f.x+c,k+d),i=k+d,l=Math.max(k-10,f.y);j>=0&&(m=g[j],m>l-10);)j--,l=Math.max(m-5,f.y);m=f.x-10+c,k=f.x+c,l+=d,a.De===yg?I(b,k,l,!1,!1):J(b,m,i,m,l,k,l)}}b.lineTo(f.x+c,f.y+d)}function Dn(a,b,c,d){var e=a.h;if(null===e||b.M(c))return 0;for(e=e.Yw;e.next();){var f=e.value;if(null!==f&&f.visible)for(var f=f.zb.n,g=f.length,h=0;g>h;h++){var i=f[h];if(i===a)return 0<d.length&&d.sort(function(a,b){return a-b}),d.length;if(i instanceof T&&i.La()&&gn(i)){var j=i.uj();j.N()&&a.uj().Tf(j)&&!a.usesSamePort(i)&&(j=i.path,null!==j&&j.pl()&&En(b,c,d,i))}}}return 0<d.length&&d.sort(function(a,b){return a-b}),d.length}function En(a,b,c,d){for(var e=F.I(a.y,b.y),f=d.pa,g=d.o(0),h=t.K(),i=1;f>i;i++){var j=d.o(i);if(f-1>i){var k=d.o(i+1);g.y===j.y&&j.y===k.y?(j.x>g.x&&k.x>j.x||j.x<g.x&&k.x<j.x)&&(j=k,i++):g.x===j.x&&j.x===k.x&&(j.y>g.y&&k.y>j.y||j.y<g.y&&k.y<j.y)&&(j=k,i++)}a:{var k=h,l=a.x,m=a.y,n=b.x,o=b.y,p=g.x,g=g.y,q=j.x,r=j.y;if(F.I(l,n)){if(!F.I(m,o)&&F.I(g,r)&&Math.min(m,o)<g&&Math.max(m,o)>g&&Math.min(p,q)<l&&Math.max(p,q)>l&&!F.I(p,q)){k.x=l,k.y=g,k=!0;break a}}else if(F.I(m,o)&&F.I(p,q)&&Math.min(l,n)<p&&Math.max(l,n)>p&&Math.min(g,r)<m&&Math.max(g,r)>m&&!F.I(g,r)){k.x=p,k.y=m,k=!0;break a}k.x=0,k.y=0,k=!1}k&&(e?c.push(h.x):c.push(h.y)),g=j}t.B(h)}function gn(a){return a=a.De,a===xg||a===yg}function jn(a,b){if(b||gn(a)){var c=a.h;null===c||c.Rl.contains(a)||null===a.oz||c.Rl.add(a,a.oz)}}function Ag(a,b){var c=a.layer;if(null!==c&&c.visible&&!c.rc){var d=c.h;if(null!==d)for(var e=!1,d=d.Yw;d.next();){var f=d.value;if(f.visible)if(f===c)for(var e=!0,g=!1,f=f.zb.n,h=f.length,i=0;h>i;i++){var j=f[i];j instanceof T&&(j===a?g=!0:g&&Fn(a,j,b))}else if(e)for(f=f.zb.n,h=f.length,i=0;h>i;i++)j=f[i],j instanceof T&&Fn(a,j,b)}}}function Fn(a,b,c){if(null!==b&&gn(b)&&null!==b.Ta){var d=b.uj();d.N()&&(a.uj().Tf(d)||c.Tf(d))&&(a.usesSamePort(b)||b.Ye())}}function en(a){var b=a.eg;if(null!==b){var c=a.qg;if(null!==c){var d=a.Bh,e=a.Rh;a:{if(null!==c&&null!==b.qh)for(a=b.qh.k;a.next();){var f=a.value;if(f.Hp===b&&f.At===c&&f.ix===d&&f.jx===e||f.Hp===c&&f.At===b&&f.ix===e&&f.jx===d){a=f;break a}}a=null}for(var g=f=null,h=b.nc.n,i=h.length,j=0;i>j;j++){var k=h[j];(k.eg===b&&k.Bh===d&&k.qg===c&&k.Rh===e||k.eg===c&&k.Bh===e&&k.qg===b&&k.Rh===d)&&(null===g?g=k:(null===f&&(f=new B(T),f.add(g)),f.add(k)))}if(null!==f)for(null===a&&(a=new Om,a.Hp=b,a.ix=d,a.At=c,a.jx=e,Nm(b,a),Nm(c,a)),a.links=f,j=0;j<f.count;j++)if(k=f.n[j],0===k.hf){for(b=1,c=0;c<f.count;c++)Math.abs(f.n[c].hf)===b&&(b++,c=-1);k.xn=a,k.hf=k.aa===a.Hp?b:-b,b=k.h,(null===b||b.lf)&&k.ac()}}}}function dn(a){var b=a.xn;if(null!==b){var c=a.hf;if(a.xn=null,a.hf=0,b.links.remove(a),2>b.links.count)1===b.links.count&&(c=b.links.n[0],c.xn=null,c.hf=0,c.ac()),c=b.Hp,null!==b&&null!==c.qh&&c.qh.remove(b),c=b.At,null!==b&&null!==c.qh&&c.qh.remove(b);else for(c=Math.abs(c),a=0===c%2,b=b.links.k;b.next();){var d=b.value,e=Math.abs(d.hf),f=0===e%2;e>c&&a===f&&(d.hf=0<d.hf?d.hf-2:d.hf+2,d.ac())}}}function Om(){t.Ac(this),this.links=this.jx=this.At=this.ix=this.Hp=null}function Tj(){t.Ac(this),this.group=null,this.nt=!0,this.abort=!1,this.kg=this.jg=1,this.vr=this.ur=-1,this.je=this.ie=8,this.wc=null,this.XG=!1,this.sG=22,this.kF=111}function Hn(a,b,c){return a.jg<=b&&b<=a.ur&&a.kg<=c&&c<=a.vr}function un(a,b,c){return Hn(a,b,c)?(b-=a.jg,b/=a.ie,c-=a.kg,c/=a.je,a.wc[0|b][0|c]):0}function Wj(a,b,c){Hn(a,b,c)&&(b-=a.jg,b/=a.ie,c-=a.kg,c/=a.je,a.wc[0|b][0|c]=0)}function Vj(a){if(null!==a.wc)for(var b=0;b<=a.Go;b++)for(var c=0;c<=a.Ho;c++)a.wc[b][c]>=xn&&(a.wc[b][c]|=vn)}function sn(a,b,c,d,e){if(b>a.ur||b+d<a.jg||c>a.vr||c+e<a.kg)return!0;b=(b-a.jg)/a.ie|0,c=(c-a.kg)/a.je|0,d=Math.max(0,d)/a.ie+1|0;var f=Math.max(0,e)/a.je+1|0;if(0>b&&(d+=b,b=0),0>c&&(f+=c,c=0),0>d||0>f)return!0;for(e=0|Math.min(b+d-1,a.Go),d=0|Math.min(c+f-1,a.Ho);e>=b;b++)for(f=c;d>=f;f++)if(0===a.wc[b][f])return!1;return!0}function In(a,b,c,d,e,f,g,h,i){if(!(f>b||b>g||h>c||c>i)){var j,k;j=0|b,k=0|c;var l=a.wc[j][k];if(l>=xn&&vn>l)for(e?k+=d:j+=d,l+=yn;j>=f&&g>=j&&k>=h&&i>=k&&!(l>=a.wc[j][k]);)a.wc[j][k]=l,l+=yn,e?k+=d:j+=d;if(j=e?k:j,e)if(d>0)for(c+=d;j>c;c+=d)In(a,b,c,1,!e,f,g,h,i),In(a,b,c,-1,!e,f,g,h,i);else for(c+=d;c>j;c+=d)In(a,b,c,1,!e,f,g,h,i),In(a,b,c,-1,!e,f,g,h,i);else if(d>0)for(b+=d;j>b;b+=d)In(a,b,c,1,!e,f,g,h,i),In(a,b,c,-1,!e,f,g,h,i);else for(b+=d;b>j;b+=d)In(a,b,c,1,!e,f,g,h,i),In(a,b,c,-1,!e,f,g,h,i)}}function Jn(a,b,c,d,e,f,g,h,i,j,k){for(var l=0|b,m=0|c,n=a.wc[l][m];0===n&&l>h&&i>l&&m>j&&k>m;)if(g?m+=f:l+=f,n=a.wc[l][m],1>=Math.abs(l-d)&&1>=Math.abs(m-e))return a.abort=!0,0;for(l=0|b,m=0|c,n=a.wc[l][m],b=xn,a.wc[l][m]=b;0===n&&l>h&&i>l&&m>j&&k>m;)g?m+=f:l+=f,n=a.wc[l][m],a.wc[l][m]=b,b+=yn;return g?m:l}function tn(a,b,c,d,e,f){if(null!==a.wc){a.abort=!1;var g=b.x,h=b.y;if(Hn(a,g,h)){var g=g-a.jg,g=g/a.ie,h=h-a.kg,h=h/a.je,i=d.x,j=d.y;if(Hn(a,i,j))if(i-=a.jg,i/=a.ie,j-=a.kg,j/=a.je,1>=Math.abs(g-i)&&1>=Math.abs(h-j))a.abort=!0;else{var k=f.x;b=f.y,d=f.x+f.width;var l=f.y+f.height,k=k-a.jg,k=k/a.ie;b-=a.kg,b/=a.je,d-=a.jg,d/=a.ie,l-=a.kg,l/=a.je,f=Math.max(0,Math.min(a.Go,0|k)),d=Math.min(a.Go,Math.max(0,0|d)),b=Math.max(0,Math.min(a.Ho,0|b));var l=Math.min(a.Ho,Math.max(0,0|l)),g=0|g,h=0|h,i=0|i,j=0|j,k=g,m=h,n=0===c||90===c?1:-1;if((c=90===c||270===c)?m=Jn(a,g,h,i,j,n,c,f,d,b,l):k=Jn(a,g,h,i,j,n,c,f,d,b,l),!a.abort){a:{c=0===e||90===e?1:-1,e=90===e||270===e;for(var n=0|i,o=0|j,p=a.wc[n][o];0===p&&n>f&&d>n&&o>b&&l>o;)if(e?o+=c:n+=c,p=a.wc[n][o],1>=Math.abs(n-g)&&1>=Math.abs(o-h)){a.abort=!0;break a}for(n=0|i,o=0|j,p=a.wc[n][o],a.wc[n][o]=Gn;0===p&&n>f&&d>n&&o>b&&l>o;)e?o+=c:n+=c,p=a.wc[n][o],a.wc[n][o]=Gn}a.abort||(In(a,k,m,1,!1,f,d,b,l),In(a,k,m,-1,!1,f,d,b,l),In(a,k,m,1,!0,f,d,b,l),In(a,k,m,-1,!0,f,d,b,l))}}}}}function on(){t.Ac(this),this.port=this.Fc=null,this.Fg=[],this.Gp=!1}function Kn(a,b,c,d){switch(b=b.offsetY){case t.Sc:return 90;case t.Jc:return 180;case t.bd:return 270;case t.Tc:return 0}switch(b){case t.Sc|t.bd:return c>180?270:90;case t.Jc|t.Tc:return c>90&&270>=c?180:0}switch(a=180*Math.atan2(a.height,a.width)/Math.PI,b){case t.Jc|t.bd:return c>a&&180+a>=c?180:270;case t.bd|t.Tc:return c>180-a&&360-a>=c?270:0;case t.Tc|t.Sc:return c>a&&180+a>=c?90:0;case t.Sc|t.Jc:return c>180-a&&360-a>=c?180:90;case t.Jc|t.bd|t.Tc:return c>90&&180+a>=c?180:c>180+a&&360-a>=c?270:0;case t.bd|t.Tc|t.Sc:return c>180&&360-a>=c?270:c>a&&180>=c?90:0;case t.Tc|t.Sc|t.Jc:return c>a&&180-a>=c?90:c>180-a&&270>=c?180:0;case t.Sc|t.Jc|t.bd:return c>180-a&&180+a>=c?180:c>180+a?270:90}return d&&b!==(t.Jc|t.bd|t.Tc|t.Sc)&&(c-=15,0>c&&(c+=360)),c>a&&180-a>c?90:c>=180-a&&180+a>=c?180:c>180+a&&360-a>c?270:0}function pn(a,b){var c=a.Fg;if(0===c.length){a:if(!a.Gp){c=a.Gp,a.Gp=!0;var d,e=null,f=a.Fc;if(f instanceof S&&!f.Yd){if(!f.oa.N()){a.Gp=c;break a}e=f,d=e.xE()}else d=a.Fc.yE();var g=a.Fg.length=0,h=a.port.pb(Eb,t.K()),i=a.port.pb(Pb,t.K()),f=t.ik(h.x,h.y,0,0);for(f.kj(i),t.B(h),t.B(i),h=t.mc(f.x+f.width/2,f.y+f.height/2),d=d.k;d.next();)if(i=d.value,i.La()){var j=wb,k=i.ud===a.port||i.aa.nl(e),j=k?kn(i,a.port):ln(i,a.port);if(j.rp()&&(k=k?i.fe:i.ud,null!==k)){var l=k.S;if(null!==l){var m,k=i.computeOtherPoint(l,k),l=h.aj(k),j=Kn(f,j,l,i.ic);0===j?(m=t.Tc,l>180&&(l-=360)):m=90===j?t.Sc:180===j?t.Jc:t.bd,(j=a.Fg[g])?(j.link=i,j.angle=l,j.be=m):(j=new Ln(i,l,m),a.Fg[g]=j),j.hx.set(k),g++}}}for(t.B(h),a.Fg.sort(on.prototype.rJ),e=a.Fg.length,h=-1,g=d=0;e>g;g++)j=a.Fg[g],null!==j&&(j.be!==h&&(h=j.be,d=0),j.mp=d,d++);for(h=-1,d=0,g=e-1;g>=0;g--)j=a.Fg[g],null!==j&&(j.be!==h&&(h=j.be,d=j.mp+1),j.Lm=d);g=a.Fg,k=a.port,e=a.Fc.DJ,h=t.K(),d=t.K(),i=t.K(),j=t.K(),k.pb(Eb,h),k.pb(Gb,d),k.pb(Pb,i),k.pb(Lb,j);var n=m=l=k=0;if(e===Mm)for(var o=0;o<g.length;o++){var p=g[o];if(null!==p){var q=p.link.computeThickness();switch(p.be){case t.Sc:m+=q;break;case t.Jc:n+=q;break;case t.bd:k+=q;break;default:case t.Tc:l+=q}}}for(var r,s,u=0,v=0,w=s=0,x=1,o=0;o<g.length;o++)if(p=g[o],null!==p){if(u!=p.be){switch(u=p.be){case t.Sc:r=i,s=j;break;case t.Jc:r=j,s=h;break;case t.bd:r=h,s=d;break;default:case t.Tc:r=d,s=i}switch(v=s.x-r.x,s=s.y-r.y,u){case t.Sc:m>Math.abs(v)?(x=Math.abs(v)/m,m=Math.abs(v)):x=1;break;case t.Jc:n>Math.abs(s)?(x=Math.abs(s)/n,n=Math.abs(s)):x=1;break;case t.bd:k>Math.abs(v)?(x=Math.abs(v)/k,k=Math.abs(v)):x=1;break;default:case t.Tc:l>Math.abs(s)?(x=Math.abs(s)/l,l=Math.abs(s)):x=1}w=0}var y=p.xp;if(e===Mm){switch(q=p.link.computeThickness(),q*=x,y.set(r),u){case t.Sc:y.x=r.x+v/2+m/2-w-q/2;break;case t.Jc:y.y=r.y+s/2+n/2-w-q/2;break;case t.bd:y.x=r.x+v/2-k/2+w+q/2;break;default:case t.Tc:y.y=r.y+s/2-l/2+w+q/2}w+=q}else q=.5,e===Jm&&(q=(p.mp+1)/(p.Lm+1)),y.x=r.x+v*q,y.y=r.y+s*q}for(t.B(h),t.B(d),t.B(i),t.B(j),r=a.Fg,g=0;g<r.length;g++)e=r[g],null!==e&&(e.Aw=a.computeEndSegmentLength(e));a.Gp=c,t.hc(f)}c=a.Fg}for(f=0;f<c.length;f++)if(r=c[f],null!==r&&r.link===b)return r;return null}function Ln(a,b,c){this.link=a,this.angle=b,this.be=c,this.hx=new w,this.Lm=this.mp=0,this.xp=new w,this.Aw=0}function S(a){0===arguments.length?R.call(this,$g):R.call(this,a),this.xr=new ma(C),this.qo=new ma(S),this.Ok=this.yr=this.wr=null,this.Es=!1,this.br=!0,this.Fs=!1,this.Jb=this.ts=null,this.uq=!1,this.vq=!0,this.wq=!1,this.Pd=new be,this.Pd.group=this}function Fm(a,b){if(a.xr.add(b)){b instanceof S&&a.qo.add(b);var c=a.vF;if(null!==c){var d=!0,e=a.h;null!==e&&(d=e.Na,e.Na=!0),c(a,b),null!==e&&(e.Na=d)}a.La()&&a.Yd||b.df(!1)}c=a.Jb,null===c&&(c=a),c.ha()}function Em(a,b){if(a.xr.remove(b)){b instanceof S&&a.qo.remove(b);var c=a.wF;if(null!==c){var d=!0,e=a.h;null!==e&&(d=e.Na,e.Na=!0),c(a,b),null!==e&&(e.Na=d)}}c=a.Jb,null===c&&(c=a),c.ha()}function Mn(a,b){for(var c=a.Rc;c.next();){var d=c.value;if(d.df(!1),d instanceof S){var e=d;e.Yd&&(e.Dx=e.Yd,Mn(e,b))}if(d instanceof R)d.wf(b);else if(d instanceof T)for(d=d.fk;d.next();)d.value.wf(b)}a.Yd=!1}function Nn(a,b,c,d){for(var e=a.Rc;e.next();){var f=e.value;if(f.df(!0),f instanceof S){var g=f;g.Dx&&(g.Dx=!1,Nn(g,b,c,d))}if(f instanceof R)f.wf(b),Nh(c,f,d);else if(f instanceof T)for(f=f.fk;f.next();)f.value.wf(b)}a.Yd=!0}function Ug(){Q.call(this),this.Ne=F.fq,this.cs=new x(NaN,NaN,NaN,NaN)}function be(){0<arguments.length&&t.ad(be),t.Ac(this),this.Wy=this.U=null,this.Xq=this.Zq=!0,this.gr=this.co=!1,this.nq=new w(0,0).freeze(),this.az=!0,this.kz=null,this.$q=!0}function Pn(a,b,c,d,e,f,g,h){for(c=c.k;c.next();){var i=c.value;d&&!i.sp||e&&!e(i)||i.canLayout()&&(f&&i instanceof R?i.bi||(i instanceof S&&null===i.jc?Pn(a,b,i.Rc,!1,e,f,g,h):b.add(i)):g&&i instanceof T?b.add(i):!h||!i.Ld()||i instanceof R||b.add(i))}}function ta(){t.Ac(this),this.Pd=null,this.clear()}function On(a,b){e&&null!==b&&t.l(b,be,ta,"setLayout"),a.Pd=b}function Qn(a,b){if(null===b)return!1;var c=a.vertexes.remove(b);return c&&(a.IA.remove(b.Fc),b.network=null),c}function Rn(a,b){null!==b&&a.edges.remove(b)&&(a.yA.remove(b.link),b.network=null)}function Sn(a){for(var b=t.Db(),c=a.edges.k;c.next();){var d=c.value;null!==d.fromVertex&&null!==d.toVertex||b.push(d)}for(c=b.length,d=0;c>d;d++)a.Zo(b[d]);t.ya(b)}function Tn(a,b,c){if(null!==c&&c.network!==b){Qn(a,c),b.Yk(c);for(var d=c.tc;d.next();){var e=d.value;e.network!==b&&(Rn(a,e),b.Jo(e),Tn(a,b,e.fromVertex))}for(d=c.gc;d.next();)e=d.value,e.network!==b&&(Rn(a,e),b.Jo(e),Tn(a,b,e.toVertex))}}function ua(){t.Ac(this),this.network=null,this.T=new x(0,0,10,10).freeze(),this.O=new w(5,5).freeze(),this.clear()}function va(){t.Ac(this),this.network=null,this.clear()}function ck(){0<arguments.length&&t.ad(ck),be.call(this),this.st=!0,this.Hs=this.Is=NaN,this.pj=new fa(NaN,NaN).freeze(),this.Nh=new fa(10,10).freeze(),this.ue=ll,this.cd=jl,this.Mh=fl,this.th=Vn}function nl(){0<arguments.length&&t.ad(nl),be.call(this),this.Ny=this.Nn=this.Ad=0,this.Jq=360,this.My=El,this.Bk=0,this.eC=El,this.uu=this.tg=this.wD=0,this.Xv=new Wn,this.xu=this.mm=0,this.sH=600,this.Rr=NaN,this.pq=1,this.ss=0,this.us=360,this.cd=El,this.sa=vl,this.Mh=sl,this.th=Un,this.Nh=6,this.Ir=Hl}function fo(a,b,c,d,e){var f=a.Jq,g=a.Ad;a=a.tg,d=d*Math.PI/180,c=c*Math.PI/180;for(var h=b.length,i=0;h>i;i++){var j=d+(e===vl?i*c/(f>=360?h:h-1):-(i*c)/h),k=b.wa(i),l=g*Math.tan(j)/a,l=Math.sqrt((g*g+a*a*l*l)/(1+l*l));k.Da=l*Math.cos(j),k.Oa=l*Math.sin(j),k.actualAngle=180*j/Math.PI}}function eo(a,b,c,d){var e=a.Ad,f=a.tg,g=a.Bk;c=c*Math.PI/180;for(var h=b.length,i=0;h>i;i++){var j=b.wa(i),k=b.wa(i===h-1?0:i+1),l=f*Math.sin(c);j.Da=e*Math.cos(c),j.Oa=l,j.actualAngle=180*c/Math.PI,isNaN(j.diameter)&&Zn(j,0),isNaN(k.diameter)&&Zn(k,0),j=bo(a,e,f,d===vl?c:-c,(j.diameter+k.diameter)/2+g),c+=d===vl?j:-j}}function co(a,b,c,d){var e=a.Ad,f=a.tg,g=a.uu;c=c*Math.PI/180;for(var h=b.length,i=0;h>i;i++){var j=b.wa(i);j.Da=e*Math.cos(c),j.Oa=f*Math.sin(c),j.actualAngle=180*c/Math.PI,j=bo(a,e,f,d===vl?c:-c,g),c+=d===vl?j:-j}}function ho(a,b,c,d,e){var f=a.xu,f=a.Jq;if(a.mm=0,a.Xv=new Wn,360>c){for(f=d+(e===vl?f:-f);0>f;)f+=360;f%=360,f>180&&(f-=360),f*=Math.PI/180,a.xu=f,io(a,b,c,d,e)}else jo(a,b,c,d,e);a.Xv.commit(b)}function jo(a,b,c,d,e){var f=a.Ad,g=a.Bk,h=a.Nn,i=f*Math.cos(d*Math.PI/180),j=a.tg*Math.sin(d*Math.PI/180),k=b.Ie();if(3===k.length)k[0].Da=f,k[0].Oa=0,k[1].Da=k[0].Da-k[0].width/2-k[1].width/2-g,k[1].y=k[0].y,k[2].Da=(k[0].Da+k[1].Da)/2,k[2].y=k[0].y-k[2].height-g;else if(4===k.length)k[0].Da=f,k[0].Oa=0,k[2].Da=-k[0].Da,k[2].Oa=k[0].Oa,k[1].Da=0,k[1].y=Math.min(k[0].y,k[2].y)-k[1].height-g,k[3].Da=0,k[3].y=Math.max(k[0].y+k[0].height+g,k[2].y+k[2].height+g);else{for(f=0;f<k.length&&(k[f].Da=i,k[f].Oa=j,!(f>=k.length-1));f++){var l=lo(a,i,j,k,f,e);l[0]||(l=mo(a,i,j,k,f,e)),i=l[1],j=l[2]}if(a.mm++,!(23<a.mm)){var i=k[0].Da,j=k[0].Oa,f=k[k.length-1].Da,l=k[k.length-1].Oa,m=Math.abs(i-f)-((k[0].width+k[k.length-1].width)/2+g),n=Math.abs(j-l)-((k[0].height+k[k.length-1].height)/2+g),g=0;if(1>Math.abs(n)?Math.abs(i-f)<(k[0].width+k[k.length-1].width)/2&&(g=0):g=n>0?n:1>Math.abs(m)?0:m,m=!1,m=Math.abs(f)>Math.abs(l)?f>0!=j>l:l>0!=f>i,(m=e===vl?m:!m)&&(g=-Math.abs(g),g=Math.min(g,-k[k.length-1].width),g=Math.min(g,-k[k.length-1].height)),i=a.Xv,g>0&&0>i.jp||Math.abs(g)<Math.abs(i.jp)&&!(0>g&&0<i.jp))for(i.jp=g,i.qn=[],i.$p=[],j=0;j<k.length;j++)i.qn[j]=k[j].Pb.x,i.$p[j]=k[j].Pb.y;1<Math.abs(g)&&(a.Ad=8>a.mm?a.Ad-g/(2*Math.PI):5>k.length&&g>10?a.Ad/2:a.Ad-(g>0?1.7:-2.3),a.tg=a.Ad*h,jo(a,b,c,d,e))}}}function io(a,b,c,d,e){for(var f=a.Ad,g=a.tg,h=a.Nn,i=f*Math.cos(d*Math.PI/180),j=g*Math.sin(d*Math.PI/180),k=b.Ie(),l=0;l<k.length&&(k[l].Da=i,k[l].Oa=j,!(l>=k.length-1));l++){var m=lo(a,i,j,k,l,e);m[0]||(m=mo(a,i,j,k,l,e)),i=m[1],j=m[2]}if(a.mm++,!(23<a.mm)){if(i=Math.atan2(j,i),i=e===vl?a.xu-i:i-a.xu,i=Math.abs(i)<Math.abs(i-2*Math.PI)?i:i-2*Math.PI,f=i*(f+g)/2,g=a.Xv,Math.abs(f)<Math.abs(g.jp))for(g.jp=f,g.qn=[],g.$p=[],i=0;i<k.length;i++)g.qn[i]=k[i].Pb.x,g.$p[i]=k[i].Pb.y;1<Math.abs(f)&&(a.Ad=8>a.mm?a.Ad-f/(2*Math.PI):a.Ad-(f>0?1.7:-2.3),a.tg=a.Ad*h,io(a,b,c,d,e))}}function lo(a,b,c,d,e,f){var g=a.Ad,h=a.tg,i=0,j=0;a=(d[e].width+d[e+1].width)/2+a.Bk;var k=!1;if(c>=0!=(f===vl)){if(i=b+a,i>g){if(i=b-a,-g>i)return b=[!1],b[1]=i,b[2]=j,b;k=!0}}else if(i=b-a,-g>i){if(i=b+a,i>g)return b=[!1],b[1]=i,b[2]=j,b;k=!0}return j=Math.sqrt(1-Math.min(1,i*i/(g*g)))*h,0>c!==k&&(j=-j),b=Math.abs(c-j)>(d[e].height+d[e+1].height)/2?[!1]:[!0],b[1]=i,b[2]=j,b}function mo(a,b,c,d,e,f){var g=a.Ad,h=a.tg,i=0,j=0;a=(d[e].height+d[e+1].height)/2+a.Bk;var k=!1;if(b>=0!=(f===vl)){if(j=c-a,-h>j){if(j=c+a,j>h)return b=[!1],b[1]=i,b[2]=j,b;k=!0}}else if(j=c+a,j>h){if(j=c-a,-h>j)return b=[!1],b[1]=i,b[2]=j,b;k=!0}return i=Math.sqrt(1-Math.min(1,j*j/(h*h)))*g,0>b!==k&&(i=-i),b=Math.abs(b-i)>(d[e].width+d[e+1].width)/2?[!1]:[!0],b[1]=i,b[2]=j,b}function Wn(){this.jp=-(1/0),this.$p=this.qn=null}function ao(a,b,c,d,e){var f=a.sH;if(.001>Math.abs(a.Nn-1))return void 0!==d&&void 0!==e?e*b:2*Math.PI*b;a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c;var g,h=0;g=void 0!==d&&void 0!==e?e/(f+1):Math.PI/(2*(f+1));for(var i=0;f>=i;i++)var j=Math.sin(void 0!==d&&void 0!==e?d+i*e/f:i*Math.PI/(2*f)),h=h+Math.sqrt(1-a*a*j*j)*g;return void 0!==d&&void 0!==e?(b>c?b:c)*h:4*(b>c?b:c)*h}function $n(a,b,c,d,e){return a=void 0!==d&&void 0!==e?ao(a,1,c,d,e):ao(a,1,c),b/a}function bo(a,b,c,d,e){if(.001>Math.abs(a.Nn-1))return e/b;var f=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,g=0;a=2*Math.PI/(700*a.network.vertexes.count),b>c&&(d+=Math.PI/2);for(var h=0;;h++){var i=Math.sin(d+h*a),g=g+(b>c?b:c)*Math.sqrt(1-f*f*i*i)*a;if(g>=e)return h*a}return 0}function Xn(){ta.call(this)}function Yn(){ua.call(this),this.actualAngle=this.diameter=NaN}function Zn(a,b){var c=a.network;if(null===c)return NaN;if(c=c.jc,null===c)return NaN;if(c.Qe===Fl)if(c.Bt===Gl)a.diameter=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(0===c)return a.width;if(0===d)return a.height;a.diameter=Math.min(a.height/c,a.width/d)}else a.diameter=c.Bt===Gl?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.diameter}function no(){va.call(this)}function oo(){0<arguments.length&&t.ad(oo),be.call(this),this.sg=null,this.ir=0,this.bg=new fa(100,100).freeze(),this.oq=!1,this.Lh=!0,this.sh=!1,this.oo=100,this.Lq=1,this.Fh=1e3,this.In=.05,this.Hn=50,this.En=150,this.Gn=0,this.Fq=10,this.Eq=5}function to(a,b,c){return e&&(t.q(b,oo,"computeClusterLayoutIterations:level"),t.q(c,oo,"computeClusterLayoutIterations:maxiter")),Math.max(Math.min(a.network.vertexes.count,c*(b+1)/11),10)}function qo(a,b,c){if(e&&(t.q(b,oo,"layoutClusters:level"),t.q(c,oo,"layoutClusters:maxiter")),uo(a,b)){var d=a.Fh;a.Fh*=1+1/(b+1);var f=vo(a,b),g=Math.max(0,to(a,b,c));for(a.ex+=g,qo(a,b+1,c),so(a,g),wo(a,f,b),c=a.sg,null===c?c=new B(xo):c.clear(),c.Oe(f.vertexes),c.sort(function(a,b){return null===a||null===b||a===b?0:b.Xf-a.Xf}),f=c.k;f.next();)yo(a,f.value,b);a.Fh=d}}function uo(a,b){if(e&&t.q(b,oo,"hasClusters:level"),b>10||3>a.network.vertexes.count)return!1;null===a.sg?a.sg=new B(xo):a.sg.clear(),a.sg.Oe(a.network.vertexes);var c=a.sg;c.sort(function(a,b){return null===a||null===b||a===b?0:b.Xf-a.Xf});for(var d=c.count-1;d>=0&&1>=c.n[d].Xf;)d--;return 1<c.count-d}function vo(a,b){e&&t.q(b,oo,"pushSubNetwork:level");for(var c=a.network,d=new po,f=a.sg.k;f.next();){var g=f.value;if(!(1<g.Xf))break;d.Yk(g);var h={vB:g.Xf,xB:g.width,uB:g.height,$G:g.O.x,aH:g.O.y};null===g.kh&&(g.kh=new B),g.kh.add(h),g.XA=g.kh.count-1}for(var i=c.edges.k;i.next();){var j=i.value;if(j.fromVertex.network===d&&j.toVertex.network===d)d.Jo(j);else if(j.fromVertex.network===d){var k=j.fromVertex.Jm;null===k&&(k=new B(xo),j.fromVertex.Jm=k),k.add(j.toVertex),j.fromVertex.Xf--,j.fromVertex.gk+=j.toVertex.gk}else j.toVertex.network===d&&(k=j.toVertex.Jm,null===k&&(k=new B(xo),j.toVertex.Jm=k),k.add(j.fromVertex),j.toVertex.Xf--,j.toVertex.gk+=j.fromVertex.gk)}for(i=d.edges.k;i.next();)j=i.value,j.length*=Math.max(1,F.sqrt((j.fromVertex.gk+j.toVertex.gk)/(4*b+1)));for(f=d.vertexes.k;f.next();)if(g=f.value,k=g.Jm,null!==k&&0<k.count&&(h=g.kh.n[g.kh.count-1],h=h.vB-g.Xf,!(0>=h))){for(var l=0,m=0,n=k.count-h;n<k.count;n++){for(var o=k.n[n],j=null,i=o.edges.k;i.next();){var p=i.value;if(p.II(o)===g){j=p;break}}null!==j&&(m+=j.length,l+=o.width*o.height)}k=g.Da,i=g.Oa,j=g.width,n=g.height,o=g.O,p=j*n,1>p&&(p=1),l=F.sqrt((l+p+m*m*4/(h*h))/p),h=(l-1)*j/2,l=(l-1)*n/2,g.Pb=new x(k-o.x-h,i-o.y-l,j+2*h,n+2*l),g.focus=new w(o.x+h,o.y+l)}return a.network=d,c}function wo(a,b,c){for(e&&(t.l(b,po,oo,"popNetwork:oldnet"),t.q(c,oo,"popNetwork:level")),c=a.network.vertexes.k;c.next();){var d=c.value;if(d.network=b,null!==d.kh){var f=d.kh.n[d.XA];d.Xf=f.vB;var g=f.$G,h=f.aH;d.Pb=new x(d.Da-g,d.Oa-h,f.xB,f.uB),d.focus=new w(g,h),d.XA--}}for(c=a.network.edges.k;c.next();)c.value.network=b;a.network=b}function yo(a,b,c){e&&(t.l(b,xo,oo,"surroundNode:oldnet"),t.q(c,oo,"surroundNode:level"));var d=b.Jm;if(null!==d&&0!==d.count){c=b.Da;var f=b.Oa,g=b.width,h=b.height;null!==b.kh&&0<b.kh.count&&(h=b.kh.n[0],g=h.xB,h=h.uB);for(var g=F.sqrt(g*g+h*h)/2,i=!1,j=h=0,k=0,l=b.vertexes.k;l.next();){var m=l.value;1>=m.Xf?j++:(i=!0,k++,h+=Math.atan2(b.Oa-m.Oa,b.Da-m.Da))}if(0!==j)for(k>0&&(h/=k),k=b=0,b=i?2*Math.PI/(j+1):2*Math.PI/j,0===j%2&&(k=b/2),1<d.count&&d.sort(function(a,b){return null===a||null===b||a===b?0:b.width*b.height-a.width*a.height}),i=0===j%2?0:1,l=d.k;l.next();)if(m=l.value,!(1<m.Xf||a.isFixed(m))){for(d=null,j=m.edges.k;j.next();){d=j.value;break}var j=m.width,n=m.height,j=F.sqrt(j*j+n*n)/2,d=g+d.length+j,j=h+(b*(i/2>>1)+k)*(0===i%2?1:-1);m.Da=c+d*Math.cos(j),m.Oa=f+d*Math.sin(j),i++}}}function ro(a,b,c,d,e,f,g){var h=9e19,i=-1,j=0;a:for(;b>j;j++){var k=a[j],l=k.x-c,m=k.y-d,l=l*l+m*m;if(h>l){for(m=j-1;m>=0;m--)if(a[m].y>k.y&&a[m].x-k.x<e+g.width)continue a;for(m=j+1;b>m;m++)if(a[m].x>k.x&&a[m].y-k.y<f+g.height)continue a;i=j,h=l}}return i}function zo(a,b){e&&(t.l(a,xo,oo,"getNodeDistance:vertexA"),t.l(b,xo,oo,"getNodeDistance:vertexB"));var c=a.T,d=c.x,f=c.y,g=c.width,c=c.height,h=b.T,i=h.x,j=h.y,k=h.width,h=h.height;return i>d+g?f>j+h?(d=d+g-i,f=f-j-h,F.sqrt(d*d+f*f)):j>f+c?(d=d+g-i,f=f+c-j,F.sqrt(d*d+f*f)):i-(d+g):d>i+k?f>j+h?(d=d-i-k,f=f-j-h,F.sqrt(d*d+f*f)):j>f+c?(d=d-i-k,f=f+c-j,F.sqrt(d*d+f*f)):d-(i+k):f>j+h?f-(j+h):j>f+c?j-(f+c):.1}function so(a,b){e&&t.q(b,oo,"performIterations:num"),a.sg=null;for(var c=a.ir+b;a.ir<c&&(a.ir++,Ao(a)););a.sg=null}function Ao(a){null===a.sg&&(a.sg=new B(xo),a.sg.Oe(a.network.vertexes));var b=a.sg.n;if(0>=b.length)return!1;var c=b[0];c.forceX=0,c.forceY=0;for(var d=c.Da,e=d,f=c.Oa,g=f,c=1;c<b.length;c++){var h=b[c];h.forceX=0,h.forceY=0;var i=h.Da,h=h.Oa,d=Math.min(d,i),e=Math.max(e,i),f=Math.min(f,h),g=Math.max(g,h)}(f=e-d>g-f)?b.sort(function(a,b){return null===a||null===b||a===b?0:a.Da-b.Da}):b.sort(function(a,b){return null===a||null===b||a===b?0:a.Oa-b.Oa});for(var g=a.Fh,j=0,k=0,l=0,c=0;c<b.length;c++){var h=b[c],i=h.T,m=h.O,d=i.x+m.x,i=i.y+m.y,k=h.charge*a.electricalFieldX(d,i),l=h.charge*a.electricalFieldY(d,i),k=k+h.mass*a.gravitationalFieldX(d,i),l=l+h.mass*a.gravitationalFieldY(d,i);for(h.forceX+=k,h.forceY+=l,m=c+1;m<b.length;m++)if(e=b[m],e!==h){var k=e.T,n=e.O,l=k.x+n.x,n=k.y+n.y;if(d-l>g||l-d>g){if(f)break}else if(i-n>g||n-i>g){if(!f)break}else{var o=zo(h,e);1>o?(d>l?(k=Math.abs(e.T.right-h.T.x),k=(1+k)*Math.random()):l>d?(k=Math.abs(e.T.x-h.T.right),k=-(1+k)*Math.random()):(k=Math.max(e.width,h.width),k=(1+k)*Math.random()-k/2),i>n?(l=Math.abs(e.T.bottom-h.T.y),l=(1+l)*Math.random()):l>d?(l=Math.abs(e.T.y-h.T.bottom),l=-(1+l)*Math.random()):(l=Math.max(e.height,h.height),l=(1+l)*Math.random()-l/2)):(j=-(h.charge*e.charge)/(o*o),k=(l-d)/o*j,l=(n-i)/o*j),h.forceX+=k,h.forceY+=l,e.forceX-=k,e.forceY-=l}}}for(c=a.network.edges.k;c.next();)f=c.value,h=f.fromVertex,e=f.toVertex,i=h.T,m=h.O,d=i.x+m.x,i=i.y+m.y,k=e.T,n=e.O,l=k.x+n.x,n=k.y+n.y,o=zo(h,e),1>o?(k=(d>l?1:-1)*(1+(e.width>h.width)?e.width:h.width)*Math.random(),l=(i>n?1:-1)*(1+(e.height>h.height)?e.height:h.height)*Math.random()):(j=f.stiffness*(o-f.length),k=(l-d)/o*j,l=(n-i)/o*j),h.forceX+=k,h.forceY+=l,e.forceX-=k,e.forceY-=l;for(c=0,d=Math.max(a.Fh/20,50),e=0;e<b.length;e++)h=b[e],a.isFixed(h)?a.moveFixedVertex(h):(f=h.forceX,g=h.forceY,-d>f?f=-d:f>d&&(f=d),-d>g?g=-d:g>d&&(g=d),h.Da+=f,h.Oa+=g,c=Math.max(c,f*f+g*g));return c>a.bA*a.bA}function po(){ta.call(this)}function xo(){ua.call(this),this.isFixed=!1,this.mass=this.charge=NaN,this.gk=this.Xf=this.forceY=this.forceX=0,this.kh=this.Jm=null,this.XA=0}function Bo(){va.call(this),this.length=this.stiffness=NaN}function Y(){0<arguments.length&&t.ad(Y),be.call(this),this.zd=this.dm=25,this.sa=0,this.Dn=Co,this.mo=Do,this.Yn=Eo,this.am=4,this.vn=Fo,this.Hi=Go,this.Lh=!0,this.yj=4,this.Ib=this.cv=this.kb=-1,this.Kf=this.zr=0,this.Ob=this.Jf=this.ig=this.Wg=this.Od=null,this.Fr=0,this.lv=this.im=null,this.lg=0,this.Gr=null,this.Zg=[],this.Zg.length=100}function $o(a){var b=a.fromVertex.rd;return a=a.toVertex.rd,null===b&&null===a?8:null===b||null===a?4:1}function ap(a){null===a.im&&(a.im=[]);for(var b,c=0,d=a.network.vertexes.k;d.next();)b=d.value,a.im[c]=b.layer,c++,a.im[c]=b.column,c++,a.im[c]=b.index,c++;return a.im}function bp(a,b){for(var c,d=0,e=a.network.vertexes.k;e.next();)c=e.value,c.layer=b[d],d++,c.column=b[d],d++,c.index=b[d],d++}function cp(a,b,c){e&&(t.q(b,Y,"crossingMatrix:unfixedLayer"),t.q(c,Y,"crossingMatrix:direction"));var d=Yo(a,b),f=a.Od[b];a.lv||(a.lv=[]);for(var g,h=a.lv,i=0;f>i;i++){g=0;var j,k,l=d[i],m=l.near;if(null!==m&&m.layer===l.layer)if(l=m.index,l>i)for(k=i+1;l>k;k++)j=d[k],j.near===m&&j.Em===m.Em||g++;else for(k=i-1;k>l;k--)j=d[k],j.near===m&&j.Em===m.Em||g++;var n,o,p,q,r,s;if(c>=0)for(l=d[i].ff,m=0;m<l.count;m++)if(n=l.n[m],n.valid&&n.fromVertex.layer!==b)for(j=n.fromVertex.index,k=n.portToPos,n=n.portFromPos,o=m+1;o<l.count;o++)p=l.n[o],p.valid&&p.fromVertex.layer!==b&&(q=p.fromVertex.index,r=p.portToPos,p=p.portFromPos,r>k&&(j>q||j===q&&n>p)&&g++,k>r&&(q>j||q===j&&p>n)&&g++);if(0>=c)for(l=d[i].Te,m=0;m<l.count;m++)if(n=l.n[m],n.valid&&n.toVertex.layer!==b)for(j=n.toVertex.index,k=n.portToPos,n=n.portFromPos,o=m+1;o<l.count;o++)p=l.n[o],p.valid&&p.toVertex.layer!==b&&(q=p.toVertex.index,r=p.portToPos,p=p.portFromPos,p>n&&(j>q||j===q&&k>r)&&g++,n>p&&(q>j||q===j&&r>k)&&g++);for(h[i*f+i]=g,l=i+1;f>l;l++){var u=0,v=0;if(c>=0)for(g=d[i].ff,s=d[l].ff,m=0;m<g.count;m++)if(n=g.n[m],n.valid&&n.fromVertex.layer!==b)for(j=n.fromVertex.index,n=n.portFromPos,o=0;o<s.count;o++)p=s.n[o],p.valid&&p.fromVertex.layer!==b&&(q=p.fromVertex.index,p=p.portFromPos,(q>j||j===q&&p>n)&&v++,(j>q||q===j&&n>p)&&u++);if(0>=c)for(g=d[i].Te,s=d[l].Te,m=0;m<g.count;m++)if(n=g.n[m],n.valid&&n.toVertex.layer!==b)for(j=n.toVertex.index,k=n.portToPos,o=0;o<s.count;o++)p=s.n[o],p.valid&&p.toVertex.layer!==b&&(q=p.toVertex.index,r=p.portToPos,(q>j||j===q&&r>k)&&v++,(j>q||q===j&&k>r)&&u++);h[i*f+l]=u,h[l*f+i]=v}}return Zo(a,b,d),h}function dp(a){for(var b=0,c=0;c<=a.kb;c++){for(var d=a,e=c,f=Yo(d,e),g=d.Od[e],h=0,i=void 0,i=0;g>i;i++){var j,k,l,m=f[i].Te;if("undefined"!=typeof m)for(var n=0;n<m.count;n++)j=m.n[n],j.valid&&j.toVertex.layer!==e&&(k=j.fromVertex.column+j.portFromColOffset,l=j.toVertex.column+j.portToColOffset,h+=(Math.abs(k-l)+1)*$o(j))}Zo(d,e,f),b+=h}return b}function ep(a,b,c){e&&(t.q(b,Y,"barycenters:unfixedLayer"),t.q(c,Y,"barycenters:direction"));var d,f=Yo(a,b),g=a.Od[b],h=[];for(d=0;g>d;d++){var i=f[d],j=null;0>=c&&(j=i.ff);var k=null;c>=0&&(k=i.Te);var l=0,m=0,n=i.near;if(null!==n&&n.layer===i.layer&&(l+=n.column-1,m++),null!==j)for(n=0;n<j.count;n++){var i=j.n[n],o=i.fromVertex;i.valid&&!i.rev&&o.layer!==b&&(l+=o.column+i.portFromColOffset,m++)}if(null!==k)for(j=0;j<k.count;j++)i=k.n[j],n=i.toVertex,i.valid&&!i.rev&&n.layer!==b&&(l+=n.column+i.portToColOffset,m++);h[d]=0===m?-1:l/m}return Zo(a,b,f),h}function fp(a,b,c){e&&(t.q(b,Y,"medians:unfixedLayer"),t.q(c,Y,"medians:direction"));for(var d=Yo(a,b),f=a.Od[b],g=[],h=0;f>h;h++){var i=d[h],j=null;0>=c&&(j=i.ff);var k=null;c>=0&&(k=i.Te);var l=0,m=[],n=i.near;if(null!==n&&n.layer===i.layer&&(m[l]=n.column-1,l++),null!==j)for(n=0;n<j.count;n++){var i=j.n[n],o=i.fromVertex;i.valid&&!i.rev&&o.layer!==b&&(m[l]=o.column+i.portFromColOffset,l++)}if(null!==k)for(j=0;j<k.count;j++)i=k.n[j],n=i.toVertex,i.valid&&!i.rev&&n.layer!==b&&(m[l]=n.column+i.portToColOffset,l++);0===l?g[h]=-1:(m.sort(function(a,b){return a-b}),k=l>>1,g[h]=1&l?m[k]:m[k-1]+m[k]>>1)}return Zo(a,b,d),g}function gp(a,b,c,d,e,f){if(b.component===d){b.component=c;var g,h;if(e)for(var i=b.gc;i.next();){var j=i.value.toVertex;g=b.layer-j.layer,h=a.linkMinLength(i.value),g===h&&gp(a,j,c,d,e,f)}if(f)for(i=b.tc;i.next();)j=i.value.fromVertex,g=j.layer-b.layer,h=a.linkMinLength(i.value),g===h&&gp(a,j,c,d,e,f)}}function hp(a,b,c,d,e,f){if(b.component===d){if(b.component=c,e)for(var g,h=b.gc;h.next();)g=h.value.toVertex,hp(a,g,c,d,e,f);if(f)for(b=b.tc;b.next();)h=b.value.fromVertex,hp(a,h,c,d,e,f)}}function So(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid)return b}return null}function To(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.gc;d.next();)if(d.value.toVertex.valid){c=!1;break}if(c)return b}}return null}function Uo(a){for(a=a.vertexes.k;a.next();){var b=a.value;if(b.valid){for(var c=!0,d=b.tc;d.next();)if(d.value.fromVertex.valid){
c=!1;break}if(c)return b}}return null}function Vo(a,b){b.$o=a.Fr,a.Fr++;for(var c=b.gc;c.next();){var d=c.value,e=d.toVertex;-1===e.$o&&(d.forest=!0,Vo(a,e))}b.finish=a.Fr,a.Fr++}function jp(a){for(var b=a.network.vertexes.k;b.next();){var c=np(a,b.value);a.kb=Math.max(c,a.kb)}}function np(a,b){var c=0;if(-1===b.layer){for(var d=b.gc;d.next();)var e=d.value,f=a.linkMinLength(e),c=Math.max(c,np(a,e.toVertex)+f);b.layer=c}else c=b.layer;return c}function lp(a,b){var c=0;if(-1===b.layer){for(var d,e,f=b.tc;f.next();)e=f.value,d=a.linkMinLength(e),c=Math.max(c,lp(a,e.fromVertex)+d);b.layer=c}else c=b.layer;return c}function mp(a,b){if(!b.valid){b.valid=!0;for(var c=b.gc;c.next();)mp(a,c.value.toVertex);for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(var d=b.ff.n,e=d.length,f=0;e>f;f++){var g=d[f],h=a.linkMinLength(g);g.fromVertex.layer-g.toVertex.layer>h&&gp(a,g.fromVertex,0,-1,!0,!1)}for(gp(a,b,1,-1,!0,!0);0!==b.component;){for(var h=0,d=1/0,i=0,j=null,k=a.network.vertexes.k;k.next();){var l=k.value;if(1===l.component){for(var m=0,n=!1,o=l.ff.n,e=o.length,f=0;e>f;f++){var g=o[f],p=g.fromVertex,m=m+1;1!==p.component&&(h+=1,p=p.layer-l.layer,g=a.linkMinLength(g),d=Math.min(d,p-g))}for(g=l.Te.n,e=g.length,f=0;e>f;f++)o=g[f].toVertex,m-=1,1!==o.component?h-=1:n=!0;(null===j||i>m)&&!n&&(j=l,i=m)}}if(h>0){for(c.reset();c.next();)e=c.value,1===e.component&&(e.layer+=d);b.component=0}else j.component=0}for(c=a.network.vertexes.k;c.next();)c.value.component=-1;for(gp(a,b,1,-1,!0,!1);0!==b.component;){for(f=0,e=1/0,d=0,h=null,i=a.network.vertexes.k;i.next();)if(j=i.value,1===j.component){for(k=0,l=!1,g=j.ff.n,m=g.length,n=0;m>n;n++)o=g[n].fromVertex,k+=1,1!==o.component?f+=1:l=!0;for(g=j.Te.n,m=g.length,n=0;m>n;n++)o=g[n],p=o.toVertex,k-=1,1!==p.component&&(f-=1,p=j.layer-p.layer,o=a.linkMinLength(o),e=Math.min(e,p-o));(null===h||k>d)&&!l&&(h=j,d=k)}if(0>f){for(c.reset();c.next();)f=c.value,1===f.component&&(f.layer-=e);b.component=0}else h.component=0}}}function Xo(a,b,c){return 90===a.sa?c&&!b.rev||!c&&b.rev?270:90:180===a.sa?c&&!b.rev||!c&&b.rev?0:180:270===a.sa?c&&!b.rev||!c&&b.rev?90:270:c&&!b.rev||!c&&b.rev?180:0}function pp(a,b){var c=b.layer;b.index=a.Od[c],a.Od[c]++;for(var d,c=b.Te.Ie(),e=!0;e;)for(e=!1,d=0;d<c.length-1;d++){var f=c[d],g=c[d+1];f.portFromColOffset>g.portFromColOffset&&(e=!0,c[d]=g,c[d+1]=f)}for(d=0;d<c.length;d++)e=c[d],e.valid&&(e=e.toVertex,-1===e.index&&pp(a,e))}function rp(a,b){var c=b.layer;b.index=a.Od[c],a.Od[c]++;for(var d,c=b.ff.Ie(),e=!0;e;)for(e=!1,d=0;d<c.length-1;d++){var f=c[d],g=c[d+1];f.portToColOffset>g.portToColOffset&&(e=!0,c[d]=g,c[d+1]=f)}for(d=0;d<c.length;d++)e=c[d],e.valid&&(e=e.fromVertex,-1===e.index&&rp(a,e))}function sp(a,b,c){e&&(t.q(b,Y,"medianBarycenterCrossingReduction:unfixedLayer"),t.q(c,Y,"medianBarycenterCrossingReduction:direction"));var d=Yo(a,b),f=a.Od[b],g=fp(a,b,c),h=ep(a,b,c);for(c=0;f>c;c++)-1===h[c]&&(h[c]=d[c].column),-1===g[c]&&(g[c]=d[c].column);for(var i,j=!0;j;)for(j=!1,c=0;f-1>c;c++)(g[c+1]<g[c]||g[c+1]===g[c]&&h[c+1]<h[c])&&(j=!0,i=g[c],g[c]=g[c+1],g[c+1]=i,i=h[c],h[c]=h[c+1],h[c+1]=i,i=d[c],d[c]=d[c+1],d[c+1]=i);for(c=g=0;f>c;c++)i=d[c],i.index=c,g+=a.nodeMinColumnSpace(i,!0),i.column=g,g+=1,g+=a.nodeMinColumnSpace(i,!1);Zo(a,b,d)}function tp(a,b,c){var d=Yo(a,b),e=a.Od[b];c=cp(a,b,c);var f,g;for(g=[],f=0;e>f;f++)g[f]=-1;var h;for(h=[],f=0;e>f;f++)h[f]=-1;for(var i=!1,j=!0;j;)for(j=!1,f=0;e-1>f;f++){var k=c[d[f].index*e+d[f+1].index],l=c[d[f+1].index*e+d[f].index],m=0,n=0,o=d[f].column,p=d[f+1].column,q=a.nodeMinColumnSpace(d[f],!0),r=a.nodeMinColumnSpace(d[f],!1),s=a.nodeMinColumnSpace(d[f+1],!0),t=a.nodeMinColumnSpace(d[f+1],!1),q=o-q+s,r=p-r+t,u=d[f].tc.k;for(u.reset();u.next();)if(t=u.value,t.valid&&t.fromVertex.layer===b){for(t=t.fromVertex,s=0;d[s]!==t;)s++;f>s&&(m+=2*(f-s),n+=2*(f+1-s)),s===f+1&&(m+=1),s>f+1&&(m+=4*(s-f),n+=4*(s-(f+1)))}for(u=d[f].gc.k,u.reset();u.next();)if(t=u.value,t.valid&&t.toVertex.layer===b){for(t=t.toVertex,s=0;d[s]!==t;)s++;s===f+1&&(n+=1)}for(u=d[f+1].tc.k,u.reset();u.next();)if(t=u.value,t.valid&&t.fromVertex.layer===b){for(t=t.fromVertex,s=0;d[s]!==t;)s++;f>s&&(m+=2*(f+1-s),n+=2*(f-s)),s===f&&(n+=1),s>f+1&&(m+=4*(s-(f+1)),n+=4*(s-f))}for(u=d[f+1].gc.k,u.reset();u.next();)if(t=u.value,t.valid&&t.toVertex.layer===b){for(t=t.toVertex,s=0;d[s]!==t;)s++;s===f&&(m+=1)}var s=t=0,u=g[d[f].index],v=h[d[f].index],w=g[d[f+1].index],x=h[d[f+1].index];-1!==u&&(t+=Math.abs(u-o),s+=Math.abs(u-r)),-1!==v&&(t+=Math.abs(v-o),s+=Math.abs(v-r)),-1!==w&&(t+=Math.abs(w-p),s+=Math.abs(w-q)),-1!==x&&(t+=Math.abs(x-p),s+=Math.abs(x-q)),(m-.5>n||n===m&&k-.5>l||n===m&&l===k&&t-.5>s)&&(j=i=!0,d[f].column=r,d[f+1].column=q,k=d[f],d[f]=d[f+1],d[f+1]=k)}for(f=0;e>f;f++)d[f].index=f;return Zo(a,b,d),i}function yp(a,b,c){e&&(t.q(b,Y,"bendStraighten:unfixedLayer"),t.q(c,Y,"bendStraighten:direction"));for(var d=!1;Cp(a,b,c);)d=!0;return d}function Cp(a,b,c){e&&(t.q(b,Y,"shiftbendStraighten:unfixedLayer"),t.q(c,Y,"shiftbendStraighten:direction"));var d,f=Yo(a,b),g=a.Od[b],h=ep(a,b,-1);if(c>0)for(d=0;g>d;d++)h[d]=-1;var i=ep(a,b,1);if(0>c)for(d=0;g>d;d++)i[d]=-1;for(var j=!1,k=!0;k;)for(k=!1,d=0;g>d;d++){var l,m,n,o,p=f[d].column,q=a.nodeMinColumnSpace(f[d],!0),r=a.nodeMinColumnSpace(f[d],!1),q=0>d-1||p-f[d-1].column-1>q+a.nodeMinColumnSpace(f[d-1],!1)?p-1:p,r=d+1>=g||f[d+1].column-p-1>r+a.nodeMinColumnSpace(f[d+1],!0)?p+1:p,s=0,u=0,v=0;if(0>=c)for(var w=f[d].tc.k;w.next();)l=w.value,l.valid&&l.fromVertex.layer!==b&&(m=$o(l),n=l.portFromColOffset,o=l.portToColOffset,l=l.fromVertex.column,s+=(Math.abs(p+o-(l+n))+1)*m,u+=(Math.abs(q+o-(l+n))+1)*m,v+=(Math.abs(r+o-(l+n))+1)*m);if(c>=0)for(w=f[d].gc.k;w.next();)l=w.value,l.valid&&l.toVertex.layer!==b&&(m=$o(l),n=l.portFromColOffset,o=l.portToColOffset,l=l.toVertex.column,s+=(Math.abs(p+n-(l+o))+1)*m,u+=(Math.abs(q+n-(l+o))+1)*m,v+=(Math.abs(r+n-(l+o))+1)*m);o=n=m=0,l=h[f[d].index],w=i[f[d].index],-1!==l&&(m+=Math.abs(l-p),n+=Math.abs(l-q),o+=Math.abs(l-r)),-1!==w&&(m+=Math.abs(w-p),n+=Math.abs(w-q),o+=Math.abs(w-r)),(s>u||u===s&&m>n)&&(k=j=!0,f[d].column=q),(s>v||v===s&&m>o)&&(k=j=!0,f[d].column=r)}return Zo(a,b,f),a.normalize(),j}function Ap(a,b,c){e&&(t.q(b,Y,"medianStraighten:unfixedLayer"),t.q(c,Y,"medianStraighten:direction"));var d=Yo(a,b),f=a.Od[b],g=fp(a,b,c),h=[];for(c=0;f>c;c++)h[c]=g[c];for(g=!0;g;)for(g=!1,c=0;f>c;c++){var i,j=d[c].column,k=a.nodeMinColumnSpace(d[c],!0),l=a.nodeMinColumnSpace(d[c],!1),m=0;-1===h[c]?0===c&&c===f-1?m=j:0===c?(i=d[c+1].column,m=i-j===l+a.nodeMinColumnSpace(d[c+1],!0)?j-1:j):c===f-1?(i=d[c-1].column,m=j-i===k+a.nodeMinColumnSpace(d[c-1],!1)?j+1:j):(i=d[c-1].column,k=i+a.nodeMinColumnSpace(d[c-1],!1)+k+1,i=d[c+1].column,l=i-a.nodeMinColumnSpace(d[c+1],!0)-l-1,m=(k+l)/2|0):0===c&&c===f-1?m=h[c]:0===c?(i=d[c+1].column,l=i-a.nodeMinColumnSpace(d[c+1],!0)-l-1,m=Math.min(h[c],l)):c===f-1?(i=d[c-1].column,k=i+a.nodeMinColumnSpace(d[c-1],!1)+k+1,m=Math.max(h[c],k)):(i=d[c-1].column,k=i+a.nodeMinColumnSpace(d[c-1],!1)+k+1,i=d[c+1].column,l=i-a.nodeMinColumnSpace(d[c+1],!0)-l-1,k<h[c]&&h[c]<l?m=h[c]:k>=h[c]?m=k:l<=h[c]&&(m=l)),m!==j&&(g=!0,d[c].column=m)}Zo(a,b,d),a.normalize()}function Dp(a,b){e&&(t.q(b,Y,"packAux:column"),t.q(1,Y,"packAux:direction"));for(var c,d=!0,f=a.network.vertexes.k;f.next();){c=f.value;var g=a.nodeMinColumnSpace(c,!0),h=a.nodeMinColumnSpace(c,!1);if(c.column-g<=b&&c.column+h>=b){d=!1;break}}if(g=!1,d)for(f.reset();f.next();)c=f.value,c.column>b&&(c.column-=1,g=!0);return g}function Ep(a,b){e&&(t.q(b,Y,"tightPackAux:column"),t.q(1,Y,"tightPackAux:direction"));var c,d=b,d=b+1,f=[],g=[];for(c=0;c<=a.kb;c++)f[c]=!1,g[c]=!1;for(var h=a.network.vertexes.k;h.next();){c=h.value;var i=c.column-a.nodeMinColumnSpace(c,!0),j=c.column+a.nodeMinColumnSpace(c,!1);b>=i&&j>=b&&(f[c.layer]=!0),d>=i&&j>=d&&(g[c.layer]=!0)}for(i=!0,d=!1,c=0;c<=a.kb;c++)i=i&&!(f[c]&&g[c]);if(i)for(h.reset();h.next();)c=h.value,c.column>b&&(c.column-=1,d=!0);return d}function Bp(a,b){e&&t.q(b,Y,"componentPack:direction");for(var c=0;c<=a.Ib;c++)for(;Dp(a,c););for(a.normalize(),c=0;c<a.Ib;c++)for(;Ep(a,c););a.normalize();var d,f,g,h;if(b>0)for(c=0;c<=a.Ib;c++)for(d=ap(a),f=dp(a),g=f+1;g>f;)g=f,Fp(a,c,1),h=dp(a),h>f?bp(a,d):f>h&&(f=h,d=ap(a));if(0>b)for(c=a.Ib;c>=0;c--)for(d=ap(a),f=dp(a),g=f+1;g>f;)g=f,Fp(a,c,-1),h=dp(a),h>f?bp(a,d):f>h&&(f=h,d=ap(a));a.normalize()}function Fp(a,b,c){a.lg=0;for(var d,e=a.network.vertexes.k;e.next();)e.value.component=-1;if(c>0)for(e.reset();e.next();)d=e.value,d.column-a.nodeMinColumnSpace(d,!0)<=b&&(d.component=a.lg);if(0>c)for(e.reset();e.next();)d=e.value,d.column+a.nodeMinColumnSpace(d,!1)>=b&&(d.component=a.lg);for(a.lg++,e.reset();e.next();)d=e.value,-1===d.component&&(hp(a,d,a.lg,-1,!0,!0),a.lg++);for(b=[],d=0;d<a.lg*a.lg;d++)b[d]=!1;var f=[];for(d=0;d<(a.kb+1)*(a.Ib+1);d++)f[d]=-1;for(e.reset();e.next();){d=e.value;for(var g=d.layer,h=Math.max(0,d.column-a.nodeMinColumnSpace(d,!0)),i=Math.min(a.Ib,d.column+a.nodeMinColumnSpace(d,!1));i>=h;h++)f[g*(a.Ib+1)+h]=d.component}for(d=0;d<=a.kb;d++){if(c>0)for(h=0;h<a.Ib;h++)-1!==f[d*(a.Ib+1)+h]&&-1!==f[d*(a.Ib+1)+h+1]&&f[d*(a.Ib+1)+h]!==f[d*(a.Ib+1)+h+1]&&(b[f[d*(a.Ib+1)+h]*a.lg+f[d*(a.Ib+1)+h+1]]=!0);if(0>c)for(h=a.Ib;h>0;h--)-1!==f[d*(a.Ib+1)+h]&&-1!==f[d*(a.Ib+1)+h-1]&&f[d*(a.Ib+1)+h]!==f[d*(a.Ib+1)+h-1]&&(b[f[d*(a.Ib+1)+h]*a.lg+f[d*(a.Ib+1)+h-1]]=!0)}for(f=[],d=0;d<a.lg;d++)f[d]=!0;for(g=new B("number"),g.add(0);0!==g.count;)if(i=g.n[g.count-1],g.qd(g.count-1),f[i])for(f[i]=!1,d=0;d<a.lg;d++)b[i*a.lg+d]&&g.Jd(0,d);if(c>0)for(e.reset();e.next();)d=e.value,f[d.component]&&(d.column-=1);if(0>c)for(e.reset();e.next();)d=e.value,f[d.component]&&(d.column+=1)}function Wo(a,b){return 270===a.sa?b?Qb:Xb:90===a.sa?b?Xb:Qb:180===a.sa?b?Vb:Wb:b?Wb:Vb}function Gp(){this.index=this.Ud=this.Be=this.ae=this.$a=this.layer=0,this.link=null,this.hi=0}function Hp(a,b,c,d){return e&&(t.q(a,Y,"isUnoccupied2:px"),t.q(b,Y,"isUnoccupied2:py"),t.q(c,Y,"isUnoccupied2:qx"),t.q(d,Y,"isUnoccupied2:qy")),!0}function Yo(a,b){var c,d=a.Od[b];if(d>=a.Zg.length){c=[];var e;for(e=0;e<a.Zg.length;e++)c[e]=a.Zg[e];a.Zg=c}"undefined"==typeof a.Zg[d]||null===a.Zg[d]?c=[]:(c=a.Zg[d],a.Zg[d]=null);var f,d=a.Gr[b];for(e=0;e<d.length;e++)f=d[e],f instanceof Ip&&(c[f.index]=f);return c}function Zo(a,b,c){a.Zg[a.Od[b]]=c}function No(){ta.call(this)}function Ip(){ua.call(this),this.index=this.column=this.layer=-1,this.component=NaN,this.near=null,this.valid=!1,this.finish=this.$o=NaN,this.Em=0,this.GA=this.HA=void 0}function Jp(){va.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=NaN,this.portToColOffset=this.portFromColOffset=0}function W(){0<arguments.length&&t.ad(W),be.call(this),this.Yc=new ma(Object),this.Ji=Kp,this.If=Lp,this.Cs=Mp,this.Zu=Np,this.EB=null,this.sh=!0,this.cd=Op,this.bg=new fa(10,10).freeze(),this.ua=new Pp,this.ta=new Pp}function Rp(a,b,c,d){for(c=c.k;c.next();){var e=c.value;e instanceof R&&e.canLayout()&&"Comment"!==e.Zc&&(!d||e.sp)&&(e.bi||(e instanceof S&&null===e.jc?Rp(a,b,e.Rc,!1):b.Ko(e)))}for(c.reset();c.next();)if(e=c.value,e instanceof T&&e.canLayout()&&"Comment"!==e.Zc&&(!d||e.sp)){var f=e.aa;a=e.ca,null!==f&&null!==a&&f!==a&&"Comment"!==f.Zc&&"Comment"!==a.Zc&&(f=b.findGroupVertex(f),a=b.findGroupVertex(a),null!==f&&null!==a&&b.an(f,a,e))}}function Up(a,b){if(null!==b){switch(e&&t.l(b,Pp,W,"walkTree:v"),a.If){case Lp:if(0<b.gc.count){for(var c=new B(Pp),d=b.xI;d.next();){var f=d.value;$p(a,b,f)&&c.add(f)}0<c.count&&(b.children=c.Ie())}break;case Tp:if(0<b.tc.count){for(c=new B(Pp),d=b.SJ;d.next();)f=d.value,$p(a,b,f)&&c.add(f);0<c.count&&(b.children=c.Ie())}break;default:t.m("Unhandled path value"+a.If.toString())}for(var c=b.children,d=c.length,g=0;d>g;g++)f=c[g],f.initialized=!0,f.level=b.level+1,f.parent=b,a.Yc.remove(f);for(g=0;d>g;g++)f=c[g],Up(a,f)}}function $p(a,b,c){if(e&&t.l(b,Pp,W,"walkOK:v"),e&&t.l(c,Pp,W,"walkOK:c"),c.initialized){var d;if(null===b)d=!1;else{for(e&&t.l(c,Pp,W,"isAncestor:a"),e&&t.l(b,Pp,W,"isAncestor:b"),d=b.parent;null!==d&&d!==c;)d=d.parent;d=d===c}if(d||c.level>b.level)return!1;a.removeChild(c.parent,c)}return!0}function Vp(a,b){if(null!==b){e&&t.l(b,Pp,W,"initializeTree:v"),a.initializeTreeVertexValues(b),b.alignment===aq&&a.sortTreeVertexChildren(b);for(var c=0,d=b.Im,f=0,g=b.children,h=g.length,i=0;h>i;i++){var j=g[i];Vp(a,j),c+=j.descendantCount+1,d=Math.max(d,j.maxChildrenCount),f=Math.max(f,j.maxGenerationCount)}b.descendantCount=c,b.maxChildrenCount=d,b.maxGenerationCount=d>0?f+1:0}}function bq(a,b){switch(e&&t.l(b,Pp,W,"mom:v"),a.Cs){default:case Mp:return null!==b.parent?b.parent:a.ua;case cq:return null===b.parent?a.ua:null===b.parent.parent?a.ta:b.parent;case dq:if(null!==b.parent)return null!==b.parent.parent?b.parent.parent:a.ta;case eq:var c=!0;if(0===b.Im)c=!1;else for(var d=b.children,f=d.length,g=0;f>g;g++)if(0<d[g].Im){c=!1;break}return c&&null!==b.parent?a.ta:null!==b.parent?b.parent:a.ua}}function Wp(a,b){if(null!==b){e&&t.l(b,Pp,W,"assignTree:v"),a.assignTreeVertexValues(b);for(var c=b.children,d=c.length,f=0;d>f;f++)Wp(a,c[f])}}function Xp(a,b){if(null!==b){e&&t.l(b,Pp,W,"sortTree:v"),b.alignment!==aq&&a.sortTreeVertexChildren(b);for(var c=b.children,d=c.length,f=0;d>f;f++)Xp(a,c[f])}}function kq(a){return a===lq||a===aq||a===mq||a===nq}function oq(a){return a===lq||a===aq}function pq(a){e&&t.l(a,Pp,W,"isLeftSideBus:v");var b=a.parent;if(null!==b){var c=b.alignment;if(kq(c)){if(oq(c)){for(b=b.children,c=0;c<b.length&&a!==b[c];)c++;return 0===c%2}if(c===mq)return!0}}return!1}function rq(a,b){if(e&&t.l(b,Pp,W,"layoutTreeNone:v"),0===b.Im){var c=!1,d=0,f=jq;null!==b.parent&&(d=b.parent.angle,f=b.parent.alignment,c=kq(f)),f=pq(b),b.na.p(0,0),b.Za.p(b.width,b.height),null===b.parent||null===b.comments||(180!==d&&270!==d||c)&&!f?b.Ia.p(0,0):180===d&&!c||(90===d||270===d)&&f?b.Ia.p(b.width-2*b.O.x,0):b.Ia.p(0,b.height-2*b.O.y)}else{for(var c=tq(b),d=90===c||270===c,g=0,f=b.children,h=f.length,i=0;h>i;i++)var j=f[i],g=Math.max(g,d?j.Za.width:j.Za.height);var k=b.alignment,l=k===uq,m=k===vq,n=kq(k),o=Math.max(0,b.breadthLimit),p=wq(b),q=b.nodeSpacing,r=xq(b),s=l||m?0:r/2,u=b.rowSpacing,v=0;(l||m||b.Op||b.Pp&&1===b.maxGenerationCount)&&(v=Math.max(0,b.rowIndent));var l=b.width,w=b.height,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0;if(n&&!oq(k)&&c>135&&f.reverse(),oq(k))if(h>1)for(i=0;h>i;i++){var j=f[i],H=j.Za;0===i%2&&i!==h-1?F=Math.max(F,(d?H.width:H.height)+Lq(j)-q):0!==i%2&&(G=Math.max(G,(d?H.width:H.height)+Lq(j)-q))}else 1===h&&(F=d?f[0].Za.width:f[0].Za.height);if(n)switch(k){case lq:case aq:y=135>c?yq(b,f,F,x,y):zq(b,f,F,x,y),F=y[0],x=y[1],y=y[2];break;case mq:for(i=0;h>i;i++)j=f[i],H=j.Za,o=0===D?0:u,d?(j.na.p(g-H.width,B+o),x=Math.max(x,H.width),y=Math.max(y,B+o+H.height),B+=o+H.height):(j.na.p(A+o,g-H.height),x=Math.max(x,A+o+H.width),y=Math.max(y,H.height),A+=o+H.width),D++;break;case nq:for(g=0;h>g;g++)j=f[g],H=j.Za,o=0===D?0:u,d?(j.na.p(q/2+b.O.x,B+o),x=Math.max(x,H.width),y=Math.max(y,B+o+H.height),B+=o+H.height):(j.na.p(A+o,q/2+b.O.y),x=Math.max(x,A+o+H.width),y=Math.max(y,H.height),A+=o+H.width),D++}else for(i=0;h>i;i++)j=f[i],H=j.Za,d?(o>0&&D>0&&A+q+H.width>o&&(g>A&&Bq(b,k,g-A,0,E,i-1),C++,D=0,E=i,z=y,A=0,B=c>135?-y-u:y+u),G=0===D?s:q,Cq(a,j,0,B),j.na.p(A+G,B),x=Math.max(x,A+G+H.width),y=Math.max(y,z+(0===C?0:u)+H.height),A+=G+H.width):(o>0&&D>0&&B+q+H.height>o&&(g>B&&Bq(b,k,0,g-B,E,i-1),C++,D=0,E=i,z=x,B=0,A=c>135?-x-u:x+u),G=0===D?s:q,Cq(a,j,A,0),j.na.p(A,B+G),y=Math.max(y,B+G+H.height),x=Math.max(x,z+(0===C?0:u)+H.width),B+=G+H.height),D++;switch(C>0&&(d?(y+=Math.max(0,p),x>A&&Bq(b,k,x-A,0,E,h-1),v>0&&(m||Eq(b,v,0,0,h-1),x+=v)):(x+=Math.max(0,p),y>B&&Bq(b,k,0,y-B,E,h-1),v>0&&(m||Eq(b,0,v,0,h-1),y+=v))),v=m=0,k){case Gq:d?m+=x/2-b.O.x-r/2:v+=y/2-b.O.y-r/2;break;case jq:C>0?d?m+=x/2-b.O.x-r/2:v+=y/2-b.O.y-r/2:d?(k=f[0].na.x+f[0].Ia.x,q=f[h-1].na.x+f[h-1].Ia.x+2*f[h-1].O.x,m+=k+(q-k)/2-b.O.x-r/2):(k=f[0].na.y+f[0].Ia.y,q=f[h-1].na.y+f[h-1].Ia.y+2*f[h-1].O.y,v+=k+(q-k)/2-b.O.y-r/2);break;case uq:d?(m-=r,x+=r):(v-=r,y+=r);break;case vq:d?(m+=x-b.width+r,x+=r):(v+=y-b.height+r,y+=r);break;case lq:case aq:d?m=h>1?m+(F+q/2-b.O.x):m+(f[0].O.x-b.O.x+f[0].Ia.x):v=h>1?v+(F+q/2-b.O.y):v+(f[0].O.y-b.O.y+f[0].Ia.y);break;case mq:d?m+=x+q/2-b.O.x:v+=y+q/2-b.O.y;break;case nq:break;default:t.m("Unhandled alignment value "+k.toString())}for(i=0;h>i;i++)j=f[i],d?j.na.p(j.na.x+j.Ia.x-m,j.na.y+(c>135?(n?-y:-j.Za.height)+j.Ia.y-p:w+p+j.Ia.y)):j.na.p(j.na.x+(c>135?(n?-x:-j.Za.width)+j.Ia.x-p:l+p+j.Ia.x),j.na.y+j.Ia.y-v);d?(x=Hq(b,x,m),0>m&&(m=0),c>135&&(v+=y+p),y+=w+p):(c>135&&(m+=x+p),x+=l+p,y=Iq(b,y,v),0>v&&(v=0)),b.Ia.p(m,v),b.Za.p(x,y)}}function yq(a,b,c,d,f){e&&t.l(a,Pp,W,"layoutBusChildrenPosDir:v");var g=b.length;if(0===g)return a=[],a[0]=c,a[1]=d,a[2]=f,a;if(1===g){var h=b[0];return d=h.Za.width,f=h.Za.height,a=[],a[0]=c,a[1]=d,a[2]=f,a}for(var i=a.nodeSpacing,j=a.rowSpacing,k=90===tq(a),l=0,m=0,n=0,o=0;g>o;o++)if(!(0!==o%2||g>1&&o===g-1)){var h=b[o],p=h.Za,q=0===l?0:j;if(k){var r=Lq(h)-i;h.na.p(c-(p.width+r),n+q),d=Math.max(d,p.width+r),f=Math.max(f,n+q+p.height),n+=q+p.height}else r=Lq(h)-i,h.na.p(m+q,c-(p.height+r)),f=Math.max(f,p.height+r),d=Math.max(d,m+q+p.width),m+=q+p.width;l++}var l=0,s=m,u=n;for(k?(m=c+i,n=0):(m=0,n=c+i),o=0;g>o;o++)0!==o%2&&(h=b[o],p=h.Za,q=0===l?0:j,k?(r=Lq(h)-i,h.na.p(m+r,n+q),d=Math.max(d,m+p.width+r),f=Math.max(f,n+q+p.height),n+=q+p.height):(r=Lq(h)-i,h.na.p(m+q,n+r),d=Math.max(d,m+q+p.width),f=Math.max(f,n+p.height+r),m+=q+p.width),l++);return g>1&&1===g%2&&(h=b[g-1],p=h.Za,b=Mq(h,k?Math.max(Math.abs(u),Math.abs(n)):Math.max(Math.abs(s),Math.abs(m))),k?(h.na.p(c+i/2-h.O.x-h.Ia.x,f+b),k=c+i/2-h.O.x-h.Ia.x,d=Math.max(d,k+p.width),0>k&&(d-=k),f=Math.max(f,Math.max(u,n)+b+p.height),0>h.na.x&&(c=Sq(a,h.na.x,!1,c,i))):(h.na.p(d+b,c+i/2-h.O.y-h.Ia.y),d=Math.max(d,Math.max(s,m)+b+p.width),k=c+i/2-h.O.y-h.Ia.y,f=Math.max(f,k+p.height),0>k&&(f-=k),0>h.na.y&&(c=Sq(a,h.na.y,!0,c,i)))),a=[],a[0]=c,a[1]=d,a[2]=f,a}function zq(a,b,c,d,f){e&&t.l(a,Pp,W,"layoutBusChildrenNegDir:v");var g=b.length;if(0===g)return a=[],a[0]=c,a[1]=d,a[2]=f,a;if(1===g){var h=b[0];return d=h.Za.width,f=h.Za.height,a=[],a[0]=c,a[1]=d,a[2]=f,a}for(var i=a.nodeSpacing,j=a.rowSpacing,k=270===tq(a),l=0,m=0,n=0,o=0;g>o;o++)if(!(0!==o%2||g>1&&o===g-1)){var h=b[o],p=h.Za,q=0===l?0:j;if(k){var r=Lq(h)-i,n=n-(q+p.height);h.na.p(c-(p.width+r),n),d=Math.max(d,p.width+r),f=Math.max(f,Math.abs(n))}else r=Lq(h)-i,m-=q+p.width,h.na.p(m,c-(p.height+r)),f=Math.max(f,p.height+r),d=Math.max(d,Math.abs(m));l++}var l=0,s=m,u=n;for(k?(m=c+i,n=0):(m=0,n=c+i),o=0;g>o;o++)0!==o%2&&(h=b[o],p=h.Za,q=0===l?0:j,k?(r=Lq(h)-i,n-=q+p.height,h.na.p(m+r,n),d=Math.max(d,m+p.width+r),f=Math.max(f,Math.abs(n))):(r=Lq(h)-i,m-=q+p.width,h.na.p(m,n+r),f=Math.max(f,n+p.height+r),d=Math.max(d,Math.abs(m))),l++);for(g>1&&1===g%2&&(h=b[g-1],p=h.Za,j=Mq(h,k?Math.max(Math.abs(u),Math.abs(n)):Math.max(Math.abs(s),Math.abs(m))),k?(h.na.p(c+i/2-h.O.x-h.Ia.x,-f-p.height-j),m=c+i/2-h.O.x-h.Ia.x,d=Math.max(d,m+p.width),0>m&&(d-=m),f=Math.max(f,Math.abs(Math.min(u,n))+j+p.height),0>h.na.x&&(c=Sq(a,h.na.x,!1,c,i))):(h.na.p(-d-p.width-j,c+i/2-h.O.y-h.Ia.y),d=Math.max(d,Math.abs(Math.min(s,m))+j+p.width),m=c+i/2-h.O.y-h.Ia.y,f=Math.max(f,m+p.height),0>m&&(f-=m),0>h.na.y&&(c=Sq(a,h.na.y,!0,c,i)))),o=0;g>o;o++)h=b[o],k?h.na.p(h.na.x,h.na.y+f):h.na.p(h.na.x+d,h.na.y);return a=[],a[0]=c,a[1]=d,a[2]=f,a}function Lq(a){return e&&t.l(a,Pp,W,"fixRelativePostions:child"),null===a.parent?0:a.parent.nodeSpacing}function Mq(a){return e&&t.l(a,Pp,W,"fixRelativePostions:lastchild"),null===a.parent?0:a.parent.rowSpacing}function Sq(a,b,c,d,f){e&&t.l(a,Pp,W,"fixRelativePostions:v"),a=a.children;for(var g=a.length,h=0;g>h;h++)c?a[h].na.p(a[h].na.x,a[h].na.y-b):a[h].na.p(a[h].na.x-b,a[h].na.y);return b=a[g-1],Math.max(d,c?b.Ia.y+b.O.y-f/2:b.Ia.x+b.O.x-f/2)}function Hq(a,b,c){switch(e&&t.l(a,Pp,W,"calculateSubwidth:v"),a.alignment){case jq:case Gq:var d=b;return c+a.width>d&&(d=c+a.width),0>c&&(d-=c),d;case uq:return a.width>b?a.width:b;case vq:return 2*a.O.x>b?a.width:b+a.width-2*a.O.x;case lq:case aq:return d=Math.min(0,c),c=Math.max(b,c+a.width),Math.max(a.width,c-d);case mq:return a.width-a.O.x+a.nodeSpacing/2+b;case nq:return Math.max(a.width,a.O.x+a.nodeSpacing/2+b);default:return b}}function Iq(a,b,c){switch(e&&t.l(a,Pp,W,"calculateSubheight:v"),a.alignment){case jq:case Gq:var d=b;return c+a.height>d&&(d=c+a.height),0>c&&(d-=c),d;case uq:return a.height>b?a.height:b;case vq:return 2*a.O.y>b?a.height:b+a.height-2*a.O.y;case lq:case aq:return d=Math.min(0,c),c=Math.max(b,c+a.height),Math.max(a.height,c-d);case mq:return a.height-a.O.y+a.nodeSpacing/2+b;case nq:return Math.max(a.height,a.O.y+a.nodeSpacing/2+b);default:return b}}function Jq(a,b,c){switch(e&&t.l(a,ca,W,"alignOffset:align"),a){case Gq:b/=2,c/=2;break;case jq:b/=2,c/=2;break;case uq:c=b=0;break;case vq:break;default:t.m("Unhandled alignment value "+a.toString())}return a=[],a[0]=b,a[1]=c,a}function Bq(a,b,c,d,f,g){e&&t.l(a,Pp,W,"shiftRelPosAlign:v"),e&&t.l(b,ca,W,"shiftRelPosAlign:align"),b=Jq(b,c,d),Eq(a,b[0],b[1],f,g)}function Eq(a,b,c,d,f){if(e&&t.l(a,Pp,W,"shiftRelPos:v"),0!==b||0!==c)for(a=a.children;f>=d;d++){var g=a[d].na;g.x+=b,g.y+=c}}function Cq(a,b,c,d){e&&(t.l(b,Pp,W,"recordMidPoints:v"),t.i(c,"number",W,"recordMidPoints:x"),t.i(d,"number",W,"recordMidPoints:y"));var f=b.parent;switch(a.If){case Lp:for(a=b.tc;a.next();)b=a.value,b.fromVertex===f&&b.Sr.p(c,d);break;case Tp:for(a=b.gc;a.next();)b=a.value,b.toVertex===f&&b.Sr.p(c,d);break;default:t.m("Unhandled path value "+a.If.toString())}}function Fq(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];e.x+=b,e.y+=c}}function Dq(a,b,c,d,f,g,h){e&&t.l(b,Pp,W,"mergeFringes:parent"),e&&t.l(c,Pp,W,"mergeFringes:child");var i=tq(b),j=90===i||270===i,k=b.nodeSpacing;b=d;var l=f;d=g,f=h;var m=c.tt,n=c.Kt;h=c.Za;var o=j?Math.max(f,h.height):Math.max(d,h.width);if((null===m||i!==tq(c))&&(m=Aq(a,2),n=Aq(a,2),j?(m[0].p(0,0),m[1].p(0,h.height),n[0].p(h.width,0),n[1].p(n[0].x,m[1].y)):(m[0].p(0,0),m[1].p(h.width,0),n[0].p(0,h.height),n[1].p(m[1].x,n[0].y))),j){if(c=d,d=9999999,!(null===l||2>l.length||null===m||2>m.length))for(g=f=0;f<l.length&&g<m.length;){var i=l[f],p=m[g],j=p.x,q=p.y,j=j+c,r=i;f+1<l.length&&(r=l[f+1]);var s=p,p=s.x,s=s.y;g+1<m.length&&(s=m[g+1],p=s.x,s=s.y,p+=c);var u=d;i.y===q?u=j-i.x:i.y>q&&i.y<s?u=j+(i.y-q)/(s-q)*(p-j)-i.x:q>i.y&&q<r.y&&(u=j-(i.x+(q-i.y)/(r.y-i.y)*(r.x-i.x))),d>u&&(d=u),r.y<=i.y?f++:q>=s?g++:(r.y<=s&&f++,s<=r.y&&g++)}if(c-=d,c+=k,f=m,g=c,null===b||2>b.length||null===f||2>f.length)d=null;else{for(k=Aq(a,b.length+f.length),d=j=i=0;j<f.length&&f[j].y<b[0].y;)q=f[j++],k[d++].p(q.x+g,q.y);for(;i<b.length;)q=b[i++],k[d++].p(q.x,q.y);for(i=b[b.length-1].y;j<f.length&&f[j].y<=i;)j++;for(;j<f.length&&f[j].y>i;)q=f[j++],k[d++].p(q.x+g,q.y);for(f=Aq(a,d),i=0;d>i;i++)f[i].assign(k[i]);Kq(a,k),d=f}if(j=n,q=c,null===l||2>l.length||null===j||2>j.length)f=null;else{for(k=Aq(a,l.length+j.length),g=r=f=0;f<l.length&&l[f].y<j[0].y;)i=l[f++],k[g++].p(i.x,i.y);for(;r<j.length;)i=j[r++],k[g++].p(i.x+q,i.y);for(j=j[j.length-1].y;f<l.length&&l[f].y<=j;)f++;for(;f<l.length&&l[f].y>j;)i=l[f++],k[g++].p(i.x,i.y);for(i=Aq(a,g),f=0;g>f;f++)i[f].assign(k[f]);Kq(a,k),f=i}g=Math.max(0,c)+h.width,h=o}else{if(c=f,d=9999999,!(null===l||2>l.length||null===m||2>m.length))for(g=f=0;f<l.length&&g<m.length;)i=l[f],p=m[g],j=p.x,q=p.y,q+=c,r=i,f+1<l.length&&(r=l[f+1]),s=p,p=s.x,s=s.y,g+1<m.length&&(s=m[g+1],p=s.x,s=s.y,s+=c),u=d,i.x===j?u=q-i.y:i.x>j&&i.x<p?u=q+(i.x-j)/(p-j)*(s-q)-i.y:j>i.x&&j<r.x&&(u=q-(i.y+(j-i.x)/(r.x-i.x)*(r.y-i.y))),d>u&&(d=u),r.x<=i.x?f++:j>=p?g++:(r.x<=p&&f++,p<=r.x&&g++);if(c-=d,c+=k,f=m,g=c,null===b||2>b.length||null===f||2>f.length)d=null;else{for(k=Aq(a,b.length+f.length),d=j=i=0;j<f.length&&f[j].x<b[0].x;)q=f[j++],k[d++].p(q.x,q.y+g);for(;i<b.length;)q=b[i++],k[d++].p(q.x,q.y);for(i=b[b.length-1].x;j<f.length&&f[j].x<=i;)j++;for(;j<f.length&&f[j].x>i;)q=f[j++],k[d++].p(q.x,q.y+g);for(f=Aq(a,d),i=0;d>i;i++)f[i].assign(k[i]);Kq(a,k),d=f}if(j=n,q=c,null===l||2>l.length||null===j||2>j.length)f=null;else{for(k=Aq(a,l.length+j.length),g=r=f=0;f<l.length&&l[f].x<j[0].x;)i=l[f++],k[g++].p(i.x,i.y);for(;r<j.length;)i=j[r++],k[g++].p(i.x,i.y+q);for(j=j[j.length-1].x;f<l.length&&l[f].x<=j;)f++;for(;f<l.length&&l[f].x>j;)i=l[f++],k[g++].p(i.x,i.y);for(i=Aq(a,g),f=0;g>f;f++)i[f].assign(k[f]);Kq(a,k),f=i}g=o,h=Math.max(0,c)+h.height}return Kq(a,b),Kq(a,m),Kq(a,l),Kq(a,n),a=[],a[0]=c,a[1]=d,a[2]=f,a[3]=g,a[4]=h,a}function Aq(a,b){a.ws||(a.ws=[]);var c=a.ws[b];if(void 0!==c&&(c=c.pop(),void 0!==c))return c;for(var c=[],d=0;b>d;d++)c[d]=new w;return c}function Kq(a,b){if(a.ws){var c=b.length,d=a.ws[c];void 0===d&&(d=[],a.ws[c]=d),d.push(b)}}function Tq(a,b,c,d){if(null!==b){e&&t.l(b,Pp,W,"assignAbsolutePositions:v"),b.x=c,b.y=d,b=b.children;for(var f=b.length,g=0;f>g;g++){var h=b[g];Tq(a,h,c+h.na.x,d+h.na.y)}}}function Vq(a,b){if(null!==b){e&&t.l(b,Pp,W,"setPortSpotsTree:v"),a.setPortSpots(b);for(var c=b.children,d=c.length,f=0;d>f;f++)Vq(a,c[f])}}function tq(a){return a=a.angle,45>=a?0:135>=a?90:225>=a?180:315>=a?270:0}function wq(a){e&&t.l(a,Pp,W,"computeLayerSpacing:v");var b=tq(a),b=90===b||270===b,c=a.layerSpacing;if(0<a.layerSpacingParentOverlap)var d=Math.min(1,a.layerSpacingParentOverlap),c=c-(b?a.height*d:a.width*d);return c<(b?-a.height:-a.width)&&(c=b?-a.height:-a.width),c}function xq(a){e&&t.l(a,Pp,W,"computeNodeIndent:v");var b=tq(a),b=90===b||270===b,c=a.nodeIndent;if(0<a.nodeIndentPastParent)var d=Math.min(1,a.nodeIndentPastParent),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}function Qp(){ta.call(this)}function Pp(){ua.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.na=new w(0,0),this.Za=new fa(0,0),this.Ia=new w(0,0),this.Pp=this.Op=this.NJ=!1,this.Kt=this.tt=null,this.sorting=fq,this.comparer=Un,this.angle=0,this.alignment=jq,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=sq,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=xb,this.setsChildPortSpot=!0,this.childPortSpot=xb}function Wq(){va.call(this),this.Sr=new w(0,0)}function Xq(){this.Vn=[]}function Xk(a){var b,c=new Xq;if("string"==typeof a)b=(new DOMParser).parseFromString(a,"text/xml");else{if(!(a instanceof Document))return null;b=a.implementation.createDocument("http://www.w3.org/2000/svg","svg",null),b.appendChild(b.importNode(a.documentElement,!0))}if(a=b.getElementsByTagName("svg"),0===a.length)return null;var d=a[0],e=b.getElementsByTagName("linearGradient"),f=b.getElementsByTagName("radialGradient");for(a=0;a<e.length;a++){for(var g=e[a],h=Yk(ea,Yd,{start:Yb,end:Zb}),i=g.childNodes,j=0;j<i.length;j++)if("stop"===i[j].tagName){var k=Yq(c,i[j],"stop-color");if(k){var l=Yq(c,i[j],"offset");l||(l="0");var m=parseFloat(l);isNaN(m)&&(m=0),h.addColorStop((-1!==l.indexOf("%")?.01:1)*m,k)}}g=g.getAttribute("id"),"string"==typeof g&&(c["_brush"+g]=h)}for(a=0;a<f.length;a++){for(g=f[a],h=Yk(ea,Zd,{start:Hb,end:Hb}),i=g.childNodes,j=0;j<i.length;j++)"stop"===i[j].tagName&&(k=Yq(c,i[j],"stop-color"))&&((l=Yq(c,i[j],"offset"))||(l="0"),m=parseFloat(l),isNaN(m)&&(m=0),h.addColorStop((-1!==l.indexOf("%")?.01:1)*m,k));g=g.getAttribute("id"),"string"==typeof g&&(c["_brush"+g]=h)}for(e=!0;e;)for(e=!1,f=b.getElementsByTagName("use"),a=0;a<f.length;a++)h=f[a],0===h.childNodes.length&&(g=h.href,void 0!==g&&(g=b.getElementById(g.baseVal.substring(1)),null!==g&&(g=g.cloneNode(!0),g.removeAttribute("id"),i=parseFloat(h.getAttribute("x")),isNaN(i)&&(i=0),j=parseFloat(h.getAttribute("y")),isNaN(j)&&(j=0),k=h.getAttribute("transform"),null===k&&(k=""),h.setAttribute("transform",k+" translate("+i+","+j+")"),h.appendChild(g),"use"===g.tagName&&(e=!0))));if(Zq(c,d,null),b=new y,0===c.Vn.length)return b;if(1===c.Vn.length)return c.Vn[0];for(a=0;a<c.Vn.length;a++)b.add(c.Vn[a]);return b}function $q(a,b){var c=a.getAttribute(b);return"string"!=typeof c&&a.style&&(c=a.style[b]),"string"!=typeof c?null:c}function Yq(a,b,c){var d=b.getAttribute(c);return"string"!=typeof d&&b.style&&(d=b.style[c]),"string"!=typeof d||""===d||"inherit"===d?(b=b.parentNode,"g"===b.tagName||"use"===b.tagName?Yq(a,b,c):null):d}function Zq(a,b,c){var d=b.tagName;if(("g"===d||"svg"===d||"use"===d||"symbol"===d)&&"none"!==Yq(a,b,"display")){for(var d=b.childNodes,e=0;e<d.length;e++){var f=d[e],g=null;if(void 0!==f.getAttribute){var h=f.getAttribute("transform");switch(f.tagName){case"g":null===h?Zq(a,f,null):(g=new y,Zq(a,f,g));break;case"use":null===h?Zq(a,f,null):(g=new y,Zq(a,f,g));break;case"symbol":if("use"!==b.tagName)break;g=new y,Zq(a,f,g);var i=g,j=a,k=f;Yq(j,k,"preserveAspectRatio"),Yq(j,k,"viewBox"),i.scale=1;break;case"path":i=f,g=new V,i=i.getAttribute("d"),"string"==typeof i&&(g.IE=Qc(i));break;case"line":var l=f,g=new V,i=parseFloat(l.getAttribute("x1"));isNaN(i)&&(i=0),j=parseFloat(l.getAttribute("y1")),isNaN(j)&&(j=0),k=parseFloat(l.getAttribute("x2")),isNaN(k)&&(k=0),l=parseFloat(l.getAttribute("y2")),isNaN(l)&&(l=0);var m=new zc(Dc);g.position=new w(Math.min(i,k),Math.min(j,l)),(k-i)/(l-j)>0?(m.qa=0,m.ra=0,m.D=Math.abs(k-i),m.F=Math.abs(l-j)):(m.qa=0,m.ra=Math.abs(l-j),m.D=Math.abs(k-i),m.F=0),g.nd=m;break;case"circle":k=f,g=new V,i=parseFloat(k.getAttribute("r")),isNaN(i)||0>i?g=null:(j=parseFloat(k.getAttribute("cx")),isNaN(j)&&(j=0),k=parseFloat(k.getAttribute("cy")),isNaN(k)&&(k=0),l=new zc(Mc),l.qa=0,l.ra=0,l.D=2*i,l.F=2*i,g.position=new w(j-i,k-i),g.nd=l);break;case"ellipse":l=f,g=new V,i=parseFloat(l.getAttribute("rx")),isNaN(i)||0>i?g=null:(j=parseFloat(l.getAttribute("ry")),isNaN(j)||0>j?g=null:(k=parseFloat(l.getAttribute("cx")),isNaN(k)&&(k=0),l=parseFloat(l.getAttribute("cy")),isNaN(l)&&(l=0),m=new zc(Mc),m.qa=0,m.ra=0,m.D=2*i,m.F=2*j,g.position=new w(k-i,l-j),g.nd=m));break;case"rect":if(m=f,g=new V,i=parseFloat(m.getAttribute("width")),isNaN(i)||0>i)g=null;else if(j=parseFloat(m.getAttribute("height")),isNaN(j)||0>j)g=null;else{k=parseFloat(m.getAttribute("x")),isNaN(k)&&(k=0),l=parseFloat(m.getAttribute("y")),isNaN(l)&&(l=0);var n=m.getAttribute("rx"),o=m.getAttribute("ry"),m=parseFloat(n);(isNaN(m)||0>m)&&(m=0);var p=parseFloat(o);(isNaN(p)||0>p)&&(p=0),!n&&o?m=p:n&&!o&&(p=m),m=Math.min(m,i/2),p=Math.min(p,j/2),o=void 0,0===m&&0===p?(o=new zc(Ec),o.qa=0,o.ra=0,o.D=i,o.F=j):(o=F.va/2,n=t.u(),I(n,m,0,!0),n.lineTo(i-m,0),J(n,i-m*o,0,i,p*o,i,p),n.lineTo(i,j-p),J(n,i,j-p*o,i-m*o,j,i-m,j),n.lineTo(m,j),J(n,m*o,j,0,j-p*o,0,j-p),n.lineTo(0,p),J(n,0,p*o,m*o,0,m,0),L(n),o=n.s,t.v(n)),g.position=new w(k,l),g.nd=o}break;case"polygon":g=ar(f);break;case"polyline":g=ar(f)}if(null!==g){if(g instanceof V){if(i=Yq(a,f,"fill"),null!==i&&-1!==i.indexOf("url")?(i=i.substring(i.indexOf("#")+1,i.length-1),i=a["_brush"+i],g.fill=i instanceof ea?i:"black"):g.fill=null===i?"black":"none"===i?null:i,i=Yq(a,f,"stroke"),null!==i&&-1!==i.indexOf("url")?(i=i.substring(i.indexOf("#")+1,i.length-1),i=a["_brush"+i],g.stroke=i instanceof ea?i:"black"):g.stroke="none"===i?null:i,i=parseFloat(Yq(a,f,"stroke-width")),isNaN(i)||(g.fb=i),i=Yq(a,f,"stroke-linecap"),null!==i&&(g.wG=i),i=Yq(a,f,"stroke-dasharray")){for(j=i.split(","),k=[],i=0;i<j.length;i++)l=parseFloat(j[i]),!isNaN(l)&&l>0&&k.push(l);g.zx=k}(f=Yq(a,f,"stroke-dashoffset"))&&(f=parseFloat(f),isNaN(f)||(g.xG=f)),g.rA=!0}if(null!==h){for(h=h.split(")"),f=!0,i=0;i<h.length;i++)/\(.*[^0-9\.,\s-]/.test(h[i])&&(f=!1),/\(.*[0-9]-[0-9]/.test(h[i])&&(f=!1);if(f)for(i=h.length-1;i>=0;i--)if(j=h[i],""!==j)switch(k=j.indexOf("("),f=j.substring(0,k).replace(/\s*/,""),k=j.substring(k+1).split(/\s*[\s,]\s*/),f){case"rotate":br(a,g,k);break;case"translate":f=g,j=parseFloat(k[0]),isNaN(j)&&(j=0),k=parseFloat(k[1]),isNaN(k)&&(k=0),(0!==j||0!==k)&&(l=f.position.copy(),isNaN(l.x)&&(l.x=0),isNaN(l.y)&&(l.y=0),
f.position=new w(j+l.x,k+l.y));break;case"scale":cr(a,g,k);break;case"skewX":dr(a,g,k);break;case"skewY":er(a,g,k);break;case"matrix":fr(a,g,k)}}if(g instanceof y){for(h=g.elements.k,i=f=0,j=g.position.copy(),isNaN(j.x)&&(j.x=0),isNaN(j.y)&&(j.y=0);h.next();)k=h.value.position.copy(),isNaN(k.x)&&(k.x=0),isNaN(k.y)&&(k.y=0),k.x<f&&(f=k.x),k.y<i&&(i=k.y);j.x+=f,j.y+=i,g.position=j}null===c?a.Vn.push(g):c.add(g)}}}null!==g&&(a=$q(b,"visibility"),("hidden"===a||"collapse"===a)&&(g.visible=!1),(b=$q(b,"opacity"))&&(b=parseFloat(b),isNaN(b)||(g.opacity=b)))}}function fr(a,b,c){var d=parseFloat(c[0]),e=parseFloat(c[1]),f=parseFloat(c[2]),g=parseFloat(c[3]),h=parseFloat(c[4]),i=parseFloat(c[5]);if(!isNaN(d+e+f+g+h+i)){var j=b.position.copy();if(isNaN(j.x)&&(j.x=0),isNaN(j.y)&&(j.y=0),b instanceof V){if(c=b.nd.copy(),c.type===Ec)c=a.Ds(c);else if(c.type===Mc)c=gr(c);else if(c.type===Dc){c.type=Ac,a=new Bc(c.qa,c.ra);var k=new id(Oc,c.D,c.F);a.Ea.add(k),c.Bb.add(a)}c.offset(j.x,j.y),c.transform(d,e,f,g,h-j.x,i-j.y),a=c.normalize(),b.nd=c,j.x-=a.x,j.y-=a.y,b.position=j}else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=j.x,d.y+=j.y,b.value.position=d;for(b.reset();b.next();)fr(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=j.x,d.y-=j.y,b.value.position=d}}}function br(a,b,c){var d=parseFloat(c[0]);isNaN(d)&&(d=0);var e=parseFloat(c[1]);isNaN(e)&&(e=0);var f=parseFloat(c[2]);if(isNaN(f)&&(f=0),0!==d){var g=d*Math.PI/180,h=b.position.copy();if(isNaN(h.x)&&(h.x=0),isNaN(h.y)&&(h.y=0),b instanceof V){if(c=b.nd.copy(),c.type===Mc?c=gr(c):c.type===Ec&&(c=a.Ds(c)),c.type===Ac)c.rotate(d,e-h.x,f-h.y),f=c.normalize(),b.nd=c,h.x-=f.x,h.y-=f.y,b.position=h;else{var d=c.qa-e+h.x,i=c.ra-f+h.y,j=c.D-e+h.x,k=c.F-f+h.y;a=d*Math.cos(g)-i*Math.sin(g)+e-h.x,d=i*Math.cos(g)+d*Math.sin(g)+f-h.y,e=j*Math.cos(g)-k*Math.sin(g)+e-h.x,f=k*Math.cos(g)+j*Math.sin(g)+f-h.y,j=Math.min(a,e),k=Math.min(d,f),c.qa=a-j,c.ra=d-k,c.D=e-j,c.F=f-k,h.x+=j,h.y+=k,b.position=h,b.nd=c}b.fill instanceof ea&&(h=b.fill.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),isNaN(c)||(c+=g,h.start=new H((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new H((1+Math.cos(c))/2,(1+Math.sin(c))/2)),b.fill=h),b.stroke instanceof ea&&(h=b.stroke.copy(),c=Math.atan((.5-h.start.y)/(.5-h.start.x)),isNaN(c)||(c+=g,h.start=new H((1-Math.cos(c))/2,(1-Math.sin(c))/2),h.end=new H((1+Math.cos(c))/2,(1+Math.sin(c))/2)),b.stroke=h)}else{for(b=b.elements.k;b.next();)g=b.value.position.copy(),g.x+=h.x,g.y+=h.y,b.value.position=g;for(b.reset();b.next();)br(a,b.value,c);for(b.reset();b.next();)g=b.value.position.copy(),g.x-=h.x,g.y-=h.y,b.value.position=g}}}function cr(a,b,c){var d=parseFloat(c[0]);isNaN(d)&&(d=1);var e=parseFloat(c[1]);if(isNaN(e)&&(e=d),1!==d||1!==e){var f=b.position.copy();if(isNaN(f.x)&&(f.x=0),isNaN(f.y)&&(f.y=0),b instanceof V)a=b.nd.copy(),f.x*=d,f.y*=e,b.position=f,a.scale(d,e),b.nd=a;else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=f.x,d.y+=f.y,b.value.position=d;for(b.reset();b.next();)cr(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=f.x,d.y-=f.y,b.value.position=d}}}function dr(a,b,c){var d=parseFloat(c[0]);if(!isNaN(d)){var d=d*Math.PI/180,e=b.position.copy();if(isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0),b instanceof V){if(c=b.nd.copy(),c.type===Ec)c=a.Ds(c);else if(c.type===Mc)c=gr(c);else if(c.type===Dc){c.type=Ac,a=new Bc(c.qa,c.ra);var f=new id(Oc,c.D,c.F);a.Ea.add(f),c.Bb.add(a)}c.offset(e.x,e.y),c.transform(1,0,Math.tan(d),1,-e.x,-e.y),a=c.normalize(),b.nd=c,e.x-=a.x,e.y-=a.y,b.position=e}else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=e.x,d.y+=e.y,b.value.position=d;for(b.reset();b.next();)dr(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=e.x,d.y-=e.y,b.value.position=d}}}function er(a,b,c){var d=parseFloat(c[0]);if(!isNaN(d)){var d=d*Math.PI/180,e=b.position.copy();if(isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0),b instanceof V){if(c=b.nd.copy(),c.type===Ec)c=a.Ds(c);else if(c.type===Mc)c=gr(c);else if(c.type===Dc){c.type=Ac,a=new Bc(c.qa,c.ra);var f=new id(Oc,c.D,c.F);a.Ea.add(f),c.Bb.add(a)}c.offset(e.x,e.y),c.transform(1,Math.tan(d),0,1,-e.x,-e.y),a=c.normalize(),b.nd=c,e.x-=a.x,e.y-=a.y,b.position=e}else{for(b=b.elements.k;b.next();)d=b.value.position.copy(),d.x+=e.x,d.y+=e.y,b.value.position=d;for(b.reset();b.next();)er(a,b.value,c);for(b.reset();b.next();)d=b.value.position.copy(),d.x-=e.x,d.y-=e.y,b.value.position=d}}}function ar(a){var b=!1;if("polygon"===a.tagName)b=!0;else if("polyline"!==a.tagName)return null;var c=new V,d=a.getAttribute("points");a=new zc;var f=new B(Bc),g=d.split(/\s*[\s,]\s*/);if(4>g.length)return null;for(var h,d=new B(id),k,l,m=1;m<g.length;m+=2){if(k=eval(g[m-1]),l=eval(g[m]),"number"!=typeof k||isNaN(k)||"number"!=typeof l||isNaN(l))return null;1===m?h=new Bc(k,l):d.add(new id(Oc,k,l))}return b&&(b=new id(Oc,h.qa,h.ra),b.close(),d.add(b)),h.Ea=d,f.add(h),a.Bb=f,h=a.normalize(),c.position=new w(-h.x,-h.y),c.nd=a,c}function gr(a){var b=a.qa,c=a.ra,d=a.D,e=a.F,f=Math.abs(d-b)/2,g=Math.abs(e-c)/2,b=Math.min(b,d)+f,c=Math.min(c,e)+g;return new w,e=new Bc(b,c-g),d=new id(cd),d.Cb=b+F.va*f,d.Sb=c-g,d.re=b+f,d.se=c-F.va*g,d.D=b+f,d.F=c,e.Ea.add(d),d=new id(cd),d.Cb=b+f,d.Sb=c+F.va*g,d.re=b+F.va*f,d.se=c+g,d.D=b,d.F=c+g,e.Ea.add(d),d=new id(cd),d.Cb=b-F.va*f,d.Sb=c+g,d.re=b-f,d.se=c+F.va*g,d.D=b-f,d.F=c,e.Ea.add(d),d=new id(cd),d.Cb=b-f,d.Sb=c-F.va*g,d.re=b-F.va*f,d.se=c-g,d.D=b,d.F=c-g,e.Ea.add(d),a.type=Ac,a.Bb.add(e),a}var aa,ba={};if(void 0===document.createElement("canvas").getContext)throw window.console&&window.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get),c.set&&a.__defineSetter__(b,c.set)}),Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}}),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__}),Object.isFrozen||(Object.isFrozen=function(a){return!0===a.pH}),Object.freeze||(Object.freeze=function(a){a.pH=!0}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return f.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),f=this;return c.prototype=this.prototype,b.prototype=new c,b}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(8,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var e={Rz:!1,uK:!1,FF:!1,QE:!1,ZH:!1,assert:!1,hK:null,kK:function(){},mK:function(){},lK:function(){},jK:function(){},rK:function(){},nK:function(){},pK:function(){},oK:function(){},iK:!1,OK:!1,LK:!1,MK:!1,BI:!1,qK:function(){}},e=null;ba.Debug=null;var t={ji:Object.freeze([]),gA:{},CE:0,Gw:{},fA:0,$s:"...",kt:{},Lw:0,lB:[],lx:null,ln:document.createElement("canvas").getContext("2d"),Tp:"",fK:document.createElement("img"),$z:[],gB:"ontouchstart"in window,RK:"ongesturestart"in window,lE:!1,Ts:null,Us:null,Ss:null,lw:"",Um:window.navigator&&0<window.navigator.userAgent.indexOf("534.30")&&0<window.navigator.userAgent.indexOf("Android"),Qw:window.navigator&&0<window.navigator.userAgent.indexOf("MSIE 10.0"),tA:window.navigator&&0<window.navigator.userAgent.indexOf("Trident/7"),Vm:0<=navigator.platform.toUpperCase().indexOf("MAC"),WI:navigator.platform.match(/(iPhone|iPod|iPad)/i),TG:!1,WG:!1,VG:!1,UG:!1,mE:null,Zp:!1,RG:!1,SG:!1,iE:function(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}},m:function(a){throw e&&e.ZH&&alert(a),Error(a)},L:function(a,b){if(a.nb){var c="The object is frozen, so its properties cannot be set: "+a.toString();void 0!==b&&(c+="  to value: "+b),t.m(c)}},l:function(a,b,c,d){a instanceof b||(c=t.$h(c),void 0!==d&&(c+="."+d),t.bc(a,b,c))},i:function(a,b,c,d){typeof a!==b&&(c=t.$h(c),void 0!==d&&(c+="."+d),t.bc(a,b,c))},q:function(a,b,c){"number"==typeof a&&isFinite(a)||(b=t.$h(b),void 0!==c&&(b+="."+c),t.m(b+" must be a real number type, and not NaN or Infinity: "+a))},Aa:function(a,b,c,d){a instanceof ca&&a.Re===b||(c=t.$h(c),void 0!==d&&(c+="."+d),t.bc(a,"a constant of class "+t.xg(b),c))},To:function(a,b){"string"==typeof a?da(a)||t.m('Color "'+a+'" is not a valid color string for '+b):a instanceof ea||t.m("Value for "+b+" must be a color string or a Brush, not "+a)},bc:function(a,b,c,d){b=t.$h(b),c=t.$h(c),void 0!==d&&(c+="."+d),"string"==typeof a?t.m(c+" value is not an instance of "+b+': "'+a+'"'):t.m(c+" value is not an instance of "+b+": "+a)},ka:function(a,b,c,d){c=t.$h(c),void 0!==d&&(c+="."+d),t.m(c+" is not in the range "+b+": "+a)},ad:function(a){t.m(t.xg(a)+" constructor cannot take any arguments.")},Qb:function(a){t.m("Collection was modified during iteration: "+a.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},trace:function(a){window&&window.console&&window.console.log(a)},qb:function(a){return"object"==typeof a&&null!==a},zc:null,Ym:function(a,b,c,d){for(b=0;b<a.length;b++){var e=a[b];t.qb(e)&&(e=t.yf(e,c,d)),a[b]=e}return d||t.zc(a)?a:window.ko.observableArray(a)},yf:function(a,b,c){if(a)for(var d in a)"__gohashid"!==d&&(a[d]=t.hJ(a,d,b,c));return a},hJ:function(a,b,c,d){var e,f=a[b];if(e=t.zc(f)?f:Array.isArray(f)?t.Ym(f,b,c,d):window.ko.observable(f),d){if(d=e.DB){h=c.__gohashid,d[h]&&(d[h].dispose(),delete d[h]);var g,h=!1;for(g in d){h=!0;break}}!h&&e.pu&&(e.pu.dispose(),delete e.pu)}else{e.pu||(e.pu=e.subscribe(function(a){e.to=a},null,"beforeChange")),d=e.DB,d||(e.DB=d={});var h=c.__gohashid;d[h]||(d[h]=e.subscribe(function(d){c.mx(a,b,e.to,d)}))}return e},isArray:function(a){return Array.isArray(a)||t.zc&&t.zc(a)||a instanceof NodeList||a instanceof HTMLCollection},YI:function(a){return Array.isArray(a)||t.zc&&t.zc(a)},Rs:function(a,b,c){t.isArray(a)||t.bc(a,"Array or NodeList or HTMLCollection",b,c)},ub:function(a){return t.zc&&t.zc(a)&&(a=a()),a.length},lb:function(a,b){return t.zc&&t.zc(a)&&(a=a()),Array.isArray(a),a[b]},MD:function(a,b,c){t.zc&&t.zc(a)&&(a=a()),Array.isArray(a)?a[b]=c:t.m("Cannot replace an object in an HTMLCollection or NodeList at "+b)},Pz:function(a,b){if(t.zc&&t.zc(a)&&(a=a()),Array.isArray(a))return a.indexOf(b);for(var c=a.length,d=0;c>d;d++)if(a[d]===b)return d;return-1},Ti:function(a,b,c){t.zc&&t.zc(a)&&(a=a()),Array.isArray(a)?b>=a.length?a.push(c):a.splice(b,0,c):t.m("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Ui:function(a,b){t.zc&&t.zc(a)&&(a=a()),Array.isArray(a)?b>=a.length?a.pop():a.splice(b,1):t.m("Cannot remove an object from an HTMLCollection or NodeList at "+b)},by:[],K:function(){var a=t.by.pop();return void 0===a?new w:a},mc:function(a,b){var c=t.by.pop();return void 0===c?new w(a,b):(c.x=a,c.y=b,c)},B:function(a){t.by.push(a)},zB:[],Cl:function(){var a=t.zB.pop();return void 0===a?new fa:a},ck:function(a){t.zB.push(a)},ey:[],Gf:function(){var a=t.ey.pop();return void 0===a?new x:a},ik:function(a,b,c,d){var e=t.ey.pop();return void 0===e?new x(a,b,c,d):(e.x=a,e.y=b,e.width=c,e.height=d,e)},hc:function(a){t.ey.push(a)},AB:[],oh:function(){var a=t.AB.pop();return void 0===a?new ga:a},We:function(a){t.AB.push(a)},gy:null,u:function(){var a=t.gy;return null!==a?(t.gy=null,a):new ha},v:function(a){a.reset(),t.gy=a},yB:[],Db:function(){var a=t.yB.pop();return void 0===a?[]:a},ya:function(a){a.length=0,t.yB.push(a)},BB:1,Ac:function(a){a.__gohashid=t.BB++},jt:function(a){var b=a.__gohashid;return void 0===b&&(b=t.BB++,a.__gohashid=b),b},od:function(a){return a.__gohashid},g:function(a,b,c){"name"!==b&&"length"!==b&&(a[b]=c)},ga:function(a,b){b.oy=a,ba[a]=b},Ka:function(a,b){function c(){}c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a},Xh:function(a){a.tH=!0},defineProperty:function(a,b,c,d,f){t.i(a,"function","Util.defineProperty:classfunc"),t.i(b,"object","Util.defineProperty:propobj"),t.i(c,"function","Util.defineProperty:getter"),t.i(d,"function","Util.defineProperty:setter");for(var g in b){var h=b[g];if(b={get:c,set:d},void 0!==f)for(var i in f)b[i]=f[i];if(Object.defineProperty(a.prototype,g,b),f=Object.getOwnPropertyDescriptor(a.prototype,g),h&&f&&Object.defineProperty(a.prototype,h,f),e&&h){var j=h.charAt(0).toUpperCase()+h.slice(1);h===j&&t.m('Defining capitalized property "'+j+'"!?'),Object.defineProperty(a.prototype,j,{get:function(){t.Qw||t.tA||t.trace('Getting the property "'+j+'" is probably not what you intended: it is capitalized but should be spelled "'+h+'"')},set:function(){t.m('Setting the property "'+j+'" is probably not what you intended: it is capitalized but should be spelled "'+h+'"')}})}break}},A:function(a,b,c,d){t.i(a,"function","Util.defineReadOnlyProperty:classfunc"),t.i(b,"object","Util.defineReadOnlyProperty:propobj"),t.i(c,"function","Util.defineReadOnlyProperty:getter");for(var f in b){var g=b[f];if(b={get:c,set:function(a){t.m('The property "'+g+'" is read-only and cannot be set to '+a)}},void 0!==d)for(var h in d)b[h]=d[h];if(Object.defineProperty(a.prototype,f,b),d=Object.getOwnPropertyDescriptor(a.prototype,f),g&&d&&Object.defineProperty(a.prototype,g,d),e&&g){var i=g.charAt(0).toUpperCase()+g.slice(1);Object.defineProperty(a.prototype,i,{get:function(){t.Qw||t.tA||t.trace('Getting the property "'+i+'" is probably not what you intended: it is capitalized but should be spelled "'+g+'"')},set:function(){t.m('Setting the read-only property "'+i+'" is probably not what you intended: it is capitalized but should be spelled "'+g+'", and cannot be set anyway')}})}break}},Vd:function(a,b){for(var c in b)b[c]=!0;a.prototype.WC=b},$h:function(a){return void 0===a?"":"string"==typeof a?a:"function"==typeof a?t.xg(a):null===a?"*":""},xg:function(a){if("function"==typeof a){if(a.oy)return a.oy;if(a.name)return a.name;var b=a.toString(),c=b.indexOf("(");if(b=b.substring(9,c).trim())return a.oy=b}else if("object"==typeof a&&a.constructor)return t.xg(a.constructor);return typeof a},w:function(a,b,c){t.i(a,"function","Util.defineEnumValue:classfunc"),t.i(b,"string","Util.defineEnumValue:name"),t.i(c,"number","Util.defineEnumValue:num"),c=new ca(a,b,c),Object.freeze(c),a[b]=c;var d=a.cu;return d||(d=new ia("string",ca),a.cu=d),d.add(b,c),c},Pm:function(a,b){if(!b)return null;t.i(a,"function","Util.findEnumValueForName:classfunc"),t.i(b,"string","Util.findEnumValueForName:name");var c=a.cu;return c?c.za(b):null},gI:function(a,b,c,d){var e,f={};for(e in a){for(var g=!1,h=1;h<arguments.length;h++)if(arguments[h]===e){g=!0;break}g||(f[e]=a[e])}return f},ib:function(a,b){if(!a||!b)return null;var c=void 0;try{"function"==typeof b?c=b(a):"function"==typeof a.getAttribute?(c=a.getAttribute(b),null===c&&(c=void 0)):(c=a[b],t.zc&&t.zc(c)&&(c=c()))}catch(d){e&&t.trace("property get error: "+d.toString())}return c},Qa:function(a,b,c){if(a&&b)try{if("function"==typeof b)b(a,c);else if("function"==typeof a.setAttribute)a.setAttribute(b,c);else if(t.zc){var d=a[b];t.zc(d)?d(c):a[b]=c}else a[b]=c}catch(f){e&&t.trace("property set error: "+f.toString())}},tx:function(a,b){t.i(a,"object","Setting properties requires Objects as arguments"),t.i(b,"object","Setting properties requires Objects as arguments");var c=e;c||(e=t);var d,f=a instanceof y,g=a instanceof z;for(d in b){d||t.m("Setting properties requires non-empty property names");var h=a,i=d;if(f||g){var j=d.indexOf(".");if(j>0){var k=d.substring(0,j);f?h=a.oe(k):(h=a[k])||(h=a.wb[k]),h?i=d.substr(j+1):t.m("Unable to find object named: "+k+" in "+a.toString()+" when trying to set property: "+d)}}if("_"!==i[0]&&!t.Jw(h,i))if(g&&t.Jw(a.wb,i))h=a.wb;else{if(g&&ja(a,i)){a.Jz(i,b[i]);continue}t.m('Trying to set undefined property "'+i+'" on object: '+h.toString())}h[i]=b[d],"_"===i[0]&&(j=h.Ml,j||(j=[],h.Ml=j),j.push(i))}return e=c,a},Jw:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return!0;var d=c.WC;if(d&&d[b])return!0;c=Object.getPrototypeOf(c)}return!1},SD:function(a,b){if(!t.qb(b)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c,d="";for(c in b)if("string"!=typeof c)""===d&&(d=b+"\n"),d+="  "+c+" is not a string property\n";else if("_"!==c.charAt(0)&&!(2>=c.length)){var e=t.ib(b,c);null===e||"function"==typeof e||t.Jw(b,c)||(""===d&&(d=b+"\n"),d+='  unknown property "'+c+'" has value: '+e+" at "+a+"\n")}return d},jw:function(a,b){if(b&&"number"!=typeof b&&"string"!=typeof b&&"boolean"!=typeof b&&"function"!=typeof b)if(void 0!==t.od(b)){if(!t.Gv.contains(b))if(t.Gv.add(b),t.gv.add(t.SD(a,b)),b instanceof B||b instanceof ma||b instanceof ia)for(var c=b.k;c.next();)t.jw(a+"["+c.key+"]",c.value);else for(c in b){var d=t.ib(b,c);if(void 0!==d&&null!==d&&t.qb(d)&&d!==b.WC){if(b instanceof na){if(d===b.no)continue}else if(b instanceof y){if("data"===c||d===b.Ol)continue;if("itemArray"===c||d===b.yi)continue;if(b instanceof C&&d===b.Fj)continue}else if(!(b instanceof z))if(b instanceof oa){if("archetypeGroupData"===c||d===b.jy)continue}else if(b instanceof qa){if("archetypeLinkData"===c||d===b.ly)continue;if("archetypeLabelNodeData"===c||d===b.ky)continue}else if(b instanceof ra){if("archetypeNodeData"===c||d===b.xk)continue}else if(b instanceof E){if("nodeDataArray"===c||d===b.Me)continue;if("linkDataArray"===c||d===b.Xg||d===b.em)continue;if(d===b.Bc)continue;if(d===b.xh)continue}else if(b instanceof ta||b instanceof ua||b instanceof va)continue;t.jw(a+"."+c,d)}}}else if(Array.isArray(b))for(c=0;c<b.length;c++)t.jw(a+"["+c+"]",b[c]);else t.gv.add(t.SD(a,b))},bI:function(a){return void 0===t.Gv?t.Gv=new ma:t.Gv.clear(),t.gv=new xa,t.jw("",a),a=t.gv.toString(),t.gv=null,a},EJ:function(a){for(var b=[],c=0;256>c;c++)b[c]=c;for(var d,e=0,c=0;256>c;c++)e=(e+b[c]+119)%256,d=b[c],b[c]=b[e],b[e]=d;for(var e=c=0,f="",g=0;g<a.length;g++)c=(c+1)%256,e=(e+b[c])%256,d=b[c],b[c]=b[e],b[e]=d,f+=String.fromCharCode(a.charCodeAt(g)^b[(b[c]+b[e])%256]);return f},OI:function(a){for(var b=[],c=0;256>c;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(15&c)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c+=2)d[e++]=b[a.substr(c,2)];return a=d.join(""),""===a?"0":a},Ha:function(a){return t.EJ(t.OI(a))},Gl:null,dw:"7da71ca0ad381e90",cI:"@COLOR1",dI:"@COLOR2"};t.Gl=function(){var a=document.createElement("canvas"),b=a.getContext("2d");b[t.Ha("7ca11abfd022028846")]=t.Ha("398c3597c01238");for(var c=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22412913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],d=1;5>d;d++)b[t.Ha("7ca11abfd7330390")](t.Ha(c[d-1]),10,15*d+0);for(b[t.Ha("7ca11abfd022028846")]=t.Ha("39f046ebb36e4b"),d=1;5>d;d++)b[t.Ha("7ca11abfd7330390")](t.Ha(c[d-1]),10,15*d+0);return(4!==c.length||"5"!==c[0][0]||"7"!==c[3][0])&&(t.w=function(a,b){var c=new ca(a,b,2);Object.freeze(c),a[b]=c;var d=a.cu;return d||(d=new ia("string",ca),a.cu=d),d.add(b,c),c}),a}(),ca.prototype.toString=function(){return t.xg(this.JB)+"."+this.Zb},t.A(ca,{Re:"classType"},function(){return this.JB}),t.A(ca,{name:"name"},function(){return this.Zb}),t.A(ca,{value:"value"},function(){return this.yH}),xa.prototype.toString=function(){return this.IB.join("")},xa.prototype.add=function(a){a&&this.IB.push(a)},t.A(ya,{k:"iterator"},function(){return this}),ya.prototype.reset=ya.prototype.reset=function(){},ya.prototype.next=ya.prototype.hasNext=ya.prototype.next=function(){return!1},ya.prototype.first=ya.prototype.$a=function(){return null},ya.prototype.any=function(){return!1},ya.prototype.all=function(){return!0},ya.prototype.each=function(){},t.A(ya,{count:"count"},function(){return 0}),ya.prototype.cg=function(){},ya.prototype.toString=function(){return"EmptyIterator"},t.ag=new ya,t.Vd(Aa,{key:!0,value:!0}),t.A(Aa,{k:"iterator"},function(){return this}),Aa.prototype.reset=Aa.prototype.reset=function(){this.key=-1},Aa.prototype.next=Aa.prototype.hasNext=Aa.prototype.next=function(){return-1===this.key?(this.key=0,!0):!1},Aa.prototype.first=Aa.prototype.$a=function(){return this.key=0,this.value},Aa.prototype.any=function(a){return this.key=-1,a(this.value)},Aa.prototype.all=function(a){return this.key=-1,a(this.value)},Aa.prototype.each=function(a){this.key=-1,a(this.value)},t.A(Aa,{count:"count"},function(){return 1}),Aa.prototype.cg=function(){this.value=null},Aa.prototype.toString=function(){return"SingletonIterator("+this.value+")"},t.Vd(Ba,{key:!0,value:!0}),t.A(Ba,{k:"iterator"},function(){return this}),t.g(Ba,"predicate",Ba.prototype.tl),t.defineProperty(Ba,{tl:"predicate"},function(){return this.Ij},function(a){this.Ij=a}),Ba.prototype.reset=Ba.prototype.reset=function(){var a=this.Dd;a.Cd=null,this.Ya=a.V,this.Vc=-1},Ba.prototype.next=Ba.prototype.hasNext=Ba.prototype.next=function(){var a=this.Dd;a.V!==this.Ya&&t.Qb(a);var a=a.n,b=a.length,c=++this.Vc,d=this.Ij;if(null!==d)for(;b>c;){var e=a[c];if(d(e))return this.key=this.Vc=c,this.value=e,!0;c++}else{if(b>c)return this.key=c,this.value=a[c],!0;this.cg()}return!1},Ba.prototype.first=Ba.prototype.$a=function(){var a=this.Dd;this.Ya=a.V,this.Vc=0;var a=a.n,b=a.length,c=this.Ij;if(null!==c){for(var d=0;b>d;){var e=a[d];if(c(e))return this.key=this.Vc=d,this.value=e;d++}return null}return b>0?(e=a[0],this.key=0,this.value=e):null},Ba.prototype.any=function(a){var b=this.Dd;b.Cd=null;var c=b.V;this.Vc=-1;for(var d=b.n,e=d.length,f=this.Ij,g=0;e>g;g++){var h=d[g];if(null===f||f(h)){if(a(h))return!0;b.V!==c&&t.Qb(b)}}return!1},Ba.prototype.all=function(a){var b=this.Dd;b.Cd=null;var c=b.V;this.Vc=-1;for(var d=b.n,e=d.length,f=this.Ij,g=0;e>g;g++){var h=d[g];if(null===f||f(h)){if(!a(h))return!1;b.V!==c&&t.Qb(b)}}return!0},Ba.prototype.each=function(a){var b=this.Dd;b.Cd=null;var c=b.V;this.Vc=-1;for(var d=b.n,e=d.length,f=this.Ij,g=0;e>g;g++){var h=d[g];(null===f||f(h))&&(a(h),b.V!==c&&t.Qb(b))}},t.A(Ba,{count:"count"},function(){var a=this.Ij;if(null!==a){for(var b=0,c=this.Dd.n,d=c.length,e=0;d>e;e++)a(c[e])&&b++;return b}return this.Dd.n.length}),Ba.prototype.cg=function(){this.key=-1,this.value=null,this.Ya=-1,this.Ij=null,this.Dd.Cd=this},Ba.prototype.toString=function(){return"ListIterator@"+this.Vc+"/"+this.Dd.count},t.Vd(Ca,{key:!0,value:!0}),t.A(Ca,{k:"iterator"},function(){return this}),Ca.prototype.reset=Ca.prototype.reset=function(){var a=this.Dd;a.fo=null,this.Ya=a.V,this.Vc=a.n.length},Ca.prototype.next=Ca.prototype.hasNext=Ca.prototype.next=function(){var a=this.Dd;a.V!==this.Ya&&t.Qb(a);var b=--this.Vc;return b>=0?(this.key=b,this.value=a.n[b],!0):(this.cg(),!1)},Ca.prototype.first=Ca.prototype.$a=function(){var a=this.Dd;this.Ya=a.V;var b=a.n;return this.Vc=a=b.length-1,a>=0?(b=b[a],this.key=a,this.value=b):null},Ca.prototype.any=function(a){var b=this.Dd;b.fo=null;var c=b.V,d=b.n,e=d.length;for(this.Vc=e,e-=1;e>=0;e++){if(a(d[e]))return!0;b.V!==c&&t.Qb(b)}return!1},Ca.prototype.all=function(a){var b=this.Dd;b.fo=null;var c=b.V,d=b.n,e=d.length;for(this.Vc=e,e-=1;e>=0;e++){if(!a(d[e]))return!1;b.V!==c&&t.Qb(b)}return!0},Ca.prototype.each=function(a){var b=this.Dd;b.fo=null;var c=b.V,d=b.n,e=d.length;for(this.Vc=e,e-=1;e>=0;e++)a(d[e]),b.V!==c&&t.Qb(b)},t.A(Ca,{count:"count"},function(){return this.Dd.n.length}),Ca.prototype.cg=function(){this.key=-1,this.value=null,this.Ya=-1,this.Dd.fo=this},Ca.prototype.toString=function(){return"ListIteratorBackwards("+this.Vc+"/"+this.Dd.count+")"},t.ga("List",B),B.prototype.Pg=function(a){null!==this.da&&("string"==typeof this.da?typeof a===this.da&&null!==a||t.bc(a,this.da):a instanceof this.da||t.bc(a,this.da))},B.prototype.Qd=function(){var a=this.V;a++,a>999999999&&(a=0),this.V=a},B.prototype.freeze=B.prototype.freeze=function(){return this.nb=!0,this},B.prototype.thaw=B.prototype.Ma=function(){return this.nb=!1,this},B.prototype.toString=function(){return"List("+t.$h(this.da)+")#"+t.od(this)},B.prototype.add=B.prototype.add=function(a){null!==a&&(e&&this.Pg(a),t.L(this,a),this.n.push(a),this.Qd())},B.prototype.addAll=B.prototype.Oe=function(a){if(null===a)return this;t.L(this);var b=this.n;if(t.isArray(a))for(var c=t.ub(a),d=0;c>d;d++){var f=t.lb(a,d);e&&this.Pg(f),b.push(f)}else for(a=a.k;a.next();)f=a.value,e&&this.Pg(f),b.push(f);return this.Qd(),this},B.prototype.clear=B.prototype.clear=function(){t.L(this),this.n.length=0,this.Qd()},B.prototype.contains=B.prototype.has=B.prototype.contains=function(a){return null===a?!1:(e&&this.Pg(a),-1!==this.n.indexOf(a))},B.prototype.indexOf=B.prototype.indexOf=function(a){return null===a?-1:(e&&this.Pg(a),this.n.indexOf(a))},B.prototype.elt=B.prototype.get=B.prototype.wa=function(a){e&&t.q(a,B,"elt:i");var b=this.n;return(0>a||a>=b.length)&&t.ka(a,"0 <= i < length",B,"elt:i"),b[a]},B.prototype.setElt=B.prototype.set=B.prototype.Mg=function(a,b){e&&(this.Pg(b),t.q(a,B,"setElt:i"));var c=this.n;(0>a||a>=c.length)&&t.ka(a,"0 <= i < length",B,"setElt:i"),t.L(this,a),c[a]=b},B.prototype.first=B.prototype.$a=function(){var a=this.n;return 0===a.length?null:a[0]},B.prototype.any=function(a){for(var b=this.n,c=this.V,d=b.length,e=0;d>e;e++){if(a(b[e]))return!0;this.V!==c&&t.Qb(this)}return!1},B.prototype.all=function(a){for(var b=this.n,c=this.V,d=b.length,e=0;d>e;e++){if(!a(b[e]))return!1;this.V!==c&&t.Qb(this)}return!0},B.prototype.each=function(a){for(var b=this.n,c=this.V,d=b.length,e=0;d>e;e++)a(b[e]),this.V!==c&&t.Qb(this)},B.prototype.insertAt=B.prototype.Jd=function(a,b){e&&(this.Pg(b),t.q(a,B,"insertAt:i")),0>a&&t.ka(a,">= 0",B,"insertAt:i"),t.L(this,a);var c=this.n;return a>=c.length?c.push(b):c.splice(a,0,b),this.Qd(),!0},B.prototype.remove=B.prototype["delete"]=B.prototype.remove=function(a){if(null===a)return!1;e&&this.Pg(a),t.L(this,a);var b=this.n;return a=b.indexOf(a),-1===a?!1:(a===b.length-1?b.pop():b.splice(a,1),this.Qd(),!0)},B.prototype.removeAt=B.prototype.qd=function(a){e&&t.q(a,B,"removeAt:i");var b=this.n;(0>a||a>=b.length)&&t.ka(a,"0 <= i < length",B,"removeAt:i"),t.L(this,a),a===b.length-1?b.pop():b.splice(a,1),this.Qd()},B.prototype.removeRange=B.prototype.removeRange=function(a,b){e&&(t.q(a,B,"removeRange:from"),t.q(b,B,"removeRange:to"));var c=this.n;(0>a||a>=c.length)&&t.ka(a,"0 <= from < length",B,"elt:from"),(0>b||b>=c.length)&&t.ka(b,"0 <= to < length",B,"elt:to"),t.L(this,a);var d=c.slice((b||a)+1||c.length);c.length=0>a?c.length+a:a,c.push.apply(c,d),this.Qd()},B.prototype.copy=function(){for(var a=new B(this.da),b=this.n,c=this.count,d=0;c>d;d++)a.add(b[d]);return a},B.prototype.toArray=B.prototype.Ie=function(){for(var a=this.n,b=this.count,c=Array(b),d=0;b>d;d++)c[d]=a[d];return c},B.prototype.toSet=function(){for(var a=new ma(this.da),b=this.n,c=this.count,d=0;c>d;d++)a.add(b[d]);return a},B.prototype.sort=B.prototype.sort=function(a){return e&&t.i(a,"function",B,"sort:sortfunc"),t.L(this),this.n.sort(a),this.Qd(),this},B.prototype.sortRange=B.prototype.Up=function(a,b,c){var d=this.n,f=d.length;void 0===b&&(b=0),void 0===c&&(c=f),e&&(t.i(a,"function",B,"sortRange:sortfunc"),t.q(b,B,"sortRange:from"),t.q(c,B,"sortRange:to")),t.L(this);var g=c-b;if(1>=g)return this;if((0>b||b>=f-1)&&t.ka(b,"0 <= from < length",B,"sortRange:from"),2===g)return c=d[b],f=d[b+1],0<a(c,f)&&(d[b]=f,d[b+1]=c,this.Qd()),this;if(0===b)if(c>=f)d.sort(a);else for(g=d.slice(0,c),g.sort(a),a=0;c>a;a++)d[a]=g[a];else if(c>=f)for(g=d.slice(b),g.sort(a),a=b;f>a;a++)d[a]=g[a-b];else for(g=d.slice(b,c),g.sort(a),a=b;c>a;a++)d[a]=g[a-b];return this.Qd(),this},B.prototype.reverse=B.prototype.reverse=function(){return t.L(this),this.n.reverse(),this.Qd(),this},t.A(B,{count:"count"},function(){return this.n.length}),t.A(B,{size:"size"},function(){return this.n.length}),t.A(B,{length:"length"},function(){return this.n.length}),t.A(B,{k:"iterator"},function(){if(0>=this.n.length)return t.ag;var a=this.Cd;return null!==a?(a.reset(),a):new Ba(this)}),t.A(B,{Xm:"iteratorBackwards"},function(){if(0>=this.n.length)return t.ag;var a=this.fo;return null!==a?(a.reset(),a):new Ca(this)}),t.Vd(Da,{key:!0,value:!0}),t.A(Da,{k:"iterator"},function(){return this}),Da.prototype.reset=Da.prototype.reset=function(){var a=this.p;a.Cd=null,this.Ya=a.V,this.yb=null},Da.prototype.next=Da.prototype.hasNext=Da.prototype.next=function(){var a=this.p;a.V!==this.Ya&&t.Qb(a);var b=this.yb,b=null===b?a.cb:b.Tb;return null!==b?(this.yb=b,this.value=b.value,this.key=b.key,!0):(this.cg(),!1)},Da.prototype.first=Da.prototype.$a=function(){var a=this.p;if(this.Ya=a.V,a=a.cb,null!==a){this.yb=a;var b=a.value;return this.key=a.key,this.value=b}return null},Da.prototype.any=function(a){var b=this.p;b.Cd=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;){if(a(d.value))return!0;b.V!==c&&t.Qb(b),d=d.Tb}return!1},Da.prototype.all=function(a){var b=this.p;b.Cd=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;){if(!a(d.value))return!1;b.V!==c&&t.Qb(b),d=d.Tb}return!0},Da.prototype.each=function(a){var b=this.p;b.Cd=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;)a(d.value),b.V!==c&&t.Qb(b),d=d.Tb},t.A(Da,{count:"count"},function(){return this.p.ed}),Da.prototype.cg=function(){this.value=this.key=null,this.Ya=-1,this.p.Cd=this},Da.prototype.toString=function(){return null!==this.yb?"SetIterator@"+this.yb.value:"SetIterator"},t.ga("Set",ma),ma.prototype.Pg=function(a){null!==this.da&&("string"==typeof this.da?typeof a===this.da&&null!==a||t.bc(a,this.da):a instanceof this.da||t.bc(a,this.da))},ma.prototype.Qd=function(){var a=this.V;a++,a>999999999&&(a=0),this.V=a},ma.prototype.freeze=ma.prototype.freeze=function(){return this.nb=!0,this},ma.prototype.thaw=ma.prototype.Ma=function(){return this.nb=!1,this},ma.prototype.toString=function(){return"Set("+t.$h(this.da)+")#"+t.od(this)},ma.prototype.add=ma.prototype.add=function(a){if(null===a)return!1;e&&this.Pg(a),t.L(this,a);var b=a;return t.qb(a)&&(b=t.jt(a)),void 0===this.fd[b]?(this.ed++,a=new Ea(a,a),this.fd[b]=a,b=this.Ih,null===b?this.cb=a:(a.uo=b,b.Tb=a),this.Ih=a,this.Qd(),!0):!1},ma.prototype.addAll=ma.prototype.Oe=function(a){if(null===a)return this;if(t.L(this),t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.add(t.lb(a,c));else for(a=a.k;a.next();)this.add(a.value);return this},ma.prototype.contains=ma.prototype.has=ma.prototype.contains=function(a){if(null===a)return!1;e&&this.Pg(a);var b=a;return t.qb(a)&&(b=t.od(a),void 0===b)?!1:void 0!==this.fd[b]},ma.prototype.containsAll=function(a){if(null===a)return!0;for(a=a.k;a.next();)if(!this.contains(a.value))return!1;return!0},ma.prototype.containsAny=function(a){if(null===a)return!0;for(a=a.k;a.next();)if(this.contains(a.value))return!0;return!1},ma.prototype.first=ma.prototype.$a=function(){var a=this.cb;return null===a?null:a.value},ma.prototype.any=function(a){for(var b=this.V,c=this.cb;null!==c;){if(a(c.value))return!0;this.V!==b&&t.Qb(this),c=c.Tb}return!1},ma.prototype.all=function(a){for(var b=this.V,c=this.cb;null!==c;){if(!a(c.value))return!1;this.V!==b&&t.Qb(this),c=c.Tb}return!0},ma.prototype.each=function(a){for(var b=this.V,c=this.cb;null!==c;)a(c.value),this.V!==b&&t.Qb(this),
c=c.Tb},ma.prototype.remove=ma.prototype["delete"]=ma.prototype.remove=function(a){if(null===a)return!1;e&&this.Pg(a),t.L(this,a);var b=a;if(t.qb(a)&&(b=t.od(a),void 0===b))return!1;if(a=this.fd[b],void 0===a)return!1;var c=a.Tb,d=a.uo;return null!==c&&(c.uo=d),null!==d&&(d.Tb=c),this.cb===a&&(this.cb=c),this.Ih===a&&(this.Ih=d),delete this.fd[b],this.ed--,this.Qd(),!0},ma.prototype.removeAll=function(a){if(null===a)return this;if(t.L(this),t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.remove(t.lb(a,c));else for(a=a.k;a.next();)this.remove(a.value);return this},ma.prototype.retainAll=function(a){if(null===a||0===this.count)return this;t.L(this);var b=new ma(this.da);b.Oe(a),a=new B(this.da);for(var c=this.k;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.k;b.next();)this.remove(b.value);return this},ma.prototype.clear=ma.prototype.clear=function(){t.L(this),this.fd={},this.ed=0,this.Ih=this.cb=null,this.Qd()},ma.prototype.copy=function(){var a,b=new ma(this.da),c=this.fd;for(a in c)b.add(c[a].value);return b},ma.prototype.toArray=ma.prototype.Ie=function(){var a,b=Array(this.ed),c=this.fd,d=0;for(a in c)b[d]=c[a].value,d++;return b},ma.prototype.toList=function(){var a,b=new B(this.da),c=this.fd;for(a in c)b.add(c[a].value);return b},t.A(ma,{count:"count"},function(){return this.ed}),t.A(ma,{size:"size"},function(){return this.ed}),t.A(ma,{k:"iterator"},function(){if(0>=this.ed)return t.ag;var a=this.Cd;return null!==a?(a.reset(),a):new Da(this)}),t.Vd(Fa,{key:!0,value:!0}),t.A(Fa,{k:"iterator"},function(){return this}),Fa.prototype.reset=Fa.prototype.reset=function(){this.Ya=this.Xa.V,this.yb=null},Fa.prototype.next=Fa.prototype.hasNext=Fa.prototype.next=function(){var a=this.Xa;a.V!==this.Ya&&t.Qb(a);var b=this.yb,b=null===b?a.cb:b.Tb;return null!==b?(this.yb=b,this.value=this.key=a=b.key,!0):(this.cg(),!1)},Fa.prototype.first=Fa.prototype.$a=function(){var a=this.Xa;return this.Ya=a.V,a=a.cb,null!==a?(this.yb=a,this.value=this.key=a=a.key):null},Fa.prototype.any=function(a){var b=this.Xa,c=b.V;this.yb=null;for(var d=b.cb;null!==d;){if(a(d.key))return!0;b.V!==c&&t.Qb(b),d=d.Tb}return!1},Fa.prototype.all=function(a){var b=this.Xa,c=b.V;this.yb=null;for(var d=b.cb;null!==d;){if(!a(d.key))return!1;b.V!==c&&t.Qb(b),d=d.Tb}return!0},Fa.prototype.each=function(a){var b=this.Xa,c=b.V;this.yb=null;for(var d=b.cb;null!==d;)a(d.key),b.V!==c&&t.Qb(b),d=d.Tb},t.A(Fa,{count:"count"},function(){return this.Xa.ed}),Fa.prototype.cg=function(){this.value=this.key=null,this.Ya=-1},Fa.prototype.toString=function(){return null!==this.yb?"MapKeySetIterator@"+this.yb.value:"MapKeySetIterator"},t.Ka(Ha,ma),Ha.prototype.freeze=function(){return this},Ha.prototype.Ma=function(){return this},Ha.prototype.toString=function(){return"MapKeySet("+this.Xa.toString()+")"},Ha.prototype.add=Ha.prototype.set=Ha.prototype.add=function(){return t.m("This Set is read-only: "+this.toString()),!1},Ha.prototype.contains=Ha.prototype.has=Ha.prototype.contains=function(a){return this.Xa.contains(a)},Ha.prototype.remove=Ha.prototype["delete"]=Ha.prototype.remove=function(){return t.m("This Set is read-only: "+this.toString()),!1},Ha.prototype.clear=Ha.prototype.clear=function(){t.m("This Set is read-only: "+this.toString())},Ha.prototype.first=Ha.prototype.$a=function(){var a=this.Xa.cb;return null!==a?a.key:null},Ha.prototype.any=function(a){for(var b=this.Xa.cb;null!==b;){if(a(b.key))return!0;b=b.Tb}return!1},Ha.prototype.all=function(a){for(var b=this.Xa.cb;null!==b;){if(!a(b.key))return!1;b=b.Tb}return!0},Ha.prototype.each=function(a){for(var b=this.Xa.cb;null!==b;)a(b.key),b=b.Tb},Ha.prototype.copy=function(){return new Ha(this.Xa)},Ha.prototype.toSet=function(){var a,b=new ma(this.Xa.Hh),c=this.Xa.fd;for(a in c)b.add(c[a].key);return b},Ha.prototype.toArray=Ha.prototype.Ie=function(){var a,b=this.Xa.fd,c=Array(this.Xa.ed),d=0;for(a in b)c[d]=b[a].key,d++;return c},Ha.prototype.toList=function(){var a,b=new B(this.da),c=this.Xa.fd;for(a in c)b.add(c[a].key);return b},t.A(Ha,{count:"count"},function(){return this.Xa.ed}),t.A(Ha,{size:"size"},function(){return this.Xa.ed}),t.A(Ha,{k:"iterator"},function(){return 0>=this.Xa.ed?t.ag:new Fa(this.Xa)}),t.Vd(Ka,{key:!0,value:!0}),t.A(Ka,{k:"iterator"},function(){return this}),Ka.prototype.reset=Ka.prototype.reset=function(){var a=this.Xa;a.ho=null,this.Ya=a.V,this.yb=null},Ka.prototype.next=Ka.prototype.hasNext=Ka.prototype.next=function(){var a=this.Xa;a.V!==this.Ya&&t.Qb(a);var b=this.yb,b=null===b?a.cb:b.Tb;return null!==b?(this.yb=b,this.value=b.value,this.key=b.key,!0):(this.cg(),!1)},Ka.prototype.first=Ka.prototype.$a=function(){var a=this.Xa;if(this.Ya=a.V,a=a.cb,null!==a){this.yb=a;var b=a.value;return this.key=a.key,this.value=b}return null},Ka.prototype.any=function(a){var b=this.Xa;b.ho=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;){if(a(d.value))return!0;b.V!==c&&t.Qb(b),d=d.Tb}return!1},Ka.prototype.all=function(a){var b=this.Xa;b.ho=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;){if(!a(d.value))return!1;b.V!==c&&t.Qb(b),d=d.Tb}return!0},Ka.prototype.each=function(a){var b=this.Xa;b.ho=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;)a(d.value),b.V!==c&&t.Qb(b),d=d.Tb},t.A(Ka,{count:"count"},function(){return this.Xa.ed}),Ka.prototype.cg=function(){this.value=this.key=null,this.Ya=-1,this.Xa.ho=this},Ka.prototype.toString=function(){return null!==this.yb?"MapValueSetIterator@"+this.yb.value:"MapValueSetIterator"},t.Vd(Ea,{key:!0,value:!0}),Ea.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"},t.Vd(La,{key:!0,value:!0}),t.A(La,{k:"iterator"},function(){return this}),La.prototype.reset=La.prototype.reset=function(){var a=this.Xa;a.Cd=null,this.Ya=a.V,this.yb=null},La.prototype.next=La.prototype.hasNext=La.prototype.next=function(){var a=this.Xa;a.V!==this.Ya&&t.Qb(a);var b=this.yb,b=null===b?a.cb:b.Tb;return null!==b?(this.yb=b,this.key=b.key,this.value=b.value,!0):(this.cg(),!1)},La.prototype.first=La.prototype.$a=function(){var a=this.Xa;return this.Ya=a.V,a=a.cb,null!==a?(this.yb=a,this.key=a.key,this.value=a.value,a):null},La.prototype.any=function(a){var b=this.Xa;b.Cd=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;){if(a(d))return!0;b.V!==c&&t.Qb(b),d=d.Tb}return!1},La.prototype.all=function(a){var b=this.Xa;b.Cd=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;){if(!a(d))return!1;b.V!==c&&t.Qb(b),d=d.Tb}return!0},La.prototype.each=function(a){var b=this.Xa;b.Cd=null;var c=b.V;this.yb=null;for(var d=b.cb;null!==d;)a(d),b.V!==c&&t.Qb(b),d=d.Tb},t.A(La,{count:"count"},function(){return this.Xa.ed}),La.prototype.cg=function(){this.value=this.key=null,this.Ya=-1,this.Xa.Cd=this},La.prototype.toString=function(){return null!==this.yb?"MapIterator@"+this.yb:"MapIterator"},t.ga("Map",ia),ia.prototype.Qd=function(){var a=this.V;a++,a>999999999&&(a=0),this.V=a},ia.prototype.freeze=ia.prototype.freeze=function(){return this.nb=!0,this},ia.prototype.thaw=ia.prototype.Ma=function(){return this.nb=!1,this},ia.prototype.toString=function(){return"Map("+t.$h(this.Hh)+","+t.$h(this.Ri)+")#"+t.od(this)},ia.prototype.add=ia.prototype.set=ia.prototype.add=function(a,b){e&&(Ma(this,a),null!==this.Ri&&("string"==typeof this.Ri?typeof b===this.Ri&&null!==b||t.bc(b,this.Ri):b instanceof this.Ri||t.bc(b,this.Ri))),t.L(this,a);var c=a;t.qb(a)&&(c=t.jt(a));var d=this.fd[c];return void 0===d?(this.ed++,d=new Ea(a,b),this.fd[c]=d,c=this.Ih,null===c?this.cb=d:(d.uo=c,c.Tb=d),this.Ih=d,this.Qd(),!0):(d.value=b,!1)},ia.prototype.addAll=ia.prototype.Oe=function(a){if(null===a)return this;if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++){var d=t.lb(a,c);this.add(d.key,d.value)}else for(e&&t.l(a,ia,ia,"addAll:map"),a=a.k;a.next();)this.add(a.key,a.value);return this},ia.prototype.first=ia.prototype.$a=function(){return this.cb},ia.prototype.any=function(a){for(var b=this.V,c=this.cb;null!==c;){if(a(c))return!0;this.V!==b&&t.Qb(this),c=c.Tb}return!1},ia.prototype.all=function(a){for(var b=this.V,c=this.cb;null!==c;){if(!a(c))return!1;this.V!==b&&t.Qb(this),c=c.Tb}return!0},ia.prototype.each=function(a){for(var b=this.V,c=this.cb;null!==c;)a(c),this.V!==b&&t.Qb(this),c=c.Tb},ia.prototype.contains=ia.prototype.has=ia.prototype.contains=function(a){e&&Ma(this,a);var b=a;return t.qb(a)&&(b=t.od(a),void 0===b)?!1:void 0!==this.fd[b]},ia.prototype.getValue=ia.prototype.get=ia.prototype.za=function(a){e&&Ma(this,a);var b=a;return t.qb(a)&&(b=t.od(a),void 0===b)?null:(a=this.fd[b],void 0===a?null:a.value)},ia.prototype.remove=ia.prototype["delete"]=ia.prototype.remove=function(a){if(null===a)return!1;e&&Ma(this,a),t.L(this,a);var b=a;if(t.qb(a)&&(b=t.od(a),void 0===b))return!1;if(a=this.fd[b],void 0===a)return!1;var c=a.Tb,d=a.uo;return null!==c&&(c.uo=d),null!==d&&(d.Tb=c),this.cb===a&&(this.cb=c),this.Ih===a&&(this.Ih=d),delete this.fd[b],this.ed--,this.Qd(),!0},ia.prototype.clear=ia.prototype.clear=function(){t.L(this),this.fd={},this.ed=0,this.Ih=this.cb=null,this.Qd()},ia.prototype.copy=function(){var a,b=new ia(this.Hh,this.Ri),c=this.fd;for(a in c){var d=c[a];b.add(d.key,d.value)}return b},ia.prototype.toArray=ia.prototype.Ie=function(){var a,b=this.fd,c=Array(this.ed),d=0;for(a in b){var e=b[a];c[d]=new Ea(e.key,e.value),d++}return c},ia.prototype.toKeySet=ia.prototype.Fl=function(){return new Ha(this)},t.A(ia,{count:"count"},function(){return this.ed}),t.A(ia,{size:"size"},function(){return this.ed}),t.A(ia,{k:"iterator"},function(){if(0>=this.count)return t.ag;var a=this.Cd;return null!==a?(a.reset(),a):new La(this)}),t.A(ia,{BK:"iteratorKeys"},function(){return 0>=this.count?t.ag:new Fa(this)}),t.A(ia,{jF:"iteratorValues"},function(){if(0>=this.count)return t.ag;var a=this.ho;return null!==a?(a.reset(),a):new Ka(this)}),t.ga("Point",w),t.Xh(w),t.Vd(w,{x:!0,y:!0}),w.prototype.assign=function(a){this.x=a.x,this.y=a.y},w.prototype.p=function(a,b){this.x=a,this.y=b},w.prototype.setTo=w.prototype.Sp=function(a,b){return e&&(t.i(a,"number",w,"setTo:x"),t.i(b,"number",w,"setTo:y")),t.L(this),this.x=a,this.y=b,this},w.prototype.set=w.prototype.set=function(a){return e&&t.l(a,w,w,"set:p"),t.L(this),this.x=a.x,this.y=a.y,this},w.prototype.copy=function(){var a=new w;return a.x=this.x,a.y=this.y,a},w.prototype.Ja=function(){return this.nb=!0,Object.freeze(this),this},w.prototype.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},w.prototype.freeze=function(){return this.nb=!0,this},w.prototype.Ma=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.nb=!1,this},w.parse=function(a){if("string"==typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;return(d=a[b++])&&(e=parseFloat(d)),new w(c,e)}return new w},w.stringify=function(a){return a instanceof w?a.x.toString()+" "+a.y.toString():a.toString()},w.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},w.prototype.equals=w.prototype.M=function(a){return a instanceof w?this.x===a.x&&this.y===a.y:!1},w.prototype.equalTo=function(a,b){return this.x===a&&this.y===b},w.prototype.equalsApprox=w.prototype.tf=function(a){return F.I(this.x,a.x)&&F.I(this.y,a.y)},w.prototype.add=w.prototype.add=function(a){return e&&t.l(a,w,w,"add:p"),t.L(this),this.x+=a.x,this.y+=a.y,this},w.prototype.subtract=w.prototype.Vt=function(a){return e&&t.l(a,w,w,"subtract:p"),t.L(this),this.x-=a.x,this.y-=a.y,this},w.prototype.offset=w.prototype.offset=function(a,b){return e&&(t.q(a,w,"offset:dx"),t.q(b,w,"offset:dy")),t.L(this),this.x+=a,this.y+=b,this},w.prototype.rotate=w.prototype.rotate=function(a){if(e&&t.q(a,w,"rotate:angle"),t.L(this),0===a)return this;var b=this.x,c=this.y;if(0===b&&0===c)return this;var d;return 90===a?(a=0,d=1):180===a?(a=-1,d=0):270===a?(a=0,d=-1):(d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d)),this.x=a*b-d*c,this.y=d*b+a*c,this},w.prototype.scale=w.prototype.scale=function(a,b){return e&&(t.q(a,w,"scale:sx"),t.q(b,w,"scale:sy")),this.x*=a,this.y*=b,this},w.prototype.distanceSquaredPoint=w.prototype.Zj=function(a){e&&t.l(a,w,w,"distanceSquaredPoint:p");var b=a.x-this.x;return a=a.y-this.y,b*b+a*a},w.prototype.distanceSquared=w.prototype.Zs=function(a,b){e&&(t.q(a,w,"distanceSquared:px"),t.q(b,w,"distanceSquared:py"));var c=a-this.x,d=b-this.y;return c*c+d*d},w.prototype.normalize=w.prototype.normalize=function(){t.L(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);return c>0&&(this.x=a/c,this.y=b/c),this},w.prototype.directionPoint=w.prototype.aj=function(a){return e&&t.l(a,w,w,"directionPoint:p"),Oa(a.x-this.x,a.y-this.y)},w.prototype.direction=w.prototype.direction=function(a,b){return e&&(t.q(a,w,"direction:px"),t.q(b,w,"direction:py")),Oa(a-this.x,b-this.y)},w.prototype.projectOntoLineSegment=function(a,b,c,d){return e&&(t.q(a,w,"projectOntoLineSegment:px"),t.q(b,w,"projectOntoLineSegment:py"),t.q(c,w,"projectOntoLineSegment:qx"),t.q(d,w,"projectOntoLineSegment:qy")),F.dn(a,b,c,d,this.x,this.y,this),this},w.prototype.projectOntoLineSegmentPoint=function(a,b){return e&&(t.l(a,w,w,"projectOntoLineSegmentPoint:p"),t.l(b,w,w,"projectOntoLineSegmentPoint:q")),F.dn(a.x,a.y,b.x,b.y,this.x,this.y,this),this},w.prototype.snapToGrid=function(a,b,c,d){return e&&(t.q(a,w,"snapToGrid:originx"),t.q(b,w,"snapToGrid:originy"),t.q(c,w,"snapToGrid:cellwidth"),t.q(d,w,"snapToGrid:cellheight")),F.dt(this.x,this.y,a,b,c,d,this),this},w.prototype.snapToGridPoint=function(a,b){return e&&(t.l(a,w,w,"snapToGridPoint:p"),t.l(b,fa,w,"snapToGridPoint:q")),F.dt(this.x,this.y,a.x,a.y,b.width,b.height,this),this},w.prototype.setRectSpot=w.prototype.Qt=function(a,b){return e&&(t.l(a,x,w,"setRectSpot:r"),t.l(b,H,w,"setRectSpot:spot")),t.L(this),this.x=a.x+b.x*a.width+b.offsetX,this.y=a.y+b.y*a.height+b.offsetY,this},w.prototype.setSpot=w.prototype.Rt=function(a,b,c,d,f){return e&&(t.q(a,w,"setSpot:x"),t.q(b,w,"setSpot:y"),t.q(c,w,"setSpot:w"),t.q(d,w,"setSpot:h"),(0>c||0>d)&&t.m("Point.setSpot:Width and height cannot be negative"),t.l(f,H,w,"setSpot:spot")),t.L(this),this.x=a+f.x*c+f.offsetX,this.y=b+f.y*d+f.offsetY,this},w.prototype.transform=function(a){return e&&t.l(a,ga,w,"transform:t"),a.Sa(this),this};var Ra;w.distanceLineSegmentSquared=Ra=function(a,b,c,d,f,g){e&&(t.q(a,w,"distanceLineSegmentSquared:px"),t.q(b,w,"distanceLineSegmentSquared:py"),t.q(c,w,"distanceLineSegmentSquared:ax"),t.q(d,w,"distanceLineSegmentSquared:ay"),t.q(f,w,"distanceLineSegmentSquared:bx"),t.q(g,w,"distanceLineSegmentSquared:by"));var h=f-c,i=g-d,j=h*h+i*i;c-=a,d-=b;var k=-c*h-d*i;return 0>=k||k>=j?(h=f-a,i=g-b,Math.min(c*c+d*d,h*h+i*i)):(a=h*d-i*c,a*a/j)};var Sa;w.distanceSquared=Sa=function(a,b,c,d){return e&&(t.q(a,w,"distanceSquared:px"),t.q(b,w,"distanceSquared:py"),t.q(c,w,"distanceSquared:qx"),t.q(d,w,"distanceSquared:qy")),a=c-a,b=d-b,a*a+b*b};var Ta;w.direction=Ta=function(a,b,c,d){return e&&(t.q(a,w,"direction:px"),t.q(b,w,"direction:py"),t.q(c,w,"direction:qx"),t.q(d,w,"direction:qy")),a=c-a,b=d-b,0===a?b>0?90:0>b?270:0:0===b?a>0?0:180:isNaN(a)||isNaN(b)?0:(d=180*Math.atan(Math.abs(b/a))/Math.PI,0>a?d=0>b?d+180:180-d:0>b&&(d=360-d),d)},w.prototype.isReal=w.prototype.N=function(){return isFinite(this.x)&&isFinite(this.y)},t.ga("Size",fa),t.Xh(fa),t.Vd(fa,{width:!0,height:!0}),fa.prototype.assign=function(a){this.width=a.width,this.height=a.height},fa.prototype.p=function(a,b){this.width=a,this.height=b},fa.prototype.setTo=fa.prototype.Sp=function(a,b){return e&&(t.i(a,"number",fa,"setTo:w"),t.i(b,"number",fa,"setTo:h")),0>a&&t.ka(a,">= 0",fa,"setTo:w"),0>b&&t.ka(b,">= 0",fa,"setTo:h"),t.L(this),this.width=a,this.height=b,this},fa.prototype.set=fa.prototype.set=function(a){return e&&t.l(a,fa,fa,"set:s"),t.L(this),this.width=a.width,this.height=a.height,this},fa.prototype.copy=function(){var a=new fa;return a.width=this.width,a.height=this.height,a},fa.prototype.Ja=function(){return this.nb=!0,Object.freeze(this),this},fa.prototype.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},fa.prototype.freeze=function(){return this.nb=!0,this},fa.prototype.Ma=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.nb=!1,this},fa.parse=function(a){if("string"==typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;return(d=a[b++])&&(e=parseFloat(d)),new fa(c,e)}return new fa},fa.stringify=function(a){return a instanceof fa?a.width.toString()+" "+a.height.toString():a.toString()},fa.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},fa.prototype.equals=fa.prototype.M=function(a){return a instanceof fa?this.width===a.width&&this.height===a.height:!1},fa.prototype.equalTo=function(a,b){return this.width===a&&this.height===b},fa.prototype.equalsApprox=fa.prototype.tf=function(a){return F.I(this.width,a.width)&&F.I(this.height,a.height)},fa.prototype.isReal=fa.prototype.N=function(){return isFinite(this.width)&&isFinite(this.height)},t.ga("Rect",x),t.Xh(x),t.Vd(x,{x:!0,y:!0,width:!0,height:!0}),x.prototype.assign=function(a){this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height},x.prototype.p=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d},x.prototype.setTo=x.prototype.Sp=function(a,b,c,d){return e&&(t.i(a,"number",x,"setTo:x"),t.i(b,"number",x,"setTo:y"),t.i(c,"number",x,"setTo:w"),t.i(d,"number",x,"setTo:h")),0>c&&t.ka(c,">= 0",x,"setTo:w"),0>d&&t.ka(d,">= 0",x,"setTo:h"),t.L(this),this.x=a,this.y=b,this.width=c,this.height=d,this},x.prototype.set=x.prototype.set=function(a){return e&&t.l(a,x,x,"set:r"),t.L(this),this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},x.prototype.setPoint=x.prototype.Ef=function(a){return e&&t.l(a,w,x,"setPoint:p"),t.L(this),this.x=a.x,this.y=a.y,this},x.prototype.setSize=function(a){return e&&t.l(a,fa,x,"setSize:s"),t.L(this),this.width=a.width,this.height=a.height,this},x.prototype.copy=function(){var a=new x;return a.x=this.x,a.y=this.y,a.width=this.width,a.height=this.height,a},x.prototype.Ja=function(){return this.nb=!0,Object.freeze(this),this},x.prototype.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},x.prototype.freeze=function(){return this.nb=!0,this},x.prototype.Ma=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.nb=!1,this},x.parse=function(a){if("string"==typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));for(var g=0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new x(c,e,f,g)}return new x},x.stringify=function(a){return a instanceof x?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()},x.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},x.prototype.equals=x.prototype.M=function(a){return a instanceof x?this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height:!1},x.prototype.equalTo=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d},x.prototype.equalsApprox=x.prototype.tf=function(a){return F.I(this.x,a.x)&&F.I(this.y,a.y)&&F.I(this.width,a.width)&&F.I(this.height,a.height)},x.prototype.containsPoint=x.prototype.Fa=function(a){return e&&t.l(a,w,x,"containsPoint:p"),this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y},x.prototype.containsRect=x.prototype.Vj=function(a){return e&&t.l(a,x,x,"containsRect:r"),this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height},x.prototype.contains=x.prototype.contains=function(a,b,c,d){return e?(t.q(a,x,"contains:x"),t.q(b,x,"contains:y"),void 0===c?c=0:t.q(c,x,"contains:w"),void 0===d?d=0:t.q(d,x,"contains:h"),(0>c||0>d)&&t.m("Rect.contains:Width and height cannot be negative")):(void 0===c&&(c=0),void 0===d&&(d=0)),this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height},x.prototype.reset=function(){t.L(this),this.height=this.width=this.y=this.x=0},x.prototype.offset=x.prototype.offset=function(a,b){return e&&(t.q(a,x,"offset:dx"),t.q(b,x,"offset:dy")),t.L(this),this.x+=a,this.y+=b,this},x.prototype.inflate=x.prototype.Sf=function(a,b){return e&&(t.q(a,x,"inflate:w"),t.q(b,x,"inflate:h")),Wa(this,b,a,b,a)},x.prototype.addMargin=x.prototype.bw=function(a){return e&&t.l(a,ab,x,"addMargin:m"),Wa(this,a.top,a.right,a.bottom,a.left)},x.prototype.subtractMargin=x.prototype.YJ=function(a){return e&&t.l(a,ab,x,"subtractMargin:m"),Wa(this,-a.top,-a.right,-a.bottom,-a.left)},x.prototype.grow=function(a,b,c,d){return e&&(t.q(a,x,"grow:t"),t.q(b,x,"grow:r"),t.q(c,x,"grow:b"),t.q(d,x,"grow:l")),Wa(this,a,b,c,d)},x.prototype.intersectRect=function(a){return e&&t.l(a,x,x,"intersectRect:r"),cb(this,a.x,a.y,a.width,a.height)},x.prototype.intersect=function(a,b,c,d){return e&&(t.q(a,x,"intersect:x"),t.q(b,x,"intersect:y"),t.q(c,x,"intersect:w"),t.q(d,x,"intersect:h"),(0>c||0>d)&&t.m("Rect.intersect:Width and height cannot be negative")),cb(this,a,b,c,d)},x.prototype.intersectsRect=x.prototype.Tf=function(a){return e&&t.l(a,x,x,"intersectsRect:r"),this.$E(a.x,a.y,a.width,a.height)},x.prototype.intersects=x.prototype.$E=function(a,b,c,d){e&&(t.q(a,x,"intersects:x"),t.q(b,x,"intersects:y"),t.q(a,x,"intersects:w"),t.q(b,x,"intersects:h"),(0>c||0>d)&&t.m("Rect.intersects:Width and height cannot be negative"));var f=this.width,g=this.x;return 1/0!==f&&1/0!==c&&(f+=g,c+=a,isNaN(c)||isNaN(f)||g>c||a>f)?!1:(a=this.height,c=this.y,1/0!==a&&1/0!==d&&(a+=c,d+=b,isNaN(d)||isNaN(a)||c>d||b>a)?!1:!0)},x.prototype.unionPoint=x.prototype.kj=function(a){return e&&t.l(a,w,x,"unionPoint:p"),hb(this,a.x,a.y,0,0)},x.prototype.unionRect=x.prototype.ii=function(a){return e&&t.l(a,x,x,"unionRect:r"),hb(this,a.x,a.y,a.width,a.height)},x.prototype.union=x.prototype.OG=function(a,b,c,d){return t.L(this),e?(t.q(a,x,"union:x"),t.q(b,x,"union:y"),void 0===c?c=0:t.q(c,x,"union:w"),void 0===d?d=0:t.q(d,x,"union:h"),(0>c||0>d)&&t.m("Rect.union:Width and height cannot be negative")):(void 0===c&&(c=0),void 0===d&&(d=0)),hb(this,a,b,c,d)},x.prototype.setSpot=x.prototype.Rt=function(a,b,c){return e&&(t.q(a,x,"setSpot:x"),t.q(b,x,"setSpot:y"),t.l(c,H,x,"setSpot:spot")),t.L(this),this.x=a-c.offsetX-c.x*this.width,this.y=b-c.offsetY-c.y*this.height,this};var mb;x.contains=mb=function(a,b,c,d,f,g,h,i){return e?(t.q(a,x,"contains:rx"),t.q(b,x,"contains:ry"),t.q(c,x,"contains:rw"),t.q(d,x,"contains:rh"),t.q(f,x,"contains:x"),t.q(g,x,"contains:y"),void 0===h?h=0:t.q(h,x,"contains:w"),void 0===i?i=0:t.q(i,x,"contains:h"),(0>c||0>d||0>h||0>i)&&t.m("Rect.contains:Width and height cannot be negative")):(void 0===h&&(h=0),void 0===i&&(i=0)),f>=a&&a+c>=f+h&&g>=b&&b+d>=g+i},x.intersects=function(a,b,c,d,f,g,h,i){return e&&(t.q(a,x,"intersects:rx"),t.q(b,x,"intersects:ry"),t.q(c,x,"intersects:rw"),t.q(d,x,"intersects:rh"),t.q(f,x,"intersects:x"),t.q(g,x,"intersects:y"),t.q(h,x,"intersects:w"),t.q(i,x,"intersects:h"),(0>c||0>d||0>h||0>i)&&t.m("Rect.intersects:Width and height cannot be negative")),c+=a,h+=f,a>h||f>c?!1:(a=d+b,i+=g,b>i||g>a?!1:!0)},t.g(x,"left",x.prototype.left),t.defineProperty(x,{left:"left"},function(){return this.x},function(a){t.L(this,a),e&&t.i(a,"number",x,"left"),this.x=a}),t.g(x,"top",x.prototype.top),t.defineProperty(x,{top:"top"},function(){return this.y},function(a){t.L(this,a),e&&t.i(a,"number",x,"top"),this.y=a}),t.g(x,"right",x.prototype.right),t.defineProperty(x,{right:"right"},function(){return this.x+this.width},function(a){t.L(this,a),e&&t.q(a,x,"right"),this.x+=a-(this.x+this.width)}),t.g(x,"bottom",x.prototype.bottom),t.defineProperty(x,{bottom:"bottom"},function(){return this.y+this.height},function(a){t.L(this,a),e&&t.q(a,x,"top"),this.y+=a-(this.y+this.height)}),t.g(x,"position",x.prototype.position),t.defineProperty(x,{position:"position"},function(){return new w(this.x,this.y)},function(a){t.L(this,a),e&&t.l(a,w,x,"position"),this.x=a.x,this.y=a.y}),t.g(x,"size",x.prototype.size),t.defineProperty(x,{size:"size"},function(){return new fa(this.width,this.height)},function(a){t.L(this,a),e&&t.l(a,fa,x,"size"),this.width=a.width,this.height=a.height}),t.g(x,"center",x.prototype.Sz),t.defineProperty(x,{Sz:"center"},function(){return new w(this.x+this.width/2,this.y+this.height/2)},function(a){t.L(this,a),e&&t.l(a,w,x,"center"),this.x=a.x-this.width/2,this.y=a.y-this.height/2}),t.g(x,"centerX",x.prototype.Da),t.defineProperty(x,{Da:"centerX"},function(){return this.x+this.width/2},function(a){t.L(this,a),e&&t.q(a,x,"centerX"),this.x=a-this.width/2}),t.g(x,"centerY",x.prototype.Oa),t.defineProperty(x,{Oa:"centerY"},function(){return this.y+this.height/2},function(a){t.L(this,a),e&&t.q(a,x,"centerY"),this.y=a-this.height/2}),x.prototype.isReal=x.prototype.N=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},x.prototype.isEmpty=function(){return 0===this.width&&0===this.height},t.ga("Margin",ab),t.Xh(ab),t.Vd(ab,{top:!0,right:!0,bottom:!0,left:!0}),ab.prototype.assign=function(a){this.top=a.top,this.right=a.right,this.bottom=a.bottom,this.left=a.left},ab.prototype.setTo=ab.prototype.Sp=function(a,b,c,d){return e&&(t.i(a,"number",ab,"setTo:t"),t.i(b,"number",ab,"setTo:r"),t.i(c,"number",ab,"setTo:b"),t.i(d,"number",ab,"setTo:l")),t.L(this),this.top=a,this.right=b,this.bottom=c,this.left=d,this},ab.prototype.set=ab.prototype.set=function(a){return e&&t.l(a,ab,ab,"assign:m"),t.L(this),this.top=a.top,this.right=a.right,this.bottom=a.bottom,this.left=a.left,this},ab.prototype.copy=function(){var a=new ab;return a.top=this.top,a.right=this.right,a.bottom=this.bottom,a.left=this.left,a},ab.prototype.Ja=function(){return this.nb=!0,Object.freeze(this),this},ab.prototype.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},ab.prototype.freeze=function(){return this.nb=!0,this},ab.prototype.Ma=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.nb=!1,this},ab.parse=function(a){if("string"==typeof a){a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=void 0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var f=void 0;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));for(var g=void 0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new ab(c,e,f,g)}return new ab},ab.stringify=function(a){return a instanceof ab?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()},ab.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},ab.prototype.equals=ab.prototype.M=function(a){return a instanceof ab?this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left:!1},ab.prototype.equalTo=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d},ab.prototype.equalsApprox=ab.prototype.tf=function(a){return F.I(this.top,a.top)&&F.I(this.right,a.right)&&F.I(this.bottom,a.bottom)&&F.I(this.left,a.left)},ab.prototype.isReal=ab.prototype.N=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},t.Xh(ga),t.Vd(ga,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),ga.prototype.set=ga.prototype.set=function(a){return e&&t.l(a,ga,ga,"set:t"),this.m11=a.m11,this.m12=a.m12,this.m21=a.m21,this.m22=a.m22,this.dx=a.dx,this.dy=a.dy,this},ga.prototype.copy=function(){var a=new ga;return a.m11=this.m11,a.m12=this.m12,a.m21=this.m21,a.m22=this.m22,a.dx=this.dx,a.dy=this.dy,a},ga.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},ga.prototype.equals=ga.prototype.M=function(a){return a instanceof ga?this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.dx===a.dx&&this.dy===a.dy:!1},ga.prototype.reset=ga.prototype.reset=function(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0},ga.prototype.multiply=ga.prototype.multiply=function(a){e&&t.l(a,ga,ga,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,f=this.m11*a.dx+this.m21*a.dy+this.dx,g=this.m12*a.dx+this.m22*a.dy+this.dy;return this.m11=this.m11*a.m11+this.m21*a.m12,this.m12=b,this.m21=c,this.m22=d,this.dx=f,this.dy=g,this},ga.prototype.multiplyInverted=ga.prototype.DF=function(a){e&&t.l(a,ga,ga,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,f=-a.m21*b,g=a.m11*b,h=b*(a.m21*a.dy-a.m22*a.dx),i=b*(a.m12*a.dx-a.m11*a.dy);return a=this.m12*c+this.m22*d,b=this.m11*f+this.m21*g,f=this.m12*f+this.m22*g,g=this.m11*h+this.m21*i+this.dx,h=this.m12*h+this.m22*i+this.dy,this.m11=this.m11*c+this.m21*d,this.m12=a,this.m21=b,this.m22=f,this.dx=g,this.dy=h,this},ga.prototype.invert=ga.prototype.nA=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.dy-this.m22*this.dx),f=a*(this.m12*this.dx-this.m11*this.dy);this.m11=this.m22*a,this.m12=b,this.m21=c,this.m22=d,this.dx=e,this.dy=f},ga.prototype.rotate=ga.prototype.rotate=function(a,b,c){e&&(t.q(a,ga,"rotate:angle"),t.q(b,ga,"rotate:rx"),t.q(c,ga,"rotate:ry")),this.translate(b,c);var d;0===a?(a=1,d=0):90===a?(a=0,d=1):180===a?(a=-1,d=0):270===a?(a=0,d=-1):(d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d));var f=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,h=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d,this.m12=f,this.m21=g,this.m22=h,this.translate(-b,-c)},ga.prototype.translate=ga.prototype.translate=function(a,b){e&&(t.q(a,ga,"translate:x"),t.q(b,ga,"translate:y")),this.dx+=this.m11*a+this.m21*b,this.dy+=this.m12*a+this.m22*b},ga.prototype.scale=ga.prototype.scale=function(a,b){void 0===b&&(b=a),e&&(t.q(a,ga,"translate:sx"),t.q(b,ga,"translate:sy")),this.m11*=a,this.m12*=a,this.m21*=b,this.m22*=b},ga.prototype.transformPoint=ga.prototype.Sa=function(a){e&&t.l(a,w,ga,"transformPoint:p");var b=a.x,c=a.y;return a.x=b*this.m11+c*this.m21+this.dx,a.y=b*this.m12+c*this.m22+this.dy,a},ga.prototype.invertedTransformPoint=ga.prototype.ai=function(a){e&&t.l(a,w,ga,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,f=b*(this.m12*this.dx-this.m11*this.dy),g=a.x,h=a.y;return a.x=g*this.m22*b+h*-this.m21*b+b*(this.m21*this.dy-this.m22*this.dx),a.y=g*c+h*d+f,a},ga.prototype.transformRect=ga.prototype.JG=function(a){e&&t.l(a,x,ga,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,f=c+a.height,g=this.m11,h=this.m12,i=this.m21,j=this.m22,k=this.dx,l=this.dy,m=b*g+c*i+k,n=b*h+c*j+l,o=d*g+c*i+k,c=d*h+c*j+l,p=b*g+f*i+k,b=b*h+f*j+l,g=d*g+f*i+k,d=d*h+f*j+l,f=m,h=n,m=Math.min(m,o),f=Math.max(f,o),h=Math.min(h,c),n=Math.max(n,c),m=Math.min(m,p),f=Math.max(f,p),h=Math.min(h,b),n=Math.max(n,b),m=Math.min(m,g),f=Math.max(f,g),h=Math.min(h,d),n=Math.max(n,d);a.x=m,a.y=h,a.width=f-m,a.height=n-h},ga.prototype.isIdentity=ga.prototype.qt=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},t.ga("Spot",H),t.Xh(H),t.Vd(H,{x:!0,y:!0,offsetX:!0,offsetY:!0}),H.prototype.assign=function(a){this.x=a.x,this.y=a.y,this.offsetX=a.offsetX,this.offsetY=a.offsetY},H.prototype.setTo=H.prototype.Sp=function(a,b,c,d){return e&&(pb(a,"setTo:x"),pb(b,"setTo:y"),qb(c,"setTo:offx"),qb(d,"setTo:offy")),t.L(this),this.x=a,this.y=b,this.offsetX=c,this.offsetY=d,this},H.prototype.set=H.prototype.set=function(a){return e&&t.l(a,H,H,"set:s"),t.L(this),this.x=a.x,this.y=a.y,this.offsetX=a.offsetX,this.offsetY=a.offsetY,this},H.prototype.copy=function(){var a=new H;return a.x=this.x,a.y=this.y,a.offsetX=this.offsetX,a.offsetY=this.offsetY,a},H.prototype.Ja=function(){return this.nb=!0,Object.freeze(this),this},H.prototype.Z=function(){return Object.isFrozen(this)?this:this.copy().freeze()},H.prototype.freeze=function(){return this.nb=!0,this},H.prototype.Ma=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.nb=!1,this};var vb;
H.parse=vb=function(a){if("string"==typeof a){if(a=a.trim(),"None"===a)return t.NONE;if("TopLeft"===a)return t.Xx;if("Top"===a||"TopCenter"===a||"MiddleTop"===a)return t.eq;if("TopRight"===a)return t.Zx;if("Left"===a||"LeftCenter"===a||"MiddleLeft"===a)return t.bq;if("Center"===a)return t.Lx;if("Right"===a||"RightCenter"===a||"MiddleRight"===a)return t.cq;if("BottomLeft"===a)return t.Gx;if("Bottom"===a||"BottomCenter"===a||"MiddleBottom"===a)return t.aq;if("BottomRight"===a)return t.Ix;if("TopSide"===a)return t.ay;if("LeftSide"===a)return t.Px;if("RightSide"===a)return t.Vx;if("BottomSide"===a)return t.Kx;if("TopBottomSides"===a)return t.Wx;if("LeftRightSides"===a)return t.Ox;if("TopLeftSides"===a)return t.Yx;if("TopRightSides"===a)return t.$x;if("BottomLeftSides"===a)return t.Hx;if("BottomRightSides"===a)return t.Jx;if("NotTopSide"===a)return t.Tx;if("NotLeftSide"===a)return t.Rx;if("NotRightSide"===a)return t.Sx;if("NotBottomSide"===a)return t.Qx;if("AllSides"===a)return t.Fx;if("Default"===a)return t.Mx;a=a.split(" ");for(var b=0,c=0;""===a[b];)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;""===a[b];)b++;(d=a[b++])&&(e=parseFloat(d));for(var f=0;""===a[b];)b++;(d=a[b++])&&(f=parseFloat(d));for(var g=0;""===a[b];)b++;return(d=a[b++])&&(g=parseFloat(d)),new H(c,e,f,g)}return new H},H.stringify=function(a){return a instanceof H&&a.xd()?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString()},H.prototype.toString=function(){return this.xd()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.M(t.NONE)?"None":this.M(t.Xx)?"TopLeft":this.M(t.eq)?"Top":this.M(t.Zx)?"TopRight":this.M(t.bq)?"Left":this.M(t.Lx)?"Center":this.M(t.cq)?"Right":this.M(t.Gx)?"BottomLeft":this.M(t.aq)?"Bottom":this.M(t.Ix)?"BottomRight":this.M(t.ay)?"TopSide":this.M(t.Px)?"LeftSide":this.M(t.Vx)?"RightSide":this.M(t.Kx)?"BottomSide":this.M(t.Wx)?"TopBottomSides":this.M(t.Ox)?"LeftRightSides":this.M(t.Yx)?"TopLeftSides":this.M(t.$x)?"TopRightSides":this.M(t.Hx)?"BottomLeftSides":this.M(t.Jx)?"BottomRightSides":this.M(t.Tx)?"NotTopSide":this.M(t.Rx)?"NotLeftSide":this.M(t.Sx)?"NotRightSide":this.M(t.Qx)?"NotBottomSide":this.M(t.Fx)?"AllSides":this.M(t.Mx)?"Default":"None"},H.prototype.equals=H.prototype.M=function(a){return a instanceof H?(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY:!1},H.prototype.opposite=function(){return new H(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},H.prototype.includesSide=function(a){return this.rp()&&a.rp()?(a=a.offsetY,(this.offsetY&a)===a):!1},H.prototype.isSpot=H.prototype.xd=function(){return!isNaN(this.x)&&!isNaN(this.y)},H.prototype.isNoSpot=H.prototype.Ge=function(){return isNaN(this.x)||isNaN(this.y)},H.prototype.isSide=H.prototype.rp=function(){return this.Ge()&&1===this.offsetX&&0!==this.offsetY},H.prototype.isDefault=H.prototype.Pc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY},t.bd=1,t.Jc=2,t.Tc=4,t.Sc=8,t.NONE=ub(new H(0,0,0,0),0).Ja(),t.Mx=ub(new H(0,0,-1,0),-1).Ja(),t.Xx=new H(0,0,0,0).Ja(),t.eq=new H(.5,0,0,0).Ja(),t.Zx=new H(1,0,0,0).Ja(),t.bq=new H(0,.5,0,0).Ja(),t.Lx=new H(.5,.5,0,0).Ja(),t.cq=new H(1,.5,0,0).Ja(),t.Gx=new H(0,1,0,0).Ja(),t.aq=new H(.5,1,0,0).Ja(),t.Ix=new H(1,1,0,0).Ja(),t.ay=ub(new H(0,0,1,t.bd),1).Ja(),t.Px=ub(new H(0,0,1,t.Jc),1).Ja(),t.Vx=ub(new H(0,0,1,t.Tc),1).Ja(),t.Kx=ub(new H(0,0,1,t.Sc),1).Ja(),t.Wx=ub(new H(0,0,1,t.bd|t.Sc),1).Ja(),t.Ox=ub(new H(0,0,1,t.Jc|t.Tc),1).Ja(),t.Yx=ub(new H(0,0,1,t.bd|t.Jc),1).Ja(),t.$x=ub(new H(0,0,1,t.bd|t.Tc),1).Ja(),t.Hx=ub(new H(0,0,1,t.Sc|t.Jc),1).Ja(),t.Jx=ub(new H(0,0,1,t.Sc|t.Tc),1).Ja(),t.Tx=ub(new H(0,0,1,t.Jc|t.Tc|t.Sc),1).Ja(),t.Rx=ub(new H(0,0,1,t.bd|t.Tc|t.Sc),1).Ja(),t.Sx=ub(new H(0,0,1,t.bd|t.Jc|t.Sc),1).Ja(),t.Qx=ub(new H(0,0,1,t.bd|t.Jc|t.Tc),1).Ja(),t.Fx=ub(new H(0,0,1,t.bd|t.Jc|t.Tc|t.Sc),1).Ja();var wb;H.None=wb=t.NONE;var xb;H.Default=xb=t.Mx;var Eb;H.TopLeft=Eb=t.Xx;var Fb;H.TopCenter=Fb=t.eq;var Gb;H.TopRight=Gb=t.Zx,H.LeftCenter=t.bq;var Hb;H.Center=Hb=t.Lx,H.RightCenter=t.cq;var Lb;H.BottomLeft=Lb=t.Gx;var Mb;H.BottomCenter=Mb=t.aq;var Pb;H.BottomRight=Pb=t.Ix;var Qb;H.MiddleTop=Qb=t.eq;var Vb;H.MiddleLeft=Vb=t.bq;var Wb;H.MiddleRight=Wb=t.cq;var Xb;H.MiddleBottom=Xb=t.aq,H.Top=t.eq;var Yb;H.Left=Yb=t.bq;var Zb;H.Right=Zb=t.cq,H.Bottom=t.aq;var ac;H.TopSide=ac=t.ay;var bc;H.LeftSide=bc=t.Px;var cc;H.RightSide=cc=t.Vx;var dc;H.BottomSide=dc=t.Kx,H.TopBottomSides=t.Wx,H.LeftRightSides=t.Ox,H.TopLeftSides=t.Yx,H.TopRightSides=t.$x,H.BottomLeftSides=t.Hx,H.BottomRightSides=t.Jx,H.NotTopSide=t.Tx,H.NotLeftSide=t.Rx,H.NotRightSide=t.Sx,H.NotBottomSide=t.Qx;var gc;H.AllSides=gc=t.Fx,hc.prototype.copy=function(){var a=new hc;return a.cf[0]=this.cf[0],a.cf[1]=this.cf[1],a.cf[2]=this.cf[2],a.cf[3]=this.cf[3],a.cf[4]=this.cf[4],a.cf[5]=this.cf[5],a},mc.prototype.addColorStop=function(a,b){this.XD.push({offset:a,color:b})},aa=nc.prototype,aa.arc=function(a,b,c,d,e,f){sc(this,a,b,c,d,e,f)},aa.beginPath=function(){this.path=[]},aa.bezierCurveTo=function(a,b,c,d,e,f){this.path.push(["C",a,b,c,d,e,f])},aa.clearRect=function(){},aa.clip=function(){tc(this,"clipPath",this.path,new hc)},aa.closePath=function(){this.path.push(["z"])},aa.createLinearGradient=function(a,b,c,d){var e=new mc("linear");return e.x1=a,e.y1=b,e.x2=c,e.y2=d,e},aa.createPattern=function(){},aa.createRadialGradient=function(a,b,c,d,e,f){var g=new mc("radial");return g.x1=a,g.y1=b,g.r1=c,g.x2=d,g.y2=e,g.r2=f,g},aa.drawImage=function(a,b,c,d,e,f,g,h,i){a=[b,c,d,e,f,g,h,i,a],b=this.$i,e=a[8],c={x:0,y:0,width:e.naturalWidth,height:e.naturalHeight,href:e.src},d="",f=a[6]/a[2],g=a[7]/a[3],(0!==a[4]||0!==a[5])&&(d+=" translate("+a[4]+", "+a[5]+")"),(1!==f||1!==g)&&(d+=" scale("+f+", "+g+")"),(0!==a[0]||0!==a[1])&&(d+=" translate("+-a[0]+", "+-a[1]+")"),(0!==a[0]||0!==a[1]||a[2]!==e.naturalWidth||a[3]!==e.naturalHeight)&&(e="CLIP"+this.mw,this.mw++,f=oc(this,"clipPath",{id:e}),f.appendChild(oc(this,"rect",{x:a[0],y:a[1],width:a[2],height:a[3]})),this.Bl.appendChild(f),c["clip-path"]="url(#"+e+")"),uc(this,"image",c,b,d),this.addElement("image",c)},aa.fill=function(){tc(this,"fill",this.path,this.$i)},aa.fillRect=function(a,b,c,d){vc(this,"fill",[a,b,c,d],this.$i)},aa.fillText=function(a,b,c){a=[a,b,c],b=this.textAlign,"left"===b?b="start":"right"===b?b="end":"center"===b&&(b="middle"),b={x:a[1],y:a[2],style:"font: "+this.font,"text-anchor":b},uc(this,"fill",b,this.$i),this.addElement("text",b,a[0])},aa.lineTo=function(a,b){this.path.push(["L",a,b])},aa.moveTo=function(a,b){this.path.push(["M",a,b])},aa.quadraticCurveTo=function(a,b,c,d){this.path.push(["Q",a,b,c,d])},aa.rect=function(a,b,c,d){this.path.push(["M",a,b],["L",a+c,b],["L",a+c,b+d],["L",a,b+d],["z"])},aa.restore=function(){this.$i=this.stack.pop(),this.path=this.stack.pop();var a=this.stack.pop();this.fillStyle=a.fillStyle,this.font=a.font,this.globalAlpha=a.globalAlpha,this.lineCap=a.lineCap,this.Zw=a.Zw,this.lineJoin=a.lineJoin,this.lineWidth=a.lineWidth,this.miterLimit=a.miterLimit,this.shadowBlur=a.shadowBlur,this.shadowColor=a.shadowColor,this.shadowOffsetX=a.shadowOffsetX,this.shadowOffsetY=a.shadowOffsetY,this.strokeStyle=a.strokeStyle,this.textAlign=a.textAlign},aa.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,Zw:this.Zw,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var a=[],b=0;b<this.path.length;b++)a.push(this.path[b]);this.stack.push(a),this.stack.push(this.$i.copy())},aa.setTransform=function(a,b,c,d,e,f){1===a&&0===b&&0===c&&1===d&&0===e&&0===f||rc(this,a,b,c,d,e,f)},aa.scale=function(){},aa.stroke=function(){tc(this,"stroke",this.path,this.$i)},aa.strokeRect=function(a,b,c,d){vc(this,"stroke",[a,b,c,d],this.$i)},aa.addElement=function(a,b,c){return a=oc(this,a,b,c),0<this.vf.length?this.vf[this.vf.length-1].appendChild(a):this.Bl.appendChild(a),this.Vw=a},aa.bb=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var a="SHADOW"+this.qG;this.qG++;var b,c,d,e,f,g=this.addElement("filter",{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},null);b=oc(this,"feGaussianBlur",{"in":"SourceAlpha",result:"blur",QK:this.shadowBlur/2}),c=oc(this,"feFlood",{"in":"blur",result:"flood","flood-color":this.shadowColor}),d=oc(this,"feComposite",{"in":"flood",in2:"blur",operator:"in",result:"comp"}),e=oc(this,"feOffset",{"in":"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),f=oc(this,"feMerge",{}),f.appendChild(oc(this,"feMergeNode",{"in":"offsetBlur"})),f.appendChild(oc(this,"feMergeNode",{"in":"SourceGraphic"})),g.appendChild(b),g.appendChild(c),g.appendChild(d),g.appendChild(e),g.appendChild(f),0<this.vf.length&&this.vf[this.vf.length-1].setAttributeNS(null,"filter","url(#"+a+")")}};var F={va:4*((Math.sqrt(2)-1)/3),mj:new w(0,0).Ja(),gH:new x(0,0,0,0).Ja(),fq:new ab(0,0,0,0).Ja(),eH:new ab(2,2,2,2).Ja(),fH:new fa(1/0,1/0).Ja(),cH:new w(-(1/0),-(1/0)).Ja(),bH:new w(1/0,1/0).Ja(),gq:new fa(0,0).Ja(),Ux:new fa(1,1).Ja(),dq:new fa(6,6).Ja(),Nx:new fa(8,8).Ja(),dH:new w(NaN,NaN).Ja(),wB:null,sqrt:function(a){if(0>=a)return 0;var b=F.wB;if(null===b){for(var b=[],c=0;2e3>=c;c++)b[c]=Math.sqrt(c);F.wB=b}return 1>a?(c=1/a,2e3>=c?1/b[0|c]:Math.sqrt(a)):2e3>=a?b[0|a]:Math.sqrt(a)},I:function(a,b){var c=a-b;return.5>c&&c>-.5},mb:function(a,b){var c=a-b;return 5e-8>c&&c>-5e-8},Md:function(a,b,c,d,e,f,g){0>=e&&(e=1e-6);var h,i,j,k;if(c>a?(i=a,h=c):(i=c,h=a),d>b?(k=b,j=d):(k=d,j=b),a===c)return g>=k&&j>=g&&f>=a-e&&a+e>=f;if(b===d)return f>=i&&h>=f&&g>=b-e&&b+e>=g;if(h+=e,i-=e,f>=i&&h>=f&&(j+=e,k-=e,g>=k&&j>=g))if(h-i>j-k){if(!(a-c>e||c-a>e))return!0;if(f=(d-b)/(c-a)*(f-a)+b,g>=f-e&&f+e>=g)return!0}else{if(!(b-d>e||d-b>e))return!0;if(g=(c-a)/(d-b)*(g-b)+a,f>=g-e&&g+e>=f)return!0}return!1},hw:function(a,b,c,d,e,f,g,h,i,j,k,l){if(F.Md(a,b,g,h,l,c,d)&&F.Md(a,b,g,h,l,e,f))return F.Md(a,b,g,h,l,j,k);var m=(a+c)/2,n=(b+d)/2,o=(c+e)/2,p=(d+f)/2;e=(e+g)/2,f=(f+h)/2,d=(m+o)/2,c=(n+p)/2;var o=(o+e)/2,p=(p+f)/2,q=(d+o)/2,r=(c+p)/2;return F.hw(a,b,m,n,d,c,q,r,i,j,k,l)||F.hw(q,r,o,p,e,f,g,h,i,j,k,l)},aI:function(a,b,c,d,e,f,g,h,i){var j=(c+e)/2,k=(d+f)/2;return i.x=(((a+c)/2+j)/2+(j+(e+g)/2)/2)/2,i.y=(((b+d)/2+k)/2+(k+(f+h)/2)/2)/2,i},$H:function(a,b,c,d,e,f,g,h){var i=(c+e)/2,j=(d+f)/2;return Ta(((a+c)/2+i)/2,((b+d)/2+j)/2,(i+(e+g)/2)/2,(j+(f+h)/2)/2)},So:function(a,b,c,d,e,f,g,h,i,j){if(F.Md(a,b,g,h,i,c,d)&&F.Md(a,b,g,h,i,e,f))hb(j,a,b,0,0),hb(j,g,h,0,0);else{var k=(a+c)/2,l=(b+d)/2,m=(c+e)/2,n=(d+f)/2;e=(e+g)/2,f=(f+h)/2,d=(k+m)/2,c=(l+n)/2;var m=(m+e)/2,n=(n+f)/2,o=(d+m)/2,p=(c+n)/2;F.So(a,b,k,l,d,c,o,p,i,j),F.So(o,p,m,n,e,f,g,h,i,j)}return j},ze:function(a,b,c,d,e,f,g,h,i,j){if(F.Md(a,b,g,h,i,c,d)&&F.Md(a,b,g,h,i,e,f))0===j.length&&j.push([a,b]),j.push([g,h]);else{var k=(a+c)/2,l=(b+d)/2,m=(c+e)/2,n=(d+f)/2;e=(e+g)/2,f=(f+h)/2,d=(k+m)/2,c=(l+n)/2;var m=(m+e)/2,n=(n+f)/2,o=(d+m)/2,p=(c+n)/2;F.ze(a,b,k,l,d,c,o,p,i,j),F.ze(o,p,m,n,e,f,g,h,i,j)}return j},OA:function(a,b,c,d,e,f,g,h,i,j){if(F.Md(a,b,e,f,j,c,d))return F.Md(a,b,e,f,j,h,i);var k=(a+c)/2,l=(b+d)/2;c=(c+e)/2,d=(d+f)/2;var m=(k+c)/2,n=(l+d)/2;return F.OA(a,b,k,l,m,n,g,h,i,j)||F.OA(m,n,c,d,e,f,g,h,i,j)},PK:function(a,b,c,d,e,f,g){return g.x=((a+c)/2+(c+e)/2)/2,g.y=((b+d)/2+(d+f)/2)/2,g},NA:function(a,b,c,d,e,f,g,h){if(F.Md(a,b,e,f,g,c,d))hb(h,a,b,0,0),hb(h,e,f,0,0);else{var i=(a+c)/2,j=(b+d)/2;c=(c+e)/2,d=(d+f)/2;var k=(i+c)/2,l=(j+d)/2;F.NA(a,b,i,j,k,l,g,h),F.NA(k,l,c,d,e,f,g,h)}return h},Jp:function(a,b,c,d,e,f,g,h){if(F.Md(a,b,e,f,g,c,d))0===h.length&&h.push([a,b]),h.push([e,f]);else{var i=(a+c)/2,j=(b+d)/2;c=(c+e)/2,d=(d+f)/2;var k=(i+c)/2,l=(j+d)/2;F.Jp(a,b,i,j,k,l,g,h),F.Jp(k,l,c,d,e,f,g,h)}return h},Ps:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){if(0>=m&&(m=1e-6),F.Md(a,b,g,h,m,c,d)&&F.Md(a,b,g,h,m,e,f)){var o=(a-g)*(j-l)-(b-h)*(i-k);if(!o)return!1;if(m=((a*h-b*g)*(i-k)-(a-g)*(i*l-j*k))/o,o=((a*h-b*g)*(j-l)-(b-h)*(i*l-j*k))/o,(j>l?j-l:l-j)>(i>k?i-k:k-i)){if(h>b?(i=b,g=h):(i=h,g=b),i>o||o>g)return!1}else if(g>a?i=a:(i=g,g=a),i>m||m>g)return!1;return n.x=m,n.y=o,!0}var o=(a+c)/2,p=(b+d)/2;c=(c+e)/2,d=(d+f)/2,e=(e+g)/2,f=(f+h)/2;var q=(o+c)/2,r=(p+d)/2;c=(c+e)/2,d=(d+f)/2;var s=(q+c)/2,t=(r+d)/2,u=(k-i)*(k-i)+(l-j)*(l-j),v=!1;return F.Ps(a,b,o,p,q,r,s,t,i,j,k,l,m,n)&&(a=(n.x-i)*(n.x-i)+(n.y-j)*(n.y-j),u>a&&(u=a,v=!0)),b=n.x,o=n.y,F.Ps(s,t,c,d,e,f,g,h,i,j,k,l,m,n)&&(a=(n.x-i)*(n.x-i)+(n.y-j)*(n.y-j),u>a?v=!0:(n.x=b,n.y=o)),v},Qs:function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=0;if(0>=m&&(m=1e-6),F.Md(a,b,g,h,m,c,d)&&F.Md(a,b,g,h,m,e,f)){if(m=(a-g)*(j-l)-(b-h)*(i-k),!m)return n;var o=((a*h-b*g)*(i-k)-(a-g)*(i*l-j*k))/m,p=((a*h-b*g)*(j-l)-(b-h)*(i*l-j*k))/m;if(o>=k)return n;if((j>l?j-l:l-j)>(i>k?i-k:k-i)){if(h>b?(i=b,a=h):(i=h,a=b),i>p||p>a)return n}else if(g>a?(i=a,a=g):i=g,i>o||o>a)return n;m>0?n++:0>m&&n--}else{var o=(a+c)/2,p=(b+d)/2,q=(c+e)/2,r=(d+f)/2;e=(e+g)/2,f=(f+h)/2,d=(o+q)/2,c=(p+r)/2;var q=(q+e)/2,r=(r+f)/2,s=(d+q)/2,t=(c+r)/2,n=n+F.Qs(a,b,o,p,d,c,s,t,i,j,k,l,m),n=n+F.Qs(s,t,q,r,e,f,g,h,i,j,k,l,m)}return n},dn:function(a,b,c,d,e,f,g){if(F.mb(a,c)){var h;return d>b?(h=b,c=d):(h=d,c=b),d=f,h>d?(g.x=a,g.y=h,!1):d>c?(g.x=a,g.y=c,!1):(g.x=a,g.y=d,!0)}return F.mb(b,d)?(c>a?h=a:(h=c,c=a),d=e,h>d?(g.x=h,g.y=b,!1):d>c?(g.x=c,g.y=b,!1):(g.x=d,g.y=b,!0)):(h=((a-e)*(a-c)+(b-f)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b)),-5e-6>h?(g.x=a,g.y=b,!1):h>1.000005?(g.x=c,g.y=d,!1):(g.x=a+h*(c-a),g.y=b+h*(d-b),!0))},ih:function(a,b,c,d,e,f,g,h,i){return F.I(a,c)&&F.I(b,d)?(i.x=a,i.y=b,!1):F.mb(e,g)?F.mb(a,c)?(F.dn(a,b,c,d,e,f,i),!1):(f=(d-b)/(c-a)*(e-a)+b,F.dn(a,b,c,d,e,f,i)):(h=(h-f)/(g-e),F.mb(a,c)?(f=h*(a-e)+f,d>b?(g=b,c=d):(g=d,c=b),g>f?(i.x=a,i.y=g,!1):f>c?(i.x=a,i.y=c,!1):(i.x=a,i.y=f,!0)):(g=(d-b)/(c-a),F.mb(h,g)?(F.dn(a,b,c,d,e,f,i),!1):(e=(g*a-h*e+f-b)/(g-h),F.mb(g,0)?(c>a?g=a:(g=c,c=a),g>e?(i.x=g,i.y=b,!1):e>c?(i.x=c,i.y=b,!1):(i.x=e,i.y=b,!0)):(f=g*(e-a)+b,F.dn(a,b,c,d,e,f,i)))))},CK:function(a,b,c,d,e){return F.ih(c.x,c.y,d.x,d.y,a.x,a.y,b.x,b.y,e)},yK:function(a,b,c,d,e,f,g,h,i,j){function k(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);l>e&&(l=e,i.x=c,i.y=d)}var l=1/0;k(i.x,i.y);var m,n,o,p;if(g>e?(m=e,n=g):(m=g,n=e),h>f?(o=e,p=g):(o=g,p=e),m=(n-m)/2+j,j=(p-o)/2+j,e=(e+g)/2,f=(f+h)/2,0===m||0===j)return i;if(.5>(c>a?c-a:a-c)){if(m=1-(c-e)*(c-e)/(m*m),0>m)return i;m=Math.sqrt(m),d=-j*m+f,k(c,j*m+f),k(c,d)}else{if(c=(d-b)/(c-a),d=1/(m*m)+c*c/(j*j),h=2*c*(b-c*a)/(j*j)-2*c*f/(j*j)-2*e/(m*m),m=h*h-4*d*(2*c*a*f/(j*j)-2*b*f/(j*j)+f*f/(j*j)+e*e/(m*m)-1+(b-c*a)*(b-c*a)/(j*j)),0>m)return i;m=Math.sqrt(m),j=(-h+m)/(2*d),k(j,c*j-c*a+b),m=(-h-m)/(2*d),k(m,c*m-c*a+b)}return i},ll:function(a,b,c,d,e,f,g,h,i){var j=1e21,k=a,l=b;if(F.ih(a,b,a,d,e,f,g,h,i)){var m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f);j>m&&(j=m,k=i.x,l=i.y)}return F.ih(c,b,c,d,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),F.ih(a,b,c,b,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),F.ih(a,d,c,d,e,f,g,h,i)&&(m=(i.x-e)*(i.x-e)+(i.y-f)*(i.y-f),j>m&&(j=m,k=i.x,l=i.y)),i.x=k,i.y=l,1e21>j},Nw:function(a,b,c){var d=b.x,e=b.y,f=c.x,g=c.y,h=a.left,i=a.right,j=a.top,k=a.bottom;return d===f?(g>e?(a=e,f=g):(a=g,f=e),d>=h&&i>=d&&k>=a&&f>=j):e===g?(f>d?a=d:(a=f,f=d),e>=j&&k>=e&&i>=a&&f>=h):a.Fa(b)||a.Fa(c)||F.Mw(h,j,i,j,d,e,f,g)||F.Mw(i,j,i,k,d,e,f,g)||F.Mw(i,k,h,k,d,e,f,g)||F.Mw(h,k,h,j,d,e,f,g)?!0:!1},Mw:function(a,b,c,d,e,f,g,h){return 0>=F.nw(a,b,c,d,e,f)*F.nw(a,b,c,d,g,h)&&0>=F.nw(e,f,g,h,a,b)*F.nw(e,f,g,h,c,d)},nw:function(a,b,c,d,e,f){return c-=a,d-=b,a=e-a,b=f-b,f=a*d-b*c,0===f&&(f=a*c+b*d,f>0&&(f=(a-c)*c+(b-d)*d,0>f&&(f=0))),0>f?-1:f>0?1:0},Dt:function(a){return 0>a&&(a+=360),a>=360&&(a-=360),a},gE:function(a,b,c,d,e,f){var g=Math.PI;f||(d*=g/180,e*=g/180),f=e>d?1:-1;var h=[],i=g/2,j=d;for(d=Math.min(2*g+1e-5,Math.abs(e-d));d>1e-5;)e=j+f*Math.min(d,i),h.push(F.jI(c,j,e,a,b)),d-=Math.abs(e-j),j=e;return h},jI:function(a,b,c,d,e){var f=(c-b)/2,g=a*Math.cos(f),h=a*Math.sin(f),i=.5522847498*Math.tan(f),j=g+i*h,g=-h+i*g,h=-g,i=f+b,f=Math.cos(i),i=Math.sin(i);return{x1:d+a*Math.cos(b),y1:e+a*Math.sin(b),x2:d+j*f-g*i,y2:e+j*i+g*f,ge:d+j*f-h*i,he:e+j*i+h*f,Vb:d+a*Math.cos(c),Wb:e+a*Math.sin(c)}},dt:function(a,b,c,d,e,f,g){c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/f)*f+d;var h=c;return e/2>c+e-a&&(h=c+e),a=d,f/2>d+f-b&&(a=d+f),g.p(h,a),g},GE:function(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,f=1;do e=c%d,c=f=d,d=e;while(e>0);return f},yI:function(a,b,c,d){var e,f,g=0>c,h=0>d;b>a?(e=1,f=0):(e=0,f=1);var i,j;return i=0===e?a:b,j=0===e?c:d,(0===e?g:h)&&(j=-j),e=f,c=0===e?c:d,(0===e?g:h)&&(c=-c),F.zI(i,0===e?a:b,j,c,0,0)},zI:function(a,b,c,d,e,f){if(d>0)if(c>0){f=a*a,e=b*b,a*=c;var g=b*d,h=-e+g,i=-e+Math.sqrt(a*a+g*g);b=h;for(var j=0;9999999999>j&&(b=.5*(h+i),b!==h&&b!==i);++j){var k=a/(b+f),l=g/(b+e),k=k*k+l*l-1;if(k>0)h=b;else{if(!(0>k))break;i=b}}c=f*c/(b+f)-c,d=e*d/(b+e)-d,c=Math.sqrt(c*c+d*d)}else c=Math.abs(d-b);else d=a*a-b*b,e=a*c,d>e?(d=e/d,e=a*d,f=b*Math.sqrt(Math.abs(1-d*d)),c=e-c,c=Math.sqrt(c*c+f*f)):c=Math.abs(c-a);return c}};t.ga("Geometry",zc),t.Xh(zc),zc.prototype.copy=function(){var a=new zc;a.da=this.da,a.oc=this.oc,a.yc=this.yc,a.jb=this.jb,a.tb=this.tb;for(var b=this.Ck,c=b.length,d=a.Ck,e=0;c>e;e++){var f=b.n[e].copy();d.add(f)}return a.Iu=this.Iu,a.tu.assign(this.tu),a.Va=this.Va,a.Mi=this.Mi.Z(),a.Ni=this.Ni.Z(),a.$n=this.$n,a.Zn=this.Zn,a.Hc=this.Hc,a};var Dc;zc.Line=Dc=t.w(zc,"Line",0);var Ec;zc.Rectangle=Ec=t.w(zc,"Rectangle",1);var Mc;zc.Ellipse=Mc=t.w(zc,"Ellipse",2);var Ac;zc.Path=Ac=t.w(zc,"Path",3),zc.prototype.Ja=function(){return this.freeze(),Object.freeze(this),this},zc.prototype.freeze=function(){this.nb=!0;var a=this.Bb;a.freeze();for(var b=a.length,c=0;b>c;c++)a.n[c].freeze();return this},zc.prototype.Ma=function(){Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.nb=!1;var a=this.Bb;a.Ma();for(var b=a.length,c=0;b>c;c++)a.n[c].Ma();return this},zc.prototype.equalsApprox=zc.prototype.tf=function(a){if(!(a instanceof zc))return!1;if(this.type!==a.type)return this.type===Dc&&a.type===Ac?Nc(this,a):a.type===Dc&&this.type===Ac?Nc(a,this):!1;if(this.type===Ac){var b=this.Bb;a=a.Bb;var c=b.length;if(c!==a.length)return!1;for(var d=0;c>d;d++)if(!b.n[d].tf(a.n[d]))return!1;return!0}return F.I(this.qa,a.qa)&&F.I(this.ra,a.ra)&&F.I(this.D,a.D)&&F.I(this.F,a.F)};var Pc;zc.stringify=Pc=function(a){return a.toString()},zc.prototype.toString=function(a){switch(this.type){case Dc:return void 0===a?"M"+this.qa.toString()+" "+this.ra.toString()+"L"+this.D.toString()+" "+this.F.toString():"M"+this.qa.toFixed(a)+" "+this.ra.toFixed(a)+"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);case Ec:var b=new x(this.qa,this.ra,0,0);return b.OG(this.D,this.F,0,0),void 0===a?"M"+b.x.toString()+" "+b.y.toString()+"H"+b.right.toString()+"V"+b.bottom.toString()+"H"+b.left.toString()+"z":"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Mc:if(b=new x(this.qa,this.ra,0,0),b.OG(this.D,this.F,0,0),void 0===a){var c=b.left.toString()+" "+(b.y+b.height/2).toString(),d=b.right.toString()+" "+(b.y+b.height/2).toString();return"M"+c+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+d+"A"+(b.width/2).toString()+" "+(b.height/2).toString()+" 0 0 1 "+c}return c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a),d=b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a),"M"+c+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+d+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case Ac:for(var b="",c=this.Bb,d=c.length,e=0;d>e;e++){var f=c.n[e];e>0&&(b+=" x "),f.pp&&(b+="F "),b+=f.toString(a)}return b;default:return this.type.toString()}};var Qc;zc.fillPath=Qc=function(a){"string"!=typeof a&&t.bc(a,"string",zc,"fillPath:str"),a=a.split(/[Xx]/);for(var b=a.length,c="",d=0;b>d;d++)var e=a[d],c=null!==e.match(/[Ff]/)?0===d?c+e:c+("X"+(" "===e[0]?"":" ")+e):c+((0===d?"":"X ")+"F"+(" "===e[0]?"":" ")+e);return c};var Rc;zc.parse=Rc=function(a,b){function c(){return l>=r-1?!0:null!==k[l+1].match(/[A-Za-z]/)}function d(){return l++,k[l]}function e(){var a=new w(parseFloat(d()),parseFloat(d()));return m===m.toLowerCase()&&(a.x=q.x+a.x,a.y=q.y+a.y),a}function f(){return q=e()}function g(){return p=e()}function h(){var a=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())];return c()||(a.push(parseFloat(d())),c()||a.push(parseFloat(d()))),m===m.toLowerCase()&&(a[2]+=q.x,a[3]+=q.y),a}function i(){return"c"!==n.toLowerCase()&&"s"!==n.toLowerCase()?q:new w(2*q.x-p.x,2*q.y-p.y)}void 0===b&&(b=!1),"string"!=typeof a&&t.bc(a,"string",zc,"parse:str"),a=a.replace(/,/gm," "),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,"");for(var j,k=a.split(" "),l=-1,m="",n="",o=new w(0,0),p=new w(0,0),q=new w(0,0),r=k.length,s=t.u(),u=!1,v=!1,x=!0;!(l>=r-1);)if(n=m,m=d(),""!==m)switch(m.toUpperCase()){case"X":x=!0,v=u=!1;break;case"M":for(j=f(),null===s.Xb||!0===x?(I(s,j.x,j.y,u,!1,!v),x=!1):s.moveTo(j.x,j.y),o=q;!c();)j=f(),s.lineTo(j.x,j.y);break;case"L":for(;!c();)j=f(),s.lineTo(j.x,j.y);break;case"H":for(;!c();)q=j=new w((m===m.toLowerCase()?q.x:0)+parseFloat(d()),q.y),s.lineTo(q.x,q.y);break;case"V":for(;!c();)q=j=new w(q.x,(m===m.toLowerCase()?q.y:0)+parseFloat(d())),s.lineTo(q.x,q.y);break;case"C":for(;!c();){var y=e(),z=g();j=f(),J(s,y.x,y.y,z.x,z.y,j.x,j.y)}break;case"S":for(;!c();)y=i(),z=g(),j=f(),J(s,y.x,y.y,z.x,z.y,j.x,j.y);break;case"Q":for(;!c();)z=g(),j=f(),Sc(s,z.x,z.y,j.x,j.y);break;case"T":for(;!c();)p=z=i(),j=f(),Sc(s,z.x,z.y,j.x,j.y);break;case"B":for(;!c();)j=h(),s.arcTo(j[0],j[1],j[2],j[3],j[4],j[5],j[6]);break;case"A":for(;!c();){var y=Math.abs(parseFloat(d())),z=Math.abs(parseFloat(d())),A=parseFloat(d()),B=!!parseFloat(d()),C=!!parseFloat(d());j=f(),Tc(s,y,z,A,B,C,j.x,j.y)}break;case"Z":L(s),q=o;break;case"F":for(j=null,y=1;k[l+y];)if(null!==k[l+y].match(/[Uu]/))y++;else{if(null!==k[l+y].match(/[A-Za-z]/)){j=k[l+y];break}y++}j.match(/[Mm]/)?u=!0:Zc(s);break;case"U":for(j=null,y=1;k[l+y];)if(null!==k[l+y].match(/[Ff]/))y++;else{if(null!==k[l+y].match(/[A-Za-z]/)){j=k[l+y];break}y++}j.match(/[Mm]/)?v=!0:s.bb(!1)}if(o=s.s,t.v(s),b)for(s=o.Bb.k;s.next();)s.value.pp=!0;return o},zc.prototype.uA=function(){if(this.Va)return!0;var a=this.Bb;if(this.Iu!==a.V)return!0;for(var b=a.length,c=0;b>c;c++)if(a.n[c].uA())return!0;return!1},zc.prototype.oB=function(){this.Va=!1;var a=this.Bb;this.Iu=a.V;for(var b=a.length,c=0;b>c;c++)a.n[c].oB()},zc.prototype.qf=function(){var a=this.tu;a.Ma(),isNaN(this.$n)||isNaN(this.Zn)?a.p(0,0,0,0):a.p(0,0,this.$n,this.Zn),ad(this,a,!1),hb(a,0,0,0,0),a.freeze()},zc.prototype.computeBoundsWithoutOrigin=zc.prototype.fI=function(){var a=new x;return ad(this,a,!0),a},zc.prototype.normalize=zc.prototype.normalize=function(){t.L(this);var a=this.fI();return this.offset(-a.x,-a.y),new w(-a.x,-a.y)},zc.prototype.offset=zc.prototype.offset=function(a,b){t.L(this),e&&(t.q(a,zc,"offset"),t.q(b,zc,"offset")),this.transform(1,0,0,1,a,b)},zc.prototype.scale=zc.prototype.scale=function(a,b){t.L(this),e&&(t.q(a,zc,"scale:x"),t.q(b,zc,"scale:y"),0>=a&&t.ka(a,"scale must be greater than zero",zc,"scale:x"),0>=b&&t.ka(b,"scale must be greater than zero",zc,"scale:y")),this.transform(a,0,0,b,0,0)},zc.prototype.rotate=zc.prototype.rotate=function(a,b,c){t.L(this),void 0===b&&(b=0),void 0===c&&(c=0),e&&(t.q(a,zc,"rotate:angle"),t.q(b,zc,"rotate:x"),t.q(c,zc,"rotate:y"));var d=t.oh();d.reset(),d.rotate(a,b,c),this.transform(d.m11,d.m12,d.m21,d.m22,d.dx,d.dy),t.We(d)},zc.prototype.transform=zc.prototype.transform=function(a,b,c,d,e,f){var g,h;switch(this.type){case Dc:case Ec:case Mc:g=this.oc,h=this.yc,this.oc=g*a+h*c+e,this.yc=g*b+h*d+f,g=this.jb,h=this.tb,this.jb=g*a+h*c+e,this.tb=g*b+h*d+f;break;case Ac:for(var i=this.Bb,j=i.length,k=0;j>k;k++){var l=i.n[k];g=l.qa,h=l.ra,l.qa=g*a+h*c+e,l.ra=g*b+h*d+f;for(var l=l.Ea,m=l.length,n=0;m>n;n++){var o=l.n[n];switch(o.type){case Oc:case bd:g=o.D,h=o.F,o.D=g*a+h*c+e,o.F=g*b+h*d+f;break;case cd:g=o.Cb,h=o.Sb,o.Cb=g*a+h*c+e,o.Sb=g*b+h*d+f,g=o.re,h=o.se,o.re=g*a+h*c+e,o.se=g*b+h*d+f,g=o.D,h=o.F,o.D=g*a+h*c+e,o.F=g*b+h*d+f;break;case dd:g=o.Cb,h=o.Sb,o.Cb=g*a+h*c+e,o.Sb=g*b+h*d+f,g=o.D,h=o.F,o.D=g*a+h*c+e,o.F=g*b+h*d+f;break;case ed:g=o.Da,h=o.Oa,o.Da=g*a+h*c+e,o.Oa=g*b+h*d+f,o.radiusX*=Math.sqrt(a*a+c*c),void 0!==o.radiusY&&(o.radiusY*=Math.sqrt(b*b+d*d));break;case fd:g=o.D,h=o.F,o.D=g*a+h*c+e,o.F=g*b+h*d+f,o.radiusX*=Math.sqrt(a*a+c*c),o.radiusY*=Math.sqrt(b*b+d*d);break;default:t.m("Unknown Segment type: "+o.type)}}}}this.Va=!0},zc.prototype.Ds=function(a,b){var c=this.oc,d=this.yc,e=this.jb,f=this.tb,g=Math.min(c,e),h=Math.min(d,f),c=Math.abs(e-c),d=Math.abs(f-d),f=t.K();return f.x=g,f.y=h,b.Sa(f),e=new Bc(f.x,f.y),f.x=g+c,f.y=h,b.Sa(f),e.Ea.add(new id(Oc,f.x,f.y)),f.x=g+c,f.y=h+d,b.Sa(f),e.Ea.add(new id(Oc,f.x,f.y)),f.x=g,f.y=h+d,b.Sa(f),e.Ea.add(new id(Oc,f.x,f.y).close()),t.B(f),a.type=Ac,a.Bb.add(e),a},zc.prototype.Fa=function(a,b,c,d){var e=a.x,f=a.y,g=this.Pb.x-20;a=a.y;for(var h,i,j,k,l,m,n,o=0,p=this.Bb.n,q=p.length,r=0;q>r;r++){var s=p[r];if(s.pp){if(c&&s.Fa(e,f,b))return!0;var u=s.Ea;h=s.qa,i=s.ra;for(var v=h,w=i,x=0;x<=u.length;x++){switch(x!==u.length?(j=u.n[x],k=j.type,m=j.D,n=j.F):(k=Oc,m=v,n=w),k){case bd:if(l=jd(e,f,g,a,h,i,v,w),!0===l)return!0;o+=l,v=m,w=n;break;case Oc:if(l=jd(e,f,g,a,h,i,m,n),!0===l)return!0;o+=l;break;case cd:l=F.Qs(h,i,j.Cb,j.Sb,j.re,j.se,m,n,g,a,e,f,.5),o+=l;break;case dd:l=F.Qs(h,i,(h+2*j.Cb)/3,(i+2*j.Sb)/3,(j.Cb+2*m)/3,(j.Cb+2*m)/3,m,n,g,a,e,f,.5),o+=l;break;case ed:case fd:k=j.type===ed?gd(j,s):hd(j,s,h,i);for(var y=k.length,z=null,A=0;y>A;A++){if(z=k[A],0===A){if(l=jd(e,f,g,a,h,i,z.x1,z.y1),!0===l)return!0;o+=l}l=F.Qs(z.x1,z.y1,z.x2,z.y2,z.ge,z.he,z.Vb,z.Wb,g,a,e,f,.5),o+=l}null!==z&&(m=z.Vb,n=z.Wb);break;default:t.m("Unknown Segment type: "+j.type)}h=m,i=n}if(0!==o)return!0;o=0}else if(s.Fa(e,f,d?b:b+2))return!0}return 0!==o},zc.prototype.getPointAlongPath=function(a){(0>a||a>1)&&t.ka(a,"0 <= fraction <= 1",zc,"getPointAlongPath:fraction");var b=this.Bb.$a(),c=t.Db(),d=[];d.push([b.qa,b.ra]);for(var e=b.qa,f=b.ra,g=e,h=f,i=b.Ea.n,j=i.length,k=0;j>k;k++){var l=i[k];switch(l.da){case bd:c.push(d),d=[],d.push([l.D,l.F]),e=l.D,f=l.F,g=e,h=f;break;case Oc:d.push([l.D,l.F]),e=l.D,f=l.F;break;case cd:F.ze(e,f,l.jd,l.ye,l.ng,l.og,l.jb,l.tb,.5,d),e=l.D,f=l.F;break;case dd:F.Jp(e,f,l.jd,l.ye,l.jb,l.tb,.5,d),e=l.D,f=l.F;break;case ed:for(var m=gd(l,b),n=m.length,o=0;n>o;o++){var p=m[o];F.ze(e,f,p.x2,p.y2,p.ge,p.he,p.Vb,p.Wb,.5,d),e=p.Vb,f=p.Wb}break;case fd:for(m=hd(l,b,e,f),n=m.length,o=0;n>o;o++)p=m[o],F.ze(e,f,p.x2,p.y2,p.ge,p.he,p.Vb,p.Wb,.5,d),e=p.Vb,f=p.Wb;break;default:t.m("Segment not of valid type")}l.Gh&&d.push([g,h])}for(c.push(d),j=0,e=c.length,b=null,f=0;e>f;f++)for(g=c[f],h=g.length,k=0;h>k;k++)d=g[k],0!==k&&(i=Math.sqrt(Sa(b[0],b[1],d[0],d[1])),j+=i),b=d;for(a*=j,f=j=0;e>f;f++)for(g=c[f],h=g.length,k=0;h>k;k++){if(d=g[k],0!==k){if(i=Math.sqrt(Sa(b[0],b[1],d[0],d[1])),j+i>a)return k=(a-j)/i,t.ya(c),new w(b[0]+(d[0]-b[0])*k,b[1]+(d[1]-b[1])*k);j+=i}b=d}return t.ya(c),null},t.g(zc,"type",zc.prototype.type),t.defineProperty(zc,{type:"type"},function(){return this.da},function(a){this.da!==a&&(e&&t.Aa(a,zc,zc,"type"),t.L(this,a),this.da=a,this.Va=!0)}),t.g(zc,"startX",zc.prototype.qa),t.defineProperty(zc,{qa:"startX"},function(){return this.oc},function(a){this.oc!==a&&(e&&t.q(a,zc,"startX"),t.L(this,a),this.oc=a,this.Va=!0)}),t.g(zc,"startY",zc.prototype.ra),t.defineProperty(zc,{ra:"startY"},function(){return this.yc},function(a){this.yc!==a&&(e&&t.q(a,zc,"startY"),t.L(this,a),this.yc=a,this.Va=!0)}),t.g(zc,"endX",zc.prototype.D),t.defineProperty(zc,{D:"endX"},function(){return this.jb},function(a){this.jb!==a&&(e&&t.q(a,zc,"endX"),t.L(this,a),this.jb=a,this.Va=!0)}),t.g(zc,"endY",zc.prototype.F),t.defineProperty(zc,{F:"endY"},function(){return this.tb},function(a){this.tb!==a&&(e&&t.q(a,zc,"endY"),t.L(this,a),this.tb=a,this.Va=!0)}),t.g(zc,"figures",zc.prototype.Bb),t.defineProperty(zc,{Bb:"figures"},function(){return this.Ck},function(a){this.Ck!==a&&(e&&t.l(a,B,zc,"figures"),t.L(this,a),this.Ck=a,this.Va=!0)}),t.defineProperty(zc,{G:"spot1"},function(){return this.Mi},function(a){e&&t.l(a,H,zc,"spot1"),t.L(this,a),this.Mi=a.Z()}),t.defineProperty(zc,{H:"spot2"},function(){return this.Ni},function(a){e&&t.l(a,H,zc,"spot2"),t.L(this,a),this.Ni=a.Z()}),t.A(zc,{Pb:"bounds"},function(){return this.uA()&&(this.oB(),this.qf()),this.tu}),t.ga("PathFigure",Bc),t.Xh(Bc),Bc.prototype.copy=function(){var a=new Bc;a.Wl=this.Wl,a.bo=this.bo,a.oc=this.oc,a.yc=this.yc;for(var b=this.hs,c=b.length,d=a.hs,e=0;c>e;e++){var f=b.n[e].copy();d.add(f)}return a.Hv=this.Hv,a.Va=this.Va,a},Bc.prototype.equalsApprox=Bc.prototype.tf=function(a){if(!(a instanceof Bc&&F.I(this.qa,a.qa)&&F.I(this.ra,a.ra)))return!1;var b=this.Ea;a=a.Ea;var c=b.length;if(c!==a.length)return!1;for(var d=0;c>d;d++)if(!b.n[d].tf(a.n[d]))return!1;return!0},aa=Bc.prototype,aa.toString=function(a){for(var b=void 0===a?"M"+this.qa.toString()+" "+this.ra.toString():"M"+this.qa.toFixed(a)+" "+this.ra.toFixed(a),c=this.Ea,d=c.length,e=0;d>e;e++)b+=" "+c.n[e].toString(a);return b},aa.freeze=function(){this.nb=!0;var a=this.Ea;a.freeze();for(var b=a.length,c=0;b>c;c++)a.n[c].freeze();return this},aa.Ma=function(){this.nb=!1;var a=this.Ea;a.Ma();for(var b=a.length,c=0;b>c;c++)a.n[c].Ma();return this},aa.uA=function(){if(this.Va)return!0;var a=this.Ea;if(this.Hv!==a.V)return!0;for(var b=a.length,c=0;b>c;c++)if(a.n[c].Va)return!0;return!1},aa.oB=function(){this.Va=!1;var a=this.Ea;this.Hv=a.V;for(var b=a.length,c=0;b>c;c++){var d=a.n[c];d.Va=!1,d.nj=null}},t.g(Bc,"isFilled",Bc.prototype.pp),t.defineProperty(Bc,{pp:"isFilled"},function(){return this.Wl},function(a){e&&t.i(a,"boolean",Bc,"isFilled"),t.L(this,a),this.Wl=a}),t.g(Bc,"isShadowed",Bc.prototype.gj),t.defineProperty(Bc,{gj:"isShadowed"},function(){return this.bo},function(a){e&&t.i(a,"boolean",Bc,"isShadowed"),t.L(this,a),this.bo=a}),t.g(Bc,"startX",Bc.prototype.qa),t.defineProperty(Bc,{qa:"startX"},function(){return this.oc},function(a){e&&t.q(a,Bc,"startX"),t.L(this,a),this.oc=a,this.Va=!0}),t.g(Bc,"startY",Bc.prototype.ra),t.defineProperty(Bc,{ra:"startY"},function(){return this.yc},function(a){e&&t.q(a,Bc,"startY"),t.L(this,a),this.yc=a,this.Va=!0}),t.g(Bc,"segments",Bc.prototype.Ea),t.defineProperty(Bc,{Ea:"segments"},function(){return this.hs},function(a){e&&t.l(a,B,Bc,"segments"),t.L(this,a),this.hs=a,this.Va=!0}),Bc.prototype.Fa=function(a,b,c){for(var d=this.qa,e=this.ra,f=d,g=e,h=this.Ea.n,i=h.length,j=0;i>j;j++){var k=h[j];switch(k.type){case bd:f=k.D,g=k.F,d=k.D,e=k.F;break;case Oc:if(F.Md(d,e,k.D,k.F,c,a,b))return!0;d=k.D,e=k.F;break;case cd:if(F.hw(d,e,k.Cb,k.Sb,k.re,k.se,k.D,k.F,.5,a,b,c))return!0;d=k.D,e=k.F;break;case dd:if(F.OA(d,e,k.Cb,k.Sb,k.D,k.F,.5,a,b,c))return!0;d=k.D,e=k.F;break;case ed:case fd:for(var l=k.type===ed?gd(k,this):hd(k,this,d,e),m=l.length,n=null,o=0;m>o;o++)if(n=l[o],0===o&&F.Md(d,e,n.x1,n.y1,c,a,b)||F.hw(n.x1,n.y1,n.x2,n.y2,n.ge,n.he,n.Vb,n.Wb,.5,a,b,c))return!0;null!==n&&(d=n.Vb,e=n.Wb);break;default:t.m("Unknown Segment type: "+k.type)}if(k.ot&&(d!==f||e!==g)&&F.Md(d,e,f,g,c,a,b))return!0}return!1;
},t.ga("PathSegment",id),t.Xh(id),id.prototype.copy=function(){var a=new id;return a.da=this.da,a.jb=this.jb,a.tb=this.tb,void 0!==this.jd&&(a.jd=this.jd),void 0!==this.ye&&(a.ye=this.ye),void 0!==this.ng&&(a.ng=this.ng),void 0!==this.og&&(a.og=this.og),void 0!==this.jo&&(a.jo=this.jo),void 0!==this.yn&&(a.yn=this.yn),a.Gh=this.Gh,a.Va=this.Va,a},id.prototype.equalsApprox=id.prototype.tf=function(a){if(!(a instanceof id)||this.type!==a.type||this.ot!==a.ot)return!1;switch(this.type){case bd:case Oc:return F.I(this.D,a.D)&&F.I(this.F,a.F);case cd:return F.I(this.D,a.D)&&F.I(this.F,a.F)&&F.I(this.Cb,a.Cb)&&F.I(this.Sb,a.Sb)&&F.I(this.re,a.re)&&F.I(this.se,a.se);case dd:return F.I(this.D,a.D)&&F.I(this.F,a.F)&&F.I(this.Cb,a.Cb)&&F.I(this.Sb,a.Sb);case ed:return F.I(this.mh,a.mh)&&F.I(this.gi,a.gi)&&F.I(this.Da,a.Da)&&F.I(this.Oa,a.Oa)&&F.I(this.radiusX,a.radiusX)&&F.I(this.radiusY,a.radiusY);case fd:return this.Pw===a.Pw&&this.Sw===a.Sw&&F.I(this.Ex,a.Ex)&&F.I(this.D,a.D)&&F.I(this.F,a.F)&&F.I(this.radiusX,a.radiusX)&&F.I(this.radiusY,a.radiusY);default:return!1}},id.prototype.toString=function(a){switch(this.type){case bd:a=void 0===a?"M"+this.D.toString()+" "+this.F.toString():"M"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case Oc:a=void 0===a?"L"+this.D.toString()+" "+this.F.toString():"L"+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case cd:a=void 0===a?"C"+this.Cb.toString()+" "+this.Sb.toString()+" "+this.re.toString()+" "+this.se.toString()+" "+this.D.toString()+" "+this.F.toString():"C"+this.Cb.toFixed(a)+" "+this.Sb.toFixed(a)+" "+this.re.toFixed(a)+" "+this.se.toFixed(a)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case dd:a=void 0===a?"Q"+this.Cb.toString()+" "+this.Sb.toString()+" "+this.D.toString()+" "+this.F.toString():"Q"+this.Cb.toFixed(a)+" "+this.Sb.toFixed(a)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;case ed:a=void 0===a?"B"+this.mh.toString()+" "+this.gi.toString()+" "+this.Da.toString()+" "+this.Oa.toString()+" "+this.radiusX:"B"+this.mh.toFixed(a)+" "+this.gi.toFixed(a)+" "+this.Da.toFixed(a)+" "+this.Oa.toFixed(a)+" "+this.radiusX;break;case fd:a=void 0===a?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Ex.toString()+" "+(this.Sw?1:0)+" "+(this.Pw?1:0)+" "+this.D.toString()+" "+this.F.toString():"A"+this.radiusX.toFixed(a)+" "+this.radiusY.toFixed(a)+" "+this.Ex.toFixed(a)+" "+(this.Sw?1:0)+" "+(this.Pw?1:0)+" "+this.D.toFixed(a)+" "+this.F.toFixed(a);break;default:a=this.type.toString()}return a+(this.Gh?"z":"")};var bd;id.Move=bd=t.w(id,"Move",0);var Oc;id.Line=Oc=t.w(id,"Line",1);var cd;id.Bezier=cd=t.w(id,"Bezier",2);var dd;id.QuadraticBezier=dd=t.w(id,"QuadraticBezier",3);var ed;id.Arc=ed=t.w(id,"Arc",4);var fd;id.SvgArc=fd=t.w(id,"SvgArc",4),id.prototype.freeze=function(){return this.nb=!0,this},id.prototype.Ma=function(){return this.nb=!1,this},id.prototype.close=id.prototype.close=function(){return this.Gh=!0,this},t.g(id,"isClosed",id.prototype.ot),t.defineProperty(id,{ot:"isClosed"},function(){return this.Gh},function(a){this.Gh!==a&&(this.Gh=a,this.Va=!0)}),t.g(id,"type",id.prototype.type),t.defineProperty(id,{type:"type"},function(){return this.da},function(a){e&&t.Aa(a,id,id,"type"),t.L(this,a),this.da=a,this.Va=!0}),t.g(id,"endX",id.prototype.D),t.defineProperty(id,{D:"endX"},function(){return this.jb},function(a){e&&t.q(a,id,"endX"),t.L(this,a),this.jb=a,this.Va=!0}),t.g(id,"endY",id.prototype.F),t.defineProperty(id,{F:"endY"},function(){return this.tb},function(a){e&&t.q(a,id,"endY"),t.L(this,a),this.tb=a,this.Va=!0}),t.defineProperty(id,{Cb:"point1X"},function(){return this.jd},function(a){e&&t.q(a,id,"point1X"),t.L(this,a),this.jd=a,this.Va=!0}),t.defineProperty(id,{Sb:"point1Y"},function(){return this.ye},function(a){e&&t.q(a,id,"point1Y"),t.L(this,a),this.ye=a,this.Va=!0}),t.defineProperty(id,{re:"point2X"},function(){return this.ng},function(a){e&&t.q(a,id,"point2X"),t.L(this,a),this.ng=a,this.Va=!0}),t.defineProperty(id,{se:"point2Y"},function(){return this.og},function(a){e&&t.q(a,id,"point2Y"),t.L(this,a),this.og=a,this.Va=!0}),t.defineProperty(id,{Da:"centerX"},function(){return this.jd},function(a){e&&t.q(a,id,"centerX"),t.L(this,a),this.jd=a,this.Va=!0}),t.defineProperty(id,{Oa:"centerY"},function(){return this.ye},function(a){e&&t.q(a,id,"centerY"),t.L(this,a),this.ye=a,this.Va=!0}),t.defineProperty(id,{radiusX:"radiusX"},function(){return this.ng},function(a){e&&t.q(a,id,"radiusX"),0>a&&t.ka(a,">= zero",id,"radiusX"),t.L(this,a),this.ng=a,this.Va=!0}),t.defineProperty(id,{radiusY:"radiusY"},function(){return this.og},function(a){e&&t.q(a,id,"radiusY"),0>a&&t.ka(a,">= zero",id,"radiusY"),t.L(this,a),this.og=a,this.Va=!0}),t.defineProperty(id,{mh:"startAngle"},function(){return this.jb},function(a){this.jb!==a&&(t.L(this,a),e&&t.q(a,id,"startAngle"),a%=360,0>a&&(a+=360),this.jb=a,this.Va=!0)}),t.defineProperty(id,{gi:"sweepAngle"},function(){return this.tb},function(a){e&&t.q(a,id,"sweepAngle"),t.L(this,a),a>360&&(a=360),-360>a&&(a=-360),this.tb=a,this.Va=!0}),t.defineProperty(id,{Pw:"isClockwiseArc"},function(){return this.yn},function(a){t.L(this,a),this.yn=a,this.Va=!0}),t.defineProperty(id,{Sw:"isLargeArc"},function(){return this.jo},function(a){t.L(this,a),this.jo=a,this.Va=!0}),t.defineProperty(id,{Ex:"xAxisRotation"},function(){return this.jd},function(a){e&&t.q(a,id,"xAxisRotation"),a%=360,0>a&&(a+=360),t.L(this,a),this.jd=a,this.Va=!0}),t.ga("InputEvent",ld),ld.prototype.copy=function(){var a=new ld;return a.U=this.U,a.Cz.assign(this.Ke),a.Jy.assign(this.ea),a.jv=this.jv,a.qu=this.qu,a.Yu=this.Yu,a.Fu=this.Fu,a.Vv=this.Vv,a.su=this.su,a.Cu=this.Cu,a.Nu=this.Nu,a.oj=this.oj,a.Mq=this.Mq,a.Tv=this.Tv,a.Rv=this.Rv,a.pg=this.pg,a},ld.prototype.toString=function(){var a="^";return this.$c&&(a+="M:"+this.$c),this.button&&(a+="B:"+this.button),this.key&&(a+="K:"+this.key),this.Ae&&(a+="C:"+this.Ae),this.Yj&&(a+="D:"+this.Yj),this.Ee&&(a+="h"),this.bubbles&&(a+="b"),null!==this.ea&&(a+="@"+this.ea.toString()),a},t.g(ld,"diagram",ld.prototype.h),t.defineProperty(ld,{h:"diagram"},function(){return this.U},function(a){this.U=a}),t.g(ld,"viewPoint",ld.prototype.Ke),t.defineProperty(ld,{Ke:"viewPoint"},function(){return this.Cz},function(a){t.l(a,w,ld,"viewPoint"),this.Cz.assign(a)}),t.g(ld,"documentPoint",ld.prototype.ea),t.defineProperty(ld,{ea:"documentPoint"},function(){return this.Jy},function(a){t.l(a,w,ld,"documentPoint"),this.Jy.assign(a)}),t.g(ld,"modifiers",ld.prototype.$c),t.defineProperty(ld,{$c:"modifiers"},function(){return this.jv},function(a){this.jv=a}),t.g(ld,"button",ld.prototype.button),t.defineProperty(ld,{button:"button"},function(){return this.qu},function(a){this.qu=a}),t.g(ld,"key",ld.prototype.key),t.defineProperty(ld,{key:"key"},function(){return this.Yu},function(a){this.Yu=a}),t.g(ld,"down",ld.prototype.ak),t.defineProperty(ld,{ak:"down"},function(){return this.Fu},function(a){this.Fu=a}),t.g(ld,"up",ld.prototype.lj),t.defineProperty(ld,{lj:"up"},function(){return this.Vv},function(a){this.Vv=a}),t.g(ld,"clickCount",ld.prototype.Ae),t.defineProperty(ld,{Ae:"clickCount"},function(){return this.su},function(a){this.su=a}),t.g(ld,"delta",ld.prototype.Yj),t.defineProperty(ld,{Yj:"delta"},function(){return this.Cu},function(a){this.Cu=a}),t.g(ld,"handled",ld.prototype.Ee),t.defineProperty(ld,{Ee:"handled"},function(){return this.Nu},function(a){this.Nu=a}),t.g(ld,"bubbles",ld.prototype.bubbles),t.defineProperty(ld,{bubbles:"bubbles"},function(){return this.oj},function(a){this.oj=a}),t.g(ld,"event",ld.prototype.event),t.defineProperty(ld,{event:"event"},function(){return this.Mq},function(a){this.Mq=a}),t.A(ld,{Uw:"isTouchEvent"},function(){var a=window.TouchEvent;return a&&this.event instanceof a}),t.g(ld,"timestamp",ld.prototype.timestamp),t.defineProperty(ld,{timestamp:"timestamp"},function(){return this.Tv},function(a){this.Tv=a}),t.g(ld,"targetDiagram",ld.prototype.nh),t.defineProperty(ld,{nh:"targetDiagram"},function(){return this.Rv},function(a){this.Rv=a}),t.g(ld,"targetObject",ld.prototype.ce),t.defineProperty(ld,{ce:"targetObject"},function(){return this.pg},function(a){this.pg=a}),t.g(ld,"control",ld.prototype.control),t.defineProperty(ld,{control:"control"},function(){return 0!==(1&this.$c)},function(a){this.$c=a?1|this.$c:-2&this.$c}),t.g(ld,"shift",ld.prototype.shift),t.defineProperty(ld,{shift:"shift"},function(){return 0!==(4&this.$c)},function(a){this.$c=a?4|this.$c:-5&this.$c}),t.g(ld,"alt",ld.prototype.alt),t.defineProperty(ld,{alt:"alt"},function(){return 0!==(2&this.$c)},function(a){this.$c=a?2|this.$c:-3&this.$c}),t.g(ld,"meta",ld.prototype.Bp),t.defineProperty(ld,{Bp:"meta"},function(){return 0!==(8&this.$c)},function(a){this.$c=a?8|this.$c:-9&this.$c}),t.g(ld,"left",ld.prototype.left),t.defineProperty(ld,{left:"left"},function(){return 0===this.button},function(a){this.button=a?0:2}),t.g(ld,"middle",ld.prototype.pJ),t.defineProperty(ld,{pJ:"middle"},function(){return 1===this.button},function(a){this.button=a?1:0}),t.g(ld,"right",ld.prototype.right),t.defineProperty(ld,{right:"right"},function(){return 2===this.button},function(a){this.button=a?2:0}),t.ga("DiagramEvent",rd),rd.prototype.copy=function(){var a=new rd;return a.U=this.U,a.Zb=this.Zb,a.Nv=this.Nv,a.xv=this.xv,a.ru=this.ru,a},rd.prototype.toString=function(){var a="*"+this.name;return this.cancel&&(a+="x"),null!==this.Ax&&(a+=":"+this.Ax.toString()),null!==this.kx&&(a+="("+this.kx.toString()+")"),a},t.g(rd,"diagram",rd.prototype.h),t.defineProperty(rd,{h:"diagram"},function(){return this.U},function(a){this.U=a}),t.g(rd,"name",rd.prototype.name),t.defineProperty(rd,{name:"name"},function(){return this.Zb},function(a){this.Zb=a}),t.g(rd,"subject",rd.prototype.Ax),t.defineProperty(rd,{Ax:"subject"},function(){return this.Nv},function(a){this.Nv=a}),t.g(rd,"parameter",rd.prototype.kx),t.defineProperty(rd,{kx:"parameter"},function(){return this.xv},function(a){this.xv=a}),t.g(rd,"cancel",rd.prototype.cancel),t.defineProperty(rd,{cancel:"cancel"},function(){return this.ru},function(a){this.ru=a}),t.ga("ChangedEvent",td);var ud;td.Transaction=ud=t.w(td,"Transaction",-1);var vd;td.Property=vd=t.w(td,"Property",0);var wd;td.Insert=wd=t.w(td,"Insert",1);var xd;td.Remove=xd=t.w(td,"Remove",2),td.prototype.clear=td.prototype.clear=function(){this.sq=vd,this.om=this.iv="",this.mv=this.nv=this.tv=this.to=this.sv=this.U=this.ke=null},td.prototype.copy=function(){var a=new td;a.ke=this.ke,a.U=this.U,a.sq=this.sq,a.iv=this.iv,a.om=this.om,a.sv=this.sv;var b=this.to;return a.to=t.qb(b)&&"function"==typeof b.Z?b.Z():b,b=this.tv,a.tv=t.qb(b)&&"function"==typeof b.Z?b.Z():b,b=this.nv,a.nv=t.qb(b)&&"function"==typeof b.Z?b.Z():b,b=this.mv,a.mv=t.qb(b)&&"function"==typeof b.Z?b.Z():b,a},td.prototype.toString=function(){var a="",a=this.td===ud?a+"* ":this.td===vd?a+(null!==this.ba?"!m":"!d"):a+((null!==this.ba?"!m":"!d")+this.td);return this.propertyName&&"string"==typeof this.propertyName&&(a+=" "+this.propertyName),this.Af&&this.Af!==this.propertyName&&(a+=" "+this.Af),a+=": ",this.td===ud?null!==this.oldValue&&(a+=" "+this.oldValue):(null!==this.object&&(a+=yd(this.object)),null!==this.oldValue&&(a+="  old: "+yd(this.oldValue)),null!==this.Yf&&(a+=" "+this.Yf),null!==this.newValue&&(a+="  new: "+yd(this.newValue)),null!==this.Wf&&(a+=" "+this.Wf)),a},td.prototype.getValue=td.prototype.za=function(a){return a?this.oldValue:this.newValue},td.prototype.getParam=function(a){return a?this.Yf:this.Wf},td.prototype.canUndo=td.prototype.canUndo=function(){return null!==this.ba||null!==this.h?!0:!1},td.prototype.undo=td.prototype.undo=function(){this.canUndo()&&(null!==this.ba?this.ba.changeState(this,!0):null!==this.h&&this.h.changeState(this,!0))},td.prototype.canRedo=td.prototype.canRedo=function(){return null!==this.ba||null!==this.h?!0:!1},td.prototype.redo=td.prototype.redo=function(){this.canRedo()&&(null!==this.ba?this.ba.changeState(this,!1):null!==this.h&&this.h.changeState(this,!1))},t.g(td,"model",td.prototype.ba),t.defineProperty(td,{ba:"model"},function(){return this.ke},function(a){this.ke=a}),t.g(td,"diagram",td.prototype.h),t.defineProperty(td,{h:"diagram"},function(){return this.U},function(a){this.U=a}),t.g(td,"change",td.prototype.td),t.defineProperty(td,{td:"change"},function(){return this.sq},function(a){e&&t.Aa(a,td,td,"change"),this.sq=a}),t.g(td,"modelChange",td.prototype.Af),t.defineProperty(td,{Af:"modelChange"},function(){return this.iv},function(a){e&&t.i(a,"string",td,"modelChange"),this.iv=a}),t.g(td,"propertyName",td.prototype.propertyName),t.defineProperty(td,{propertyName:"propertyName"},function(){return this.om},function(a){e&&"string"!=typeof a&&t.l(a,Function,td,"propertyName"),this.om=a}),t.g(td,"isTransactionFinished",td.prototype.aJ),t.A(td,{aJ:"isTransactionFinished"},function(){return this.sq===ud&&("CommittedTransaction"===this.om||"FinishedUndo"===this.om||"FinishedRedo"===this.om)}),t.g(td,"object",td.prototype.object),t.defineProperty(td,{object:"object"},function(){return this.sv},function(a){this.sv=a}),t.g(td,"oldValue",td.prototype.oldValue),t.defineProperty(td,{oldValue:"oldValue"},function(){return this.to},function(a){this.to=a}),t.g(td,"oldParam",td.prototype.Yf),t.defineProperty(td,{Yf:"oldParam"},function(){return this.tv},function(a){this.tv=a}),t.g(td,"newValue",td.prototype.newValue),t.defineProperty(td,{newValue:"newValue"},function(){return this.nv},function(a){this.nv=a}),t.g(td,"newParam",td.prototype.Wf),t.defineProperty(td,{Wf:"newParam"},function(){return this.mv},function(a){this.mv=a}),t.ga("Model",E),E.prototype.clear=E.prototype.clear=function(){this.Zd&&t.Ym(this.Me,"nodeDataArray",this,!0),this.Me=[],this.Bc.clear(),this.xh.clear(),this.la.clear()},aa=E.prototype,aa.$t=function(){var a="";return""!==this.name&&(a+=',\n  "name": '+this.quote(this.name)),""!==this.Wj&&(a+=',\n  "dataFormat": '+this.quote(this.Wj)),this.ab&&(a+=',\n  "isReadOnly": '+this.ab),"key"!==this.ij&&"string"==typeof this.ij&&(a+=',\n  "nodeKeyProperty": '+this.quote(this.ij)),this.rw&&(a+=',\n  "copiesArrays": true'),this.qw&&(a+=',\n  "copiesArrayObjects": true'),"category"!==this.rl&&"string"==typeof this.rl&&(a+=',\n  "nodeCategoryProperty": '+this.quote(this.rl)),a},aa.rB=function(){var a,b="",c=this.BA,d=!1;for(a in c)if(!Ad(a,c[a])){d=!0;break}return d&&(b=',\n  "modelData": '+Bd(this,c)),b+',\n  "nodeDataArray": '+Cd(this,this.Gg,!0)},aa.Ht=function(a){a.name&&(this.name=a.name),a.dataFormat&&(this.Wj=a.dataFormat),a.isReadOnly&&(this.ab=a.isReadOnly),a.nodeKeyProperty&&(this.ij=a.nodeKeyProperty),a.copiesArrays&&(this.rw=a.copiesArrays),a.copiesArrayObjects&&(this.qw=a.copiesArrayObjects),a.nodeCategoryProperty&&(this.rl=a.nodeCategoryProperty)},aa.PA=function(a){var b=a.modelData;b&&(this.Jt(b),this.BA=b),(a=a.nodeDataArray)&&(this.Jt(a),this.Gg=a)},aa.toString=function(a){if(void 0===a&&(a=0),a>1)return this.iB();var b=(""!==this.name?this.name:"")+" Model";if(a>0){b+="\n node data:",a=this.Gg;var c,d=t.ub(a);for(c=0;d>c;c++)var e=t.lb(a,c),b=b+(" "+this.Hb(e)+":"+yd(e))}return b},E.prototype.toJson=E.prototype.toJSON=E.prototype.iB=function(a){return void 0===a&&(a=this.constructor===E?"go.Model":this.constructor===M?"go.GraphLinksModel":this.constructor===Kd?"go.TreeModel":t.xg(this)),'{ "class": '+this.quote(a)+this.$t()+this.rB()+"}"},E.fromJson=E.fromJSON=function(a,b){void 0===b&&(b=null),b&&t.l(b,E,E,"fromJson:model");var c=null;if("string"==typeof a)if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){e&&t.trace("JSON.parse error: "+d.toString())}else t.trace("WARNING: no JSON.parse available");else"object"==typeof a?c=a:t.m("Unable to construct a Model from: "+a);if(null===b){var f;f=null;var g=c["class"];if("string"==typeof g)try{var h=null;0===g.indexOf("go.")?(g=g.substr(3),h=ba[g]):(h=ba[g])||(h=window[g]),"function"==typeof h&&(f=new h)}catch(i){}null===f||f instanceof E?b=f:t.m("Unable to construct a Model of declared class: "+c["class"])}return null===b&&(b=new M),b.Ht(c),b.PA(c),b},E.prototype.replaceJsonObjects=E.prototype.Jt=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++){var d=t.lb(a,c);t.qb(d)&&t.MD(a,c,this.Jt(d))}else if(t.qb(a)){for(c in a)if(d=a[c],t.qb(d)&&(d=this.Jt(d),a[c]=d,"points"===c&&Array.isArray(d))){for(var e=0===d.length%2,f=0;f<d.length;f++)if("number"!=typeof d[f]){e=!1;break}if(e){for(e=new B(w),f=0;f<d.length/2;f++){var g=new w(d[2*f],d[2*f+1]);e.add(g)}e.freeze(),a[c]=e}}if("object"==typeof a){if(c=a,d=a["class"],"NaN"===d)c=NaN;else if("Date"===d)c=new Date(a.value);else if("go.Point"===d)c=new w(Ld(a.x),Ld(a.y));else if("go.Size"===d)c=new fa(Ld(a.width),Ld(a.height));else if("go.Rect"===d)c=new x(Ld(a.x),Ld(a.y),Ld(a.width),Ld(a.height));else if("go.Margin"===d)c=new ab(Ld(a.top),Ld(a.right),Ld(a.bottom),Ld(a.left));else if("go.Spot"===d)c="string"==typeof a["enum"]?vb(a["enum"]):new H(Ld(a.x),Ld(a.y),Ld(a.offsetX),Ld(a.offsetY));else if("go.Brush"===d){if(c=new ea,c.type=t.Pm(ea,a.type),a.start instanceof H&&(c.start=a.start),a.end instanceof H&&(c.end=a.end),"number"==typeof a.startRadius&&(c.Vp=Ld(a.startRadius)),"number"==typeof a.endRadius&&(c.ap=Ld(a.endRadius)),a=a.colorStops)for(b in a)c.addColorStop(parseFloat(b),a[b])}else"go.Geometry"===d&&(c="string"==typeof a.path?Rc(a.path):new zc,c.type=t.Pm(zc,a.type),"number"==typeof a.startX&&(c.qa=Ld(a.startX)),"number"==typeof a.startY&&(c.ra=Ld(a.startY)),"number"==typeof a.endX&&(c.D=Ld(a.endX)),"number"==typeof a.endY&&(c.F=Ld(a.endY)),a.spot1 instanceof H&&(c.G=a.spot1),a.spot2 instanceof H&&(c.H=a.spot2));a=c}}return a},E.prototype.quote=function(a){for(var b="",c=a.length,d=0;c>d;d++)var e=a[d],b='"'===e||"\\"===e?b+("\\"+e):"\b"===e?b+"\\b":"\f"===e?b+"\\f":"\n"===e?b+"\\n":"\r"===e?b+"\\r":"	"===e?b+"\\t":b+e;return'"'+b+'"'},E.prototype.writeJsonValue=E.prototype.au=function(a){return void 0===a?"undefined":null===a?"null":!0===a?"true":!1===a?"false":"string"==typeof a?this.quote(a):"number"==typeof a?1/0===a?"9e9999":-(1/0)===a?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString():a instanceof Date?'{"class":"Date", "value":"'+a.toJSON()+'"}':a instanceof Number?this.au(a.valueOf()):t.isArray(a)?Cd(this,a):t.qb(a)?Bd(this,a):"function"==typeof a?"null":a.toString()},t.g(E,"name",E.prototype.name),t.defineProperty(E,{name:"name"},function(){return this.Zb},function(a){var b=this.Zb;b!==a&&(t.i(a,"string",E,"name"),this.Zb=a,this.j("name",b,a))}),t.g(E,"dataFormat",E.prototype.Wj),t.defineProperty(E,{Wj:"dataFormat"},function(){return this.Dy},function(a){var b=this.Dy;b!==a&&(t.i(a,"string",E,"dataFormat"),this.Dy=a,this.j("dataFormat",b,a))}),t.g(E,"knockoutJS",E.prototype.Zd),t.defineProperty(E,{Zd:"knockoutJS"},function(){return this.yC},function(a){this.yC=a,t.zc||(t.zc="object"==typeof window.ko&&"function"==typeof window.ko.isObservable?window.ko.isObservable:null,a&&null===t.zc&&t.trace("No value for ko.isObservable: is KnockoutJS library not loaded?"))}),t.g(E,"isReadOnly",E.prototype.ab),t.defineProperty(E,{ab:"isReadOnly"},function(){return this.Jk},function(a){var b=this.Jk;b!==a&&(t.i(a,"boolean",E,"isReadOnly"),this.Jk=a,this.j("isReadOnly",b,a))}),t.g(E,"modelData",E.prototype.BA),t.defineProperty(E,{BA:"modelData"},function(){return this.hz},function(a){var b=this.hz;b!==a&&(t.i(a,"object",E,"modelData"),this.hz=a,this.j("modelData",b,a))}),E.prototype.addChangedListener=E.prototype.Iz=function(a){t.i(a,"function",E,"addChangedListener:listener"),null===this.Bj&&(this.Bj=new B("function")),this.Bj.add(a)},E.prototype.removeChangedListener=E.prototype.TA=function(a){t.i(a,"function",E,"removeChangedListener:listener"),null!==this.Bj&&(this.Bj.remove(a),0===this.Bj.count&&(this.Bj=null))},E.prototype.iw=function(a){if(this.Wa||this.la.PE(a),null!==this.Bj){var b=this.Bj,c=b.length;if(1===c)(b=b.wa(0))(a);else if(0!==c)for(var d=b.Ie(),e=0;c>e;e++)(b=d[e])(a)}},E.prototype.raiseChangedEvent=E.prototype.Ic=function(a,b,c,d,e,f,g){me(this,"",a,b,c,d,e,f,g)},E.prototype.raiseChanged=E.prototype.j=function(a,b,c,d,e){me(this,"",vd,a,this,b,c,d,e)},E.prototype.raiseDataChanged=E.prototype.mx=function(a,b,c,d,e,f){me(this,"",vd,b,a,c,d,e,f)},t.g(E,"undoManager",E.prototype.la),t.defineProperty(E,{la:"undoManager"},function(){return this.Bz},function(a){var b=this.Bz;b!==a&&(t.l(a,zd,E,"undoManager"),null!==b&&b.JJ(this),this.Bz=a,null!==a&&a.EH(this))}),t.g(E,"skipsUndoManager",E.prototype.Wa),t.defineProperty(E,{Wa:"skipsUndoManager"},function(){return this.Li},function(a){t.i(a,"boolean",E,"skipsUndoManager"),this.Li=a}),E.prototype.changeState=function(a,b){if(null!==a&&a.ba===this)if(a.td===vd){var c=a.object,d=a.propertyName,e=a.za(b);t.Qa(c,d,e)}else a.td===wd?"nodeDataArray"===a.Af?(c=a.newValue,t.qb(c)&&(d=this.Hb(c),void 0!==d&&(b?(this.Zd&&t.yf(c,this,!0),t.Ui(this.Me,a.Wf),this.Bc.remove(d)):(this.Zd&&t.yf(c,this,!1),t.Ti(this.Me,a.Wf,c),this.Bc.add(d,c))))):""===a.Af?(c=a.object,!t.isArray(c)&&a.propertyName&&(c=t.ib(a.object,a.propertyName)),t.isArray(c)&&(d=a.newValue,e=a.Wf,b?t.Ui(c,e):t.Ti(c,e,d))):t.m("unknown ChangedEvent.Insert object: "+a.toString()):a.td===xd?"nodeDataArray"===a.Af?(c=a.oldValue,t.qb(c)&&(d=this.Hb(c),void 0!==d&&(b?(this.Zd&&t.yf(c,this,!1),t.Ti(this.Me,a.Yf,c),this.Bc.add(d,c)):(this.Zd&&t.yf(c,this,!0),t.Ui(this.Me,a.Yf),this.Bc.remove(d))))):""===a.Af?(c=a.object,!t.isArray(c)&&a.propertyName&&(c=t.ib(a.object,a.propertyName)),t.isArray(c)&&(d=a.oldValue,e=a.Yf,b?t.Ti(c,e,d):t.Ui(c,e))):t.m("unknown ChangedEvent.Remove object: "+a.toString()):a.td!==ud&&t.m("unknown ChangedEvent: "+a.toString())},E.prototype.startTransaction=E.prototype.uc=function(a){return this.la.uc(a)},E.prototype.commitTransaction=E.prototype.Ce=function(a){return this.la.Ce(a)},E.prototype.rollbackTransaction=E.prototype.Np=function(){return this.la.Np()},E.prototype.updateTargetBindings=E.prototype.Kb=function(a,b){void 0===b&&(b=""),me(this,"SourceChanged",ud,b,a,null,null)},t.g(E,"nodeKeyProperty",E.prototype.ij),t.defineProperty(E,{ij:"nodeKeyProperty"},function(){return this.jm},function(a){var b=this.jm;b!==a&&(ne(a,E,"nodeKeyProperty"),0<this.Bc.count&&t.m("Cannot set Model.nodeKeyProperty when there is existing node data"),this.jm=a,this.j("nodeKeyProperty",b,a))}),E.prototype.getKeyForNodeData=E.prototype.Hb=function(a){if(null!==a){var b=this.jm;if(""!==b&&(b=t.ib(a,b),void 0!==b)){if(oe(b))return b;t.m("Key value for node data "+a+" is not a number or a string: "+b)}}},E.prototype.setKeyForNodeData=E.prototype.aB=function(a,b){if(null===b&&(b=void 0),void 0===b||oe(b)||t.bc(b,"number or string",E,"setKeyForNodeData:key"),null!==a){var c=this.jm;if(""!==c)if(this.ne(a)){var d=t.ib(a,c);d!==b&&null===this.uf(b)&&(t.Qa(a,c,b),this.Bc.remove(d),this.Bc.add(b,a),me(this,"nodeKey",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c),this.It(d,b))}else t.Qa(a,c,b)}},t.g(E,"makeUniqueKeyFunction",E.prototype.lJ),t.defineProperty(E,{lJ:"makeUniqueKeyFunction"},function(){return this.bv},function(a){var b=this.bv;b!==a&&(null!==a&&t.i(a,"function",E,"makeUniqueKeyFunction"),this.bv=a,this.j("makeUniqueKeyFunction",b,a))}),E.prototype.containsNodeData=E.prototype.ne=function(a){return a=this.Hb(a),void 0===a?!1:this.Bc.contains(a)},E.prototype.findNodeDataForKey=E.prototype.uf=function(a){return null===a&&t.m("Model.findNodeDataForKey:key must not be null"),void 0!==a&&oe(a)?this.Bc.za(a):null},t.g(E,"nodeDataArray",E.prototype.Gg),t.defineProperty(E,{Gg:"nodeDataArray"},function(){return this.Me},function(a){var b=this.Me;if(b!==a){t.Rs(a,E,"nodeDataArray"),this.Zd&&t.zc&&(null!==b&&t.Ym(b,"nodeDataArray",this,!0),a=t.Ym(a,"nodeDataArray",this,!1)),this.Bc.clear(),this.mB();for(var c=t.ub(a),d=0;c>d;d++){var e=t.lb(a,d);if(!t.qb(e))return void t.m("Model.nodeDataArray must only contain Objects, not: "+e);t.jt(e)}this.Me=a;for(var f=new B(Object),d=0;c>d;d++){var e=t.lb(a,d),g=this.Hb(e);void 0===g?f.add(e):null!==this.Bc.za(g)?f.add(e):this.Bc.add(g,e)}for(d=f.k;d.next();)e=d.value,this.sF(e),f=this.Hb(e),this.Bc.add(f,e);for(me(this,"nodeDataArray",vd,"nodeDataArray",this,b,a),d=0;c>d;d++)e=t.lb(a,d),this.Mp(e),this.Lp(e);this.UD(),t.YI(a)||(this.ab=!0)}}),E.prototype.makeNodeDataKeyUnique=E.prototype.sF=function(a){if(null!==a){var b=this.jm;if(""!==b){var c=this.Hb(a);if(void 0===c||this.Bc.contains(c)){var d=this.bv;if(null!==d&&(c=d(this,a),void 0!==c&&null!==c&&!this.Bc.contains(c)))return void t.Qa(a,b,c);if("string"==typeof c){for(d=2;this.Bc.contains(c+d);)d++;t.Qa(a,b,c+d)}else if(void 0===c||"number"==typeof c){for(d=-this.Bc.count-1;this.Bc.contains(d);)d--;t.Qa(a,b,d)}else t.m("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}},E.prototype.addNodeData=E.prototype.Am=function(a){if(null!==a){this.Zd&&t.yf(a,this,!1),t.jt(a);var b=this.Hb(a);(void 0===b||this.Bc.za(b)!==a)&&(this.sF(a),b=this.Hb(a),this.Bc.add(b,a),b=t.ub(this.Me),t.Ti(this.Me,b,a),me(this,"nodeDataArray",wd,"nodeDataArray",this,null,a,null,b),this.Mp(a),this.Lp(a))}},E.prototype.addNodeDataCollection=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.Am(t.lb(a,c));else for(a=a.k;a.next();)this.Am(a.value)},E.prototype.removeNodeData=E.prototype.nx=function(a){if(null!==a){var b=this.Hb(a);void 0!==b&&this.Bc.contains(b)&&(this.Zd&&t.yf(a,this,!0),this.Bc.remove(b),b=t.Pz(this.Me,a),0>b||(t.Ui(this.Me,b),me(this,"nodeDataArray",xd,"nodeDataArray",this,a,null,b,null),this.Zt(a)))}},E.prototype.removeNodeDataCollection=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.nx(t.lb(a,c));else for(a=a.k;a.next();)this.nx(a.value)},aa=E.prototype,aa.It=function(a,b){var c=pe(this,a);c instanceof ma&&this.xh.add(b,c)},aa.mB=function(){},aa.Mp=function(){},aa.Lp=function(){},aa.Zt=function(){},E.prototype.clearUnresolvedReferences=E.prototype.UD=function(a){void 0===a?this.xh.clear():this.xh.remove(a)},t.g(E,"copyNodeDataFunction",E.prototype.iI),t.defineProperty(E,{iI:"copyNodeDataFunction"},function(){return this.wu},function(a){var b=this.wu;b!==a&&(null!==a&&t.i(a,"function",E,"copyNodeDataFunction"),this.wu=a,this.j("copyNodeDataFunction",b,a))}),t.g(E,"copiesArrays",E.prototype.rw),t.defineProperty(E,{rw:"copiesArrays"},function(){return this.wy},function(a){var b=this.wy;b!==a&&(null!==a&&t.i(a,"boolean",E,"copiesArrays"),this.wy=a,this.j("copiesArrays",b,a))}),t.g(E,"copiesArrayObjects",E.prototype.qw),t.defineProperty(E,{qw:"copiesArrayObjects"},function(){return this.vy},function(a){var b=this.vy;b!==a&&(null!==a&&t.i(a,"boolean",E,"copiesArrayObjects"),this.vy=a,this.j("copiesArrayObjects",b,a))}),E.prototype.copyNodeData=function(a){if(null===a)return null;var b=null,b=this.wu;if(null!==b)b=b(a,this);else{var c,b=new a.constructor;for(c in a){var d=t.ib(a,c);if((!e||!ze(a,c,d))&&this.rw&&Array.isArray(d)){for(var f=[],g=0;g<d.length;g++){var h=d[g];if(this.qw&&t.qb(h)){var i,j=new h.constructor;for(i in h){var k=t.ib(h,i);e&&ze(h,i,k),t.Qa(j,i,k)}h=j}f.push(h)}d=f}t.Qa(b,c,d)}this.Zd&&t.yf(b,this,!1)}return b&&t.Ac(b),b},E.prototype.setDataProperty=function(a,b,c){if(e&&(t.i(a,"object",E,"setDataProperty:data"),t.i(b,"string",E,"setDataProperty:propname"),""===b&&t.m("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.ne(a)){if(b===this.ij)this.aB(a,c);else if(b===this.rl)return void this.sx(a,c)}else!t.Zp&&a instanceof Q&&(t.Zp=!0,t.trace('Model.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),t.trace("  Is that really your intent?"));var d=t.ib(a,b);d!==c&&(t.Qa(a,b,c),this.mx(a,b,d,c))},E.prototype.addArrayItem=function(a,b){this.UI(a,-1,b)},E.prototype.insertArrayItem=E.prototype.UI=function(a,b,c){e&&(t.Rs(a,E,"insertArrayItem:arr"),t.q(b,E,"insertArrayItem:idx")),a===this.Me&&t.m("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>b&&(b=t.ub(a)),t.Ti(a,b,c),me(this,"",wd,"",a,null,c,null,b)},E.prototype.removeArrayItem=function(a,b){void 0===b&&(b=-1),e&&(t.Rs(a,E,"removeArrayItem:arr"),t.q(b,E,"removeArrayItem:idx")),a===this.Me&&t.m("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===b&&(b=t.ub(a)-1);var c=t.lb(a,b);t.Ui(a,b),me(this,"",xd,"",a,c,null,b,null)},t.g(E,"nodeCategoryProperty",E.prototype.rl),t.defineProperty(E,{rl:"nodeCategoryProperty"},function(){return this.Hr},function(a){var b=this.Hr;b!==a&&(ne(a,E,"nodeCategoryProperty"),this.Hr=a,this.j("nodeCategoryProperty",b,a))}),E.prototype.getCategoryForNodeData=E.prototype.getCategoryForNodeData=function(a){if(null===a)return"";var b=this.Hr;return""===b?"":(b=t.ib(a,b),void 0===b?"":"string"==typeof b?b:(t.m("getCategoryForNodeData found a non-string category for "+a+": "+b),""))},E.prototype.setCategoryForNodeData=E.prototype.sx=function(a,b){if(t.i(b,"string",E,"setCategoryForNodeData:cat"),null!==a){var c=this.Hr;if(""!==c)if(this.ne(a)){var d=t.ib(a,c);void 0===d&&(d=""),d!==b&&(t.Qa(a,c,b),me(this,"nodeCategory",vd,c,a,d,b))}else t.Qa(a,c,b)}},t.ga("GraphLinksModel",M),t.Ka(M,E),M.prototype.clear=M.prototype.clear=function(){E.prototype.clear.call(this),this.Zd&&t.Ym(this.Xg,"linkDataArray",this,!0),this.Xg=[],this.em.clear()},aa=M.prototype,aa.toString=function(a){if(void 0===a&&(a=0),a>=2)return this.iB();var b=(""!==this.name?this.name:"")+" GraphLinksModel";if(a>0){b+="\n node data:",a=this.Gg;var c,d=t.ub(a);for(c=0;d>c;c++)var e=t.lb(a,c),b=b+(" "+this.Hb(e)+":"+yd(e));for(b+="\n link data:",a=this.hj,d=t.ub(a),c=0;d>c;c++)e=t.lb(a,c),b+=" "+this.il(e)+"-->"+this.ml(e)}return b},aa.$t=function(){var a=E.prototype.$t.call(this),b="";return"category"!==this.up&&"string"==typeof this.up&&(b+=',\n  "linkCategoryProperty": '+this.quote(this.up)),"from"!==this.Zm&&"string"==typeof this.Zm&&(b+=',\n  "linkFromKeyProperty": '+this.quote(this.Zm)),"to"!==this.$m&&"string"==typeof this.$m&&(b+=',\n  "linkToKeyProperty": '+this.quote(this.$m)),""!==this.vp&&"string"==typeof this.vp&&(b+=',\n  "linkFromPortIdProperty": '+this.quote(this.vp)),""!==this.zp&&"string"==typeof this.zp&&(b+=',\n  "linkToPortIdProperty": '+this.quote(this.zp)),""!==this.Ct&&"string"==typeof this.Ct&&(b+=',\n  "nodeIsLinkLabelProperty": '+this.quote(this.Ct)),""!==this.wp&&"string"==typeof this.wp&&(b+=',\n  "linkLabelKeysProperty": '+this.quote(this.wp)),"isGroup"!==this.Ip&&"string"==typeof this.Ip&&(b+=',\n  "nodeIsGroupProperty": '+this.quote(this.Ip)),"group"!==this.en&&"string"==typeof this.en&&(b+=',\n  "nodeGroupKeyProperty": '+this.quote(this.en)),a+b},aa.rB=function(){var a=E.prototype.rB.call(this),b=',\n  "linkDataArray": '+Cd(this,this.hj,!0);return a+b},aa.Ht=function(a){E.prototype.Ht.call(this,a),a.linkFromKeyProperty&&(this.Zm=a.linkFromKeyProperty),a.linkToKeyProperty&&(this.$m=a.linkToKeyProperty),a.linkFromPortIdProperty&&(this.vp=a.linkFromPortIdProperty),a.linkToPortIdProperty&&(this.zp=a.linkToPortIdProperty),a.linkCategoryProperty&&(this.up=a.linkCategoryProperty),a.nodeIsLinkLabelProperty&&(this.Ct=a.nodeIsLinkLabelProperty),a.linkLabelKeysProperty&&(this.wp=a.linkLabelKeysProperty),a.nodeIsGroupProperty&&(this.Ip=a.nodeIsGroupProperty),a.nodeGroupKeyProperty&&(this.en=a.nodeGroupKeyProperty)},aa.PA=function(a){E.prototype.PA.call(this,a),(a=a.linkDataArray)&&(this.Jt(a),this.hj=a)},M.prototype.changeState=function(a,b){if(a.td===wd){var c=null;if("linkDataArray"===a.Af?c=this.Xg:"linkLabelKeys"===a.Af&&(c=this.kl(a.object)),t.isArray(c))return void(b?(this.Zd&&t.qb(a.newValue)&&t.yf(a.newValue,this,!0),t.Ui(c,a.Wf)):(this.Zd&&t.qb(a.newValue)&&t.yf(a.newValue,this,!1),t.Ti(c,a.Wf,a.newValue)))}else if(a.td===xd&&(c=null,"linkDataArray"===a.Af?c=this.Xg:"linkLabelKeys"===a.Af&&(c=this.kl(a.object)),t.isArray(c)))return void(b?(this.Zd&&t.qb(a.oldValue)&&t.yf(a.oldValue,this,!1),t.Ti(c,a.Yf,a.oldValue)):(this.Zd&&t.qb(a.oldValue)&&t.yf(a.oldValue,this,!0),t.Ui(c,a.Yf)));E.prototype.changeState.call(this,a,b)},t.g(M,"archetypeNodeData",M.prototype.Os),t.defineProperty(M,{Os:"archetypeNodeData"
},function(){return this.xk},function(a){var b=this.xk;b!==a&&(null!==a&&t.l(a,Object,M,"archetypeNodeData"),this.xk=a,this.j("archetypeNodeData",b,a))}),M.prototype.bn=function(a){if(void 0!==a){var b=this.xk;if(null!==b){var c=this.uf(a);null===c&&(c=this.copyNodeData(b),t.Qa(c,this.jm,a),this.Am(c))}return a}},t.g(M,"linkFromKeyProperty",M.prototype.Zm),t.defineProperty(M,{Zm:"linkFromKeyProperty"},function(){return this.xj},function(a){var b=this.xj;b!==a&&(ne(a,M,"linkFromKeyProperty"),this.xj=a,this.j("linkFromKeyProperty",b,a))}),M.prototype.getFromKeyForLinkData=M.prototype.il=function(a){if(null!==a){var b=this.xj;if(""!==b&&(b=t.ib(a,b),void 0!==b)){if(oe(b))return b;t.m("FromKey value for link data "+a+" is not a number or a string: "+b)}}},M.prototype.setFromKeyForLinkData=M.prototype.ux=function(a,b){if(null===b&&(b=void 0),void 0===b||oe(b)||t.bc(b,"number or string",M,"setFromKeyForLinkData:key"),null!==a){var c=this.xj;if(""!==c)if(b=this.bn(b),this.Yi(a)){var d=t.ib(a,c);d!==b&&(re(this,d,a),t.Qa(a,c,b),null===this.uf(b)&&qe(this,b,a),me(this,"linkFromKey",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c))}else t.Qa(a,c,b)}},t.g(M,"linkToKeyProperty",M.prototype.$m),t.defineProperty(M,{$m:"linkToKeyProperty"},function(){return this.Aj},function(a){var b=this.Aj;b!==a&&(ne(a,M,"linkToKeyProperty"),this.Aj=a,this.j("linkToKeyProperty",b,a))}),M.prototype.getToKeyForLinkData=M.prototype.ml=function(a){if(null!==a){var b=this.Aj;if(""!==b&&(b=t.ib(a,b),void 0!==b)){if(oe(b))return b;t.m("ToKey value for link data "+a+" is not a number or a string: "+b)}}},M.prototype.setToKeyForLinkData=M.prototype.wx=function(a,b){if(null===b&&(b=void 0),void 0===b||oe(b)||t.bc(b,"number or string",M,"setToKeyForLinkData:key"),null!==a){var c=this.Aj;if(""!==c)if(b=this.bn(b),this.Yi(a)){var d=t.ib(a,c);d!==b&&(re(this,d,a),t.Qa(a,c,b),null===this.uf(b)&&qe(this,b,a),me(this,"linkToKey",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c))}else t.Qa(a,c,b)}},t.g(M,"linkFromPortIdProperty",M.prototype.vp),t.defineProperty(M,{vp:"linkFromPortIdProperty"},function(){return this.or},function(a){var b=this.or;b!==a&&(ne(a,M,"linkFromPortIdProperty"),this.or=a,this.j("linkFromPortIdProperty",b,a))}),M.prototype.getFromPortIdForLinkData=M.prototype.HI=function(a){if(null===a)return"";var b=this.or;return""===b?"":(a=t.ib(a,b),void 0===a?"":a)},M.prototype.setFromPortIdForLinkData=M.prototype.$A=function(a,b){if(t.i(b,"string",M,"setFromPortIdForLinkData:portname"),null!==a){var c=this.or;if(""!==c)if(this.Yi(a)){var d=t.ib(a,c);void 0===d&&(d=""),d!==b&&(t.Qa(a,c,b),me(this,"linkFromPortId",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c))}else t.Qa(a,c,b)}},t.g(M,"linkToPortIdProperty",M.prototype.zp),t.defineProperty(M,{zp:"linkToPortIdProperty"},function(){return this.pr},function(a){var b=this.pr;b!==a&&(ne(a,M,"linkToPortIdProperty"),this.pr=a,this.j("linkToPortIdProperty",b,a))}),M.prototype.getToPortIdForLinkData=M.prototype.KI=function(a){if(null===a)return"";var b=this.pr;return""===b?"":(a=t.ib(a,b),void 0===a?"":a)},M.prototype.setToPortIdForLinkData=M.prototype.cB=function(a,b){if(t.i(b,"string",M,"setToPortIdForLinkData:portname"),null!==a){var c=this.pr;if(""!==c)if(this.Yi(a)){var d=t.ib(a,c);void 0===d&&(d=""),d!==b&&(t.Qa(a,c,b),me(this,"linkToPortId",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c))}else t.Qa(a,c,b)}},t.g(M,"nodeIsLinkLabelProperty",M.prototype.Ct),t.defineProperty(M,{Ct:"nodeIsLinkLabelProperty"},function(){return this.pv},function(a){var b=this.pv;b!==a&&(ne(a,M,"nodeIsLinkLabelProperty"),this.pv=a,this.j("nodeIsLinkLabelProperty",b,a))}),M.prototype.isLinkLabelForNodeData=M.prototype.XI=function(a){if(null===a)return!1;var b=this.pv;return""===b?!1:t.ib(a,b)?!0:!1},t.g(M,"linkLabelKeysProperty",M.prototype.wp),t.defineProperty(M,{wp:"linkLabelKeysProperty"},function(){return this.Jh},function(a){var b=this.Jh;b!==a&&(ne(a,M,"linkLabelKeysProperty"),this.Jh=a,this.j("linkLabelKeysProperty",b,a))}),M.prototype.getLabelKeysForLinkData=M.prototype.kl=function(a){if(null===a)return t.ji;var b=this.Jh;return""===b?t.ji:(a=t.ib(a,b),void 0===a?t.ji:a)},M.prototype.setLabelKeysForLinkData=M.prototype.mG=function(a,b){if(t.Rs(b,M,"setLabelKeysForLinkData:arr"),null!==a){var c=this.Jh;if(""!==c)if(this.Yi(a)){var d=t.ib(a,c);if(void 0===d&&(d=t.ji),d!==b){for(var e=t.ub(d),f=0;e>f;f++){var g=t.lb(d,f);re(this,g,a)}for(t.Qa(a,c,b),e=t.ub(b),f=0;e>f;f++)g=t.lb(b,f),null===this.uf(g)&&qe(this,g,a);me(this,"linkLabelKeys",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c)}}else t.Qa(a,c,b)}},M.prototype.addLabelKeyForLinkData=M.prototype.GD=function(a,b){if(null!==b&&void 0!==b&&(oe(b)||t.bc(b,"number or string",M,"addLabelKeyForLinkData:key"),null!==a)){var c=this.Jh;if(""!==c){var d=t.ib(a,c);void 0===d?this.mG(a,[b]):t.isArray(d)?0<=t.Pz(d,b)||(t.Ti(d,1/0,b),this.Yi(a)&&(null===this.uf(b)&&qe(this,b,a),me(this,"linkLabelKeys",wd,c,a,null,b))):t.m(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}},M.prototype.removeLabelKeyForLinkData=M.prototype.IJ=function(a,b){if(null!==b&&void 0!==b&&(oe(b)||t.bc(b,"number or string",M,"removeLabelKeyForLinkData:key"),null!==a)){var c=this.Jh;if(""!==c){var d=t.ib(a,c);if(t.isArray(d)){var e=t.Pz(d,b);0>e||(t.Ui(d,e),this.Yi(a)&&(re(this,b,a),me(this,"linkLabelKeys",xd,c,a,b,null)))}else void 0!==d&&t.m(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}},t.g(M,"linkDataArray",M.prototype.hj),t.defineProperty(M,{hj:"linkDataArray"},function(){return this.Xg},function(a){var b=this.Xg;if(b!==a){t.Rs(a,M,"linkDataArray"),this.Zd&&t.zc&&(null!==b&&t.Ym(b,"linkDataArray",this,!0),a=t.Ym(a,"linkDataArray",this,!1));for(var c=t.ub(a),d=0;c>d;d++){var e=t.lb(a,d);if(!t.qb(e))return void t.m("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);t.jt(e)}this.Xg=a;for(var f=new ma(Object),d=0;c>d;d++)e=t.lb(a,d),f.add(e);for(this.em=f,me(this,"linkDataArray",vd,"linkDataArray",this,b,a),d=0;c>d;d++)e=t.lb(a,d),Ce(this,e)}}),M.prototype.containsLinkData=M.prototype.Yi=function(a){return null===a?!1:this.em.contains(a)},M.prototype.addLinkData=M.prototype.aw=function(a){if(null!==a){if(this.Zd&&t.yf(a,this,!1),void 0===t.od(a))t.Ac(a);else if(this.Yi(a))return;this.em.add(a);var b=t.ub(this.Xg);t.Ti(this.Xg,b,a),me(this,"linkDataArray",wd,"linkDataArray",this,null,a,null,b),Ce(this,a)}},M.prototype.addLinkDataCollection=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.aw(t.lb(a,c));else for(a=a.k;a.next();)this.aw(a.value)},M.prototype.removeLinkData=M.prototype.UA=function(a){if(null!==a){this.Zd&&t.yf(a,this,!0),this.em.remove(a);var b=this.Xg.indexOf(a);if(!(0>b)){t.Ui(this.Xg,b),me(this,"linkDataArray",xd,"linkDataArray",this,a,null,b,null),b=this.il(a),re(this,b,a),b=this.ml(a),re(this,b,a);var c=this.kl(a);if(t.isArray(c))for(var d=t.ub(c),e=0;d>e;e++)b=t.lb(c,e),re(this,b,a)}}},M.prototype.removeLinkDataCollection=function(a){if(t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++)this.UA(t.lb(a,c));else for(a=a.k;a.next();)this.UA(a.value)},t.g(M,"copyLinkDataFunction",M.prototype.hI),t.defineProperty(M,{hI:"copyLinkDataFunction"},function(){return this.vu},function(a){var b=this.vu;b!==a&&(null!==a&&t.i(a,"function",M,"copyLinkDataFunction"),this.vu=a,this.j("copyLinkDataFunction",b,a))}),M.prototype.copyLinkData=M.prototype.eE=function(a){if(null===a)return null;var b=null,b=this.vu;if(null!==b)b=b(a,this);else{var c,b=new a.constructor;for(c in a){var d=t.ib(a,c);e&&ze(a,c,d),t.Qa(b,c,d)}this.Zd&&t.yf(b,this,!1)}return b&&(t.Ac(b),""!==this.xj&&t.Qa(b,this.xj,void 0),""!==this.Aj&&t.Qa(b,this.Aj,void 0),""!==this.Jh&&t.Qa(b,this.Jh,[])),b},t.g(M,"nodeIsGroupProperty",M.prototype.Ip),t.defineProperty(M,{Ip:"nodeIsGroupProperty"},function(){return this.ov},function(a){var b=this.ov;b!==a&&(ne(a,M,"nodeIsGroupProperty"),this.ov=a,this.j("nodeIsGroupProperty",b,a))}),M.prototype.isGroupForNodeData=M.prototype.sA=function(a){if(null===a)return!1;var b=this.ov;return""===b?!1:t.ib(a,b)?!0:!1},t.g(M,"nodeGroupKeyProperty",M.prototype.en),t.defineProperty(M,{en:"nodeGroupKeyProperty"},function(){return this.Gj},function(a){var b=this.Gj;b!==a&&(ne(a,M,"nodeGroupKeyProperty"),this.Gj=a,this.j("nodeGroupKeyProperty",b,a))}),t.g(M,"copiesGroupKeyOfNodeData",M.prototype.bl),t.defineProperty(M,{bl:"copiesGroupKeyOfNodeData"},function(){return this.xy},function(a){this.xy!==a&&(t.i(a,"boolean",M,"copiesGroupKeyOfNodeData"),this.xy=a)}),M.prototype.getGroupKeyForNodeData=M.prototype.Sm=function(a){if(null!==a){var b=this.Gj;if(""!==b&&(b=t.ib(a,b),void 0!==b)){if(oe(b))return b;t.m("GroupKey value for node data "+a+" is not a number or a string: "+b)}}},M.prototype.setGroupKeyForNodeData=M.prototype.vx=function(a,b){if(null===b&&(b=void 0),void 0===b||oe(b)||t.bc(b,"number or string",M,"setGroupKeyForNodeData:key"),null!==a){var c=this.Gj;if(""!==c)if(this.ne(a)){var d=t.ib(a,c);d!==b&&(re(this,d,a),t.Qa(a,c,b),null===this.uf(b)&&qe(this,b,a),me(this,"nodeGroupKey",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c))}else t.Qa(a,c,b)}},M.prototype.copyNodeData=function(a){return null===a?null:(a=E.prototype.copyNodeData.call(this,a),this.bl||""===this.Gj||t.Qa(a,this.Gj,void 0),a)},M.prototype.setDataProperty=function(a,b,c){if(e&&(t.i(a,"object",M,"setDataProperty:data"),t.i(b,"string",M,"setDataProperty:propname"),""===b&&t.m("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.ne(a))if(b===this.ij)this.aB(a,c);else{if(b===this.rl)return void this.sx(a,c);if(b===this.en)return void this.vx(a,c);b===this.Ip&&t.m("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b)}else if(this.Yi(a)){if(b===this.Zm)return void this.ux(a,c);if(b===this.$m)return void this.wx(a,c);if(b===this.vp)return void this.$A(a,c);if(b===this.zp)return void this.cB(a,c);if(b===this.up)return void this.lG(a,c);if(b===this.wp)return void this.mG(a,c)}else!t.Zp&&a instanceof Q&&(t.Zp=!0,t.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),t.trace("  Is that really your intent?"));var d=t.ib(a,b);d!==c&&(t.Qa(a,b,c),this.mx(a,b,d,c))},aa=M.prototype,aa.It=function(a,b){E.prototype.It.call(this,a,b);for(var c=this.Bc.k;c.next();)this.WA(c.value,a,b);for(c=this.em.k;c.next();){var d=c.value,e=a,f=b;if(this.il(d)===e){var g=this.xj;t.Qa(d,g,f),me(this,"linkFromKey",vd,g,d,e,f),"string"==typeof g&&this.Kb(d,g)}this.ml(d)===e&&(g=this.Aj,t.Qa(d,g,f),me(this,"linkToKey",vd,g,d,e,f),"string"==typeof g&&this.Kb(d,g));var h=this.kl(d);if(t.isArray(h))for(var i=t.ub(h),g=this.Jh,j=0;i>j;j++)t.lb(h,j)===e&&(t.MD(h,j,f),me(this,"linkLabelKeys",wd,g,d,e,f))}},aa.WA=function(a,b,c){if(this.Sm(a)===b){var d=this.Gj;t.Qa(a,d,c),me(this,"nodeGroupKey",vd,d,a,b,c),"string"==typeof d&&this.Kb(a,d)}},aa.mB=function(){E.prototype.mB.call(this);for(var a=this.hj,b=t.ub(a),c=0;b>c;c++){var d=t.lb(a,c);Ce(this,d)}},aa.Mp=function(a){E.prototype.Mp.call(this,a),a=this.Hb(a);var b=pe(this,a);if(null!==b){for(var c=new B(Object),b=b.k;b.next();){var d=b.value;if(this.ne(d)){if(this.Sm(d)===a){var e=this.Gj;me(this,"nodeGroupKey",vd,e,d,a,a),"string"==typeof e&&this.Kb(d,e),c.add(d)}}else{this.il(d)===a&&(e=this.xj,me(this,"linkFromKey",vd,e,d,a,a),"string"==typeof e&&this.Kb(d,e),c.add(d)),this.ml(d)===a&&(e=this.Aj,me(this,"linkToKey",vd,e,d,a,a),"string"==typeof e&&this.Kb(d,e),c.add(d));var f=this.kl(d);if(t.isArray(f))for(var g=t.ub(f),e=this.Jh,h=0;g>h;h++)t.lb(f,h)===a&&(me(this,"linkLabelKeys",wd,e,d,a,a),c.add(d))}}for(c=c.k;c.next();)re(this,a,c.value)}},aa.Lp=function(a){E.prototype.Lp.call(this,a);var b=this.Sm(a);null===this.uf(b)&&qe(this,b,a)},aa.Zt=function(a){E.prototype.Zt.call(this,a);var b=this.Sm(a);re(this,b,a)},t.g(M,"linkCategoryProperty",M.prototype.up),t.defineProperty(M,{up:"linkCategoryProperty"},function(){return this.lr},function(a){var b=this.lr;b!==a&&(ne(a,M,"linkCategoryProperty"),this.lr=a,this.j("linkCategoryProperty",b,a))}),M.prototype.getCategoryForLinkData=M.prototype.getCategoryForLinkData=function(a){if(null===a)return"";var b=this.lr;return""===b?"":(b=t.ib(a,b),void 0===b?"":"string"==typeof b?b:(t.m("getCategoryForLinkData found a non-string category for "+a+": "+b),""))},M.prototype.setCategoryForLinkData=M.prototype.lG=function(a,b){if(t.i(b,"string",M,"setCategoryForLinkData:cat"),null!==a){var c=this.lr;if(""===c)return"";if(this.Yi(a)){var d=t.ib(a,c);void 0===d&&(d=""),d!==b&&(t.Qa(a,c,b),me(this,"linkCategory",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c))}else t.Qa(a,c,b)}},t.ga("TreeModel",Kd),t.Ka(Kd,E),Kd.prototype.toString=function(a){if(void 0===a&&(a=0),a>=2)return this.iB();var b=(""!==this.name?this.name:"")+" TreeModel";if(a>0){b+="\n node data:",a=this.Gg;var c,d=t.ub(a);for(c=0;d>c;c++)var e=t.lb(a,c),b=b+(" "+this.Hb(e)+":"+yd(e))}return b},Kd.prototype.$t=function(){var a=E.prototype.$t.call(this),b="";return"parent"!==this.fn&&"string"==typeof this.fn&&(b+=',\n  "nodeParentKeyProperty": '+this.quote(this.fn)),a+b},Kd.prototype.Ht=function(a){E.prototype.Ht.call(this,a),a.nodeParentKeyProperty&&(this.fn=a.nodeParentKeyProperty)},Kd.prototype.bn=function(a){return a},t.g(Kd,"nodeParentKeyProperty",Kd.prototype.fn),t.defineProperty(Kd,{fn:"nodeParentKeyProperty"},function(){return this.Hj},function(a){var b=this.Hj;b!==a&&(ne(a,Kd,"nodeParentKeyProperty"),this.Hj=a,this.j("nodeParentKeyProperty",b,a))}),t.g(Kd,"copiesParentKeyOfNodeData",Kd.prototype.cl),t.defineProperty(Kd,{cl:"copiesParentKeyOfNodeData"},function(){return this.yy},function(a){this.yy!==a&&(t.i(a,"boolean",Kd,"copiesParentKeyOfNodeData"),this.yy=a)}),Kd.prototype.getParentKeyForNodeData=Kd.prototype.Tm=function(a){if(null!==a){var b=this.Hj;if(""!==b&&(b=t.ib(a,b),void 0!==b)){if(oe(b))return b;t.m("ParentKey value for node data "+a+" is not a number or a string: "+b)}}},Kd.prototype.setParentKeyForNodeData=Kd.prototype.lh=function(a,b){if(null===b&&(b=void 0),void 0===b||oe(b)||t.bc(b,"number or string",Kd,"setParentKeyForNodeData:key"),null!==a){var c=this.Hj;if(""!==c)if(b=this.bn(b),this.ne(a)){var d=t.ib(a,c);d!==b&&(re(this,d,a),t.Qa(a,c,b),null===this.uf(b)&&qe(this,b,a),me(this,"nodeParentKey",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c))}else t.Qa(a,c,b)}},t.g(Kd,"parentLinkCategoryProperty",Kd.prototype.CJ),t.defineProperty(Kd,{CJ:"parentLinkCategoryProperty"},function(){return this.Lr},function(a){var b=this.Lr;b!==a&&(ne(a,Kd,"parentLinkCategoryProperty"),this.Lr=a,this.j("parentLinkCategoryProperty",b,a))}),Kd.prototype.getParentLinkCategoryForNodeData=Kd.prototype.JI=function(a){if(null===a)return"";var b=this.Lr;return""===b?"":(b=t.ib(a,b),void 0===b?"":"string"==typeof b?b:(t.m("getParentLinkCategoryForNodeData found a non-string category for "+a+": "+b),""))},Kd.prototype.setParentLinkCategoryForNodeData=Kd.prototype.OJ=function(a,b){if(t.i(b,"string",Kd,"setParentLinkCategoryForNodeData:cat"),null!==a){var c=this.Lr;if(""===c)return"";if(this.ne(a)){var d=t.ib(a,c);void 0===d&&(d=""),d!==b&&(t.Qa(a,c,b),me(this,"parentLinkCategory",vd,c,a,d,b),"string"==typeof c&&this.Kb(a,c))}else t.Qa(a,c,b)}},Kd.prototype.copyNodeData=function(a){return null===a?null:(a=E.prototype.copyNodeData.call(this,a),this.cl||""===this.Hj||t.Qa(a,this.Hj,void 0),a)},Kd.prototype.setDataProperty=function(a,b,c){if(e&&(t.i(a,"object",Kd,"setDataProperty:data"),t.i(b,"string",Kd,"setDataProperty:propname"),""===b&&t.m("TreeModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)),this.ne(a))if(b===this.ij)this.aB(a,c);else{if(b===this.rl)return void this.sx(a,c);if(b===this.fn)return void this.lh(a,c)}else!t.Zp&&a instanceof Q&&(t.Zp=!0,t.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+a.toString()+'"'),t.trace("  Is that really your intent?"));var d=t.ib(a,b);d!==c&&(t.Qa(a,b,c),this.mx(a,b,d,c))},aa=Kd.prototype,aa.It=function(a,b){E.prototype.It.call(this,a,b);for(var c=this.Bc.k;c.next();)this.WA(c.value,a,b)},aa.WA=function(a,b,c){if(this.Tm(a)===b){var d=this.Hj;t.Qa(a,d,c),me(this,"nodeParentKey",vd,d,a,b,c),"string"==typeof d&&this.Kb(a,d)}},aa.Mp=function(a){E.prototype.Mp.call(this,a),a=this.Hb(a);var b=pe(this,a);if(null!==b){for(var c=new B(Object),b=b.k;b.next();){var d=b.value;if(this.ne(d)&&this.Tm(d)===a){var e=this.Hj;me(this,"nodeParentKey",vd,e,d,a,a),"string"==typeof e&&this.Kb(d,e),c.add(d)}}for(c=c.k;c.next();)re(this,a,c.value)}},aa.Lp=function(a){E.prototype.Lp.call(this,a);var b=this.Tm(a),b=this.bn(b);null===this.uf(b)&&qe(this,b,a)},aa.Zt=function(a){E.prototype.Zt.call(this,a);var b=this.Tm(a);re(this,b,a)},t.ga("Binding",De);var Ee;De.OneWay=Ee=t.w(De,"OneWay",1);var Fe;De.TwoWay=Fe=t.w(De,"TwoWay",2),De.parseEnum=function(a,b){return t.i(a,"function",De,"parseEnum:ctor"),t.Aa(b,a,De,"parseEnum:defval"),function(c){return t.Pm(a,c)||b}};var yd;De.toString=yd=function(a){var b=a;return t.qb(a)&&(a.text?b=a.text:a.name?b=a.name:void 0!==a.key?b=a.key:void 0!==a.id?b=a.id:a.constructor===Object&&(a.Text?b=a.Text:a.Name?b=a.Name:void 0!==a.Key?b=a.Key:void 0!==a.Id?b=a.Id:void 0!==a.ID&&(b=a.ID))),void 0===b?"undefined":null===b?"null":b.toString()},De.prototype.toString=function(){return"Binding("+this.nn+" "+this.Wt+":"+this.eB+")"},De.prototype.freeze=function(){return this.nb=!0,this},De.prototype.Ma=function(){return this.nb=!1,this},t.g(De,"targetId",De.prototype.nn),t.defineProperty(De,{nn:null},function(){return this.kD},function(a){t.L(this),t.i(a,"string",De,"targetId"),this.kD=a}),t.g(De,"targetProperty",De.prototype.Wt),t.defineProperty(De,{Wt:"targetProperty"},function(){return this.Sv},function(a){t.L(this),t.i(a,"string",De,"targetProperty"),this.Sv=a}),t.g(De,"sourceName",De.prototype.Ut),t.defineProperty(De,{Ut:"sourceName"},function(){return this.fD},function(a){t.L(this),t.i(a,"string",De,"sourceName"),this.fD=a}),t.g(De,"sourceProperty",De.prototype.eB),t.defineProperty(De,{eB:"sourceProperty"},function(){return this.Kv},function(a){t.L(this),t.i(a,"string",De,"sourceProperty"),this.Kv=a}),t.g(De,"converter",De.prototype.bE),t.defineProperty(De,{bE:"converter"},function(){return this.uy},function(a){t.L(this),null!==a&&t.i(a,"function",De,"converter"),this.uy=a}),t.g(De,"backConverter",De.prototype.QD),t.defineProperty(De,{QD:"backConverter"},function(){return this.my},function(a){t.L(this),null!==a&&t.i(a,"function",De,"backConverter"),this.my=a}),t.g(De,"mode",De.prototype.mode),t.defineProperty(De,{mode:"mode"},function(){return this.gz},function(a){t.L(this),t.Aa(a,De,De,"mode"),this.gz=a}),De.prototype.makeTwoWay=function(a){return void 0===a&&(a=null),null!==a&&t.i(a,"function",De,"makeTwoWay"),this.mode=Fe,this.QD=a,this},De.prototype.ofObject=De.prototype.JA=function(a){return void 0===a&&(a=""),e&&t.i(a,"string",De,"ofObject:srcname"),this.Ut=a,this},De.prototype.updateTarget=De.prototype.PG=function(a,b,c){var d=this.Kv;if(!c||d===c){c=this.Sv;var f=this.uy;if(null===f&&""===c)t.trace("Binding error: target property is the empty string: "+this.toString());else{e&&"string"==typeof c&&("function"!=typeof a.setAttribute&&0<c.length&&"_"!==c[0]&&!t.Jw(a,c)?t.trace("Binding error: undefined target property: "+c+" on "+a.toString()):"name"===c&&a instanceof Q&&t.trace("Binding error: cannot modify GraphObject.name on "+a.toString()));var g=b;if(""!==d&&(g=t.ib(b,d)),void 0!==g)if(null===f)""!==c&&t.Qa(a,c,g);else try{if(""!==c){var h=f(g,a);e&&void 0===h&&t.trace('Binding warning: conversion function returned undefined when setting target property "'+c+'" on '+a.toString()+", function is: "+f),t.Qa(a,c,h)}else f(g,a)}catch(i){e&&t.trace("Binding error: "+i.toString()+' setting target property "'+c+'" on '+a.toString()+" with conversion function: "+f)}}}},De.prototype.updateSource=De.prototype.nB=function(a,b,c,d){if(this.gz===Fe){var f=this.Sv;if(!c||f===c){c=this.Kv;var g=this.my;if(null!==g||""!==c){var h=a;if(""!==f&&(h=t.ib(a,f)),void 0!==h)if(null===g)d&&d.ba?(e&&d.ba.ij===c&&d.ba.ne(b)&&t.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),d.ba.setDataProperty(b,c,h)):t.Qa(b,c,h);else try{if(""!==c){var i=g(h,b);d&&d.ba?(e&&(d.ba.ij===c&&d.ba.ne(b)&&t.trace("Binding error: cannot have TwoWay Binding on node data key property: "+this.toString()),void 0===i&&t.trace('Binding warning: conversion function returned undefined when setting source property "'+c+'" on '+b.toString()+", function is: "+g)),d.ba.setDataProperty(b,c,i)):t.Qa(b,c,i)}else g(h,b)}catch(j){e&&t.trace("Binding error: "+j.toString()+' setting source property "'+c+'" on '+b.toString()+" with conversion function: "+g)}}}}},t.ga("Transaction",ce),ce.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.dh.count.toString()+(this.op?"":", incomplete");if(void 0!==a&&a>0)for(var c=this.dh.count,d=0;c>d;d++){var e=this.dh.wa(d);null!==e&&(b+="\n  "+e.toString(a-1))}return b},ce.prototype.clear=ce.prototype.clear=function(){var a=this.dh;a.Ma();for(var b=a.count-1;b>=0;b--){var c=a.wa(b);null!==c&&c.clear()}a.clear(),a.freeze()},ce.prototype.canUndo=ce.prototype.canUndo=function(){return this.op},ce.prototype.undo=ce.prototype.undo=function(){if(this.canUndo())for(var a=this.dh.count-1;a>=0;a--){var b=this.dh.wa(a);null!==b&&b.undo()}},ce.prototype.canRedo=ce.prototype.canRedo=function(){return this.op},ce.prototype.redo=ce.prototype.redo=function(){if(this.canRedo())for(var a=this.dh.count,b=0;a>b;b++){var c=this.dh.wa(b);null!==c&&c.redo()}},t.A(ce,{dh:"changes"},function(){return this.iH}),t.g(ce,"name",ce.prototype.name),t.defineProperty(ce,{name:"name"},function(){return this.Zb},function(a){this.Zb=a}),t.g(ce,"isComplete",ce.prototype.op),t.defineProperty(ce,{op:"isComplete"},function(){return this.nC},function(a){this.nC=a}),t.ga("UndoManager",zd),zd.prototype.toString=function(a){for(var b="UndoManager "+this.cj+"<"+this.history.count+"<="+this.AA,b=b+"[",c=this.EF.count,d=0;c>d;d++)d>0&&(b+=" "),b+=this.EF.wa(d);if(b+="]",void 0!==a&&a>0)for(c=this.history.count,d=0;c>d;d++)b+="\n "+this.history.wa(d).toString(a-1);return b},zd.prototype.clear=zd.prototype.clear=function(){var a=this.history;a.Ma();for(var b=a.count-1;b>=0;b--){var c=a.wa(b);null!==c&&c.clear()}a.clear(),this.Ug=-1,a.freeze(),this.xi=!1,this.Bu=null,this.Vk=0,this.$g.Ma(),this.$g.clear(),this.$g.freeze(),this.ro.clear()},zd.prototype.addModel=zd.prototype.EH=function(a){this.iz.add(a)},zd.prototype.removeModel=zd.prototype.JJ=function(a){this.iz.remove(a)},zd.prototype.startTransaction=zd.prototype.uc=function(a){if(void 0===a&&(a=""),null===a&&(a=""),this.vb)return!1;!0===this.Ry&&(this.Ry=!1,this.Vk++,this.Xc("StartingFirstTransaction",a,this.Zi),0<this.Vk&&this.Vk--),this.isEnabled&&(this.$g.Ma(),this.$g.add(a),this.$g.freeze(),null===this.Zi?this.ro.add(0):this.ro.add(this.Zi.dh.count)),this.Vk++;var b=1===this.Je;return b&&this.Xc("StartedTransaction",a,this.Zi),b},zd.prototype.commitTransaction=zd.prototype.Ce=function(a){return Ge(this,!0,a)},zd.prototype.rollbackTransaction=zd.prototype.Np=function(){return Ge(this,!1,"")},zd.prototype.canUndo=zd.prototype.canUndo=function(){if(!this.isEnabled||0<this.Je||this.vb)return!1;var a=this.HG;return null!==a&&a.canUndo()?!0:!1},zd.prototype.undo=zd.prototype.undo=function(){if(this.canUndo()){var a=this.HG;try{this.Xc("StartingUndo","Undo",a),this.xi=!0,this.Ug--,a.undo()}catch(b){t.trace("undo error: "+b.toString())}finally{this.xi=!1,this.Xc("FinishedUndo","Undo",a)}}},zd.prototype.canRedo=zd.prototype.canRedo=function(){if(!this.isEnabled||0<this.Je||this.vb)return!1;var a=this.GG;return null!==a&&a.canRedo()?!0:!1},zd.prototype.redo=zd.prototype.redo=function(){if(this.canRedo()){var a=this.GG;try{this.Xc("StartingRedo","Redo",a),this.xi=!0,this.Ug++,a.redo()}catch(b){t.trace("redo error: "+b.toString())}finally{this.xi=!1,this.Xc("FinishedRedo","Redo",a)}}},zd.prototype.Xc=function(a,b,c){void 0===c&&(c=null);var d=new td;for(d.td=ud,d.propertyName=a,d.object=c,d.oldValue=b,a=this.qJ;a.next();)b=a.value,d.ba=b,b.iw(d)},zd.prototype.handleChanged=zd.prototype.PE=function(a){if(this.isEnabled&&!this.vb&&!this.skipsEvent(a)){var b=this.Zi;null===b&&(this.Bu=b=new ce);var c=a.copy(),b=b.dh;b.Ma(),b.add(c),b.freeze(),this.Tz&&0>=this.Je&&!this.Ry&&(a=a.h,null!==a&&!1===a.lf||t.trace("Change not within a transaction: "+c.toString()))}},zd.prototype.skipsEvent=function(a){if(null===a||0>a.td.value)return!0;if(a=a.object,a instanceof Q){if(a=a.layer,null!==a&&a.rc)return!0}else if(a instanceof $d&&a.rc)return!0;return!1},t.A(zd,{qJ:"models"},function(){return this.iz.k}),t.g(zd,"isEnabled",zd.prototype.isEnabled),t.defineProperty(zd,{isEnabled:"isEnabled"},function(){return this.Le},function(a){this.Le=a}),t.A(zd,{HG:"transactionToUndo"},function(){return 0<=this.cj&&this.cj<=this.history.count-1?this.history.wa(this.cj):null}),t.A(zd,{GG:"transactionToRedo"},function(){return this.cj<this.history.count-1?this.history.wa(this.cj+1):null}),t.A(zd,{vb:"isUndoingRedoing"},function(){return this.xi}),t.A(zd,{history:"history"},function(){return this.oH}),t.g(zd,"maxHistoryLength",zd.prototype.AA),t.defineProperty(zd,{AA:"maxHistoryLength"},function(){return this.CC},function(a){this.CC=a}),t.A(zd,{cj:"historyIndex"},function(){return this.Ug}),t.A(zd,{Zi:"currentTransaction"},function(){return this.Bu}),t.A(zd,{Je:"transactionLevel"},function(){return this.Vk}),t.A(zd,{dF:"isInTransaction"},function(){return 0<this.Vk}),t.defineProperty(zd,{Tz:"checksTransactionLevel"},function(){return this.ny},function(a){this.ny=a}),t.A(zd,{EF:"nestedTransactionNames"},function(){return this.$g}),t.ga("CommandHandler",oa),oa.prototype.toString=function(){return"CommandHandler"},t.A(oa,{h:"diagram"},function(){return this.U}),oa.prototype.yd=function(a){e&&null!==a&&t.l(a,z,oa,"setDiagram"),this.U=a},oa.prototype.doKeyDown=function(){var a=this.h;if(null!==a){var b=a.R,c=t.Vm?b.Bp:b.control,d=b.shift,e=b.alt,f=b.key;!c||"C"!==f&&"Insert"!==f?c&&"X"===f||d&&"Del"===f?this.canCutSelection()&&this.cutSelection():"Del"===f?this.canDeleteSelection()&&this.deleteSelection():c&&"V"===f||d&&"Insert"===f?this.canPasteSelection()&&this.pasteSelection():c&&"Y"===f||e&&d&&"Backspace"===f?this.canRedo()&&this.redo():c&&"Z"===f||e&&"Backspace"===f?this.canUndo()&&this.undo():c&&"A"===f?this.canSelectAll()&&this.selectAll():"Esc"===f?this.canStopCommand()&&this.stopCommand():"Up"===f?a.pf&&(c?a.scroll("pixel","up"):a.scroll("line","up")):"Down"===f?a.pf&&(c?a.scroll("pixel","down"):a.scroll("line","down")):"Left"===f?a.of&&(c?a.scroll("pixel","left"):a.scroll("line","left")):"Right"===f?a.of&&(c?a.scroll("pixel","right"):a.scroll("line","right")):"PageUp"===f?d&&a.of?a.scroll("page","left"):a.pf&&a.scroll("page","up"):"PageDown"===f?d&&a.of?a.scroll("page","right"):a.pf&&a.scroll("page","down"):"Home"===f?(b=a.Gd,c&&a.pf?a.position=new w(a.position.x,b.y):!c&&a.of&&(a.position=new w(b.x,a.position.y))):"End"===f?(b=a.Gd,d=a.xb,c&&a.pf?a.position=new w(d.x,b.bottom-d.height):!c&&a.of&&(a.position=new w(b.right-d.width,d.y))):"Subtract"===f?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===f?this.canIncreaseZoom()&&this.increaseZoom():c&&"0"===f?this.canResetZoom()&&this.resetZoom():d&&"Z"===f?this.canZoomToFit()&&this.zoomToFit():c&&!d&&"G"===f?this.canGroupSelection()&&this.groupSelection():c&&d&&"G"===f?this.canUngroupSelection()&&this.ungroupSelection():b.event&&113===b.event.which?this.canEditTextBlock()&&this.editTextBlock():b.event&&93===b.event.which?this.canShowContextMenu()&&this.showContextMenu():b.bubbles=!0:this.canCopySelection()&&this.copySelection()}},oa.prototype.doKeyUp=function(){var a=this.h;null!==a&&(a.R.bubbles=!0)},oa.prototype.stopCommand=function(){var a=this.h;if(null!==a){var b=a.Ua;b instanceof He&&a.Pe&&a.kw(),null!==b&&b.doCancel()}},oa.prototype.canStopCommand=function(){return!0},oa.prototype.selectAll=function(){var a=this.h;if(null!==a){a.fa();try{a.$b="wait",a.Ba("ChangingSelection");for(var b=a.sl;b.next();)b.value.eb=!0;for(b=a.jh;b.next();)b.value.eb=!0;for(b=a.links;b.next();)b.value.eb=!0}finally{a.Ba("ChangedSelection"),a.$b=""}}},oa.prototype.canSelectAll=function(){var a=this.h;return null!==a&&a.Pe},oa.prototype.deleteSelection=function(){var a=this.h;if(null!==a&&!a.Ba("SelectionDeleting",a.selection))try{a.$b="wait",a.uc("Delete"),a.Ba("ChangingSelection");for(var b=new ma(C),c=a.selection.k;c.next();)Ie(b,c.value,!0,this.sE?1/0:0,function(a){return a.canDelete()});a.VA(b,!0),a.Ba("SelectionDeleted",b)}finally{a.Ba("ChangedSelection"),a.Ce("Delete"),a.$b=""}},oa.prototype.canDeleteSelection=function(){var a=this.h;return null===a||a.ab||a.Ze||!a.Zk||0===a.selection.count?!1:!0},oa.prototype.Wo=function(a,b,c){var d=new ia(C,C);for(a=a.k;a.next();){var e=a.value;Ke(this,e,b,d,c)}if(null!==b){c=b.ba,a=!1,null!==b.wb.Hd&&(a=b.wb.Hd.Zh);for(var f=new ma(T),g=new ia(T,T),h=d.k;h.next();)if(e=h.value,e instanceof T)a||null!==e.aa&&null!==e.ca||f.add(e);else if(c instanceof Kd&&e instanceof R&&null!==e.data){var i=e,e=h.key,j=e.dA();null!==j&&((j=d.za(j))?(c.lh(i.data,c.Hb(j.data)),i=b.Qf(i.data),e=e.ft(),null!==e&&null!==i&&g.add(e,i)):c.lh(i.data,void 0))}if(0<f.count&&b.VA(f,!1),0<g.count)for(b=g.k;b.next();)d.add(b.key,b.value)}for(b=d.k;b.next();)b.value.Kb();return d},oa.prototype.copySelection=function(){var a=this.h;if(null!==a){for(var b=new ma(C),a=a.selection.k;a.next();)Ie(b,a.value,!0,this.dE?1/0:0,function(a){return a.canCopy()});this.copyToClipboard(b)}},oa.prototype.canCopySelection=function(){var a=this.h;return null!==a&&a.Si&&a.ew&&0!==a.selection.count?!0:!1},oa.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},oa.prototype.canCutSelection=function(){var a=this.h;return null!==a&&!a.ab&&!a.Ze&&a.Si&&a.Zk&&a.ew&&0!==a.selection.count?!0:!1},oa.prototype.copyToClipboard=function(a){var b=this.h;if(null!==b){var c=null;if(null===a)t.Ss=null,t.lw="";else{var c=b.ba,d=!1,e=!1,f=null;try{c instanceof Kd&&(d=c.cl,c.cl=this.Yz),c instanceof M&&(e=c.bl,c.bl=this.Xz),f=b.Wo(a,null,!0)}finally{c instanceof Kd&&(c.cl=d),c instanceof M&&(c.bl=e),c=new B(C),c.Oe(f),t.Ss=c,t.lw=b.ba.Wj}}b.Ba("ClipboardChanged",c)}},oa.prototype.pasteFromClipboard=function(){var a=new ma(C),b=t.Ss;if(null===b)return a;var c=this.h;if(null===c||t.lw!==c.ba.Wj)return a;var d=c.ba,e=!1,f=!1,g=null;try{d instanceof Kd&&(e=d.cl,d.cl=this.Yz),d instanceof M&&(f=d.bl,d.bl=this.Xz),g=c.Wo(b,c,!1)}finally{for(d instanceof Kd&&(d.cl=e),d instanceof M&&(d.bl=f),b=g.k;b.next();)c=b.value,d=b.key,c.location.N()||(d.location.N()?c.location=d.location:!c.position.N()&&d.position.N()&&(c.position=d.position)),a.add(c)}return a},oa.prototype.pasteSelection=function(a){var b=this.h;if(null!==b)try{b.$b="wait",b.uc("Paste"),b.Ba("ChangingSelection");var c=this.pasteFromClipboard();0<c.count&&Me(b);for(var d=c.k;d.next();)d.value.eb=!0;if(b.Ba("ChangedSelection"),a instanceof w){var e=b.computePartsBounds(b.selection);if(e){var f=b.wb.Hd,g=f.computeEffectiveCollection(b.selection);f.moveParts(g,new w(a.x-e.Da,a.y-e.Oa),!1)}}b.Ba("ClipboardPasted",c)}finally{b.Ce("Paste"),b.$b=""}},oa.prototype.canPasteSelection=function(){var a=this.h;return null===a||a.ab||a.Ze||!a.Bm||!a.ew||null===t.Ss||t.lw!==a.ba.Wj?!1:!0},oa.prototype.undo=function(){var a=this.h;null!==a&&a.la.undo()},oa.prototype.canUndo=function(){var a=this.h;return null===a||a.ab||a.Ze?!1:a.Lz&&a.la.canUndo()},oa.prototype.redo=function(){var a=this.h;null!==a&&a.la.redo()},oa.prototype.canRedo=function(){var a=this.h;return null===a||a.ab||a.Ze?!1:a.Lz&&a.la.canRedo()},oa.prototype.decreaseZoom=function(a){void 0===a&&(a=1/this.bu),t.q(a,oa,"decreaseZoom:factor");var b=this.h;null!==b&&b.Fm===Xe&&(a*=b.scale,a<b.Cg||a>b.Bg||(b.scale=a))},oa.prototype.canDecreaseZoom=function(a){void 0===a&&(a=1/this.bu),t.q(a,oa,"canDecreaseZoom:factor");var b=this.h;return null===b||b.Fm!==Xe?!1:(a*=b.scale,a<b.Cg||a>b.Bg?!1:b.Ns)},oa.prototype.increaseZoom=function(a){
void 0===a&&(a=this.bu),t.q(a,oa,"increaseZoom:factor");var b=this.h;null!==b&&b.Fm===Xe&&(a*=b.scale,a<b.Cg||a>b.Bg||(b.scale=a))},oa.prototype.canIncreaseZoom=function(a){void 0===a&&(a=this.bu),t.q(a,oa,"canIncreaseZoom:factor");var b=this.h;return null===b||b.Fm!==Xe?!1:(a*=b.scale,a<b.Cg||a>b.Bg?!1:b.Ns)},oa.prototype.resetZoom=function(a){void 0===a&&(a=this.Ys),t.q(a,oa,"resetZoom:newscale");var b=this.h;null===b||a<b.Cg||a>b.Bg||(b.scale=a)},oa.prototype.canResetZoom=function(a){void 0===a&&(a=this.Ys),t.q(a,oa,"canResetZoom:newscale");var b=this.h;return null===b||a<b.Cg||a>b.Bg?!1:b.Ns},oa.prototype.zoomToFit=function(){var a=this.h;if(null!==a){var b=a.scale,c=a.position;b!==this.DD||isNaN(this.dz)?(this.dz=b,this.zC=c.copy(),a.zoomToFit(),a.Uf(),this.DD=a.scale):(a.scale=this.dz,a.position=this.zC)}},oa.prototype.canZoomToFit=function(){var a=this.h;return null===a?!1:a.Ns},oa.prototype.collapseTree=function(a){void 0===a&&(a=null);var b=this.h;if(null===b)return!1;b.uc("Collapse Tree");var c=new B(R);if(a instanceof R&&a.Qc)a.collapseTree(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof R&&d.Qc&&(d.collapseTree(),c.add(d))}b.Ba("TreeCollapsed",c),b.Ce("Collapse Tree")},oa.prototype.canCollapseTree=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ab)return!1;if(a instanceof R){if(!a.Qc)return!1;if(0<a.Fw().count)return!0}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof R&&b.Qc&&0<b.Fw().count)return!0;return!1},oa.prototype.expandTree=function(a){void 0===a&&(a=null);var b=this.h;if(null===b)return!1;b.uc("Expand Tree");var c=new B(R);if(a instanceof R&&!a.Qc)a.expandTree(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof R&&!d.Qc&&(d.expandTree(),c.add(d))}b.Ba("TreeExpanded",c),b.Ce("Expand Tree")},oa.prototype.canExpandTree=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ab)return!1;if(a instanceof R){if(a.Qc)return!1;if(0<a.Fw().count)return!0}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof R&&!b.Qc&&0<b.Fw().count)return!0;return!1},oa.prototype.groupSelection=function(){var a=this.h;if(null!==a){var b=a.ba;if(null!==b&&b instanceof M){var c=this.Nz;if(null!==c){var d=null;try{a.$b="wait",a.uc("Group"),a.Ba("ChangingSelection");for(var e=new B(C),f=a.selection.k;f.next();){var g=f.value;g.Ld()&&g.canGroup()&&e.add(g)}for(var h=new B(C),i=e.k;i.next();){for(var j=i.value,g=!1,f=e.k;f.next();)if(j.nl(f.value)){g=!0;break}g||h.add(j)}if(0<h.count){f=h.k,f.next();var k=f.value.hb;if(null!==k)for(;null!==k;){for(f=h.k,f.next(),e=!1;f.next();)if(j=f.value,!j.nl(k)){e=!0;break}if(!e)break;k=k.hb}if(c instanceof S)Le(c),d=c.copy(),d instanceof S&&a.add(d);else if(b.sA(c)){var l=b.copyNodeData(c);t.qb(l)&&(b.Am(l),d=a.Ew(l))}if(d instanceof S){for(null!==k&&this.isValidMember(k,d)&&(d.hb=k),f=h.k;f.next();)j=f.value,this.isValidMember(d,j)&&(j.hb=d);a.select(d)}}a.Ba("ChangedSelection"),a.Ba("SelectionGrouped",d)}finally{a.Ce("Group"),a.$b=""}}}}},oa.prototype.canGroupSelection=function(){var a=this.h;if(null===a||a.ab||a.Ze||!a.Bm||!a.Mo)return!1;var b=a.ba;if(null===b||!(b instanceof M)||null===this.Nz)return!1;for(a=a.selection.k;a.next();)if(b=a.value,b.Ld()&&b.canGroup())return!0;return!1},oa.prototype.isValidMember=function(a,b){if(null===b||a===b||b instanceof T)return!1;if(null!==a){if(a===b||a.nl(b))return!1;var c=a.vt;if(null!==c&&!c(a,b)||null===a.data&&null!==b.data||null!==a.data&&null===b.data)return!1}return c=this.vt,null!==c?c(a,b):!0},oa.prototype.ungroupSelection=function(a){void 0===a&&(a=null);var b=this.h;if(null!==b){var c=b.ba;if(null!==c&&c instanceof M)try{b.$b="wait",b.uc("Ungroup"),b.Ba("ChangingSelection");var d=new B(S);if(a instanceof S)d.add(a);else for(var e=b.selection.k;e.next();){var f=e.value;f instanceof S&&f.canUngroup()&&d.add(f)}if(0<d.count)for(b.kw(),e=d.k;e.next();){var g=e.value;g.expandSubGraph();var h=g.data,i=g.hb,j=null!==i&&null!==i.data?c.Hb(i.data):void 0,k=new B(C);k.Oe(g.Rc);for(var l=k.k;l.next();){var m=l.value;if(!(m instanceof T)){var n=m.data;null!==n?c.vx(n,j):m.hb=i,m.eb=!0}}null!==h?c.nx(h):b.remove(g)}b.Ba("ChangedSelection"),b.Ba("SelectionUngrouped",d,k)}finally{b.Ce("Ungroup"),b.$b=""}}},oa.prototype.canUngroupSelection=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ab||b.Ze||!b.Zk||!b.Ro)return!1;var c=b.ba;if(null===c||!(c instanceof M))return!1;if(a instanceof S){if(a.canUngroup())return!0}else for(a=b.selection.k;a.next();)if(b=a.value,b instanceof S&&b.canUngroup())return!0;return!1},oa.prototype.addTopLevelParts=function(a,b){for(var c=!0,d=Ye(a).k;d.next();){var e=d.value;null!==e.hb&&(!b||this.isValidMember(null,e)?e.hb=null:c=!1)}return c},oa.prototype.collapseSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null===b)return!1;b.uc("Collapse SubGraph");var c=new B(S);if(a instanceof S&&a.Yd)a.collapseSubGraph(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof S&&d.Yd&&(d.collapseSubGraph(),c.add(d))}b.Ba("SubGraphCollapsed",c),b.Ce("Collapse SubGraph")},oa.prototype.canCollapseSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ab)return!1;if(a instanceof S)return a.Yd?!0:!1;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof S&&b.Yd)return!0;return!1},oa.prototype.expandSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null===b)return!1;b.uc("Expand SubGraph");var c=new B(S);if(a instanceof S&&!a.Yd)a.expandSubGraph(),c.add(a);else for(a=b.selection.k;a.next();){var d=a.value;d instanceof S&&!d.Yd&&(d.expandSubGraph(),c.add(d))}b.Ba("SubGraphExpanded",c),b.Ce("Expand SubGraph")},oa.prototype.canExpandSubGraph=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ab)return!1;if(a instanceof S)return a.Yd?!1:!0;for(a=b.selection.k;a.next();)if(b=a.value,b instanceof S&&!b.Yd)return!0;return!1},oa.prototype.editTextBlock=function(a){void 0===a&&(a=null);var b=this.h;if(null!==b){var c=b.wb.Bx;if(null!==c){if(null===a){a=b.selection.k;for(var d=null;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(null===d)return;a=d.bt(function(a){return a instanceof na&&a.yw})}null!==a&&a instanceof na&&(c.Ng=a,b.Ua=c)}}},oa.prototype.canEditTextBlock=function(a){void 0===a&&(a=null);var b=this.h;if(null===b||b.ab||b.Ze||!b.Qo||null===b.wb.Bx)return!1;if(a instanceof na){if(a=a.S,null!==a&&a.canEdit())return!0}else for(b=b.selection.k;b.next();)if(a=b.value,a.canEdit()&&(a=a.bt(function(a){return a instanceof na&&a.yw}),null!==a))return!0;return!1},oa.prototype.showContextMenu=function(a){var b=this.h;if(null!==b){var c=b.wb.pw;if(null!==c&&(void 0===a&&(a=0<b.selection.count?b.selection.$a():b),a=c.findObjectWithContextMenu(a),null!==a)){var d=new ld,e=null;a instanceof Q?e=a.pb(Hb):b.ao||(e=b.xb,e=new w(e.x+e.width/2,e.y+e.height/2)),null!==e&&(d.Ke=b.IG(e),d.ea=e,b.ec=d),b.Ua=c,Ze(c,!1,a)}}},oa.prototype.canShowContextMenu=function(a){var b=this.h;if(null===b)return!1;var c=b.wb.pw;return null===c?!1:(void 0===a&&(a=0<b.selection.count?b.selection.$a():b),null===c.findObjectWithContextMenu(a)?!1:!0)},t.g(oa,"copiesTree",oa.prototype.dE),t.defineProperty(oa,{dE:"copiesTree"},function(){return this.OB},function(a){t.i(a,"boolean",oa,"copiesTree"),this.OB=a}),t.g(oa,"deletesTree",oa.prototype.sE),t.defineProperty(oa,{sE:"deletesTree"},function(){return this.YB},function(a){t.i(a,"boolean",oa,"deletesTree"),this.YB=a}),t.g(oa,"copiesParentKey",oa.prototype.Yz),t.defineProperty(oa,{Yz:"copiesParentKey"},function(){return this.NB},function(a){t.i(a,"boolean",oa,"copiesParentKey"),this.NB=a}),t.g(oa,"copiesGroupKey",oa.prototype.Xz),t.defineProperty(oa,{Xz:"copiesGroupKey"},function(){return this.MB},function(a){t.i(a,"boolean",oa,"copiesGroupKey"),this.MB=a}),t.g(oa,"archetypeGroupData",oa.prototype.Nz),t.defineProperty(oa,{Nz:"archetypeGroupData"},function(){return this.jy},function(a){null!==a&&t.l(a,Object,oa,"archetypeGroupData");var b=this.h;null!==b&&(b=b.ba,b instanceof M&&(a instanceof S||b.sA(a)||t.m("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a))),this.jy=a}),t.g(oa,"memberValidation",oa.prototype.vt),t.defineProperty(oa,{vt:"memberValidation"},function(){return this.Ok},function(a){null!==a&&t.i(a,"function",oa,"memberValidation"),this.Ok=a}),t.g(oa,"defaultScale",oa.prototype.Ys),t.defineProperty(oa,{Ys:"defaultScale"},function(){return this.WB},function(a){t.q(a,oa,"defaultScale"),a>0||t.m("defaultScale must be larger than zero, not: "+a),this.WB=a}),t.g(oa,"zoomFactor",oa.prototype.bu),t.defineProperty(oa,{bu:"zoomFactor"},function(){return this.CD},function(a){t.q(a,oa,"zoomFactor"),a>1||t.m("zoomFactor must be larger than 1.0, not: "+a),this.CD=a}),t.ga("Tool",ae),ae.prototype.yd=function(a){e&&null!==a&&t.l(a,z,ae,"setDiagram"),this.U=a},ae.prototype.toString=function(){return""!==this.name?this.name+" Tool":t.xg(Object.getPrototypeOf(this))},ae.prototype.updateAdornments=function(){},ae.prototype.canStart=function(){return this.isEnabled},ae.prototype.doStart=function(){},ae.prototype.doActivate=function(){this.ia=!0},ae.prototype.doDeactivate=function(){this.ia=!1},ae.prototype.doStop=function(){},ae.prototype.doCancel=function(){this.stopTool()},ae.prototype.stopTool=function(){var a=this.h;null!==a&&a.Ua===this&&(a.Ua=null,a.$b="")},ae.prototype.doMouseDown=function(){!this.ia&&this.canStart()&&this.doActivate()},ae.prototype.doMouseMove=function(){},ae.prototype.doMouseUp=function(){this.stopTool()},ae.prototype.doMouseWheel=function(){},ae.prototype.doKeyDown=function(){var a=this.h;null!==a&&"Esc"===a.R.key&&this.doCancel()},ae.prototype.doKeyUp=function(){},ae.prototype.startTransaction=ae.prototype.uc=function(a){this.gf=null;var b=this.h;return null===b?!1:b.uc(a)},ae.prototype.stopTransaction=ae.prototype.hk=function(){var a=this.h;return null===a?!1:null===this.gf?a.Np():a.Ce(this.gf)},ae.prototype.standardMouseSelect=function(){var a=this.h;if(null!==a&&a.Pe){var b=a.R,c=a.et(b.ea,!1);if(null!==c){if(t.Vm?b.Bp:b.control){for(a.Ba("ChangingSelection"),b=c;null!==b&&!b.canSelect();)b=b.hb;null!==b&&(b.eb=!b.eb),a.Ba("ChangedSelection")}else if(b.shift){if(!c.eb){for(a.Ba("ChangingSelection"),b=c;null!==b&&!b.canSelect();)b=b.hb;null!==b&&(b.eb=!0),a.Ba("ChangedSelection")}}else if(!c.eb){for(b=c;null!==b&&!b.canSelect();)b=b.hb;null!==b&&a.select(b)}}else!b.left||(t.Vm?b.Bp:b.control)||b.shift||a.kw()}},ae.prototype.standardMouseClick=function(a,b){void 0===a&&(a=null),void 0===b&&(b=function(a){return!a.layer.rc});var c=this.h;if(null!==c){var d=c.R,e=c.pe(d.ea,a,b);d.ce=e,$e(e,d,c)}},ae.prototype.standardMouseOver=function(){var a=this.h;if(null!==a){var b=a.R;if(null!==b.h&&!0!==a.Ub.sd){var c=a.Wa;a.Wa=!0;var d=a.pe(b.ea,null,null);b.ce=d;var e=!1;if(d!==a.Bn){var f=a.Bn,g=f;for(a.Bn=d,this.doCurrentObjectChanged(f,d);null!==f;){var h=f.EA;if(null!==h){if(d===f)break;if(null!==d&&d.ej(f))break;if(h(b,f,d),e=!0,b.Ee)break}f=f.ja}for(f=g;null!==d;){if(h=d.DA,null!==h){if(f===d)break;if(null!==f&&f.ej(d))break;if(h(b,d,f),e=!0,b.Ee)break}d=d.ja}d=a.Bn}if(null!==d){for(f=d,h="";null!==f&&(h=f.cursor,""===h);)f=f.ja;for(a.$b=h,f=d;null!==f&&(h=f.zt,null===h||(h(b,f),e=!0,!b.Ee));)f=f.ja}else a.$b="",h=a.zt,null!==h&&(h(b),e=!0);e&&a.te(),a.Wa=c}}},ae.prototype.doCurrentObjectChanged=function(){},ae.prototype.standardMouseWheel=function(){var a=this.h;if(null!==a){var b=a.R,c=b.Yj;if(0!==c&&a.Gd.N()){var d=a.Se,e=a.wb.cn;if((e===af&&!b.shift||e===bf&&b.control)&&(c>0?d.canIncreaseZoom():d.canDecreaseZoom()))e=a.$f,a.$f=b.Ke,c>0?d.increaseZoom():d.decreaseZoom(),a.$f=e,b.bubbles=!1;else if(e===af&&b.shift||e===bf&&!b.control){if(d=a.position.copy(),e=c>0?c:-c,!b.shift&&a.pf){var f=a.Rp,e=e/40*f;c>0?a.scroll("pixel","up",e):a.scroll("pixel","down",e)}else b.shift&&a.of&&(f=a.Qp,e=e/40*f,c>0?a.scroll("pixel","left",e):a.scroll("pixel","right",e));a.position.M(d)||(b.bubbles=!1)}}}},ae.prototype.standardWaitAfter=function(a){t.i(a,"number",ae,"standardWaitAfter:delay"),this.cancelWaitAfter();var b=this;this.Zv=window.setTimeout(function(){b.doWaitAfter()},a)},ae.prototype.cancelWaitAfter=function(){-1!==this.Zv&&window.clearTimeout(this.Zv),this.Zv=-1},ae.prototype.doWaitAfter=function(){},ae.prototype.findToolHandleAt=function(a,b){var c=this.h;if(null===c)return null;if(c=c.pe(a,null,function(a){return a=a.S,null===a?!1:null!==a.pc}),null===c)return null;var d=c.S;return null===d||d.Zc!==b?null:c},ae.prototype.isBeyondDragSize=function(a,b){var c=this.h;if(null===c)return!1;void 0===a&&(a=c.Nc.Ke),void 0===b&&(b=c.R.Ke);var d=c.wb.uE,c=d.width,d=d.height;return t.gB&&(c+=6,d+=6),Math.abs(b.x-a.x)>c||Math.abs(b.y-a.y)>d},t.A(ae,{h:"diagram"},function(){return this.U}),t.g(ae,"name",ae.prototype.name),t.defineProperty(ae,{name:"name"},function(){return this.Zb},function(a){t.i(a,"string",ae,"name"),this.Zb=a}),t.g(ae,"isEnabled",ae.prototype.isEnabled),t.defineProperty(ae,{isEnabled:"isEnabled"},function(){return this.Le},function(a){t.i(a,"boolean",ae,"isEnabled"),this.Le=a}),t.g(ae,"isActive",ae.prototype.ia),t.defineProperty(ae,{ia:"isActive"},function(){return this.lC},function(a){t.i(a,"boolean",ae,"isActive"),this.lC=a}),t.g(ae,"transactionResult",ae.prototype.gf),t.defineProperty(ae,{gf:"transactionResult"},function(){return this.yD},function(a){null!==a&&t.i(a,"string",ae,"transactionResult"),this.yD=a}),t.ga("DraggingTool",cf),t.Ka(cf,ae),t.g(cf,"isCopyEnabled",cf.prototype.qA),t.defineProperty(cf,{qA:"isCopyEnabled"},function(){return this.pC},function(a){t.i(a,"boolean",cf,"isCopyEnabled"),this.pC=a}),t.g(cf,"copiesEffectiveCollection",cf.prototype.cE),t.defineProperty(cf,{cE:"copiesEffectiveCollection"},function(){return this.LB},function(a){t.i(a,"boolean",cf,"copiesEffectiveCollection"),this.LB=a}),t.g(cf,"dragsTree",cf.prototype.vE),t.defineProperty(cf,{vE:"dragsTree"},function(){return this.cC},function(a){t.i(a,"boolean",cf,"dragsTree"),this.cC=a}),t.g(cf,"isGridSnapEnabled",cf.prototype.qp),t.defineProperty(cf,{qp:"isGridSnapEnabled"},function(){return this.Wq},function(a){t.i(a,"boolean",cf,"isGridSnapEnabled"),this.Wq=a}),t.g(cf,"isComplexRoutingRealtime",cf.prototype.aF),t.defineProperty(cf,{aF:"isComplexRoutingRealtime"},function(){return this.oC},function(a){t.i(a,"boolean",cf,"isComplexRoutingRealtime"),this.oC=a}),t.g(cf,"isGridSnapRealtime",cf.prototype.cF),t.defineProperty(cf,{cF:"isGridSnapRealtime"},function(){return this.tC},function(a){t.i(a,"boolean",cf,"isGridSnapRealtime"),this.tC=a}),t.g(cf,"gridSnapCellSize",cf.prototype.lA),t.defineProperty(cf,{lA:"gridSnapCellSize"},function(){return this.Ty},function(a){t.l(a,fa,cf,"gridSnapCellSize"),this.Ty.M(a)||(this.Ty=a=a.Z())}),t.g(cf,"gridSnapCellSpot",cf.prototype.LE),t.defineProperty(cf,{LE:"gridSnapCellSpot"},function(){return this.Uy},function(a){t.l(a,H,cf,"gridSnapCellSpot"),this.Uy.M(a)||(this.Uy=a=a.Z())}),t.g(cf,"gridSnapOrigin",cf.prototype.ME),t.defineProperty(cf,{ME:"gridSnapOrigin"},function(){return this.Vy},function(a){t.l(a,w,cf,"gridSnapOrigin"),this.Vy.M(a)||(this.Vy=a=a.Z())}),t.g(cf,"dragsLink",cf.prototype.Zh),t.defineProperty(cf,{Zh:"dragsLink"},function(){return this.bC},function(a){t.i(a,"boolean",cf,"dragsLink"),this.bC=a}),t.g(cf,"currentPart",cf.prototype.Yo),t.defineProperty(cf,{Yo:"currentPart"},function(){return this.RB},function(a){null!==a&&t.l(a,C,cf,"currentPart"),this.RB=a}),t.g(cf,"copiedParts",cf.prototype.Dc),t.defineProperty(cf,{Dc:"copiedParts"},function(){return this.KB},function(a){this.KB=a}),t.g(cf,"draggedParts",cf.prototype.qc),t.defineProperty(cf,{qc:"draggedParts"},function(){return this.aC},function(a){this.aC=a}),t.g(cf,"draggedLink",cf.prototype.Mc),t.defineProperty(cf,{Mc:"draggedLink"},function(){return this.$B},function(a){null!==a&&t.l(a,T,cf,"draggedLink"),this.$B=a}),t.g(cf,"isDragOutStarted",cf.prototype.pt),t.defineProperty(cf,{pt:"isDragOutStarted"},function(){return this.rC},function(a){this.rC=a}),t.g(cf,"startPoint",cf.prototype.jj),t.defineProperty(cf,{jj:"startPoint"},function(){return this.Lv},function(a){t.l(a,w,cf,"startPoint"),this.Lv.M(a)||(this.Lv=a=a.Z())}),t.g(cf,"delay",cf.prototype.vw),t.defineProperty(cf,{vw:"delay"},function(){return this.Ln},function(a){t.i(a,"number",cf,"delay"),this.Ln=a}),cf.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||!a.Rj&&!a.Si&&!a.Ms||!a.Pe)return!1;var b=a.R;return!b.left||a.Ua!==this&&(!this.isBeyondDragSize()||b.Uw&&b.timestamp-a.Nc.timestamp<this.Ln)?!1:null!==this.findDraggablePart()},cf.prototype.findDraggablePart=function(){var a=this.h;if(null===a)return null;if(a=a.et(a.Nc.ea,!1),null===a)return null;for(;null!==a&&!a.canSelect();)a=a.hb;return null!==a&&(a.canMove()||a.canCopy())?a:null},cf.prototype.standardMouseSelect=function(){var a=this.h;if(null!==a&&a.Pe){var b=a.et(a.Nc.ea,!1);if(null!==b){for(;null!==b&&!b.canSelect();)b=b.hb;this.Yo=b,this.Yo.eb||(a.Ba("ChangingSelection"),b=a.R,(t.Vm?b.Bp:b.control)||b.shift||Me(a),this.Yo.eb=!0,a.Ba("ChangedSelection"))}}},cf.prototype.doActivate=function(){var a=this.h;if(null!==a){this.standardMouseSelect();var b=this.Yo;null!==b&&(b.canMove()||b.canCopy())&&(this.ia=!0,this.Bo.set(a.position),df(this,a.selection),this.Nl=this.zv=null,this.qc=this.computeEffectiveCollection(a.selection),a.yo=!0,ef(this,this.qc),this.uc("Drag"),this.jj=a.Nc.ea,a.Kd=!0,a.Ms&&(this.pt=!0,this.Iq=!1,ff=this,gf=this.h,this.doSimulatedDragOut()))}},cf.prototype.computeEffectiveCollection=function(a){var b=null!==this.h&&this.h.Ua===this,c=new ia(C,Object);if(null===a)return c;for(var d=a.k;d.next();){var e=d.value;jf(this,c,e,b)}if(null!==this.Mc&&this.Zh)return c;for(d=a.k;d.next();)e=d.value,e instanceof T&&(a=e,b=a.aa,null===b||c.contains(b)?(b=a.ca,null===b||c.contains(b)||c.remove(a)):c.remove(a));return c},cf.prototype.doDeactivate=function(){this.ia=!1;var a=this.h;if(null!==a&&tf(a),uf(this),vf(this,this.qc),this.qc=null,this.Iq=this.pt=!1,0<wf.count){for(var b=wf.length,c=0;b>c;c++){var d=wf.n[c];xf(d),yf(d),uf(d),null!==d.h&&tf(d.h)}wf.clear()}xf(this),this.Bo.Sp(NaN,NaN),ff=gf=null,yf(this),a.Kd=!1,a.$b="",a.yo=!1,this.hk()},cf.prototype.doCancel=function(){yf(this),Af(this);var a=this.h;null!==a&&this.Bo.N()&&(a.position=this.Bo),this.stopTool()},cf.prototype.doKeyDown=function(){var a=this.h;null!==a&&(a=a.R,null!==a&&this.ia&&("Esc"===a.key?this.doCancel():this.doMouseMove()))},cf.prototype.doKeyUp=function(){var a=this.h;null!==a&&null!==a.R&&this.ia&&this.doMouseMove()},cf.prototype.moveParts=function(a,b,c){if(null!==a&&(t.l(a,ia,cf,"moveParts:parts"),0!==a.count)){var d=t.K(),e=t.K();e.assign(b),isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0);var f=this.Ov;f||ef(this,a);for(var g=new B,h=new B(Ea),i=a.k;i.next();){var j=i.key;if(j.Ld()){var k=Ff(this,j,a);if(null!==k)g.add({Fc:j,info:i.value,LI:k});else if(!c||j.canMove()){k=i.value.point,d.assign(k);var l=t.K();this.computeMove(j,d.add(e),a,l),j.location=l,t.B(l),i.value.tz=l.Vt(k)}}else i.key instanceof T&&h.add(i.yb)}for(c=g.k;c.next();)g=c.value,k=g.info.point,d.assign(k),g.Fc.location=d.add(g.LI.tz);for(k=t.K(),c=t.K(),h=h.k;h.next();)if(l=h.value,g=l.key,g instanceof T)if(g.Wp)if(i=g.aa,j=g.ca,null!==this.Mc&&this.Zh)l=l.value.point,a.add(g,kf(e)),i=b.x-l.x,j=b.y-l.y,g.ql(i,j);else{if(null!==i){k.assign(i.location);var m=a.za(i);null!==m&&k.Vt(m.point)}null!==j&&(c.assign(j.location),m=a.za(j),null!==m&&c.Vt(m.point)),null!==i&&null!==j?k.tf(c)?(l=l.value.point,i=d,i.assign(k),i.Vt(l),a.add(g,kf(k)),g.ql(i.x,i.y)):(g.Wp=!1,g.ac()):(l=l.value.point,a.add(g,kf(null!==i?k:null!==j?c:b)),i=e.x-l.x,j=e.y-l.y,g.ql(i,j))}else(null===g.aa||null===g.ca)&&(l=l.value.point,a.add(g,kf(b)),i=e.x-l.x,j=e.y-l.y,g.ql(i,j));t.B(d),t.B(e),t.B(k),t.B(c),f||vf(this,a)}},cf.prototype.computeMove=function(a,b,c,d){if(void 0===d&&(d=new w),d.assign(b),null===a)return d;void 0===c&&(c=null);var e=b;if(this.qp&&(this.cF||null===c||this.h.R.lj)&&(e=t.K(),c=e,c.assign(b),null!==a)){var f=this.h;if(null!==f){var g=f.lp,h=this.lA,f=h.width,h=h.height,i=this.ME,j=i.x,i=i.y,k=this.LE;if(null!==g){var l=g.ht;isNaN(f)&&(f=l.width),isNaN(h)&&(h=l.height),g=g.kA,isNaN(j)&&(j=g.x),isNaN(i)&&(i=g.y)}g=t.mc(0,0),g.Rt(0,0,f,h,k),F.dt(b.x,b.y,j+g.x,i+g.y,f,h,c),t.B(g)}}return c=null!==a.aA?a.aA(a,b,e):e,h=a.zF,f=h.x,isNaN(f)&&(f=a.location.x),h=h.y,isNaN(h)&&(h=a.location.y),g=a.tF,j=g.x,isNaN(j)&&(j=a.location.x),g=g.y,isNaN(g)&&(g=a.location.y),d.p(Math.max(f,Math.min(c.x,j)),Math.max(h,Math.min(c.y,g))),e!==b&&t.B(e),d},cf.prototype.doDragOver=function(){},cf.prototype.doDropOnto=function(){},cf.prototype.doMouseMove=function(){if(this.ia){var a=this.h;if(null!==a&&null!==this.Yo&&null!==this.qc){var b=!1,c=!1;this.mayCopy()?(b=!0,a.$b="copy",Df(this,!1),ef(this,this.Dc),Ef(this,this.Dc,!1),vf(this,this.Dc)):this.mayMove()?(c=!0,a.$b="default",yf(this),Ef(this,this.qc,!0)):this.mayDragOut()?(a.$b="no-drop",Df(this,!1),Ef(this,this.Dc,!1)):yf(this),Hf(this,a.R.ea,c,b)}}},cf.prototype.doMouseUp=function(){if(this.ia){var a=this.h;if(null!==a){var b=!1,c=this.mayCopy();if(c&&null!==this.Dc?(yf(this),Df(this,!0),ef(this,this.Dc),Ef(this,this.Dc,!1),vf(this,this.Dc),null!==this.Dc&&a.gG(this.Dc.Fl())):(b=!0,yf(this),this.mayMove()&&(Ef(this,this.qc,!0),this.Jv=!1,Hf(this,a.R.ea,!0,!1),this.Jv=!0)),this.Iq=!0,Xf(this,a.R.ea),this.ia){if(this.Dc=null,b&&null!==this.qc)for(b=this.qc.k;b.next();){var d=b.key;d instanceof R&&(d=d.hb,null===d||null===d.placeholder||this.qc.contains(d)||d.Vz&&d.ha())}a.Oc(),vf(this,this.qc),this.gf=c?"Copy":"Move",a.Ba(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}},cf.prototype.mayCopy=function(){if(!this.qA)return!1;var a=this.h;if(null===a||a.ab||a.Ze||!a.Bm||!a.Si||(t.Vm?!a.R.alt:!a.R.control))return!1;for(a=a.selection.k;a.next();){var b=a.value;if(b.Ld()&&b.canCopy())return!0}return null!==this.Mc&&this.Zh&&this.Mc.canCopy()?!0:!1},cf.prototype.mayDragOut=function(){if(!this.qA)return!1;var a=this.h;if(null===a||!a.Ms||!a.Si||a.Rj)return!1;for(a=a.selection.k;a.next();){var b=a.value;if(b.Ld()&&b.canCopy())return!0}return null!==this.Mc&&this.Zh&&this.Mc.canCopy()?!0:!1},cf.prototype.mayMove=function(){var a=this.h;if(null===a||a.ab||!a.Rj)return!1;for(a=a.selection.k;a.next();){var b=a.value;if(b.Ld()&&b.canMove())return!0}return null!==this.Mc&&this.Zh&&this.Mc.canMove()?!0:!1};var wf=new B(cf),ff=null,gf=null;cf.prototype.mayDragIn=function(){var a=this.h;if(null===a||!a.Kz||a.ab||a.Ze||!a.Bm)return!1;var b=ff;return null===b||b.h.ba.Wj!==a.ba.Wj?!1:!0},cf.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var a=this.h;a.Ub.Al(),Zf(a),a=ff,null!==a&&(a.h.$b="copy")}},cf.prototype.doSimulatedDragLeave=function(){var a=ff;null!==a&&a.doSimulatedDragOut(),this.doCancel()},cf.prototype.doSimulatedDragOver=function(){var a=this.h;if(null!==a){var b=ff;null!==b&&null!==b.qc&&this.mayDragIn()&&(a.$b="copy",$f(this,b.qc.Fl(),!1),Ef(this,this.Dc,!1),Hf(this,a.R.ea,!1,!0))}},cf.prototype.doSimulatedDrop=function(){var a=this.h;if(null!==a){var b=ff;null!==b&&(b.Iq=!0,yf(this),this.mayDragIn()&&(this.uc("Drop"),$f(this,b.qc.Fl(),!0),Ef(this,this.Dc,!1),null!==this.Dc&&a.gG(this.Dc.Fl()),this.gf="ExternalCopy",Xf(this,a.R.ea),a.Oc(),this.Dc=null,a.Ba("ExternalObjectsDropped",a.selection),this.hk()))}},cf.prototype.doSimulatedDragOut=function(){var a=this.h;null!==a&&(this.mayCopy()||this.mayMove()?a.$b="":a.$b="no-drop")},t.ga("LinkingBaseTool",ag),t.Ka(ag,ae),ag.prototype.doStop=function(){var a=this.h;null!==a&&tf(a),this.Kg=this.Jg=this.Ig=this.Hg=this.sc=null,this.Cx.clear(),this.Ff=null},t.g(ag,"portGravity",ag.prototype.LA),t.defineProperty(ag,{LA:"portGravity"},function(){return this.XC},function(a){t.i(a,"number",ag,"portGravity"),a>=0&&(this.XC=a)}),t.g(ag,"isUnconnectedLinkValid",ag.prototype.Wm),t.defineProperty(ag,{Wm:"isUnconnectedLinkValid"},function(){return this.wC},function(a){t.i(a,"boolean",ag,"isUnconnectedLinkValid"),this.wC=a}),t.g(ag,"temporaryLink",ag.prototype.Zf),t.defineProperty(ag,{Zf:"temporaryLink"},function(){return this.rD},function(a){t.l(a,T,ag,"temporaryLink"),this.rD=a}),t.g(ag,"temporaryFromNode",ag.prototype.de),t.defineProperty(ag,{de:"temporaryFromNode"},function(){return this.pD},function(a){t.l(a,R,ag,"temporaryFromNode"),this.pD=a}),t.g(ag,"temporaryFromPort",ag.prototype.Dl),t.defineProperty(ag,{Dl:"temporaryFromPort"},function(){return this.qD},function(a){t.l(a,Q,ag,"temporaryFromPort"),this.qD=a}),t.g(ag,"temporaryToNode",ag.prototype.ee),t.defineProperty(ag,{ee:"temporaryToNode"},function(){return this.sD},function(a){t.l(a,R,ag,"temporaryToNode"),this.sD=a}),t.g(ag,"temporaryToPort",ag.prototype.El),t.defineProperty(ag,{El:"temporaryToPort"},function(){return this.tD},function(a){t.l(a,Q,ag,"temporaryToPort"),this.tD=a}),t.g(ag,"originalLink",ag.prototype.sc),t.defineProperty(ag,{sc:"originalLink"},function(){return this.RC},function(a){null!==a&&t.l(a,T,ag,"originalLink"),this.RC=a}),t.g(ag,"originalFromNode",ag.prototype.Hg),t.defineProperty(ag,{Hg:"originalFromNode"},function(){return this.PC},function(a){null!==a&&t.l(a,R,ag,"originalFromNode"),this.PC=a}),t.g(ag,"originalFromPort",ag.prototype.Ig),t.defineProperty(ag,{Ig:"originalFromPort"},function(){return this.QC},function(a){null!==a&&t.l(a,Q,ag,"originalFromPort"),this.QC=a}),t.g(ag,"originalToNode",ag.prototype.Jg),t.defineProperty(ag,{Jg:"originalToNode"},function(){return this.UC},function(a){null!==a&&t.l(a,R,ag,"originalToNode"),this.UC=a}),t.g(ag,"originalToPort",ag.prototype.Kg),t.defineProperty(ag,{Kg:"originalToPort"},function(){return this.VC},function(a){null!==a&&t.l(a,Q,ag,"originalToPort"),this.VC=a}),t.defineProperty(ag,{Xd:"isForwards"},function(){return this.sC},function(a){t.i(a,"boolean",ag,"isForwards"),this.sC=a}),t.A(ag,{Cx:"validPortsCache"},function(){return this.xH}),t.g(ag,"targetPort",ag.prototype.Ff),t.defineProperty(ag,{Ff:"targetPort"},function(){return this.lD},function(a){null!==a&&t.l(a,Q,ag,"targetPort"),this.lD=a}),ag.prototype.copyPortProperties=function(a,b,c,d,e){if(null!==a&&null!==b&&null!==c&&null!==d){d.Ca=b.oa.size,e?(d.rb=b.rb,d.jk=b.jk):(d.ob=b.ob,d.dk=b.dk),c.bf=Hb;var f=t.K();c.location=b.pb(Hb,f),t.B(f),d.angle=b.hl(),null!==this.Gt&&this.Gt(a,b,c,d,e)}},ag.prototype.setNoTargetPortProperties=function(a,b,c){null!==b&&(b.Ca=F.Ux,b.ob=wb,b.rb=wb),null!==a&&(a.location=this.h.R.ea),null!==this.Gt&&this.Gt(null,null,a,b,c)},ag.prototype.doMouseDown=function(){this.ia&&this.doMouseMove()},ag.prototype.doMouseMove=function(){if(this.ia){var a=this.h;if(null!==a){if(this.Ff=this.findTargetPort(this.Xd),null!==this.Ff){var b=this.Ff.S;if(b instanceof R)return void(this.Xd?this.copyPortProperties(b,this.Ff,this.ee,this.El,!0):this.copyPortProperties(b,this.Ff,this.de,this.Dl,!1))}this.Xd?this.setNoTargetPortProperties(this.ee,this.El,!0):this.setNoTargetPortProperties(this.de,this.Dl,!1),(a.of||a.pf)&&Uf(a,a.R.Ke)}}},ag.prototype.findValidLinkablePort=function(a,b){if(null===a)return null;var c=a.S;if(!(c instanceof R))return null;for(;null!==a;){var d=b?a.jB:a.hA;if(!0===d&&(null!==a.Nd||a instanceof R)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(!1===d)break;a=a.ja}return null},ag.prototype.findTargetPort=function(a){var b=this.h,c=b.R.ea,d=this.LA;0>=d&&(d=.1);for(var e=this,f=b.Qm(c,d,function(b){return e.findValidLinkablePort(b,a)},null,!0),d=1/0,b=null,f=f.k;f.next();){var g=f.value,h=g.S;if(h instanceof R){var i=g.pb(Hb,t.K()),j=c.x-i.x,k=c.y-i.y;t.B(i),i=j*j+k*k,d>i&&(j=this.Cx.za(g),null!==j?j&&(b=g,d=i):a&&this.isValidLink(this.Hg,this.Ig,h,g)||!a&&this.isValidLink(h,g,this.Jg,this.Kg)?(this.Cx.add(g,!0),b=g,d=i):this.Cx.add(g,!1))}}return null!==b&&(c=b.S,c instanceof R&&(null===c.layer||c.layer.Cm))?b:null},ag.prototype.isValidFrom=function(a,b){if(null===a||null===b)return this.Wm;if(this.h.Ua===this&&(null!==a.layer&&!a.layer.Cm||!0!==b.hA))return!1;var c=b.FE;if(1/0>c){if(null!==this.sc&&a===this.Hg&&b===this.Ig)return!0;var d=b.Nd;if(null===d&&(d=""),a.Cw(d).count>=c)return!1}return!0},ag.prototype.isValidTo=function(a,b){if(null===a||null===b)return this.Wm;if(this.h.Ua===this&&(null!==a.layer&&!a.layer.Cm||!0!==b.jB))return!1;var c=b.CG;if(1/0>c){if(null!==this.sc&&a===this.Jg&&b===this.Kg)return!0;var d=b.Nd;if(null===d&&(d=""),a.wg(d).count>=c)return!1}return!0},ag.prototype.isInSameNode=function(a,b){if(null===a||null===b)return!1;if(a===b)return!0;var c=a.S,d=b.S;return null!==c&&c===d},ag.prototype.isLinked=function(a,b){if(null===a||null===b)return!1;var c=a.S;if(!(c instanceof R))return!1;var d=a.Nd;null===d&&(d="");var e=b.S;if(!(e instanceof R))return!1;var f=b.Nd;for(null===f&&(f=""),e=e.wg(f);e.next();)if(f=e.value,f.aa===c&&f.Rf===d)return!0;return!1},ag.prototype.isValidLink=function(a,b,c,d){if(!this.isValidFrom(a,b)||!this.isValidTo(c,d)||!(null===b||null===d||(b.EE&&d.BG||!this.isInSameNode(b,d))&&(b.DE&&d.AG||!this.isLinked(b,d)))||null!==this.sc&&(null!==a&&bg(this,a,this.sc)||null!==c&&bg(this,c,this.sc))||null!==a&&null!==c&&(null===a.data&&null!==c.data||null!==a.data&&null===c.data)||!cg(this,a,c,this.sc))return!1;if(null!==a){var e=a.Ap;if(null!==e&&!e(a,b,c,d,this.sc))return!1}return null===c||(e=c.Ap,null===e||e(a,b,c,d,this.sc))?(e=this.Ap,null!==e?e(a,b,c,d,this.sc):!0):!1},t.g(ag,"linkValidation",ag.prototype.Ap),t.defineProperty(ag,{Ap:"linkValidation"},function(){return this.Lk},function(a){null!==a&&t.i(a,"function",ag,"linkValidation"),this.Lk=a}),t.g(ag,"portTargeted",ag.prototype.Gt),t.defineProperty(ag,{Gt:"portTargeted"},function(){return this.YC},function(a){null!==a&&t.i(a,"function",ag,"portTargeted"),this.YC=a}),t.ga("LinkingTool",qa),t.Ka(qa,ag);var tg;qa.Either=tg=t.w(qa,"Either",0);var ug;qa.ForwardsOnly=ug=t.w(qa,"ForwardsOnly",0);var vg;qa.BackwardsOnly=vg=t.w(qa,"BackwardsOnly",0),t.g(qa,"archetypeLinkData",qa.prototype.KD),t.defineProperty(qa,{KD:"archetypeLinkData"},function(){return this.ly},function(a){null!==a&&t.l(a,Object,qa,"archetypeLinkData"),a instanceof Q&&t.l(a,T,qa,"archetypeLinkData"),this.ly=a}),t.g(qa,"archetypeLabelNodeData",qa.prototype.Oz),t.defineProperty(qa,{Oz:"archetypeLabelNodeData"},function(){return this.ky},function(a){null!==a&&t.l(a,Object,qa,"archetypeLabelNodeData"),a instanceof Q&&t.l(a,R,qa,"archetypeLabelNodeData"),this.ky=a}),t.g(qa,"direction",qa.prototype.direction),t.defineProperty(qa,{direction:"direction"},function(){return this.sa},function(a){t.Aa(a,qa,qa,"direction"),this.sa=a}),t.g(qa,"startObject",qa.prototype.fB),t.defineProperty(qa,{fB:"startObject"},function(){return this.hD},function(a){null!==a&&t.l(a,Q,qa,"startObject"),this.hD=a}),t.A(qa,{yx:"startPort"},function(){return this.uz}),qa.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||a.ab||a.Ze||!a.Cm)return!1;var b=a.ba;return null!==b&&(b instanceof M||b instanceof Kd)&&a.R.left&&(a.Ua===this||this.isBeyondDragSize())?null!==this.findLinkablePort():!1},qa.prototype.findLinkablePort=function(){var a=this.h;if(null===a)return null;var b=this.fB;if(null===b&&(b=a.pe(a.Nc.ea,null,null)),null===b||!(b.S instanceof R))return null;var c=this.direction;return c!==tg&&c!==ug||(a=this.findValidLinkablePort(b,!1),null===a)?c!==tg&&c!==vg||(a=this.findValidLinkablePort(b,!0),null===a)?null:(this.Xd=!1,a):(this.Xd=!0,a)},qa.prototype.doActivate=function(){var a=this.h;if(null!==a&&(null===this.yx&&(this.uz=this.findLinkablePort()),null!==this.yx)){if(this.uc(this.name),a.Kd=!0,a.$b="pointer",this.Xd){this.Ig=this.yx;var b=this.Ig.S;b instanceof R&&(this.Hg=b),this.copyPortProperties(this.Hg,this.Ig,this.de,this.Dl,!1)}else this.Kg=this.yx,b=this.Kg.S,b instanceof R&&(this.Jg=b),this.copyPortProperties(this.Jg,this.Kg,this.ee,this.El,!0);a.add(this.de),a.add(this.ee),null!==this.Zf&&(null!==this.de&&(this.Zf.aa=this.de),null!==this.ee&&(this.Zf.ca=this.ee),this.Zf.ac(),a.add(this.Zf)),this.ia=!0}},qa.prototype.doDeactivate=function(){this.ia=!1;var a=this.h;
null!==a&&(a.remove(this.Zf),a.remove(this.de),a.remove(this.ee),a.Kd=!1,a.$b="",this.hk())},qa.prototype.doStop=function(){ag.prototype.doStop.call(this),this.fB=this.uz=null},qa.prototype.doMouseUp=function(){if(this.ia){var a=this.h;if(null===a)return;var b=this.gf=null,c=null,d=null,e=null,f=this.Ff=this.findTargetPort(this.Xd),g=null;null!==f?(g=f.S,g instanceof R&&(this.Xd?(null!==this.Hg&&(b=this.Hg,c=this.Ig),d=g,e=f):(b=g,c=f,null!==this.Jg&&(d=this.Jg,e=this.Kg)))):this.Xd?null!==this.Hg&&this.Wm&&(b=this.Hg,c=this.Ig):null!==this.Jg&&this.Wm&&(d=this.Jg,e=this.Kg),(null!==b||null!==d)&&(b=this.insertLink(b,c,d,e),null!==b?(null===f&&(this.Xd?b.Jn=a.R.ea.copy():b.Fn=a.R.ea.copy()),a.Pe&&a.select(b),this.gf=this.name,a.Ba("LinkDrawn",b)):a.ba.UD())}this.stopTool()},qa.prototype.insertLink=function(a,b,c,d){var e=this.h;if(null===e)return null;var f=e.ba;if(null===f)return null;if(f instanceof Kd){var g=a;if(b=c,e.pd||(g=c,b=a),null!==g&&null!==b)return f.lh(b.data,f.Hb(g.data)),b.ft()}else if(f instanceof M)if(g="",null!==a&&(null===b&&(b=a),g=b.Nd,null===g&&(g="")),b="",null!==c&&(null===d&&(d=c),b=d.Nd,null===b&&(b="")),d=this.KD,d instanceof T){if(Le(d),f=d.copy(),f instanceof T)return f.aa=a,f.Rf=g,f.ca=c,f.Og=b,e.add(f),a=this.Oz,a instanceof R&&(Le(a),a=a.copy(),a instanceof R&&(a.$d=f,e.add(a))),f}else if(null!==d&&(d=f.eE(d),t.qb(d)))return null!==a&&f.ux(d,f.Hb(a.data)),f.$A(d,g),null!==c&&f.wx(d,f.Hb(c.data)),f.cB(d,b),f.aw(d),a=this.Oz,null===a||a instanceof R||(a=f.copyNodeData(a),t.qb(a)&&(f.Am(a),a=f.Hb(a),void 0!==a&&f.GD(d,a))),f=e.Qf(d);return null},t.ga("RelinkingTool",hf),t.Ka(hf,ag),hf.prototype.updateAdornments=function(a){if(null!==a&&a instanceof T){var b="RelinkFrom",c=null;if(a.eb&&!this.h.ab){var d=a.Pt;null!==d&&a.canRelinkFrom()&&a.oa.N()&&a.La()&&d.oa.N()&&d.pl()&&(c=a.bp(b),null===c&&(c=this.makeAdornment(d,!1),null!==c&&(c.Zc=b),a.Wk(b,c)))}null===c&&a.vl(b),b="RelinkTo",c=null,a.eb&&!this.h.ab&&(d=a.Pt,null!==d&&a.canRelinkTo()&&a.oa.N()&&a.La()&&d.oa.N()&&d.pl()&&(c=a.bp(b),null===c&&(c=this.makeAdornment(d,!0),null!==c&&(c.Zc=b),a.Wk(b,c)))),null===c&&a.vl(b)}},hf.prototype.makeAdornment=function(a,b){var c=new Je;c.type=wg;var d=b?this.aK:this.GI;return null!==d&&c.add(d.copy()),c.pc=a,c},t.defineProperty(hf,{GI:"fromHandleArchetype"},function(){return this.hC},function(a){null!==a&&t.l(a,Q,hf,"fromHandleArchetype"),this.hC=a}),t.defineProperty(hf,{aK:"toHandleArchetype"},function(){return this.uD},function(a){null!==a&&t.l(a,Q,hf,"toHandleArchetype"),this.uD=a}),t.A(hf,{handle:"handle"},function(){return this.dc}),hf.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||a.ab||a.Ze||!a.Sj)return!1;var b=a.ba;return null!==b&&(b instanceof M||b instanceof Kd)&&a.R.left?(b=this.findToolHandleAt(a.Nc.ea,"RelinkFrom"),null===b&&(b=this.findToolHandleAt(a.Nc.ea,"RelinkTo")),null!==b):!1},hf.prototype.doActivate=function(){var a=this.h;if(null!==a){if(null===this.sc){var b=this.findToolHandleAt(a.Nc.ea,"RelinkFrom");if(null===b&&(b=this.findToolHandleAt(a.Nc.ea,"RelinkTo")),null===b)return;var c=b.S;if(!(c instanceof Je&&c.Wh instanceof T))return;this.dc=b,this.Xd=null===c||"RelinkTo"===c.Zc,this.sc=c.Wh}this.uc(this.name),a.Kd=!0,a.$b="pointer",this.Ig=this.sc.ud,this.Hg=this.sc.aa,this.Kg=this.sc.fe,this.Jg=this.sc.ca,this.SC.set(this.sc.oa),null!==this.sc&&0<this.sc.pa&&(null===this.sc.aa&&(null!==this.Dl&&(this.Dl.Ca=F.gq),null!==this.de&&(this.de.location=this.sc.o(0))),null===this.sc.ca&&(null!==this.El&&(this.El.Ca=F.gq),null!==this.ee&&(this.ee.location=this.sc.o(this.sc.pa-1)))),this.copyPortProperties(this.Hg,this.Ig,this.de,this.Dl,!1),this.copyPortProperties(this.Jg,this.Kg,this.ee,this.El,!0),a.add(this.de),a.add(this.ee),null!==this.Zf&&(null!==this.de&&(this.Zf.aa=this.de),null!==this.ee&&(this.Zf.ca=this.ee),this.copyLinkProperties(this.sc,this.Zf),this.Zf.ac(),a.add(this.Zf)),this.ia=!0}},hf.prototype.copyLinkProperties=function(a,b){if(null!==a&&null!==b){b.Lo=a.Lo,b.sw=a.sw;var c=a.De;(c===xg||c===yg)&&(c=zg),b.De=c,b.Xs=a.Xs,b.Lt=a.Lt,b.mn=a.mn,b.ob=a.ob,b.dk=a.dk,b.hp=a.hp,b.ip=a.ip,b.rb=a.rb,b.jk=a.jk,b.Xp=a.Xp,b.Yp=a.Yp}},hf.prototype.doDeactivate=function(){this.ia=!1;var a=this.h;null!==a&&(a.remove(this.Zf),a.remove(this.de),a.remove(this.ee),a.Kd=!1,a.$b="",this.hk())},hf.prototype.doStop=function(){ag.prototype.doStop.call(this),this.dc=null},hf.prototype.doMouseUp=function(){if(this.ia){var a=this.h;if(null===a)return;this.gf=null;var b=this.Hg,c=this.Ig,d=this.Jg,e=this.Kg,f=this.sc;if(this.Ff=this.findTargetPort(this.Xd),null!==this.Ff){var g=this.Ff.S;g instanceof R&&(this.Xd?(d=g,e=this.Ff):(b=g,c=this.Ff))}else this.Wm?this.Xd?e=d=null:c=b=null:f=null;null!==f&&(this.reconnectLink(f,this.Xd?d:b,this.Xd?e:c,this.Xd),null===this.Ff&&(this.Xd?f.Jn=a.R.ea.copy():f.Fn=a.R.ea.copy(),f.ac()),a.Pe&&(f.eb=!0),this.gf=this.name,a.Ba("LinkRelinked",f,this.Xd?this.Kg:this.Ig)),Ag(this.sc,this.SC)}this.stopTool()},hf.prototype.reconnectLink=function(a,b,c,d){return null===this.h?!1:(c=null!==c&&null!==c.Nd?c.Nd:"",d?(a.ca=b,a.Og=c):(a.aa=b,a.Rf=c),!0)},t.ga("LinkReshapingTool",Bg),t.Ka(Bg,ae);var Jg;Bg.None=Jg=t.w(Bg,"None",0);var Lg;Bg.Horizontal=Lg=t.w(Bg,"Horizontal",1);var Mg;Bg.Vertical=Mg=t.w(Bg,"Vertical",2);var Ng;Bg.All=Ng=t.w(Bg,"All",3),Bg.prototype.updateAdornments=function(a){if(null!==a&&a instanceof T){if(a.eb&&!this.h.ab){var b=a.path;if(null!==b&&a.canReshape()&&a.oa.N()&&a.La()&&b.oa.N()&&b.pl()){var c=a.bp(this.name);if((null===c||c.qH!==a.pa||c.zH!==a.Kp)&&(c=this.makeAdornment(b),null!==c&&(c.qH=a.pa,c.zH=a.Kp,a.Wk(this.name,c))),null!==c)return void(c.location=a.position)}}a.vl(this.name)}},Bg.prototype.makeAdornment=function(a){var b=a.S,c=b.pa,d=b.ic,e=null;if(null!==b.points&&c>1){e=new Je,e.type=wg;var c=b.gt,f=b.Ww,g=d?1:0;if(b.Kp&&b.De!==Pg)for(var h=c+g;f-g>h;h++){var i=this.makeResegmentHandle(a,h);null!==i&&(i.Cf=h,i.Nt=.5,e.add(i))}for(h=c+1;f>h;h++)if(i=this.makeHandle(a,h),null!==i){if(i.Cf=h,h!==c)if(h===c+1&&d){var g=b.o(c),j=b.o(c+1);F.I(g.x,j.x)&&F.I(g.y,j.y)&&(j=b.o(c-1)),F.I(g.x,j.x)?(Og(i,Mg),i.cursor="n-resize"):F.I(g.y,j.y)&&(Og(i,Lg),i.cursor="w-resize")}else h===f-1&&d?(g=b.o(f-1),j=b.o(f),F.I(g.x,j.x)&&F.I(g.y,j.y)&&(g=b.o(f+1)),F.I(g.x,j.x)?(Og(i,Mg),i.cursor="n-resize"):F.I(g.y,j.y)&&(Og(i,Lg),i.cursor="w-resize")):h!==f&&(Og(i,Ng),i.cursor="move");e.add(i)}e.Zc=this.name,e.pc=a}return e},Bg.prototype.makeHandle=function(){var a=this.it;return null===a?null:a.copy()},t.defineProperty(Bg,{it:"handleArchetype"},function(){return this.Fk},function(a){null!==a&&t.l(a,Q,Bg,"handleArchetype"),this.Fk=a}),Bg.prototype.makeResegmentHandle=function(){var a=this.oJ;return null===a?null:a.copy()},t.defineProperty(Bg,{oJ:"midHandleArchetype"},function(){return this.DC},function(a){null!==a&&t.l(a,Q,Bg,"midHandleArchetype"),this.DC=a}),t.A(Bg,{handle:"handle"},function(){return this.dc}),t.A(Bg,{Ls:"adornedLink"},function(){return this.iy}),Bg.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.ab&&a.No&&a.R.left?null!==this.findToolHandleAt(a.Nc.ea,this.name):!1},Bg.prototype.doActivate=function(){var a=this.h;if(null!==a&&(this.dc=this.findToolHandleAt(a.Nc.ea,this.name),null!==this.dc)){var b=this.dc.S.Wh;if(b instanceof T){if(this.iy=b,a.Kd=!0,this.uc(this.name),b.Kp&&.5===this.dc.Nt){var c=b.points.copy(),d=this.dc.pb(Hb);c.Jd(this.dc.Cf+1,d),b.ic&&c.Jd(this.dc.Cf+1,d),b.points=c,b.Wi(),b.updateAdornments(),this.dc=this.findToolHandleAt(a.Nc.ea,this.name)}this.TC=b.o(this.dc.Cf),this.mz=b.points.copy(),this.ia=!0}}},Bg.prototype.doDeactivate=function(){this.hk(),this.iy=this.dc=null;var a=this.h;null!==a&&(a.Kd=!1),this.ia=!1},Bg.prototype.doCancel=function(){var a=this.Ls;null!==a&&(a.points=this.mz),this.stopTool()},Bg.prototype.doMouseMove=function(){var a=this.h;this.ia&&null!==a&&(a=this.computeReshape(a.R.ea),this.reshape(a))},Bg.prototype.doMouseUp=function(){var a=this.h;if(this.ia&&null!==a){var b=this.computeReshape(a.R.ea);if(this.reshape(b),b=this.Ls,null!==b&&b.Kp){var c=this.handle.Cf,d=b.o(c-1),e=b.o(c),f=b.o(c+1);if(b.ic){if(c>b.gt+1&&c<b.Ww-1){var g=b.o(c-2);if(Math.abs(d.x-e.x)<this.Lg&&Math.abs(d.y-e.y)<this.Lg&&(Qg(this,g,d,e,f,!0)||Qg(this,g,d,e,f,!1))){var h=b.points.copy();Qg(this,g,d,e,f,!0)?(h.Mg(c-2,new w(g.x,(f.y+g.y)/2)),h.Mg(c+1,new w(f.x,(f.y+g.y)/2))):(h.Mg(c-2,new w((f.x+g.x)/2,g.y)),h.Mg(c+1,new w((f.x+g.x)/2,f.y))),h.qd(c),h.qd(c-1),b.points=h,b.Wi(),b.updateAdornments()}else g=b.o(c+2),Math.abs(e.x-f.x)<this.Lg&&Math.abs(e.y-f.y)<this.Lg&&(Qg(this,d,e,f,g,!0)||Qg(this,d,e,f,g,!1))&&(h=b.points.copy(),Qg(this,d,e,f,g,!0)?(h.Mg(c-1,new w(d.x,(d.y+g.y)/2)),h.Mg(c+2,new w(g.x,(d.y+g.y)/2))):(h.Mg(c-1,new w((d.x+g.x)/2,d.y)),h.Mg(c+2,new w((d.x+g.x)/2,g.y))),h.qd(c+1),h.qd(c),b.points=h,b.Wi(),b.updateAdornments())}}else g=t.K(),F.dn(d.x,d.y,f.x,f.y,e.x,e.y,g)&&g.Zj(e)<this.Lg*this.Lg&&(h=b.points.copy(),h.qd(c),b.points=h,b.Wi(),b.updateAdornments()),t.B(g)}a.Oc(),this.gf=this.name,a.Ba("LinkReshaped",this.Ls)}this.stopTool()},t.g(Bg,"resegmentingDistance",Bg.prototype.Lg),t.defineProperty(Bg,{Lg:"resegmentingDistance"},function(){return this.ZC},function(a){t.i(a,"number",Bg,"resegmentingDistance"),this.ZC=a}),Bg.prototype.reshape=function(a){var b=this.Ls;b.zl();var c=this.handle.Cf,d=this.handle&&this.handle.Av?this.handle.Av:Jg;if(b.ic)if(c===b.gt+1)c=b.gt+1,d===Mg?(b.Y(c,b.o(c-1).x,a.y),b.Y(c+1,b.o(c+2).x,a.y)):d===Lg&&(b.Y(c,a.x,b.o(c-1).y),b.Y(c+1,a.x,b.o(c+2).y));else if(c===b.Ww-1)c=b.Ww-1,d===Mg?(b.Y(c-1,b.o(c-2).x,a.y),b.Y(c,b.o(c+1).x,a.y)):d===Lg&&(b.Y(c-1,a.x,b.o(c-2).y),b.Y(c,a.x,b.o(c+1).y));else{var d=c,e=b.o(d),f=b.o(d-1),g=b.o(d+1);F.I(f.x,e.x)&&F.I(e.y,g.y)?(F.I(f.x,b.o(d-2).x)&&!F.I(f.y,b.o(d-2).y)?(b.C(d,a.x,f.y),c++,d++):b.Y(d-1,a.x,f.y),F.I(g.y,b.o(d+2).y)&&!F.I(g.x,b.o(d+2).x)?b.C(d+1,g.x,a.y):b.Y(d+1,g.x,a.y)):F.I(f.y,e.y)&&F.I(e.x,g.x)?(F.I(f.y,b.o(d-2).y)&&!F.I(f.x,b.o(d-2).x)?(b.C(d,f.x,a.y),c++,d++):b.Y(d-1,f.x,a.y),F.I(g.x,b.o(d+2).x)&&!F.I(g.y,b.o(d+2).y)?b.C(d+1,a.x,g.y):b.Y(d+1,a.x,g.y)):F.I(f.x,e.x)&&F.I(e.x,g.x)?(F.I(f.x,b.o(d-2).x)&&!F.I(f.y,b.o(d-2).y)?(b.C(d,a.x,f.y),c++,d++):b.Y(d-1,a.x,f.y),F.I(g.x,b.o(d+2).x)&&!F.I(g.y,b.o(d+2).y)?b.C(d+1,a.x,g.y):b.Y(d+1,a.x,g.y)):F.I(f.y,e.y)&&F.I(e.y,g.y)&&(F.I(f.y,b.o(d-2).y)&&!F.I(f.x,b.o(d-2).x)?(b.C(d,f.x,a.y),c++,d++):b.Y(d-1,f.x,a.y),F.I(g.y,b.o(d+2).y)&&!F.I(g.x,b.o(d+2).x)?b.C(d+1,g.x,a.y):b.Y(d+1,g.x,a.y)),b.Y(c,a.x,a.y)}else b.Y(c,a.x,a.y),1===c&&b.computeSpot(!0).Ge()&&(e=b.aa,f=b.ud,null===e||e.La()||(e=e.findVisibleNode(),e!==b.aa&&(f=e.gl(""))),d=f.pb(Hb,t.K()),e=b.getLinkPointFromPoint(e,f,d,a,!0,t.K()),b.Y(0,e.x,e.y),t.B(d),t.B(e)),c===b.pa-2&&b.computeSpot(!1).Ge()&&(c=b.ca,e=b.fe,null===c||c.La()||(c=c.findVisibleNode(),c!==b.ca&&(e=c.gl(""))),d=e.pb(Hb,t.K()),e=b.getLinkPointFromPoint(c,e,d,a,!1,t.K()),b.Y(b.pa-1,e.x,e.y),t.B(d),t.B(e));b.Xi()},Bg.prototype.computeReshape=function(a){var b=this.Ls,c=this.handle.Cf;switch(this.handle&&this.handle.Av?this.handle.Av:Jg){case Ng:return a;case Mg:return b=b.o(c),new w(b.x,a.y);case Lg:return b=b.o(c),new w(a.x,b.y);default:case Jg:return b.o(c)}},t.g(Bg,"originalPoint",Bg.prototype.yJ),t.A(Bg,{yJ:"originalPoint"},function(){return this.TC}),t.g(Bg,"originalPoints",Bg.prototype.zJ),t.A(Bg,{zJ:"originalPoints"},function(){return this.mz}),t.ga("ResizingTool",Rg),t.Ka(Rg,ae),Rg.prototype.updateAdornments=function(a){if(!(null===a||a instanceof T)){if(a.eb&&!this.h.ab){var b=a.WF;if(null!==b&&a.canResize()&&a.oa.N()&&a.La()&&b.oa.N()&&b.pl()){var c=a.bp(this.name);if(null===c&&(c=this.makeAdornment(b)),null!==c){var d=b.hl();c.angle=d;var e=b.pb(c.bf,t.K()),f=b.ek();if(c.location=e,t.B(e),e=c.placeholder,null!==e){var b=b.Pa,g=t.Cl();g.p(b.width*f,b.height*f),e.Ca=g,t.ck(g)}return Sg(this,c,d),void a.Wk(this.name,c)}}}a.vl(this.name)}},Rg.prototype.makeAdornment=function(a){var b=null,b=a.S.UF;if(null===b){b=new Je,b.type=Tg,b.bf=Hb;var c=new Ug;c.fj=!0,b.add(c),b.add(this.makeHandle(a,Eb)),b.add(this.makeHandle(a,Gb)),b.add(this.makeHandle(a,Pb)),b.add(this.makeHandle(a,Lb)),b.add(this.makeHandle(a,Qb)),b.add(this.makeHandle(a,Wb)),b.add(this.makeHandle(a,Xb)),b.add(this.makeHandle(a,Vb))}else if(Le(b),b=b.copy(),!(b instanceof Je))return null;return b.Zc=this.name,b.pc=a,b},Rg.prototype.makeHandle=function(a,b){var c=this.it;return null===c?null:(c=c.copy(),c.alignment=b,c)},t.defineProperty(Rg,{it:"handleArchetype"},function(){return this.Fk},function(a){null!==a&&t.l(a,Q,Rg,"handleArchetype"),this.Fk=a}),t.A(Rg,{handle:"handle"},function(){return this.dc}),t.defineProperty(Rg,{pc:"adornedObject"},function(){return this.sb},function(a){null!==a&&t.l(a,Q,Rg,"adornedObject"),this.sb=a}),Rg.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.ab&&a.Oo&&a.R.left&&null!==this.findToolHandleAt(a.Nc.ea,this.name)?!0:!1},Rg.prototype.doActivate=function(){var a=this.h;null!==a&&(this.dc=this.findToolHandleAt(a.Nc.ea,this.name),null!==this.dc&&(this.sb=this.dc.S.pc,this.lz.set(this.sb.S.location),this.vv.set(this.sb.Ca),this.Oy=this.computeCellSize(),this.Qy=this.computeMinSize(),this.Py=this.computeMaxSize(),a.Kd=!0,this.MC=a.Ub.isEnabled,a.Ub.isEnabled=!1,this.uc(this.name),this.ia=!0))},Rg.prototype.doDeactivate=function(){var a=this.h;null!==a&&(this.hk(),this.sb=this.dc=null,this.ia=a.Kd=!1,a.Ub.isEnabled=this.MC)},Rg.prototype.doCancel=function(){this.sb.Ca=this.vv,this.sb.S.location=this.lz,this.stopTool()},Rg.prototype.doMouseMove=function(){var a=this.h;if(this.ia&&null!==a){var b=this.Qy,c=this.Py,d=this.Oy,e=this.sb.JE(a.R.ea,t.K()),f=Vg;this.sb instanceof V&&(f=Wg(this.sb)),b=this.computeResize(e,this.dc.alignment,b,c,d,!(f===Xg||f===Yg||a.R.shift)),this.resize(b),a.Uf(),t.B(e)}},Rg.prototype.doMouseUp=function(){var a=this.h;if(this.ia&&null!==a){var b=this.Qy,c=this.Py,d=this.Oy,e=this.sb.JE(a.R.ea,t.K()),f=Vg;this.sb instanceof V&&(f=Wg(this.sb)),b=this.computeResize(e,this.dc.alignment,b,c,d,!(f===Xg||f===Yg||a.R.shift)),this.resize(b),t.B(e),a.Oc(),this.gf=this.name,a.Ba("PartResized",this.sb,this.vv)}this.stopTool()},Rg.prototype.resize=function(a){if(null!==this.h){var b=this.pc,c=b.S,d=b.hl(),e=b.ek(),f=Math.PI*d/180,g=Math.cos(f),f=Math.sin(f),h=d>0&&180>d?1:0,i=d>90&&270>d?1:0,d=d>180&&360>d?1:0,j=a.width-b.Pa.width,k=a.height-b.Pa.height,l=c.position.copy();l.x+=e*((a.x+j*i)*g-(a.y+k*h)*f),l.y+=e*((a.x+j*d)*f+(a.y+k*i)*g),b.Ca=a.size,c.sf(),c.move(l)}},Rg.prototype.computeResize=function(a,b,c,d,e,f){b.Ge()&&(b=Hb);var g=this.pc.Pa,h=g.x,i=g.y,j=g.x+g.width,k=g.y+g.height,l=1;if(!f){var l=g.width,m=g.height;0>=l&&(l=1),0>=m&&(m=1),l=m/l}return m=t.K(),F.dt(a.x,a.y,h,i,e.width,e.height,m),a=g.copy(),0>=b.x?0>=b.y?(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=Math.max(j-a.x,c.width),a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=Math.max(k-a.y,c.height),f||(b=a.height/a.width,b>l?(a.height=l*a.width,a.y=k-a.height):(a.width=a.height/l,a.x=j-a.width))):1<=b.y?(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=Math.max(j-a.x,c.width),a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(b=a.height/a.width,b>l?a.height=l*a.width:(a.width=a.height/l,a.x=j-a.width))):(a.x=Math.max(m.x,j-d.width),a.x=Math.min(a.x,j-c.width),a.width=j-a.x,f||(a.height=l*a.width,a.y=i+.5*(k-i-a.height))):1<=b.x?0>=b.y?(a.width=Math.max(Math.min(m.x-h,d.width),c.width),a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=Math.max(k-a.y,c.height),f||(b=a.height/a.width,b>l?(a.height=l*a.width,a.y=k-a.height):a.width=a.height/l)):1<=b.y?(a.width=Math.max(Math.min(m.x-h,d.width),c.width),a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(b=a.height/a.width,b>l?a.height=l*a.width:a.width=a.height/l)):(a.width=Math.max(Math.min(m.x-h,d.width),c.width),f||(a.height=l*a.width,a.y=i+.5*(k-i-a.height))):0>=b.y?(a.y=Math.max(m.y,k-d.height),a.y=Math.min(a.y,k-c.height),a.height=k-a.y,f||(a.width=a.height/l,a.x=h+.5*(j-h-a.width))):1<=b.y&&(a.height=Math.max(Math.min(m.y-i,d.height),c.height),f||(a.width=a.height/l,a.x=h+.5*(j-h-a.width))),t.B(m),a},Rg.prototype.computeMinSize=function(){var a=this.pc.Vf.copy(),b=this.Vf;return!isNaN(b.width)&&b.width>a.width&&(a.width=b.width),!isNaN(b.height)&&b.height>a.height&&(a.height=b.height),a},Rg.prototype.computeMaxSize=function(){var a=this.pc.He.copy(),b=this.He;return!isNaN(b.width)&&b.width<a.width&&(a.width=b.width),!isNaN(b.height)&&b.height<a.height&&(a.height=b.height),a},Rg.prototype.computeCellSize=function(){var a=new fa(NaN,NaN),b=this.pc.S;if(b){var c=b.VF;!isNaN(c.width)&&0<c.width&&(a.width=c.width),!isNaN(c.height)&&0<c.height&&(a.height=c.height)}return c=this.al,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height),b=this.h,(isNaN(a.width)||isNaN(a.height))&&b&&(c=b.wb.Hd,null!==c&&c.qp&&(c=c.lA,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height)),b=b.lp,null!==b&&b.visible&&this.qp&&(c=b.ht,isNaN(a.width)&&!isNaN(c.width)&&0<c.width&&(a.width=c.width),isNaN(a.height)&&!isNaN(c.height)&&0<c.height&&(a.height=c.height))),(isNaN(a.width)||0===a.width||1/0===a.width)&&(a.width=1),(isNaN(a.height)||0===a.height||1/0===a.height)&&(a.height=1),a},t.g(Rg,"minSize",Rg.prototype.Vf),t.defineProperty(Rg,{Vf:"minSize"},function(){return this.Ej},function(a){if(t.l(a,fa,Rg,"minSize"),!this.Ej.M(a)){var b=a.width;isNaN(b)&&(b=0),a=a.height,isNaN(a)&&(a=0),this.Ej.p(b,a)}}),t.g(Rg,"maxSize",Rg.prototype.He),t.defineProperty(Rg,{He:"maxSize"},function(){return this.Dj},function(a){if(t.l(a,fa,Rg,"maxSize"),!this.Dj.M(a)){var b=a.width;isNaN(b)&&(b=1/0),a=a.height,isNaN(a)&&(a=1/0),this.Dj.p(b,a)}}),t.g(Rg,"cellSize",Rg.prototype.al),t.defineProperty(Rg,{al:"cellSize"},function(){return this.pj},function(a){t.l(a,fa,Rg,"cellSize"),this.pj.M(a)||this.pj.assign(a)}),t.g(Rg,"isGridSnapEnabled",Rg.prototype.qp),t.defineProperty(Rg,{qp:"isGridSnapEnabled"},function(){return this.Wq},function(a){t.i(a,"boolean",Rg,"isGridSnapEnabled"),this.Wq=a}),t.g(Rg,"originalDesiredSize",Rg.prototype.wJ),t.A(Rg,{wJ:"originalDesiredSize"},function(){return this.vv}),t.g(Rg,"originalLocation",Rg.prototype.xJ),t.A(Rg,{xJ:"originalLocation"},function(){return this.lz}),t.ga("RotatingTool",Zg),t.Ka(Zg,ae),Zg.prototype.updateAdornments=function(a){if(!(null===a||a instanceof T)){if(a.eb&&!this.h.ab){var b=a.aG;if(null!==b&&a.canRotate()&&a.oa.N()&&a.La()&&b.oa.N()&&b.pl()){var c=a.bp(this.name);if(null===c&&(c=this.makeAdornment(b)),null!==c){c.angle=b.hl();var d=null,e=null;b===a||b===a.kc?(d=a.kc,e=a.bf):(d=b,e=Hb);for(var f=d.Pa,e=t.mc(f.width*e.x+e.offsetX,f.height*e.y+e.offsetY);null!==d&&d!==b;)d.transform.Sa(e),d=d.ja;var d=e.y,f=Math.max(e.x-b.Pa.width,0),g=t.K();return c.location=b.pb(new H(1,0,50+f,d),g),t.B(g),t.B(e),void a.Wk(this.name,c)}}}a.vl(this.name)}},Zg.prototype.makeAdornment=function(a){var b=null,b=a.S.$F;if(null===b){b=new Je,b.type=$g,b.bf=Hb;var c=this.it;null!==c&&b.add(c.copy())}else if(Le(b),b=b.copy(),!(b instanceof Je))return null;return b.Zc=this.name,b.pc=a,b},t.defineProperty(Zg,{it:"handleArchetype"},function(){return this.Fk},function(a){null!==a&&t.l(a,Q,Zg,"handleArchetype"),this.Fk=a}),t.A(Zg,{handle:"handle"},function(){return this.dc}),t.defineProperty(Zg,{pc:"adornedObject"},function(){return this.sb},function(a){null!==a&&t.l(a,Q,Zg,"adornedObject"),this.sb=a}),Zg.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null!==a&&!a.ab&&a.Po&&a.R.left&&null!==this.findToolHandleAt(a.Nc.ea,this.name)?!0:!1},Zg.prototype.doActivate=function(){var a=this.h;if(null!==a&&(this.dc=this.findToolHandleAt(a.Nc.ea,this.name),null!==this.dc)){this.sb=this.dc.S.pc;var b=this.sb.S,c=b.kc;this.$C=this.sb===b||this.sb===c?c.pb(b.bf):this.sb.pb(Hb),this.uv=this.sb.angle,a.Kd=!0,a.ww=!0,this.uc(this.name),this.ia=!0}},Zg.prototype.doDeactivate=function(){var a=this.h;null!==a&&(this.hk(),this.sb=this.dc=null,this.ia=a.Kd=!1)},Zg.prototype.doCancel=function(){var a=this.h;a&&(a.ww=!1),this.rotate(this.uv),this.stopTool()},Zg.prototype.doMouseMove=function(){var a=this.h;this.ia&&null!==a&&(a=this.computeRotate(a.R.ea),this.rotate(a))},Zg.prototype.doMouseUp=function(){var a=this.h;if(this.ia&&null!==a){a.ww=!1;var b=this.computeRotate(a.R.ea);this.rotate(b),a.Oc(),this.gf=this.name,a.Ba("PartRotated",this.sb,this.uv)}this.stopTool()},Zg.prototype.rotate=function(a){e&&t.q(a,Zg,"rotate:newangle"),null!==this.sb&&(this.sb.angle=a)},Zg.prototype.computeRotate=function(a){a=this.$C.aj(a);var b=this.sb.ja;b&&(a-=b.hl(),a>=360?a-=360:0>a&&(a+=360));var b=Math.min(Math.abs(this.uG),180),c=Math.min(Math.abs(this.tG),b/2);return!this.h.R.shift&&b>0&&c>0&&(c>a%b?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b)),a>=360?a-=360:0>a&&(a+=360),a},t.g(Zg,"snapAngleMultiple",Zg.prototype.uG),t.defineProperty(Zg,{uG:"snapAngleMultiple"},function(){return this.eD},function(a){t.i(a,"number",Zg,"snapAngleMultiple"),this.eD=a}),t.g(Zg,"snapAngleEpsilon",Zg.prototype.tG),t.defineProperty(Zg,{tG:"snapAngleEpsilon"},function(){return this.dD},function(a){t.i(a,"number",Zg,"snapAngleEpsilon"),this.dD=a}),t.g(Zg,"originalAngle",Zg.prototype.vJ),t.A(Zg,{vJ:"originalAngle"},function(){return this.uv}),t.ga("ClickSelectingTool",ah),t.Ka(ah,ae),ah.prototype.canStart=function(){return!this.isEnabled||null===this.h||this.isBeyondDragSize()?!1:!0},ah.prototype.doMouseUp=function(){this.ia&&(this.standardMouseSelect(),this.standardMouseClick()),this.stopTool()},t.ga("ActionTool",bh),t.Ka(bh,ae),bh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a)return!1;var b=a.R,c=a.pe(b.ea,function(a){for(;null!==a.ja&&!a.Ow;)a=a.ja;return a},function(a){return a.Ow});return null!==c?(this.tn=c,a.Bn=a.pe(b.ea,null,null),!0):!1},bh.prototype.doMouseDown=function(){if(this.ia){var a=this.h.R,b=this.tn;null!==b&&(a.ce=b,null!==b.Fz&&b.Fz(a,b))}else this.canStart()&&this.doActivate()},bh.prototype.doMouseMove=function(){if(this.ia){var a=this.h.R,b=this.tn;null!==b&&(a.ce=b,null!==b.Gz&&b.Gz(a,b))}},bh.prototype.doMouseUp=function(){if(this.ia){var a=this.h,b=a.R,c=this.tn;if(null===c)return;b.ce=c,null!==c.Hz&&c.Hz(b,c),this.isBeyondDragSize()||$e(c,b,a)}this.stopTool()},bh.prototype.doCancel=function(){var a=this.h;if(null!==a){var a=a.R,b=this.tn;if(null===b)return;a.ce=b,null!==b.Ez&&b.Ez(a,b)}this.stopTool()},bh.prototype.doStop=function(){this.tn=null},t.ga("ClickCreatingTool",ra),t.Ka(ra,ae),ra.prototype.canStart=function(){if(!this.isEnabled||null===this.Os)return!1;var a=this.h;if(null===a||a.ab||a.Ze||!a.Bm||!a.R.left||this.isBeyondDragSize())return!1;if(this.bF){if(1===a.R.Ae&&(this.gC=a.R.Ke.copy()),2!==a.R.Ae||this.isBeyondDragSize(this.gC))return!1}else if(1!==a.R.Ae)return!1;return a.Ua!==this&&null!==a.et(a.R.ea,!0)?!1:!0},ra.prototype.doMouseUp=function(){var a=this.h;this.ia&&null!==a&&this.insertPart(a.R.ea),this.stopTool()},ra.prototype.insertPart=function(a){var b=this.h;if(null===b)return null;var c=this.Os;if(null===c)return null;this.uc(this.name);var d=null;return c instanceof C?c.Ld()&&(Le(c),d=c.copy(),d instanceof C&&b.add(d)):null!==c&&(c=b.ba.copyNodeData(c),t.qb(c)&&(b.ba.Am(c),d=b.fh(c))),d instanceof C&&(d.location=a,b.Pe&&b.select(d)),b.Oc(),this.gf=this.name,b.Ba("PartCreated",d),this.hk(),d instanceof C?d:null},t.g(ra,"archetypeNodeData",ra.prototype.Os),t.defineProperty(ra,{Os:"archetypeNodeData"},function(){return this.xk},function(a){null!==a&&t.l(a,Object,ra,"archetypeNodeData"),this.xk=a}),t.g(ra,"isDoubleClick",ra.prototype.bF),t.defineProperty(ra,{bF:"isDoubleClick"},function(){return this.qC},function(a){t.i(a,"boolean",ra,"isDoubleClick"),this.qC=a}),t.ga("ContextMenuTool",ch),t.Ka(ch,ae),ch.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null===a||this.isBeyondDragSize()||!a.R.right?!1:(null===this.Kn||a.R.event instanceof MouseEvent)&&null===this.findObjectWithContextMenu()?!1:!0},ch.prototype.doStart=function(){var a=this.h;null!==a&&this.GC.set(a.Nc.ea)},ch.prototype.doStop=function(){this.hideDefaultContextMenu(),this.hideContextMenu(),this.Cn=null},ch.prototype.findObjectWithContextMenu=function(a){var b=this.h;if(null===b)return null;var c=b.R,d=null,d=void 0!==a?a:b.pe(c.ea,null,function(a){return!a.layer.rc});if(null!==d){for(a=d;null!==a;){if(c=a.contextMenu,null!==c)return a;a=a.ja}if(null!==this.Kn&&!(b.R.event instanceof MouseEvent))return d.S}else if(c=b.contextMenu,null!==c)return b;return null},ch.prototype.doActivate=function(){},ch.prototype.doMouseDown=function(){if(this.ia){var a=this.h;if(null!==a&&null!==this.rf){var b=a.pe(a.R.ea,null,null);null!==b&&b.ej(this.rf)?(this.standardMouseClick(null,null),this.stopTool()):(this.stopTool(),a.Ua.doMouseDown())}}},ch.prototype.doMouseUp=function(){this.ia||this.canStart()&&Ze(this,!0)},ch.prototype.doMouseMove=function(){this.ia&&this.standardMouseOver()},ch.prototype.showContextMenu=function(a,b){t.l(a,Je,ch,"showContextMenu:contextmenu"),null!==b&&t.l(b,Q,ch,"showContextMenu:obj");var c=this.h;if(null!==c){if(a!==this.rf&&this.hideContextMenu(),a.af="Tool",a.wl=!1,a.scale=1/c.scale,a.Zc=this.name,c.add(a),null!==b){var c=null,d=b.ep();null!==d&&(c=d.data),a.pc=b,a.data=c}else a.data=c.ba;a.sf(),this.positionContextMenu(a,b),this.rf=a}},ch.prototype.positionContextMenu=function(a){var b=this.h;if(null!==b){var c=b.R.ea.copy(),d=a.Ga,e=b.xb;b.R.Uw&&(c.x-=d.width),c.x+d.width>e.right&&(c.x-=d.width+5),c.x<e.x&&(c.x=e.x),c.y+d.height>e.bottom&&(c.y-=d.height+5),c.y<e.y&&(c.y=e.y),a.position=c}},ch.prototype.hideContextMenu=function(){var a=this.h;null!==a&&null!==this.rf&&(this.rf.data=null,this.rf.pc=null,a.remove(this.rf),this.rf=null,this.standardMouseOver())},ch.prototype.initializeDefaultButtons=function(){if(null===this.h)return null;var a=new B,b=this.h.Se;return a.add({text:"Copy",eh:function(){b.copySelection()},visible:function(){return b.canCopySelection()}}),a.add({text:"Cut",eh:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}}),a.add({text:"Delete",eh:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}}),a.add({text:"Paste",eh:function(a){b.pasteSelection(a.R.ea)},visible:function(){return b.canPasteSelection()}}),a.add({text:"Select All",eh:function(){b.selectAll()},visible:function(){return b.canSelectAll()}}),a.add({text:"Undo",eh:function(){b.undo()},visible:function(){return b.canUndo()}}),a.add({text:"Redo",eh:function(){b.redo()},visible:function(){return b.canRedo()}}),a.add({text:"Zoom To Fit",eh:function(){b.zoomToFit()},visible:function(){return b.canZoomToFit()}}),a.add({text:"Reset Zoom",eh:function(){b.resetZoom()},visible:function(){return b.canResetZoom()}}),a.add({text:"Group Selection",eh:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}}),a.add({text:"Ungroup Selection",eh:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}}),a.add({text:"Edit Text",eh:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}}),a},ch.prototype.showDefaultContextMenu=function(){var a=this.h;if(null!==a){null===this.Ey&&(this.Ey=this.initializeDefaultButtons()),this.Kn!==this.rf&&this.hideContextMenu(),t.Us.innerHTML="",t.Ts.addEventListener("click",this.vD,!1);var b=this,c=document.createElement("ul");c.className="defaultCXul",t.Us.appendChild(c),c.innerHTML="";for(var d=this.Ey.k;d.next();){var e=d.value,f=e.text,g=e.visible;if("function"!=typeof g||g()){g=document.createElement("li"),g.className="defaultCXli";var h=document.createElement("a");h.className="defaultCXa",h.href="#",h.jH=e.eh,h.addEventListener("click",function(c){return this.jH(a),b.stopTool(),c.preventDefault(),!1},!1),h.textContent=f,g.appendChild(h),c.appendChild(g)}}t.Us.style.display="block",t.Ts.style.display="block",this.rf=this.Kn}},ch.prototype.hideDefaultContextMenu=function(){null!==this.rf&&this.rf===this.Kn&&(t.Us.style.display="none",t.Ts.style.display="none",t.Ts.removeEventListener("click",this.vD,!1),this.rf=null)},t.g(ch,"currentContextMenu",ch.prototype.rf),t.defineProperty(ch,{rf:"currentContextMenu"},function(){return this.PB},function(a){null!==a&&t.l(a,Je,ch,"currentContextMenu"),this.PB=a}),t.g(ch,"currentObject",ch.prototype.kI),t.defineProperty(ch,{kI:"currentObject"},function(){return this.Cn},function(a){null!==a&&t.l(a,Q,ch,"currentObject"),this.Cn=a}),t.A(ch,{HK:"mouseDownPoint"},function(){return this.GC}),t.ga("DragSelectingTool",dh),t.Ka(dh,ae),dh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;if(null===a||!a.Pe)return!1;var b=a.R;return!b.left||a.Ua!==this&&(!this.isBeyondDragSize()||b.timestamp-a.Nc.timestamp<this.vw||null!==a.et(b.ea,!0))?!1:!0},dh.prototype.doActivate=function(){var a=this.h;null!==a&&(this.ia=!0,a.Kd=!0,a.Wa=!0,a.add(this.vg),this.doMouseMove())},dh.prototype.doDeactivate=function(){var a=this.h;null!==a&&(a.remove(this.vg),a.Wa=!1,this.ia=a.Kd=!1)},dh.prototype.doMouseMove=function(){if(null!==this.h&&this.ia&&null!==this.vg){var a=this.computeBoxBounds(),b=this.vg.oe("SHAPE");null===b&&(b=this.vg.Dw()),b.Ca=a.size,this.vg.position=a.position}},dh.prototype.doMouseUp=function(){if(this.ia){var a=this.h;a.remove(this.vg);try{a.$b="wait",this.selectInRect(this.computeBoxBounds())}finally{a.$b=""}}this.stopTool()},dh.prototype.computeBoxBounds=function(){var a=this.h;return null===a?new x(0,0,0,0):new x(a.Nc.ea,a.R.ea)},dh.prototype.selectInRect=function(a){var b=this.h;if(null!==b){var c=b.R;if(b.Ba("ChangingSelection"),a=b.bk(a,null,function(a){return a instanceof C&&a.canSelect()},this.gF),t.Vm?c.Bp:c.control)if(c.shift)for(a=a.k;a.next();)c=a.value,c.eb&&(c.eb=!1);else for(a=a.k;a.next();)c=a.value,c.eb=!c.eb;else{if(!c.shift){for(var d=new B(C),e=b.selection.k;e.next();)c=e.value,a.contains(c)||d.add(c);for(d=d.k;d.next();)c=d.value,c.eb=!1}for(a=a.k;a.next();)c=a.value,c.eb||(c.eb=!0)}b.Ba("ChangedSelection")}},t.g(dh,"delay",dh.prototype.vw),t.defineProperty(dh,{vw:"delay"},function(){return this.Ln},function(a){t.i(a,"number",dh,"delay"),this.Ln=a}),t.g(dh,"isPartialInclusion",dh.prototype.gF),t.defineProperty(dh,{gF:"isPartialInclusion"},function(){return this.vC},function(a){t.i(a,"boolean",dh,"isPartialInclusion"),this.vC=a}),t.g(dh,"box",dh.prototype.vg),t.defineProperty(dh,{vg:"box"},function(){return this.Kl},function(a){null!==a&&t.l(a,C,dh,"box"),this.Kl=a}),t.ga("PanningTool",eh),t.Ka(eh,ae),eh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null===a||!a.of&&!a.pf||!a.R.left||a.Ua!==this&&!this.isBeyondDragSize()?!1:!0},eh.prototype.doActivate=function(){var a=this.h;null!==a&&(this.oj?(a.R.bubbles=!0,document.addEventListener("scroll",this.jD,!1)):(a.$b="move",a.Kd=!0,this.nz=a.position.copy()),this.ia=!0)},eh.prototype.doDeactivate=function(){var a=this.h;null!==a&&(a.$b="",this.ia=a.Kd=!1)},eh.prototype.doCancel=function(){var a=this.h;null!==a&&(a.position=this.nz,a.Kd=!1),this.stopTool()},eh.prototype.doMouseMove=function(){this.move()},eh.prototype.doMouseUp=function(){this.move(),this.stopTool()},eh.prototype.move=function(){var a=this.h;if(this.ia&&a)if(this.oj)a.R.bubbles=!0;else{var b=a.position,c=a.Nc.ea,d=a.R.ea,e=b.x+c.x-d.x,c=b.y+c.y-d.y;a.of||(e=b.x),a.pf||(c=b.y),a.position=new w(e,c)}},t.g(eh,"bubbles",eh.prototype.bubbles),t.defineProperty(eh,{bubbles:"bubbles"},function(){return this.oj},function(a){t.i(a,"boolean",eh,"bubbles"),this.oj=a}),t.g(eh,"originalPosition",eh.prototype.AJ),t.A(eh,{AJ:"originalPosition"},function(){return this.nz}),t.ga("TextEditingTool",fh),t.Ka(fh,ae);var xh;fh.LostFocus=xh=t.w(fh,"LostFocus",0);var yh;fh.MouseDown=yh=t.w(fh,"MouseDown",1);var kh;fh.Tab=kh=t.w(fh,"Tab",2);var jh;fh.Enter=jh=t.w(fh,"Enter",3),fh.SingleClick=t.w(fh,"SingleClick",0);
var gh;fh.SingleClickSelected=gh=t.w(fh,"SingleClickSelected",1);var hh=t.w(fh,"StateNone",0),lh=t.w(fh,"StateActive",1),mh=t.w(fh,"StateEditing",2),wh=t.w(fh,"StateEditing2",3),zh=t.w(fh,"StateValidating",4),nh=t.w(fh,"StateValidated",5);t.g(fh,"textBlock",fh.prototype.Ng),t.defineProperty(fh,{Ng:"textBlock"},function(){return this.Az},function(a){null!==a&&t.l(a,na,fh,"textBlock"),this.Az=a}),t.g(fh,"currentTextEditor",fh.prototype.Pf),t.defineProperty(fh,{Pf:"currentTextEditor"},function(){return this.SB},function(a){this.SB=a}),t.g(fh,"defaultTextEditor",fh.prototype.nE),t.defineProperty(fh,{nE:"defaultTextEditor"},function(){return this.XB},function(a){this.XB=a}),t.g(fh,"starting",fh.prototype.vG),t.defineProperty(fh,{vG:"starting"},function(){return this.iD},function(a){t.Aa(a,fh,fh,"starting"),this.iD=a}),fh.prototype.canStart=function(){if(!this.isEnabled)return!1;var a=this.h;return null===a||a.ab||!a.R.left||this.isBeyondDragSize()?!1:(a=a.pe(a.R.ea,null,function(a){return a instanceof na}),a instanceof na&&a.yw&&a.S.canEdit()?(a=a.S,null===a||this.vG===gh&&!a.eb?!1:!0):!1)},fh.prototype.doStart=function(){this.ia||null===this.Ng||this.doActivate()},fh.prototype.doActivate=function(){if(!this.ia){var a=this.h;if(null!==a){var b=this.Ng;if(null===b&&(b=a.pe(a.R.ea,function(a){return a instanceof na?a:null}),b=b instanceof na?b:null),null!==b&&(this.Ng=b,null!==b.S)){this.ia=!0,this.Ya=lh;var c=this.nE,d=!1;if(null!==b.hB&&(c=b.hB),null===c||c.CB||(d=!0),this.nD=this.Ng.copy(),c.CB){var e=b.pb(Hb),f=a.position,g=a.scale,h=b.ek()*g;this.Xy=b.Pa.width;var i=this.Xy*h;Ah(b);var j=(e.x-f.x)*g,e=(e.y-f.y)*g;c.value=b.text,a.$j.style.font=b.font,c.style.font="inherit",c.style.fontSize=100*h+"%",c.style.lineHeight="normal",i=20+i,c.style.width=i+"px",c.style.height="",c.rows=b.nF,a.$j.appendChild(c),c.style.left=(j-i/2|0)+"px",c.style.top=(e-c.clientHeight/2|0)+"px",c.style.textAlign=b.textAlign}else a.$j.appendChild(c);c.style.position="absolute",c.style.zIndex=100,c.className="start",c.textEditingTool=this,c.SK=h,d&&void 0!==c.onActivate&&c.onActivate(),this.Pf=c,"function"==typeof c.focus&&c.focus(),"function"==typeof c.select&&c.select()}}}},fh.prototype.doCancel=function(){null!==this.Pk&&(this.Pf.style.border=this.Pk,this.Pk=null),this.stopTool()},fh.prototype.doMouseUp=function(){!this.ia&&this.canStart()&&this.doActivate()},fh.prototype.doMouseDown=function(){this.ia&&this.acceptText(yh)},fh.prototype.acceptText=function(a){switch(a){case yh:this.Ya===nh||this.Ya===wh?"function"==typeof this.Pf.focus&&this.Pf.focus():(this.Ya===lh||this.Ya===mh)&&(this.Ya=zh,Bh(this));break;case xh:case jh:case kh:if(jh===a&&!0===this.Az.Tw)break;(this.Ya===lh||this.Ya===mh)&&(this.Ya=zh,Bh(this))}},fh.prototype.doDeactivate=function(){var a=this.h;if(null!==a){if(this.Ya=hh,this.Ng=null,null!==this.Pf){var b=this.Pf;void 0!==b.onDeactivate&&b.onDeactivate(),null!==b&&a.$j.removeChild(b)}this.ia=!1}},fh.prototype.isValidText=function(a,b,c){t.l(a,na,fh,"isValidText:textblock");var d=this.Xt;return null===d||d(a,b,c)?(d=a.Xt,null===d||d(a,b,c)?!0:!1):!1},t.g(fh,"textValidation",fh.prototype.Xt),t.defineProperty(fh,{Xt:"textValidation"},function(){return this.Tk},function(a){null!==a&&t.i(a,"function",fh,"textValidation"),this.Tk=a}),t.ga("ToolManager",He),t.Ka(He,ae);var bf;He.WheelScroll=bf=t.w(He,"WheelScroll",0);var af;He.WheelZoom=af=t.w(He,"WheelZoom",1),He.WheelNone=t.w(He,"WheelNone",2),t.g(He,"mouseWheelBehavior",He.prototype.cn),t.defineProperty(He,{cn:"mouseWheelBehavior"},function(){return this.KC},function(a){t.Aa(a,He,He,"mouseWheelBehavior"),this.KC=a}),He.prototype.initializeStandardTools=function(){this.ED=new bh,this.SA=new hf,this.qF=new Bg,this.YF=new Rg,this.cG=new Zg,this.zA=new qa,this.Hd=new cf,this.tE=new dh,this.JF=new eh,this.pw=new ch,this.Bx=new fh,this.VD=new ra,this.WD=new ah},He.prototype.doMouseDown=function(){var a=this.h;if(null!==a){var b=a.la;b.Tz&&0!==b.Je&&t.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.ef.length,c=0;b>c;c++){var d=this.ef.wa(c);if(null===d.h&&d.yd(this.h),d.canStart())return a.Ua=d,void(a.Ua===d&&(d.ia||d.doActivate(),d.doMouseDown()))}1===a.R.button&&(this.cn===bf?this.cn=af:this.cn===af&&(this.cn=bf)),this.doActivate(),this.standardWaitAfter(this.mA)}},He.prototype.doMouseMove=function(){var a=this.h;if(null!==a){if(this.ia)for(var b=this.Dg.length,c=0;b>c;c++){var d=this.Dg.wa(c);if(null===d.h&&d.yd(this.h),d.canStart())return a.Ua=d,void(a.Ua===d&&(d.ia||d.doActivate(),d.doMouseMove()))}this.standardMouseOver(),this.isBeyondDragSize()&&this.standardWaitAfter(this.ia?this.mA:this.TE)}},He.prototype.doCurrentObjectChanged=function(a,b){var c=this.el;null===c||null!==b&&(b===c||b.ej(c))||this.hideToolTip()},He.prototype.doWaitAfter=function(){this.h&&this.h.gb&&(this.doMouseHover(),this.ia||this.doToolTip())},He.prototype.doMouseHover=function(){var a=this.h;if(null!==a){var b=a.R;null===b.ce&&(b.ce=a.pe(b.ea,null,null));var c=b.ce;if(null!==c)for(;null!==c&&(a=this.ia?c.xt:c.yt,null===a||(a(b,c),!b.Ee));)c=c.ja;else a=this.ia?a.xt:a.yt,null!==a&&a(b)}},He.prototype.doToolTip=function(){var a=this.h;if(null!==a){var b=a.R;if(null===b.ce&&(b.ce=a.pe(b.ea,null,null)),b=b.ce,null!==b){if(b!==this.el&&!b.ej(this.el)){for(;null!==b;){if(a=b.Yt,null!==a)return void this.showToolTip(a,b);b=b.ja}this.hideToolTip()}}else a=a.Yt,null!==a?this.showToolTip(a,null):this.hideToolTip()}},He.prototype.showToolTip=function(a,b){t.l(a,Je,He,"showToolTip:tooltip"),null!==b&&t.l(b,Q,He,"showToolTip:obj");var c=this.h;if(null!==c){if(a!==this.el&&this.hideToolTip(),a.af="Tool",a.wl=!1,a.scale=1/c.scale,c.add(a),null!==b&&b!==this.Au){var c=null,d=b.ep();null!==d&&(c=d.data),a.pc=b,a.data=c}else null===b&&(a.data=c.ba);(null===b||b!==this.Au)&&(a.sf(),this.positionToolTip(a,b)),this.Cy=a,this.Au=b}},He.prototype.positionToolTip=function(a){var b=this.h;if(null!==b){var c=b.R.ea.copy(),d=a.Ga,e=b.xb;b.R.Uw&&(c.x-=d.width),c.x+d.width>e.right&&(c.x-=d.width+5),c.x<e.x&&(c.x=e.x),c.y=c.y+20+d.height>e.bottom?c.y-(d.height+5):c.y+20,c.y<e.y&&(c.y=e.y),a.position=c}},He.prototype.hideToolTip=function(){if(null!==this.el){var a=this.h;null!==a&&(this.el.data=null,this.el.pc=null,a.remove(this.el),this.Au=this.Cy=null)}},t.A(He,{el:"currentToolTip"},function(){return this.Cy}),He.prototype.doMouseUp=function(){if(this.cancelWaitAfter(),this.ia){var a=this.h;if(null===a)return;for(var b=this.Eg.length,c=0;b>c;c++){var d=this.Eg.wa(c);if(null===d.h&&d.yd(this.h),d.canStart())return a.Ua=d,void(a.Ua===d&&(d.ia||d.doActivate(),d.doMouseUp()))}}this.doDeactivate()},He.prototype.doMouseWheel=function(){this.standardMouseWheel()},He.prototype.doKeyDown=function(){var a=this.h;null!==a&&a.Se.doKeyDown()},He.prototype.doKeyUp=function(){var a=this.h;null!==a&&a.Se.doKeyUp()},He.prototype.doCancel=function(){null!==ff&&ff.doCancel(),ae.prototype.doCancel.call(this)},He.prototype.findTool=function(a){t.i(a,"string",He,"findTool:name");for(var b=this.ef.length,c=0;b>c;c++){var d=this.ef.wa(c);if(d.name===a)return d}for(b=this.Dg.length,c=0;b>c;c++)if(d=this.Dg.wa(c),d.name===a)return d;for(b=this.Eg.length,c=0;b>c;c++)if(d=this.Eg.wa(c),d.name===a)return d;return null},He.prototype.replaceTool=function(a,b){t.i(a,"string",He,"replaceTool:name"),null!==b&&(t.l(b,ae,He,"replaceTool:newtool"),b.h&&b.h!==this.h&&t.m("Cannot share tools between Diagrams: "+b.toString()),b.yd(this.h));for(var c=this.ef.length,d=0;c>d;d++){var e=this.ef.wa(d);if(e.name===a)return null!==b?this.ef.Mg(d,b):this.ef.qd(d),e}for(c=this.Dg.length,d=0;c>d;d++)if(e=this.Dg.wa(d),e.name===a)return null!==b?this.Dg.Mg(d,b):this.Dg.qd(d),e;for(c=this.Eg.length,d=0;c>d;d++)if(e=this.Eg.wa(d),e.name===a)return null!==b?this.Eg.Mg(d,b):this.Eg.qd(d),e;return null},t.A(He,{ef:"mouseDownTools"},function(){return this.HC}),t.A(He,{Dg:"mouseMoveTools"},function(){return this.IC}),t.A(He,{Eg:"mouseUpTools"},function(){return this.JC}),t.g(He,"hoverDelay",He.prototype.TE),t.defineProperty(He,{TE:"hoverDelay"},function(){return this.kC},function(a){t.i(a,"number",He,"hoverDelay"),this.kC=a}),t.g(He,"holdDelay",He.prototype.mA),t.defineProperty(He,{mA:"holdDelay"},function(){return this.jC},function(a){t.i(a,"number",He,"holdDelay"),this.jC=a}),t.g(He,"dragSize",He.prototype.uE),t.defineProperty(He,{uE:"dragSize"},function(){return this.ZB},function(a){t.l(a,fa,He,"dragSize"),this.ZB=a.Z()}),t.g(He,"actionTool",He.prototype.ED),t.defineProperty(He,{ED:"actionTool"},function(){return this.findTool("Action")},function(a){Ch(this,"Action",a,this.ef)}),t.g(He,"relinkingTool",He.prototype.SA),t.defineProperty(He,{SA:"relinkingTool"},function(){return this.findTool("Relinking")},function(a){Ch(this,"Relinking",a,this.ef)}),t.g(He,"linkReshapingTool",He.prototype.qF),t.defineProperty(He,{qF:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(a){Ch(this,"LinkReshaping",a,this.ef)}),t.g(He,"resizingTool",He.prototype.YF),t.defineProperty(He,{YF:"resizingTool"},function(){return this.findTool("Resizing")},function(a){Ch(this,"Resizing",a,this.ef)}),t.g(He,"rotatingTool",He.prototype.cG),t.defineProperty(He,{cG:"rotatingTool"},function(){return this.findTool("Rotating")},function(a){Ch(this,"Rotating",a,this.ef)}),t.g(He,"linkingTool",He.prototype.zA),t.defineProperty(He,{zA:"linkingTool"},function(){return this.findTool("Linking")},function(a){Ch(this,"Linking",a,this.Dg)}),t.g(He,"draggingTool",He.prototype.Hd),t.defineProperty(He,{Hd:"draggingTool"},function(){return this.findTool("Dragging")},function(a){Ch(this,"Dragging",a,this.Dg)}),t.g(He,"dragSelectingTool",He.prototype.tE),t.defineProperty(He,{tE:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(a){Ch(this,"DragSelecting",a,this.Dg)}),t.g(He,"panningTool",He.prototype.JF),t.defineProperty(He,{JF:"panningTool"},function(){return this.findTool("Panning")},function(a){Ch(this,"Panning",a,this.Dg)}),t.g(He,"contextMenuTool",He.prototype.pw),t.defineProperty(He,{pw:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(a){Ch(this,"ContextMenu",a,this.Eg)}),t.g(He,"textEditingTool",He.prototype.Bx),t.defineProperty(He,{Bx:"textEditingTool"},function(){return this.findTool("TextEditing")},function(a){Ch(this,"TextEditing",a,this.Eg)}),t.g(He,"clickCreatingTool",He.prototype.VD),t.defineProperty(He,{VD:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(a){Ch(this,"ClickCreating",a,this.Eg)}),t.g(He,"clickSelectingTool",He.prototype.WD),t.defineProperty(He,{WD:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(a){Ch(this,"ClickSelecting",a,this.Eg)}),Be.prototype.prepareAnimation=Be.prototype.ul=function(){this.Le&&(this.wj&&this.Al(),this.sd=!0,this.FB=!1)};var Mh={opacity:function(a,b,c,d,e,f){a.opacity=d(e,b,c-b,f)},position:function(a,b,c,d,e,f){e!==f?a.oG(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f)):a.position=new w(d(e,b.x,c.x-b.x,f),d(e,b.y,c.y-b.y,f))},scale:function(a,b,c,d,e,f){a.scale=d(e,b,c-b,f)},visible:function(a,b,c,d,e,f){a.visible=e!==f?b:c}};Be.prototype.stopAnimation=Be.prototype.Al=function(){!0===this.sd&&(this.sd=!1,this.FB&&this.U.te()),this.wj&&this.Le&&(Ih(this),Jh(this,this.U,this.kH,this.QB,this.Ay,this.Ay,null!==this.Tl&&null!==this.Sl),Kh(this),Lh(this))},t.g(Be,"isEnabled",Be.prototype.isEnabled),t.defineProperty(Be,{isEnabled:"isEnabled"},function(){return this.Le},function(a){t.i(a,"boolean",Be,"isEnabled"),this.Le=a}),t.g(Be,"duration",Be.prototype.duration),t.defineProperty(Be,{duration:"duration"},function(){return this.Ly},function(a){t.i(a,"number",Be,"duration"),1>a&&t.ka(a,">= 1",Be,"duration"),this.Ly=a}),t.A(Be,{yg:"isAnimating"},function(){return this.wj}),t.A(Be,{AK:"isTicking"},function(){return this.cr}),t.ga("Layer",$d),$d.prototype.yd=function(a){this.U=a},$d.prototype.toString=function(a){void 0===a&&(a=0);var b='Layer "'+this.name+'"';if(0>=a)return b;for(var c=0,d=0,e=0,f=0,g=0,h=this.zb.k;h.next();){var i=h.value;i instanceof S?e++:i instanceof R?d++:i instanceof T?f++:i instanceof Je?g++:c++}if(h="",c>0&&(h+=c+" Parts "),d>0&&(h+=d+" Nodes "),e>0&&(h+=e+" Groups "),f>0&&(h+=f+" Links "),g>0&&(h+=g+" Adornments "),a>1)for(c=this.zb.k;c.next();)d=c.value,h+="\n    "+d.toString(a-1),(e=d.data)&&t.od(e)&&(h+=" #"+t.od(e)),d instanceof R?h+=" "+yd(e):d instanceof T&&(h+=" "+yd(d.aa)+" "+yd(d.ca));return b+" "+this.zb.count+": "+h},$d.prototype.findObjectAt=$d.prototype.pe=function(a,b,c){if(void 0===b&&(b=null),void 0===c&&(c=null),!1===this.Rk)return null;e&&!a.N()&&t.m("findObjectAt: Point must have a real value.");var d=this.zb,f=!1;this.h.xb.Fa(a)&&(f=!0);for(var g=t.K(),h=d.length;h--;){var i=d.wa(h);if((!0!==f||!1!==Ph(i))&&i.La()&&(g.assign(a),Qa(g,i.me),i=i.pe(g,b,c),null!==i&&(null!==b&&(i=b(i)),i&&(null===c||c(i)))))return t.B(g),i}return t.B(g),null},$d.prototype.findObjectsAt=$d.prototype.cp=function(a,b,c,d){if(void 0===b&&(b=null),void 0===c&&(c=null),d instanceof B||d instanceof ma||(d=new ma(Q)),!1===this.Rk)return d;e&&!a.N()&&t.m("findObjectsAt: Point must have a real value.");var f=this.zb,g=!1;this.h.xb.Fa(a)&&(g=!0);for(var h=t.K(),i=f.length;i--;){var j=f.wa(i);!0===g&&!1===Ph(j)||!j.La()||(h.assign(a),Qa(h,j.me),j.cp(h,b,c,d)&&(null!==b&&(j=b(j)),j&&(null===c||c(j))&&d.add(j)))}return t.B(h),d},$d.prototype.findObjectsIn=$d.prototype.bk=function(a,b,c,d,f){if(void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=!1),f instanceof B||f instanceof ma||(f=new ma(Q)),!1===this.Rk)return f;e&&!a.N()&&t.m("findObjectsIn: Rect must have a real value.");var g=this.zb,h=!1;this.h.xb.Vj(a)&&(h=!0);for(var i=g.length,g=g.n;i--;){var j=g[i];(!0!==h||!1!==Ph(j))&&j.La()&&j.bk(a,b,c,d,f)&&(null!==b&&(j=b(j)),j&&(null===c||c(j))&&f.add(j))}return f},$d.prototype.cA=function(a,b,c,d,e,f,g){if(!1===this.Rk)return e;for(var h=this.zb,i=h.length,h=h.n;i--;){var j=h[i];(!0!==g||!1!==Ph(j))&&f(j)&&j.La()&&j.bk(a,b,c,d,e)&&(null!==b&&(j=b(j)),j&&(null===c||c(j))&&e.add(j))}return e},$d.prototype.findObjectsNear=$d.prototype.Qm=function(a,b,c,d,f,g){if(void 0===c&&(c=null),void 0===d&&(d=null),void 0===f&&(f=!0),!1!==f&&!0!==f&&((f instanceof B||f instanceof ma)&&(g=f),f=!0),g instanceof B||g instanceof ma||(g=new ma(Q)),!1===this.Rk)return g;e&&!a.N()&&t.m("findObjectsNear: Point must have a real value.");var h=this.zb,i=!1;this.h.xb.Fa(a)&&(i=!0);for(var j=t.K(),k=t.K(),l=h.length;l--;){var m=h.n[l];!0===i&&!1===Ph(m)||!m.La()||(j.assign(a),Qa(j,m.me),k.p(a.x+b,a.y),Qa(k,m.me),m.Qm(j,k,c,d,f,g)&&(null!==c&&(m=c(m)),m&&(null===d||d(m))&&g.add(m)))}return t.B(j),t.B(k),g},aa=$d.prototype,aa.Df=function(a,b){if(this.visible){var c,d=this.zb;c=b?b:a.xb;for(var e=d.length,f=0;e>f;f++){var g=d.n[f];if(g.BC=f,!(g instanceof T&&!1===g.rg||g instanceof Je&&null!==g.Wh))if(eb(g.oa,c))for(g.Df(!0),Qh(g),g=g.cw;g.next();){var h=g.value;ih(h,1/0,1/0),h.Lc(),h.Df(!0)}else g.Df(!1),null!==g.cw&&0<g.cw.count&&Qh(g)}}},aa.Ue=function(a,b,c,d){if(this.visible&&(void 0===d&&(d=!0),d||!this.rc)){1!==this.Lf&&(a.globalAlpha=this.Lf),c=this.zb,d=this.wv,d.length=0;for(var e=b.scale,f=c.length,g=0;f>g;g++){var h=c.n[g];if(Ph(h)){if(h instanceof T&&(h.ic&&d.push(h),!1===h.rg))continue;var i=h.oa;1<i.width*e||1<i.height*e?h.Ue(a,b):Rh(h,a)}}a.globalAlpha=1}},aa.j=function(a,b,c,d,e){var f=this.h;null!==f&&f.Ic(vd,a,this,b,c,d,e)},aa.np=function(a,b,c){var d=this.zb;if(b.lo=this,a>=d.count)a=d.count;else if(d.wa(a)===b)return-1;return d.Jd(a,b),b.lt(c),d=this.h,null!==d&&(c?d.fa():d.np(b)),b instanceof S&&this.xx(b),a},aa.Xe=function(a,b,c){var d=this.zb;if(0>a||a>=d.length){if(a=d.indexOf(b),0>a)return-1}else if(d.wa(a)!==b&&(a=d.indexOf(b),0>a))return-1;return b.mt(c),d.qd(a),d=this.h,null!==d&&(c?d.fa():d.Xe(b)),b.lo=null,a},aa.xx=function(a){for(;null!==a;){if(a.layer===this){var b=a;if(b.Rc.next()){for(var c=-1,d=-1,e=this.zb.n,f=e.length,g=0;f>g;g++){var h=e[g];if(h===b&&(c=g,d>=0))break;if(0>d&&h.hb===b&&(d=g,c>=0))break}!(0>d)&&c>d&&(e=this.zb,e.qd(c),e.Jd(d,b))}}a=a.hb}},aa.clear=function(){for(var a=this.zb.Ie(),b=a.length,c=0;b>c;c++)a[c].Df(!1),this.Xe(-1,a[c],!1)},t.A($d,{sl:"parts"},function(){return this.zb.k}),t.A($d,{NK:"partsBackwards"},function(){return this.zb.Xm}),t.A($d,{h:"diagram"},function(){return this.U}),t.g($d,"name",$d.prototype.name),t.defineProperty($d,{name:"name"},function(){return this.Zb},function(a){t.i(a,"string",$d,"name");var b=this.Zb;if(b!==a){var c=this.h;if(null!==c)for(""===b&&t.m("Cannot rename default Layer to: "+a),c=c.Yw;c.next();)c.value.name===a&&t.m("Layer.name is already present in this diagram: "+a);for(this.Zb=a,this.j("name",b,a),a=this.zb.k;a.next();)a.value.af=this.Zb}}),t.g($d,"opacity",$d.prototype.opacity),t.defineProperty($d,{opacity:"opacity"},function(){return this.Lf},function(a){var b=this.Lf;b!==a&&(t.i(a,"number",$d,"opacity"),(0>a||a>1)&&t.ka(a,"0 <= val <= 1",$d,"opacity"),this.Lf=a,this.j("opacity",b,a),a=this.h,null!==a&&a.fa())}),t.g($d,"isTemporary",$d.prototype.rc),t.defineProperty($d,{rc:"isTemporary"},function(){return this.bz},function(a){var b=this.bz;b!==a&&(t.i(a,"boolean",$d,"isTemporary"),this.bz=a,this.j("isTemporary",b,a))}),t.g($d,"visible",$d.prototype.visible),t.defineProperty($d,{visible:"visible"},function(){return this.Dz},function(a){var b=this.Dz;if(b!==a){for(t.i(a,"boolean",$d,"visible"),this.Dz=a,this.j("visible",b,a),b=this.zb.k;b.next();)b.value.df(a);a=this.h,null!==a&&a.fa()}}),t.g($d,"pickable",$d.prototype.Bf),t.defineProperty($d,{Bf:"pickable"},function(){return this.Rk},function(a){var b=this.Rk;b!==a&&(t.i(a,"boolean",$d,"pickable"),this.Rk=a,this.j("pickable",b,a))}),t.g($d,"isBoundsIncluded",$d.prototype.pA),t.defineProperty($d,{pA:"isBoundsIncluded"},function(){return this.Zy},function(a){this.Zy!==a&&(this.Zy=a,null!==this.h&&this.h.Oc())}),t.g($d,"allowCopy",$d.prototype.Si),t.defineProperty($d,{Si:"allowCopy"},function(){return this.lk},function(a){var b=this.lk;b!==a&&(t.i(a,"boolean",$d,"allowCopy"),this.lk=a,this.j("allowCopy",b,a))}),t.g($d,"allowDelete",$d.prototype.Zk),t.defineProperty($d,{Zk:"allowDelete"},function(){return this.mk},function(a){var b=this.mk;b!==a&&(t.i(a,"boolean",$d,"allowDelete"),this.mk=a,this.j("allowDelete",b,a))}),t.g($d,"allowTextEdit",$d.prototype.Qo),t.defineProperty($d,{Qo:"allowTextEdit"},function(){return this.vk},function(a){var b=this.vk;b!==a&&(t.i(a,"boolean",$d,"allowTextEdit"),this.vk=a,this.j("allowTextEdit",b,a))}),t.g($d,"allowGroup",$d.prototype.Mo),t.defineProperty($d,{Mo:"allowGroup"},function(){return this.nk},function(a){var b=this.nk;b!==a&&(t.i(a,"boolean",$d,"allowGroup"),this.nk=a,this.j("allowGroup",b,a))}),t.g($d,"allowUngroup",$d.prototype.Ro),t.defineProperty($d,{Ro:"allowUngroup"},function(){return this.wk},function(a){var b=this.wk;b!==a&&(t.i(a,"boolean",$d,"allowUngroup"),this.wk=a,this.j("allowUngroup",b,a))}),t.g($d,"allowLink",$d.prototype.Cm),t.defineProperty($d,{Cm:"allowLink"},function(){return this.ok},function(a){var b=this.ok;b!==a&&(t.i(a,"boolean",$d,"allowLink"),this.ok=a,this.j("allowLink",b,a))}),t.g($d,"allowRelink",$d.prototype.Sj),t.defineProperty($d,{Sj:"allowRelink"},function(){return this.qk},function(a){var b=this.qk;b!==a&&(t.i(a,"boolean",$d,"allowRelink"),this.qk=a,this.j("allowRelink",b,a))}),t.g($d,"allowMove",$d.prototype.Rj),t.defineProperty($d,{Rj:"allowMove"},function(){return this.pk},function(a){var b=this.pk;b!==a&&(t.i(a,"boolean",$d,"allowMove"),this.pk=a,this.j("allowMove",b,a))}),t.g($d,"allowReshape",$d.prototype.No),t.defineProperty($d,{No:"allowReshape"},function(){return this.rk},function(a){var b=this.rk;b!==a&&(t.i(a,"boolean",$d,"allowReshape"),this.rk=a,this.j("allowReshape",b,a))}),t.g($d,"allowResize",$d.prototype.Oo),t.defineProperty($d,{Oo:"allowResize"},function(){return this.sk},function(a){var b=this.sk;b!==a&&(t.i(a,"boolean",$d,"allowResize"),this.sk=a,this.j("allowResize",b,a))}),t.g($d,"allowRotate",$d.prototype.Po),t.defineProperty($d,{Po:"allowRotate"},function(){return this.tk},function(a){var b=this.tk;b!==a&&(t.i(a,"boolean",$d,"allowRotate"),this.tk=a,this.j("allowRotate",b,a))}),t.g($d,"allowSelect",$d.prototype.Pe),t.defineProperty($d,{Pe:"allowSelect"},function(){return this.uk},function(a){var b=this.uk;b!==a&&(t.i(a,"boolean",$d,"allowSelect"),this.uk=a,this.j("allowSelect",b,a))}),t.ga("Diagram",z),z.prototype.toString=function(a){void 0===a&&(a=0);var b="";if(this.id&&(b=this.id),this.$j&&this.$j.id&&(b=this.$j.id),b='Diagram "'+b+'"',0>=a)return b;for(var c=this.Rb.k;c.next();)b+="\n  "+c.value.toString(a-1);return b},z.prototype.checkProperties=function(){return t.bI(this)},z.fromDiv=function(a){var b=a;return"string"==typeof a&&(b=document.getElementById(a)),b instanceof HTMLDivElement&&b.U instanceof z?b.U:null},t.g(z,"div",z.prototype.$j),t.defineProperty(z,{$j:"div"},function(){return this.Nb},function(a){if(null!==a&&t.l(a,HTMLDivElement,z,"div"),this.Nb!==a){t.$z=[];var b=this.Nb;if(null!==b){if(b.U=void 0,b.innerHTML="",null!==this.gb&&(this.gb.U=null,this.gb.removeEventListener("touchstart",this.FG,!1),this.gb.removeEventListener("touchmove",this.EG,!1),this.gb.removeEventListener("touchend",this.DG,!1)),b=this.Uv,null!==b){for(var c=b.HC.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter();for(c=b.IC.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter();for(c=b.JC.n,d=c.length,e=0;d>e;e++)c[e].cancelWaitAfter()}b.cancelWaitAfter(),this.Ua.doCancel(),this.Sg=this.gb=null,window.removeEventListener("resize",this.YG,!1),window.removeEventListener("mousemove",this.Dp,!0),window.removeEventListener("mousedown",this.Cp,!0),window.removeEventListener("mouseup",this.Fp,!0),window.removeEventListener("mousewheel",this.hh,!0),window.removeEventListener("DOMMouseScroll",this.hh,!0),window.removeEventListener("mouseout",this.Ep,!0),null!==this.po&&(this.po=this.po.target=null)}else this.lf=!1;this.Nb=null,null!==a&&((b=a.U)&&(b.$j=null),ai(this,a),this.RA())}}),$h.prototype.Gl=function(a){return a.Sg.setTransform(a.mg,0,0,a.mg,0,0),null===this.yh&&ei(this,!0),0<this.yh&&this!==this.uH?!0:!1},$h.prototype.t=function(){this.uH=null},z.prototype.computePixelRatio=function(){var a=this.Sg;return Math.round((window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1))},z.prototype.doMouseMove=function(){this.Ua.doMouseMove()},z.prototype.doMouseDown=function(){this.Ua.doMouseDown()},z.prototype.doMouseUp=function(){this.Ua.doMouseUp()},z.prototype.doMouseWheel=function(){this.Ua.doMouseWheel()},z.prototype.doKeyDown=function(){this.Ua.doKeyDown()},z.prototype.doKeyUp=function(){this.Ua.doKeyUp()},z.prototype.focus=z.prototype.focus=function(){this.gb&&this.gb.focus()},z.prototype.NC=function(){if(this.U.isEnabled){var a=this.U;if(a.qz&&null!==a.gb){a.Dv=!0;var b=a.Gd,c=a.xb,d=b.width,e=c.width,f=b.height,g=c.height,h=b.right,i=c.right,j=b.bottom,k=c.bottom,l=b.x,m=c.x,b=b.y,c=c.y,n=a.scale;if(d>e||f>g){var o=t.K();this.aD&&a.of?(o.p(this.scrollLeft/n+l,a.position.y),a.position=o):this.bD&&a.pf&&(o.p(a.position.x,this.scrollTop/n+b),a.position=o),t.B(o),a.Dv=!1,a.vj=!1}else o=t.K(),this.aD&&a.of&&(m>l&&(a.position=new w(this.scrollLeft+l,a.position.y)),h>i&&(a.position=new w(-(a.Kj.scrollWidth-a.Fb)+this.scrollLeft-a.Fb/n+a.Gd.right,a.position.y))),this.bD&&a.pf&&(c>b&&(a.position=new w(a.position.x,this.scrollTop+b)),j>k&&(a.position=new w(a.position.x,-(a.Lj.scrollHeight-a.Eb)+this.scrollTop-a.Eb/n+a.Gd.bottom))),t.B(o),zi(a),a.Dv=!1,a.vj=!1,b=a.Gd,c=a.xb,h=b.right,i=c.right,j=b.bottom,k=c.bottom,l=b.x,m=c.x,b=b.y,c=c.y,e>=d&&l>=m&&i>=h&&(a.rz.style.width="1px"),g>=f&&b>=c&&k>=j&&(a.sz.style.height="1px")}}else Ai(this.U)},z.prototype.OC=function(){this.U.isEnabled?this.U.qz=!0:Ai(this.U)},z.prototype.computeBounds=z.prototype.qf=function(){return 0<this.fg.count&&Bi(this),Ci(this)},z.prototype.computePartsBounds=function(a){var b=null;for(a=a.k;a.next();){var c=a.value;c instanceof T||(c.sf(),null===b?b=c.oa.copy():b.ii(c.oa))}return null===b?new x(NaN,NaN,0,0):b},z.prototype.zoomToFit=z.prototype.zoomToFit=function(){this.scale=Ei(this,Hi)},z.prototype.zoomToRect=function(a,b){void 0===b&&(b=Hi);var c=a.width,d=a.height;if(!(0===c||0===d||isNaN(c)&&isNaN(d))){var e=1;if(b===Hi||b===Ii)if(isNaN(c))e=this.xb.height*this.scale/d;else if(isNaN(d))e=this.xb.width*this.scale/c;else var e=this.Fb,f=this.Eb,e=b===Ii?f/d>e/c?(f-(this.Ul?this.nf:0))/d:(e-(this.Vl?this.nf:0))/c:Math.min(f/d,e/c);this.scale=e,this.position=new w(a.x,a.y)}},z.prototype.alignDocument=function(a,b){this.wi&&Gi(this,this.qf());var c=this.Gd,d=this.xb,e=this.Yb;this.Yb=!0,this.position=new w(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY)),this.Yb=e,this.fa()},z.prototype.findPartAt=z.prototype.et=function(a,b){var c=b?Jf(this,a,function(a){return a.S},function(a){return a.canSelect()}):Jf(this,a,function(a){return a.S});return c instanceof C?c:null},z.prototype.findObjectAt=z.prototype.pe=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null);var d=this.Rb.Xm;for(Bi(this);d.next();){var e=d.value;if(e.visible&&(e=e.pe(a,b,c),null!==e))return e}return null},z.prototype.findObjectsAt=z.prototype.cp=function(a,b,c,d){void 0===b&&(b=null),void 0===c&&(c=null),d instanceof B||d instanceof ma||(d=new ma(Q)),Bi(this);for(var e=this.Rb.Xm;e.next();){var f=e.value;f.visible&&f.cp(a,b,c,d)}return d},z.prototype.findObjectsIn=z.prototype.bk=function(a,b,c,d,e){void 0===b&&(b=null),void 0===c&&(c=null),void 0===d&&(d=!1),e instanceof B||e instanceof ma||(e=new ma(Q)),Bi(this);for(var f=this.Rb.Xm;f.next();){var g=f.value;g.visible&&g.bk(a,b,c,d,e)}return e},z.prototype.cA=function(a,b,c,d,e,f){var g=new ma(Q);Bi(this);for(var h=this.Rb.Xm;h.next();){var i=h.value;i.visible&&i.cA(a,b,c,d,g,e,f)}return g},z.prototype.findObjectsNear=z.prototype.Qm=function(a,b,c,d,e,f){void 0===c&&(c=null),void 0===d&&(d=null),void 0===e&&(e=!0),!1!==e&&!0!==e&&((e instanceof B||e instanceof ma)&&(f=e),e=!0),f instanceof B||f instanceof ma||(f=new ma(Q)),Bi(this);for(var g=this.Rb.Xm;g.next();){var h=g.value;h.visible&&h.Qm(a,b,c,d,e,f)}return f},z.prototype.acceptEvent=function(a){var b=this.Ed;return this.Ed=this.ec,this.ec=b,hi(this,this,a,b,a instanceof MouseEvent),b},z.prototype.fJ=function(a){if(this.U.isEnabled){var b=this.U.ec;switch(hi(this.U,this.U,a,b,!1),b.key=String.fromCharCode(a.which),b.ak=!0,a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:case 61:case 107:b.key="Add";break;case 189:case 173:case 109:b.key="Subtract";break;case 27:b.key="Esc"}return this.U.doKeyDown(),187!==a.which&&189!==a.which&&48!==a.which&&107!==a.which&&109!==a.which&&61!==a.which&&173!==a.which||!0!==a.ctrlKey?ti(this.U,b,a):(a.cancelBubble=!0,a.preventDefault(),a.stopPropagation(),!1)}},z.prototype.gJ=function(a){if(this.U.isEnabled){var b=this.U.ec;switch(hi(this.U,this.U,a,b,!1),b.key=String.fromCharCode(a.which),b.lj=!0,a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 93:a.preventDefault()}return this.U.doKeyUp(),ti(this.U,b,a)}},z.prototype.Un=function(a){var b=this.gb;if(null===b)return new w(0,0);var c=this.Fb,d=this.Eb,b=b.getBoundingClientRect(),c=a.clientX-c/b.width*b.left;return a=a.clientY-d/b.height*b.top,null!==this.md?(a=new w(c,a),Qa(a,this.md),a):new w(c,a)},z.prototype.invalidateDocumentBounds=z.prototype.Oc=function(){this.wi||(this.wi=!0,this.te())},z.prototype.redraw=z.prototype.RA=function(){this.Yb||this.Bd||(this.fa(),Ki(this),zi(this),this.Oc(),this.Uf())},z.prototype.isUpdateRequested=function(){return this.Nf},z.prototype.delayInitialization=function(a){var b=this.Ub,c=b.isEnabled;b.isEnabled=!1,Zf(this),this.lf=!1,b.isEnabled=c,a&&setTimeout(a,1)},z.prototype.requestUpdate=z.prototype.te=function(a){if(void 0===a&&(a=!1),!0!==this.Nf&&!(this.Yb||!1===a&&this.Bd)){this.Nf=!0;var b=this;requestAnimationFrame(function(){b.Nf&&b.Uf()})}},z.prototype.maybeUpdate=z.prototype.Uf=function(){(!this.Qn||this.Nf)&&(this.Qn&&(this.Qn=!1),Zf(this))},z.prototype.Df=function(a,b,c,d){var e=this.li;if(this.Ik||e.yg)for(e=0;b>e;e++)a[e].Df(c,d)},z.prototype.Ue=function(a,b){null===this.Nb&&t.m("No div specified");var c=this.gb;if(null===c&&t.m("No canvas specified"),this.li.sd)0===this.la.Je&&this.te(!0);else{a||(a=this.Sg);var d=a!==this.Sg,f=this.Rb.n,g=f.length,h=this;if(this.Df(f,g,h),d)wi(this,a),zi(this);else if(!this.ve&&void 0===b)return;var i=this.Ra,g=this.xc,j=Math.round(i.x*g)/g,k=Math.round(i.y*g)/g,l=this.md;l.reset(),1!==g&&l.scale(g),0===i.x&&0===i.y||l.translate(-j,-k);var m=this.tj;if(i=null!==m&&0<m.length&&!0===this.pz){for(k=t.Qw,a.save(),a.beginPath(),g=m.length,j=0;g>j;j++){var n=m[j];(0!==n[2]||0!==n[3])&&(n=Ti(this,n),a.rect(Math.floor(n[0])-1,Math.floor(n[1])-1,Math.ceil(n[2])+2,Math.ceil(n[3])+2),k&&a.clearRect(Math.floor(n[0])-1,Math.floor(n[1])-1,Math.ceil(n[2])+2,Math.ceil(n[3])+2))}a.clip()}for(g=this.mg,t.Um?(c.width=c.width,i=!1,wi(this,a),a.scale(g,g)):(a.setTransform(1,0,0,1,0,0),a.scale(g,g),a.clearRect(0,0,this.Fb,this.Eb)),a.miterLimit=9,a.setTransform(1,0,0,1,0,0),a.scale(g,g),a.transform(l.m11,l.m12,l.m21,l.m22,l.dx,l.dy),e&&e.Rz&&e.AI(this,a),c=b?function(c){var d=a;if(c.visible){d.globalAlpha=c.Lf;var e=c.zb;c=c.wv,c.length=0;for(var f=h.scale,g=e.length,i=0;g>i;i++){var j=e.n[i];if(Ph(j)&&!b.contains(j)){if(j instanceof T&&(j.ic&&c.push(j),!1===j.rg))continue;var k=j.oa;1<k.width*f||1<k.height*f?j.Ue(d,h):Rh(j,d)}}d.globalAlpha=1}}:i?function(b){Sh(b,a,h,m)}:function(b){b.Ue(a,h)},Ui(this,a),g=f.length,j=0;g>j;j++)c(f[j]);this.tj=[],this.Gk?this.Gk.Gl(this)&&this.hy():this.Un=function(){},i&&(a.restore(),wi(this,a),e&&e.wK&&e.vK(m,a,this)),d?(wi(this),zi(this)):this.ve=this.Ik=!1}},z.prototype.getRenderingHint=function(a){return this.Sk[a]},z.prototype.setRenderingHint=z.prototype.PJ=function(a,b){this.Sk[a]=b,this.RA()},z.prototype.resetRenderingHints=z.prototype.RF=function(){this.Sk={drawShadows:!0}},z.prototype.setInputOption=function(a,b){this.Yy[a]=b},z.prototype.fa=function(a,b){if(this.pz&&void 0!==a&&null!==this.tj){var c=this.xb;(a&&c.Tf(a)||b&&c.Tf(b))&&(null!==this.tj&&(a&&a.N()&&Xi(this,a.x-2,a.y-2,a.width+4,a.height+4),b&&b.N()&&Xi(this,b.x-2,b.y-2,b.width+4,b.height+4)),this.ve=!0,this.te())}else this.tj=null,this.ve=!0,this.te();for(c=this.lm.k;c.next();)c.value.fa(a,b)},t.g(z,"viewportOptimizations",z.prototype.dK),t.defineProperty(z,{dK:"viewportOptimizations"},function(){return this.Yv},function(a){t.i(a,"boolean",z,"viewportOptimizations"),this.tj=null,this.Yv=a}),z.prototype.add=z.prototype.add=function(a){t.l(a,C,z,"add:part");var b=a.h;if(b!==this){null!==b&&t.m("Cannot add part "+a.toString()+" to "+this.toString()+". It is already a part of "+b.toString()),this.un&&(a.Kk="Tool");var c=a.af,b=this.ct(c);null===b&&(b=this.ct("")),null===b&&t.m('Cannot add a Part when unable find a Layer named "'+c+'" and there is no default Layer'),a.layer!==b&&(c=b.np(99999999,a,a.h===this),c>=0&&this.Ic(wd,"parts",b,null,a,null,c),b.rc||this.Oc(),a.J(aj),c=a.tp,null!==c&&c(a,null,b))}},z.prototype.np=function(a){if(a instanceof R){if(this.rv.add(a),a instanceof S){var b=a.hb;null===b?this.Uk.add(a):b.qo.add(a),b=a.jc,null!==b&&(b.h=this)}}else a instanceof T?this.av.add(a):a instanceof Je||this.zb.add(a);if(a.Jb&&a.ha(),b=a.data){a instanceof Je||(a instanceof T?this.Ak.add(b,a):this.ri.add(b,a));
var c=this;bj(a,function(a){cj(c,a)})}!0!==Ri(a)&&!0!==Si(a)||this.fg.add(a),dj(a,!0,this),ej(a)?(a.oa.N()&&this.fa(Th(a,a.oa)),this.Oc()):a.La()&&a.oa.N()&&this.fa(Th(a,a.oa)),this.te()},z.prototype.Xe=function(a){if(a.Wi(),a instanceof R){if(this.rv.remove(a),a instanceof S){var b=a.hb;null===b?this.Uk.remove(a):b.qo.remove(a),b=a.jc,null!==b&&(b.h=null)}}else a instanceof T?this.av.remove(a):a instanceof Je||this.zb.remove(a);if(b=a.data){a instanceof Je||(a instanceof T?this.Ak.remove(b):this.ri.remove(b));var c=this;bj(a,function(a){fj(c,a)})}this.fg.remove(a),ej(a)?(a.oa.N()&&this.fa(Th(a,a.oa)),this.Oc()):a.La()&&a.oa.N()&&this.fa(Th(a,a.oa)),this.te()},z.prototype.remove=z.prototype.remove=function(a){t.l(a,C,z,"remove:part"),a.eb=!1,a.zg=!1;var b=a.layer;if(null!==b&&b.h===this){a.J(gj),a.Nm();var c=b.Xe(-1,a,!1);c>=0&&this.Ic(xd,"parts",b,a,null,c,null),c=a.tp,null!==c&&c(a,b,null)}},z.prototype.removeParts=z.prototype.VA=function(a,b){if(a===this.selection){var c=new ma;c.Oe(a),a=c}for(c=a.k;c.next();){var d=c.value;d.h===this&&(b&&!d.canDelete()||this.remove(d))}},z.prototype.copyParts=z.prototype.Wo=function(a,b,c){return this.Se.Wo(a,b,c)},z.prototype.moveParts=z.prototype.moveParts=function(a,b,c){t.l(b,w,z,"moveParts:offset");var d=this.wb;if(null!==d){d=d.Hd,null===d&&(d=new cf,d.h=this);var e=new ia(C,Object);if(a)a=a.k;else{for(a=this.sl;a.next();)jf(d,e,a.value,c);for(a=this.jh;a.next();)jf(d,e,a.value,c);a=this.links}for(;a.next();)jf(d,e,a.value,c);d.moveParts(e,b,c)}},z.prototype.addLayer=z.prototype.Js=function(a){hj(this,a,null),a.yd(this);var b=this.Rb,c=b.count-1;if(!a.rc)for(;c>=0&&b.wa(c).rc;)c--;b.Jd(c+1,a),null!==this.ke&&this.Ic(wd,"layers",this,null,a,null,c+1),this.fa(),this.Oc()},z.prototype.addLayerBefore=z.prototype.DH=function(a,b){hj(this,a,b),a.yd(this);var c=this.Rb,d=c.indexOf(a);d>=0&&(c.remove(a),null!==this.ke&&this.Ic(xd,"layers",this,a,null,d,null));for(var e=c.count,f=0;e>f;f++)if(c.wa(f)===b){c.Jd(f,a);break}null!==this.ke&&this.Ic(wd,"layers",this,null,a,null,f),this.fa(),0>d&&this.Oc()},z.prototype.addLayerAfter=function(a,b){hj(this,a,b),a.yd(this);var c=this.Rb,d=c.indexOf(a);d>=0&&(c.remove(a),null!==this.ke&&this.Ic(xd,"layers",this,a,null,d,null));for(var e=c.count,f=0;e>f;f++)if(c.wa(f)===b){c.Jd(f+1,a);break}null!==this.ke&&this.Ic(wd,"layers",this,null,a,null,f+1),this.fa(),0>d&&this.Oc()},z.prototype.removeLayer=function(a){if(t.l(a,$d,z,"removeLayer:layer"),a.h!==this&&t.m("Cannot remove a Layer from another Diagram: "+a+" of "+a.h),""!==a.name){var b=this.Rb,c=b.indexOf(a);if(b.remove(a)){for(b=a.zb.copy().k;b.next();){var d=b.value,e=d.af;d.af=e!==a.name?e:""}null!==this.ke&&this.Ic(xd,"layers",this,a,null,c,null),this.fa(),this.Oc()}}},z.prototype.findLayer=z.prototype.ct=function(a){for(var b=this.Yw;b.next();){var c=b.value;if(c.name===a)return c}return null},z.prototype.addChangedListener=z.prototype.Iz=function(a){t.i(a,"function",z,"addChangedListener:listener"),null===this.qj&&(this.qj=new B("function")),this.qj.add(a)},z.prototype.removeChangedListener=z.prototype.TA=function(a){t.i(a,"function",z,"removeChangedListener:listener"),null!==this.qj&&(this.qj.remove(a),0===this.qj.count&&(this.qj=null))},z.prototype.iw=function(a){if(this.Wa||this.la.PE(a),a.td!==ud&&(this.gh=!0),null!==this.qj){var b=this.qj,c=b.length;if(1===c)(b=b.wa(0))(a);else if(0!==c)for(var d=b.Ie(),e=0;c>e;e++)(b=d[e])(a)}},z.prototype.raiseChangedEvent=z.prototype.Ic=function(a,b,c,d,e,f,g){void 0===f&&(f=null),void 0===g&&(g=null);var h=new td;h.h=this,h.td=a,h.propertyName=b,h.object=c,h.oldValue=d,h.Yf=f,h.newValue=e,h.Wf=g,this.iw(h)},z.prototype.raiseChanged=z.prototype.j=function(a,b,c,d,e){this.Ic(vd,a,this,b,c,d,e)},t.A(z,{Ub:"animationManager"},function(){return this.li}),t.A(z,{la:"undoManager"},function(){return this.ke.la}),t.g(z,"skipsUndoManager",z.prototype.Wa),t.defineProperty(z,{Wa:"skipsUndoManager"},function(){return this.Li},function(a){t.i(a,"boolean",z,"skipsUndoManager"),this.Li=a,this.ke.Li=a}),t.g(z,"delaysLayout",z.prototype.ww),t.defineProperty(z,{ww:"delaysLayout"},function(){return this.Gy},function(a){this.Gy=a}),z.prototype.changeState=function(a,b){if(null!==a&&a.h===this){var c=a.td;if(c===vd){var d=a.object,c=a.propertyName,e=a.za(b);t.Qa(d,c,e),d instanceof Q&&(c=d.S,null!==c&&ij(c)),this.gh=!0}else if(c===wd){if(e=a.object,c=a.Wf,d=a.newValue,e instanceof y)if("number"==typeof c&&d instanceof Q){var f=e;b?f.Xe(c):f.Jd(c,d),c=e.S,null!==c&&ij(c)}else"number"==typeof c&&d instanceof Ae&&(f=e,b?d.xf?f.QF(c):f.NF(c):(c=d.xf?f.wd(d.index):f.vd(d.index),jj(c,d)));else e instanceof $d?(f=!0===a.Yf,"number"==typeof c&&d instanceof C&&(b?(ij(d),f?e.Xe(c,d,f):this.remove(d)):e.np(c,d,f))):e instanceof z?"number"==typeof c&&d instanceof $d&&(b?this.Rb.qd(c):(d.yd(this),this.Rb.Jd(c,d))):t.m("unknown ChangedEvent.Insert object: "+a.toString());this.gh=!0}else c===xd?(e=a.object,c=a.Yf,d=a.oldValue,e instanceof y?"number"==typeof c&&d instanceof Q?(f=e,b?f.Jd(c,d):f.Xe(c)):"number"==typeof c&&d instanceof Ae&&(f=e,b?(c=d.xf?f.wd(d.index):f.vd(d.index),jj(c,d)):d.xf?f.QF(c):f.NF(c)):e instanceof $d?(f=!0===a.Wf,"number"==typeof c&&d instanceof C&&(b?e.np(c,d,f):(ij(d),f?e.Xe(c,d,f):this.remove(d)))):e instanceof z?"number"==typeof c&&d instanceof $d&&(b?(d.yd(this),this.Rb.Jd(c,d)):this.Rb.qd(c)):t.m("unknown ChangedEvent.Remove object: "+a.toString()),this.gh=!0):c!==ud&&t.m("unknown ChangedEvent: "+a.toString())}},z.prototype.startTransaction=z.prototype.uc=function(a){return this.la.uc(a)},z.prototype.commitTransaction=z.prototype.Ce=function(a){return this.la.Ce(a)},z.prototype.rollbackTransaction=z.prototype.Np=function(){return this.la.Np()},z.prototype.updateAllTargetBindings=function(a){void 0===a&&(a="");for(var b=this.sl;b.next();)b.value.Kb(a);for(b=this.jh;b.next();)b.value.Kb(a);for(b=this.links;b.next();)b.value.Kb(a)},z.prototype.updateAllModelDataReferences=function(){for(var a=this.sl;a.next();)a.value.updateModelDataReferences();for(a=this.jh;a.next();)a.value.updateModelDataReferences();for(a=this.links;a.next();)a.value.updateModelDataReferences()},z.prototype.Et=function(a,b,c){Ki(this),zi(this);var d=this.jc;null===d||!d.st||c||a.width===b.width&&a.height===b.height||d.J(),this.Yb||Di(this),Li(this),d=this.Ua,!0===this.ao&&d instanceof He&&(this.R.ea=this.KG(this.R.Ke),d.doMouseMove()),Yi(this,a,b),this.Ba("ViewportBoundsChanged",c?{}:null,a)},z.prototype.clearSelection=z.prototype.kw=function(){var a=0<this.selection.count;a&&this.Ba("ChangingSelection"),Me(this),a&&this.Ba("ChangedSelection")},z.prototype.select=z.prototype.select=function(a){null!==a&&a.layer.h===this&&(t.l(a,C,z,"select:part"),!a.eb||1<this.selection.count)&&(this.Ba("ChangingSelection"),Me(this),a.eb=!0,this.Ba("ChangedSelection"))},z.prototype.selectCollection=z.prototype.gG=function(a){if(this.Ba("ChangingSelection"),Me(this),t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++){var d=t.lb(a,c);d instanceof C||t.m("Diagram.selectCollection given something that is not a Part: "+d),d.eb=!0}else for(a=a.k;a.next();)d=a.value,d instanceof C||t.m("Diagram.selectCollection given something that is not a Part: "+d),d.eb=!0;this.Ba("ChangedSelection")},z.prototype.clearHighlighteds=z.prototype.TD=function(){var a=this.Kw;if(0<a.count){for(var b=a.Ie(),c=b.length,d=0;c>d;d++)b[d].zg=!1;a.Ma(),a.clear(),a.freeze()}},z.prototype.highlight=function(a){null!==a&&a.layer.h===this&&(t.l(a,C,z,"highlight:part"),!a.zg||1<this.Kw.count)&&(this.TD(),a.zg=!0)},z.prototype.highlightCollection=function(a){if(this.TD(),t.isArray(a))for(var b=t.ub(a),c=0;b>c;c++){var d=t.lb(a,c);d instanceof C||t.m("Diagram.highlightCollection given something that is not a Part: "+d),d.zg=!0}else for(a=a.k;a.next();)d=a.value,d instanceof C||t.m("Diagram.highlightCollection given something that is not a Part: "+d),d.zg=!0},z.prototype.scroll=function(a,b,c){void 0===c&&(c=1);var d,e="up"===b||"down"===b;"pixel"===a?d=c:"line"===a?d=c*(e?this.Rp:this.Qp):"page"===a?(a=e?this.xb.height:this.xb.width,a*=this.scale,0!==a&&(d=Math.max(a-(e?this.Rp:this.Qp),0),d*=c)):t.m("scrolling unit must be 'pixel', 'line', or 'page', not: "+a),d/=this.scale,c=this.position.copy(),"up"===b?c.y=this.position.y-d:"down"===b?c.y=this.position.y+d:"left"===b?c.x=this.position.x-d:"right"===b?c.x=this.position.x+d:t.m("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+b),this.position=c},z.prototype.scrollToRect=function(a){var b=this.xb;b.Vj(a)||(a=a.Sz,a.x-=b.width/2,a.y-=b.height/2,this.position=a)},z.prototype.centerRect=function(a){var b=this.xb;a=a.Sz,a.x-=b.width/2,a.y-=b.height/2,this.position=a},z.prototype.transformDocToView=z.prototype.IG=function(a){var b=this.md;b.reset(),1!==this.xc&&b.scale(this.xc);var c=this.Ra;return(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y),a.copy().transform(this.md)},z.prototype.transformViewToDoc=z.prototype.KG=function(a){var b=this.md;b.reset(),1!==this.xc&&b.scale(this.xc);var c=this.Ra;return(0!==c.x||0!==c.y)&&isFinite(c.x)&&isFinite(c.y)&&b.translate(-c.x,-c.y),Qa(a.copy(),this.md)};var Xe;z.None=Xe=t.w(z,"None",0);var Hi;z.Uniform=Hi=t.w(z,"Uniform",1);var Ii;z.UniformToFill=Ii=t.w(z,"UniformToFill",2);var eg;z.CycleAll=eg=t.w(z,"CycleAll",10);var og;z.CycleNotDirected=og=t.w(z,"CycleNotDirected",11);var qg;z.CycleNotDirectedFast=qg=t.w(z,"CycleNotDirectedFast",12);var rg;z.CycleNotUndirected=rg=t.w(z,"CycleNotUndirected",13);var fg;z.CycleDestinationTree=fg=t.w(z,"CycleDestinationTree",14);var ng;z.CycleSourceTree=ng=t.w(z,"CycleSourceTree",15),t.g(z,"validCycle",z.prototype.QG),t.defineProperty(z,{QG:"validCycle"},function(){return this.Wv},function(a){var b=this.Wv;b!==a&&(t.Aa(a,z,z,"validCycle"),this.Wv=a,this.j("validCycle",b,a))}),t.g(z,"linkSpacing",z.prototype.yp),t.defineProperty(z,{yp:"linkSpacing"},function(){return this.yj},function(a){var b=this.yj;b!==a&&(t.q(a,z,"linkSpacing"),0>a&&t.ka(a,">= zero",z,"linkSpacing"),this.yj=a,this.j("linkSpacing",b,a))}),t.A(z,{Yw:"layers"},function(){return this.Rb.k}),t.g(z,"isModelReadOnly",z.prototype.Ze),t.defineProperty(z,{Ze:"isModelReadOnly"},function(){var a=this.ke;return null===a?!1:a.ab},function(a){var b=this.ke;null!==b&&(b.ab=a)}),t.g(z,"isReadOnly",z.prototype.ab),t.defineProperty(z,{ab:"isReadOnly"},function(){return this.Jk},function(a){var b=this.Jk;b!==a&&(t.i(a,"boolean",z,"isReadOnly"),this.Jk=a,this.j("isReadOnly",b,a))}),t.g(z,"isEnabled",z.prototype.isEnabled),t.defineProperty(z,{isEnabled:"isEnabled"},function(){return this.Le},function(a){var b=this.Le;b!==a&&(t.i(a,"boolean",z,"isEnabled"),this.Le=a,this.j("isEnabled",b,a))}),t.g(z,"allowClipboard",z.prototype.ew),t.defineProperty(z,{ew:"allowClipboard"},function(){return this.eu},function(a){var b=this.eu;b!==a&&(t.i(a,"boolean",z,"allowClipboard"),this.eu=a,this.j("allowClipboard",b,a))}),t.g(z,"allowCopy",z.prototype.Si),t.defineProperty(z,{Si:"allowCopy"},function(){return this.lk},function(a){var b=this.lk;b!==a&&(t.i(a,"boolean",z,"allowCopy"),this.lk=a,this.j("allowCopy",b,a))}),t.g(z,"allowDelete",z.prototype.Zk),t.defineProperty(z,{Zk:"allowDelete"},function(){return this.mk},function(a){var b=this.mk;b!==a&&(t.i(a,"boolean",z,"allowDelete"),this.mk=a,this.j("allowDelete",b,a))}),t.g(z,"allowDragOut",z.prototype.Ms),t.defineProperty(z,{Ms:"allowDragOut"},function(){return this.fu},function(a){var b=this.fu;b!==a&&(t.i(a,"boolean",z,"allowDragOut"),this.fu=a,this.j("allowDragOut",b,a))}),t.g(z,"allowDrop",z.prototype.Kz),t.defineProperty(z,{Kz:"allowDrop"},function(){return this.gu},function(a){var b=this.gu;b!==a&&(t.i(a,"boolean",z,"allowDrop"),this.gu=a,this.j("allowDrop",b,a))}),t.g(z,"allowTextEdit",z.prototype.Qo),t.defineProperty(z,{Qo:"allowTextEdit"},function(){return this.vk},function(a){var b=this.vk;b!==a&&(t.i(a,"boolean",z,"allowTextEdit"),this.vk=a,this.j("allowTextEdit",b,a))}),t.g(z,"allowGroup",z.prototype.Mo),t.defineProperty(z,{Mo:"allowGroup"},function(){return this.nk},function(a){var b=this.nk;b!==a&&(t.i(a,"boolean",z,"allowGroup"),this.nk=a,this.j("allowGroup",b,a))}),t.g(z,"allowUngroup",z.prototype.Ro),t.defineProperty(z,{Ro:"allowUngroup"},function(){return this.wk},function(a){var b=this.wk;b!==a&&(t.i(a,"boolean",z,"allowUngroup"),this.wk=a,this.j("allowUngroup",b,a))}),t.g(z,"allowInsert",z.prototype.Bm),t.defineProperty(z,{Bm:"allowInsert"},function(){return this.iu},function(a){var b=this.iu;b!==a&&(t.i(a,"boolean",z,"allowInsert"),this.iu=a,this.j("allowInsert",b,a))}),t.g(z,"allowLink",z.prototype.Cm),t.defineProperty(z,{Cm:"allowLink"},function(){return this.ok},function(a){var b=this.ok;b!==a&&(t.i(a,"boolean",z,"allowLink"),this.ok=a,this.j("allowLink",b,a))}),t.g(z,"allowRelink",z.prototype.Sj),t.defineProperty(z,{Sj:"allowRelink"},function(){return this.qk},function(a){var b=this.qk;b!==a&&(t.i(a,"boolean",z,"allowRelink"),this.qk=a,this.j("allowRelink",b,a))}),t.g(z,"allowMove",z.prototype.Rj),t.defineProperty(z,{Rj:"allowMove"},function(){return this.pk},function(a){var b=this.pk;b!==a&&(t.i(a,"boolean",z,"allowMove"),this.pk=a,this.j("allowMove",b,a))}),t.g(z,"allowReshape",z.prototype.No),t.defineProperty(z,{No:"allowReshape"},function(){return this.rk},function(a){var b=this.rk;b!==a&&(t.i(a,"boolean",z,"allowReshape"),this.rk=a,this.j("allowReshape",b,a))}),t.g(z,"allowResize",z.prototype.Oo),t.defineProperty(z,{Oo:"allowResize"},function(){return this.sk},function(a){var b=this.sk;b!==a&&(t.i(a,"boolean",z,"allowResize"),this.sk=a,this.j("allowResize",b,a))}),t.g(z,"allowRotate",z.prototype.Po),t.defineProperty(z,{Po:"allowRotate"},function(){return this.tk},function(a){var b=this.tk;b!==a&&(t.i(a,"boolean",z,"allowRotate"),this.tk=a,this.j("allowRotate",b,a))}),t.g(z,"allowSelect",z.prototype.Pe),t.defineProperty(z,{Pe:"allowSelect"},function(){return this.uk},function(a){var b=this.uk;b!==a&&(t.i(a,"boolean",z,"allowSelect"),this.uk=a,this.j("allowSelect",b,a))}),t.g(z,"allowUndo",z.prototype.Lz),t.defineProperty(z,{Lz:"allowUndo"},function(){return this.ju},function(a){var b=this.ju;b!==a&&(t.i(a,"boolean",z,"allowUndo"),this.ju=a,this.j("allowUndo",b,a))}),t.g(z,"allowZoom",z.prototype.Ns),t.defineProperty(z,{Ns:"allowZoom"},function(){return this.lu},function(a){var b=this.lu;b!==a&&(t.i(a,"boolean",z,"allowZoom"),this.lu=a,this.j("allowZoom",b,a))}),t.g(z,"hasVerticalScrollbar",z.prototype.SE),t.defineProperty(z,{SE:"hasVerticalScrollbar"},function(){return this.Pu},function(a){var b=this.Pu;b!==a&&(t.i(a,"boolean",z,"hasVerticalScrollbar"),this.Pu=a,Ki(this),this.fa(),this.j("hasVerticalScrollbar",b,a),Di(this))}),t.g(z,"hasHorizontalScrollbar",z.prototype.RE),t.defineProperty(z,{RE:"hasHorizontalScrollbar"},function(){return this.Ou},function(a){var b=this.Ou;b!==a&&(t.i(a,"boolean",z,"hasHorizontalScrollbar"),this.Ou=a,Ki(this),this.fa(),this.j("hasHorizontalScrollbar",b,a),Di(this))}),t.g(z,"allowHorizontalScroll",z.prototype.of),t.defineProperty(z,{of:"allowHorizontalScroll"},function(){return this.hu},function(a){var b=this.hu;b!==a&&(t.i(a,"boolean",z,"allowHorizontalScroll"),this.hu=a,this.j("allowHorizontalScroll",b,a),Di(this))}),t.g(z,"allowVerticalScroll",z.prototype.pf),t.defineProperty(z,{pf:"allowVerticalScroll"},function(){return this.ku},function(a){var b=this.ku;b!==a&&(t.i(a,"boolean",z,"allowVerticalScroll"),this.ku=a,this.j("allowVerticalScroll",b,a),Di(this))}),t.g(z,"scrollHorizontalLineChange",z.prototype.Qp),t.defineProperty(z,{Qp:"scrollHorizontalLineChange"},function(){return this.Ev},function(a){var b=this.Ev;b!==a&&(t.i(a,"number",z,"scrollHorizontalLineChange"),0>a&&t.ka(a,">= 0",z,"scrollHorizontalLineChange"),this.Ev=a,this.j("scrollHorizontalLineChange",b,a))}),t.g(z,"scrollVerticalLineChange",z.prototype.Rp),t.defineProperty(z,{Rp:"scrollVerticalLineChange"},function(){return this.Fv},function(a){var b=this.Fv;b!==a&&(t.i(a,"number",z,"scrollVerticalLineChange"),0>a&&t.ka(a,">= 0",z,"scrollVerticalLineChange"),this.Fv=a,this.j("scrollVerticalLineChange",b,a))}),t.g(z,"lastInput",z.prototype.R),t.defineProperty(z,{R:"lastInput"},function(){return this.ec},function(a){e&&t.l(a,ld,z,"lastInput"),this.ec=a}),t.g(z,"firstInput",z.prototype.Nc),t.defineProperty(z,{Nc:"firstInput"},function(){return this.Dk},function(a){e&&t.l(a,ld,z,"firstInput"),this.Dk=a}),t.g(z,"currentCursor",z.prototype.$b),t.defineProperty(z,{$b:"currentCursor"},function(){return this.zy},function(a){""===a&&(a=this.Gq),this.zy!==a&&(t.i(a,"string",z,"currentCursor"),null!==this.gb&&(this.zy=a,this.gb.style.cursor=a,this.Nb.style.cursor=a))}),t.g(z,"defaultCursor",z.prototype.oI),t.defineProperty(z,{oI:"defaultCursor"},function(){return this.Gq},function(a){""===a&&(a="auto");var b=this.Gq;b!==a&&(t.i(a,"string",z,"defaultCursor"),this.Gq=a,this.j("defaultCursor",b,a))}),t.g(z,"hasGestureZoom",z.prototype.NI),t.defineProperty(z,{NI:"hasGestureZoom"},function(){return this.vi},function(a){var b=this.vi;b!==a&&(t.i(a,"boolean",z,"hasGestureZoom"),this.vi=a,this.j("hasGestureZoom",b,a))}),t.g(z,"click",z.prototype.click),t.defineProperty(z,{click:"click"},function(){return this.ni},function(a){var b=this.ni;b!==a&&(null!==a&&t.i(a,"function",z,"click"),this.ni=a,this.j("click",b,a))}),t.g(z,"doubleClick",z.prototype.Om),t.defineProperty(z,{Om:"doubleClick"},function(){return this.ti},function(a){var b=this.ti;b!==a&&(null!==a&&t.i(a,"function",z,"doubleClick"),this.ti=a,this.j("doubleClick",b,a))}),t.g(z,"contextClick",z.prototype.Ws),t.defineProperty(z,{Ws:"contextClick"},function(){return this.pi},function(a){var b=this.pi;b!==a&&(null!==a&&t.i(a,"function",z,"contextClick"),this.pi=a,this.j("contextClick",b,a))}),t.g(z,"mouseOver",z.prototype.zt),t.defineProperty(z,{zt:"mouseOver"},function(){return this.Ei},function(a){var b=this.Ei;b!==a&&(null!==a&&t.i(a,"function",z,"mouseOver"),this.Ei=a,this.j("mouseOver",b,a))}),t.g(z,"mouseHover",z.prototype.yt),t.defineProperty(z,{yt:"mouseHover"},function(){return this.Di},function(a){var b=this.Di;b!==a&&(null!==a&&t.i(a,"function",z,"mouseHover"),this.Di=a,this.j("mouseHover",b,a))}),t.g(z,"mouseHold",z.prototype.xt),t.defineProperty(z,{xt:"mouseHold"},function(){return this.Ci},function(a){var b=this.Ci;b!==a&&(null!==a&&t.i(a,"function",z,"mouseHold"),this.Ci=a,this.j("mouseHold",b,a))}),t.g(z,"mouseDragOver",z.prototype.BF),t.defineProperty(z,{BF:"mouseDragOver"},function(){return this.kv},function(a){var b=this.kv;b!==a&&(null!==a&&t.i(a,"function",z,"mouseDragOver"),this.kv=a,this.j("mouseDragOver",b,a))}),t.g(z,"mouseDrop",z.prototype.wt),t.defineProperty(z,{wt:"mouseDrop"},function(){return this.Bi},function(a){var b=this.Bi;b!==a&&(null!==a&&t.i(a,"function",z,"mouseDrop"),this.Bi=a,this.j("mouseDrop",b,a))}),t.g(z,"toolTip",z.prototype.Yt),t.defineProperty(z,{Yt:"toolTip"},function(){return this.Oi},function(a){var b=this.Oi;b!==a&&(null!==a&&t.l(a,Je,z,"toolTip"),this.Oi=a,this.j("toolTip",b,a))}),t.g(z,"contextMenu",z.prototype.contextMenu),t.defineProperty(z,{contextMenu:"contextMenu"},function(){return this.qi},function(a){var b=this.qi;b!==a&&(null!==a&&t.l(a,Je,z,"contextMenu"),this.qi=a,this.j("contextMenu",b,a))}),t.g(z,"commandHandler",z.prototype.Se),t.defineProperty(z,{Se:"commandHandler"},function(){return this.py},function(a){var b=this.py;b!==a&&(t.l(a,oa,z,"commandHandler"),null!==a.h&&t.m("Cannot share CommandHandlers between Diagrams: "+a.toString()),null!==b&&b.yd(null),this.py=a,a.yd(this))}),t.g(z,"toolManager",z.prototype.wb),t.defineProperty(z,{wb:"toolManager"},function(){return this.Uv},function(a){var b=this.Uv;b!==a&&(t.l(a,He,z,"toolManager"),null!==a.h&&t.m("Cannot share ToolManagers between Diagrams: "+a.toString()),null!==b&&b.yd(null),this.Uv=a,a.yd(this))}),t.g(z,"defaultTool",z.prototype.uw),t.defineProperty(z,{uw:"defaultTool"},function(){return this.Fy},function(a){var b=this.Fy;b!==a&&(t.l(a,ae,z,"defaultTool"),this.Fy=a,this.Ua===b&&(this.Ua=a))}),t.g(z,"currentTool",z.prototype.Ua),t.defineProperty(z,{Ua:"currentTool"},function(){return this.By},function(a){var b=this.By;if(null!==b)for(b.ia&&b.doDeactivate(),b.cancelWaitAfter(),b.doStop(),b=this.lm.k;b.next();)b.value.fa();null===a&&(a=this.uw),null!==a&&(t.l(a,ae,z,"currentTool"),this.By=a,a.yd(this),a.doStart())}),t.A(z,{selection:"selection"},function(){return this.Iv}),t.g(z,"maxSelectionCount",z.prototype.uF),t.defineProperty(z,{uF:"maxSelectionCount"},function(){return this.fv},function(a){var b=this.fv;if(b!==a)if(t.i(a,"number",z,"maxSelectionCount"),a>=0&&!isNaN(a)){if(this.fv=a,this.j("maxSelectionCount",b,a),!this.la.vb&&(a=this.selection.count-a,a>0)){this.Ba("ChangingSelection");for(var b=this.selection.Ie(),c=0;a>c;c++)b[c].eb=!1;this.Ba("ChangedSelection")}}else t.ka(a,">= 0",z,"maxSelectionCount")}),t.g(z,"nodeSelectionAdornmentTemplate",z.prototype.GF),t.defineProperty(z,{GF:"nodeSelectionAdornmentTemplate"},function(){return this.qv},function(a){var b=this.qv;b!==a&&(t.l(a,Je,z,"nodeSelectionAdornmentTemplate"),this.qv=a,this.j("nodeSelectionAdornmentTemplate",b,a))}),t.g(z,"groupSelectionAdornmentTemplate",z.prototype.NE),t.defineProperty(z,{NE:"groupSelectionAdornmentTemplate"},function(){return this.Lu},function(a){var b=this.Lu;b!==a&&(t.l(a,Je,z,"groupSelectionAdornmentTemplate"),this.Lu=a,this.j("groupSelectionAdornmentTemplate",b,a))}),t.g(z,"linkSelectionAdornmentTemplate",z.prototype.rF),t.defineProperty(z,{rF:"linkSelectionAdornmentTemplate"},function(){return this.$u},function(a){var b=this.$u;b!==a&&(t.l(a,Je,z,"linkSelectionAdornmentTemplate"),this.$u=a,this.j("linkSelectionAdornmentTemplate",b,a))}),t.A(z,{Kw:"highlighteds"},function(){return this.Qu}),t.g(z,"isModified",z.prototype.gh),t.defineProperty(z,{gh:"isModified"},function(){var a=this.la;return a.isEnabled?null!==a.Zi?!0:this.$y&&this.Ug!==a.cj:this.$y},function(a){if(this.$y!==a){t.i(a,"boolean",z,"isModified"),this.$y=a;var b=this.la;!a&&b.isEnabled&&(this.Ug=b.cj),a||lj(this)}}),t.g(z,"model",z.prototype.ba),t.defineProperty(z,{ba:"model"},function(){return this.ke},function(a){var b=this.ke;if(b!==a){t.l(a,E,z,"model"),this.Ua.doCancel(),null!==b&&b.la!==a.la&&b.la.dF&&t.m("Do not replace a Diagram.model while a transaction is in progress."),this.Ub.Al(),this.kw(),this.lf=!1,this.Qn=!0,this.Ug=-2,this.Nf=!1;var c=this.Bd;this.Bd=!0,this.Ub.ul(),null!==b&&(b.TA(this.FC),b instanceof M&&mj(this,b.hj),mj(this,b.Gg)),this.ke=a,a.Iz(this.EC),nj(this,a.Gg),a instanceof M&&oj(this,a.hj),a.TA(this.EC),a.Iz(this.FC),this.Bd=c,this.Yb||this.fa(),null!==b&&(a.la.isEnabled=b.la.isEnabled)}}),t.defineProperty(z,{Na:null},function(){return this.xC},function(a){this.xC=a}),t.g(z,"skipsModelSourceBindings",z.prototype.Tt),t.defineProperty(z,{Tt:"skipsModelSourceBindings"},function(){return this.cD},function(a){this.cD=a}),z.prototype.clear=z.prototype.clear=function(){var a=null;null!==this.gd&&(a=this.gd.S),this.ba.clear();for(var b=this.Rb.length,c=0;b>c;c++)this.Rb.n[c].clear();this.fg.clear(),this.Rl.clear(),this.rv.clear(),this.Uk.clear(),this.av.clear(),this.zb.clear(),this.ri.clear(),this.Ak.clear(),this.$l.clear(),this.Iv.Ma(),this.Iv.clear(),this.Iv.freeze(),this.Qu.Ma(),this.Qu.clear(),this.Qu.freeze(),this.Bn=null,t.Ss=null,this.Eu=new x(NaN,NaN,NaN,NaN).freeze(),null!==a&&(this.add(a),this.zb.remove(a)),this.fa()},z.prototype.reset=z.prototype.reset=function(){this.Yb=!0,this.clear(),this.Rb=new B($d),this.Sk={},this.RF(),this.Ra=new w(NaN,NaN).freeze(),this.xc=1,this.Su=new w(NaN,NaN).freeze(),this.Tu=NaN,this.hv=1e-4,this.ev=100,this.$v=new w(NaN,NaN).freeze(),this.Ju=new x(NaN,NaN,NaN,NaN).freeze(),this.Hl=Xe,this.An=xb,this.Hk=Xe,this.Xn=xb,this.Uu=this.Ru=Eb,this.ou=new ab(16,16,16,16).freeze(),this.Wu=!0,this.Wv=eg,this.Gq="auto",this.qi=this.Oi=this.Bi=this.kv=this.Ci=this.Di=this.Ei=this.pi=this.ti=this.ni=null,this.Jk=!1,this.mk=this.lk=this.eu=this.Le=!0,this.gu=this.fu=!1,this.ku=this.hu=this.Pu=this.Ou=this.lu=this.ju=this.uk=this.tk=this.sk=this.rk=this.pk=this.qk=this.ok=this.iu=this.wk=this.nk=this.vk=!0,this.Fv=this.Ev=16,this.Ne=new ab(5).freeze(),this.fv=999999999,this.Pd=null,Zh(this),this.gd=null,this.Li=!0,Yh(this),this.jc=new be,this.Li=!1,this.ba=new M,this.lf=!1,this.Qn=!0,this.Yb=this.Nf=!1,this.fa()},z.prototype.rebuildParts=z.prototype.hn=function(){for(var a=this.gx.k;a.next();){var b=a.value;(!b.Ld()||b instanceof S)&&t.m('Invalid node template in Diagram.nodeTemplateMap: template for "'+a.key+'" must be a Node or a simple Part, not a Group or Link: '+b)}for(a=this.Iw.k;a.next();)b=a.value,b instanceof S||t.m('Invalid group template in Diagram.groupTemplateMap: template for "'+a.key+'" must be a Group, not a normal Node or Link: '+b);for(a=this.$w.k;a.next();)b=a.value,b instanceof T||t.m('Invalid link template in Diagram.linkTemplateMap: template for "'+a.key+'" must be a Link, not a normal Node or simple Part: '+b);for(a=t.Db(),b=this.selection.k;b.next();){var c=b.value.data;c&&a.push(c)}for(var b=t.Db(),d=this.Kw.k;d.next();)(c=d.value.data)&&b.push(c);for(var c=t.Db(),e=this.jh.k;e.next();)d=e.value,d.data&&(c.push(d.data),c.push(d.location));for(e=this.links.k;e.next();)d=e.value,d.data&&(c.push(d.data),c.push(d.location));for(e=this.sl.k;e.next();)d=e.value,d.data&&(c.push(d.data),c.push(d.location));for(d=this.ba,d instanceof M&&mj(this,d.hj),mj(this,d.Gg),nj(this,d.Gg),d instanceof M&&oj(this,d.hj),d=0;d<a.length;d++)(e=this.fh(a[d]))&&(e.eb=!0);for(d=0;d<b.length;d++)(e=this.fh(b[d]))&&(e.zg=!0);for(d=0;d<c.length;d+=2)(e=this.fh(c[d]))&&(e.location=c[d+1]);t.ya(a),t.ya(b),t.ya(c)},z.prototype.getCategoryForNodeData=function(a){var b=this.ba,c=b.getCategoryForNodeData(a),d=!1;return b instanceof M&&(d=b.XI(a)),d&&""===c&&(c="LinkLabel"),c},z.prototype.findTemplateForNodeData=function(a,b){var c=!1,d=this.ba;return d instanceof M&&(c=d.sA(a)),c?(c=this.Iw.za(b),null===c&&(c=this.Iw.za(""),null===c&&(t.TG||(t.TG=!0,t.trace('No Group template found for category "'+b+'"'),t.trace("  Using default group template")),c=this.TB))):(c=this.gx.za(b),null===c&&(c=this.gx.za(""),null===c&&(t.WG||(t.WG=!0,t.trace('No Node template found for category "'+b+'"'),t.trace("  Using default node template")),c=this.VB))),c instanceof C?c:null},z.prototype.getCategoryForLinkData=function(a){var b=this.ba,c="";return b instanceof M?c=b.getCategoryForLinkData(a):b instanceof Kd&&(c=b.JI(a)),c},z.prototype.findTemplateForLinkData=function(a,b){var c=this.$w.za(b);return null===c&&(c=this.$w.za(""),null===c&&(t.VG||(t.VG=!0,t.trace('No Link template found for category "'+b+'"'),t.trace("  Using default link template")),c=this.UB)),c instanceof T?c:null},z.prototype.findPartForKey=z.prototype.FI=function(a){return null===a||void 0===a?null:(a=this.ba.uf(a),null===a?null:(a=this.ri.za(a),a instanceof C?a:null))},z.prototype.findNodeForKey=z.prototype.Ve=function(a){return null===a||void 0===a?null:(a=this.ba.uf(a),null===a?null:(a=this.ri.za(a),a instanceof R?a:null))},z.prototype.findPartForData=z.prototype.fh=function(a){if(null===a)return null;var b=this.ri.za(a);return b instanceof C?b:(b=this.Ak.za(a),b instanceof C?b:null)},z.prototype.findNodeForData=z.prototype.Ew=function(a){return null===a?null:(a=this.ri.za(a),a instanceof R?a:null)},z.prototype.findLinkForData=z.prototype.Qf=function(a){return null===a?null:(a=this.Ak.za(a),a instanceof T?a:null)},t.g(z,"nodeTemplate",z.prototype.sJ),t.defineProperty(z,{sJ:"nodeTemplate"},function(){return this.Fi.za("")},function(a){var b=this.Fi.za("");b!==a&&(t.l(a,C,z,"nodeTemplate"),this.Fi.add("",a),this.j("nodeTemplate",b,a),this.la.vb||this.hn())}),t.g(z,"nodeTemplateMap",z.prototype.gx),t.defineProperty(z,{gx:"nodeTemplateMap"},function(){return this.Fi},function(a){var b=this.Fi;b!==a&&(t.l(a,ia,z,"nodeTemplateMap"),this.Fi=a,this.j("nodeTemplateMap",b,a),this.la.vb||this.hn())}),t.g(z,"groupTemplate",z.prototype.MI),t.defineProperty(z,{MI:"groupTemplate"},function(){return this.Ek.za("")},function(a){var b=this.Ek.za("");b!==a&&(t.l(a,S,z,"groupTemplate"),this.Ek.add("",a),this.j("groupTemplate",b,a),this.la.vb||this.hn())}),t.g(z,"groupTemplateMap",z.prototype.Iw),t.defineProperty(z,{Iw:"groupTemplateMap"},function(){return this.Ek},function(a){var b=this.Ek;b!==a&&(t.l(a,ia,z,"groupTemplateMap"),this.Ek=a,this.j("groupTemplateMap",b,a),this.la.vb||this.hn())}),t.g(z,"linkTemplate",z.prototype.jJ),t.defineProperty(z,{jJ:"linkTemplate"},function(){return this.zj.za("")},function(a){var b=this.zj.za("");b!==a&&(t.l(a,T,z,"linkTemplate"),this.zj.add("",a),this.j("linkTemplate",b,a),this.la.vb||this.hn())}),t.g(z,"linkTemplateMap",z.prototype.$w),t.defineProperty(z,{$w:"linkTemplateMap"},function(){return this.zj},function(a){var b=this.zj;b!==a&&(t.l(a,ia,z,"linkTemplateMap"),this.zj=a,this.j("linkTemplateMap",b,a),this.la.vb||this.hn())}),t.g(z,"isMouseCaptured",z.prototype.Kd),t.defineProperty(z,{Kd:"isMouseCaptured"},function(){return this.uC},function(a){var b=this.gb;null!==b&&(a?(this.R.bubbles=!1,b.removeEventListener("mousemove",this.Dp,!1),b.removeEventListener("mousedown",this.Cp,!1),b.removeEventListener("mouseup",this.Fp,!1),b.removeEventListener("mousewheel",this.hh,!1),b.removeEventListener("DOMMouseScroll",this.hh,!1),b.removeEventListener("mouseout",this.Ep,!1),window.addEventListener("mousemove",this.Dp,!0),window.addEventListener("mousedown",this.Cp,!0),window.addEventListener("mouseup",this.Fp,!0),window.addEventListener("mousewheel",this.hh,!0),window.addEventListener("DOMMouseScroll",this.hh,!0),window.addEventListener("mouseout",this.Ep,!0),window.addEventListener("selectstart",this.preventDefault,!1)):(window.removeEventListener("mousemove",this.Dp,!0),window.removeEventListener("mousedown",this.Cp,!0),window.removeEventListener("mouseup",this.Fp,!0),window.removeEventListener("mousewheel",this.hh,!0),window.removeEventListener("DOMMouseScroll",this.hh,!0),window.removeEventListener("mouseout",this.Ep,!0),window.removeEventListener("selectstart",this.preventDefault,!1),b.addEventListener("mousemove",this.Dp,!1),b.addEventListener("mousedown",this.Cp,!1),b.addEventListener("mouseup",this.Fp,!1),b.addEventListener("mousewheel",this.hh,!1),b.addEventListener("DOMMouseScroll",this.hh,!1),b.addEventListener("mouseout",this.Ep,!1)),this.uC=a)}),t.g(z,"position",z.prototype.position),t.defineProperty(z,{position:"position"},function(){return this.Ra},function(a){var b=this.Ra;if(!b.M(a)){t.l(a,w,z,"position");var c=this.xb.copy();if(c.x=b.x,c.y=b.y,a=a.copy(),!this.Yb&&null!==this.gb){this.Yb=!0;var d=this.scale;Fi(this,a,this.Gd,this.Fb/d,this.Eb/d,this.An),this.Yb=!1}this.Ra=a.Z(),a=this.Ub,a.sd&&Oh(a,b,this.Ra),this.Yb||this.Et(c,this.xb)}}),t.g(z,"initialPosition",z.prototype.WE),t.defineProperty(z,{WE:"initialPosition"},function(){return this.Su},function(a){this.Su.M(a)||(t.l(a,w,z,"initialPosition"),this.Su=a.Z())}),t.g(z,"initialScale",z.prototype.XE),t.defineProperty(z,{XE:"initialScale"},function(){return this.Tu},function(a){this.Tu!==a&&(t.i(a,"number",z,"initialScale"),this.Tu=a)}),t.g(z,"grid",z.prototype.lp),t.defineProperty(z,{lp:"grid"},function(){return null===this.gd&&xi(this),this.gd},function(a){var b=this.gd;if(b!==a){null===b&&(xi(this),b=this.gd),t.l(a,y,z,"grid"),a.type!==yi&&t.m("Diagram.grid must be a Panel of type Panel.Grid");var c=b.ja;null!==c&&c.remove(b),this.gd=a,a.name="GRID",null!==c&&c.add(a),Li(this),this.fa(),this.j("grid",b,a)}}),t.A(z,{xb:"viewportBounds"},function(){var a=this.AD;if(null===this.gb)return a;var b=this.Ra,c=this.xc;return a.p(b.x,b.y,Math.max(this.Fb,0)/c,Math.max(this.Eb,0)/c),a}),t.g(z,"fixedBounds",z.prototype.eA),t.defineProperty(z,{eA:"fixedBounds"},function(){return this.Ju},function(a){var b=this.Ju;b.M(a)||(t.l(a,x,z,"fixedBounds"),this.Ju=a=a.Z(),this.Oc(),this.j("fixedBounds",b,a))}),t.A(z,{Gd:"documentBounds"},function(){return this.Eu}),t.g(z,"scale",z.prototype.scale),t.defineProperty(z,{scale:"scale"},function(){return this.xc},function(a){
var b=this.xc;if(t.q(a,z,"scale"),a<this.Cg&&(a=this.Cg),a>this.Bg&&(a=this.Bg),b!==a){if(this.xc=a,!this.Yb&&!this.Bd&&(this.Yb=!0,null!==this.gb)){var c=this.xb.copy(),d=this.Fb,e=this.Eb;c.width=this.Fb/b,c.height=this.Eb/b;var f=this.$f.copy();if(isNaN(f.x))switch(this.ow){case bc:f.x=0;break;case cc:f.x=d-1;break;case Hb:f.x=d/2;break;case xb:case gc:f.x=d/2}if(isNaN(f.y))switch(this.ow){case ac:f.y=0;break;case dc:f.y=e-1;break;case Hb:f.y=e/2;break;case xb:case gc:f.y=e/2}this.position=new w(this.Ra.x+f.x/b-f.x/a,this.Ra.y+f.y/b-f.y/a),this.Yb=!1,this.Et(c,this.xb)}this.fa(),Ki(this)}}),t.g(z,"autoScale",z.prototype.Fm),t.defineProperty(z,{Fm:"autoScale"},function(){return this.Hl},function(a){var b=this.Hl;b!==a&&(t.Aa(a,z,z,"autoScale"),this.Hl=a,this.j("autoScale",b,a),a!==Xe&&Di(this))}),t.g(z,"initialAutoScale",z.prototype.SI),t.defineProperty(z,{SI:"initialAutoScale"},function(){return this.Hk},function(a){var b=this.Hk;b!==a&&(t.Aa(a,z,z,"initialAutoScale"),this.Hk=a,this.j("initialAutoScale",b,a))}),t.g(z,"initialViewportSpot",z.prototype.YE),t.defineProperty(z,{YE:"initialViewportSpot"},function(){return this.Uu},function(a){var b=this.Uu;b!==a&&(t.l(a,H,z,"initialViewportSpot"),a.xd()||t.m("initialViewportSpot must be a real Spot: "+a),this.Uu=a,this.j("initialViewportSpot",b,a))}),t.g(z,"initialDocumentSpot",z.prototype.VE),t.defineProperty(z,{VE:"initialDocumentSpot"},function(){return this.Ru},function(a){var b=this.Ru;b!==a&&(t.l(a,H,z,"initialDocumentSpot"),a.xd()||t.m("initialViewportSpot must be a real Spot: "+a),this.Ru=a,this.j("initialDocumentSpot",b,a))}),t.g(z,"minScale",z.prototype.Cg),t.defineProperty(z,{Cg:"minScale"},function(){return this.hv},function(a){t.q(a,z,"minScale");var b=this.hv;b!==a&&(a>0?(this.hv=a,this.j("minScale",b,a),a>this.scale&&(this.scale=a)):t.ka(a,"> 0",z,"minScale"))}),t.g(z,"maxScale",z.prototype.Bg),t.defineProperty(z,{Bg:"maxScale"},function(){return this.ev},function(a){t.q(a,z,"maxScale");var b=this.ev;b!==a&&(a>0?(this.ev=a,this.j("maxScale",b,a),a<this.scale&&(this.scale=a)):t.ka(a,"> 0",z,"maxScale"))}),t.g(z,"zoomPoint",z.prototype.$f),t.defineProperty(z,{$f:"zoomPoint"},function(){return this.$v},function(a){this.$v.M(a)||(t.l(a,w,z,"zoomPoint"),this.$v=a=a.Z())}),t.g(z,"contentAlignment",z.prototype.ow),t.defineProperty(z,{ow:"contentAlignment"},function(){return this.An},function(a){var b=this.An;b.M(a)||(t.l(a,H,z,"contentAlignment"),this.An=a=a.Z(),this.j("contentAlignment",b,a),Di(this))}),t.g(z,"initialContentAlignment",z.prototype.TI),t.defineProperty(z,{TI:"initialContentAlignment"},function(){return this.Xn},function(a){var b=this.Xn;b.M(a)||(t.l(a,H,z,"initialContentAlignment"),this.Xn=a=a.Z(),this.j("initialContentAlignment",b,a))}),t.g(z,"padding",z.prototype.padding),t.defineProperty(z,{padding:"padding"},function(){return this.Ne},function(a){"number"==typeof a?a=new ab(a):t.l(a,ab,z,"padding");var b=this.Ne;b.M(a)||(this.Ne=a=a.Z(),this.Oc(),this.j("padding",b,a))}),t.A(z,{jh:"nodes"},function(){return this.rv.k}),t.A(z,{links:"links"},function(){return this.av.k}),t.A(z,{sl:"parts"},function(){return this.zb.k}),z.prototype.findTopLevelGroups=function(){return this.Uk.k},t.g(z,"layout",z.prototype.jc),t.defineProperty(z,{jc:"layout"},function(){return this.Pd},function(a){var b=this.Pd;b!==a&&(t.l(a,be,z,"layout"),null!==b&&(b.h=null,b.group=null),this.Pd=a,a.h=this,a.group=null,this.mu=!0,this.j("layout",b,a),this.te())}),z.prototype.layoutDiagram=function(a){Bi(this),a&&Mj(this,!0),Ni(this,!1)},t.g(z,"isTreePathToChildren",z.prototype.pd),t.defineProperty(z,{pd:"isTreePathToChildren"},function(){return this.Wu},function(a){var b=this.Wu;if(b!==a&&(t.i(a,"boolean",z,"isTreePathToChildren"),this.Wu=a,this.j("isTreePathToChildren",b,a),!this.la.vb))for(a=this.jh;a.next();)Qj(a.value)}),z.prototype.findTreeRoots=function(){for(var a=new B(R),b=this.jh.k;b.next();){var c=b.value;c.sp&&null===c.ft()&&a.add(c)}return a.k},t.g(z,"isCollapsingExpanding",z.prototype.Wd),t.defineProperty(z,{Wd:null},function(){return this.mC},function(a){this.mC=a}),z.prototype.addDiagramListener=z.prototype.Jz=function(a,b){t.i(a,"string",z,"addDiagramListener:name"),t.i(b,"function",z,"addDiagramListener:listener");var c=Rj(this,a);null!==c&&c.add(b)},z.prototype.removeDiagramListener=z.prototype.OF=function(a,b){t.i(a,"string",z,"removeDiagramListener:name"),t.i(b,"function",z,"addDiagramListener:listener");var c=Rj(this,a);null!==c&&c.remove(b)},z.prototype.raiseDiagramEvent=z.prototype.Ba=function(a,b,c){e&&t.i(a,"string",z,"raiseDiagramEvent:name");var d=Rj(this,a),f=new rd;if(f.h=this,f.name=ja(this,a),void 0!==b&&(f.Ax=b),void 0!==c&&(f.kx=c),a=d.length,1===a)(d=d.wa(0))(f);else if(0!==a)for(b=d.Ie(),c=0;a>c;c++)(d=b[c])(f);return f.cancel},z.prototype.simulatedMouseMove=z.prototype.dB=function(a,b,c){if(null!==ff){var d=ff.h;c instanceof z||(c=null);var e=gf;return c!==e&&(null!==e&&e!==d&&null!==e.wb.Hd&&(tf(e),ff.pt=!1,e.wb.Hd.doSimulatedDragLeave()),gf=c,null!==c&&c!==d&&null!==c.wb.Hd&&(zf(),e=c.wb.Hd,wf.contains(e)||wf.add(e),c.wb.Hd.doSimulatedDragEnter())),null!==c&&c!==d&&c.Kz&&!c.ab&&c.Bm?(d=c.wb.Hd,null!==d&&(null!==a?b=c.Un(a):null===b&&(b=new w),c.ec.ea=b,c.ec.ak=!1,c.ec.lj=!1,d.doSimulatedDragOver()),!0):!1}return!1},z.prototype.simulatedMouseUp=z.prototype.rG=function(a,b,c,d){if(null!==ff){null===d&&(d=b),b=gf;var e=ff.h;if(d!==b){if(null!==b&&b!==e&&null!==b.wb.Hd)return tf(b),ff.pt=!1,b.wb.Hd.doSimulatedDragLeave(),!1;gf=d,null!==d&&null!==d.wb.Hd&&(zf(),b=d.wb.Hd,wf.contains(b)||wf.add(b),d.wb.Hd.doSimulatedDragEnter())}if(null===d)return ff.doCancel(),!0;if(d!==this)return null!==a&&(c=d.Un(a)),d.ec.ea=c,d.ec.ak=!1,d.ec.lj=!0,a=d.wb.Hd,null!==a&&a.doSimulatedDrop(),a=ff,null!==a&&(d=a.mayCopy(),a.gf=d?"Copy":"Move",a.stopTool()),!0}return!1},t.g(z,"autoScrollRegion",z.prototype.OD),t.defineProperty(z,{OD:"autoScrollRegion"},function(){return this.ou},function(a){"number"==typeof a?a=new ab(a):t.l(a,ab,z,"autoScrollRegion");var b=this.ou;b.M(a)||(this.ou=a=a.Z(),this.Oc(),this.j("autoScrollRegion",b,a))}),z.prototype.makeSVG=z.prototype.makeSvg=function(a){return void 0===a&&(a={}),a.context="svg",a=ak(this,a),null!==a?a.Bl:null},z.prototype.makeImage=function(a){void 0===a&&(a={});var b=(a.document||document).createElement("img");return b.src=this.kJ(a),b instanceof HTMLImageElement?b:null},z.prototype.makeImageData=z.prototype.kJ=function(a){void 0===a&&(a={});var b=ak(this,a);return null!==b?b.toDataURL(a.type,a.details):""},z.inherit=function(a,b){t.i(a,"function",z,"inherit"),t.i(b,"function",z,"inherit"),b.tH&&t.m("Cannot inherit from "+t.xg(b)),t.Ka(a,b)},t.ga("Palette",bk),t.Ka(bk,z),t.ga("Overview",Zi),t.Ka(Zi,z),Zi.prototype.computePixelRatio=function(){return 1},Zi.prototype.Ue=function(){if(null===this.Nb&&t.m("No div specified"),null===this.gb&&t.m("No canvas specified"),this.ve){var a=this.Gi;if(!(null===a||a.Ub.yg||a.Ub.sd||!this.nH&&a.wb.Hd.ia)){var b=a.lp;(b&&b.visible&&isNaN(b.width)||isNaN(b.height))&&Li(a);var c=this.gb,b=this.Sg,d=this.yz,f=this.vH;d.width=c.width,d.height=c.height,b.du="",b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,this.gb.width,this.gb.height);var g=this.md;g.reset(),1!==this.xc&&g.scale(this.scale),0===this.position.x&&0===this.position.y||g.translate(-this.Ra.x,-this.Ra.y),b.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy);for(var h=this.Gu,i=this.xb,j=a.Rb.length,g=0;j>g;g++){var k=a.Rb.n[g],l=b,m=i,n=h;if(void 0===n&&(n=!0),n||!k.rc)for(var k=k.zb,n=this.scale,o=k.length,p=0;o>p;p++){var q=k.n[p],r=q.oa;r.Tf(m)&&(1<r.width*n||1<r.height*n?q.Ue(l,this):Rh(q,l))}}for(f.drawImage(c,0,0),e&&e.Rz&&(f.fillStyle="red",f.fillRect(0,d.height/2,d.width,4)),a=this.Rb.n,c=this.Rb.length,g=0;c>g;g++)a[g].Ue(b,this);this.ve=this.Ik=!1}}},t.g(Zi,"observed",Zi.prototype.uJ),t.defineProperty(Zi,{uJ:"observed"},function(){return this.Gi},function(a){var b=this.Gi;null!==a&&t.l(a,z,Zi,"observed"),b===a||a instanceof Zi||(null!==b&&(this.remove(this.vg),b.OF("ViewportBoundsChanged",this.IF),b.OF("DocumentBoundsChanged",this.HF),b.lm.remove(this)),this.Gi=a,null!==a&&(a.Jz("ViewportBoundsChanged",this.IF),a.Jz("DocumentBoundsChanged",this.HF),a.lm.add(this),this.add(this.vg),ek(this)),this.Oc(),this.j("observed",b,a))}),t.g(Zi,"box",Zi.prototype.vg),t.defineProperty(Zi,{vg:"box"},function(){return this.Kl},function(a){var b=this.Kl;b!==a&&(this.Kl=a,this.remove(b),this.add(this.Kl),ek(this),this.j("box",b,a))}),t.g(Zi,"drawsTemporaryLayers",Zi.prototype.CI),t.defineProperty(Zi,{CI:"drawsTemporaryLayers"},function(){return this.Gu},function(a){this.Gu!==a&&(this.Gu=a,this.RA())}),Zi.prototype.qf=function(){var a=this.Gi;return null===a?F.gH:a.Gd},Zi.prototype.Et=function(a){this.Yb||(zi(this),this.fa(),Ki(this),this.Oc(),ek(this),this.Ba("ViewportBoundsChanged",a))},t.Ka(dk,ae),dk.prototype.doStart=function(){this.ia=this.h.Kd=!0},dk.prototype.doMouseMove=function(){if(this.ia){var a=this.h;if(null!==a&&null!==a.Gi){var b=a.Gi;if(null!==b){var c=b.xb,d=a.R.ea;b.position=new w(d.x-c.width/2,d.y-c.height/2),a.te()}}}},dk.prototype.doMouseUp=function(){this.ia&&this.doMouseMove(),this.stopTool()},dk.prototype.doStop=function(){this.ia=!1;var a=this.h;null!==a&&(a.Kd=!1,ek(a))},t.ga("Brush",ea);var Nd;ea.Solid=Nd=t.w(ea,"Solid",0);var Yd;ea.Linear=Yd=t.w(ea,"Linear",1);var Zd;ea.Radial=Zd=t.w(ea,"Radial",2);var fk;ea.Pattern=fk=t.w(ea,"Pattern",4);var da;ea.isValidColor=da=function(a){if("black"===a)return!0;if(""===a)return!1;e&&t.i(a,"string",ea,"isValidColor");var b=t.ln;b.fillStyle="#000000";var c=b.fillStyle;return b.fillStyle=a,b.fillStyle!==c?!0:(b.fillStyle="#FFFFFF",c=b.fillStyle,b.fillStyle=a,b.fillStyle!==c)},ea.prototype.copy=function(){var a=new ea;return a.da=this.da,a.zn=this.zn,a.Ao=this.Ao.Z(),a.On=this.On.Z(),a.Mv=this.Mv,a.Hu=this.Hu,null!==this.Qg&&(a.Qg=this.Qg.copy()),a.yv=this.yv,a},ea.prototype.Ja=function(){return this.freeze(),Object.freeze(this),this},ea.prototype.freeze=function(){return this.nb=!0,null!==this.Qg&&this.Qg.freeze(),this},ea.prototype.Ma=function(){return Object.isFrozen(this)&&t.m("cannot thaw constant: "+this),this.nb=!1,null!==this.Qg&&this.Qg.Ma(),this},ea.prototype.toString=function(){var a="Brush(";if(this.type===Nd)a+=this.color;else if(a=this.type===Yd?a+"Linear ":this.type===Zd?a+"Radial ":this.type===fk?a+"Pattern ":a+"(unknown) ",a+=this.start+" "+this.end,null!==this.Vo)for(var b=this.Vo.k;b.next();)a+=" "+b.key+":"+b.value;return a+")"},ea.prototype.addColorStop=ea.prototype.addColorStop=function(a,b){t.L(this),("number"!=typeof a||!isFinite(a)||a>1||0>a)&&t.ka(a,"0 <= loc <= 1",ea,"addColorStop:loc"),t.i(b,"string",ea,"addColorStop:color"),null===this.Qg&&(this.Qg=new ia("number","string")),this.Qg.add(a,b),this.da===Nd&&(this.type=Yd),this.Rg=null},t.g(ea,"type",ea.prototype.type),t.defineProperty(ea,{type:"type"},function(){return this.da},function(a){t.L(this,a),t.Aa(a,ea,ea,"type"),this.da=a,this.start.Ge()&&(a===Yd?this.start=Fb:a===Zd&&(this.start=Hb)),this.end.Ge()&&(a===Yd?this.end=Mb:a===Zd&&(this.end=Hb)),this.Rg=null}),t.g(ea,"color",ea.prototype.color),t.defineProperty(ea,{color:"color"},function(){return this.zn},function(a){t.L(this,a),t.i(a,"string",ea,"color"),this.zn=a,this.Rg=null}),t.g(ea,"start",ea.prototype.start),t.defineProperty(ea,{start:"start"},function(){return this.Ao},function(a){t.L(this,a),a instanceof H||t.bc(a,"Spot",ea,"start"),this.Ao=a.Z(),this.Rg=null}),t.g(ea,"end",ea.prototype.end),t.defineProperty(ea,{end:"end"},function(){return this.On},function(a){t.L(this,a),a instanceof H||t.bc(a,"Spot",ea,"end"),this.On=a.Z(),this.Rg=null}),t.g(ea,"startRadius",ea.prototype.Vp),t.defineProperty(ea,{Vp:"startRadius"},function(){return this.Mv},function(a){t.L(this,a),t.q(a,ea,"startRadius"),0>a&&t.ka(a,">= zero",ea,"startRadius"),this.Mv=a,this.Rg=null}),t.g(ea,"endRadius",ea.prototype.ap),t.defineProperty(ea,{ap:"endRadius"},function(){return this.Hu},function(a){t.L(this,a),t.q(a,ea,"endRadius"),0>a&&t.ka(a,">= zero",ea,"endRadius"),this.Hu=a,this.Rg=null}),t.g(ea,"colorStops",ea.prototype.Vo),t.defineProperty(ea,{Vo:"colorStops"},function(){return this.Qg},function(a){t.L(this,a),e&&t.l(a,ia,ea,"colorStops"),this.Qg=a,this.Rg=null}),t.g(ea,"pattern",ea.prototype.pattern),t.defineProperty(ea,{pattern:"pattern"},function(){return this.yv},function(a){t.L(this,a),this.yv=a,this.Rg=null}),ea.randomColor=function(a,b){void 0===a&&(a=128),e&&(t.q(a,ea,"randomColor:min"),(0>a||a>255)&&t.ka(a,"0 <= min <= 255",ea,"randomColor:min")),void 0===b&&(b=Math.max(a,255)),e&&(t.q(b,ea,"randomColor:max"),(a>b||b>255)&&t.ka(b,"min <= max <= 255",ea,"randomColor:max"));var c=Math.abs(b-a),d=Math.floor(a+Math.random()*c).toString(16),f=Math.floor(a+Math.random()*c).toString(16),c=Math.floor(a+Math.random()*c).toString(16);return 2>d.length&&(d="0"+d),2>f.length&&(f="0"+f),2>c.length&&(c="0"+c),"#"+d+f+c},t.ga("GraphObject",Q),t.Xh(Q),Q.prototype.cloneProtected=function(a){if(a.ma=6144|this.ma,a.Lf=this.Lf,a.Zb=this.Zb,a.Mb=this.Mb,a.vc=this.vc,a.Ra.assign(this.Ra),a.jf.assign(this.jf),a.Ej=this.Ej.Z(),a.Dj=this.Dj.Z(),a.Mk=this.Mk.copy(),a.xc=this.xc,a.wn=this.wn,a.Oh=this.Oh,a.sr=this.sr.Z(),a.Wc.assign(this.Wc),a.cc.assign(this.cc),a.hd.assign(this.hd),a.Nr=this.Nr,null!==this.P){var b=this.P;a.P={Dh:b.Dh.Z(),Th:b.Th.Z(),Ah:b.Ah,Qh:b.Qh,zh:b.zh,Ph:b.Ph,Ch:b.Ch,Sh:b.Sh}}else a.P=null;if(a.Nq=this.Nq,a.Oq=this.Oq,a.ys=this.ys,a.zs=this.zs,a.ue=this.ue.Z(),a.mq=this.mq.Z(),a.as=this.as,a.Jj=this.Jj,a.tq=this.tq,a.rj=this.rj,a.es=this.es,a.ds=this.ds,a.fs=this.fs.Z(),a.gs=this.gs,a.Aq=this.Aq,null!==this.Q?(b=this.Q,a.Q={ni:b.ni,ti:b.ti,pi:b.pi,Dr:b.Dr,Er:b.Er,Ei:b.Ei,Di:b.Di,Ci:b.Ci,Br:b.Br,Cr:b.Cr,Bi:b.Bi,iq:b.iq,jq:b.jq,kq:b.kq,hq:b.hq,Oi:b.Oi,qi:b.qi}):a.Q=null,a.Kc=this.Kc,Array.isArray(this.Ml))for(a.Ml=this.Ml.slice(0),b=0;b<this.Ml.length;b++){var c=this.Ml[b];a[c]=this[c]}null!==this.oi&&(a.oi=this.oi.copy())},Q.prototype.Yh=function(a){a.Pr=null,a.nm=null,a.ha()},Q.prototype.copy=function(){var a=new this.constructor;return this.cloneProtected(a),a},Q.prototype.toString=function(){return t.xg(Object.getPrototypeOf(this))+"#"+t.od(this)};var Vg;Q.None=Vg=t.w(Q,"None",0);var gk;Q.Default=gk=t.w(Q,"Default",0);var hk;Q.Vertical=hk=t.w(Q,"Vertical",4);var ik;Q.Horizontal=ik=t.w(Q,"Horizontal",5);var Cc;Q.Fill=Cc=t.w(Q,"Fill",3);var Xg;Q.Uniform=Xg=t.w(Q,"Uniform",1);var Yg;Q.UniformToFill=Yg=t.w(Q,"UniformToFill",2),aa=Q.prototype,aa.Fe=function(){this.P={Dh:wb,Th:wb,Ah:10,Qh:10,zh:kk,Ph:kk,Ch:0,Sh:0}},aa.Ic=function(a,b,c,d,e,f,g){var h=this.S;null!==h&&(h.gn(a,b,c,d,e,f,g),0!==(1024&this.ma)&&c===this&&a===vd&&mk(this,h,b))},aa.j=function(a,b,c){this.Ic(vd,a,this,b,c)},aa.AE=function(a,b,c){if(!1===this.Bf)return!1;var d=this.Pa;b=a.Zj(b);var e=!1;return c&&(e=Ra(a.x,a.y,0,0,0,d.height)<b||Ra(a.x,a.y,0,d.height,d.width,d.height)<b||Ra(a.x,a.y,d.width,d.height,d.width,0)<b||Ra(a.x,a.y,d.width,0,0,0)<b),c||(e=Ra(a.x,a.y,0,0,0,d.height)<b&&Ra(a.x,a.y,0,d.height,d.width,d.height)<b&&Ra(a.x,a.y,d.width,d.height,d.width,0)<b&&Ra(a.x,a.y,d.width,0,0,0)<b),e},aa.Hf=function(){return!0},Q.prototype.containsPoint=Q.prototype.Fa=function(a){e&&t.l(a,w,Q,"containsPoint:p");var b=t.K();b.assign(a),this.transform.Sa(b);var c=this.oa;if(!c.N())return!1;if(t.gB){var d=this.Pa,f=this.ek()*(null!==this.h?this.h.scale:1),g=1/f;if(10>d.width*f&&10>d.height*f)return a=mb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y),t.B(b),a}return(void 0!==this.pc||this instanceof V?mb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.Fa(b))?this.oi&&!this.oi.Fa(b)?!1:null!==this.vc&&c.Fa(b)||null!==this.Mb&&this.hd.Fa(a)?!0:(t.B(b),this.Uj(a)):(t.B(b),!1)},Q.prototype.Uj=function(a){var b=this.Pa;return mb(0,0,b.width,b.height,a.x,a.y)},Q.prototype.containsRect=Q.prototype.Vj=function(a){if(e&&t.l(a,x,Q,"containsRect:r"),0===this.angle)return this.oa.Vj(a);var b=this.Pa,b=t.ik(0,0,b.width,b.height),c=this.transform,d=!1,f=t.mc(a.x,a.y);return b.Fa(c.ai(f))&&(f.p(a.x,a.bottom),b.Fa(c.ai(f))&&(f.p(a.right,a.bottom),b.Fa(c.ai(f))&&(f.p(a.right,a.y),b.Fa(c.ai(f))&&(d=!0)))),t.B(f),t.hc(b),d},Q.prototype.containedInRect=Q.prototype.Km=function(a,b){if(e&&t.l(a,x,Q,"containedInRect:r"),void 0===b)return a.Vj(this.oa);var c=this.Pa,d=!1,f=t.mc(0,0);return a.Fa(b.Sa(f))&&(f.p(0,c.height),a.Fa(b.Sa(f))&&(f.p(c.width,c.height),a.Fa(b.Sa(f))&&(f.p(c.width,0),a.Fa(b.Sa(f))&&(d=!0)))),d},Q.prototype.intersectsRect=Q.prototype.Tf=function(a,b){if(e&&t.l(a,x,Q,"intersectsRect:r"),void 0===b&&(b=this.transform,0===this.angle))return a.Tf(this.oa);var c=this.Pa,d=b,f=t.mc(0,0),g=t.mc(0,c.height),h=t.mc(c.width,c.height),i=t.mc(c.width,0),j=!1;if(a.Fa(d.Sa(f))||a.Fa(d.Sa(g))||a.Fa(d.Sa(h))||a.Fa(d.Sa(i)))j=!0;else{var c=t.ik(0,0,c.width,c.height),k=t.mc(a.x,a.y);c.Fa(d.ai(k))?j=!0:(k.p(a.x,a.bottom),c.Fa(d.ai(k))?j=!0:(k.p(a.right,a.bottom),c.Fa(d.ai(k))?j=!0:(k.p(a.right,a.y),c.Fa(d.ai(k))&&(j=!0)))),t.B(k),t.hc(c),!j&&(F.Nw(a,f,g)||F.Nw(a,g,h)||F.Nw(a,h,i)||F.Nw(a,i,f))&&(j=!0)}return t.B(f),t.B(g),t.B(h),t.B(i),j},Q.prototype.getDocumentPoint=Q.prototype.pb=function(a,b){void 0===b&&(b=new w),a.Ge()&&t.m("getDocumentPoint:s Spot must be real: "+a.toString());var c=this.Pa;return b.p(a.x*c.width+a.offsetX,a.y*c.height+a.offsetY),this.me.Sa(b),b},Q.prototype.getDocumentAngle=Q.prototype.hl=function(){var a=this.me,a=180/Math.PI*Math.atan2(a.m12,a.m11);return 0>a&&(a+=360),a},Q.prototype.getDocumentScale=Q.prototype.ek=function(){var a=this.xc;return null!==this.ja?a*this.ja.ek():a},Q.prototype.getLocalPoint=Q.prototype.JE=function(a,b){return void 0===b&&(b=new w),b.assign(a),this.me.ai(b),b},Q.prototype.getNearestIntersectionPoint=Q.prototype.ll=function(a,b,c){return this.kp(a.x,a.y,b.x,b.y,c)},aa=Q.prototype,aa.kp=function(a,b,c,d,e){var f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),h=f.m22*g,i=-f.m12*g,j=-f.m21*g,k=f.m11*g,l=g*(f.m21*f.dy-f.m22*f.dx),m=g*(f.m12*f.dx-f.m11*f.dy);return null!==this.$k?(f=this.oa,F.ll(f.left,f.top,f.right,f.bottom,a,b,c,d,e)):(g=a*h+b*j+l,a=a*i+b*k+m,b=c*h+d*j+l,c=c*i+d*k+m,e.p(0,0),d=this.Pa,c=F.ll(0,0,d.width,d.height,g,a,b,c,e),e.transform(f),c)},aa.Lc=function(a,b,c,d,e){sk(this);var f=t.Gf();if(f.assign(this.cc),this.cc.Ma(),!1===Ri(this)){var g=this.cc;g.x=a,g.y=b,g.width=c,g.height=d}else this.Tj(a,b,c,d);this.cc.freeze(),this.oi=void 0===e?null:e,c=!1,void 0!==e?c=!0:this.ja&&(e=this.ja.hd,d=this.Ga,null!==this.$k&&(d=this.cc),c=b+d.height,d=a+d.width,c=!(a+.05>=0&&d<=e.width+.05&&b+.05>=0&&c<=e.height+.05),this instanceof na&&(a=this.hd,this.dv>a.height||this.no.Ag>a.width))&&(c=!0),this.ma=c?256|this.ma:-257&this.ma,this.cc.N()||t.m("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.cc.toString()),tk(this,f,this.cc),t.hc(f)},aa.Tj=function(){},aa.Ue=function(a,b){if(this.visible){var c=this.opacity,d=1;if(1!==c){if(0===c)return;d=a.globalAlpha,a.globalAlpha=d*c}if(a instanceof nc){a:if(this.visible){var f=null,g=a.Vw;if(this instanceof y&&(this.type===zk||this.type===Ak))Bk(this,a,b);else{var h=this.cc;if(0!==h.width&&0!==h.height&&!isNaN(h.x)&&!isNaN(h.y)){var i=this.transform,j=this.ja,k=this.kk;k.reset(),null!==j&&(j.Hf()?k.multiply(j.me):null!==j.ja&&k.multiply(j.ja.me)),k.multiply(this.md);var k=0!==(256&this.ma),l=!1;if(this instanceof na&&Ck(this,a),k){if(l=j.Hf()?j.Pa:j.oa,this.oi)var m=this.oi,n=m.x,o=m.y,p=m.width,m=m.height;else n=Math.max(h.x,l.x),o=Math.max(h.y,l.y),p=Math.min(h.right,l.right)-n,m=Math.min(h.bottom,l.bottom)-o;if(n>h.width+h.x||h.x>l.width+l.x||o>h.height+h.y||h.y>l.height+l.y)break a;l=!0,rc(a,1,0,0,1,0,0),a.save(),a.beginPath(),a.rect(n,o,p,m),a.clip()}if(n=!1,this instanceof C&&(n=!0,!this.La()))break a;if(o=!1,p=b.Sk,this.S&&p.drawShadows&&(o=this.S.gj),a.$i.cf=[1,0,0,1,0,0],null!==this.vc&&(Dk(this,a,this.vc,!0,!0),this.vc instanceof ea&&this.vc.type===Zd?(a.beginPath(),a.rect(h.x,h.y,h.width,h.height),Ek(a,this.vc,!0)):a.fillRect(h.x,h.y,h.width,h.height)),n&&this.gj&&p.drawShadows&&(rc(a,1,0,0,1,0,0),h=this.wm,a.shadowOffsetX=h.x,a.shadowOffsetY=h.y,a.shadowColor=this.vm,a.shadowBlur=this.um/b.scale,a.bb()),this instanceof y?rc(a,i.m11,i.m12,i.m21,i.m22,i.dx,i.dy):a.$i.cf=[i.m11,i.m12,i.m21,i.m22,i.dx,i.dy],null!==this.Mb){var m=this.Pa,h=i=0,p=m.width,m=m.height,q=0;this instanceof V&&(m=this.Ta.Pb,i=m.x,h=m.y,p=m.width,m=m.height,q=this.bh),Dk(this,a,this.Mb,!0),this.Mb instanceof ea&&this.Mb.type===Zd?(a.beginPath(),a.rect(i-q/2,h-q/2,p+q,m+q),Ek(a,this.Mb,!0)):a.fillRect(i-q/2,h-q/2,p+q,m+q)}if(o&&(null!==this.Mb||null!==this.vc||null!==j&&0!==(512&j.ma)||null!==j&&j.type===ci&&j.Dw()!==this)){Fk(this,!0);var r=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0}else Fk(this,!1);this.fl(a,b),o&&0!==(512&this.ma)==!0&&(a.shadowOffsetX=r[0],a.shadowOffsetY=r[1],a.shadowBlur=r[2]),n&&o&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),k&&(a.restore(),l&&a.vf.pop(),wi(b,a)),this instanceof y&&(f=a.vf.pop()),n&&o&&a.vf.pop(),null!==a.wE&&(null===f&&(g===a.Vw?(rc(a,1,0,0,1,0,0),r=a.vf.pop()):r=a.Vw,f=r),a.wE(this,f))}}}}else if(this instanceof y&&(this.type===zk||this.type===Ak))Bk(this,a,b);else if(k=this.cc,0!==k.width&&0!==k.height&&!isNaN(k.x)&&!isNaN(k.y)){if(r=this.transform,g=this.ja,j=this.kk,j.reset(),null!==g&&(g.Hf()?j.multiply(g.me):null!==g.ja&&j.multiply(g.ja.me)),j.multiply(this.md),j=0!==(256&this.ma),this instanceof na&&Ck(this,a),j){if(e&&e.BI&&t.trace("clip"+this.toString()),l=g.Hf()?g.Pa:g.oa,this.oi?(o=this.oi,i=o.x,h=o.y,n=o.width,o=o.height):(i=Math.max(k.x,l.x),h=Math.max(k.y,l.y),n=Math.min(k.right,l.right)-i,o=Math.min(k.bottom,l.bottom)-h),i>k.width+k.x||k.x>l.width+l.x||h>k.height+k.y||k.y>l.height+l.y)return void(1!==c&&(a.globalAlpha=d));a.save(),a.beginPath(),a.rect(i,h,n,o),a.clip()}if(h=b.Sk,l=!1,this instanceof C){if(l=!0,!this.La())return void(1!==c&&(a.globalAlpha=d));this.gj&&h.drawShadows&&(i=this.wm,a.shadowOffsetX=i.x*b.scale,a.shadowOffsetY=i.y*b.scale,a.shadowColor=this.vm,a.shadowBlur=this.um)}i=!1,this.S&&h.drawShadows&&(i=this.S.gj),null!==this.vc&&(Dk(this,a,this.vc,!0,!0),this.vc instanceof ea&&this.vc.type===Zd?(a.beginPath(),a.rect(k.x,k.y,k.width,k.height),Ek(a,this.vc,!0)):a.fillRect(k.x,k.y,k.width,k.height)),r.qt()||a.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),null!==this.Mb&&(o=this.Pa,h=k=0,n=o.width,o=o.height,p=0,this instanceof V&&(o=this.Ta.Pb,k=o.x,h=o.y,n=o.width,o=o.height,p=this.bh),Dk(this,a,this.Mb,!0),this.Mb instanceof ea&&this.Mb.type===Zd?(a.beginPath(),a.rect(k-p/2,h-p/2,n+p,o+p),Ek(a,this.Mb,!0)):a.fillRect(k-p/2,h-p/2,n+p,o+p)),i&&(null!==this.Mb||null!==this.vc||null!==g&&0!==(512&g.ma)||null!==g&&(g.type===ci||g.type===Tg)&&g.Dw()!==this)?(Fk(this,!0),f=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0):Fk(this,!1),this.fl(a,b),i&&0!==(512&this.ma)==!0&&(a.shadowOffsetX=f[0],a.shadowOffsetY=f[1],a.shadowBlur=f[2]),l&&i&&(a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),j?(a.restore(),this instanceof y?wi(b,a,!0):wi(b,a,!1)):r.qt()||(f=1/(r.m11*r.m22-r.m12*r.m21),a.transform(r.m22*f,-r.m12*f,-r.m21*f,r.m11*f,f*(r.m21*r.dy-r.m22*r.dx),f*(r.m12*r.dx-r.m11*r.dy)))}1!==c&&(a.globalAlpha=d)}},aa.fl=function(){},Q.prototype.isContainedBy=Q.prototype.ej=function(a){if(a instanceof y)a:{if(this!==a&&null!==a)for(var b=this.ja;null!==b;){if(b===a){a=!0;break a}b=b.ja}a=!1}else a=!1;return a},Q.prototype.isVisibleObject=Q.prototype.pl=function(){if(!this.visible)return!1;var a=this.ja;return null!==a?a.pl():!0},Q.prototype.ha=function(a){if(!0!==Qi(this)){rk(this,!0),vk(this,!0);var b=this.ja;if(null!==b?a||b.ha():(a=this.h,null!==a&&(this.La()&&a.fg.add(this),this instanceof R&&(a.la.vb||this.wf(),null!==this.$d&&Jk(this.$d)),a.te())),this instanceof y){var c=null;for(a=this.xa,b=a.length,this.da===ci&&(c=Kk(this,a,b))&&c.ha(!0),a=a.n,c=0;b>c;c++){var d=a[c];!0!==Qi(d)&&(d.Ca.N()||(d instanceof Ug||d instanceof y||d instanceof na||qk(d)!==Vg)&&d.ha(!0))}}}},Q.prototype.fa=function(){if(this instanceof C){var a=this.h;null!==a&&!Ri(this)&&!Si(this)&&this.La()&&this.cc.N()&&a.fa(Th(this,this.cc))}else null!==this.S&&this.S.fa()},t.g(Q,"segmentOrientation",Q.prototype.Ot),t.defineProperty(Q,{Ot:"segmentOrientation"},function(){return this.gs},function(a){var b=this.gs;b!==a&&(e&&t.Aa(a,T,Q,"segmentOrientation"),this.gs=a,this.ha(),this.j("segmentOrientation",b,a))}),t.g(Q,"segmentIndex",Q.prototype.Cf),t.defineProperty(Q,{Cf:"segmentIndex"},function(){return this.es},function(a){e&&t.i(a,"number",Q,"segmentIndex"),a=Math.round(a);var b=this.es;b!==a&&(this.es=a,this.ha(),this.j("segmentIndex",b,a))}),t.g(Q,"segmentFraction",Q.prototype.Nt),t.defineProperty(Q,{Nt:"segmentFraction"},function(){return this.ds},function(a){e&&t.i(a,"number",Q,"segmentFraction"),isNaN(a)?a=0:0>a?a=0:a>1&&(a=1);var b=this.ds;b!==a&&(this.ds=a,this.ha(),this.j("segmentFraction",b,a))}),t.g(Q,"segmentOffset",Q.prototype.YA),t.defineProperty(Q,{YA:"segmentOffset"},function(){return this.fs},function(a){var b=this.fs;b.M(a)||(e&&t.l(a,w,Q,"segmentOffset"),this.fs=a=a.Z(),this.ha(),this.j("segmentOffset",b,a))}),t.g(Q,"stretch",Q.prototype.fi),t.defineProperty(Q,{fi:"stretch"},function(){return this.Oh},function(a){var b=this.Oh;b!==a&&(e&&t.Aa(a,Q,Q,"stretch"),this.Oh=a,this.ha(),this.j("stretch",b,a))}),t.g(Q,"name",Q.prototype.name),t.defineProperty(Q,{name:"name"},function(){return this.Zb},function(a){var b=this.Zb;b!==a&&(e&&t.i(a,"string",Q,"name"),this.Zb=a,this.S&&(this.S.Fj=null),this.j("name",b,a))}),t.g(Q,"opacity",Q.prototype.opacity),t.defineProperty(Q,{opacity:"opacity"},function(){return this.Lf},function(a){var b=this.Lf;b!==a&&(t.i(a,"number",Q,"opacity"),(0>a||a>1)&&t.ka(a,"0 <= val <= 1",Q,"opacity"),this.Lf=a,this.j("opacity",b,a),a=this.h,b=this.S,null!==a&&null!==b&&a.fa(Th(b,b.oa)))}),t.g(Q,"visible",Q.prototype.visible),t.defineProperty(Q,{visible:"visible"},function(){return 0!==(1&this.ma)},function(a){var b=0!==(1&this.ma);b!==a&&(e&&t.i(a,"boolean",Q,"visible"),this.ma^=1,this.j("visible",b,a),b=this.ja,null!==b?b.ha():this instanceof C&&(this.h&&this.h.fa(),wk(this),this.df(a)),this.fa(),Pk(this))}),t.g(Q,"pickable",Q.prototype.Bf),t.defineProperty(Q,{Bf:"pickable"},function(){return 0!==(2&this.ma)},function(a){var b=0!==(2&this.ma);b!==a&&(e&&t.i(a,"boolean",Q,"pickable"),this.ma^=2,this.j("pickable",b,a))}),t.g(Q,"fromLinkableDuplicates",Q.prototype.DE),t.defineProperty(Q,{DE:"fromLinkableDuplicates"},function(){return 0!==(4&this.ma)},function(a){var b=0!==(4&this.ma);b!==a&&(e&&t.i(a,"boolean",Q,"fromLinkableDuplicates"),this.ma^=4,this.j("fromLinkableDuplicates",b,a))}),t.g(Q,"fromLinkableSelfNode",Q.prototype.EE),t.defineProperty(Q,{EE:"fromLinkableSelfNode"},function(){return 0!==(8&this.ma)},function(a){var b=0!==(8&this.ma);b!==a&&(e&&t.i(a,"boolean",Q,"fromLinkableSelfNode"),this.ma^=8,this.j("fromLinkableSelfNode",b,a))}),t.g(Q,"toLinkableDuplicates",Q.prototype.AG),t.defineProperty(Q,{AG:"toLinkableDuplicates"},function(){return 0!==(16&this.ma)},function(a){var b=0!==(16&this.ma);b!==a&&(e&&t.i(a,"boolean",Q,"toLinkableDuplicates"),this.ma^=16,this.j("toLinkableDuplicates",b,a))}),t.g(Q,"toLinkableSelfNode",Q.prototype.BG),t.defineProperty(Q,{BG:"toLinkableSelfNode"},function(){return 0!==(32&this.ma)},function(a){var b=0!==(32&this.ma);b!==a&&(e&&t.i(a,"boolean",Q,"toLinkableSelfNode"),this.ma^=32,this.j("toLinkableSelfNode",b,a))}),t.g(Q,"isPanelMain",Q.prototype.fj),t.defineProperty(Q,{fj:"isPanelMain"},function(){return 0!==(64&this.ma)},function(a){var b=0!==(64&this.ma);b!==a&&(e&&t.i(a,"boolean",Q,"isPanelMain"),this.ma^=64,this.ha(),this.j("isPanelMain",b,a))}),t.g(Q,"isActionable",Q.prototype.Ow),t.defineProperty(Q,{Ow:"isActionable"},function(){return 0!==(128&this.ma)},function(a){var b=0!==(128&this.ma);b!==a&&(e&&t.i(a,"boolean",Q,"isActionable"),this.ma^=128,this.j("isActionable",b,a))}),t.g(Q,"areaBackground",Q.prototype.$k),t.defineProperty(Q,{$k:"areaBackground"},function(){return this.vc},function(a){var b=this.vc;b!==a&&(e&&null!==a&&t.To(a,"GraphObject.areaBackground"),a instanceof ea&&a.freeze(),this.vc=a,this.fa(),this.j("areaBackground",b,a))}),t.g(Q,"background",Q.prototype.background),t.defineProperty(Q,{background:"background"},function(){return this.Mb},function(a){var b=this.Mb;b!==a&&(e&&null!==a&&t.To(a,"GraphObject.background"),a instanceof ea&&a.freeze(),this.Mb=a,this.fa(),this.j("background",b,a))}),t.A(Q,{S:"part"},function(){if(this instanceof C)return this;if(this.nm)return this.nm;var a;for(a=this.ja;a;){if(a instanceof C)return this.nm=a;a=a.ja}return null}),Q.prototype.xl=function(a){this.Ii=a},t.A(Q,{ja:"panel"},function(){return this.Ii}),t.A(Q,{layer:"layer"},function(){var a=this.S;return null!==a?a.layer:null}),t.A(Q,{h:"diagram"},function(){var a=this.S;return null!==a?a.h:null},{configurable:!0}),t.g(Q,"position",Q.prototype.position),t.defineProperty(Q,{position:"position"},function(){return this.Ra},function(a){var b=this.Ra;b.M(a)||(e&&t.l(a,w,Q,"position"),a=a.Z(),this.nG(a,b)&&this.j("position",b,a))}),Q.prototype.nG=function(a){return this.Ra=a,Jk(this),sk(this),!0},Q.prototype.oG=function(a,b){this.Ra.p(a,b),Rk(this,!1),sk(this)},t.A(Q,{oa:"actualBounds"},function(){return this.cc}),t.g(Q,"scale",Q.prototype.scale),t.defineProperty(Q,{scale:"scale"},function(){return this.xc},function(a){var b=this.xc;b!==a&&(e&&t.q(a,Q,"scale"),0>=a&&t.m("GraphObject.scale must be greater than zero"),this.xc=a,sk(this),this.ha(),this.j("scale",b,a))}),t.g(Q,"angle",Q.prototype.angle),t.defineProperty(Q,{angle:"angle"},function(){return this.wn},function(a){var b=this.wn;b!==a&&(e&&t.q(a,Q,"angle"),a%=360,0>a&&(a+=360),b!==a&&(this.wn=a,this.ha(),sk(this),this.j("angle",b,a)))}),t.g(Q,"desiredSize",Q.prototype.Ca),t.defineProperty(Q,{Ca:"desiredSize"},function(){return this.jf},function(a){var b=this.jf;b.M(a)||(e&&t.l(a,fa,Q,"desiredSize"),this.jf=a=a.Z(),this.ha(),this instanceof V&&this.Ye(),this.j("desiredSize",b,a),a=this.S,null!==a&&0!==(1024&this.ma)&&(mk(this,a,"width"),mk(this,a,"height")))}),t.g(Q,"width",Q.prototype.width),t.defineProperty(Q,{width:"width"},function(){return this.jf.width},function(a){if(this.jf.width!==a){e&&t.i(a,"number",Q,"width");var b=this.jf;this.jf=a=new fa(a,this.jf.height).freeze(),this.ha(),this instanceof V&&this.Ye(),this.j("desiredSize",b,a),b=this.S,null!==b&&0!==(1024&this.ma)&&mk(this,b,"width")}}),t.g(Q,"height",Q.prototype.height),t.defineProperty(Q,{height:"height"},function(){return this.jf.height},function(a){if(this.jf.height!==a){e&&t.i(a,"number",Q,"height");var b=this.jf;this.jf=a=new fa(this.jf.width,a).freeze(),this.ha(),this instanceof V&&this.Ye(),this.j("desiredSize",b,a),b=this.S,null!==b&&0!==(1024&this.ma)&&mk(this,b,"height")}}),t.g(Q,"minSize",Q.prototype.Vf),t.defineProperty(Q,{Vf:"minSize"},function(){return this.Ej},function(a){var b=this.Ej;b.M(a)||(e&&t.l(a,fa,Q,"minSize"),a=a.copy(),isNaN(a.width)&&(a.width=0),isNaN(a.height)&&(a.height=0),a.freeze(),this.Ej=a,this.ha(),this.j("minSize",b,a))}),t.g(Q,"maxSize",Q.prototype.He),t.defineProperty(Q,{He:"maxSize"},function(){return this.Dj},function(a){var b=this.Dj;b.M(a)||(e&&t.l(a,fa,Q,"maxSize"),a=a.copy(),isNaN(a.width)&&(a.width=1/0),isNaN(a.height)&&(a.height=1/0),a.freeze(),this.Dj=a,this.ha(),this.j("maxSize",b,a))}),t.A(Q,{Ga:"measuredBounds"},function(){return this.Wc}),t.A(Q,{Pa:"naturalBounds"},function(){return this.hd},{configurable:!0}),t.g(Q,"margin",Q.prototype.margin),t.defineProperty(Q,{margin:"margin"},function(){return this.sr},function(a){"number"==typeof a?a=new ab(a):e&&t.l(a,ab,Q,"margin");var b=this.sr;b.M(a)||(this.sr=a=a.Z(),this.ha(),this.j("margin",b,a))}),t.A(Q,{transform:null},function(){return 0!==(2048&this.ma)==!0&&Gk(this),this.md}),t.A(Q,{me:null},function(){return 0!==(4096&this.ma)==!0&&Gk(this),this.kk}),t.g(Q,"alignment",Q.prototype.alignment),t.defineProperty(Q,{alignment:"alignment"},function(){
return this.ue},function(a){var b=this.ue;b.M(a)||(e?t.l(a,H,Q,"alignment"):a.Ge()&&!a.Pc()&&t.m("alignment must be a real Spot or Spot.Default"),this.ue=a=a.Z(),Jk(this),this.j("alignment",b,a))}),t.g(Q,"column",Q.prototype.column),t.defineProperty(Q,{column:"column"},function(){return this.tq},function(a){e&&t.q(a,Q,"column"),a=Math.round(a);var b=this.tq;b!==a&&(0>a&&t.ka(a,">= 0",Q,"column"),this.tq=a,this.ha(),this.j("column",b,a))}),t.g(Q,"columnSpan",Q.prototype.ZD),t.defineProperty(Q,{ZD:"columnSpan"},function(){return this.rj},function(a){e&&t.q(a,Q,"columnSpan"),a=Math.round(a);var b=this.rj;b!==a&&(1>a&&t.ka(a,">= 1",Q,"columnSpan"),this.rj=a,this.ha(),this.j("columnSpan",b,a))}),t.g(Q,"row",Q.prototype.lc),t.defineProperty(Q,{lc:"row"},function(){return this.as},function(a){e&&t.q(a,Q,"row"),a=Math.round(a);var b=this.as;b!==a&&(0>a&&t.ka(a,">= 0",Q,"row"),this.as=a,this.ha(),this.j("row",b,a))}),t.g(Q,"rowSpan",Q.prototype.rowSpan),t.defineProperty(Q,{rowSpan:"rowSpan"},function(){return this.Jj},function(a){e&&t.q(a,Q,"rowSpan"),a=Math.round(a);var b=this.Jj;b!==a&&(1>a&&t.ka(a,">= 1",Q,"rowSpan"),this.Jj=a,this.ha(),this.j("rowSpan",b,a))}),t.g(Q,"alignmentFocus",Q.prototype.Qj),t.defineProperty(Q,{Qj:"alignmentFocus"},function(){return this.mq},function(a){var b=this.mq;b.M(a)||(e?t.l(a,H,Q,"alignmentFocus"):a.Ge()&&!a.Pc()&&t.m("alignmentFocus must be a real Spot or Spot.Default"),this.mq=a=a.Z(),this.ha(),this.j("alignmentFocus",b,a))}),t.g(Q,"portId",Q.prototype.Nd),t.defineProperty(Q,{Nd:"portId"},function(){return this.Nr},function(a){var b=this.Nr;if(b!==a){e&&null!==a&&t.i(a,"string",Q,"portId");var c=this.S;if(null===c||c instanceof R||(t.m("portID being set on a Link: "+a),c=null),null!==b&&c&&Sk(c,this),this.Nr=a,null!==a&&c){c.Eh=!0,null===c.Rd&&Tk(c);var d=this.Nd;null!==d&&c.Rd.add(d,this)}this.j("portId",b,a)}}),t.g(Q,"toSpot",Q.prototype.rb),t.defineProperty(Q,{rb:"toSpot"},function(){return null!==this.P?this.P.Th:wb},function(a){null===this.P&&this.Fe();var b=this.P.Th;b.M(a)||(e&&t.l(a,H,Q,"toSpot"),a=a.Z(),this.P.Th=a,this.j("toSpot",b,a),Pk(this))}),t.g(Q,"toEndSegmentLength",Q.prototype.jk),t.defineProperty(Q,{jk:"toEndSegmentLength"},function(){return null!==this.P?this.P.Qh:10},function(a){null===this.P&&this.Fe();var b=this.P.Qh;b!==a&&(e&&t.i(a,"number",Q,"toEndSegmentLength"),0>a&&t.ka(a,">= 0",Q,"toEndSegmentLength"),this.P.Qh=a,this.j("toEndSegmentLength",b,a),Pk(this))}),t.g(Q,"toEndSegmentDirection",Q.prototype.Xp),t.defineProperty(Q,{Xp:"toEndSegmentDirection"},function(){return null!==this.P?this.P.Ph:kk},function(a){null===this.P&&this.Fe();var b=this.P.Ph;b!==a&&(e&&t.Aa(a,R,Q,"toEndSegmentDirection"),this.P.Ph=a,this.j("toEndSegmentDirection",b,a),Pk(this))}),t.g(Q,"toShortLength",Q.prototype.Yp),t.defineProperty(Q,{Yp:"toShortLength"},function(){return null!==this.P?this.P.Sh:0},function(a){null===this.P&&this.Fe();var b=this.P.Sh;b!==a&&(e&&t.i(a,"number",Q,"toShortLength"),this.P.Sh=a,this.j("toShortLength",b,a),Pk(this))}),t.g(Q,"toLinkable",Q.prototype.jB),t.defineProperty(Q,{jB:"toLinkable"},function(){return this.ys},function(a){var b=this.ys;b!==a&&(e&&null!==a&&t.i(a,"boolean",Q,"toLinkable"),this.ys=a,this.j("toLinkable",b,a))}),t.g(Q,"toMaxLinks",Q.prototype.CG),t.defineProperty(Q,{CG:"toMaxLinks"},function(){return this.zs},function(a){var b=this.zs;b!==a&&(e&&t.q(a,Q,"toMaxLinks"),0>a&&t.ka(a,">= 0",Q,"toMaxLinks"),this.zs=a,this.j("toMaxLinks",b,a))}),t.g(Q,"fromSpot",Q.prototype.ob),t.defineProperty(Q,{ob:"fromSpot"},function(){return null!==this.P?this.P.Dh:wb},function(a){null===this.P&&this.Fe();var b=this.P.Dh;b.M(a)||(e&&t.l(a,H,Q,"fromSpot"),a=a.Z(),this.P.Dh=a,this.j("fromSpot",b,a),Pk(this))}),t.g(Q,"fromEndSegmentLength",Q.prototype.dk),t.defineProperty(Q,{dk:"fromEndSegmentLength"},function(){return null!==this.P?this.P.Ah:10},function(a){null===this.P&&this.Fe();var b=this.P.Ah;b!==a&&(e&&t.i(a,"number",Q,"fromEndSegmentLength"),0>a&&t.ka(a,">= 0",Q,"fromEndSegmentLength"),this.P.Ah=a,this.j("fromEndSegmentLength",b,a),Pk(this))}),t.g(Q,"fromEndSegmentDirection",Q.prototype.hp),t.defineProperty(Q,{hp:"fromEndSegmentDirection"},function(){return null!==this.P?this.P.zh:kk},function(a){null===this.P&&this.Fe();var b=this.P.zh;b!==a&&(e&&t.Aa(a,R,Q,"fromEndSegmentDirection"),this.P.zh=a,this.j("fromEndSegmentDirection",b,a),Pk(this))}),t.g(Q,"fromShortLength",Q.prototype.ip),t.defineProperty(Q,{ip:"fromShortLength"},function(){return null!==this.P?this.P.Ch:0},function(a){null===this.P&&this.Fe();var b=this.P.Ch;b!==a&&(e&&t.i(a,"number",Q,"fromShortLength"),this.P.Ch=a,this.j("fromShortLength",b,a),Pk(this))}),t.g(Q,"fromLinkable",Q.prototype.hA),t.defineProperty(Q,{hA:"fromLinkable"},function(){return this.Nq},function(a){var b=this.Nq;b!==a&&(e&&null!==a&&t.i(a,"boolean",Q,"fromLinkable"),this.Nq=a,this.j("fromLinkable",b,a))}),t.g(Q,"fromMaxLinks",Q.prototype.FE),t.defineProperty(Q,{FE:"fromMaxLinks"},function(){return this.Oq},function(a){var b=this.Oq;b!==a&&(e&&t.q(a,Q,"fromMaxLinks"),0>a&&t.ka(a,">= 0",Q,"fromMaxLinks"),this.Oq=a,this.j("fromMaxLinks",b,a))}),t.g(Q,"cursor",Q.prototype.cursor),t.defineProperty(Q,{cursor:"cursor"},function(){return this.Aq},function(a){var b=this.Aq;b!==a&&(t.i(a,"string",Q,"cursor"),this.Aq=a,this.j("cursor",b,a))}),t.g(Q,"click",Q.prototype.click),t.defineProperty(Q,{click:"click"},function(){return null!==this.Q?this.Q.ni:null},function(a){null===this.Q&&jk(this);var b=this.Q.ni;b!==a&&(null!==a&&t.i(a,"function",Q,"click"),this.Q.ni=a,this.j("click",b,a))}),t.g(Q,"doubleClick",Q.prototype.Om),t.defineProperty(Q,{Om:"doubleClick"},function(){return null!==this.Q?this.Q.ti:null},function(a){null===this.Q&&jk(this);var b=this.Q.ti;b!==a&&(null!==a&&t.i(a,"function",Q,"doubleClick"),this.Q.ti=a,this.j("doubleClick",b,a))}),t.g(Q,"contextClick",Q.prototype.Ws),t.defineProperty(Q,{Ws:"contextClick"},function(){return null!==this.Q?this.Q.pi:null},function(a){null===this.Q&&jk(this);var b=this.Q.pi;b!==a&&(null!==a&&t.i(a,"function",Q,"contextClick"),this.Q.pi=a,this.j("contextClick",b,a))}),t.g(Q,"mouseEnter",Q.prototype.DA),t.defineProperty(Q,{DA:"mouseEnter"},function(){return null!==this.Q?this.Q.Dr:null},function(a){null===this.Q&&jk(this);var b=this.Q.Dr;b!==a&&(null!==a&&t.i(a,"function",Q,"mouseEnter"),this.Q.Dr=a,this.j("mouseEnter",b,a))}),t.g(Q,"mouseLeave",Q.prototype.EA),t.defineProperty(Q,{EA:"mouseLeave"},function(){return null!==this.Q?this.Q.Er:null},function(a){null===this.Q&&jk(this);var b=this.Q.Er;b!==a&&(null!==a&&t.i(a,"function",Q,"mouseLeave"),this.Q.Er=a,this.j("mouseLeave",b,a))}),t.g(Q,"mouseOver",Q.prototype.zt),t.defineProperty(Q,{zt:"mouseOver"},function(){return null!==this.Q?this.Q.Ei:null},function(a){null===this.Q&&jk(this);var b=this.Q.Ei;b!==a&&(null!==a&&t.i(a,"function",Q,"mouseOver"),this.Q.Ei=a,this.j("mouseOver",b,a))}),t.g(Q,"mouseHover",Q.prototype.yt),t.defineProperty(Q,{yt:"mouseHover"},function(){return null!==this.Q?this.Q.Di:null},function(a){null===this.Q&&jk(this);var b=this.Q.Di;b!==a&&(null!==a&&t.i(a,"function",Q,"mouseHover"),this.Q.Di=a,this.j("mouseHover",b,a))}),t.g(Q,"mouseHold",Q.prototype.xt),t.defineProperty(Q,{xt:"mouseHold"},function(){return null!==this.Q?this.Q.Ci:null},function(a){null===this.Q&&jk(this);var b=this.Q.Ci;b!==a&&(null!==a&&t.i(a,"function",Q,"mouseHold"),this.Q.Ci=a,this.j("mouseHold",b,a))}),t.g(Q,"mouseDragEnter",Q.prototype.AF),t.defineProperty(Q,{AF:"mouseDragEnter"},function(){return null!==this.Q?this.Q.Br:null},function(a){null===this.Q&&jk(this);var b=this.Q.Br;b!==a&&(null!==a&&t.i(a,"function",Q,"mouseDragEnter"),this.Q.Br=a,this.j("mouseDragEnter",b,a))}),t.g(Q,"mouseDragLeave",Q.prototype.CA),t.defineProperty(Q,{CA:"mouseDragLeave"},function(){return null!==this.Q?this.Q.Cr:null},function(a){null===this.Q&&jk(this);var b=this.Q.Cr;b!==a&&(null!==a&&t.i(a,"function",Q,"mouseDragLeave"),this.Q.Cr=a,this.j("mouseDragLeave",b,a))}),t.g(Q,"mouseDrop",Q.prototype.wt),t.defineProperty(Q,{wt:"mouseDrop"},function(){return null!==this.Q?this.Q.Bi:null},function(a){null===this.Q&&jk(this);var b=this.Q.Bi;b!==a&&(null!==a&&t.i(a,"function",Q,"mouseDrop"),this.Q.Bi=a,this.j("mouseDrop",b,a))}),t.g(Q,"actionDown",Q.prototype.Fz),t.defineProperty(Q,{Fz:"actionDown"},function(){return null!==this.Q?this.Q.iq:null},function(a){null===this.Q&&jk(this);var b=this.Q.iq;b!==a&&(null!==a&&t.i(a,"function",Q,"actionDown"),this.Q.iq=a,this.j("actionDown",b,a))}),t.g(Q,"actionUp",Q.prototype.Hz),t.defineProperty(Q,{Hz:"actionUp"},function(){return null!==this.Q?this.Q.kq:null},function(a){null===this.Q&&jk(this);var b=this.Q.kq;b!==a&&(null!==a&&t.i(a,"function",Q,"actionUp"),this.Q.kq=a,this.j("actionUp",b,a))}),t.g(Q,"actionMove",Q.prototype.Gz),t.defineProperty(Q,{Gz:"actionMove"},function(){return null!==this.Q?this.Q.jq:null},function(a){null===this.Q&&jk(this);var b=this.Q.jq;b!==a&&(null!==a&&t.i(a,"function",Q,"actionMove"),this.Q.jq=a,this.j("actionMove",b,a))}),t.g(Q,"actionCancel",Q.prototype.Ez),t.defineProperty(Q,{Ez:"actionCancel"},function(){return null!==this.Q?this.Q.hq:null},function(a){null===this.Q&&jk(this);var b=this.Q.hq;b!==a&&(null!==a&&t.i(a,"function",Q,"actionCancel"),this.Q.hq=a,this.j("actionCancel",b,a))}),t.g(Q,"toolTip",Q.prototype.Yt),t.defineProperty(Q,{Yt:"toolTip"},function(){return null!==this.Q?this.Q.Oi:null},function(a){null===this.Q&&jk(this);var b=this.Q.Oi;b!==a&&(null!==a&&t.l(a,Je,Q,"toolTip"),this.Q.Oi=a,this.j("toolTip",b,a))}),t.g(Q,"contextMenu",Q.prototype.contextMenu),t.defineProperty(Q,{contextMenu:"contextMenu"},function(){return null!==this.Q?this.Q.qi:null},function(a){null===this.Q&&jk(this);var b=this.Q.qi;b!==a&&(null!==a&&t.l(a,Je,Q,"contextMenu"),this.Q.qi=a,this.j("contextMenu",b,a))}),Q.prototype.bind=Q.prototype.bind=function(a){a.pg=this;var b=this.ep();null!==b&&Wk(b)&&t.m("Cannot add a Binding to a template that has already been copied: "+a),null===this.Kc&&(this.Kc=new B(De)),this.Kc.add(a)},Q.prototype.findTemplateBinder=Q.prototype.ep=function(){for(var a=this instanceof y?this:this.ja;null!==a;){if(null!==a.Jl&&a instanceof y)return a;a=a.ja}return null},Q.fromSvg=Q.fromSVG=function(a){return Xk(a)},Q.prototype.setProperties=function(a){t.tx(this,a)};var Yk;Q.make=Yk=function(a,b){var c=arguments,d=null,e=null;if("function"==typeof a)e=a;else if("string"==typeof a){var f=Zk.za(a);"function"==typeof f?(c=Array.prototype.slice.call(arguments),d=f(c)):e=ba[a]}for(null===d&&(void 0===e&&(d=window.$,void 0!==d&&void 0!==d.noop&&t.m("GraphObject.make failed to complete. Is it conflicting with another $ var? (such as jQuery)"),t.m("GraphObject.make failed to complete, it may be conflicting with another var.")),null!==e&&e.constructor||t.m("GraphObject.make requires a class function or class name, not: "+a),d=new e),f=1,d instanceof z&&1<c.length&&(e=c[1],"string"==typeof e||e instanceof HTMLDivElement)&&(ai(d,e),f++);f<c.length;f++)e=c[f],void 0===e?t.m("Undefined value at argument "+f+" for object being constructed by GraphObject.make: "+d):$k(d,e);return d};var Zk;Q.Builders=Zk=new ia("string","function"),Zk.add("Button",function(){var a=new ea(Yd);a.addColorStop(0,"white"),a.addColorStop(1,"lightgray");var b=new ea(Yd);b.addColorStop(0,"white"),b.addColorStop(1,"dodgerblue");var c=Yk(y,ci,{Ow:!0},Yk(V,{name:"ButtonBorder",Ab:"RoundedRectangle",fill:a,stroke:"gray"}));return c.DA=function(a,c){var d=c.wa(0),e=c._buttonFillOver;void 0===e&&(e=b),c._buttonFillNormal=d.fill,d.fill=e,e=c._buttonStrokeOver,void 0===e&&(e="blue"),c._buttonStrokeNormal=d.stroke,d.stroke=e},c.EA=function(b,c){var d=c.wa(0),e=c._buttonFillNormal;void 0===e&&(e=a),d.fill=e,e=c._buttonStrokeNormal,void 0===e&&(e="gray"),d.stroke=e},c}),Zk.add("TreeExpanderButton",function(){var a=Yk("Button",Yk(V,{name:"ButtonIcon",Ab:"MinusLine",Ca:F.dq},new De("figure","isTreeExpanded",function(a,b){var c=null,d=b.ja;return d&&(c=a?d._treeExpandedFigure:d._treeCollapsedFigure),c||(c=a?"MinusLine":"PlusLine"),c}).JA("")),{visible:!1},new De("visible","isTreeLeaf",function(a){return!a}).JA(""));return a.click=function(a,b){var c=b.S;if(c instanceof Je&&(c=c.Wh),c instanceof R){var d=c.h;if(null!==d){if(d=d.Se,c.Qc){if(!d.canCollapseTree(c))return}else if(!d.canExpandTree(c))return;a.Ee=!0,c.Qc?d.collapseTree(c):d.expandTree(c)}}},a}),Zk.add("SubGraphExpanderButton",function(){var a=Yk("Button",Yk(V,{name:"ButtonIcon",Ab:"MinusLine",Ca:F.dq},new De("figure","isSubGraphExpanded",function(a,b){var c=null,d=b.ja;return d&&(c=a?d._subGraphExpandedFigure:d._subGraphCollapsedFigure),c||(c=a?"MinusLine":"PlusLine"),c}).JA("")));return a.click=function(a,b){var c=b.S;if(c instanceof Je&&(c=c.Wh),c instanceof S){var d=c.h;if(null!==d){if(d=d.Se,c.Yd){if(!d.canCollapseSubGraph(c))return}else if(!d.canExpandSubGraph(c))return;a.Ee=!0,c.Yd?d.collapseSubGraph(c):d.expandSubGraph(c)}}},a}),Zk.add("ContextMenuButton",function(){var a=Yk("Button");a.fi=ik;var b=a.oe("ButtonBorder");return b instanceof V&&(b.Ab="Rectangle",b.G=new H(0,0,2,2),b.H=new H(1,1,-2,-2)),a}),Q.defineBuilder=function(a,b){t.i(a,"string",Q,"defineBuilder:name"),t.i(b,"function",Q,"defineBuilder:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||t.m("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a),Q.Builders.add(a,b)},t.ga("Panel",y),t.Xh(y),t.Ka(y,Q),y.prototype.cloneProtected=function(a){if(Q.prototype.cloneProtected.call(this,a),a.da=this.da,a.Ne=this.Ne.Z(),a.Vg=this.Vg,a.Dq=this.Dq.Z(),a.Hc=this.Hc,a.da===Nk){a.sj=this.sj.Z(),a.wh=this.wh,a.si=this.si,a.Ql=this.Ql,a.vh=this.vh,a.uh=this.uh,a.Pl=this.Pl;var b=[];if(0<this.kd.length)for(var c=this.kd,d=c.length,e=0;d>e;e++)if(void 0!==c[e]){var f=c[e].copy();f.xl(a),b[e]=f}if(a.kd=b,b=[],0<this.dd.length)for(c=this.dd,d=c.length,e=0;d>e;e++)void 0!==c[e]&&(f=c[e].copy(),f.xl(a),b[e]=f);a.dd=b,a.sm=this.sm,a.Ll=this.Ll,a.Pi=this.Pi,a.zi=this.zi}a.Io=this.Io,a.Sq.assign(this.Sq),a.Tq=this.Tq.Z(),a.Ol=this.Ol,a.Jl=this.Jl,a.hr=this.hr,a.yi=this.yi,a.hg=this.hg,a.eo=this.eo,a.Qi.assign(this.Qi),a.Eh=this.Eh,this.bs&&(a.bs=this.bs),this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal),this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver),this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal),this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver),this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure),this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure),this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=this._subGraphExpandedFigure),this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)},y.prototype.Yh=function(a){Q.prototype.Yh.call(this,a),a.xa=this.xa;for(var b=a.xa.k;b.next();)b.value.Ii=a},y.prototype.copy=function(){var a=Q.prototype.copy.call(this);if(a instanceof y){var b=this.xa;if(0<b.length)for(var c=b.length,d=0;c>d;d++){var e=b.n[d].copy(),f=a;e.xl(f),e.nm=null;var g=f.xa,h=g.count;if(g.Jd(h,e),g=f.S,null!==g){g.Fj=null,null!==e.Nd&&g instanceof R&&(g.Eh=!0);var i=f.h;null!==i&&i.la.vb||g.Ic(wd,"elements",f,null,e,null,h)}}return a}return null},y.prototype.toString=function(){return"Panel("+this.type+")#"+t.od(this)};var $g;y.Position=$g=t.w(y,"Position",0),y.Horizontal=t.w(y,"Horizontal",1);var bi;y.Vertical=bi=t.w(y,"Vertical",2);var Tg;y.Spot=Tg=t.w(y,"Spot",3);var ci;y.Auto=ci=t.w(y,"Auto",4);var Nk;y.Table=Nk=t.w(y,"Table",5),y.Viewbox=t.w(y,"Viewbox",6);var zk;y.TableRow=zk=t.w(y,"TableRow",7);var Ak;y.TableColumn=Ak=t.w(y,"TableColumn",8);var wg;y.Link=wg=t.w(y,"Link",9);var yi;y.Grid=yi=t.w(y,"Grid",10),t.g(y,"type",y.prototype.type),t.defineProperty(y,{type:"type"},function(){return this.da},function(a){var b=this.da;b!==a&&(e&&t.Aa(a,y,y,"type"),b!==zk&&b!==Ak||t.m("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+a),this.da=a,this.da===yi?this.Vg=!0:this.da===Nk&&Il(this),this.ha(),this.j("type",b,a))}),t.A(y,{elements:"elements"},function(){return this.xa.k}),t.A(y,{Pa:"naturalBounds"},function(){return this.hd}),t.g(y,"padding",y.prototype.padding),t.defineProperty(y,{padding:"padding"},function(){return this.Ne},function(a){"number"==typeof a?(0>a&&t.ka(a,">= 0",y,"padding"),a=new ab(a)):(t.l(a,ab,y,"padding"),0>a.left&&t.ka(a.left,">= 0",y,"padding:val.left"),0>a.right&&t.ka(a.right,">= 0",y,"padding:val.right"),0>a.top&&t.ka(a.top,">= 0",y,"padding:val.top"),0>a.bottom&&t.ka(a.bottom,">= 0",y,"padding:val.bottom"));var b=this.Ne;b.M(a)||(this.Ne=a=a.Z(),this.ha(),this.j("padding",b,a))}),t.g(y,"defaultAlignment",y.prototype.Xj),t.defineProperty(y,{Xj:"defaultAlignment"},function(){return this.Dq},function(a){var b=this.Dq;b.M(a)||(e&&t.l(a,H,y,"defaultAlignment"),this.Dq=a=a.Z(),this.ha(),this.j("defaultAlignment",b,a))}),t.g(y,"defaultStretch",y.prototype.Zz),t.defineProperty(y,{Zz:"defaultStretch"},function(){return this.Hc},function(a){var b=this.Hc;b!==a&&(t.Aa(a,Q,y,"defaultStretch"),this.Hc=a,this.ha(),this.j("defaultStretch",b,a))}),t.g(y,"defaultSeparatorPadding",y.prototype.uI),t.defineProperty(y,{uI:"defaultSeparatorPadding"},function(){return void 0===this.sj?F.fq:this.sj},function(a){if(void 0!==this.sj){"number"==typeof a?a=new ab(a):e&&t.l(a,ab,y,"defaultSeparatorPadding");var b=this.sj;b.M(a)||(this.sj=a=a.Z(),this.j("defaultSeparatorPadding",b,a))}}),t.g(y,"defaultRowSeparatorStroke",y.prototype.sI),t.defineProperty(y,{sI:"defaultRowSeparatorStroke"},function(){return void 0===this.si?null:this.si},function(a){var b=this.si;b!==a&&(null===a||"string"==typeof a||a instanceof ea)&&(a instanceof ea&&a.freeze(),this.si=a,this.j("defaultRowSeparatorStroke",b,a))}),t.g(y,"defaultRowSeparatorStrokeWidth",y.prototype.tI),t.defineProperty(y,{tI:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.wh?1:this.wh},function(a){if(void 0!==this.wh){var b=this.wh;b!==a&&(this.wh=a,this.j("defaultRowSeparatorStrokeWidth",b,a))}}),t.g(y,"defaultRowSeparatorDashArray",y.prototype.rI),t.defineProperty(y,{rI:"defaultRowSeparatorDashArray"},function(){return void 0===this.Ql?null:this.Ql},function(a){if(void 0!==this.Ql){var b=this.Ql;if(b!==a){if(null===a||Array.isArray(a)||t.bc(a,"Array",y,"defaultRowSeparatorDashArray:val"),null!==a){for(var c=a.length,d=0,e=0;c>e;e++){var f=a[e];"number"==typeof f&&f>=0&&isFinite(f)||t.m("defaultRowSeparatorDashArray:val "+f+" must be a positive number or zero."),d+=f}if(0===d){if(null===b)return;a=null}}this.Ql=a,this.fa(),this.j("defaultRowSeparatorDashArray",b,a)}}}),t.g(y,"defaultColumnSeparatorStroke",y.prototype.mI),t.defineProperty(y,{mI:"defaultColumnSeparatorStroke"},function(){return void 0===this.uh?null:this.uh},function(a){if(void 0!==this.uh){var b=this.uh;b!==a&&(null===a||"string"==typeof a||a instanceof ea)&&(a instanceof ea&&a.freeze(),this.uh=a,this.j("defaultColumnSeparatorStroke",b,a))}}),t.g(y,"defaultColumnSeparatorStrokeWidth",y.prototype.nI),t.defineProperty(y,{nI:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.vh?1:this.vh},function(a){if(void 0!==this.vh){var b=this.vh;b!==a&&(this.vh=a,this.j("defaultColumnSeparatorStrokeWidth",b,a))}}),t.g(y,"defaultColumnSeparatorDashArray",y.prototype.lI),t.defineProperty(y,{lI:"defaultColumnSeparatorDashArray"},function(){return void 0===this.Pl?null:this.Pl},function(a){if(void 0!==this.Pl){var b=this.Pl;if(b!==a){if(null===a||Array.isArray(a)||t.bc(a,"Array",y,"defaultColumnSeparatorDashArray:val"),null!==a){for(var c=a.length,d=0,e=0;c>e;e++){var f=a[e];"number"==typeof f&&f>=0&&isFinite(f)||t.m("defaultColumnSeparatorDashArray:val "+f+" must be a positive number or zero."),d+=f}if(0===d){if(null===b)return;a=null}}this.Pl=a,this.fa(),this.j("defaultColumnSeparatorDashArray",b,a)}}}),t.g(y,"viewboxStretch",y.prototype.cK),t.defineProperty(y,{cK:"viewboxStretch"},function(){return this.Io},function(a){var b=this.Io;b!==a&&(t.Aa(a,Q,y,"viewboxStretch"),this.Io=a,this.j("viewboxStretch",b,a))}),t.g(y,"gridCellSize",y.prototype.ht),t.defineProperty(y,{ht:"gridCellSize"},function(){return this.Sq},function(a){var b=this.Sq;b.M(a)||(t.l(a,fa,y,"gridCellSize"),a.N()&&0!==a.width&&0!==a.height||t.m("Invalid Panel.gridCellSize: "+a),this.Sq=a.Z(),null!==this.h&&this===this.h.lp&&Li(this.h),this.fa(),this.j("gridCellSize",b,a))}),t.g(y,"gridOrigin",y.prototype.kA),t.defineProperty(y,{kA:"gridOrigin"},function(){return this.Tq},function(a){var b=this.Tq;b.M(a)||(t.l(a,w,y,"gridOrigin"),a.N()||t.m("Invalid Panel.gridOrigin: "+a),this.Tq=a.Z(),this.h&&Li(this.h),this.fa(),this.j("gridOrigin",b,a))}),y.prototype.fl=function(a,b){if(this.da===yi){var c=this.ek()*b.scale;0>=c&&(c=1);var d=this.ht,f=d.width,d=d.height,g=this.Pa,h=g.width,g=g.height,i=Math.ceil(h/f),j=Math.ceil(g/d),k=this.kA;a.save(),a.beginPath(),a.rect(0,0,h,g),a.clip();for(var l=[],m=this.xa.n,n=this.xa.length,o=0;n>o;o++){var p=[];l.push(p);var q=m[o];if(q.visible)for(var q=kj(q.Ab),r=o+1;n>r;r++){var s=m[r];s.visible&&kj(s.Ab)===q&&(s=s.interval,s>=2&&p.push(s))}}for(m=this.xa.length,n=0;m>n;n++){var u=this.xa.n[n];if(u.visible){var o=l[n],p=u.interval,q=!1,v=u.zx;if(null!==v){var w=q=!0;void 0!==a.setLineDash?(a.setLineDash(v),a.lineDashOffset=u.ld):void 0!==a.webkitLineDash?(a.webkitLineDash=v,a.webkitLineDashOffset=u.ld):void 0!==a.mozDash?(a.mozDash=v,a.mozDashOffset=u.ld):w=!1}if("LineV"===u.Ab){for(a.lineWidth=u.fb,Dk(this,a,u.stroke,!1),a.beginPath(),s=r=Math.floor(-k.x/f);r+i>=s;s++){var x=s*f+k.x;if(x>=0&&h>x&&Kl(s,p,o)&&(q&&!w?lk(a,x,0,x,g,v,u.ld):(a.moveTo(x,0),a.lineTo(x,g)),2>f*p*c))break}a.stroke()}else if("LineH"===u.Ab){for(a.lineWidth=u.fb,Dk(this,a,u.stroke,!1),a.beginPath(),s=r=Math.floor(-k.y/d);r+j>=s&&(x=s*d+k.y,!(x>=0&&g>=x&&Kl(s,p,o)&&(q&&!w?lk(a,0,x,h,x,v,u.ld):(a.moveTo(0,x),a.lineTo(h,x)),2>d*p*c)));s++);a.stroke()}else if("BarV"===u.Ab)for(Dk(this,a,u.fill,!0),u=u.width,isNaN(u)&&(u=f),s=r=Math.floor(-k.x/f);r+i>=s&&(x=s*f+k.x,!(x>=0&&h>x&&Kl(s,p,o)&&(a.fillRect(x,0,u,g),2>f*p*c)));s++);else if("BarH"===u.Ab)for(Dk(this,a,u.fill,!0),u=u.height,isNaN(u)&&(u=d),s=r=Math.floor(-k.y/d);r+j>=s&&(x=s*d+k.y,!(x>=0&&g>=x&&Kl(s,p,o)&&(a.fillRect(0,x,h,u),2>d*p*c)));s++);q&&(void 0!==a.setLineDash?(a.setLineDash(t.ji),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=t.ji,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0))}}a.restore(),wi(b,a,!1)}else{for(this.da===Nk&&(a.lineCap="butt",Ll(this,a,!0,this.kd,!0),Ll(this,a,!1,this.dd,!0),Ml(this,a,!0,this.kd),Ml(this,a,!1,this.dd),Ll(this,a,!0,this.kd,!1),Ll(this,a,!1,this.dd,!1)),c=this.xa.length,f=0;c>f;f++)this.xa.n[f].Ue(a,b);e&&e.tK&&this instanceof T&&e.sK(a,b,this)}},y.prototype.kp=function(a,b,c,d,e){var f=this.Hf(),g=this.transform,h=1/(g.m11*g.m22-g.m12*g.m21),i=g.m22*h,j=-g.m12*h,k=-g.m21*h,l=g.m11*h,m=h*(g.m21*g.dy-g.m22*g.dx),n=h*(g.m12*g.dx-g.m11*g.dy);if(null!==this.$k)return g=this.oa,F.ll(g.left,g.top,g.right,g.bottom,a,b,c,d,e);if(null!==this.background)f=a*i+b*k+m,h=a*j+b*l+n,a=c*i+d*k+m,c=c*j+d*l+n,e.p(0,0),d=this.Pa,c=F.ll(0,0,d.width,d.height,f,h,a,c,e),e.transform(g);else{for(f||(i=1,k=j=0,l=1,n=m=0),h=a*i+b*k+m,a=a*j+b*l+n,i=c*i+d*k+m,d=c*j+d*l+n,e.p(i,d),j=(i-h)*(i-h)+(d-a)*(d-a),c=!1,l=this.xa.n,n=l.length,k=t.K(),m=0;n>m;m++)b=l[m],b.visible&&b.kp(h,a,i,d,k)&&(c=!0,b=(h-k.x)*(h-k.x)+(a-k.y)*(a-k.y),j>b&&(j=b,e.set(k)));t.B(k),f&&e.transform(g)}return c},y.prototype.ut=function(a,b,c,d){var e=this.Qi;e.width=0,e.height=0;var f=this.Ca,g=this.Vf;void 0===c&&(c=g.width,d=g.height),c=Math.max(c,g.width),d=Math.max(d,g.height);var h=this.He;isNaN(f.width)||(a=Math.min(f.width,h.width)),isNaN(f.height)||(b=Math.min(f.height,h.height)),a=Math.max(c,a),b=Math.max(d,b);var i=this.padding;a=Math.max(a-i.left-i.right,0),b=Math.max(b-i.top-i.bottom,0);var j=this.xa,k=j.length;if(0!==k){var l=this.da.Zb;switch(l){case"Position":var m=a,n=b,o=c,p=d;e.x=0,e.y=0,e.width=0;for(var q=e.height=0;k>q;q++){var r=j.n[q];if(r.visible||r===this.kc){var s=r.margin,u=s.right+s.left,v=s.top+s.bottom;ih(r,m,n,o,p);var w=r.Ga,z=Math.max(w.width+u,0),A=Math.max(w.height+v,0),B=r.position.x,C=r.position.y;if(isFinite(B)||(B=0),isFinite(C)||(C=0),r instanceof V&&r.rA)var D=r.fb/2,B=B-D,C=C-D;hb(e,B,C,z,A)}}break;case"Vertical":for(var E=a,F=c,G=t.Db(),H=0;k>H;H++){var I=j.n[H];if(I.visible||I===this.kc){var J=qk(I);if(J!==Vg&&J!==hk)G.push(I);else{var K=I.margin,L=K.right+K.left,M=K.top+K.bottom;ih(I,E,1/0,F,0);var N=I.Ga,O=Math.max(N.width+L,0),P=Math.max(N.height+M,0);e.width=Math.max(e.width,O),e.height+=P}}}var Q=G.length;if(0!==Q){for(this.Ca.width?E=Math.min(this.Ca.width,this.He.width):0!==e.width&&(E=Math.min(e.width,this.He.width)),H=0;Q>H;H++)I=G[H],(I.visible||I===this.kc)&&(K=I.margin,L=K.right+K.left,M=K.top+K.bottom,ih(I,E,1/0,F,0),N=I.Ga,O=Math.max(N.width+L,0),P=Math.max(N.height+M,0),e.width=Math.max(e.width,O),e.height+=P);t.ya(G)}break;case"Horizontal":for(var R=b,S=d,T=t.Db(),U=0;k>U;U++){var W=j.n[U];if(W.visible||W===this.kc){var X=qk(W);if(X!==Vg&&X!==ik)T.push(W);else{var Y=W.margin,Z=Y.right+Y.left,$=Y.top+Y.bottom;ih(W,1/0,R,0,S);var _=W.Ga,aa=Math.max(_.width+Z,0),ba=Math.max(_.height+$,0);e.width+=aa,e.height=Math.max(e.height,ba)}}}var ca=T.length;if(0!==ca){for(this.Ca.height?R=Math.min(this.Ca.height,this.He.height):0!==e.height&&(R=Math.min(e.height,this.He.height)),U=0;ca>U;U++)W=T[U],(W.visible||W===this.kc)&&(Y=W.margin,Z=Y.right+Y.left,$=Y.top+Y.bottom,ih(W,1/0,R,0,S),_=W.Ga,aa=Math.max(_.width+Z,0),ba=Math.max(_.height+$,0),e.width+=aa,e.height=Math.max(e.height,ba));t.ya(T)}break;case"Spot":a:{var da,ea,fa=a,ga=b,ha=c,ia=d,ja=Kk(this,j,k),ka=ja.margin,la=ka.right+ka.left,ma=ka.top+ka.bottom;ih(ja,fa,ga,ha,ia);var na=ja.Ga,oa=na.width,pa=na.height,qa=Math.max(oa+la,0),ra=Math.max(pa+ma,0);e.x=-ka.left,e.y=-ka.top,e.width=qa,e.height=ra;for(var sa=0;k>sa;sa++){var ta=j.n[sa];if(ta!==ja&&(ta.visible||ta===this.kc)){ka=ta.margin,da=ka.right+ka.left,ea=ka.top+ka.bottom,ih(ta,fa,ga,0,0);var na=ta.Ga,qa=Math.max(na.width+da,0),ra=Math.max(na.height+ea,0),ua=ta.alignment;ua.Pc()&&(ua=this.Xj),ua.xd()||(ua=Hb);var va=ta.Qj;va.Pc()&&(va=Hb),hb(e,ua.x*oa+ua.offsetX-(va.x*na.width-va.offsetX)-ka.left,ua.y*pa+ua.offsetY-(va.y*na.height-va.offsetY)-ka.top,qa,ra)}}var wa=ja.fi;switch(wa===gk&&(wa=qk(ja)),wa){case Vg:break a;case Cc:if(!isFinite(fa)&&!isFinite(ga))break a;break;case ik:if(!isFinite(fa))break a;break;case hk:if(!isFinite(ga))break a}for(na=ja.Ga,oa=na.width,pa=na.height,qa=Math.max(oa+la,0),ra=Math.max(pa+ma,0),ka=ja.margin,e.x=-ka.left,e.y=-ka.top,e.width=qa,e.height=ra,sa=0;k>sa;sa++)ta=j.n[sa],ta===ja||!ta.visible&&ta!==this.kc||(ka=ta.margin,da=ka.right+ka.left,ea=ka.top+ka.bottom,na=ta.Ga,qa=Math.max(na.width+da,0),ra=Math.max(na.height+ea,0),ua=ta.alignment,ua.Pc()&&(ua=this.Xj),ua.xd()||(ua=Hb),va=ta.Qj,va.Pc()&&(va=Hb),hb(e,ua.x*oa+ua.offsetX-(va.x*na.width-va.offsetX)-ka.left,ua.y*pa+ua.offsetY-(va.y*na.height-va.offsetY)-ka.top,qa,ra))}break;case"Auto":var xa=a,ya=b,za=c,Aa=d,Ba=Kk(this,j,k),Ca=Ba.margin,Da=Ca.right+Ca.left,Ea=Ca.top+Ca.bottom;ih(Ba,xa,ya,za,Aa);var Fa=Ba.Ga,Ga=Math.max(Fa.width+Da,0),Ha=Math.max(Fa.height+Ea,0),Ia=Ol(Ba),Ja=Ia.x*Ga+Ia.offsetX,Ka=Ia.y*Ha+Ia.offsetY,Ia=Pl(Ba),La=Ia.x*Ga+Ia.offsetX,Ma=Ia.y*Ha+Ia.offsetY,Na=xa,Oa=ya;isFinite(xa)&&(Na=Math.abs(Ja-La)),isFinite(ya)&&(Oa=Math.abs(Ka-Ma));var Pa=t.Cl();Pa.p(0,0);for(var Qa=0;k>Qa;Qa++){var Ra=j.n[Qa];if(Ra!==Ba&&(Ra.visible||Ra===this.kc)){var Ca=Ra.margin,Sa=Ca.right+Ca.left,Ta=Ca.top+Ca.bottom;ih(Ra,Na,Oa,0,0),Fa=Ra.Ga,Ga=Math.max(Fa.width+Sa,0),Ha=Math.max(Fa.height+Ta,0),Pa.p(Math.max(Ga,Pa.width),Math.max(Ha,Pa.height))}}if(1===k)e.width=Ga,e.height=Ha,t.ck(Pa);else{var Ua,Wa,Xa=Ol(Ba),Ya=Pl(Ba);Ya.x!==Xa.x&&Ya.y!==Xa.y&&(Ua=Pa.width/Math.abs(Ya.x-Xa.x),Wa=Pa.height/Math.abs(Ya.y-Xa.y)),t.ck(Pa);var Za=0;Ba instanceof V&&(Za=Ba.fb*Ba.scale,Wg(Ba)===Xg&&(Ua=Math.max(Ua,Wa),Wa=Math.max(Ua,Wa))),Ua+=Math.abs(Xa.offsetX)+Math.abs(Ya.offsetX)+Za,Wa+=Math.abs(Xa.offsetY)+Math.abs(Ya.offsetY)+Za;var $a=Ba.fi;switch($a===gk&&($a=qk(Ba)),$a){case Vg:Aa=za=0;break;case Cc:isFinite(xa)&&(Ua=xa),isFinite(ya)&&(Wa=ya);break;case ik:isFinite(xa)&&(Ua=xa),Aa=0;break;case hk:za=0,isFinite(ya)&&(Wa=ya)}Ba instanceof V&&!Ba.Ca.N()&&(Ba.ah?Ba.yk=null:Ba.Ta=null),Lk(Ba),ih(Ba,Ua,Wa,za,Aa),e.width=Ba.Ga.width+Da,e.height=Ba.Ga.height+Ea}break;case"Table":for(var _a=a,ab=b,bb=k,cb=c,db=d,eb=t.Db(),fb=t.Db(),gb=0;bb>gb;gb++){var ib=j.n[gb];if(ib instanceof y&&(ib.type===zk||ib.type===Ak)&&ib.visible){fb.push(ib);for(var jb=ib.xa,kb=jb.length,lb=0;kb>lb;lb++){var mb=jb.n[lb];ib.type===zk?mb.lc=ib.lc:ib.type===Ak&&(mb.column=ib.column),eb.push(mb)}}else eb.push(ib)}bb=eb.length,0===bb&&(this.wd(0),this.vd(0));for(var nb=[],gb=0;bb>gb;gb++)ib=eb[gb],rk(ib,!0),vk(ib,!0),nb[ib.lc]||(nb[ib.lc]=[]),nb[ib.lc][ib.column]||(nb[ib.lc][ib.column]=[]),nb[ib.lc][ib.column].push(ib);t.ya(eb);for(var ob=t.Db(),pb=t.Db(),qb=t.Db(),rb={count:0},sb={count:0},tb=_a,ub=ab,vb=this.kd,bb=vb.length,gb=0;bb>gb;gb++){var wb=vb[gb];void 0!==wb&&Ql(wb,0)}for(vb=this.dd,bb=vb.length,gb=0;bb>gb;gb++)wb=vb[gb],void 0!==wb&&Ql(wb,0);for(var xb=nb.length,yb=0,gb=0;xb>gb;gb++)nb[gb]&&(yb=Math.max(yb,nb[gb].length));for(var zb,Ab=Math.min(this.Pi,xb-1),Bb=Math.min(this.zi,yb-1),xb=nb.length,gb=Ab;xb>gb;gb++)if(nb[gb]){var yb=nb[gb].length,Cb=this.wd(gb);for(Ql(Cb,0),lb=Bb;yb>lb;lb++)if(nb[gb][lb]){var Db=this.vd(lb);void 0===ob[lb]&&(Ql(Db,0),ob[lb]=!0);for(var Eb=nb[gb][lb],Fb=Eb.length,Gb=0;Fb>Gb;Gb++)if(ib=Eb[Gb],ib.visible||ib===this.kc){var Ib=1<ib.Jj||1<ib.rj;Ib&&pb.push(ib);var Jb=ib.margin,Kb=Jb.right+Jb.left,Lb=Jb.top+Jb.bottom,Mb=Ok(ib,Cb,Db),Nb=ib.Ca,Ob=!isNaN(Nb.width),Pb=!isNaN(Nb.height),Qb=Ob&&Pb;Ib||Mb===Vg||Qb||(void 0===rb[lb]&&(rb[lb]=-1,rb.count++),void 0===sb[gb]&&(sb[gb]=-1,sb.count++),qb.push(ib)),ih(ib,1/0,1/0,0,0);var Rb=ib.Ga,Sb=Math.max(Rb.width+Kb,0),Tb=Math.max(Rb.height+Lb,0);1!==ib.Jj||!Pb&&Mb!==Vg&&Mb!==ik||(wb=this.wd(gb),zb=Math.max(Tb-wb.fc,0),zb>ub&&(zb=ub),Ql(wb,wb.fc+zb),ub=Math.max(ub-zb,0)),1!==ib.rj||!Ob&&Mb!==Vg&&Mb!==hk||(wb=this.vd(lb),zb=Math.max(Sb-wb.fc,0),zb>tb&&(zb=tb),Ql(wb,wb.fc+zb),tb=Math.max(tb-zb,0)),Ib&&Lk(ib)}}}t.ya(ob);for(var Ub=0,Vb=0,bb=this.Vs,gb=0;bb>gb;gb++)void 0!==this.dd[gb]&&(Ub+=this.vd(gb).Lb);for(bb=this.Mt,gb=0;bb>gb;gb++)void 0!==this.kd[gb]&&(Vb+=this.wd(gb).Lb);for(var tb=Math.max(_a-Ub,0),Wb=ub=Math.max(ab-Vb,0),Xb=tb,bb=qb.length,gb=0;bb>gb;gb++){var ib=qb[gb],Cb=this.wd(ib.lc),Db=this.vd(ib.column),Yb=ib.Ga,Jb=ib.margin,Kb=Jb.right+Jb.left,Lb=Jb.top+Jb.bottom;rb[ib.column]=0===Db.fc?Math.max(Yb.width+Kb,rb[ib.column]):null,sb[ib.lc]=0===Cb.fc?Math.max(Yb.height+Lb,sb[ib.lc]):null}var Zb=0,$b=0;for(gb in sb)"count"!==gb&&(Zb+=sb[gb]);for(gb in rb)"count"!==gb&&($b+=rb[gb]);for(var _b=t.Cl(),gb=0;bb>gb;gb++)if(ib=qb[gb],ib.visible||ib===this.kc){var ac,Cb=this.wd(ib.lc),Db=this.vd(ib.column);isFinite(Db.width)?ac=Db.width:(ac=isFinite(tb)&&null!==rb[ib.column]?0===$b?Db.fc+tb:rb[ib.column]/$b*Xb:null!==rb[ib.column]?tb:Db.fc||tb,ac=Math.max(0,ac-Nl(Db)));var bc;switch(isFinite(Cb.height)?bc=Cb.height:(bc=isFinite(ub)&&null!==sb[ib.lc]?0===Zb?Cb.fc+ub:sb[ib.lc]/Zb*Wb:null!==sb[ib.lc]?ub:Cb.fc||ub,bc=Math.max(0,bc-Nl(Cb))),_b.p(Math.max(Db.di,Math.min(ac,Db.zf)),Math.max(Cb.di,Math.min(bc,Cb.zf))),Mb=Ok(ib,Cb,Db)){case ik:_b.height=1/0;break;case hk:_b.width=1/0}Jb=ib.margin,Kb=Jb.right+Jb.left,Lb=Jb.top+Jb.bottom,Lk(ib),ih(ib,_b.width,_b.height,Db.di,Cb.di),Rb=ib.Ga,Sb=Math.max(Rb.width+Kb,0),Tb=Math.max(Rb.height+Lb,0),isFinite(tb)&&(Sb=Math.min(Sb,_b.width)),isFinite(ub)&&(Tb=Math.min(Tb,_b.height));var cc;cc=Cb.fc,Ql(Cb,Math.max(Cb.fc,Tb)),zb=Cb.fc-cc,ub=Math.max(ub-zb,0),cc=Db.fc,Ql(Db,Math.max(Db.fc,Sb)),zb=Db.fc-cc,tb=Math.max(tb-zb,0)}t.ya(qb);for(var dc=t.Cl(),bb=pb.length,gb=0;bb>gb;gb++)if(ib=pb[gb],ib.visible||ib===this.kc){switch(Cb=this.wd(ib.lc),Db=this.vd(ib.column),_b.p(Math.max(Db.di,Math.min(_a,Db.zf)),Math.max(Cb.di,Math.min(ab,Cb.zf))),
Mb=Ok(ib,Cb,Db)){case Cc:0!==Db.fc&&(_b.width=Math.min(_b.width,Db.fc)),0!==Cb.fc&&(_b.height=Math.min(_b.height,Cb.fc));break;case ik:0!==Db.fc&&(_b.width=Math.min(_b.width,Db.fc));break;case hk:0!==Cb.fc&&(_b.height=Math.min(_b.height,Cb.fc))}isFinite(Db.width)&&(_b.width=Db.width),isFinite(Cb.height)&&(_b.height=Cb.height),dc.p(0,0);for(var ec=1;ec<ib.Jj&&!(ib.lc+ec>=this.Mt);ec++)wb=this.wd(ib.lc+ec),dc.height+=Math.max(wb.di,isNaN(wb.Mf)?wb.zf:Math.min(wb.Mf,wb.zf));for(ec=1;ec<ib.rj&&!(ib.column+ec>=this.Vs);ec++)wb=this.vd(ib.column+ec),dc.width+=Math.max(wb.di,isNaN(wb.Mf)?wb.zf:Math.min(wb.Mf,wb.zf));_b.width+=dc.width,_b.height+=dc.height,Jb=ib.margin,Kb=Jb.right+Jb.left,Lb=Jb.top+Jb.bottom,ih(ib,_b.width,_b.height,cb,db);for(var Rb=ib.Ga,Sb=Math.max(Rb.width+Kb,0),Tb=Math.max(Rb.height+Lb,0),fc=0,ec=0;ec<ib.Jj&&!(ib.lc+ec>=this.Mt);ec++)wb=this.wd(ib.lc+ec),fc+=wb.total||0;if(Tb>fc)for(var gc=Tb-fc;gc>0;){var hc=wb.Lb||0;if(isNaN(wb.height)&&wb.zf>hc&&(Ql(wb,Math.min(wb.zf,hc+gc)),wb.Lb!==hc&&(gc-=wb.Lb-hc)),-1===wb.index-1)break;wb=this.wd(wb.index-1)}for(var ic=0,ec=0;ec<ib.rj&&!(ib.column+ec>=this.Vs);ec++)wb=this.vd(ib.column+ec),ic+=wb.total||0;if(Sb>ic)for(gc=Sb-ic;gc>0&&(hc=wb.Lb||0,isNaN(wb.width)&&wb.zf>hc&&(Ql(wb,Math.min(wb.zf,hc+gc)),wb.Lb!==hc&&(gc-=wb.Lb-hc)),-1!==wb.index-1);)wb=this.vd(wb.index-1)}t.ya(pb),t.ck(dc),t.ck(_b);for(var jc=0,kc=0,Mb=qk(this),lc=this.Ca,mc=this.He,nc=Vb=Ub=0,oc=0,bb=this.Vs,gb=0;bb>gb;gb++)void 0!==this.dd[gb]&&(wb=this.vd(gb),isFinite(wb.width)?(nc+=wb.width,nc+=Nl(wb)):Rl(wb)===Sl?(nc+=wb.Lb,nc+=Nl(wb)):0!==wb.Lb&&(Ub+=wb.Lb,Ub+=Nl(wb)));var jc=isFinite(lc.width)?Math.min(lc.width,mc.width):Mb!==Vg&&isFinite(_a)?_a:Ub,jc=Math.max(jc,this.Vf.width),jc=Math.max(jc-nc,0),pc=Math.max(jc/Ub,1);for(isFinite(pc)||(pc=1),gb=0;bb>gb;gb++)void 0!==this.dd[gb]&&(wb=this.vd(gb),isFinite(wb.width)||Rl(wb)===Sl||Ql(wb,wb.Lb*pc),wb.Ra=e.width,0!==wb.Lb&&(e.width+=wb.Lb,e.width+=Nl(wb)));for(bb=this.Mt,gb=0;bb>gb;gb++)void 0!==this.kd[gb]&&(wb=this.wd(gb),isFinite(wb.height)?(oc+=wb.height,oc+=Nl(wb)):Rl(wb)===Sl?(oc+=wb.Lb,oc+=Nl(wb)):0!==wb.Lb&&(Vb+=wb.Lb,Vb+=Nl(wb)));var kc=isFinite(lc.height)?Math.min(lc.height,mc.height):Mb!==Vg&&isFinite(ab)?ab:Vb,kc=Math.max(kc,this.Vf.height),kc=Math.max(kc-oc,0),qc=Math.max(kc/Vb,1);for(isFinite(qc)||(qc=1),gb=0;bb>gb;gb++)void 0!==this.kd[gb]&&(wb=this.wd(gb),isFinite(wb.height)||Rl(wb)===Sl||Ql(wb,wb.Lb*qc),wb.Ra=e.height,0!==wb.Lb&&(e.height+=wb.Lb,e.height+=Nl(wb)));for(bb=fb.length,gb=0;bb>gb;gb++){var rc=fb[gb];rc.type===zk?(ac=e.width,wb=this.wd(rc.lc),bc=wb.fc):(wb=this.vd(rc.column),ac=wb.fc,bc=e.height),rc.Wc.p(0,0,ac,bc),rk(rc,!1),nb[rc.lc]||(nb[rc.lc]=[]),nb[rc.lc][rc.column]||(nb[rc.lc][rc.column]=[]),nb[rc.lc][rc.column].push(rc)}t.ya(fb),this.bs=nb;break;case"Viewbox":var sc=a,tc=b,uc=c,vc=d;k>1&&t.m("Viewbox Panel cannot contain more than one GraphObject.");var wc=j.n[0];wc.xc=1,Lk(wc),ih(wc,1/0,1/0,uc,vc);var xc=wc.Ga,yc=wc.margin,zc=yc.right+yc.left,Ac=yc.top+yc.bottom;if(isFinite(sc)||isFinite(tc)){var Bc=wc.scale,Dc=xc.width,Ec=xc.height,Fc=Math.max(sc-zc,0),Gc=Math.max(tc-Ac,0),Hc=1;this.Io===Xg?0!==Dc&&0!==Ec&&(Hc=Math.min(Fc/Dc,Gc/Ec)):0!==Dc&&0!==Ec&&(Hc=Math.max(Fc/Dc,Gc/Ec)),0===Hc&&(Hc=1e-4),wc.xc*=Hc,Bc!==wc.scale&&(rk(wc,!0),ih(wc,1/0,1/0,uc,vc))}xc=wc.Ga,e.width=isFinite(sc)?sc:Math.max(xc.width+zc,0),e.height=isFinite(tc)?tc:Math.max(xc.height+Ac,0);break;case"Link":var Ic=this instanceof Je?this.Wh:this;if(0===k){var Jc=this.hd;Va(Jc,0,0);var Kc=this.Ga;Kc.p(0,0,0,0)}else{var Lc=this.Rq(),Mc=this.uj(),Nc=this.Qi;Nc.assign(Mc),Nc.x=0,Nc.y=0;var Oc,Pc=this.Sy();Oc=void 0!==this.pa?this.pa:Pc.count,this.Yg.p(Mc.x,Mc.y),this.mi.clear(),null!==Lc&&(Tl(Lc,Mc.width,Mc.height),Kc=Lc.Ga,Nc.ii(Kc),this.mi.add(Kc));for(var Qc=t.oh(),Rc=t.K(),Sc=t.K(),Tc=0;k>Tc;Tc++){var Uc=j.n[Tc];if(Uc!==Lc)if(Uc.fj&&Uc instanceof V)Tl(Uc,Mc.width,Mc.height),Kc=Uc.Ga,Nc.ii(Kc),this.mi.add(Kc);else if(2>Oc)ih(Uc,1/0,1/0),Kc=Uc.Ga,Nc.ii(Kc),this.mi.add(Kc);else{var Vc=Uc.Cf,Wc=Uc.Nt,Xc=Uc.Qj;Xc.Ge()&&(Xc=Hb);var Yc,Zc,$c=Uc.Ot,_c=Uc.YA,ad=0;if(-Oc>Vc||Vc>=Oc){var bd=Ic.yF,cd=Ic.xF;$c!==zg&&(ad=Ic.computeAngle(Uc,$c,cd),Uc.angle=ad),Yc=bd.x-Mc.x,Zc=bd.y-Mc.y}else{var dd,ed;if(Vc>=0)dd=Pc.n[Vc],ed=Oc-1>Vc?Pc.n[Vc+1]:dd;else{var fd=Oc+Vc;dd=Pc.n[fd],ed=fd>0?Pc.n[fd-1]:dd}cd=Vc>=0?dd.aj(ed):ed.aj(dd),$c!==zg&&(ad=Ic.computeAngle(Uc,$c,cd),Uc.wn=ad),Yc=dd.x+(ed.x-dd.x)*Wc-Mc.x,Zc=dd.y+(ed.y-dd.y)*Wc-Mc.y}ih(Uc,1/0,1/0);var Kc=Uc.Ga,Jc=Uc.Pa,gd=0;Uc instanceof V&&(gd=Uc.fb);var hd=Jc.width+gd,id=Jc.height+gd;Qc.reset(),Qc.translate(-Kc.x,-Kc.y),Qc.scale(Uc.scale,Uc.scale),Qc.rotate($c===zg?Uc.angle:cd,hd/2,id/2);var jd=new x(0,0,hd,id);Rc.Qt(jd,Xc),Qc.Sa(Rc);var kd=-Rc.x+gd/2,ld=-Rc.y+gd/2;Sc.assign(_c),isNaN(Sc.x)&&(Sc.x=Vc>=0?hd/2+3:-(hd/2+3)),isNaN(Sc.y)&&(Sc.y=-(id/2+3)),Sc.rotate(cd),Yc+=Sc.x,Zc+=Sc.y,jd.set(Kc),jd.x=Yc+kd,jd.y=Zc+ld,this.mi.add(jd),Nc.ii(jd)}}if(this.we)for(var md=this.fk;md.next();)ih(md.value,1/0,1/0);this.Qi=Nc;var nd=this.Yg;nd&&nd.p(nd.x+Nc.x,nd.y+Nc.y),Va(e,Nc.width||0,Nc.height||0),t.We(Qc),t.B(Rc),t.B(Sc)}break;case"Grid":break;case"TableRow":case"TableColumn":t.m(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:t.m("Unknown panel type: "+l)}}var od=e.width,pd=e.height,qd=this.padding,rd=qd.top+qd.bottom,od=od+(qd.left+qd.right),pd=pd+rd;isFinite(f.width)&&(od=f.width),isFinite(f.height)&&(pd=f.height),od=Math.min(h.width,od),pd=Math.min(h.height,pd),od=Math.max(g.width,od),pd=Math.max(g.height,pd),od=Math.max(c,od),pd=Math.max(d,pd),e.width=od,e.height=pd,Va(this.hd,od,pd),nk(this,0,0,od,pd)},y.prototype.findMainElement=y.prototype.Dw=function(){return null===this.Eo&&Kk(this,this.xa,this.xa.length),this.Eo},y.prototype.Tj=function(a,b,c,d){var e=this.Qi,f=this.xa,g=f.length,h=t.ik(0,0,0,0);if(0===g){var i=this.oa;i.x=a,i.y=b,i.width=c,i.height=d}else{if(!this.Ca.N()){var j=qk(this),k=this.Wc,l=k.width,m=k.height,n=this.margin,o=n.left+n.right,p=n.top+n.bottom;switch(l===c&&m===d&&(j=Vg),j){case Vg:(l>c||m>d)&&(this.ha(),ih(this,l>c?c:l,m>d?d:m));break;case Cc:rk(this,!0),ih(this,c+o,d+p,0,0);break;case ik:rk(this,!0),ih(this,c+o,m+p,0,0);break;case hk:rk(this,!0),ih(this,l+o,d+p,0,0)}}i=this.oa,i.x=a,i.y=b,i.width=c,i.height=d;var q=this.da.Zb;switch(q){case"Position":for(var r=e.x-this.padding.left,s=e.y-this.padding.top,u=0;g>u;u++){var v=f.n[u],w=v.Ga,z=v.margin,A=v.position.x,B=v.position.y;if(h.x=isNaN(A)?-r:A-r,h.y=isNaN(B)?-s:B-s,v instanceof V&&v.rA){var C=v.fb/2;h.x-=C,h.y-=C}h.x+=z.left,h.y+=z.top,h.width=w.width,h.height=w.height,v.visible&&v.Lc(h.x,h.y,h.width,h.height)}break;case"Vertical":for(var D=this.padding.left,E=this.padding.top,F=0;g>F;F++){var G=D,H=f.n[F];if(H.visible){var I=H.Ga,J=H.margin,K=J.left+J.right,L=D+this.padding.right,M=I.width,N=qk(H);(isNaN(H.Ca.width)&&N===Cc||N===ik)&&(M=Math.max(e.width-K-L,0));var O=M+K+L,P=H.alignment;P.Pc()&&(P=this.Xj),P.xd()||(P=Hb),H.Lc(G+P.offsetX+J.left+(e.width*P.x-O*P.x),E+P.offsetY+J.top,M,I.height),E+=I.height+J.bottom+J.top}}break;case"Horizontal":for(var Q=this.padding.top,R=this.padding.left,S=0;g>S;S++){var T=Q,U=f.n[S];if(U.visible){var W=U.Ga,X=U.margin,Y=X.top+X.bottom,Z=Q+this.padding.bottom,$=W.height,_=qk(U);(isNaN(U.Ca.height)&&_===Cc||_===hk)&&($=Math.max(e.height-Y-Z,0));var aa=$+Y+Z,ba=U.alignment;ba.Pc()&&(ba=this.Xj),ba.xd()||(ba=Hb),U.Lc(R+ba.offsetX+X.left,T+ba.offsetY+X.top+(e.height*ba.y-aa*ba.y),W.width,$),R+=W.width+X.left+X.right}}break;case"Spot":var ca=Kk(this,f,g),da=ca.Ga,ea=da.width,fa=da.height,ga=this.padding,ha=ga.left,ia=ga.top;h.x=ha-e.x,h.y=ia-e.y,ca.Lc(h.x,h.y,ea,fa);for(var ja=0;g>ja;ja++){var ka=f.n[ja];if(ka!==ca){var la=ka.Ga,ma=la.width,na=la.height,oa=ka.alignment;oa.Pc()&&(oa=this.Xj),oa.xd()||(oa=Hb);var pa=ka.Qj;pa.Pc()&&(pa=Hb),h.x=oa.x*ea+oa.offsetX-(pa.x*ma-pa.offsetX),h.y=oa.y*fa+oa.offsetY-(pa.y*na-pa.offsetY),h.x-=e.x,h.y-=e.y,ka.visible&&ka.Lc(ha+h.x,ia+h.y,ma,na)}}break;case"Auto":var qa=Kk(this,f,g),ra=qa.Ga,sa=t.Gf();sa.p(0,0,1,1);var ta=qa.margin,ua=ta.left,va=ta.top,wa=this.padding,xa=wa.left,ya=wa.top;h.x=ua,h.y=va,h.width=ra.width,h.height=ra.height,qa.Lc(xa+h.x,ya+h.y,h.width,h.height);var za=Ol(qa),Aa=Pl(qa),Ba=0+za.y*ra.height+za.offsetY,Ca=0+Aa.x*ra.width+Aa.offsetX,Da=0+Aa.y*ra.height+Aa.offsetY;sa.x=0+za.x*ra.width+za.offsetX,sa.y=Ba,hb(sa,Ca,Da,0,0),sa.x+=ua+xa,sa.y+=va+ya;for(var Ea=0;g>Ea;Ea++){var Fa=f.n[Ea];if(Fa!==qa){var Ga=Fa.Ga,ta=Fa.margin,Ha=Math.max(Ga.width+ta.right+ta.left,0),Ia=Math.max(Ga.height+ta.top+ta.bottom,0),Ja=Fa.alignment;Ja.Pc()&&(Ja=this.Xj),Ja.xd()||(Ja=Hb),h.x=sa.width*Ja.x+Ja.offsetX-Ha*Ja.x+ta.left+sa.x,h.y=sa.height*Ja.y+Ja.offsetY-Ia*Ja.y+ta.top+sa.y,h.width=sa.width,h.height=sa.height,Fa.visible&&(mb(sa.x,sa.y,sa.width,sa.height,h.x,h.y,Ga.width,Ga.height)?Fa.Lc(h.x,h.y,Ga.width,Ga.height):Fa.Lc(h.x,h.y,Ga.width,Ga.height,new x(sa.x,sa.y,sa.width,sa.height)))}}t.hc(sa);break;case"Table":for(var Ka,La,Ma=this.padding,Na=Ma.left,Oa=Ma.top,Pa=this.bs,Qa=Pa.length,Ra=0,Sa=0;Qa>Sa;Sa++)Pa[Sa]&&(Ra=Math.max(Ra,Pa[Sa].length));for(var Ta=Math.min(this.Pi,Qa-1);Ta!==Qa&&(void 0===this.kd[Ta]||0===this.kd[Ta].Lb);)Ta++;for(var Ta=Math.min(Ta,Qa-1),Ua=-this.kd[Ta].Ra,Va=Math.min(this.zi,Ra-1);Va!==Ra&&(void 0===this.dd[Va]||0===this.dd[Va].Lb);)Va++;for(var Va=Math.min(Va,Ra-1),Wa=-this.dd[Va].Ra,Xa=t.Cl(),Sa=0;Qa>Sa;Sa++)if(Pa[Sa]){var Ra=Pa[Sa].length,Ya=this.wd(Sa);La=Ya.Ra+Ua+Oa+Ul(Ya);for(var Za=0;Ra>Za;Za++)if(Pa[Sa][Za]){var $a=this.vd(Za);Ka=$a.Ra+Wa+Na+Ul($a);for(var _a=Pa[Sa][Za],ab=_a.length,bb=0;ab>bb;bb++){var cb=_a[bb],db=cb.Ga;if(cb instanceof y&&(cb.type===zk||cb.type===Ak)){sk(cb),cb.cc.Ma();var eb=cb.cc;eb.x=cb.type===zk?Na:Ka,eb.y=cb.type===Ak?Oa:La,eb.width=db.width,eb.height=db.height,cb.cc.freeze(),vk(cb,!1)}else{Xa.p(0,0);for(var fb=1;fb<cb.rowSpan&&!(Sa+fb>=this.Mt);fb++){var gb=this.wd(Sa+fb);Xa.height+=gb.total}for(fb=1;fb<cb.ZD&&!(Za+fb>=this.Vs);fb++){var ib=this.vd(Za+fb);Xa.width+=ib.total}var jb=$a.Lb+Xa.width,kb=Ya.Lb+Xa.height;h.x=Ka,h.y=La,h.width=jb,h.height=kb;var lb=Ka,nb=La,ob=jb,pb=kb;Ka+jb>e.width&&(ob=Math.max(e.width-Ka,0)),La+kb>e.height&&(pb=Math.max(e.height-La,0));var qb,rb,sb,tb,ub=cb.alignment;if(ub.Pc()){ub=this.Xj,ub.xd()||(ub=Hb),qb=ub.x,rb=ub.y,sb=ub.offsetX,tb=ub.offsetY;var vb=$a.alignment,wb=Ya.alignment;vb.xd()&&(qb=vb.x,sb=vb.offsetX),wb.xd()&&(rb=wb.y,tb=wb.offsetY)}else qb=ub.x,rb=ub.y,sb=ub.offsetX,tb=ub.offsetY;(isNaN(qb)||isNaN(rb))&&(rb=qb=.5,tb=sb=0);var xb=db.width,yb=db.height,zb=cb.margin,Ab=zb.left+zb.right,Bb=zb.top+zb.bottom,Cb=Ok(cb,Ya,$a);!isNaN(cb.Ca.width)||Cb!==Cc&&Cb!==ik||(xb=Math.max(jb-Ab,0)),!isNaN(cb.Ca.height)||Cb!==Cc&&Cb!==hk||(yb=Math.max(kb-Bb,0));var Db=cb.He,Eb=cb.Vf,xb=Math.min(Db.width,xb),yb=Math.min(Db.height,yb),xb=Math.max(Eb.width,xb),yb=Math.max(Eb.height,yb),Fb=yb+Bb;h.x+=h.width*qb-(xb+Ab)*qb+sb+zb.left,h.y+=h.height*rb-Fb*rb+tb+zb.top,cb.visible&&(mb(lb,nb,ob,pb,h.x,h.y,db.width,db.height)?cb.Lc(h.x,h.y,xb,yb):cb.Lc(h.x,h.y,xb,yb,new x(lb,nb,ob,pb)))}}}}for(t.ck(Xa),Sa=0;g>Sa;Sa++)cb=f.n[Sa],cb instanceof y&&(cb.type===zk||cb.type===Ak)&&(eb=cb.cc,cb.hd.Ma(),cb.hd.Sp(0,0,eb.width,eb.height),cb.hd.freeze());break;case"Viewbox":var Gb=f.n[0],Ib=Gb.Ga,Jb=Gb.margin,Kb=Jb.top+Jb.bottom,Lb=Math.max(Ib.width+(Jb.right+Jb.left),0),Mb=Math.max(Ib.height+Kb,0),Nb=Gb.alignment;Nb.Pc()&&(Nb=this.Xj),Nb.xd()||(Nb=Hb),h.x=e.width*Nb.x-Lb*Nb.x+Nb.offsetX,h.y=e.height*Nb.y-Mb*Nb.y+Nb.offsetY,h.width=Ib.width,h.height=Ib.height,Gb.Lc(h.x,h.y,h.width,h.height);break;case"Link":var Ob=this.Rq(),Pb=0;if(null!==Ob&&Pb<this.mi.count){var Qb=this.mi.n[Pb];Pb++,Ob.Lc(Qb.x-this.Qi.x,Qb.y-this.Qi.y,Qb.width,Qb.height)}for(var Rb=0;g>Rb;Rb++){var Sb=f.n[Rb];Sb!==Ob&&Pb<this.mi.count&&(Qb=this.mi.n[Pb],Pb++,Sb.Lc(Qb.x-this.Qi.x,Qb.y-this.Qi.y,Qb.width,Qb.height))}var Tb=this.Sy(),Ub=Tb.count;if(Ub>=2&&this.we)for(var Vb=this.fk;Vb.next();){var Wb=Vb.value,Xb=Ub,Yb=Tb,Zb=Wb.Cf,$b=Wb.Nt,_b=Wb.Qj;_b.Ge()&&(_b=Hb);var ac=Wb.Ot,bc=Wb.YA,cc=void 0,dc=void 0,ec=0;if(-Xb>Zb||Zb>=Xb){var fc=this.yF,gc=this.xF;ac!==zg&&(ec=this.computeAngle(Wb,ac,gc),Wb.angle=ec),cc=fc.x,dc=fc.y}else{var hc=void 0,ic=void 0;if(Zb>=0)hc=Yb.n[Zb],ic=Xb-1>Zb?Yb.n[Zb+1]:hc;else var jc=Xb+Zb,hc=Yb.n[jc],ic=jc>0?Yb.n[jc-1]:hc;gc=Zb>=0?hc.aj(ic):ic.aj(hc),ac!==zg&&(ec=this.computeAngle(Wb,ac,gc),Wb.angle=ec),cc=hc.x+(ic.x-hc.x)*$b,dc=hc.y+(ic.y-hc.y)*$b}var kc=t.oh();kc.reset(),kc.scale(Wb.scale,Wb.scale),kc.rotate(Wb.angle,0,0);var lc=Wb.Pa,mc=t.ik(0,0,lc.width,lc.height),nc=t.K();nc.Qt(mc,_b),kc.Sa(nc);var oc=-nc.x,pc=-nc.y,qc=bc.copy();isNaN(qc.x)&&(qc.x=Zb>=0?nc.x+3:-(nc.x+3)),isNaN(qc.y)&&(qc.y=-(nc.y+3)),qc.rotate(gc),cc+=qc.x,dc+=qc.y,kc.JG(mc);var oc=oc+mc.x,pc=pc+mc.y,rc=t.mc(cc+oc,dc+pc);Wb.move(rc),t.B(rc),t.B(nc),t.hc(mc),t.We(kc)}this.bx();break;case"Grid":break;case"TableRow":case"TableColumn":t.m(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:t.m("Unknown panel type: "+q)}t.hc(h)}},y.prototype.Uj=function(a){var b=this.Pa;if(mb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.xa.length,b=t.mc(0,0);c--;){var d=this.xa.n[0];if((d.visible||d===this.kc)&&(Qa(b.set(a),d.transform),d.Fa(b)))return t.B(b),!0}return t.B(b),null===this.Mb&&null===this.vc?!1:!0}return!1},y.prototype.walkVisualTree=function(a){Xl(this,this,a)},y.prototype.findInVisualTree=y.prototype.bt=function(a){return Yl(this,this,a)},y.prototype.findObject=y.prototype.oe=function(a){if(this.name===a)return this;for(var b=this.xa.n,c=b.length,d=0;c>d;d++){var e=b[d];if(e.name===a)return e;if(e instanceof y)if(null===e.yi&&null===e.hg){if(e=e.oe(a),null!==e)return e}else if(Zl(e)&&(e=e.xa.$a(),null!==e&&(e=e.oe(a),null!==e)))return e}return null},aa=y.prototype,aa.Hf=function(){return!(this.type===zk||this.type===Ak)},aa.pe=function(a,b,c){if(!1===this.Bf)return null;if(void 0===b&&(b=null),void 0===c&&(c=null),Ri(this))return null;var d=this.Pa,e=1/this.ek(),f=this.Hf(),g=f?a:Qa(t.mc(a.x,a.y),this.transform);if(mb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,g.x,g.y)){if(!this.Vg){for(var h=this.xa.length,e=t.K();h--;){var i=this.xa.n[h];if(i.visible||i===this.kc){i.Hf()?Qa(e.set(a),i.transform):e.set(a);var j=null;if(i instanceof y?j=i.pe(e,b,c):!0===i.Bf&&i.Fa(e)&&(j=i),null!==j&&(null!==b&&(j=b(j)),j&&(null===c||c(j))))return t.B(e),f||t.B(g),j}}t.B(e)}return null===this.background&&null===this.$k?(f||t.B(g),null):(a=mb(0,0,d.width,d.height,g.x,g.y)?this:null,f||t.B(g),a)}return f||t.B(g),null},aa.cp=function(a,b,c,d){if(!1===this.Bf)return!1;void 0===b&&(b=null),void 0===c&&(c=null),d instanceof B||d instanceof ma||(d=new B(Q));var e=this.Pa,f=this.Hf(),g=f?a:Qa(t.mc(a.x,a.y),this.transform);if(mb(0,0,e.width,e.height,g.x,g.y)){if(!this.Vg){for(var h=this.xa.length,e=t.K();h--;){var i=this.xa.n[h];(i.visible||i===this.kc)&&(i.Hf()?Qa(e.set(a),i.transform):e.set(a),(i instanceof y?i.cp(e,b,c,d):i.Fa(e))&&!1!==i.Bf&&(null!==b&&(i=b(i)),i&&(null===c||c(i))&&d.add(i)))}t.B(e)}return f||t.B(g),null!==this.background||null!==this.$k}return f||t.B(g),!1},aa.bk=function(a,b,c,d,e,f){if(!1===this.Bf)return!1;void 0===b&&(b=null),void 0===c&&(c=null);var g=f;if(void 0===f&&(g=t.oh(),g.reset()),g.multiply(this.transform),this.Km(a,g))return am(this,b,c,e),void 0===f&&t.We(g),!0;if(this.Tf(a,g)){if(!this.Vg)for(var h=this.xa.length;h--;){var i=this.xa.n[h];if(i.visible||i===this.kc){var j=i.oa,k=this.Pa;j.x>k.width||j.y>k.height||0>j.x+j.width||0>j.y+j.height||(j=t.oh(),j.set(g),(i instanceof y?i.bk(a,b,c,d,e,j):pk(i,a,d,j))&&(null!==b&&(i=b(i)),i&&(null===c||c(i))&&e.add(i)),t.We(j))}}return void 0===f&&t.We(g),d}return void 0===f&&t.We(g),!1},aa.Qm=function(a,b,c,d,e,f){if(!1===this.Bf)return!1;void 0===c&&(c=null),void 0===d&&(d=null);var g=this.Pa,h=this.Hf(),i=h?a:Qa(t.mc(a.x,a.y),this.transform),j=h?b:Qa(t.mc(b.x,b.y),this.transform),k=i.Zj(j),l=0<i.x&&i.x<g.width&&0<i.y&&i.y<g.height||Ra(i.x,i.y,0,0,0,g.height)<k||Ra(i.x,i.y,0,g.height,g.width,g.height)<k||Ra(i.x,i.y,g.width,g.height,g.width,0)<k||Ra(i.x,i.y,g.width,0,0,0)<k,g=0<i.x&&i.x<g.width&&0<i.y&&i.y<g.height&&Ra(i.x,i.y,0,0,0,g.height)<k&&Ra(i.x,i.y,0,g.height,g.width,g.height)<k&&Ra(i.x,i.y,g.width,g.height,g.width,0)<k&&Ra(i.x,i.y,g.width,0,0,0)<k;if(h||(t.B(i),t.B(j)),l){if(!this.Vg){for(h=t.K(),i=t.K(),j=this.xa.length;j--;)if(k=this.xa.n[j],k.visible||k===this.kc){var m=k.oa,n=this.Pa;m.x>n.width||m.y>n.height||0>m.x+m.width||0>m.y+m.height||(k.Hf()?(m=k.transform,Qa(h.set(a),m),Qa(i.set(b),m)):(h.set(a),i.set(b)),k instanceof y?!k.Qm(h,i,c,d,e,f):!k.AE(h,i,e))||(null!==c&&(k=c(k)),k&&(null===d||d(k))&&f.add(k))}t.B(h),t.B(i)}return e?l:g}return!1},y.prototype.add=y.prototype.add=function(a){t.l(a,Q,y,"add:element"),this.Jd(this.xa.count,a)},y.prototype.elt=y.prototype.wa=function(a){return this.xa.wa(a)},y.prototype.insertAt=y.prototype.Jd=function(a,b){b instanceof C&&t.m("Cannot add a Part to a Panel: "+b),(this===b||this.ej(b))&&(this===b&&t.m("Cannot make a Panel contain itself: "+this.toString()),t.m("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString()));var c=b.ja;if(null!==c&&c!==this&&t.m("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+b.toString()+", already contained by "+c.toString()+", cannot be shared by this Panel: "+this.toString()),this.da!==yi||b instanceof V||t.m("Can only add Shapes to a Grid Panel, not: "+b),b.xl(this),b.nm=null,null!==this.xA){var d=b.data;null!==d&&"object"==typeof d&&(null===this.gg&&(this.gg=new ia(Object,y)),this.gg.add(d,b))}var e=this.xa,d=-1;if(c===this){for(var f=-1,g=e.count,h=0;g>h;h++)if(e.n[h]===b){f=h;break}if(-1!==f){if(f===a||f+1>=e.count&&a>=e.count)return;e.qd(f),d=f}else t.m("element "+b.toString()+" has panel "+c.toString()+" but is not contained by it.")}(0>a||a>e.count)&&(a=e.count),e.Jd(a,b),this.ha(),b.ha(),null!==b.Nd?this.Eh=!0:b instanceof y&&!0===b.Eh&&(this.Eh=!0),c=this.S,null!==c&&(c.Fj=null,c.Cj=NaN,this.Eh&&c instanceof R&&(c.Eh=!0),c.Eh&&(c.Rd=null),e=this.h,null!==e&&e.la.vb||(-1!==d&&c.Ic(xd,"elements",this,b,null,d,null),c.Ic(wd,"elements",this,null,b,null,a)))},y.prototype.remove=y.prototype.remove=function(a){t.l(a,Q,y,"remove:element");for(var b=this.xa,c=b.count,d=-1,e=0;c>e;e++)if(b.n[e]===a){d=e;break}-1!==d&&this.Xe(d)},y.prototype.removeAt=y.prototype.qd=function(a){e&&t.q(a,y,"removeAt:idx"),a>=0&&this.Xe(a)},y.prototype.Xe=function(a){var b=this.xa,c=b.wa(a);if(c.nm=null,c.xl(null),null!==this.gg){var d=c.data;"object"==typeof d&&this.gg.remove(d)}b.qd(a),rk(this,!1),this.ha(),b=this.S,null!==b&&(b.Fj=null,b.Cj=NaN,d=this.h,null!==d&&d.la.vb||b.Ic(xd,"elements",this,c,null,a,null))},t.A(y,{Mt:"rowCount"},function(){return void 0===this.kd?0:this.kd.length}),y.prototype.getRowDefinition=y.prototype.wd=function(a){if(void 0===this.kd)return null;e&&t.q(a,y,"getRowDefinition:idx"),0>a&&t.ka(a,">= 0",y,"getRowDefinition:idx"),a=Math.round(a);var b=this.kd;if(void 0===b[a]){var c=new Ae;c.xl(this),c.Xl=!0,c.Vc=a,b[a]=c}return b[a]},y.prototype.removeRowDefinition=y.prototype.QF=function(a){if(void 0!==this.kd){e&&t.q(a,y,"removeRowDefinition:idx"),0>a&&t.ka(a,">= 0",y,"removeRowDefinition:idx"),a=Math.round(a);var b=this.kd;this.Ic(xd,"coldefs",this,b[a],null,a,null),b[a]&&(b[a]=void 0),this.ha()}},t.A(y,{Vs:"columnCount"},function(){return void 0===this.dd?0:this.dd.length}),y.prototype.getColumnDefinition=y.prototype.vd=function(a){if(void 0===this.dd)return null;e&&t.q(a,y,"getColumnDefinition:idx"),0>a&&t.ka(a,">= 0",y,"getColumnDefinition:idx"),a=Math.round(a);var b=this.dd;if(void 0===b[a]){var c=new Ae;c.xl(this),c.Xl=!1,c.Vc=a,b[a]=c}return b[a]},y.prototype.removeColumnDefinition=y.prototype.NF=function(a){if(void 0!==this.dd){e&&t.q(a,y,"removeColumnDefinition:idx"),0>a&&t.ka(a,">= 0",y,"removeColumnDefinition:idx"),a=Math.round(a);var b=this.dd;this.Ic(xd,"coldefs",this,b[a],null,a,null),b[a]&&(b[a]=void 0),this.ha()}},t.g(y,"rowSizing",y.prototype.dG),t.defineProperty(y,{dG:"rowSizing"},function(){return void 0===this.sm?Jl:this.sm},function(a){if(void 0!==this.sm){var b=this.sm;b!==a&&(a!==Jl&&a!==Sl&&t.m("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.sm=a,this.ha(),this.j("rowSizing",b,a))}}),t.g(y,"columnSizing",y.prototype.YD),t.defineProperty(y,{YD:"columnSizing"},function(){return void 0===this.Ll?Jl:this.Ll},function(a){if(void 0!==this.Ll){var b=this.Ll;b!==a&&(a!==Jl&&a!==Sl&&t.m("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None"),this.Ll=a,this.ha(),this.j("columnSizing",b,a))}}),t.g(y,"topIndex",y.prototype.bK),t.defineProperty(y,{bK:"topIndex"},function(){return void 0===this.Pi?0:this.Pi},function(a){if(void 0!==this.Pi){var b=this.Pi;b!==a&&((!isFinite(a)||0>a)&&t.m("topIndex must be greater than zero and a real number. Was "+a),this.Pi=a,this.ha(),this.j("topIndex",b,a))}}),t.g(y,"leftIndex",y.prototype.iJ),t.defineProperty(y,{iJ:"leftIndex"},function(){return void 0===this.zi?0:this.zi},function(a){if(void 0!==this.zi){var b=this.zi;b!==a&&((!isFinite(a)||0>a)&&t.m("leftIndex must be greater than zero and a real number. Was "+a),this.zi=a,this.ha(),this.j("leftIndex",b,a))}}),y.prototype.findRowForLocalY=function(a){if(0>a)return-1;if(this.type!==Nk)return NaN;for(var b=0,c=this.kd,d=c.length,e=this.Pi;d>e;e++){var f=c[e];if(void 0!==f&&(b+=f.total,b>a))return e}return-1},y.prototype.findColumnForLocalX=function(a){if(0>a)return-1;if(this.type!==Nk)return NaN;for(var b=0,c=this.dd,d=c.length,e=this.zi;d>e;e++){var f=c[e];if(void 0!==f&&(b+=f.total,b>a))return e}return-1},t.g(y,"data",y.prototype.data),t.defineProperty(y,{data:"data"},function(){return this.Ol},function(a){var b=this.Ol;if(b!==a){var c=this instanceof C&&!(this instanceof Je);c&&t.i(a,"object",y,"data"),Le(this),this.Ol=a;var d=this.h;null!==d&&(c?this instanceof T?(null!==b&&d.Ak.remove(b),null!==a&&d.Ak.add(a,this)):(null!==b&&d.ri.remove(b),null!==a&&d.ri.add(a,this)):(c=this.ja,null!==c&&null!==c.gg&&(null!==b&&c.gg.remove(b),null!==a&&c.gg.add(a,this)))),this.j("data",b,a),null!==d&&d.la.vb||null!==a&&this.Kb()}}),t.g(y,"itemIndex",y.prototype.hF),t.defineProperty(y,{hF:"itemIndex"},function(){return this.hr},function(a){var b=this.hr;b!==a&&(this.hr=a,this.j("itemIndex",b,a))}),y.prototype.updateTargetBindings=y.prototype.Kb=function(a){var b=this.Jl;if(null!==b)for(void 0===a&&(a=""),b=b.k;b.next();){var c=b.value,d=c.eB;if((""===a||""===d||d===a)&&(d=c.Wt,null!==c.bE||""!==d)){var d=this.data,f=c.Ut;if(null!==f&&(d=this.oe(f)),null===d)e&&t.trace("Binding error: missing GraphObject named "+f+" in "+this.toString());else{var f=this,g=c.nn;if(""!==g){if(f=this.oe(g),null===f)continue}else null!==c.pg&&(f=c.pg);if(g=c.xz,0!==g){if(!(f instanceof y))continue;1===g?f=f.vd(c.Qv):2===g&&(f=f.wd(c.Qv))}void 0!==f&&c.PG(f,d)}}}},t.g(y,"itemArray",y.prototype.xA),t.defineProperty(y,{xA:"itemArray"},function(){return this.yi},function(a){var b=this.yi;if(b!==a){e&&null!==a&&!t.isArray(a)&&t.m("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.h;null!==c&&null!==b&&fj(c,this),this.yi=a,null!==c&&null!==a&&cj(c,this),this.j("itemArray",b,a),null!==c&&c.la.vb||this.QA()}}),y.prototype.rebuildItemElements=y.prototype.QA=function(){var a=0;for(Zl(this)&&(a=1);this.xa.length>a;)this.Xe(a);if(a=this.xA,null!==a)for(var b=t.ub(a),c=0;b>c;c++)uj(this,t.lb(a,c),c)},t.g(y,"itemTemplate",y.prototype.dJ),t.defineProperty(y,{dJ:"itemTemplate"},function(){return null===this.hg?null:this.hg.za("")},function(a){if(null===this.hg){if(null===a)return;this.hg=new ia("string",y)}var b=this.hg.za("");b!==a&&(t.l(a,y,y,"itemTemplate"),a instanceof C&&t.m("itemTemplate must not be a Part: "+a),this.hg.add("",a),this.j("itemTemplate",b,a),a=this.h,null!==a&&a.la.vb||this.QA())}),t.g(y,"itemTemplateMap",y.prototype.iF),t.defineProperty(y,{iF:"itemTemplateMap"},function(){return this.hg},function(a){var b=this.hg;if(b!==a){t.l(a,ia,y,"itemTemplateMap");for(var c=a.k;c.next();){var d=c.value;d instanceof C&&t.m("Template in itemTemplateMap must not be a Part: "+d)}this.hg=a,this.j("itemTemplateMap",b,a),a=this.h,null!==a&&a.la.vb||this.QA()}}),t.g(y,"itemCategoryProperty",y.prototype.cJ),t.defineProperty(y,{cJ:"itemCategoryProperty"},function(){return this.eo},function(a){var b=this.eo;b!==a&&("string"!=typeof a&&"function"!=typeof a&&t.bc(a,"string or function",y,"itemCategoryProperty"),this.eo=a,this.j("itemCategoryProperty",b,a))}),y.prototype.getCategoryForItemData=function(a){if(null===a)return"";var b=this.eo;if("function"==typeof b)b=b(a);else{if("string"!=typeof b||"object"!=typeof a)return"";if(""===b)return"";b=t.ib(a,b)}return void 0===b?"":"string"==typeof b?b:(t.m("Panel.getCategoryForItemData found a non-string category for "+a+": "+b),"")},y.prototype.findTemplateForItemData=function(a,b,c){return a=this.iF,b=null,null!==a&&(b=a.za(c)),null===b&&(t.UG||(t.UG=!0,t.trace('No item template Panel found for category "'+c+'" on '+this),t.trace("  Using default item template."),c=new y,a=new na,a.bind(new De("text","",yd)),c.add(a),t.mE=c),b=t.mE),b instanceof y?b:null},t.g(y,"isAtomic",y.prototype.VI),t.defineProperty(y,{VI:"isAtomic"},function(){return this.Vg},function(a){var b=this.Vg;b!==a&&(t.i(a,"boolean",y,"isAtomic"),this.Vg=a,this.j("isAtomic",b,a))}),t.ga("RowColumnDefinition",Ae),Ae.prototype.copy=function(){var a=new Ae;return a.Xl=this.Xl,a.Vc=this.Vc,a.Mf=this.Mf,a.hm=this.hm,a.gm=this.gm,a.ue=this.ue,a.Lb=this.Lb,a.Ra=this.Ra,a.Oh=this.Oh,a.os=this.os,a.Mj=null===this.Mj?null:this.Mj.Z(),a.ls=this.ls,a.ms=this.ms,a.Kh=null,this.Kh&&(a.Kh=this.Kh.slice(0)),a.Mb=this.Mb,a.zq=this.zq,a.Kc=this.Kc,a},Ae.prototype.toString=function(){return"RowColumnDefinition "+(this.xf?"(Row ":"(Column ")+this.index+") #"+t.od(this)};var cm;Ae.Default=cm=t.w(Ae,"Default",0);var Sl;Ae.None=Sl=t.w(Ae,"None",1);var Jl;Ae.ProportionalExtra=Jl=t.w(Ae,"ProportionalExtra",2),Ae.prototype.xl=function(a){this.Ii=a},Ae.prototype.Xc=function(a,b,c,d,e){var f=this.Ii;if(null!==f){f.ha();for(var g=this.xf,h=f.xa,i=h.length,j=0;i>j;j++){var k=h.n[j];(g?k.lc:k.column)===this.index&&k.ha()}if(f.Ic(vd,a,this,b,c,d,e),null!==this.Kc&&(b=f.ep(),null!==b&&(b=b.data,null!==b)))for(c=this.Kc.k;c.next();)c.value.nB(this,b,a,null)}},t.A(Ae,{ja:"panel"},function(){return this.Ii}),t.A(Ae,{xf:"isRow"},function(){return this.Xl}),t.A(Ae,{index:"index"},function(){return this.Vc}),t.g(Ae,"height",Ae.prototype.height),t.defineProperty(Ae,{height:"height"},function(){return this.Mf},function(a){var b=this.Mf;b!==a&&(e&&t.i(a,"number",Ae,"height"),0>a&&t.ka(a,">= 0",Ae,"height"),this.Mf=a,Ql(this,this.Lb),this.Xc("height",b,a))}),t.g(Ae,"width",Ae.prototype.width),t.defineProperty(Ae,{width:"width"},function(){return this.Mf},function(a){var b=this.Mf;b!==a&&(e&&t.i(a,"number",Ae,"width"),0>a&&t.ka(a,">= 0",Ae,"width"),this.Mf=a,Ql(this,this.Lb),this.Xc("width",b,a))}),t.g(Ae,"minimum",Ae.prototype.di),t.defineProperty(Ae,{di:"minimum"},function(){return this.hm},function(a){var b=this.hm;b!==a&&(e&&t.i(a,"number",Ae,"minimum"),(0>a||!isFinite(a))&&t.ka(a,">= 0",Ae,"minimum"),this.hm=a,Ql(this,this.Lb),this.Xc("minimum",b,a))}),t.g(Ae,"maximum",Ae.prototype.zf),t.defineProperty(Ae,{zf:"maximum"},function(){return this.gm},function(a){var b=this.gm;b!==a&&(e&&t.i(a,"number",Ae,"maximum"),0>a&&t.ka(a,">= 0",Ae,"maximum"),this.gm=a,Ql(this,this.Lb),this.Xc("maximum",b,a))}),t.g(Ae,"alignment",Ae.prototype.alignment),t.defineProperty(Ae,{alignment:"alignment"},function(){return this.ue},function(a){var b=this.ue;b.M(a)||(e&&t.l(a,H,Ae,"alignment"),this.ue=a.Z(),this.Xc("alignment",b,a))}),t.g(Ae,"stretch",Ae.prototype.fi),t.defineProperty(Ae,{fi:"stretch"},function(){return this.Oh},function(a){var b=this.Oh;b!==a&&(e&&t.Aa(a,Q,Ae,"stretch"),this.Oh=a,this.Xc("stretch",b,a))}),t.g(Ae,"separatorPadding",Ae.prototype.ZA),t.defineProperty(Ae,{ZA:"separatorPadding"},function(){return this.Mj},function(a){"number"==typeof a?a=new ab(a):null!==a&&e&&t.l(a,ab,Ae,"separatorPadding");var b=this.Mj;null!==a&&null!==b&&b.M(a)||(null!==a&&(a=a.Z()),this.Mj=a,this.Xc("separatorPadding",b,a))}),t.g(Ae,"separatorStroke",Ae.prototype.jn),t.defineProperty(Ae,{jn:"separatorStroke"},function(){return this.ls},function(a){var b=this.ls;b!==a&&(null===a||"string"==typeof a||a instanceof ea)&&(a instanceof ea&&a.freeze(),this.ls=a,this.ja&&this.ja.fa(),this.Xc("separatorStroke",b,a))}),t.g(Ae,"separatorStrokeWidth",Ae.prototype.kn),t.defineProperty(Ae,{kn:"separatorStrokeWidth"},function(){return this.ms},function(a){var b=this.ms;b!==a&&(this.ms=a,this.ja&&this.ja.fa(),this.Xc("separatorStrokeWidth",b,a))}),t.g(Ae,"separatorDashArray",Ae.prototype.kG),t.defineProperty(Ae,{kG:"separatorDashArray"},function(){return this.Kh},function(a){var b=this.Kh;if(b!==a){if(null===a||Array.isArray(a)||t.bc(a,"Array",Ae,"separatorDashArray:val"),null!==a){for(var c=a.length,d=0,e=0;c>e;e++){var f=a[e];"number"==typeof f&&f>=0&&isFinite(f)||t.m("separatorDashArray:val "+f+" must be a positive number or zero."),d+=f}if(0===d){if(null===b)return;a=null}}this.Kh=a,null!==this.ja&&this.ja.fa(),this.Xc("separatorDashArray",b,a)}}),t.g(Ae,"background",Ae.prototype.background),t.defineProperty(Ae,{background:"background"},function(){return this.Mb},function(a){var b=this.Mb;b!==a&&(null===a||"string"==typeof a||a instanceof ea)&&(a instanceof ea&&a.freeze(),this.Mb=a,this.ja&&this.ja.fa(),this.Xc("background",b,a))}),t.g(Ae,"coversSeparators",Ae.prototype.tw),t.defineProperty(Ae,{tw:"coversSeparators"},function(){return this.zq},function(a){var b=this.zq;b!==a&&(t.i(a,"boolean",Ae,"coversSeparators"),this.zq=a,this.Xc("coversSeparators",b,a))}),t.g(Ae,"sizing",Ae.prototype.St),t.defineProperty(Ae,{St:"sizing"},function(){return this.os},function(a){var b=this.os;b!==a&&(e&&t.Aa(a,Ae,Ae,"sizing"),this.os=a,this.Xc("sizing",b,a))}),t.A(Ae,{fc:"actual"},function(){return this.Lb}),t.A(Ae,{total:"total"},function(){return this.Lb+Nl(this)}),t.A(Ae,{position:"position"},function(){return this.Ra}),Ae.prototype.bind=Ae.prototype.bind=function(a){a.pg=this;var b=this.ja;null!==b&&(b=b.ep(),null!==b&&Wk(b)&&t.m("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a)),null===this.Kc&&(this.Kc=new B(De)),this.Kc.add(a)},t.ga("Shape",V),t.Ka(V,Q),V.prototype.cloneProtected=function(a){Q.prototype.cloneProtected.call(this,a),a.Ta=this.Ta,a.Pn=this.Pn,a.ah=this.ah,a.Qq=this.Qq,a.yk=this.yk,a.Uc=this.Uc,a.Gb=this.Gb,a.bh=this.bh,a.Co=this.Co,a.Do=this.Do,a.ym=this.ym,a.xm=null,this.xm&&(a.xm=this.xm.slice(0)),a.ld=this.ld,a.Mi=this.Mi.Z(),a.Ni=this.Ni.Z(),a.Jr=this.Jr,a.Kr=this.Kr,a.Vq=this.Vq,a.ar=this.ar,a.Mr=this.Mr,a.Fo=this.Fo,a.Sn=this.Sn,a.Uq=this.Uq},V.prototype.toString=function(){return"Shape("+("None"!==this.Ab?this.Ab:"None"!==this.on?this.on:this.Hw)+")#"+t.od(this)},V.prototype.fl=function(a,b){if(null!==this.Gb||null!==this.Uc){null!==this.Uc&&Dk(this,a,this.Uc,!0),null!==this.Gb&&Dk(this,a,this.Gb,!1);var c=this.bh;if(0===c){var d=this.S;d instanceof Je&&d.type===wg&&d.pc instanceof V&&(c=d.pc.fb)}a.lineWidth=c,a.lineJoin=this.Do,a.lineCap=this.Co,a.miterLimit=this.ym;var e=!1;this.S&&b.Sk.drawShadows&&(e=this.S.gj);var f=!0;null!==this.Gb&&null===this.Uc&&(f=!1);var d=!1,g=this.zx;if(null!==g){var h=d=!0;void 0!==a.setLineDash?(a.setLineDash(g),a.lineDashOffset=this.ld):void 0!==a.webkitLineDash?(a.webkitLineDash=g,a.webkitLineDashOffset=this.ld):void 0!==a.mozDash?(a.mozDash=g,a.mozDashOffset=this.ld):h=!1}var i=this.Ta;if(null!==i){if(i.da===Dc)a.beginPath(),d&&!h?lk(a,i.oc,i.yc,i.jb,i.tb,g,this.ld):(a.moveTo(i.oc,i.yc),a.lineTo(i.jb,i.tb)),null!==this.Uc&&Ek(a,this.Uc,!0),0!==c&&null!==this.Gb&&Ek(a,this.Gb,!1);else if(i.da===Ec){var j=i.oc,k=i.yc,l=i.jb,i=i.tb,m=Math.min(j,l),n=Math.min(k,i),j=Math.abs(l-j),k=Math.abs(i-k);
if(null!==this.Uc&&(this.Uc instanceof ea&&this.Uc.type===Zd?(a.beginPath(),a.rect(m,n,j,k),Ek(a,this.Uc,!0)):a.fillRect(m,n,j,k)),null!==this.Gb){if(f&&e){var o=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0}d&&!h?(h=[[m,n],[m+j,n],[m+j,n+k],[m,n+k],[m,n]],a.beginPath(),em(a,h,g,this.ld),Ek(a,this.Gb,!1)):0!==c&&(this.Gb instanceof ea&&this.Gb.type===Zd?(a.beginPath(),a.rect(m,n,j,k),Ek(a,this.Gb,!1)):a.strokeRect(m,n,j,k)),f&&e&&(a.shadowOffsetX=o[0],a.shadowOffsetY=o[1],a.shadowBlur=o[2])}}else if(i.da===Mc)j=i.oc,k=i.yc,l=i.jb,i=i.tb,m=Math.abs(l-j)/2,n=Math.abs(i-k)/2,j=Math.min(j,l)+m,k=Math.min(k,i)+n,a.beginPath(),a.moveTo(j,k-n),a.bezierCurveTo(j+F.va*m,k-n,j+m,k-F.va*n,j+m,k),a.bezierCurveTo(j+m,k+F.va*n,j+F.va*m,k+n,j,k+n),a.bezierCurveTo(j-F.va*m,k+n,j-m,k+F.va*n,j-m,k),a.bezierCurveTo(j-m,k-F.va*n,j-F.va*m,k-n,j,k-n),a.closePath(),null!==this.Uc&&Ek(a,this.Uc,!0),d&&!h&&(h=t.Db(),F.ze(j,k-n,j+F.va*m,k-n,j+m,k-F.va*n,j+m,k,.5,h),F.ze(j+m,k,j+m,k+F.va*n,j+F.va*m,k+n,j,k+n,.5,h),F.ze(j,k+n,j-F.va*m,k+n,j-m,k+F.va*n,j-m,k,.5,h),F.ze(j-m,k,j-m,k-F.va*n,j-F.va*m,k-n,j,k-n,.5,h),a.beginPath(),em(a,h,g,this.ld),t.ya(h)),0!==c&&null!==this.Gb&&(f&&e&&(o=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Ek(a,this.Gb,!1),f&&e&&(a.shadowOffsetX=o[0],a.shadowOffsetY=o[1],a.shadowBlur=o[2]));else if(i.da===Ac){for(var m=i.Ck,n=m.length,p=0;n>p;p++){var q=m.n[p];a.beginPath(),a.moveTo(q.qa,q.ra);for(var r=q.Ea.n,s=r.length,u=null,v=0;s>v;v++){var w=r[v];switch(w.da){case bd:a.moveTo(w.D,w.F);break;case Oc:a.lineTo(w.D,w.F);break;case cd:a.bezierCurveTo(w.jd,w.ye,w.ng,w.og,w.jb,w.tb);break;case dd:a.quadraticCurveTo(w.jd,w.ye,w.jb,w.tb);break;case ed:if(w.radiusX===w.radiusY)u=Math.PI/180,a.arc(w.jd,w.ye,w.radiusX,w.mh*u,(w.mh+w.gi)*u,0>w.gi);else for(var u=gd(w,q),x=u.length,y=0;x>y;y++){var z=u[y];0===y&&a.lineTo(z.x1,z.y1),a.bezierCurveTo(z.x2,z.y2,z.ge,z.he,z.Vb,z.Wb)}break;case fd:for(u&&u.type===ed?(u=gd(u,q),u=u[u.length-1]||null,null!==u&&(j=u.Vb,l=u.Wb)):(j=u?u.D:q.qa,l=u?u.F:q.ra),u=hd(w,q,j,l),x=u.length,y=0;x>y;y++)z=u[y],a.bezierCurveTo(z.x2,z.y2,z.ge,z.he,z.Vb,z.Wb);break;default:t.m("Segment not of valid type")}w.Gh&&a.closePath(),u=w}e?q.bo?(!0===q.Wl&&null!==this.Uc?(Ek(a,this.Uc,!0),f=!0):f=!1,0!==c&&null!==this.Gb&&(f&&(o=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),d&&!h||Ek(a,this.Gb,!1),f&&(a.shadowOffsetX=o[0],a.shadowOffsetY=o[1],a.shadowBlur=o[2]))):(f&&(o=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),!0===q.Wl&&null!==this.Uc&&Ek(a,this.Uc,!0),0!==c&&null!==this.Gb&&(d&&!h||Ek(a,this.Gb,!1)),f&&(a.shadowOffsetX=o[0],a.shadowOffsetY=o[1],a.shadowBlur=o[2])):(!0===q.Wl&&null!==this.Uc&&Ek(a,this.Uc,!0),0===c||null===this.Gb||d&&!h||Ek(a,this.Gb,!1))}if(d&&!h)for(c=f,o=i.Ck,f=o.length,h=0;f>h;h++){for(i=o.n[h],a.beginPath(),j=t.Db(),j.push([i.qa,i.ra]),l=i.qa,m=i.ra,n=l,p=m,q=i.Ea.n,r=q.length,s=0;r>s;s++){switch(v=q[s],v.da){case bd:em(a,j,g,this.ld),j.length=0,j.push([v.D,v.F]),l=v.D,m=v.F,n=l,p=m;break;case Oc:j.push([v.D,v.F]),l=v.D,m=v.F;break;case cd:F.ze(l,m,v.jd,v.ye,v.ng,v.og,v.jb,v.tb,.5,j),l=v.D,m=v.F;break;case dd:F.Jp(l,m,v.jd,v.ye,v.jb,v.tb,.5,j),l=v.D,m=v.F;break;case ed:for(w=gd(v,i),u=w.length,x=0;u>x;x++)y=w[x],F.ze(l,m,y.x2,y.y2,y.ge,y.he,y.Vb,y.Wb,.5,j),l=y.Vb,m=y.Wb;break;case fd:for(w=hd(v,i,l,m),u=w.length,x=0;u>x;x++)y=w[x],F.ze(l,m,y.x2,y.y2,y.ge,y.he,y.Vb,y.Wb,.5,j),l=y.Vb,m=y.Wb;break;default:t.m("Segment not of valid type")}v.Gh&&(j.push([n,p]),em(a,j,g,this.ld))}em(a,j,g,this.ld),t.ya(j),null!==this.Gb&&(c&&e&&(k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur],a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0),Ek(a,this.Gb,!1),c&&e&&(a.shadowOffsetX=k[0],a.shadowOffsetY=k[1],a.shadowBlur=k[2]))}}if(d&&(void 0!==a.setLineDash?(a.setLineDash(t.ji),a.lineDashOffset=0):void 0!==a.webkitLineDash?(a.webkitLineDash=t.ji,a.webkitLineDashOffset=0):void 0!==a.mozDash&&(a.mozDash=null,a.mozDashOffset=0)),this.KA){for(d=this.KA,ih(d,1/0,1/0),g=d.Ga,d.Lc(0,0,g.width,g.height),a.save(),g=this.nd.Bb.$a(),a.beginPath(),k=t.Db(),k.push([g.qa,g.ra]),c=g.qa,e=g.ra,o=c,f=e,h=g.Ea.n,i=h.length,j=0;i>j;j++){switch(l=h[j],l.da){case bd:dm(a,b,k,d),k.length=0,k.push([l.D,l.F]),c=l.D,e=l.F,o=c,f=e;break;case Oc:k.push([l.D,l.F]),c=l.D,e=l.F;break;case cd:F.ze(c,e,l.jd,l.ye,l.ng,l.og,l.jb,l.tb,.5,k),c=l.D,e=l.F;break;case dd:F.Jp(c,e,l.jd,l.ye,l.jb,l.tb,.5,k),c=l.D,e=l.F;break;case ed:for(m=gd(l,g),n=m.length,p=0;n>p;p++)q=m[p],F.ze(c,e,q.x2,q.y2,q.ge,q.he,q.Vb,q.Wb,.5,k),c=q.Vb,e=q.Wb;break;case fd:for(m=hd(l,g,c,e),n=m.length,p=0;n>p;p++)q=m[p],F.ze(c,e,q.x2,q.y2,q.ge,q.he,q.Vb,q.Wb,.5,k),c=q.Vb,e=q.Wb;break;default:t.m("Segment not of valid type")}l.Gh&&(k.push([o,f]),dm(a,b,k,d))}dm(a,b,k,d),t.ya(k),a.restore()}}}},V.prototype.getDocumentPoint=V.prototype.pb=function(a,b){void 0===b&&(b=new w),a.Ge()&&t.m("getDocumentPoint:s Spot must be real: "+a.toString());var c=this.Pa,d=this.fb;return b.p(a.x*(c.width+d)-d/2+c.x+a.offsetX,a.y*(c.height+d)-d/2+c.y+a.offsetY),this.me.Sa(b),b},V.prototype.Uj=function(a,b){var c=this.Ta;if(null===c||null===this.fill&&null===this.stroke)return!1;var d=c.Pb,e=this.fb/2;c.type!==Dc||b||(e+=2);var f=t.Gf();if(f.assign(d),f.Sf(e+2,e+2),!f.Fa(a))return t.hc(f),!1;if(d=e+1e-4,c.type===Dc)return null===this.stroke?!1:(d=(c.D-c.qa)*(a.x-c.qa)+(c.F-c.ra)*(a.y-c.ra),0>(c.qa-c.D)*(a.x-c.D)+(c.ra-c.F)*(a.y-c.F)||0>d?!1:(t.hc(f),F.Md(c.qa,c.ra,c.D,c.F,e,a.x,a.y)));if(c.type===Ec){var g=c.qa,h=c.ra,i=c.D,j=c.F,c=Math.min(g,i),k=Math.min(h,j),g=Math.abs(i-g),h=Math.abs(j-h);if(f.x=c,f.y=k,f.width=g,f.height=h,null===this.fill){if(f.Sf(-d,-d),f.Fa(a))return t.hc(f),!1;f.Sf(d,d)}return null!==this.stroke&&f.Sf(e,e),e=f.Fa(a),t.hc(f),e}if(c.type===Mc){if(g=c.qa,h=c.ra,i=c.D,j=c.F,c=Math.min(g,i),k=Math.min(h,j),g=Math.abs(i-g),h=Math.abs(j-h),g/=2,h/=2,c=a.x-(c+g),k=a.y-(k+h),null===this.fill){if(g-=d,h-=d,0>=g||0>=h||1>=c*c/(g*g)+k*k/(h*h))return t.hc(f),!1;g+=d,h+=d}return null!==this.stroke&&(g+=e,h+=e),t.hc(f),0>=g||0>=h?!1:1>=c*c/(g*g)+k*k/(h*h)}return c.type===Ac?(t.hc(f),null===this.fill?kd(c,a.x,a.y,e):c.Fa(a,e,1<this.fb,b)):(t.m("Unknown Geometry type"),!1)},V.prototype.ut=function(a,b,c,d){var e=this.Ca,f=this.bh;a=Math.max(a,0),b=Math.max(b,0);var g;if(this.ah)g=this.Ta.Pb;else{var h=this.Ab,i=F.MA[h];if(void 0===i){var j=F.bj[h];"string"==typeof j&&(j=F.bj[j]),"function"==typeof j?(i=j(null,100,100),F.MA[h]=i):t.m("Unsupported Figure:"+h)}g=i.Pb}var h=g.width,i=g.height,j=g.width,k=g.height;switch(qk(this)){case Vg:d=c=0;break;case Cc:j=Math.max(a-f,0),k=Math.max(b-f,0);break;case ik:j=Math.max(a-f,0),d=0;break;case hk:c=0,k=Math.max(b-f,0)}switch(isFinite(e.width)&&(j=e.width),isFinite(e.height)&&(k=e.height),e=this.He,g=this.Vf,c=Math.max(c,g.width)-f,d=Math.max(d,g.height)-f,j=Math.min(e.width,j),k=Math.min(e.height,k),j=isFinite(j)?Math.max(c,j):Math.max(h,c),k=isFinite(k)?Math.max(d,k):Math.max(i,d),c=Wg(this)){case Vg:break;case Cc:h=j,i=k;break;case Xg:c=Math.min(j/h,k/i),isFinite(c)||(c=1),h*=c,i*=c;break;default:t.m(c+" is not a valid geometryStretch.")}if(this.ah){if(g=this.nd,d=h,e=i,c=g.copy(),g=g.Pb,d/=g.width,e/=g.height,isFinite(d)||(d=1),isFinite(e)||(e=1),1!==d||1!==e)switch(c.type){case Dc:case Ec:case Mc:c.qa*=d,c.ra*=e,c.D*=d,c.F*=e;break;case Ac:g=c.Bb;for(var l=g.length,m=0;l>m;m++){var n=g.n[m];n.qa*=d,n.ra*=e;for(var n=n.Ea,o=n.length,p=0;o>p;p++){var q=n.n[p];switch(q.type){case Oc:case bd:q.D*=d,q.F*=e;break;case cd:q.Cb*=d,q.Sb*=e,q.re*=d,q.se*=e,q.D*=d,q.F*=e;break;case dd:q.Cb*=d,q.Sb*=e,q.D*=d,q.F*=e;break;case ed:q.Da*=d,q.Oa*=e,q.radiusX*=d,void 0!==q.radiusY&&(q.radiusY*=e);break;case fd:q.D*=d,q.F*=e,q.radiusX*=d,q.radiusY*=e;break;default:t.m("Unknown Segment type: "+q.type)}}}}this.Ta=c}else(null===this.Ta||this.Ta.$n!==a-f||this.Ta.Zn!==b-f)&&(this.Ta=F.makeGeometry(this,h,i));g=this.Ta.Pb,1/0===a||1/0===b?nk(this,g.x-f/2,g.y-f/2,0===a&&0===h?0:g.width+f,0===b&&0===i?0:g.height+f):nk(this,-(f/2),-(f/2),j+f,k+f)},V.prototype.Tj=function(a,b,c,d){uk(this,a,b,c,d)},V.prototype.getNearestIntersectionPoint=V.prototype.ll=function(a,b,c){return this.kp(a.x,a.y,b.x,b.y,c)},V.prototype.kp=function(a,b,c,d,e){var f=this.transform,g=1/(f.m11*f.m22-f.m12*f.m21),h=f.m22*g,i=-f.m12*g,j=-f.m21*g,k=f.m11*g,l=g*(f.m21*f.dy-f.m22*f.dx),m=g*(f.m12*f.dx-f.m11*f.dy),f=a*h+b*j+l,g=a*i+b*k+m,h=c*h+d*j+l,i=c*i+d*k+m,j=this.fb/2,l=this.Ta;if(null===l&&(ih(this,1/0,1/0),l=this.Ta),m=l.Pb,k=!1,l.type===Dc)if(1.5>=this.fb)k=F.ih(l.oc,l.yc,l.jb,l.tb,f,g,h,i,e);else{var n,o;if(l.oc===l.jb?(n=j,o=0):(b=(l.tb-l.yc)/(l.jb-l.oc),o=j/Math.sqrt(1+b*b),n=o*b),d=t.Db(),b=new w,F.ih(l.oc+n,l.yc+o,l.jb+n,l.tb+o,f,g,h,i,b)&&d.push(b),b=new w,F.ih(l.oc-n,l.yc-o,l.jb-n,l.tb-o,f,g,h,i,b)&&d.push(b),b=new w,F.ih(l.oc+n,l.yc+o,l.oc-n,l.yc-o,f,g,h,i,b)&&d.push(b),b=new w,F.ih(l.jb+n,l.tb+o,l.jb-n,l.tb-o,f,g,h,i,b)&&d.push(b),b=d.length,0===b)return t.ya(d),!1;for(k=!0,o=1/0,n=0;b>n;n++){var h=d[n],p=(h.x-f)*(h.x-f)+(h.y-g)*(h.y-g);o>p&&(o=p,e.x=h.x,e.y=h.y)}t.ya(d)}else if(l.type===Ec)b=m.x-j,k=F.ll(b,m.y-j,m.x+m.width+j,m.y+m.height+j,f,g,h,i,e);else if(l.type===Mc)a:if(b=m.copy().Sf(j,j),0===b.width)k=F.ih(b.x,b.y,b.x,b.y+b.height,f,g,h,i,e);else if(0===b.height)k=F.ih(b.x,b.y,b.x+b.width,b.y,f,g,h,i,e);else{a=b.width/2;var q=b.height/2;if(d=b.x+a,b=b.y+q,c=9999,f!==h&&(c=(g-i)/(f-h)),9999>Math.abs(c)){if(k=g-b-c*(f-d),0>a*a*c*c+q*q-k*k){e.x=NaN,e.y=NaN,k=!1;break a}j=Math.sqrt(a*a*c*c+q*q-k*k),h=(-(a*a*c*k)+a*q*j)/(q*q+a*a*c*c)+d,a=(-(a*a*c*k)-a*q*j)/(q*q+a*a*c*c)+d,i=c*(h-d)+k+b,b=c*(a-d)+k+b,d=Math.abs((f-h)*(f-h))+Math.abs((g-i)*(g-i)),g=Math.abs((f-a)*(f-a))+Math.abs((g-b)*(g-b)),g>d?(e.x=h,e.y=i):(e.x=a,e.y=b)}else{if(h=q*q,i=f-d,h-=h/(a*a)*i*i,0>h){e.x=NaN,e.y=NaN,k=!1;break a}j=Math.sqrt(h),i=b+j,b-=j,d=Math.abs(i-g),g=Math.abs(b-g),g>d?(e.x=f,e.y=i):(e.x=f,e.y=b)}k=!0}else if(l.type===Ac){var r,s,u,m=t.K();for(n=h-f,o=i-g,o=n*n+o*o,e.x=h,e.y=i,n=0;n<l.Bb.count;n++){var v=l.Bb.n[n],x=v.Ea;r=v.qa,s=v.ra;for(var y,z,A=r,B=s,C=0;C<x.count;C++){y=x.n[C],z=y.type,p=y.D,u=y.F;var D=!1;switch(z){case bd:A=p,B=u;break;case Oc:D=fm(r,s,p,u,f,g,h,i,m);break;case cd:D=y.Cb,z=y.Sb;var E=y.re,G=y.se,D=F.Ps(r,s,D,z,E,G,p,u,f,g,h,i,.5,m);break;case dd:D=(r+2*y.Cb)/3,z=(s+2*y.Sb)/3,E=(2*y.Cb+p)/3,G=(2*y.Cb+p)/3,D=F.Ps(r,s,D,z,E,G,p,u,f,g,h,i,.5,m);break;case ed:case fd:for(u=y.type===ed?gd(y,v):hd(y,v,r,s),z=u.length,E=0;z>E;E++)q=u[E],0===E&&fm(r,s,q.x1,q.y1,f,g,h,i,m)&&(p=gm(f,g,m,o,e),o>p&&(o=p,k=!0)),F.Ps(q.x1,q.y1,q.x2,q.y2,q.ge,q.he,q.Vb,q.Wb,f,g,h,i,.5,m)&&(p=gm(f,g,m,o,e),o>p&&(o=p,k=!0));p=q.Vb,u=q.Wb;break;default:t.m("Unknown Segment type: "+y.type)}r=p,s=u,D&&(p=gm(f,g,m,o,e),o>p&&(o=p,k=!0)),y.ot&&(p=A,u=B,fm(r,s,p,u,f,g,h,i,m)&&(p=gm(f,g,m,o,e),o>p&&(o=p,k=!0)))}}f=c-a,g=d-b,b=Math.sqrt(f*f+g*g),0!==b&&(f/=b,g/=b),e.x-=f*j,e.y-=g*j,t.B(m)}else t.m("Invalid Geometry type");return k?(this.transform.Sa(e),!0):!1},V.prototype.containedInRect=V.prototype.Km=function(a,b){if(void 0===b)return a.Vj(this.oa);var c=this.Ta;null===c&&(ih(this,1/0,1/0),c=this.Ta);var c=c.Pb,d=this.fb/2,e=!1,f=t.K();return f.p(c.x-d,c.y-d),a.Fa(b.Sa(f))&&(f.p(c.x-d,c.bottom+d),a.Fa(b.Sa(f))&&(f.p(c.right+d,c.bottom+d),a.Fa(b.Sa(f))&&(f.p(c.right+d,c.y-d),a.Fa(b.Sa(f))&&(e=!0)))),t.B(f),e},V.prototype.intersectsRect=V.prototype.Tf=function(a,b){if(this.Km(a,b)||void 0===b&&(b=this.transform,a.Vj(this.oa)))return!0;var c=t.oh();c.set(b),c.nA();var d=a.left,e=a.right,f=a.top,g=a.bottom,h=t.K();if(h.p(d,f),c.Sa(h),this.Uj(h,!0))return t.B(h),!0;if(h.p(e,f),c.Sa(h),this.Uj(h,!0))return t.B(h),!0;if(h.p(d,g),c.Sa(h),this.Uj(h,!0))return t.B(h),!0;if(h.p(e,g),c.Sa(h),this.Uj(h,!0))return t.B(h),!0;var i=t.K(),j=t.K();c.set(b),c.DF(this.transform),c.nA(),i.x=e,i.y=f,i.transform(c),h.x=d,h.y=f,h.transform(c);var k=!1;return hm(this,h,i,j)?k=!0:(h.x=e,h.y=g,h.transform(c),hm(this,h,i,j)?k=!0:(i.x=d,i.y=g,i.transform(c),hm(this,h,i,j)?k=!0:(h.x=d,h.y=f,h.transform(c),hm(this,h,i,j)&&(k=!0)))),t.B(h),t.We(c),t.B(i),t.B(j),k},V.prototype.AE=function(a,b,c){function d(a,b){for(var c=a.length,d=0;c>d;d++){var f=a[d];if(b.Zs(f[0],f[1])>e)return!0}return!1}if(c&&null!==this.fill&&this.Uj(a,!0))return!0;var e=a.Zj(b);b=e,1.5<this.fb&&(e=this.fb/2+Math.sqrt(e),e*=e);var f=this.Ta;if(null===f&&(ih(this,1/0,1/0),f=this.Ta),!c){var g=f.Pb,h=g.x,i=g.y,j=g.x+g.width,g=g.y+g.height;if(Sa(a.x,a.y,h,i)<=e&&Sa(a.x,a.y,j,i)<=e&&Sa(a.x,a.y,h,g)<=e&&Sa(a.x,a.y,j,g)<=e)return!0}if(h=f.oc,i=f.yc,j=f.jb,g=f.tb,f.type===Dc){if(c=Ra(a.x,a.y,h,i,j,g),f=(h-j)*(a.x-j)+(i-g)*(a.y-g),c<=(0<=(j-h)*(a.x-h)+(g-i)*(a.y-i)&&f>=0?e:b))return!0}else{if(f.type===Ec)return b=!1,c&&(b=Ra(a.x,a.y,h,i,h,g)<=e||Ra(a.x,a.y,h,i,j,i)<=e||Ra(a.x,a.y,j,i,j,g)<=e||Ra(a.x,a.y,h,g,j,g)<=e),b;if(f.type===Mc){b=a.x-(h+j)/2;var f=a.y-(i+g)/2,k=Math.abs(j-h)/2,l=Math.abs(g-i)/2;if(0===k||0===l)return c=Ra(a.x,a.y,h,i,j,g),e>=c?!0:!1;if(!c)return Sa(b,f,-k,0)>=e||Sa(b,f,0,-l)>=e||Sa(b,f,0,l)>=e||Sa(b,f,k,0)>=e?!1:!0;if(a=F.yI(k,l,b,f),e>=a*a)return!0}else if(f.type===Ac){if(g=f.Pb,h=g.x,i=g.y,j=g.x+g.width,g=g.y+g.height,a.x>j&&a.x<h&&a.y>g&&a.y<i&&Ra(a.x,a.y,h,i,h,g)>e&&Ra(a.x,a.y,h,i,j,i)>e&&Ra(a.x,a.y,j,g,h,g)>e&&Ra(a.x,a.y,j,g,j,i)>e)return!1;if(b=Math.sqrt(e),!c){for(c=f.Bb,b=0;b<c.count;b++){if(h=c.n[b],k=h.qa,l=h.ra,a.Zs(k,l)>e)return!1;for(i=h.Ea.n,j=i.length,g=0;j>g;g++){var m=i[g];switch(m.type){case bd:case Oc:if(k=m.D,l=m.F,a.Zs(k,l)>e)return!1;break;case cd:if(f=t.Db(),F.ze(k,l,m.Cb,m.Sb,m.re,m.se,m.D,m.F,.8,f),k=d(f,a),t.ya(f),k)return!1;if(k=m.D,l=m.F,a.Zs(k,l)>e)return!1;break;case dd:if(f=t.Db(),F.Jp(k,l,m.Cb,m.Sb,m.D,m.F,.8,f),k=d(f,a),t.ya(f),k)return!1;if(k=m.D,l=m.F,a.Zs(k,l)>e)return!1;break;case ed:case fd:var m=m.type===ed?gd(m,h):hd(m,h,k,l),n=m.length,o=null,f=t.Db();for(b=0;n>b;b++)if(o=m[b],f.length=0,F.ze(o.x1,o.y1,o.x2,o.y2,o.ge,o.he,o.Vb,o.Wb,.8,f),d(f,a))return t.ya(f),!1;t.ya(f),null!==o&&(k=o.Vb,l=o.Wb);break;default:t.m("Unknown Segment type: "+m.type)}}}return!0}if(null===this.fill?kd(f,a.x,a.y,b):f.Fa(a,b,!0))return!0}}return!1},t.g(V,"geometry",V.prototype.nd),t.defineProperty(V,{nd:"geometry"},function(){return this.yk?this.yk:this.Ta},function(a){var b=this.Ta;if(b!==a){null!==a?(e&&t.l(a,zc,V,"geometry"),this.yk=this.Ta=a.freeze()):this.yk=this.Ta=null;var c=this.S;c&&(c.Cj=NaN),this.ah=!0,this.ha(),this.j("geometry",b,a)}}),t.g(V,"geometryString",V.prototype.IE),t.defineProperty(V,{IE:"geometryString"},function(){return this.nd.toString()},function(a){var b=Rc(a);a=b.normalize(),this.nd=b;var b=t.K(),c=this.position;c.N()?b.p(c.x-a.x,c.y-a.y):b.p(-a.x,-a.y),this.position=b,t.B(b)}),t.defineProperty(V,{rA:"isGeometryPositioned"},function(){return this.Vq},function(a){e&&t.i(a,"boolean",V,"isGeometryPositioned");var b=this.Vq;b!==a&&(this.Vq=a,this.ha(),this.j("isGeometryPositioned",b,a))}),V.prototype.Ye=function(){this.ah?this.yk=null:this.Ta=null,this.ha()},t.g(V,"fill",V.prototype.fill),t.defineProperty(V,{fill:"fill"},function(){return this.Uc},function(a){var b=this.Uc;b!==a&&(e&&null!==a&&t.To(a,"Shape.fill"),a instanceof ea&&a.freeze(),this.Uc=a,this.fa(),this.j("fill",b,a))}),t.g(V,"stroke",V.prototype.stroke),t.defineProperty(V,{stroke:"stroke"},function(){return this.Gb},function(a){var b=this.Gb;b!==a&&(e&&null!==a&&t.To(a,"Shape.stroke"),a instanceof ea&&a.freeze(),this.Gb=a,this.fa(),this.j("stroke",b,a))}),t.g(V,"strokeWidth",V.prototype.fb),t.defineProperty(V,{fb:"strokeWidth"},function(){return this.bh},function(a){var b=this.bh;if(b!==a)if(e&&t.q(a,V,"strokeWidth"),a>=0){this.bh=a,this.ha();var c=this.S;c&&(c.Cj=NaN),this.j("strokeWidth",b,a)}else t.ka(a,"val >= 0",V,"strokeWidth:val")}),t.g(V,"strokeCap",V.prototype.wG),t.defineProperty(V,{wG:"strokeCap"},function(){return this.Co},function(a){var b=this.Co;b!==a&&("string"!=typeof a||"butt"!==a&&"round"!==a&&"square"!==a?t.ka(a,'"butt", "round", or "square"',V,"strokeCap"):(this.Co=a,this.fa(),this.j("strokeCap",b,a)))}),t.g(V,"strokeJoin",V.prototype.WJ),t.defineProperty(V,{WJ:"strokeJoin"},function(){return this.Do},function(a){var b=this.Do;b!==a&&("string"!=typeof a||"miter"!==a&&"bevel"!==a&&"round"!==a?t.ka(a,'"miter", "bevel", or "round"',V,"strokeJoin"):(this.Do=a,this.fa(),this.j("strokeJoin",b,a)))}),t.g(V,"strokeMiterLimit",V.prototype.XJ),t.defineProperty(V,{XJ:"strokeMiterLimit"},function(){return this.ym},function(a){var b=this.ym;if(b!==a)if(e&&t.q(a,V,"strokeMiterLimit"),a>0){this.ym=a,this.fa();var c=this.S;c&&(c.Cj=NaN),this.j("strokeMiterLimit",b,a)}else t.ka(a,"val > 0",V,"strokeWidth:val")}),t.g(V,"strokeDashArray",V.prototype.zx),t.defineProperty(V,{zx:"strokeDashArray"},function(){return this.xm},function(a){var b=this.xm;if(b!==a){if(null===a||Array.isArray(a)||t.bc(a,"Array",V,"strokeDashArray:val"),null!==a){for(var c=a.length,d=0,e=0;c>e;e++){var f=a[e];"number"==typeof f&&f>=0&&isFinite(f)||t.m("strokeDashArray:val "+f+" must be a positive number or zero."),d+=f}if(0===d){if(null===b)return;a=null}}this.xm=a,this.fa(),this.j("strokeDashArray",b,a)}}),t.g(V,"strokeDashOffset",V.prototype.xG),t.defineProperty(V,{xG:"strokeDashOffset"},function(){return this.ld},function(a){var b=this.ld;b!==a&&(e&&t.q(a,V,"strokeDashOffset"),a>=0&&(this.ld=a,this.fa(),this.j("strokeDashOffset",b,a)))}),t.g(V,"figure",V.prototype.Ab),t.defineProperty(V,{Ab:"figure"},function(){return this.Pn},function(a){var b=this.Pn;if(b!==a){e&&t.i(a,"string",V,"figure");var c=F.bj[a];"function"==typeof c?c=a:(c=F.bj[a.toLowerCase()])||t.m("Unknown Shape.figure: "+a),b!==c&&((a=this.S)&&(a.Cj=NaN),this.Pn=c,this.ah=!1,this.Ye(),this.j("figure",b,c))}}),t.g(V,"toArrow",V.prototype.on),t.defineProperty(V,{on:"toArrow"},function(){return this.Fo},function(a){var b=this.Fo;if(!0===a?a="Standard":!1===a&&(a=""),b!==a){e&&t.i(a,"string",V,"toArrow");var c=F.RD(a);null===c?t.m("Unknown Shape.toArrow: "+a):b!==c&&(this.Fo=c,this.ah=!1,this.Ye(),im(this),this.j("toArrow",b,c))}}),t.g(V,"fromArrow",V.prototype.Hw),t.defineProperty(V,{Hw:"fromArrow"},function(){return this.Sn},function(a){var b=this.Sn;if(!0===a?a="Standard":!1===a&&(a=""),b!==a){e&&t.i(a,"string",V,"fromArrow");var c=F.RD(a);null===c?t.m("Unknown Shape.fromArrow: "+a):b!==c&&(this.Sn=c,this.ah=!1,this.Ye(),im(this),this.j("fromArrow",b,c))}}),t.defineProperty(V,{G:"spot1"},function(){return this.Mi},function(a){t.l(a,H,V,"spot1");var b=this.Mi;b.M(a)||(this.Mi=a=a.Z(),this.ha(),this.j("spot1",b,a))}),t.defineProperty(V,{H:"spot2"},function(){return this.Ni},function(a){t.l(a,H,V,"spot2");var b=this.Ni;b.M(a)||(this.Ni=a=a.Z(),this.ha(),this.j("spot2",b,a))}),t.defineProperty(V,{Gc:"parameter1"},function(){return this.Jr},function(a){var b=this.Jr;b!==a&&(this.Jr=a,this.ha(),this.j("parameter1",b,a))}),t.defineProperty(V,{Ft:"parameter2"},function(){return this.Kr},function(a){var b=this.Kr;b!==a&&(this.Kr=a,this.ha(),this.j("parameter2",b,a))}),t.A(V,{Pa:"naturalBounds"},function(){if(null!==this.Ta)return this.hd.assign(this.Ta.Pb),this.hd;var a=this.Ca;return new x(0,0,a.width,a.height)}),t.g(V,"isRectangular",V.prototype.ZI),t.defineProperty(V,{ZI:"isRectangular"},function(){return this.ar},function(a){var b=this.ar;b!==a&&(e&&t.i(a,"boolean",V,"isRectangular"),this.ar=a,this.ha(),this.j("isRectangular",b,a))}),t.g(V,"pathObject",V.prototype.KA),t.defineProperty(V,{KA:"pathObject"},function(){return this.Mr},function(a){var b=this.Mr;b!==a&&(e&&t.l(a,Q,V,"pathObject"),this.Mr=a,this.fa(),this.j("pathObject",b,a))}),t.g(V,"geometryStretch",V.prototype.HE),t.defineProperty(V,{HE:"geometryStretch"},function(){return this.Qq},function(a){var b=this.Qq;b!==a&&(t.Aa(a,Q,V,"geometryStretch"),this.Qq=a,this.j("geometryStretch",b,a))}),t.g(V,"interval",V.prototype.interval),t.defineProperty(V,{interval:"interval"},function(){return this.Uq},function(a){var b=this.Uq;e&&t.q(a,V,"interval"),a=Math.floor(a),b!==a&&a>=0&&(this.Uq=a,this.h&&Li(this.h),this.ha(),this.j("interval",b,a))}),V.defineFigureGenerator=function(a,b){t.i(a,"string",V,"defineFigureGenerator:name"),t.i(b,"function",V,"defineFigureGenerator:func");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||t.m("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+a);var d=V.FigureGenerators;d[a]=b,d[c]=a},V.defineArrowheadGeometry=function(a,b){t.i(a,"string",V,"defineArrowheadGeometry:name"),t.i(b,"string",V,"defineArrowheadGeometry:pathstr");var c=a.toLowerCase();""!==a&&"none"!==c&&a!==c||t.m("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+a);var d=V.ArrowheadGeometries;d[a]=b,d[c]=a},t.ga("TextBlock",na),t.Ka(na,Q),na.getEllipsis=function(){return t.$s},na.setEllipsis=function(a){t.$s=a,t.Gw={},t.fA=0},na.prototype.cloneProtected=function(a){Q.prototype.cloneProtected.call(this,a),a.le=this.le,a.Gb=this.Gb,a.Tg=this.Tg,a.Td=this.Td,a.Yq=this.Yq,a.Zl=this.Zl,a.Yl=this.Yl,a.zm=this.zm,a.Qk=this.Qk,a.mf=this.mf,a.dv=this.dv,a.fz=this.fz,a.ez=this.ez,a.Rn=this.Rn,a.no=this.no,a.Kq=this.Kq,a.xs=this.xs,a.Tk=this.Tk,a.kf=this.kf,a.Oj=this.Oj,a.Pj=this.Pj,a.Ai=this.Ai},na.prototype.toString=function(){return 22<this.le.length?'TextBlock("'+this.le.substring(0,20)+'"...)':'TextBlock("'+this.le+'")'};var mm;na.None=mm=t.w(na,"None",0);var nm;na.WrapFit=nm=t.w(na,"WrapFit",1);var lm;na.WrapDesiredSize=lm=t.w(na,"WrapDesiredSize",2);var km;na.OverflowClip=km=t.w(na,"OverflowClip",0);var om;na.OverflowEllipsis=om=t.w(na,"OverflowEllipsis",1),na.prototype.ha=function(){Q.prototype.ha.call(this),this.ez=this.fz=null},t.g(na,"font",na.prototype.font),t.defineProperty(na,{font:"font"},function(){return this.Tg},function(a){var b=this.Tg;b!==a&&(e&&t.i(a,"string",na,"font"),this.Tg=a,this.Rn=null,this.ha(),this.j("font",b,a))}),t.g(na,"text",na.prototype.text),t.defineProperty(na,{text:"text"},function(){return this.le},function(a){var b=this.le;a=null!==a&&void 0!==a?a.toString():"",b!==a&&(this.le=a,this.ha(),this.j("text",b,a))}),t.g(na,"textAlign",na.prototype.textAlign),t.defineProperty(na,{textAlign:"textAlign"},function(){return this.Td},function(a){var b=this.Td;b!==a&&(e&&t.i(a,"string",na,"textAlign"),"start"===a||"end"===a||"left"===a||"right"===a||"center"===a?(this.Td=a,this.fa(),this.j("textAlign",b,a)):t.ka(a,'"start", "end", "left", "right", or "center"',na,"textAlign"))}),t.A(na,{Pa:"naturalBounds"},function(){if(!this.hd.N()){var a=pm(this,this.le,{},999999).width,b=qm(this,a,{}),c=this.Ca;isNaN(c.width)||(a=c.width),isNaN(c.height)||(b=c.height),Va(this.hd,a,b)}return this.hd}),t.g(na,"isMultiline",na.prototype.Tw),t.defineProperty(na,{Tw:"isMultiline"},function(){return this.Yq},function(a){var b=this.Yq;b!==a&&(e&&t.i(a,"boolean",na,"isMultiline"),this.Yq=a,this.ha(),this.j("isMultiline",b,a))}),t.g(na,"isUnderline",na.prototype.bJ),t.defineProperty(na,{bJ:"isUnderline"},function(){return this.Zl},function(a){var b=this.Zl;b!==a&&(e&&t.i(a,"boolean",na,"isUnderline"),this.Zl=a,this.fa(),this.j("isUnderline",b,a))}),t.g(na,"isStrikethrough",na.prototype.$I),t.defineProperty(na,{$I:"isStrikethrough"},function(){return this.Yl},function(a){var b=this.Yl;b!==a&&(e&&t.i(a,"boolean",na,"isStrikethrough"),this.Yl=a,this.fa(),this.j("isStrikethrough",b,a))}),t.g(na,"wrap",na.prototype.pB),t.defineProperty(na,{pB:"wrap"},function(){return this.zm},function(a){var b=this.zm;b!==a&&(e&&t.Aa(a,na,na,"wrap"),this.zm=a,this.ha(),this.j("wrap",b,a))}),t.g(na,"overflow",na.prototype.overflow),t.defineProperty(na,{overflow:"overflow"},function(){return this.Qk},function(a){var b=this.Qk;b!==a&&(e&&t.Aa(a,na,na,"overflow"),this.Qk=a,this.ha(),this.j("overflow",b,a))}),t.g(na,"stroke",na.prototype.stroke),t.defineProperty(na,{stroke:"stroke"},function(){return this.Gb},function(a){var b=this.Gb;b!==a&&(e&&null!==a&&t.To(a,"TextBlock.stroke"),a instanceof ea&&a.freeze(),this.Gb=a,this.fa(),this.j("stroke",b,a))}),t.A(na,{nF:"lineCount"},function(){return this.mf}),t.g(na,"editable",na.prototype.yw),t.defineProperty(na,{yw:"editable"},function(){return this.Kq},function(a){var b=this.Kq;b!==a&&(e&&t.i(a,"boolean",na,"editable"),this.Kq=a,this.j("editable",b,a))}),t.g(na,"textEditor",na.prototype.hB),t.defineProperty(na,{hB:"textEditor"},function(){return this.xs},function(a){var b=this.xs;b!==a&&(a instanceof HTMLElement||t.m("textEditor must be an HTMLElement"),this.xs=a,this.j("textEditor",b,a))}),t.g(na,"errorFunction",na.prototype.at),t.defineProperty(na,{at:"errorFunction"},function(){return this.kf},function(a){var b=this.kf;b!==a&&(null!==a&&t.i(a,"function",na,"errorFunction"),this.kf=a,this.j("errorFunction",b,a))}),na.prototype.fl=function(a,b){if(null!==this.Gb&&0!==this.le.length&&null!==this.Tg){var c=this.Pa.width,d=Ah(this);a.textAlign=this.Td,Dk(this,a,this.Gb,!0),(this.Zl||this.Yl)&&Dk(this,a,this.Gb,!1);var e=this.no,f=0,g=!1,h=t.mc(0,0);this.me.Sa(h);var i=t.mc(0,d);this.me.Sa(i);var j=h.Zj(i);t.B(h),t.B(i),h=b.scale,8>j*h*h&&(g=!0),b.Sg!==a&&(g=!1);for(var j=this.Oj,h=this.Pj,i=e.ug.length,k=0;i>k;k++){var l=e.ug[k],m=e.Of[k];l>c&&(l=c);var f=f+j,n=m,m=a,o=f,p=c,q=d,r=0;g?("start"===this.Td||"left"===this.Td?r=0:"end"===this.Td||"right"===this.Td?r=p-l:"center"===this.Td?r=(p-l)/2:t.m("textAlign must be start, end, left, right, or center"),m.fillRect(0+r,o+.25*q,l,1)):("start"===this.Td||"left"===this.Td?r=0:"end"===this.Td||"right"===this.Td?r=p:"center"===this.Td?r=p/2:t.m("textAlign must be start, end, left, right, or center"),m.fillText(n,0+r,o+q-.25*q),n=q/20|0,this.Zl&&("end"===this.Td||"right"===this.Td?r-=l:"center"===this.Td&&(r-=l/2),m.beginPath(),m.lineWidth=n,m.moveTo(0+r,o+q-.2*q),m.lineTo(0+r+l,o+q-.2*q),m.stroke()),this.Yl&&(m.beginPath(),m.lineWidth=n,o=o+q-q/2.2|0,0!==n%2&&(o+=.5),m.moveTo(0,o),m.lineTo(0+l,o),m.stroke())),f+=d+h}}},na.prototype.ut=function(a,b,c,d){var e={},f=0,g=0;if(isNaN(this.Ca.width)){if(f=this.le,0===f.length)f=0;else if(this.Tw){for(var h=g=0,i=!1,j={ph:0};!i;){var k=rm(f,h,j);-1===k&&(k=f.length,i=!0),h=sm(f.substr(h,k-h).replace(/^\s+|\s+$/g,""),this.Tg),h>g&&(g=h),h=j.ph}f=g}else g=rm(f,0,{}),g>=0&&(f=f.substr(0,g)),f=h=sm(f,this.Tg);f=Math.min(f,a/this.scale),f=Math.max(8,f)}else f=this.Ca.width;if(this.ja&&(f=Math.min(f,this.ja.He.width),f=Math.max(f,this.ja.Vf.width)),g=qm(this,f,e),j=g=isNaN(this.Ca.height)?Math.min(g,b/this.scale):this.Ca.height,0!==e.Ag&&1!==e.Of.length&&this.Qk===om&&(b=this.Tg,i=this.Qk===om?tm(b):0,h=this.Oj+this.Pj,h=Math.max(0,Ah(this)+h),j=Math.max(Math.floor(j/h)-1,0),!(j+1>=e.Of.length))){for(h=e.Of[j],a=Math.max(1,a-i);sm(h,b)>a&&1<h.length;)h=h.substr(0,h.length-1);h+=t.$s,a=sm(h,b),e.Of[j]=h,e.Of=e.Of.slice(0,j+1),e.ug[j]=a,e.ug=e.ug.slice(0,j+1),e.ph=e.Of.length,e.Ag=Math.max(e.Ag,a)}(this.pB===nm||isNaN(this.Ca.width))&&(f=e.Ag,isNaN(this.Ca.width)&&(f=Math.max(8,f))),f=Math.max(c,f),g=Math.max(d,g),Va(this.hd,f,g),nk(this,0,0,f,g),this.no=e},na.prototype.Tj=function(a,b,c,d){uk(this,a,b,c,d)},t.g(na,"textValidation",na.prototype.Xt),t.defineProperty(na,{Xt:"textValidation"},function(){return this.Tk},function(a){var b=this.Tk;b!==a&&(null!==a&&t.i(a,"function",na,"textValidation"),this.Tk=a,this.j("textValidation",b,a))}),t.g(na,"spacingAbove",na.prototype.TJ),t.defineProperty(na,{TJ:"spacingAbove"},function(){return this.Oj},function(a){var b=this.Oj;b!==a&&(this.Oj=a,this.j("spacingAbove",b,a))}),t.g(na,"spacingBelow",na.prototype.UJ),t.defineProperty(na,{UJ:"spacingBelow"},function(){return this.Pj},function(a){var b=this.Pj;b!==a&&(this.Pj=a,this.j("spacingBelow",b,a))}),t.g(na,"maxLines",na.prototype.nJ),t.defineProperty(na,{nJ:"maxLines"},function(){return this.Ai},function(a){var b=this.Ai;b!==a&&(this.Ai=a,this.j("maxLines",b,a))}),t.ga("Picture",al),t.Ka(al,Q);var vm;al.clearCache=vm=function(a){void 0===a&&(a=""),t.i(a,"string",al,"clearCache:url"),""!==a?t.kt[a]&&(delete t.kt[a],t.Lw--):(t.kt={},t.Lw=0)},al.prototype.cloneProtected=function(a){Q.prototype.cloneProtected.call(this,a),a.element=this.dg,a.qs=this.qs,a.Nj.assign(this.Nj),a.Wn=this.Wn,a.kf=this.kf,a.zo=this.zo},al.prototype.toString=function(){return"Picture("+this.source+")#"+t.od(this)},t.g(al,"element",al.prototype.element),t.defineProperty(al,{element:"element"},function(){return this.dg},function(a){var b=this.dg;if(b!==a){a instanceof HTMLImageElement||a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement||t.m("Picture.element must be an instance of Image, Canvas, or Video."),this.Mu=!1;var c=this;a instanceof HTMLCanvasElement?this.Vu=!0:(this.Vu=!1,a.onerror=function(a){c.Mu=!0,null!==c.kf&&c.kf(c,a)}),this.dg=a,!0===a.complete||void 0===a.complete?(this.fm=!0,this.Ca.N()||(rk(this,!1),this.ha())):(t.lB.push(this),null===t.lx&&(t.lx=setInterval(function(){for(var a=[],b=t.lB,c=b.length,d=0;c>d;d++){var e,f=b[d];e=f;var g=e.dg;if(g)if(g.complete){if(e.fm=!0,e.Ca.N()||(rk(e,!1),e.ha()),e.h)e.Ca.N()||e.h.Oc(),e.h.fa();else{e=t.$z;var h=e.length;if(0===h)for(var h=document.getElementsByTagName("canvas"),i=h.length,g=0;i>g;g++){var j=h[g];j.parentElement&&j.parentElement.U&&e.push(j.parentElement.U)}for(h=e.length,g=0;h>g;g++)e[g].fa()}e=!0}else e=!1;else e=!0;e||a.push(f)}0===a.length&&(clearInterval(t.lx),t.lx=null),t.lB=a},200))),this.j("element",b,a),this.fa()}}),t.g(al,"source",al.prototype.source),t.defineProperty(al,{source:"source"},function(){return this.qs},function(a){var b=this.qs;if(b!==a){t.i(a,"string",al,"source"),this.qs=a,this.Mu=!1;var c=t.kt;if(void 0!==c[a])this.element=c[a];else{10<t.Lw&&(vm(),c=t.kt);var d=document.createElement("img");d.src=a;var e=this.zo;null!==e&&(d.crossOrigin=e(this)),c[a]=d,t.Lw++,d instanceof HTMLImageElement&&(this.element=d)}this.fa(),this.j("source",b,a)}}),t.g(al,"sourceCrossOrigin",al.prototype.RJ),t.defineProperty(al,{RJ:"sourceCrossOrigin"},function(){return this.zo},function(a){if(this.zo!==a&&(null!==a&&t.i(a,"function",al,"sourceCrossOrigin"),this.zo=a,null!==this.element)){var b=this.element.src;null===a&&"string"==typeof b?this.element.crossOrigin=null:null!==a&&(this.element.crossOrigin=a(this))}}),t.g(al,"sourceRect",al.prototype.ei),t.defineProperty(al,{ei:"sourceRect"},function(){return this.Nj},function(a){var b=this.Nj;b.M(a)||(t.l(a,x,al,"sourceRect"),this.Nj=a=a.Z(),this.fa(),this.j("sourceRect",b,a))}),t.g(al,"imageStretch",al.prototype.QI),t.defineProperty(al,{QI:"imageStretch"},function(){return this.Wn},function(a){var b=this.Wn;b!==a&&(t.Aa(a,Q,al,"imageStretch"),this.Wn=a,this.fa(),this.j("imageStretch",b,a))}),t.g(al,"errorFunction",al.prototype.at),t.defineProperty(al,{at:"errorFunction"},function(){return this.kf},function(a){var b=this.kf;if(b!==a){if(null!==a&&t.i(a,"function",al,"errorFunction"),this.kf=a,this.dg){var c=this;this.dg.onerror=function(a){null!==c.kf&&c.kf(c,a)}}this.j("errorFunction",b,a)}}),al.prototype.fl=function(a,b){if(!b.Mn){if(null===this.vs)if(null===this.dg)this.vs=!1;else{var c=document.createElement("canvas").getContext("2d");0!==this.dg.width&&0!==this.dg.height&&c.drawImage(this.dg,0,0);try{c.getImageData(0,0,1,1),this.vs=!1}catch(d){this.vs=!0}}if(this.vs)return}if(this.fm&&!this.Mu&&(c=this.dg,null!==c)){var f=c.src;null!==f&&""!==f||t.m("Element has no source attribute: "+c);var f=this.Pa,g=0,h=0,i=this.Vu,j=i?+c.width:c.naturalWidth,i=i?+c.height:c.naturalHeight;if(void 0===j&&c.videoWidth&&(j=c.videoWidth),void 0===i&&c.videoHeight&&(i=c.videoHeight),j=j||f.width,i=i||f.height,0!==j&&0!==i){this.ei.N()&&(g=this.Nj.x,h=this.Nj.y,j=this.Nj.width,i=this.Nj.height);var k=j,l=i,m=this.Wn;switch(m){case Vg:if(this.ei.N())break;g+=Math.max((k-f.width)/2,0),h+=Math.max((l-f.height)/2,0),j=Math.min(f.width,k),i=Math.min(f.height,l);break;case Cc:k=f.width,l=f.height;break;case Xg:case Yg:m===Xg?(m=Math.min(f.height/l,f.width/k),k*=m,l*=m):m===Yg&&(m=Math.max(f.height/l,f.width/k),k*=m,l*=m,g+=(k-f.width)/2,h+=(l-f.height)/2,j*=1/(k/f.width),i*=1/(l/f.height),k=f.width,l=f.height);
}try{a.drawImage(c,g,h,j,i,Math.max((f.width-k)/2,0),Math.max((f.height-l)/2,0),Math.min(f.width,k),Math.min(f.height,l))}catch(n){e&&this.fC&&t.trace(n.toString()),this.fC=!1}}}},t.A(al,{Pa:"naturalBounds"},function(){return this.hd}),al.prototype.ut=function(a,b,c,d){var e=this.Ca,f=qk(this),g=this.dg,h=this.Vu;(h||!this.fm&&g&&g.complete)&&(this.fm=!0),null===g&&(isFinite(a)||(a=0),isFinite(b)||(b=0)),isFinite(e.width)||f===Cc||f===ik?(isFinite(a)||(a=this.ei.N()?this.ei.width:h?+g.width:g.naturalWidth),c=0):null!==g&&!1!==this.fm&&(a=this.ei.N()?this.ei.width:h?+g.width:g.naturalWidth),isFinite(e.height)||f===Cc||f===hk?(isFinite(b)||(b=this.ei.N()?this.ei.height:h?+g.height:g.naturalHeight),d=0):null!==g&&!1!==this.fm&&(b=this.ei.N()?this.ei.height:h?+g.height:g.naturalHeight),isFinite(e.width)&&(a=e.width),isFinite(e.height)&&(b=e.height),e=this.He,f=this.Vf,c=Math.max(c,f.width),d=Math.max(d,f.height),a=Math.min(e.width,a),b=Math.min(e.height,b),a=Math.max(c,a),b=Math.max(d,b),null===g||g.complete||(isFinite(a)||(a=0),isFinite(b)||(b=0)),Va(this.hd,a,b),nk(this,0,0,a,b)},al.prototype.Tj=function(a,b,c,d){uk(this,a,b,c,d)},aa=ha.prototype,aa.reset=function(){this.s=new zc,this.Xb=null},aa.bb=function(a){null===this.s&&t.m("StreamGeometryContext has been closed"),null===this.Xb&&t.m("Need to call beginFigure first"),this.Xb.gj=a},aa.moveTo=function(a,b,c){null===this.s&&t.m("StreamGeometryContext has been closed"),null===this.Xb&&t.m("Need to call beginFigure first");var d=new id(bd);d.D=a,d.F=b,c&&d.close(),this.Xb.Ea.add(d)},aa.lineTo=function(a,b,c){null===this.s&&t.m("StreamGeometryContext has been closed"),null===this.Xb&&t.m("Need to call beginFigure first");var d=new id(Oc);d.D=a,d.F=b,c&&d.close(),this.Xb.Ea.add(d)},aa.arcTo=function(a,b,c,d,e,f,g){null===this.s&&t.m("StreamGeometryContext has been closed"),null===this.Xb&&t.m("Need to call beginFigure first");var h=new id(ed);h.mh=a,h.gi=b,h.Da=c,h.Oa=d,h.radiusX=e,h.radiusY=f?f:e,g&&h.close(),this.Xb.Ea.add(h)},F.makeGeometry=function(a,b,c){var d=a.Ca,e=d.width,d=d.height;return void 0!==b&&!isNaN(b)&&isFinite(b)&&(e=b),void 0!==c&&!isNaN(c)&&isFinite(c)&&(d=c),isFinite(e)||(e=100),isFinite(d)||(d=100),b=void 0,"None"!==a.on?b=F.Dm[a.on]:"None"!==a.Hw?b=F.Dm[a.Hw]:(c=F.bj[a.Ab],"string"==typeof c&&(c=F.bj[c]),void 0===c&&t.m("Unknown Shape.figure: "+a.Ab),b=c(a,e,d),b.$n=e,b.Zn=d),void 0===b&&(c=F.bj.Rectangle)&&(b=c(a,e,d)),b},F.Vi=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=1-i;a=a*o+c*i,b=b*o+d*i,c=c*o+e*i,d=d*o+f*i,e=e*o+g*i,f=f*o+h*i,h=a*o+c*i,g=b*o+d*i,c=c*o+e*i,d=d*o+f*i,j.x=a,j.y=b,k.x=h,k.y=g,l.x=h*o+c*i,l.y=g*o+d*i,m.x=c,m.y=d,n.x=e,n.y=f},F.Xo=function(a){a=F.Mm(a);var b=t.Db();b[0]=a[0];for(var c=1,d=1;c<a.length;c+=2,d+=3)b[d]=a[c],b[d+1]=a[c],b[d+2]=a[c+1];return t.ya(a),b},F.Mm=function(a){var b=F.dl(a),c=t.Db(),d=Math.floor(b.length/2),e=b.length-1;a=0===a%2?2:1;for(var f=0;e>f;f++){var g=b[f],h=b[f+1],i=b[(d+f-1)%e],j=b[(d+f+a)%e];c[2*f]=g,c[2*f+1]=F.jl(g.x,g.y,i.x,i.y,h.x,h.y,j.x,j.y,new w)}return c[c.length]=c[0],t.ya(b),c},F.jl=function(a,b,c,d,e,f,g,h,i){return c=a-c,g=e-g,0===c||0===g?0===c?(g=(f-h)/g,h=a,e=g*h+(f-g*e)):(d=(b-d)/c,h=e,e=d*h+(b-d*a)):(d=(b-d)/c,g=(f-h)/g,a=b-d*a,h=(f-g*e-a)/(d-g),e=d*h+a),i.p(h,e),i},F.dl=function(a){for(var b=t.Db(),c=1.5*Math.PI,d=0,e=0;a>e;e++)d=2*Math.PI/a*e+c,b[e]=new w(.5+.5*Math.cos(d),.5+.5*Math.sin(d));return b.push(b[0]),b},F.sB=new H(.156,.156).Ja(),F.tB=new H(.844,.844).Ja(),F.bj={None:"Rectangle",Rectangle:function(a,b,c){return a=new zc,a.type=Ec,a.qa=0,a.ra=0,a.D=b,a.F=c,a},Square:function(a,b,c){return a=new zc,a.Hc=Xg,a.type=Ec,a.qa=0,a.ra=0,a.D=b,a.F=c,a},Ellipse:function(a,b,c){return a=new zc,a.type=Mc,a.qa=0,a.ra=0,a.D=b,a.F=c,a.G=F.sB,a.H=F.tB,a},Circle:function(a,b,c){return a=new zc,a.Hc=Xg,a.type=Mc,a.qa=0,a.ra=0,a.D=b,a.F=c,a.G=F.sB,a.H=F.tB,a},Connector:"Ellipse",TriangleRight:function(a,b,c){a=new zc;var d=new Bc,e=new id;return e.D=b,e.F=.5*c,d.Ea.add(e),b=new id,b.D=0,b.F=c,d.Ea.add(b.close()),a.Bb.add(d),a.G=new H(0,.25),a.H=new H(.5,.75),a},TriangleDown:function(a,b,c){a=new zc;var d=new Bc,e=new id;return e.D=b,e.F=0,d.Ea.add(e),e=new id,e.D=.5*b,e.F=c,d.Ea.add(e.close()),a.Bb.add(d),a.G=new H(.25,0),a.H=new H(.75,.5),a},TriangleLeft:function(a,b,c){a=new zc;var d=new Bc;d.qa=b,d.ra=c;var e=new id;return e.D=0,e.F=.5*c,d.Ea.add(e),c=new id,c.D=b,c.F=0,d.Ea.add(c.close()),a.Bb.add(d),a.G=new H(.5,.25),a.H=new H(1,.75),a},TriangleUp:function(a,b,c){a=new zc;var d=new Bc;d.qa=b,d.ra=c;var e=new id;return e.D=0,e.F=c,d.Ea.add(e),c=new id,c.D=.5*b,c.F=0,d.Ea.add(c.close()),a.Bb.add(d),a.G=new H(.25,.5),a.H=new H(.75,1),a},Line1:function(a,b,c){return a=new zc,a.type=Dc,a.qa=0,a.ra=0,a.D=b,a.F=c,a},Line2:function(a,b,c){return a=new zc,a.type=Dc,a.qa=b,a.ra=0,a.D=0,a.F=c,a},MinusLine:"LineH",LineH:function(a,b,c){return a=new zc,a.type=Dc,a.qa=0,a.ra=c/2,a.D=b,a.F=c/2,a},LineV:function(a,b,c){return a=new zc,a.type=Dc,a.qa=b/2,a.ra=0,a.D=b/2,a.F=c,a},Curve1:function(a,b,c){var d=F.va;return a=t.u(),I(a,0,0,!1),J(a,d*b,0,1*b,(1-d)*c,b,c),b=a.s,t.v(a),b},Curve2:function(a,b,c){var d=F.va;return a=t.u(),I(a,0,0,!1),J(a,0,d*c,(1-d)*b,c,b,c),b=a.s,t.v(a),b},Curve3:function(a,b,c){var d=F.va;return a=t.u(),I(a,1*b,0,!1),J(a,1*b,d*c,d*b,1*c,0,1*c),b=a.s,t.v(a),b},Curve4:function(a,b,c){var d=F.va;return a=t.u(),I(a,1*b,0,!1),J(a,(1-d)*b,0,0,(1-d)*c,0,1*c),b=a.s,t.v(a),b},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){return a=t.u(),I(a,.5*b,0*c,!0),a.lineTo(0*b,1*c),a.lineTo(1*b,1*c,!0),b=a.s,b.G=new H(.25,.5),b.H=new H(.75,1),t.v(a),b},Decision:"Diamond",Diamond:function(a,b,c){return a=t.u(),I(a,.5*b,0,!0),a.lineTo(0,.5*c),a.lineTo(.5*b,1*c),a.lineTo(1*b,.5*c,!0),b=a.s,b.G=new H(.25,.25),b.H=new H(.75,.75),t.v(a),b},Pentagon:function(a,b,c){var d=F.dl(5);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;5>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.2,.22),b.H=new H(.8,.9),t.v(a),b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var d=F.dl(6);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;6>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.07,.25),b.H=new H(.93,.75),t.v(a),b},Heptagon:function(a,b,c){var d=F.dl(7);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;7>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.2,.15),b.H=new H(.8,.85),t.v(a),b},Octagon:function(a,b,c){var d=F.dl(8);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;8>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.15,.15),b.H=new H(.85,.85),t.v(a),b},Nonagon:function(a,b,c){var d=F.dl(9);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;9>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.17,.13),b.H=new H(.82,.82),t.v(a),b},Decagon:function(a,b,c){var d=F.dl(10);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.16,.16),b.H=new H(.84,.84),t.v(a),b},Dodecagon:function(a,b,c){var d=F.dl(12);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.16,.16),b.H=new H(.84,.84),t.v(a),b},FivePointedStar:function(a,b,c){var d=F.Mm(5);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;10>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.312,.383),b.H=new H(.693,.765),t.v(a),b},SixPointedStar:function(a,b,c){var d=F.Mm(6);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;12>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.17,.251),b.H=new H(.833,.755),t.v(a),b},SevenPointedStar:function(a,b,c){var d=F.Mm(7);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;14>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.363,.361),b.H=new H(.641,.709),t.v(a),b},EightPointedStar:function(a,b,c){var d=F.Mm(8);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;16>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.252,.255),b.H=new H(.75,.75),t.v(a),b},NinePointedStar:function(a,b,c){var d=F.Mm(9);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;18>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.355,.361),b.H=new H(.645,.651),t.v(a),b},TenPointedStar:function(a,b,c){var d=F.Mm(10);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;20>e;e++)a.lineTo(d[e].x*b,d[e].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.281,.261),b.H=new H(.723,.748),t.v(a),b},FivePointedBurst:function(a,b,c){var d=F.Xo(5);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)J(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.312,.383),b.H=new H(.693,.765),t.v(a),b},SixPointedBurst:function(a,b,c){var d=F.Xo(6);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)J(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.17,.251),b.H=new H(.833,.755),t.v(a),b},SevenPointedBurst:function(a,b,c){var d=F.Xo(7);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)J(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.363,.361),b.H=new H(.641,.709),t.v(a),b},EightPointedBurst:function(a,b,c){var d=F.Xo(8);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)J(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.252,.255),b.H=new H(.75,.75),t.v(a),b},NinePointedBurst:function(a,b,c){var d=F.Xo(9);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)J(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.355,.361),b.H=new H(.645,.651),t.v(a),b},TenPointedBurst:function(a,b,c){var d=F.Xo(10);a=t.u(),I(a,d[0].x*b,d[0].y*c,!0);for(var e=1;e<d.length;e+=3)J(a,d[e].x*b,d[e].y*c,d[e+1].x*b,d[e+1].y*c,d[e+2].x*b,d[e+2].y*c);return t.ya(d),L(a),b=a.s,b.G=new H(.281,.261),b.H=new H(.723,.748),t.v(a),b},Cloud:function(a,b,c){return a=t.u(),I(a,.08034461*b,.1944299*c,!0),J(a,-.09239631*b,.07836421*c,.1406031*b,-.0542823*c,.2008615*b,.05349299*c),J(a,.2450511*b,-.00697547*c,.3776197*b,-.01112067*c,.4338609*b,.074219*c),J(a,.4539471*b,0,.6066018*b,-.02526587*c,.6558228*b,.07004196*c),J(a,.6914277*b,-.01904177*c,.8921095*b,-.01220843*c,.8921095*b,.08370865*c),J(a,1.036446*b,.04105738*c,1.020377*b,.3022052*c,.9147671*b,.3194596*c),J(a,1.04448*b,.360238*c,.992256*b,.5219009*c,.9082935*b,.562044*c),J(a,1.032337*b,.5771781*c,1.018411*b,.8120651*c,.9212406*b,.8217117*c),J(a,1.028411*b,.9571472*c,.8556702*b,1.052487*c,.7592566*b,.9156953*c),J(a,.7431877*b,1.009325*c,.5624123*b,1.021761*c,.5101666*b,.9310455*c),J(a,.4820677*b,1.031761*c,.3030112*b,1.002796*c,.2609328*b,.9344623*c),J(a,.2329994*b,1.01518*c,.03213784*b,1.01518*c,.08034461*b,.870098*c),J(a,-.02812061*b,.9032597*c,-.01205169*b,.6835638*c,.06829292*b,.6545475*c),J(a,-.01812061*b,.6089503*c,-.00606892*b,.4555777*c,.06427569*b,.4265613*c),J(a,-.01606892*b,.3892545*c,-.01205169*b,.1944299*c,.08034461*b,.1944299*c),L(a),b=a.s,b.G=new H(.1,.1),b.H=new H(.9,.9),t.v(a),b},Gate:"Crescent",Crescent:function(a,b,c){return a=t.u(),I(a,0,0,!0),J(a,1*b,0,1*b,1*c,0,1*c),J(a,.5*b,.75*c,.5*b,.25*c,0,0),L(a),b=a.s,b.G=new H(.511,.19),b.H=new H(.776,.76),t.v(a),b},FramedRectangle:function(a,b,c){var d=t.u(),e=a?a.Gc:0;return a=a?a.Ft:0,0===e&&(e=.1),0===a&&(a=.1),I(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c,!0),I(d,e*b,a*c,!1,!0),d.lineTo(e*b,(1-a)*c),d.lineTo((1-e)*b,(1-a)*c),d.lineTo((1-e)*b,a*c,!0),b=d.s,b.G=new H(e,a),b.H=new H(1-e,1-a),t.v(d),b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){var d=F.va;return a=t.u(),I(a,0,0,!0),J(a,d*b,0,1*b,(.5-d/2)*c,1*b,.5*c),J(a,1*b,(.5+d/2)*c,d*b,1*c,0,1*c),L(a),b=a.s,b.G=new H(0,.2),b.H=new H(.75,.8),t.v(a),b},Heart:function(a,b,c){return a=t.u(),I(a,.5*b,1*c,!0),J(a,.1*b,.8*c,0,.5*c,0*b,.3*c),J(a,0*b,0,.45*b,0,.5*b,.3*c),J(a,.55*b,0,1*b,0,1*b,.3*c),J(a,b,.5*c,.9*b,.8*c,.5*b,1*c),L(a),b=a.s,b.G=new H(.15,.29),b.H=new H(.86,.68),t.v(a),b},Spade:function(a,b,c){return a=t.u(),I(a,.5*b,0,!0),a.lineTo(.51*b,.01*c),J(a,.6*b,.2*c,b,.25*c,b,.5*c),J(a,b,.8*c,.6*b,.8*c,.55*b,.7*c),J(a,.5*b,.75*c,.55*b,.95*c,.75*b,c),a.lineTo(.25*b,c),J(a,.45*b,.95*c,.5*b,.75*c,.45*b,.7*c),J(a,.4*b,.8*c,0,.8*c,0,.5*c),J(a,0,.25*c,.4*b,.2*c,.49*b,.01*c),L(a),b=a.s,b.G=new H(.19,.26),b.H=new H(.8,.68),t.v(a),b},Club:function(a,b,c){a=t.u(),I(a,.4*b,.6*c,!0),J(a,.5*b,.75*c,.45*b,.95*c,.15*b,1*c),a.lineTo(.85*b,c),J(a,.55*b,.95*c,.5*b,.75*c,.6*b,.6*c);var d=.2,e=.3,f=0,g=4*(Math.SQRT2-1)/3*d;return J(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),J(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),J(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),J(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e+.05)*b,(.5-g+f-.02)*c,.65*b,.36771243*c),d=.2,e=0,f=-.3,g=4*(Math.SQRT2-1)/3*d,J(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),J(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),J(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),J(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,.35*b,.36771243*c),d=.2,e=-.3,f=0,g=4*(Math.SQRT2-1)/3*d,J(a,(.5+d+e-.05)*b,(.5-g+f-.02)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),J(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),J(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),J(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,.4*b,.6*c),L(a),b=a.s,b.G=new H(.06,.39),b.H=new H(.93,.58),t.v(a),b},Ring:function(a,b,c){a=t.u();var d=4*(Math.SQRT2-1)/3*.5;return I(a,b,.5*c,!0),J(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0),J(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c),J(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c),J(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c),d=4*(Math.SQRT2-1)/3*.4,I(a,.5*b,.1*c,!0,!0),J(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c),J(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c),J(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c),J(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c),b=a.s,b.G=new H(.146,.146),b.H=new H(.853,.853),b.Hc=Xg,t.v(a),b},YinYang:function(a,b,c){var d=.5;a=t.u(),d=.5,I(a,.5*b,0,!0),a.arcTo(270,180,.5*b,.5*b,.5*b),J(a,1*b,d*c,0,d*c,d*b,0,!0);var d=.1,e=.25;return I(a,(.5+d)*b,e*c,!0,!0),a.arcTo(0,-360,.5*b,c*e,d*b),L(a),I(a,.5*b,0,!1),a.arcTo(270,-180,.5*b,.5*b,.5*b),a.bb(!1),e=.75,I(a,(.5+d)*b,e*c,!0),a.arcTo(0,360,.5*b,c*e,d*b),L(a),b=a.s,b.Hc=Xg,t.v(a),b},Peace:function(a,b,c){a=t.u();var d=4*(Math.SQRT2-1)/3*.5;I(a,b,.5*c,!0),J(a,b,(.5-d)*c,(.5+d)*b,0,.5*b,0),J(a,(.5-d)*b,0,0,(.5-d)*c,0,.5*c),J(a,0,(.5+d)*c,(.5-d)*b,c,.5*b,c),J(a,(.5+d)*b,c,b,(.5+d)*c,b,.5*c),d=4*(Math.SQRT2-1)/3*.4,I(a,.5*b,.1*c,!0,!0),J(a,(.5+d)*b,.1*c,.9*b,(.5-d)*c,.9*b,.5*c),J(a,.9*b,(.5+d)*c,(.5+d)*b,.9*c,.5*b,.9*c),J(a,(.5-d)*b,.9*c,.1*b,(.5+d)*c,.1*b,.5*c),J(a,.1*b,(.5-d)*c,(.5-d)*b,.1*c,.5*b,.1*c);var d=.07,e=0,f=.11*-.707,g=4*(Math.SQRT2-1)/3*d;return I(a,(.5+d+e)*b,(.5+f)*c,!0),J(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),J(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),J(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),J(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),d=.07,e=.11*-.707,f=.707*.11,g=4*(Math.SQRT2-1)/3*d,I(a,(.5+d+e)*b,(.5+f)*c,!0),J(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),J(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),J(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),J(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),d=.07,e=.707*.11,f=.707*.11,g=4*(Math.SQRT2-1)/3*d,I(a,(.5+d+e)*b,(.5+f)*c,!0),J(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),J(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),J(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),J(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),b=a.s,b.G=new H(.146,.146),b.H=new H(.853,.853),b.Hc=Xg,t.v(a),b},NotAllowed:function(a,b,c){var d=F.va,e=.5*d,f=.5;a=t.u(),I(a,.5*b,(.5-f)*c,!0),J(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c),J(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),J(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),J(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c);var f=.4,e=.4*d,d=t.K(),g=t.K(),h=t.K(),i=t.K();F.Vi(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.42,d,g,h,i,i);var j=t.K(),k=t.K(),l=t.K();F.Vi(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.58,i,i,l,j,k);var m=t.K(),n=t.K(),o=t.K();F.Vi(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.42,m,n,o,i,i);var p=t.K(),q=t.K(),r=t.K();return F.Vi(.5,.5+f,.5-e,.5+f,.5-f,.5+e,.5-f,.5,.58,i,i,r,p,q),I(a,r.x*b,r.y*c,!0,!0),J(a,p.x*b,p.y*c,q.x*b,q.y*c,(.5-f)*b,.5*c),J(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c),J(a,d.x*b,d.y*c,g.x*b,g.y*c,h.x*b,h.y*c),a.lineTo(r.x*b,r.y*c),L(a),I(a,o.x*b,o.y*c,!0,!0),a.lineTo(l.x*b,l.y*c),J(a,j.x*b,j.y*c,k.x*b,k.y*c,(.5+f)*b,.5*c),J(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),J(a,m.x*b,m.y*c,n.x*b,n.y*c,o.x*b,o.y*c),L(a),t.B(d),t.B(g),t.B(h),t.B(i),t.B(j),t.B(k),t.B(l),t.B(m),t.B(n),t.B(o),t.B(p),t.B(q),t.B(r),b=a.s,t.v(a),b.Hc=Xg,b},Fragile:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(.25*b,0),a.lineTo(.2*b,.15*c),a.lineTo(.3*b,.25*c),a.lineTo(.29*b,.33*c),a.lineTo(.35*b,.25*c),a.lineTo(.3*b,.15*c),a.lineTo(.4*b,0),a.lineTo(1*b,0),J(a,1*b,.25*c,.75*b,.5*c,.55*b,.5*c),a.lineTo(.55*b,.9*c),a.lineTo(.7*b,.9*c),a.lineTo(.7*b,1*c),a.lineTo(.3*b,1*c),a.lineTo(.3*b,.9*c),a.lineTo(.45*b,.9*c),a.lineTo(.45*b,.5*c),J(a,.25*b,.5*c,0,.25*c,0,0),L(a),b=a.s,b.G=new H(.25,0),b.H=new H(.75,.4),t.v(a),b},HourGlass:function(a,b,c){return a=t.u(),I(a,.65*b,.5*c,!0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(.35*b,.5*c),a.lineTo(0,0),a.lineTo(1*b,0),L(a),b=a.s,t.v(a),b},Lightning:function(a,b,c){return a=t.u(),I(a,0*b,.55*c,!0),a.lineTo(.75*b,0),a.lineTo(.25*b,.45*c),a.lineTo(.9*b,.48*c),a.lineTo(.4*b,1*c),a.lineTo(.65*b,.55*c),L(a),b=a.s,t.v(a),b},Parallelogram1:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.1);var d=t.u();return I(d,a*b,0,!0),d.lineTo(1*b,0),d.lineTo((1-a)*b,1*c),d.lineTo(0,1*c),L(d),b=d.s,b.G=new H(a,0),b.H=new H(1-a,1),t.v(d),b},Input:"Output",Output:function(a,b,c){return a=t.u(),I(a,0,1*c,!0),a.lineTo(.1*b,0),a.lineTo(1*b,0),a.lineTo(.9*b,1*c),L(a),b=a.s,b.G=new H(.1,0),b.H=new H(.9,1),t.v(a),b},Parallelogram2:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.25);var d=t.u();return I(d,a*b,0,!0),d.lineTo(1*b,0),d.lineTo((1-a)*b,1*c),d.lineTo(0,1*c),L(d),b=d.s,b.G=new H(a,0),b.H=new H(1-a,1),t.v(d),b},ThickCross:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.25);var d=t.u();return I(d,(.5-a/2)*b,0,!0),d.lineTo((.5+a/2)*b,0),d.lineTo((.5+a/2)*b,(.5-a/2)*c),d.lineTo(1*b,(.5-a/2)*c),d.lineTo(1*b,(.5+a/2)*c),d.lineTo((.5+a/2)*b,(.5+a/2)*c),d.lineTo((.5+a/2)*b,1*c),d.lineTo((.5-a/2)*b,1*c),d.lineTo((.5-a/2)*b,(.5+a/2)*c),d.lineTo(0,(.5+a/2)*c),d.lineTo(0,(.5-a/2)*c),d.lineTo((.5-a/2)*b,(.5-a/2)*c),L(d),b=d.s,b.G=new H(.5-a/2,.5-a/2),b.H=new H(.5+a/2,.5+a/2),t.v(d),b},ThickX:function(a,b,c){a=.25/Math.SQRT2;var d=t.u();return I(d,.3*b,0,!0),d.lineTo(.5*b,.2*c),d.lineTo(.7*b,0),d.lineTo(1*b,.3*c),d.lineTo(.8*b,.5*c),d.lineTo(1*b,.7*c),d.lineTo(.7*b,1*c),d.lineTo(.5*b,.8*c),d.lineTo(.3*b,1*c),d.lineTo(0,.7*c),d.lineTo(.2*b,.5*c),d.lineTo(0,.3*c),L(d),b=d.s,b.G=new H(.5-a,.5-a),b.H=new H(.5+a,.5+a),t.v(d),b},ThinCross:function(a,b,c){var d=a?a.Gc:0;return 0===d&&(d=.1),a=t.u(),I(a,(.5-d/2)*b,0,!0),a.lineTo((.5+d/2)*b,0),a.lineTo((.5+d/2)*b,(.5-d/2)*c),a.lineTo(1*b,(.5-d/2)*c),a.lineTo(1*b,(.5+d/2)*c),a.lineTo((.5+d/2)*b,(.5+d/2)*c),a.lineTo((.5+d/2)*b,1*c),a.lineTo((.5-d/2)*b,1*c),a.lineTo((.5-d/2)*b,(.5+d/2)*c),a.lineTo(0,(.5+d/2)*c),a.lineTo(0,(.5-d/2)*c),a.lineTo((.5-d/2)*b,(.5-d/2)*c),L(a),b=a.s,t.v(a),b},ThinX:function(a,b,c){return a=t.u(),I(a,.1*b,0,!0),a.lineTo(.5*b,.4*c),a.lineTo(.9*b,0),a.lineTo(1*b,.1*c),a.lineTo(.6*b,.5*c),a.lineTo(1*b,.9*c),a.lineTo(.9*b,1*c),a.lineTo(.5*b,.6*c),a.lineTo(.1*b,1*c),a.lineTo(0,.9*c),a.lineTo(.4*b,.5*c),a.lineTo(0,.1*c),L(a),a.s},RightTriangle:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),L(a),b=a.s,b.G=new H(0,.5),b.H=new H(.5,1),t.v(a),b},RoundedIBeam:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(1*b,0),J(a,.5*b,.25*c,.5*b,.75*c,1*b,1*c),a.lineTo(0,1*c),J(a,.5*b,.75*c,.5*b,.25*c,0,0),L(a),b=a.s,t.v(a),b},RoundedRectangle:function(a,b,c){var d=a?a.Gc:0;0>=d&&(d=5),d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*F.va;var e=t.u();return I(e,d,0,!0),e.lineTo(b-d,0),J(e,b-a,0,b,a,b,d),e.lineTo(b,c-d),J(e,b,c-a,b-a,c,b-d,c),e.lineTo(d,c),J(e,a,c,0,c-a,0,c-d),e.lineTo(0,d),J(e,0,a,a,0,d,0),L(e),b=e.s,a>1?(b.G=new H(0,0,a,a),b.H=new H(1,1,-a,-a)):(b.G=Eb,b.H=Pb),t.v(e),b},Border:function(a,b,c){var d=a?a.Gc:0;return 0>=d&&(d=5),d=Math.min(d,b/3),d=Math.min(d,c/3),a=t.u(),I(a,d,0,!0),a.lineTo(b-d,0),J(a,b-0,0,b,0,b,d),a.lineTo(b,c-d),J(a,b,c-0,b-0,c,b-d,c),a.lineTo(d,c),J(a,0,c,0,c-0,0,c-d),a.lineTo(0,d),J(a,0,0,0,0,d,0),L(a),b=a.s,b.G=Eb,b.H=Pb,t.v(a),b},SquareIBeam:function(a,b,c){var d=a?a.Gc:0;return 0===d&&(d=.2),a=t.u(),I(a,0,0,!0),a.lineTo(1*b,0),a.lineTo(1*b,d*c),a.lineTo((.5+d/2)*b,d*c),a.lineTo((.5+d/2)*b,(1-d)*c),a.lineTo(1*b,(1-d)*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,(1-d)*c),a.lineTo((.5-d/2)*b,(1-d)*c),a.lineTo((.5-d/2)*b,d*c),a.lineTo(0,d*c),L(a),b=a.s,t.v(a),b},Trapezoid:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.2);var d=t.u();return I(d,a*b,0,!0),d.lineTo((1-a)*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),L(d),b=d.s,b.G=new H(a,0),b.H=new H(1-a,1),t.v(d),b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var d=a?a.Gc:0;return a=t.u(),I(a,d,0,!0),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(.9*b,1*c),a.lineTo(.1*b,1*c),L(a),b=a.s,b.G=new H(.1,0),b.H=new H(.9,1),t.v(a),b},GenderMale:function(a,b,c){a=t.u();var d=F.va,e=.4*d,f=.4,g=t.K(),h=t.K(),i=t.K(),j=t.K();I(a,(.5-f)*b,.5*c,!0),J(a,(.5-f)*b,(.5-e)*c,(.5-e)*b,(.5-f)*c,.5*b,(.5-f)*c),F.Vi(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.44,i,j,h,g,g),J(a,i.x*b,i.y*c,j.x*b,j.y*c,h.x*b,h.y*c);var k=t.mc(h.x,h.y);F.Vi(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.56,g,g,h,i,j);var l=t.mc(h.x,h.y);return a.lineTo((.1*k.x+.855)*b,.1*k.y*c),a.lineTo(.85*b,.1*k.y*c),a.lineTo(.85*b,0),a.lineTo(1*b,0),a.lineTo(1*b,.15*c),a.lineTo((.1*l.x+.9)*b,.15*c),a.lineTo((.1*l.x+.9)*b,(.1*l.y+.05*.9)*c),a.lineTo(l.x*b,l.y*c),J(a,i.x*b,i.y*c,j.x*b,j.y*c,(.5+f)*b,.5*c),J(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),J(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c),f=.35,e=.35*d,I(a,.5*b,(.5-f)*c,!0,!0),J(a,(.5-e)*b,(.5-f)*c,(.5-f)*b,(.5-e)*c,(.5-f)*b,.5*c),J(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),J(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),J(a,(.5+f)*b,(.5-e)*c,(.5+e)*b,(.5-f)*c,.5*b,(.5-f)*c),I(a,(.5-f)*b,.5*c,!0),t.B(g),t.B(h),t.B(i),t.B(j),t.B(k),t.B(l),b=a.s,b.G=new H(.202,.257),b.H=new H(.692,.839),b.Hc=Xg,t.v(a),b},GenderFemale:function(a,b,c){a=t.u();var d=.375,e=0,f=-.125,g=4*(Math.SQRT2-1)/3*d;return I(a,(.525+e)*b,(.5+d+f)*c,!0),J(a,(.5+g+e)*b,(.5+d+f)*c,(.5+d+e)*b,(.5+g+f)*c,(.5+d+e)*b,(.5+f)*c),J(a,(.5+d+e)*b,(.5-g+f)*c,(.5+g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),J(a,(.5-g+e)*b,(.5-d+f)*c,(.5-d+e)*b,(.5-g+f)*c,(.5-d+e)*b,(.5+f)*c),J(a,(.5-d+e)*b,(.5+g+f)*c,(.5-g+e)*b,(.5+d+f)*c,(.475+e)*b,(.5+d+f)*c),a.lineTo(.475*b,.85*c),a.lineTo(.425*b,.85*c),a.lineTo(.425*b,.9*c),a.lineTo(.475*b,.9*c),a.lineTo(.475*b,1*c),a.lineTo(.525*b,1*c),a.lineTo(.525*b,.9*c),a.lineTo(.575*b,.9*c),a.lineTo(.575*b,.85*c),a.lineTo(.525*b,.85*c),L(a),d=.325,e=0,f=-.125,g=4*(Math.SQRT2-1)/3*d,I(a,(.5+d+e)*b,(.5+f)*c,!0,!0),J(a,(.5+d+e)*b,(.5+g+f)*c,(.5+g+e)*b,(.5+d+f)*c,(.5+e)*b,(.5+d+f)*c),J(a,(.5-g+e)*b,(.5+d+f)*c,(.5-d+e)*b,(.5+g+f)*c,(.5-d+e)*b,(.5+f)*c),J(a,(.5-d+e)*b,(.5-g+f)*c,(.5-g+e)*b,(.5-d+f)*c,(.5+e)*b,(.5-d+f)*c),J(a,(.5+g+e)*b,(.5-d+f)*c,(.5+d+e)*b,(.5-g+f)*c,(.5+d+e)*b,(.5+f)*c),I(a,(.525+e)*b,(.5+d+f)*c,!0),b=a.s,b.G=new H(.232,.136),b.H=new H(.782,.611),b.Hc=Xg,t.v(a),b},PlusLine:function(a,b,c){return a=t.u(),I(a,0,.5*c,!1),a.lineTo(1*b,.5*c),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),b=a.s,t.v(a),b},XLine:function(a,b,c){return a=t.u(),I(a,0,1*c,!1),a.lineTo(1*b,0),a.moveTo(0,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},AsteriskLine:function(a,b,c){a=t.u();var d=.2/Math.SQRT2;return I(a,d*b,(1-d)*c,!1),a.lineTo((1-d)*b,d*c),a.moveTo(d*b,d*c),a.lineTo((1-d)*b,(1-d)*c),a.moveTo(0*b,.5*c),a.lineTo(1*b,.5*c),a.moveTo(.5*b,0*c),a.lineTo(.5*b,1*c),b=a.s,t.v(a),b},CircleLine:function(a,b,c){var d=.5*F.va;return a=t.u(),I(a,1*b,.5*c,!1),J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),J(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),J(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),J(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new H(.146,.146),b.H=new H(.853,.853),b.Hc=Xg,t.v(a),b},Pie:function(a,b,c){a=t.u();var d=4*(Math.SQRT2-1)/3*.5;return I(a,(.5*Math.SQRT2/2+.5)*b,(.5-.5*Math.SQRT2/2)*c,!0),J(a,.7*b,0*c,.5*b,0*c,.5*b,0*c),J(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c),J(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.5*b,1*c),J(a,(.5+d+0)*b,1*c,1*b,(.5+d+0)*c,1*b,.5*c),a.lineTo(.5*b,.5*c),L(a),b=a.s,t.v(a),b},PiePiece:function(a,b,c){var d=F.va/Math.SQRT2*.5,e=Math.SQRT2/2,f=1-Math.SQRT2/2;return a=t.u(),I(a,b,c,!0),J(a,b,(1-d)*c,(e+d)*b,(f+d)*c,e*b,f*c),a.lineTo(0,c),L(a),b=a.s,t.v(a),b},StopSign:function(a,b,c){a=1/(Math.SQRT2+2);var d=t.u();return I(d,a*b,0,!0),d.lineTo((1-a)*b,0),d.lineTo(1*b,a*c),d.lineTo(1*b,(1-a)*c),d.lineTo((1-a)*b,1*c),d.lineTo(a*b,1*c),d.lineTo(0,(1-a)*c),d.lineTo(0,a*c),L(d),b=d.s,b.G=new H(a/2,a/2),b.H=new H(1-a/2,1-a/2),t.v(d),b},LogicImplies:function(a,b,c){var d=a?a.Gc:0;return 0===d&&(d=.2),a=t.u(),I(a,(1-d)*b,0*c,!1),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,c),a.moveTo(0,.5*c),a.lineTo(b,.5*c),b=a.s,b.G=Eb,b.H=new H(.8,.5),t.v(a),b},LogicIff:function(a,b,c){var d=a?a.Gc:0;return 0===d&&(d=.2),a=t.u(),I(a,(1-d)*b,0*c,!1),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,c),a.moveTo(0,.5*c),a.lineTo(b,.5*c),a.moveTo(d*b,0),a.lineTo(0,.5*c),a.lineTo(d*b,c),b=a.s,b.G=new H(.2,0),b.H=new H(.8,.5),t.v(a),b},LogicNot:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},LogicAnd:function(a,b,c){return a=t.u(),I(a,0,1*c,!1),a.lineTo(.5*b,0),a.lineTo(1*b,1*c),b=a.s,b.G=new H(.25,.5),b.H=new H(.75,1),t.v(a),b},LogicOr:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(.5*b,1*c),a.lineTo(1*b,0),b=a.s,b.G=new H(.219,0),b.H=new H(.78,.409),t.v(a),b},LogicXor:function(a,b,c){a=t.u(),I(a,.5*b,0,!1),a.lineTo(.5*b,1*c),a.moveTo(0,.5*c),a.lineTo(1*b,.5*c);var d=.5*F.va;return J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),J(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),J(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),J(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.Hc=Xg,t.v(a),b},LogicTruth:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(1*b,0),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),b=a.s,t.v(a),b},LogicFalsity:function(a,b,c){return a=t.u(),I(a,0,1*c,!1),a.lineTo(1*b,1*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,0),b=a.s,t.v(a),b},LogicThereExists:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(1*b,0),a.lineTo(1*b,.5*c),a.lineTo(0,.5*c),a.moveTo(1*b,.5*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),b=a.s,t.v(a),b},LogicForAll:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(.5*b,1*c),a.lineTo(1*b,0),a.moveTo(.25*b,.5*c),a.lineTo(.75*b,.5*c),b=a.s,b.G=new H(.25,0),b.H=new H(.75,.5),t.v(a),b},LogicIsDefinedAs:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(b,0),a.moveTo(0,.5*c),a.lineTo(b,.5*c),a.moveTo(0,c),a.lineTo(b,c),b=a.s,b.G=new H(.01,.01),b.H=new H(.99,.49),t.v(a),b},LogicIntersect:function(a,b,c){var d=.5*F.va;return a=t.u(),I(a,0,1*c,!1),a.lineTo(0,.5*c),J(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),J(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),a.lineTo(1*b,1*c),b=a.s,b.G=new H(0,.5),b.H=Pb,t.v(a),b},LogicUnion:function(a,b,c){var d=.5*F.va;return a=t.u(),I(a,1*b,0,!1),a.lineTo(1*b,.5*c),J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),J(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),a.lineTo(0,0),b=a.s,b.G=Eb,b.H=new H(1,.5),t.v(a),b},Arrow:function(a,b,c){var d=a?a.Gc:0,e=a?a.Ft:0;return 0===d&&(d=.3),0===e&&(e=.3),a=t.u(),I(a,0,(.5-e/2)*c,!0),a.lineTo((1-d)*b,(.5-e/2)*c),a.lineTo((1-d)*b,0),a.lineTo(1*b,.5*c),a.lineTo((1-d)*b,1*c),a.lineTo((1-d)*b,(.5+e/2)*c),a.lineTo(0,(.5+e/2)*c),L(a),b=a.s,b.G=new H(0,.5-e/2),d=F.jl(0,.5+e/2,1,.5+e/2,1-d,1,1,.5,t.K()),b.H=new H(d.x,d.y),t.B(d),t.v(a),b},ISOProcess:"Chevron",Chevron:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(.5*b,0),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,1*c),a.lineTo(.5*b,.5*c),L(a),b=a.s,t.v(a),b},DoubleArrow:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(.3*b,.214*c),a.lineTo(.3*b,0),a.lineTo(1*b,.5*c),a.lineTo(.3*b,1*c),a.lineTo(.3*b,.786*c),a.lineTo(0,1*c),L(a),I(a,.3*b,.214*c,!1),a.lineTo(.3*b,.786*c),a.bb(!1),b=a.s,t.v(a),b},DoubleEndArrow:function(a,b,c){return a=t.u(),I(a,1*b,.5*c,!0),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(.3*b,.7*c),a.lineTo(.3*b,1*c),a.lineTo(0,.5*c),a.lineTo(.3*b,0),a.lineTo(.3*b,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),L(a),b=a.s,c=F.jl(0,.5,.3,0,0,.3,.3,.3,t.K()),b.G=new H(c.x,c.y),c=F.jl(.7,1,1,.5,.7,.7,1,.7,c),b.H=new H(c.x,c.y),t.B(c),t.v(a),b},IBeamArrow:function(a,b,c){return a=t.u(),I(a,1*b,.5*c,!0),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(.2*b,.7*c),a.lineTo(.2*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.2*b,0),a.lineTo(.2*b,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),L(a),b=a.s,b.G=new H(0,.3),c=F.jl(.7,1,1,.5,.7,.7,1,.7,t.K()),b.H=new H(c.x,c.y),t.B(c),t.v(a),b},Pointer:function(a,b,c){return a=t.u(),I(a,1*b,.5*c,!0),a.lineTo(0,1*c),a.lineTo(.2*b,.5*c),a.lineTo(0,0),L(a),b=a.s,b.G=new H(.2,.35),c=F.jl(.2,.65,1,.65,0,1,1,.5,t.K()),b.H=new H(c.x,c.y),t.B(c),t.v(a),b},RoundedPointer:function(a,b,c){return a=t.u(),I(a,1*b,.5*c,!0),a.lineTo(0,1*c),J(a,.5*b,.75*c,.5*b,.25*c,0,0),L(a),b=a.s,b.G=new H(.4,.35),c=F.jl(.2,.65,1,.65,0,1,1,.5,t.K()),b.H=new H(c.x,c.y),t.B(c),t.v(a),b},SplitEndArrow:function(a,b,c){return a=t.u(),I(a,1*b,.5*c,!0),a.lineTo(.7*b,1*c),a.lineTo(.7*b,.7*c),a.lineTo(0,.7*c),a.lineTo(.2*b,.5*c),a.lineTo(0,.3*c),a.lineTo(.7*b,.3*c),a.lineTo(.7*b,0),L(a),b=a.s,b.G=new H(.2,.3),c=F.jl(.7,1,1,.5,.7,.7,1,.7,t.K()),b.H=new H(c.x,c.y),t.B(c),t.v(a),b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){return a=t.u(),I(a,1*b,.5*c,!0),a.lineTo(.7*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.7*b,0),L(a),b=a.s,b.G=Eb,b.H=new H(.7,1),t.v(a),b},Cone1:function(a,b,c){var d=F.va;a=.5*d;var e=.1*d,d=t.u();return I(d,0,.9*c,!0),d.lineTo(.5*b,0),d.lineTo(1*b,.9*c),J(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),J(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),L(d),b=d.s,b.G=new H(.25,.5),b.H=new H(.75,.97),t.v(d),b},Cone2:function(a,b,c){return a=t.u(),I(a,0,.9*c,!0),J(a,(1-.85/.9)*b,1*c,.85/.9*b,1*c,1*b,.9*c),a.lineTo(.5*b,0),a.lineTo(0,.9*c),L(a),I(a,0,.9*c,!1),J(a,(1-.85/.9)*b,.8*c,.85/.9*b,.8*c,1*b,.9*c),a.bb(!1),b=a.s,b.G=new H(.25,.5),b.H=new H(.75,.82),t.v(a),b},Cube1:function(a,b,c){return a=t.u(),I(a,.5*b,1*c,!0),a.lineTo(1*b,.85*c),a.lineTo(1*b,.15*c),a.lineTo(.5*b,0*c),a.lineTo(0*b,.15*c),a.lineTo(0*b,.85*c),L(a),I(a,.5*b,1*c,!1),a.lineTo(.5*b,.3*c),a.lineTo(0,.15*c),a.moveTo(.5*b,.3*c),a.lineTo(1*b,.15*c),a.bb(!1),b=a.s,b.G=new H(0,.3),b.H=new H(.5,.85),t.v(a),b},Cube2:function(a,b,c){return a=t.u(),I(a,0,.3*c,!0),a.lineTo(0*b,1*c),a.lineTo(.7*b,c),a.lineTo(1*b,.7*c),a.lineTo(1*b,0*c),a.lineTo(.3*b,0*c),L(a),I(a,0,.3*c,!1),a.lineTo(.7*b,.3*c),a.lineTo(1*b,0*c),a.moveTo(.7*b,.3*c),a.lineTo(.7*b,1*c),a.bb(!1),b=a.s,b.G=new H(0,.3),b.H=new H(.7,1),t.v(a),b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var d=F.va;a=.5*d;var e=.1*d,d=t.u();return I(d,0,.1*c,!0),J(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0),J(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c),d.lineTo(b,.9*c),J(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),J(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),d.lineTo(0,.1*c),I(d,0,.1*c,!1),J(d,0,(.1+e)*c,(.5-a)*b,.2*c,.5*b,.2*c),J(d,(.5+a)*b,.2*c,1*b,(.1+e)*c,1*b,.1*c),d.bb(!1),b=d.s,b.G=new H(0,.2),b.H=new H(1,.9),t.v(d),b},Cylinder2:function(a,b,c){var d=F.va;a=.5*d;var e=.1*d,d=t.u();return I(d,0,.9*c,!0),d.lineTo(0,.1*c),J(d,0,(.1-e)*c,(.5-a)*b,0,.5*b,0),J(d,(.5+a)*b,0,1*b,(.1-e)*c,1*b,.1*c),d.lineTo(1*b,.9*c),J(d,1*b,(.9+e)*c,(.5+a)*b,1*c,.5*b,1*c),J(d,(.5-a)*b,1*c,0,(.9+e)*c,0,.9*c),
I(d,0,.9*c,!1),J(d,0,(.9-e)*c,(.5-a)*b,.8*c,.5*b,.8*c),J(d,(.5+a)*b,.8*c,1*b,(.9-e)*c,1*b,.9*c),d.bb(!1),b=d.s,b.G=new H(0,.1),b.H=new H(1,.8),t.v(d),b},Cylinder3:function(a,b,c){var d=F.va;a=.1*d;var e=.5*d,d=t.u();return I(d,.1*b,0,!0),d.lineTo(.9*b,0),J(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c),J(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c),d.lineTo(.1*b,1*c),J(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c),J(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0),I(d,.1*b,0,!1),J(d,(.1+a)*b,0,.2*b,(.5-e)*c,.2*b,.5*c),J(d,.2*b,(.5+e)*c,(.1+a)*b,1*c,.1*b,1*c),d.bb(!1),b=d.s,b.G=new H(.2,0),b.H=new H(.9,1),t.v(d),b},DirectData:"Cylinder4",Cylinder4:function(a,b,c){var d=F.va;a=.1*d;var e=.5*d,d=t.u();return I(d,.9*b,0,!0),J(d,(.9+a)*b,0,1*b,(.5-e)*c,1*b,.5*c),J(d,1*b,(.5+e)*c,(.9+a)*b,1*c,.9*b,1*c),d.lineTo(.1*b,1*c),J(d,(.1-a)*b,1*c,0,(.5+e)*c,0,.5*c),J(d,0,(.5-e)*c,(.1-a)*b,0,.1*b,0),d.lineTo(.9*b,0),I(d,.9*b,0,!1),J(d,(.9-a)*b,0,.8*b,(.5-e)*c,.8*b,.5*c),J(d,.8*b,(.5+e)*c,(.9-a)*b,1*c,.9*b,1*c),d.bb(!1),b=d.s,b.G=new H(.1,0),b.H=new H(.8,1),t.v(d),b},Prism1:function(a,b,c){return a=t.u(),I(a,.25*b,.25*c,!0),a.lineTo(.75*b,0),a.lineTo(b,.5*c),a.lineTo(.5*b,c),a.lineTo(0,c),L(a),I(a,.25*b,.25*c,!1),a.lineTo(.5*b,c),a.bb(!1),b=a.s,b.G=new H(.408,.172),b.H=new H(.833,.662),t.v(a),b},Prism2:function(a,b,c){return a=t.u(),I(a,0,.25*c,!0),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(.75*b,.75*c),a.lineTo(0,1*c),L(a),I(a,0,c,!1),a.lineTo(.25*b,.5*c),a.lineTo(b,.25*c),a.moveTo(0,.25*c),a.lineTo(.25*b,.5*c),a.bb(!1),b=a.s,b.G=new H(.25,.5),b.H=new H(.75,.75),t.v(a),b},Pyramid1:function(a,b,c){return a=t.u(),I(a,.5*b,0,!0),a.lineTo(b,.75*c),a.lineTo(.5*b,1*c),a.lineTo(0,.75*c),L(a),I(a,.5*b,0,!1),a.lineTo(.5*b,1*c),a.bb(!1),b=a.s,b.G=new H(.25,.367),b.H=new H(.75,.875),t.v(a),b},Pyramid2:function(a,b,c){return a=t.u(),I(a,.5*b,0,!0),a.lineTo(b,.85*c),a.lineTo(.5*b,1*c),a.lineTo(0,.85*c),L(a),I(a,.5*b,0,!1),a.lineTo(.5*b,.7*c),a.lineTo(0,.85*c),a.moveTo(.5*b,.7*c),a.lineTo(1*b,.85*c),a.bb(!1),b=a.s,b.G=new H(.25,.367),b.H=new H(.75,.875),t.v(a),b},Actor:function(a,b,c){var d=F.va,e=.2*d,f=.1*d,g=.5,h=.1;return a=t.u(),I(a,g*b,(h+.1)*c,!0),J(a,(g-e)*b,(h+.1)*c,(g-.2)*b,(h+f)*c,(g-.2)*b,h*c),J(a,(g-.2)*b,(h-f)*c,(g-e)*b,(h-.1)*c,g*b,(h-.1)*c),J(a,(g+e)*b,(h-.1)*c,(g+.2)*b,(h-f)*c,(g+.2)*b,h*c),J(a,(g+.2)*b,(h+f)*c,(g+e)*b,(h+.1)*c,g*b,(h+.1)*c),e=.05,f=d*e,I(a,.5*b,.2*c,!0),a.lineTo(.95*b,.2*c),g=.95,h=.25,J(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c),a.lineTo(1*b,.6*c),a.lineTo(.85*b,.6*c),a.lineTo(.85*b,.35*c),e=.025,f=d*e,g=.825,h=.35,J(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c),J(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c),a.lineTo(.8*b,1*c),a.lineTo(.55*b,1*c),a.lineTo(.55*b,.7*c),e=.05,f=d*e,g=.5,h=.7,J(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c),J(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c),a.lineTo(.45*b,1*c),a.lineTo(.2*b,1*c),a.lineTo(.2*b,.35*c),e=.025,f=d*e,g=.175,h=.35,J(a,(g+e)*b,(h-f)*c,(g+f)*b,(h-e)*c,g*b,(h-e)*c),J(a,(g-f)*b,(h-e)*c,(g-e)*b,(h-f)*c,(g-e)*b,h*c),a.lineTo(.15*b,.6*c),a.lineTo(0*b,.6*c),a.lineTo(0*b,.25*c),e=.05,f=d*e,g=.05,h=.25,J(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c),a.lineTo(.5*b,.2*c),b=a.s,b.G=new H(.2,.2),b.H=new H(.8,.65),t.v(a),b},Card:function(a,b,c){return a=t.u(),I(a,1*b,0*c,!0),a.lineTo(1*b,1*c),a.lineTo(0*b,1*c),a.lineTo(0*b,.2*c),a.lineTo(.2*b,0*c),L(a),b=a.s,b.G=new H(0,.2),b.H=Pb,t.v(a),b},Collate:function(a,b,c){return a=t.u(),I(a,.5*b,.5*c,!0),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(.5*b,.5*c),I(a,.5*b,.5*c,!0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(.5*b,.5*c),b=a.s,b.G=new H(.25,0),b.H=new H(.75,.25),t.v(a),b},CreateRequest:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.1);var d=t.u();return I(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),L(d),I(d,0,a*c,!1),d.lineTo(1*b,a*c),d.moveTo(0,(1-a)*c),d.lineTo(1*b,(1-a)*c),d.bb(!1),b=d.s,b.G=new H(0,a),b.H=new H(1,1-a),t.v(d),b},Database:function(a,b,c){a=t.u();var d=F.va,e=.5*d,d=.1*d;return I(a,1*b,.1*c,!0),a.lineTo(1*b,.9*c),J(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c),J(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c),a.lineTo(0,.1*c),J(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0),J(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c),I(a,1*b,.1*c,!1),J(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c),J(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c),a.moveTo(1*b,.2*c),J(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c),J(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c),a.moveTo(1*b,.3*c),J(a,1*b,(.3+d)*c,(.5+e)*b,.4*c,.5*b,.4*c),J(a,(.5-e)*b,.4*c,0,(.3+d)*c,0,.3*c),a.bb(!1),b=a.s,b.G=new H(0,.4),b.H=new H(1,.9),t.v(a),b},StoredData:"DataStorage",DataStorage:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(.75*b,0),J(a,1*b,0,1*b,1*c,.75*b,1*c),a.lineTo(0,1*c),J(a,.25*b,.9*c,.25*b,.1*c,0,0),L(a),b=a.s,b.G=new H(.226,0),b.H=new H(.81,1),t.v(a),b},DiskStorage:function(a,b,c){a=t.u();var d=F.va,e=.5*d,d=.1*d;return I(a,1*b,.1*c,!0),a.lineTo(1*b,.9*c),J(a,1*b,(.9+d)*c,(.5+e)*b,1*c,.5*b,1*c),J(a,(.5-e)*b,1*c,0,(.9+d)*c,0,.9*c),a.lineTo(0,.1*c),J(a,0,(.1-d)*c,(.5-e)*b,0,.5*b,0),J(a,(.5+e)*b,0,1*b,(.1-d)*c,1*b,.1*c),I(a,1*b,.1*c,!1),J(a,1*b,(.1+d)*c,(.5+e)*b,.2*c,.5*b,.2*c),J(a,(.5-e)*b,.2*c,0,(.1+d)*c,0,.1*c),a.moveTo(1*b,.2*c),J(a,1*b,(.2+d)*c,(.5+e)*b,.3*c,.5*b,.3*c),J(a,(.5-e)*b,.3*c,0,(.2+d)*c,0,.2*c),a.bb(!1),b=a.s,b.G=new H(0,.3),b.H=new H(1,.9),t.v(a),b},Display:function(a,b,c){return a=t.u(),I(a,.25*b,0,!0),a.lineTo(.75*b,0),J(a,1*b,0,1*b,1*c,.75*b,1*c),a.lineTo(.25*b,1*c),a.lineTo(0,.5*c),L(a),b=a.s,b.G=new H(.25,0),b.H=new H(.75,1),t.v(a),b},DividedEvent:function(a,b,c){a=a?a.Gc:0,0===a?a=.2:.15>a&&(a=.15);var d=t.u(),e=.2*F.va;return I(d,0,.2*c,!0),J(d,0,(.2-e)*c,(.2-e)*b,0,.2*b,0),d.lineTo(.8*b,0),J(d,(.8+e)*b,0,1*b,(.2-e)*c,1*b,.2*c),d.lineTo(1*b,.8*c),J(d,1*b,(.8+e)*c,(.8+e)*b,1*c,.8*b,1*c),d.lineTo(.2*b,1*c),J(d,(.2-e)*b,1*c,0,(.8+e)*c,0,.8*c),d.lineTo(0,.2*c),I(d,0,a*c,!1),d.lineTo(1*b,a*c),d.bb(!1),b=d.s,b.G=new H(0,a),b.H=new H(1,1-a),t.v(d),b},DividedProcess:function(a,b,c){a=a?a.Gc:0,.1>a&&(a=.1);var d=t.u();return I(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),L(d),I(d,0,a*c,!1),d.lineTo(1*b,a*c),d.bb(!1),b=d.s,b.G=new H(0,a),b.H=Pb,t.v(d),b},Document:function(a,b,c){return c/=.8,a=t.u(),I(a,0,.7*c,!0),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(1*b,.7*c),J(a,.5*b,.4*c,.5*b,1*c,0,.7*c),L(a),b=a.s,b.G=Eb,b.H=new H(1,.6),t.v(a),b},ExternalOrganization:function(a,b,c){a=a?a.Gc:0,.2>a&&(a=.2);var d=t.u();return I(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),L(d),I(d,a*b,0,!1),d.lineTo(0,a*c),d.moveTo(1*b,a*c),d.lineTo((1-a)*b,0),d.moveTo(0,(1-a)*c),d.lineTo(a*b,1*c),d.moveTo((1-a)*b,1*c),d.lineTo(1*b,(1-a)*c),d.bb(!1),b=d.s,b.G=new H(a/2,a/2),b.H=new H(1-a/2,1-a/2),t.v(d),b},ExternalProcess:function(a,b,c){return a=t.u(),I(a,.5*b,0,!0),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,.5*c),L(a),I(a,.1*b,.4*c,!1),a.lineTo(.1*b,.6*c),a.moveTo(.9*b,.6*c),a.lineTo(.9*b,.4*c),a.moveTo(.6*b,.1*c),a.lineTo(.4*b,.1*c),a.moveTo(.4*b,.9*c),a.lineTo(.6*b,.9*c),a.bb(!1),b=a.s,b.G=new H(.25,.25),b.H=new H(.75,.75),t.v(a),b},File:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),L(a),I(a,.75*b,0,!1),a.lineTo(.75*b,.25*c),a.lineTo(1*b,.25*c),a.bb(!1),b=a.s,b.G=new H(0,.25),b.H=Pb,t.v(a),b},Interrupt:function(a,b,c){return a=t.u(),I(a,1*b,.5*c,!0),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(1*b,.5*c),I(a,1*b,.5*c,!1),a.lineTo(1*b,1*c),I(a,1*b,.5*c,!1),a.lineTo(1*b,0),b=a.s,b.G=new H(0,.25),b.H=new H(.5,.75),t.v(a),b},InternalStorage:function(a,b,c){var d=a?a.Gc:0;a=a?a.Ft:0,0===d&&(d=.1),0===a&&(a=.1);var e=t.u();return I(e,0,0,!0),e.lineTo(1*b,0),e.lineTo(1*b,1*c),e.lineTo(0,1*c),L(e),I(e,d*b,0,!1),e.lineTo(d*b,1*c),e.moveTo(0,a*c),e.lineTo(1*b,a*c),e.bb(!1),b=e.s,b.G=new H(d,a),b.H=Pb,t.v(e),b},Junction:function(a,b,c){a=t.u();var d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,f=.5*F.va;return I(a,1*b,.5*c,!0),J(a,1*b,(.5+f)*c,(.5+f)*b,1*c,.5*b,1*c),J(a,(.5-f)*b,1*c,0,(.5+f)*c,0,.5*c),J(a,0,(.5-f)*c,(.5-f)*b,0,.5*b,0),J(a,(.5+f)*b,0,1*b,(.5-f)*c,1*b,.5*c),I(a,(e+d)*b,(e+d)*c,!1),a.lineTo(e*b,e*c),a.moveTo(e*b,(e+d)*c),a.lineTo((e+d)*b,e*c),a.bb(!1),b=a.s,b.Hc=Xg,t.v(a),b},LinedDocument:function(a,b,c){return c/=.8,a=t.u(),I(a,0,.7*c,!0),a.lineTo(0,0),a.lineTo(1*b,0),a.lineTo(1*b,.7*c),J(a,.5*b,.4*c,.5*b,1*c,0,.7*c),L(a),I(a,.1*b,0,!1),a.lineTo(.1*b,.75*c),a.bb(!1),b=a.s,b.G=new H(.1,0),b.H=new H(1,.6),t.v(a),b},LoopLimit:function(a,b,c){return a=t.u(),I(a,0,1*c,!0),a.lineTo(0,.25*c),a.lineTo(.25*b,0),a.lineTo(.75*b,0),a.lineTo(1*b,.25*c),a.lineTo(1*b,1*c),L(a),b=a.s,b.G=new H(0,.25),b.H=Pb,t.v(a),b},SequentialData:"MagneticTape",MagneticTape:function(a,b,c){a=t.u();var d=.5*F.va;return I(a,.5*b,1*c,!0),J(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),J(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),J(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),J(a,1*b,(.5+d)*c,(.5+d)*b,.9*c,.6*b,.9*c),a.lineTo(1*b,.9*c),a.lineTo(1*b,1*c),a.lineTo(.5*b,1*c),b=a.s,b.G=new H(.15,.15),b.H=new H(.85,.8),t.v(a),b},ManualInput:function(a,b,c){return a=t.u(),I(a,1*b,0,!0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.25*c),L(a),b=a.s,b.G=new H(0,.25),b.H=Pb,t.v(a),b},MessageFromUser:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.7);var d=t.u();return I(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(a*b,.5*c),d.lineTo(1*b,1*c),d.lineTo(0,1*c),L(d),b=d.s,b.G=Eb,b.H=new H(a,1),t.v(d),b},MicroformProcessing:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.25);var d=t.u();return I(d,0,0,!0),d.lineTo(.5*b,a*c),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(.5*b,(1-a)*c),d.lineTo(0,1*c),L(d),b=d.s,b.G=new H(0,a),b.H=new H(1,1-a),t.v(d),b},MicroformRecording:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(.75*b,.25*c),a.lineTo(1*b,.15*c),a.lineTo(1*b,.85*c),a.lineTo(.75*b,.75*c),a.lineTo(0,1*c),L(a),b=a.s,b.G=new H(0,.25),b.H=new H(1,.75),t.v(a),b},MultiDocument:function(a,b,c){return c/=.8,a=t.u(),I(a,b,0,!0),a.lineTo(b,.5*c),J(a,.96*b,.47*c,.93*b,.45*c,.9*b,.44*c),a.lineTo(.9*b,.6*c),J(a,.86*b,.57*c,.83*b,.55*c,.8*b,.54*c),a.lineTo(.8*b,.7*c),J(a,.4*b,.4*c,.4*b,1*c,0,.7*c),a.lineTo(0,.2*c),a.lineTo(.1*b,.2*c),a.lineTo(.1*b,.1*c),a.lineTo(.2*b,.1*c),a.lineTo(.2*b,0),L(a),I(a,.1*b,.2*c,!1),a.lineTo(.8*b,.2*c),a.lineTo(.8*b,.54*c),a.moveTo(.2*b,.1*c),a.lineTo(.9*b,.1*c),a.lineTo(.9*b,.44*c),a.bb(!1),b=a.s,b.G=new H(0,.25),b.H=new H(.8,.77),t.v(a),b},MultiProcess:function(a,b,c){return a=t.u(),I(a,.1*b,.1*c,!0),a.lineTo(.2*b,.1*c),a.lineTo(.2*b,0),a.lineTo(1*b,0),a.lineTo(1*b,.8*c),a.lineTo(.9*b,.8*c),a.lineTo(.9*b,.9*c),a.lineTo(.8*b,.9*c),a.lineTo(.8*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.2*c),a.lineTo(.1*b,.2*c),L(a),I(a,.2*b,.1*c,!1),a.lineTo(.9*b,.1*c),a.lineTo(.9*b,.8*c),a.moveTo(.1*b,.2*c),a.lineTo(.8*b,.2*c),a.lineTo(.8*b,.9*c),a.bb(!1),b=a.s,b.G=new H(0,.2),b.H=new H(.8,1),t.v(a),b},OfflineStorage:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.1);var d=1-a,e=t.u();return I(e,0,0,!0),e.lineTo(1*b,0),e.lineTo(.5*b,1*c),L(e),I(e,.5*a*b,a*c,!1),e.lineTo((1-.5*a)*b,a*c),e.bb(!1),b=e.s,b.G=new H(d/4+.5*a,a),b.H=new H(3*d/4+.5*a,a+.5*d),t.v(e),b},OffPageConnector:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(.75*b,0),a.lineTo(1*b,.5*c),a.lineTo(.75*b,1*c),a.lineTo(0,1*c),L(a),b=a.s,b.G=Eb,b.H=new H(.75,1),t.v(a),b},Or:function(a,b,c){a=t.u();var d=.5*F.va;return I(a,1*b,.5*c,!0),J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),J(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),J(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),J(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),I(a,1*b,.5*c,!1),a.lineTo(0,.5*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,0),a.bb(!1),b=a.s,b.Hc=Xg,t.v(a),b},PaperTape:function(a,b,c){return c/=.8,a=t.u(),I(a,0,.7*c,!0),a.lineTo(0,.3*c),J(a,.5*b,.6*c,.5*b,0,1*b,.3),a.lineTo(1*b,.7*c),J(a,.5*b,.4*c,.5*b,1*c,0,.7*c),L(a),b=a.s,b.G=new H(0,.49),b.H=new H(1,.75),t.v(a),b},PrimitiveFromCall:function(a,b,c){var d=a?a.Gc:0;a=a?a.Ft:0,0===d&&(d=.1),0===a&&(a=.3);var e=t.u();return I(e,0,0,!0),e.lineTo(1*b,0),e.lineTo((1-a)*b,.5*c),e.lineTo(1*b,1*c),e.lineTo(0,1*c),L(e),b=e.s,b.G=new H(d,0),b.H=new H(1-a,1),t.v(e),b},PrimitiveToCall:function(a,b,c){var d=a?a.Gc:0;a=a?a.Ft:0,0===d&&(d=.1),0===a&&(a=.3);var e=t.u();return I(e,0,0,!0),e.lineTo((1-a)*b,0),e.lineTo(1*b,.5*c),e.lineTo((1-a)*b,1*c),e.lineTo(0,1*c),L(e),b=e.s,b.G=new H(d,0),b.H=new H(1-a,1),t.v(e),b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.1);var d=t.u();return I(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),L(d),I(d,(1-a)*b,0,!1),d.lineTo((1-a)*b,1*c),d.moveTo(a*b,0),d.lineTo(a*b,1*c),d.bb(!1),b=d.s,b.G=new H(a,0),b.H=new H(1-a,1),t.v(d),b},Process:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.1);var d=t.u();return I(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(0,1*c),L(d),I(d,a*b,0,!1),d.lineTo(a*b,1*c),d.bb(!1),b=d.s,b.G=new H(a,0),b.H=Pb,t.v(d),b},Sort:function(a,b,c){return a=t.u(),I(a,.5*b,0,!0),a.lineTo(1*b,.5*c),a.lineTo(.5*b,1*c),a.lineTo(0,.5*c),L(a),I(a,0,.5*c,!1),a.lineTo(1*b,.5*c),a.bb(!1),b=a.s,b.G=new H(.25,.25),b.H=new H(.75,.5),t.v(a),b},Start:function(a,b,c){return a=t.u(),I(a,.25*b,0,!0),I(a,.25*b,0,!0),a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c),a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c),I(a,.25*b,0,!1),a.lineTo(.25*b,1*c),a.moveTo(.75*b,0),a.lineTo(.75*b,1*c),a.bb(!1),b=a.s,b.G=new H(.25,0),b.H=new H(.75,1),t.v(a),b},Terminator:function(a,b,c){return a=t.u(),I(a,.25*b,0,!0),a.arcTo(270,180,.75*b,.5*c,.25*b,.5*c),a.arcTo(90,180,.25*b,.5*c,.25*b,.5*c),b=a.s,b.G=new H(.23,0),b.H=new H(.77,1),t.v(a),b},TransmittalTape:function(a,b,c){a=a?a.Gc:0,0===a&&(a=.1);var d=t.u();return I(d,0,0,!0),d.lineTo(1*b,0),d.lineTo(1*b,1*c),d.lineTo(.75*b,(1-a)*c),d.lineTo(0,(1-a)*c),L(d),b=d.s,b.G=Eb,b.H=new H(1,1-a),t.v(d),b},AndGate:function(a,b,c){a=t.u();var d=.5*F.va;return I(a,0,0,!0),a.lineTo(.5*b,0),J(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),a.lineTo(0,1*c),L(a),b=a.s,b.G=Eb,b.H=new H(.55,1),t.v(a),b},Buffer:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(1*b,.5*c),a.lineTo(0,1*c),L(a),b=a.s,b.G=new H(0,.25),b.H=new H(.5,.75),t.v(a),b},Clock:function(a,b,c){a=t.u();var d=.5*F.va;return I(a,1*b,.5*c,!0),J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),J(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),J(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),J(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),I(a,1*b,.5*c,!1),a.lineTo(1*b,.5*c),I(a,.8*b,.75*c,!1),a.lineTo(.8*b,.25*c),a.lineTo(.6*b,.25*c),a.lineTo(.6*b,.75*c),a.lineTo(.4*b,.75*c),a.lineTo(.4*b,.25*c),a.lineTo(.2*b,.25*c),a.lineTo(.2*b,.75*c),a.bb(!1),b=a.s,b.Hc=Xg,t.v(a),b},Ground:function(a,b,c){return a=t.u(),I(a,.5*b,0,!1),a.lineTo(.5*b,.4*c),a.moveTo(.2*b,.6*c),a.lineTo(.8*b,.6*c),a.moveTo(.3*b,.8*c),a.lineTo(.7*b,.8*c),a.moveTo(.4*b,1*c),a.lineTo(.6*b,1*c),b=a.s,t.v(a),b},Inverter:function(a,b,c){a=t.u();var d=.1*F.va;return I(a,.8*b,.5*c,!0),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.8*b,.5*c),I(a,1*b,.5*c,!0),J(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c),J(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c),J(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c),J(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new H(0,.25),b.H=new H(.4,.75),t.v(a),b},NandGate:function(a,b,c){a=t.u();var d=F.va,e=.5*d,f=.4*d,d=.1*d;return I(a,.8*b,.5*c,!0),J(a,.8*b,(.5+f)*c,(.4+e)*b,1*c,.4*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(.4*b,0),J(a,(.4+e)*b,0,.8*b,(.5-f)*c,.8*b,.5*c),I(a,1*b,.5*c,!0),J(a,1*b,(.5+d)*c,(.9+d)*b,.6*c,.9*b,.6*c),J(a,(.9-d)*b,.6*c,.8*b,(.5+d)*c,.8*b,.5*c),J(a,.8*b,(.5-d)*c,(.9-d)*b,.4*c,.9*b,.4*c),J(a,(.9+d)*b,.4*c,1*b,(.5-d)*c,1*b,.5*c),b=a.s,b.G=new H(0,.05),b.H=new H(.55,.95),t.v(a),b},NorGate:function(a,b,c){a=t.u();var d=F.va,e=.5,f=d*e,g=0,h=.5;return I(a,.8*b,.5*c,!0),J(a,.7*b,(h+f)*c,(g+f)*b,(h+e)*c,0,1*c),J(a,.25*b,.75*c,.25*b,.25*c,0,0),J(a,(g+f)*b,(h-e)*c,.7*b,(h-f)*c,.8*b,.5*c),e=.1,f=.1*d,g=.9,h=.5,I(a,(g-e)*b,h*c,!0),J(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c),J(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c),J(a,(g+e)*b,(h+f)*c,(g+f)*b,(h+e)*c,g*b,(h+e)*c),J(a,(g-f)*b,(h+e)*c,(g-e)*b,(h+f)*c,(g-e)*b,h*c),b=a.s,b.G=new H(.2,.25),b.H=new H(.6,.75),t.v(a),b},OrGate:function(a,b,c){a=t.u();var d=.5*F.va;return I(a,0,0,!0),J(a,(0+d+d)*b,0*c,.8*b,(.5-d)*c,1*b,.5*c),J(a,.8*b,(.5+d)*c,(0+d+d)*b,1*c,0,1*c),J(a,.25*b,.75*c,.25*b,.25*c,0,0),L(a),b=a.s,b.G=new H(.2,.25),b.H=new H(.75,.75),t.v(a),b},XnorGate:function(a,b,c){a=t.u();var d=F.va,e=.5,f=d*e,g=.2,h=.5;return I(a,.1*b,0,!1),J(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c),I(a,.8*b,.5*c,!0),J(a,.7*b,(h+f)*c,(g+f)*b,(h+e)*c,.2*b,1*c),J(a,.45*b,.75*c,.45*b,.25*c,.2*b,0),J(a,(g+f)*b,(h-e)*c,.7*b,(h-f)*c,.8*b,.5*c),e=.1,f=.1*d,g=.9,h=.5,I(a,(g-e)*b,h*c,!0),J(a,(g-e)*b,(h-f)*c,(g-f)*b,(h-e)*c,g*b,(h-e)*c),J(a,(g+f)*b,(h-e)*c,(g+e)*b,(h-f)*c,(g+e)*b,h*c),J(a,(g+e)*b,(h+f)*c,(g+f)*b,(h+e)*c,g*b,(h+e)*c),J(a,(g-f)*b,(h+e)*c,(g-e)*b,(h+f)*c,(g-e)*b,h*c),b=a.s,b.G=new H(.4,.25),b.H=new H(.65,.75),t.v(a),b},XorGate:function(a,b,c){a=t.u();var d=.5*F.va;return I(a,.1*b,0,!1),J(a,.35*b,.25*c,.35*b,.75*c,.1*b,1*c),I(a,.2*b,0,!0),J(a,(.2+d)*b,0*c,.9*b,(.5-d)*c,1*b,.5*c),J(a,.9*b,(.5+d)*c,(.2+d)*b,1*c,.2*b,1*c),J(a,.45*b,.75*c,.45*b,.25*c,.2*b,0),L(a),b=a.s,b.G=new H(.4,.25),b.H=new H(.8,.75),t.v(a),b},Capacitor:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(0,1*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},Resistor:function(a,b,c){return a=t.u(),I(a,0,.5*c,!1),a.lineTo(.1*b,0),a.lineTo(.2*b,1*c),a.lineTo(.3*b,0),a.lineTo(.4*b,1*c),a.lineTo(.5*b,0),a.lineTo(.6*b,1*c),a.lineTo(.7*b,.5*c),b=a.s,t.v(a),b},Inductor:function(a,b,c){a=t.u();var d=.1*F.va,e=.1;return I(a,(e-.5*d)*b,c,!1),J(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0),e=.3,J(a,(e+.1)*b,0,(e+d)*b,c,e*b,c),J(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0),e=.5,J(a,(e+.1)*b,0,(e+d)*b,c,e*b,c),J(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0),e=.7,J(a,(e+.1)*b,0,(e+d)*b,c,e*b,c),J(a,(e-d)*b,c,(e-.1)*b,0,(e+.1)*b,0),e=.9,J(a,(e+.1)*b,0,(e+d)*b,c,(e+.5*d)*b,c),b=a.s,t.v(a),b},ACvoltageSource:function(a,b,c){a=t.u();var d=.5*F.va;return I(a,0*b,.5*c,!1),J(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c),J(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c),J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),J(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c),a.moveTo(.1*b,.5*c),J(a,.5*b,0*c,.5*b,1*c,.9*b,.5*c),b=a.s,b.Hc=Xg,t.v(a),b},DCvoltageSource:function(a,b,c){return a=t.u(),I(a,0,.75*c,!1),a.lineTo(0,.25*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},Diode:function(a,b,c){return a=t.u(),I(a,1*b,0,!1),a.lineTo(1*b,.5*c),a.lineTo(0,1*c),a.lineTo(0,0),a.lineTo(1*b,.5*c),a.lineTo(1*b,1*c),b=a.s,b.G=new H(0,.25),b.H=new H(.5,.75),t.v(a),b},Wifi:function(a,b,c){var d=b,e=c;b*=.38,c*=.6,a=t.u();var f=F.va,g=.8*f,h=.8,i=0,j=.5,d=(d-b)/2,e=(e-c)/2;return I(a,i*b+d,(j+h)*c+e,!0),J(a,(i-g)*b+d,(j+h)*c+e,(i-h)*b+d,(j+g)*c+e,(i-h)*b+d,j*c+e),J(a,(i-h)*b+d,(j-g)*c+e,(i-g)*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),J(a,i*b+d,(j-h)*c+e,(i-h+.5*g)*b+d,(j-g)*c+e,(i-h+.5*g)*b+d,j*c+e),J(a,(i-h+.5*g)*b+d,(j+g)*c+e,i*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),L(a),g=.4*f,h=.4,i=.2,j=.5,I(a,i*b+d,(j+h)*c+e,!0),J(a,(i-g)*b+d,(j+h)*c+e,(i-h)*b+d,(j+g)*c+e,(i-h)*b+d,j*c+e),J(a,(i-h)*b+d,(j-g)*c+e,(i-g)*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),J(a,i*b+d,(j-h)*c+e,(i-h+.5*g)*b+d,(j-g)*c+e,(i-h+.5*g)*b+d,j*c+e),J(a,(i-h+.5*g)*b+d,(j+g)*c+e,i*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),L(a),g=.2*f,h=.2,j=i=.5,I(a,(i-h)*b+d,j*c+e,!0),J(a,(i-h)*b+d,(j-g)*c+e,(i-g)*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),J(a,(i+g)*b+d,(j-h)*c+e,(i+h)*b+d,(j-g)*c+e,(i+h)*b+d,j*c+e),J(a,(i+h)*b+d,(j+g)*c+e,(i+g)*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),J(a,(i-g)*b+d,(j+h)*c+e,(i-h)*b+d,(j+g)*c+e,(i-h)*b+d,j*c+e),g=.4*f,h=.4,i=.8,j=.5,I(a,i*b+d,(j-h)*c+e,!0),J(a,(i+g)*b+d,(j-h)*c+e,(i+h)*b+d,(j-g)*c+e,(i+h)*b+d,j*c+e),J(a,(i+h)*b+d,(j+g)*c+e,(i+g)*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),J(a,i*b+d,(j+h)*c+e,(i+h-.5*g)*b+d,(j+g)*c+e,(i+h-.5*g)*b+d,j*c+e),J(a,(i+h-.5*g)*b+d,(j-g)*c+e,i*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),L(a),g=.8*f,h=.8,i=1,j=.5,I(a,i*b+d,(j-h)*c+e,!0),J(a,(i+g)*b+d,(j-h)*c+e,(i+h)*b+d,(j-g)*c+e,(i+h)*b+d,j*c+e),J(a,(i+h)*b+d,(j+g)*c+e,(i+g)*b+d,(j+h)*c+e,i*b+d,(j+h)*c+e),J(a,i*b+d,(j+h)*c+e,(i+h-.5*g)*b+d,(j+g)*c+e,(i+h-.5*g)*b+d,j*c+e),J(a,(i+h-.5*g)*b+d,(j-g)*c+e,i*b+d,(j-h)*c+e,i*b+d,(j-h)*c+e),L(a),b=a.s,t.v(a),b},Email:function(a,b,c){return a=t.u(),I(a,0,0,!0),a.lineTo(1*b,0),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,0),L(a),I(a,0,0,!1),a.lineTo(.5*b,.6*c),a.lineTo(1*b,0),a.moveTo(0,1*c),a.lineTo(.45*b,.54*c),a.moveTo(1*b,1*c),a.lineTo(.55*b,.54*c),a.bb(!1),b=a.s,t.v(a),b},Ethernet:function(a,b,c){return a=t.u(),I(a,.35*b,0,!0),a.lineTo(.65*b,0),a.lineTo(.65*b,.4*c),a.lineTo(.35*b,.4*c),a.lineTo(.35*b,0),L(a),I(a,.1*b,1*c,!0,!0),a.lineTo(.4*b,1*c),a.lineTo(.4*b,.6*c),a.lineTo(.1*b,.6*c),a.lineTo(.1*b,1*c),L(a),I(a,.6*b,1*c,!0,!0),a.lineTo(.9*b,1*c),a.lineTo(.9*b,.6*c),a.lineTo(.6*b,.6*c),a.lineTo(.6*b,1*c),L(a),I(a,0,.5*c,!1),a.lineTo(1*b,.5*c),a.moveTo(.5*b,.5*c),a.lineTo(.5*b,.4*c),a.moveTo(.75*b,.5*c),a.lineTo(.75*b,.6*c),a.moveTo(.25*b,.5*c),a.lineTo(.25*b,.6*c),a.bb(!1),b=a.s,t.v(a),b},Power:function(a,b,c){a=t.u();var d=F.va,e=.4*d,f=.4,g=t.K(),h=t.K(),i=t.K(),j=t.K();F.Vi(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,h,i,j);var k=t.mc(h.x,h.y);return I(a,h.x*b,h.y*c,!0),J(a,i.x*b,i.y*c,j.x*b,j.y*c,(.5+f)*b,.5*c),J(a,(.5+f)*b,(.5+e)*c,(.5+e)*b,(.5+f)*c,.5*b,(.5+f)*c),J(a,(.5-e)*b,(.5+f)*c,(.5-f)*b,(.5+e)*c,(.5-f)*b,.5*c),F.Vi(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,i,j,h,g,g),J(a,i.x*b,i.y*c,j.x*b,j.y*c,h.x*b,h.y*c),e=.3*d,f=.3,F.Vi(.5-f,.5,.5-f,.5-e,.5-e,.5-f,.5,.5-f,.5,i,j,h,g,g),a.lineTo(h.x*b,h.y*c),J(a,j.x*b,j.y*c,i.x*b,i.y*c,(.5-f)*b,.5*c),J(a,(.5-f)*b,(.5+e)*c,(.5-e)*b,(.5+f)*c,.5*b,(.5+f)*c),J(a,(.5+e)*b,(.5+f)*c,(.5+f)*b,(.5+e)*c,(.5+f)*b,.5*c),F.Vi(.5,.5-f,.5+e,.5-f,.5+f,.5-e,.5+f,.5,.5,g,g,h,i,j),J(a,j.x*b,j.y*c,i.x*b,i.y*c,h.x*b,h.y*c),L(a),I(a,.45*b,0,!0),a.lineTo(.45*b,.5*c),a.lineTo(.55*b,.5*c),a.lineTo(.55*b,0),L(a),t.B(g),t.B(h),t.B(i),t.B(j),t.B(k),b=a.s,b.G=new H(.25,.55),b.H=new H(.75,.8),t.v(a),b},Fallout:function(a,b,c){a=t.u();var d=.5*F.va;I(a,0*b,.5*c,!0),J(a,0*b,(.5-d)*c,(.5-d)*b,0*c,.5*b,0*c),J(a,(.5+d)*b,0*c,1*b,(.5-d)*c,1*b,.5*c),J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),J(a,(.5-d)*b,1*c,0*b,(.5+d)*c,0*b,.5*c);var e=d=0;return I(a,(.3+d)*b,(.8+e)*c,!0,!0),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),d=.4,e=0,L(a),I(a,(.3+d)*b,(.8+e)*c,!0,!0),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),d=.2,e=-.3,L(a),I(a,(.3+d)*b,(.8+e)*c,!0,!0),a.lineTo((.5+d)*b,(.5+e)*c),a.lineTo((.1+d)*b,(.5+e)*c),a.lineTo((.3+d)*b,(.8+e)*c),L(a),b=a.s,b.Hc=Xg,t.v(a),b},IrritationHazard:function(a,b,c){return a=t.u(),I(a,.2*b,0*c,!0),a.lineTo(.5*b,.3*c),a.lineTo(.8*b,0*c),a.lineTo(1*b,.2*c),a.lineTo(.7*b,.5*c),a.lineTo(1*b,.8*c),a.lineTo(.8*b,1*c),a.lineTo(.5*b,.7*c),a.lineTo(.2*b,1*c),a.lineTo(0*b,.8*c),a.lineTo(.3*b,.5*c),a.lineTo(0*b,.2*c),L(a),b=a.s,b.G=new H(.3,.3),b.H=new H(.7,.7),t.v(a),b},ElectricalHazard:function(a,b,c){return a=t.u(),I(a,.37,0*c,!0),a.lineTo(.5*b,.11*c),a.lineTo(.77*b,.04*c),a.lineTo(.33*b,.49*c),a.lineTo(1*b,.37*c),a.lineTo(.63*b,.86*c),a.lineTo(.77*b,.91*c),a.lineTo(.34*b,1*c),a.lineTo(.34*b,.78*c),a.lineTo(.44*b,.8*c),a.lineTo(.65*b,.56*c),a.lineTo(0*b,.68*c),L(a),b=a.s,t.v(a),b},FireHazard:function(a,b,c){return a=t.u(),I(a,.1*b,1*c,!0),J(a,-.25*b,.63*c,.45*b,.44*c,.29*b,0*c),J(a,.48*b,.17*c,.54*b,.35*c,.51*b,.42*c),J(a,.59*b,.29*c,.58*b,.28*c,.59*b,.18*c),J(a,.8*b,.34*c,.88*b,.43*c,.75*b,.6*c),J(a,.87*b,.48*c,.88*b,.43*c,.88*b,.31*c),J(a,1.17*b,.76*c,.82*b,.8*c,.9*b,1*c),L(a),b=a.s,b.G=new H(.05,.645),b.H=new H(.884,.908),t.v(a),b},BpmnActivityLoop:function(a,b,c){a=t.u();var d=4*(Math.SQRT2-1)/3*.5;return I(a,(.5*Math.SQRT2/2+.5)*b,(1-(.5-.5*Math.SQRT2/2))*c,!1),J(a,1*b,.7*c,1*b,.5*c,1*b,.5*c),J(a,1*b,(.5-d+0)*c,(.5+d+0)*b,0*c,.5*b,0*c),J(a,(.5-d+0)*b,0*c,0*b,(.5-d+0)*c,0*b,.5*c),J(a,0*b,(.5+d+0)*c,(.5-d+0)*b,1*c,.35*b,.98*c),a.moveTo(.35*b,.8*c),a.lineTo(.35*b,1*c),a.lineTo(.15*b,1*c),b=a.s,t.v(a),b},BpmnActivityParallel:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(0,1*c),a.moveTo(.5*b,0),a.lineTo(.5*b,1*c),a.moveTo(1*b,0),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},BpmnActivitySequential:function(a,b,c){return a=t.u(),I(a,0,0,!1),a.lineTo(1*b,0),a.moveTo(0,.5*c),a.lineTo(1*b,.5*c),a.moveTo(0,1*c),a.lineTo(1*b,1*c),b=a.s,t.v(a),b},BpmnActivityAdHoc:function(a,b,c){return a=t.u(),I(a,0,0,!1),I(a,1*b,1*c,!1),I(a,0,.5*c,!1),J(a,.2*b,.35*c,.3*b,.35*c,.5*b,.5*c),J(a,.7*b,.65*c,.8*b,.65*c,1*b,.5*c),b=a.s,t.v(a),b},BpmnActivityCompensation:function(a,b,c){return a=t.u(),I(a,0,.5*c,!0),a.lineTo(.5*b,0),a.lineTo(.5*b,.5*c),a.lineTo(1*b,1*c),a.lineTo(1*b,0),a.lineTo(.5*b,.5*c),a.lineTo(.5*b,1*c),L(a),b=a.s,t.v(a),b},BpmnTaskMessage:function(a,b,c){return a=t.u(),I(a,0,.2*c,!0),a.lineTo(1*b,.2*c),a.lineTo(1*b,.8*c),a.lineTo(0,.8*c),a.lineTo(0,.8*c),L(a),I(a,0,.2*c,!1),a.lineTo(.5*b,.5*c),a.lineTo(1*b,.2*c),a.bb(!1),b=a.s,t.v(a),b},BpmnTaskScript:function(a,b,c){return a=t.u(),I(a,.7*b,1*c,!0),a.lineTo(.3*b,1*c),J(a,.6*b,.5*c,0,.5*c,.3*b,0),a.lineTo(.7*b,0),J(a,.4*b,.5*c,1*b,.5*c,.7*b,1*c),L(a),I(a,.45*b,.73*c,!1),a.lineTo(.7*b,.73*c),a.moveTo(.38*b,.5*c),a.lineTo(.63*b,.5*c),a.moveTo(.31*b,.27*c),a.lineTo(.56*b,.27*c),a.bb(!1),b=a.s,t.v(a),b},BpmnTaskUser:function(a,b,c){a=t.u(),I(a,0,0,!1),I(a,.335*b,(1-.555)*c,!0),a.lineTo(.335*b,.595*c),a.lineTo(.665*b,.595*c),a.lineTo(.665*b,(1-.555)*c),J(a,.88*b,.46*c,.98*b,.54*c,1*b,.68*c),a.lineTo(1*b,1*c),a.lineTo(0,1*c),a.lineTo(0,.68*c),J(a,.02*b,.54*c,.12*b,.46*c,.335*b,(1-.555)*c),a.lineTo(.365*b,.405*c);var d=.5-.285,e=Math.PI/4,f=4*(1-Math.cos(e))/(3*Math.sin(e)),e=f*d,f=f*d;return J(a,(.5-(e+d)/2)*b,(d+(d+f)/2)*c,(.5-d)*b,(d+f)*c,(.5-d)*b,d*c),J(a,(.5-d)*b,(d-f)*c,(.5-e)*b,(d-d)*c,.5*b,(d-d)*c),J(a,(.5+e)*b,(d-d)*c,(.5+d)*b,(d-f)*c,(.5+d)*b,d*c),J(a,(.5+d)*b,(d+f)*c,(.5+(e+d)/2)*b,(d+(d+f)/2)*c,.635*b,.405*c),a.lineTo(.635*b,.405*c),a.lineTo(.665*b,(1-.555)*c),a.lineTo(.665*b,.595*c),a.lineTo(.335*b,.595*c),I(a,.2*b,1*c,!1),a.lineTo(.2*b,.8*c),I(a,.8*b,1*c,!1),a.lineTo(.8*b,.8*c),b=a.s,t.v(a),b},BpmnEventConditional:function(a,b,c){return a=t.u(),I(a,.1*b,0,!0),a.lineTo(.9*b,0),a.lineTo(.9*b,1*c),a.lineTo(.1*b,1*c),L(a),I(a,.2*b,.2*c,!1),a.lineTo(.8*b,.2*c),a.moveTo(.2*b,.4*c),a.lineTo(.8*b,.4*c),a.moveTo(.2*b,.6*c),a.lineTo(.8*b,.6*c),a.moveTo(.2*b,.8*c),a.lineTo(.8*b,.8*c),a.bb(!1),b=a.s,t.v(a),b},BpmnEventError:function(a,b,c){return a=t.u(),I(a,0,1*c,!0),a.lineTo(.33*b,0),a.lineTo(.66*b,.5*c),a.lineTo(1*b,0),a.lineTo(.66*b,1*c),a.lineTo(.33*b,.5*c),L(a),b=a.s,t.v(a),b},BpmnEventEscalation:function(a,b,c){return a=t.u(),I(a,0,0,!1),I(a,1*b,1*c,!1),I(a,.1*b,1*c,!0),a.lineTo(.5*b,0),a.lineTo(.9*b,1*c),a.lineTo(.5*b,.5*c),L(a),b=a.s,t.v(a),b},BpmnEventTimer:function(a,b,c){a=t.u();var d=.5*F.va;return I(a,1*b,.5*c,!0),J(a,1*b,(.5+d)*c,(.5+d)*b,1*c,.5*b,1*c),J(a,(.5-d)*b,1*c,0,(.5+d)*c,0,.5*c),J(a,0,(.5-d)*c,(.5-d)*b,0,.5*b,0),J(a,(.5+d)*b,0,1*b,(.5-d)*c,1*b,.5*c),I(a,.5*b,0,!1),a.lineTo(.5*b,.15*c),a.moveTo(.5*b,1*c),a.lineTo(.5*b,.85*c),a.moveTo(0,.5*c),a.lineTo(.15*b,.5*c),a.moveTo(1*b,.5*c),a.lineTo(.85*b,.5*c),a.moveTo(.5*b,.5*c),a.lineTo(.58*b,.1*c),a.moveTo(.5*b,.5*c),a.lineTo(.78*b,.54*c),a.bb(!1),b=a.s,b.Hc=Xg,t.v(a),b}},F.MA={};for(var wm in F.bj)F.bj[wm.toLowerCase()]=wm;F.gw={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"},F.Dm={},F.QJ=function(){if(F.gw){for(var a in F.gw){var b=Rc(F.gw[a],!1);F.Dm[a]=b,a.toLowerCase()!==a&&(F.Dm[a.toLowerCase()]=a)}F.gw=void 0}},F.RD=function(a){F.QJ();var b=F.Dm[a];if(void 0===b){if(b=a.toLowerCase(),"none"===b)return"None";b=F.Dm[b]}return"string"==typeof b?b:b instanceof zc?a:null},V.FigureGenerators=F.bj,V.ArrowheadGeometries=F.Dm,t.ga("Part",C),t.Ka(C,y),C.prototype.cloneProtected=function(a){y.prototype.cloneProtected.call(this,a),a.W=-4097&this.W|49152,a.rh=this.rh,a.Kk=this.Kk,a.jr=this.jr,a.is=this.is,a.Wr=this.Wr,a.Zr=this.Zr,a.ks=this.ks,a.js=this.js,a.ki=null,
a.Yr=this.Yr,a.Xr.assign(this.Xr),a.$r=this.$r,a.le=this.le,a.xq=this.xq,a.Yg.assign(this.Yg),a.qr=this.qr,a.rr=this.rr.Z(),a.Ar=this.Ar.Z(),a.tr=this.tr.Z(),a.Hq=this.Hq,a.kr=this.kr,a.wm.assign(this.wm),a.vm=this.vm,a.um=this.um},C.prototype.Yh=function(a){y.prototype.Yh.call(this,a),wk(a),a.tm=null,a.vo=null,a.wo=null,a.Nk=null,a.Fj=null},C.prototype.toString=function(){var a=t.xg(Object.getPrototypeOf(this))+"#"+t.od(this);return this.data&&(a+="("+yd(this.data)+")"),a},C.LayoutNone=0;var aj;C.LayoutAdded=aj=1;var gj;C.LayoutRemoved=gj=2,C.LayoutShown=4,C.LayoutHidden=8,C.LayoutNodeSized=16;var Pj;C.LayoutGroupLayout=Pj=32,C.LayoutNodeReplaced=64;var xm;C.LayoutStandard=xm=aj|gj|28|Pj|64,C.prototype.gn=function(a,b,c,d,e,f,g){var h=this.h;null!==h&&(a===wd&&"elements"===b?e instanceof y&&bj(e,function(a){cj(h,a)}):a===xd&&"elements"===b&&e instanceof y&&bj(e,function(a){fj(h,a)}),h.Ic(a,b,c,d,e,f,g))},C.prototype.updateTargetBindings=C.prototype.Kb=function(a){if(y.prototype.Kb.call(this,a),null!==this.data){a=this.xa.n;for(var b=a.length,c=0;b>c;c++){var d=a[c];d instanceof y&&bj(d,function(a){null!==a.data&&a.Kb()})}}},C.prototype.updateModelDataReferences=function(){var a=this.data;if(null!==a&&!(this instanceof Je)){var b=this.h;if(null!==b){var c=b.ba;if(c instanceof M){var d=c.Sm(a),b=b.FI(d),e=this.hb;b!==e&&(b=null!==e?c.Hb(e.data):void 0,e=c.en,"function"==typeof e?e(a,b):a[e]=b,c.vx(a,d))}}}},t.A(C,{cw:"adornments"},function(){return null===this.ki?t.ag:this.ki.jF}),C.prototype.findAdornment=C.prototype.bp=function(a){e&&t.i(a,"string",C,"findAdornment:category");var b=this.ki;return null===b?null:b.za(a)},C.prototype.addAdornment=C.prototype.Wk=function(a,b){if(null!==b){e&&(t.i(a,"string",C,"addAdornment:category"),t.l(b,Je,C,"addAdornment:ad"));var c=null,d=this.ki;if(null!==d&&(c=d.za(a)),c!==b){if(null!==c){var f=c.h;null!==f&&f.remove(c)}null===d&&(this.ki=d=new ia("string",Je)),b.rh!==a&&(b.Zc=a),d.add(a,b),c=this.h,null!==c&&(c.add(b),b.data=this.data)}}},C.prototype.removeAdornment=C.prototype.vl=function(a){e&&t.i(a,"string",C,"removeAdornment:category");var b=this.ki;if(null!==b){var c=b.za(a);if(null!==c){var d=c.h;null!==d&&d.remove(c)}b.remove(a),0===b.count&&(this.ki=null)}},C.prototype.clearAdornments=C.prototype.Wi=function(){var a=this.ki;if(null!==a){for(var b=t.Db(),a=a.k;a.next();)b.push(a.key);for(var a=b.length,c=0;a>c;c++)this.vl(b[c]);t.ya(b)}},C.prototype.updateAdornments=function(){var a=this.h;if(null!==a){ym(this,a);for(var a=a.wb.ef.n,b=a.length,c=0;b>c;c++){var d=a[c];d.isEnabled&&d.updateAdornments(this)}for(a=this.cw;a.next();)b=a.value,b.Kb(),b.ha()}},t.A(C,{layer:"layer"},function(){return this.lo}),t.A(C,{h:"diagram"},function(){var a=this.lo;return null!==a?a.h:null}),t.g(C,"layerName",C.prototype.af),t.defineProperty(C,{af:"layerName"},function(){return this.Kk},function(a){var b=this.Kk;if(b!==a){t.i(a,"string",C,"layerName");var c=this.h;if((null===c||null!==c.ct(a)&&!c.un)&&(this.Kk=a,this.j("layerName",b,a),b=this.layer,null!==b&&b.name!==a&&(c=b.h,null!==c&&(a=c.ct(a),null!==a&&a!==b)))){var d=b.Xe(-1,this,!0);if(d>=0&&c.Ic(xd,"parts",b,this,null,d,!0),d=a.np(99999999,this,!0),d>=0&&c.Ic(wd,"parts",a,null,this,!0,d),d=this.tp,null!==d){var e=c.Na;c.Na=!0,d(this,b,a),c.Na=e}}}}),t.g(C,"layerChanged",C.prototype.tp),t.defineProperty(C,{tp:"layerChanged"},function(){return this.jr},function(a){var b=this.jr;b!==a&&(null!==a&&t.i(a,"function",C,"layerChanged"),this.jr=a,this.j("layerChanged",b,a))}),t.A(C,{rc:"isTemporary"},function(){return null!==this.lo?this.lo.rc:!1}),t.g(C,"location",C.prototype.location),t.defineProperty(C,{location:"location"},function(){return this.Yg},function(a){var b=this.Yg;if(!(b.M(a)||this instanceof T)){e&&t.l(a,w,C,"location"),a=a.Z();var c=this.h;if(this.Yg=a,!1===Ri(this)){var d=this.Ra,f=a.x-b.x,g=a.y-b.y,h=d.copy();d.p(h.x+f,h.y+g),Rk(this,!0),!d.M(h)&&c&&this.j("position",h,d)}this.j("location",b,a)}}),t.A(C,{kc:"locationObject"},function(){if(null===this.Nk){var a=this.ax;void 0!==a&&null!==a&&""!==a?(a=this.oe(a),this.Nk=null!==a?a:this):this.Nk=this instanceof Je&&this.da!==wg&&null!==this.Jb?this.Jb:this}return this.Nk.visible?this.Nk:this}),t.g(C,"minLocation",C.prototype.zF),t.defineProperty(C,{zF:"minLocation"},function(){return this.Ar},function(a){var b=this.Ar;b.M(a)||(e&&t.l(a,w,C,"minLocation"),this.Ar=a=a.Z(),this.j("minLocation",b,a))}),t.g(C,"maxLocation",C.prototype.tF),t.defineProperty(C,{tF:"maxLocation"},function(){return this.tr},function(a){var b=this.tr;b.M(a)||(e&&t.l(a,w,C,"maxLocation"),this.tr=a=a.Z(),this.j("maxLocation",b,a))}),t.g(C,"locationObjectName",C.prototype.ax),t.defineProperty(C,{ax:"locationObjectName"},function(){return this.qr},function(a){var b=this.qr;b!==a&&(e&&t.i(a,"string",C,"locationObjectName"),this.qr=a,this.Nk=null,Jk(this),this.j("locationObjectName",b,a))}),t.g(C,"locationSpot",C.prototype.bf),t.defineProperty(C,{bf:"locationSpot"},function(){return this.rr},function(a){var b=this.rr;b.M(a)||(e&&(t.l(a,H,C,"locationSpot"),a.xd()||t.m("Part.locationSpot must be a specific Spot value, not: "+a)),this.rr=a=a.Z(),Jk(this),this.j("locationSpot",b,a))}),C.prototype.move=C.prototype.move=function(a){this.position=a},C.prototype.moveTo=C.prototype.moveTo=function(a,b){var c=t.mc(a,b);this.move(c),t.B(c)},C.prototype.isVisible=C.prototype.La=function(){if(!this.visible)return!1;var a=this.layer;if(null!==a&&!a.visible)return!1;if(a=this.hb,!(null===a||a.Yd&&a.La()))return!1;if(this instanceof R){if(a=this.dA(),null!==a&&!a.Qc)return!1;if(a=this.$d,null!==a)return a.La()}else if(this instanceof T){var b=!0,c=this.h;if(null!==c&&(b=c.pd),c=this.aa,null!==c){if(this.Ec&&b&&!c.Qc)return!1;if(c=c.findVisibleNode(),null===c||c===a)return!1}if(c=this.ca,null!==c){if(this.Ec&&!b&&!c.Qc)return!1;if(b=c.findVisibleNode(),null===b||b===a)return!1}}return!0},C.prototype.df=function(a){a?(this.J(4),ij(this),a=this.h,null!==a&&a.fg.add(this)):(this.J(8),this.Wi()),this.fa()},C.prototype.findObject=C.prototype.oe=function(a){if(this.name===a)return this;null===this.Fj&&(this.Fj={});var b=this.Fj;if(void 0!==b[a])return b[a];for(var c=this.xa.n,d=c.length,e=0;d>e;e++){var f=c[e];if(f.name===a)return b[a]=f;if(f instanceof y)if(null===f.yi&&null===f.hg){if(f=f.oe(a),null!==f)return b[a]=f}else if(Zl(f)&&(f=f.xa.$a(),null!==f&&f.name===a))return b[a]=f}return b[a]=null},C.prototype.ensureBounds=C.prototype.sf=function(){ih(this,1/0,1/0),this.Lc()},aa=C.prototype,aa.Lc=function(){if(sk(this),!1===Ri(this))Am(this);else{var a=t.Gf();a.assign(this.cc),Gk(this),this.cc.Ma();var b=Ph(this);this.Tj(0,0,this.Wc.width,this.Wc.height);var c=this.position;Bm(this,c,this.location);var d=this.cc;d.x=c.x,d.y=c.y,d.freeze(),sk(this),tk(this,a,d),a.M(d)?this.Df(b):!this.Ld()||F.I(a.width,d.width)&&F.I(a.height,d.height)||0<=this.BC&&this.J(16),t.hc(a),zm(this,!1)}},aa.nG=function(a,b){if(!a.N()||this instanceof T)return!1;if(this.h&&!(this instanceof Je)){var c=this.h.li;c.sd&&Gh(c,this,b.copy(),a.copy())}var c=this.Yg,d=c.copy();return!1===Si(this)&&!1===Ri(this)?(c.p(c.x+(a.x-b.x),c.y+(a.y-b.y)),this.Ra=a,Rk(this,!0),sk(this),Am(this),c.M(d)||this.j("location",d,c)):(this.Ra=a,c.p(NaN,NaN)),!0},aa.oG=function(a,b){var c=this.Yg;!1===Si(this)&&!1===Ri(this)?(this.Yg.p(c.x+a-this.Ra.x,c.y+b-this.Ra.y),this.Ra.p(a,b),Rk(this,!1),sk(this)):(c.p(NaN,NaN),this.Ra.p(a,b))},aa.ol=function(){return!0},aa.Ld=function(){return!0},t.g(C,"category",C.prototype.Zc),t.defineProperty(C,{Zc:"category"},function(){return this.rh},function(a){var b=this.rh;if(b!==a){t.i(a,"string",C,"category"),this.rh=a,this.j("category",b,a);var c=this.h,d=this.data;if(null!==c&&null!==d){var e=c.ba;this instanceof T?(e instanceof M?e.lG(d,a):e instanceof Kd&&e.OJ(d,a),c=c.findTemplateForLinkData(d,a),c instanceof T&&(Le(c),c=c.copy(),c instanceof T&&Dm(this,c,b,a))):this instanceof Je||(null!==e&&e.sx(d,a),c=c.findTemplateForNodeData(d,a),c instanceof C&&(Le(c),c=c.copy(),c instanceof C&&!(c instanceof T)&&(c.location=this.location,Dm(this,c,b,a))))}this instanceof Je&&(a=this.Wh,null!==a&&(c=a.ki,null!==c&&c.remove(b),a.Wk(this.rh,this)))}}),C.prototype.canCopy=function(){if(!this.fE)return!1;var a=this.layer;return null===a?!0:a.Si?(a=a.h,null===a?!0:a.Si?!0:!1):!1},C.prototype.canDelete=function(){if(!this.oE)return!1;var a=this.layer;return null===a?!0:a.Zk?(a=a.h,null===a?!0:a.Zk?!0:!1):!1},C.prototype.canEdit=function(){if(!this.zG)return!1;var a=this.layer;return null===a?!0:a.Qo?(a=a.h,null===a?!0:a.Qo?!0:!1):!1},C.prototype.canGroup=function(){if(!this.OE)return!1;var a=this.layer;return null===a?!0:a.Mo?(a=a.h,null===a?!0:a.Mo?!0:!1):!1},C.prototype.canMove=function(){if(!this.CF)return!1;var a=this.layer;return null===a?!0:a.Rj?(a=a.h,null===a?!0:a.Rj?!0:!1):!1},C.prototype.canReshape=function(){if(!this.SF)return!1;var a=this.layer;return null===a?!0:a.No?(a=a.h,null===a?!0:a.No?!0:!1):!1},C.prototype.canResize=function(){if(!this.TF)return!1;var a=this.layer;return null===a?!0:a.Oo?(a=a.h,null===a?!0:a.Oo?!0:!1):!1},C.prototype.canRotate=function(){if(!this.ZF)return!1;var a=this.layer;return null===a?!0:a.Po?(a=a.h,null===a?!0:a.Po?!0:!1):!1},C.prototype.canSelect=function(){if(!this.wl)return!1;var a=this.layer;return null===a?!0:a.Pe?(a=a.h,null===a?!0:a.Pe?!0:!1):!1},t.g(C,"copyable",C.prototype.fE),t.defineProperty(C,{fE:"copyable"},function(){return 0!==(1&this.W)},function(a){var b=0!==(1&this.W);b!==a&&(e&&t.i(a,"boolean",C,"copyable"),this.W^=1,this.j("copyable",b,a))}),t.g(C,"deletable",C.prototype.oE),t.defineProperty(C,{oE:"deletable"},function(){return 0!==(2&this.W)},function(a){var b=0!==(2&this.W);b!==a&&(e&&t.i(a,"boolean",C,"deletable"),this.W^=2,this.j("deletable",b,a))}),t.g(C,"textEditable",C.prototype.zG),t.defineProperty(C,{zG:"textEditable"},function(){return 0!==(4&this.W)},function(a){var b=0!==(4&this.W);b!==a&&(e&&t.i(a,"boolean",C,"textEditable"),this.W^=4,this.j("textEditable",b,a),this.updateAdornments())}),t.g(C,"groupable",C.prototype.OE),t.defineProperty(C,{OE:"groupable"},function(){return 0!==(8&this.W)},function(a){var b=0!==(8&this.W);b!==a&&(e&&t.i(a,"boolean",C,"groupable"),this.W^=8,this.j("groupable",b,a))}),t.g(C,"movable",C.prototype.CF),t.defineProperty(C,{CF:"movable"},function(){return 0!==(16&this.W)},function(a){var b=0!==(16&this.W);b!==a&&(e&&t.i(a,"boolean",C,"movable"),this.W^=16,this.j("movable",b,a))}),t.g(C,"selectionAdorned",C.prototype.hG),t.defineProperty(C,{hG:"selectionAdorned"},function(){return 0!==(32&this.W)},function(a){var b=0!==(32&this.W);b!==a&&(e&&t.i(a,"boolean",C,"selectionAdorned"),this.W^=32,this.j("selectionAdorned",b,a),this.updateAdornments())}),t.g(C,"isInDocumentBounds",C.prototype.Rw),t.defineProperty(C,{Rw:"isInDocumentBounds"},function(){return 0!==(64&this.W)},function(a){var b=0!==(64&this.W);b!==a&&(e&&t.i(a,"boolean",C,"isInDocumentBounds"),this.W^=64,this.j("isInDocumentBounds",b,a))}),t.g(C,"isLayoutPositioned",C.prototype.vA),t.defineProperty(C,{vA:"isLayoutPositioned"},function(){return 0!==(128&this.W)},function(a){var b=0!==(128&this.W);b!==a&&(e&&t.i(a,"boolean",C,"isLayoutPositioned"),this.W^=128,this.j("isLayoutPositioned",b,a),this.J(a?4:8))}),t.g(C,"selectable",C.prototype.wl),t.defineProperty(C,{wl:"selectable"},function(){return 0!==(256&this.W)},function(a){var b=0!==(256&this.W);b!==a&&(e&&t.i(a,"boolean",C,"selectable"),this.W^=256,this.j("selectable",b,a),this.updateAdornments())}),t.g(C,"reshapable",C.prototype.SF),t.defineProperty(C,{SF:"reshapable"},function(){return 0!==(512&this.W)},function(a){var b=0!==(512&this.W);b!==a&&(e&&t.i(a,"boolean",C,"reshapable"),this.W^=512,this.j("reshapable",b,a),this.updateAdornments())}),t.g(C,"resizable",C.prototype.TF),t.defineProperty(C,{TF:"resizable"},function(){return 0!==(1024&this.W)},function(a){var b=0!==(1024&this.W);b!==a&&(e&&t.i(a,"boolean",C,"resizable"),this.W^=1024,this.j("resizable",b,a),this.updateAdornments())}),t.g(C,"rotatable",C.prototype.ZF),t.defineProperty(C,{ZF:"rotatable"},function(){return 0!==(2048&this.W)},function(a){var b=0!==(2048&this.W);b!==a&&(e&&t.i(a,"boolean",C,"rotatable"),this.W^=2048,this.j("rotatable",b,a),this.updateAdornments())}),t.g(C,"isSelected",C.prototype.eb),t.defineProperty(C,{eb:"isSelected"},function(){return 0!==(4096&this.W)},function(a){var b=0!==(4096&this.W);if(b!==a){e&&t.i(a,"boolean",C,"isSelected");var c=this.h;if(!a||this.canSelect()&&!(null!==c&&c.selection.count>=c.uF)){this.W^=4096;var d=!1;if(null!==c){d=c.Wa,c.Wa=!0;var f=c.selection;f.Ma(),a?f.add(this):f.remove(this),f.freeze()}this.j("isSelected",b,a),ij(this),a=this.jG,null!==a&&a(this),null!==c&&(c.te(),c.Wa=d)}}}),t.g(C,"isHighlighted",C.prototype.zg),t.defineProperty(C,{zg:"isHighlighted"},function(){return 0!==(524288&this.W)},function(a){var b=0!==(524288&this.W);if(b!==a){e&&t.i(a,"boolean",C,"isHighlighted"),this.W^=524288;var c=this.h;null!==c&&(c=c.Kw,c.Ma(),a?c.add(this):c.remove(this),c.freeze()),this.j("isHighlighted",b,a),this.fa()}}),t.g(C,"isShadowed",C.prototype.gj),t.defineProperty(C,{gj:"isShadowed"},function(){return 0!==(8192&this.W)},function(a){var b=0!==(8192&this.W);b!==a&&(e&&t.i(a,"boolean",C,"isShadowed"),this.W^=8192,this.j("isShadowed",b,a),this.fa())}),C.prototype.Df=function(a){this.W=a?131072|this.W:-131073&this.W},t.g(C,"isAnimated",C.prototype.oA),t.defineProperty(C,{oA:"isAnimated"},function(){return 0!==(262144&this.W)},function(a){var b=0!==(262144&this.W);b!==a&&(e&&t.i(a,"boolean",C,"isAnimated"),this.W^=262144,this.j("isAnimated",b,a))}),t.g(C,"selectionObjectName",C.prototype.qx),t.defineProperty(C,{qx:"selectionObjectName"},function(){return this.ks},function(a){var b=this.ks;b!==a&&(e&&t.i(a,"string",C,"selectionObjectName"),this.ks=a,this.tm=null,this.j("selectionObjectName",b,a))}),t.g(C,"selectionAdornmentTemplate",C.prototype.iG),t.defineProperty(C,{iG:"selectionAdornmentTemplate"},function(){return this.is},function(a){var b=this.is;b!==a&&(e&&t.l(a,Je,C,"selectionAdornmentTemplate"),this instanceof T&&(a.type=wg),this.is=a,this.j("selectionAdornmentTemplate",b,a))}),t.A(C,{Pt:"selectionObject"},function(){if(null===this.tm){var a=this.qx;null!==a&&""!==a?(a=this.oe(a),this.tm=null!==a?a:this):this instanceof T?(a=this.path,this.tm=null!==a?a:this):this.tm=this}return this.tm}),t.g(C,"selectionChanged",C.prototype.jG),t.defineProperty(C,{jG:"selectionChanged"},function(){return this.js},function(a){var b=this.js;b!==a&&(null!==a&&t.i(a,"function",C,"selectionChanged"),this.js=a,this.j("selectionChanged",b,a))}),t.g(C,"resizeAdornmentTemplate",C.prototype.UF),t.defineProperty(C,{UF:"resizeAdornmentTemplate"},function(){return this.Wr},function(a){var b=this.Wr;b!==a&&(e&&t.l(a,Je,C,"resizeAdornmentTemplate"),this.Wr=a,this.j("resizeAdornmentTemplate",b,a))}),t.g(C,"resizeObjectName",C.prototype.XF),t.defineProperty(C,{XF:"resizeObjectName"},function(){return this.Yr},function(a){var b=this.Yr;b!==a&&(e&&t.i(a,"string",C,"resizeObjectName"),this.Yr=a,this.vo=null,this.j("resizeObjectName",b,a))}),t.A(C,{WF:"resizeObject"},function(){if(null===this.vo){var a=this.XF;null!==a&&""!==a?(a=this.oe(a),this.vo=null!==a?a:this):this.vo=this}return this.vo}),t.g(C,"resizeCellSize",C.prototype.VF),t.defineProperty(C,{VF:"resizeCellSize"},function(){return this.Xr},function(a){var b=this.Xr;b.M(a)||(e&&t.l(a,fa,C,"resizeCellSize"),this.Xr=a=a.Z(),this.j("resizeCellSize",b,a))}),t.g(C,"rotateAdornmentTemplate",C.prototype.$F),t.defineProperty(C,{$F:"rotateAdornmentTemplate"},function(){return this.Zr},function(a){var b=this.Zr;b!==a&&(e&&t.l(a,Je,C,"rotateAdornmentTemplate"),this.Zr=a,this.j("rotateAdornmentTemplate",b,a))}),t.g(C,"rotateObjectName",C.prototype.bG),t.defineProperty(C,{bG:"rotateObjectName"},function(){return this.$r},function(a){var b=this.$r;b!==a&&(e&&t.i(a,"string",C,"rotateObjectName"),this.$r=a,this.wo=null,this.j("rotateObjectName",b,a))}),t.A(C,{aG:"rotateObject"},function(){if(null===this.wo){var a=this.bG;null!==a&&""!==a?(a=this.oe(a),this.wo=null!==a?a:this):this.wo=this}return this.wo}),t.g(C,"text",C.prototype.text),t.defineProperty(C,{text:"text"},function(){return this.le},function(a){var b=this.le;b!==a&&(e&&t.i(a,"string",C,"text"),this.le=a,this.j("text",b,a))}),t.g(C,"containingGroup",C.prototype.hb),t.defineProperty(C,{hb:"containingGroup"},function(){return this.zk},function(a){if(this.Ld()){var b=this.zk;if(b!==a){e&&null!==a&&t.l(a,S,C,"containingGroup"),null===a||this!==a&&!a.nl(this)||(this===a&&t.m("Cannot make a Group a member of itself: "+this.toString()),t.m("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString())),this.J(gj);var c=this.h;if(null!==b?Em(b,this):this instanceof S&&null!==c&&c.Uk.remove(this),this.zk=a,null!==a?Fm(a,this):this instanceof S&&null!==c&&c.Uk.add(this),this.J(aj),null!==c){var d=this.data,f=c.ba;null!==d&&f instanceof M&&f.vx(d,f.Hb(null!==a?a.data:null))}if(d=this.Wz,null!==d&&(f=!0,null!==c&&(f=c.Na,c.Na=!0),d(this,b,a),null!==c&&(c.Na=f)),this instanceof S)for(c=new ma(C),Ie(c,this,!0,0),c=c.k;c.next();)if(d=c.value,d instanceof R)for(d=d.qe;d.next();)f=d.value,Lj(f);if(this instanceof R)for(d=this.qe;d.next();)f=d.value,Lj(f);this.j("containingGroup",b,a),null!==a&&a.xx()}}else t.m("cannot set the Part.containingGroup of a Link or Adornment")}),C.prototype.lt=function(a){var b=this.zk;null===b||a||Fm(b,this)},C.prototype.mt=function(a){var b=this.zk;null===b||a||Em(b,this)},C.prototype.Nm=function(){var a=this.data;if(null!==a){var b=this.h;null!==b&&(b=b.ba,null!==b&&b.nx(a))}},t.g(C,"containingGroupChanged",C.prototype.Wz),t.defineProperty(C,{Wz:"containingGroupChanged"},function(){return this.xq},function(a){var b=this.xq;b!==a&&(null!==a&&t.i(a,"function",C,"containingGroupChanged"),this.xq=a,this.j("containingGroupChanged",b,a))}),C.prototype.findTopLevelPart=function(){return Gm(this,this)},t.A(C,{sp:"isTopLevel"},function(){return null!==this.hb||this instanceof R&&this.bi?!1:!0}),C.prototype.isMemberOf=C.prototype.nl=function(a){return a instanceof S?Hm(this,this,a):!1},C.prototype.findCommonContainingGroup=C.prototype.EI=function(a){return Im(this,this,a)},t.g(C,"layoutConditions",C.prototype.mF),t.defineProperty(C,{mF:"layoutConditions"},function(){return this.kr},function(a){var b=this.kr;b!==a&&(e&&t.i(a,"number",C,"layoutConditions"),this.kr=a,this.j("layoutConditions",b,a))}),C.prototype.canLayout=function(){if(!this.vA||!this.La())return!1;var a=this.layer;return null!==a&&a.rc||this instanceof R&&this.bi?!1:!0},C.prototype.invalidateLayout=C.prototype.J=function(a){void 0===a&&(a=16777215);var b;if(this.vA&&0!==(a&this.mF)?(b=this.layer,null!==b&&b.rc||this instanceof R&&this.bi?b=!1:(b=this.h,b=null!==b&&b.la.vb?!1:!0)):b=!1,b)if(b=this.zk,null!==b){var c=b.jc;null!==c?c.J():b.J(a)}else a=this.h,null!==a&&(c=a.jc,null!==c&&c.J())},t.g(C,"dragComputation",C.prototype.aA),t.defineProperty(C,{aA:"dragComputation"},function(){return this.Hq},function(a){var b=this.Hq;b!==a&&(null!==a&&t.i(a,"function",C,"dragComputation"),this.Hq=a,this.j("dragComputation",b,a))}),t.g(C,"shadowOffset",C.prototype.pG),t.defineProperty(C,{pG:"shadowOffset"},function(){return this.wm},function(a){var b=this.wm;b.M(a)||(e&&t.l(a,w,C,"shadowOffset"),this.wm=a=a.Z(),this.fa(),this.j("shadowOffset",b,a))}),t.g(C,"shadowColor",C.prototype.shadowColor),t.defineProperty(C,{shadowColor:"shadowColor"},function(){return this.vm},function(a){var b=this.vm;b!==a&&(e&&t.i(a,"string",C,"shadowColor"),this.vm=a,this.fa(),this.j("shadowColor",b,a))}),t.g(C,"shadowBlur",C.prototype.shadowBlur),t.defineProperty(C,{shadowBlur:"shadowBlur"},function(){return this.um},function(a){var b=this.um;b!==a&&(e&&t.i(a,"number",C,"shadowBlur"),this.um=a,this.fa(),this.j("shadowBlur",b,a))}),t.ga("Adornment",Je),t.Ka(Je,C),aa=Je.prototype,aa.toString=function(){var a=this.Wh;return"Adornment("+this.Zc+")"+(null!==a?a.toString():"")},aa.uj=function(){return this.sb&&this.sb.S instanceof T?this.sb.S.uj():null},aa.Rq=function(){return null},aa.bx=function(){var a=this.pc.S,b=this.pc;if(a instanceof T&&b instanceof V){var c=a.path,b=c.Ta;a.bx();for(var b=c.Ta,a=this.xa,c=a.length,d=0;c>d;d++){var e=a.n[d];e.fj&&e instanceof V&&(e.Ta=b)}}},aa.Sy=function(){var a=this.Wh;return a instanceof T?a.Cc:null},t.A(Je,{placeholder:"placeholder"},function(){return this.Jb}),t.g(Je,"adornedObject",Je.prototype.pc),t.defineProperty(Je,{pc:"adornedObject"},function(){return this.sb},function(a){e&&null!==a&&t.l(a,Q,C,"adornedObject:val");var b=this.Wh,c=null;null!==a&&(c=a.S),null===b||null!==a&&b===c||b.vl(this.Zc),this.sb=a,c&&c.Wk(this.Zc,this)}),t.A(Je,{Wh:"adornedPart"},function(){var a=this.sb;return null!==a?a.S:null}),Je.prototype.ol=function(){var a=this.sb;return null===a?!0:(a=a.S,null===a||!Ri(a))},Je.prototype.Ld=function(){return!1},t.A(Je,{hb:"containingGroup"},function(){return null}),Je.prototype.gn=function(a,b,c,d,e,f,g){if(a===wd&&"elements"===b){if(e instanceof Ug)null===this.Jb?this.Jb=e:this.Jb!==e&&t.m("Cannot insert a second Placeholder into the visual tree of an Adornment.");else if(e instanceof y){var h=e.bt(function(a){return a instanceof Ug});h instanceof Ug&&(null===this.Jb?this.Jb=h:this.Jb!==h&&t.m("Cannot insert a second Placeholder into the visual tree of an Adornment."))}}else a===xd&&"elements"===b&&null!==this.Jb&&(d===this.Jb?this.Jb=null:d instanceof y&&this.Jb.ej(d)&&(this.Jb=null));C.prototype.gn.call(this,a,b,c,d,e,f,g)},Je.prototype.updateAdornments=function(){},Je.prototype.Nm=function(){},t.ga("Node",R),t.Ka(R,C),R.prototype.cloneProtected=function(a){C.prototype.cloneProtected.call(this,a),a.mr=this.mr,a.nr=this.nr,a.Lk=this.Lk,a.dr=this.dr,a.Gs=this.Gs,a.Bs=this.Bs,a.er=this.er,a.qq=this.qq,a.rq=this.rq.Z(),a.Qr=this.Qr},R.prototype.Yh=function(a){C.prototype.Yh.call(this,a),a.wf(),a.qh=this.qh,a.Rd=null};var Km;R.DirectionDefault=Km=t.w(R,"DirectionDefault",0),R.DirectionAbsolute=t.w(R,"DirectionAbsolute",1);var Lm;R.DirectionRotatedNode=Lm=t.w(R,"DirectionRotatedNode",2);var kk;R.DirectionRotatedNodeOrthogonal=kk=t.w(R,"DirectionRotatedNodeOrthogonal",3),R.SpreadingNone=t.w(R,"SpreadingNone",10);var Jm;R.SpreadingEvenly=Jm=t.w(R,"SpreadingEvenly",11);var Mm;R.SpreadingPacked=Mm=t.w(R,"SpreadingPacked",12),R.prototype.gn=function(a,b,c,d,e,f,g){a===wd&&"elements"===b?this.Rd=null:a===xd&&"elements"===b&&(null===this.h?this.Rd=null:d instanceof Q&&Vl(this,d,function(a,b){Sk(a,b,!0)})),C.prototype.gn.call(this,a,b,c,d,e,f,g)},R.prototype.invalidateConnectedLinks=R.prototype.wf=function(a){void 0===a&&(a=null);for(var b=this.qe;b.next();){var c=b.value;null!==a&&a.contains(c)||(Pm(this,c.ud),Pm(this,c.fe),c.ac())}},R.prototype.ol=function(){return!0},t.defineProperty(R,{DJ:"portSpreading"},function(){return this.Qr},function(a){var b=this.Qr;b!==a&&(e&&t.Aa(a,R,R,"portSpreading"),this.Qr=a,this.j("portSpreading",b,a),a=this.h,null!==a&&a.la.vb||this.wf())}),t.g(R,"avoidable",R.prototype.Qz),t.defineProperty(R,{Qz:"avoidable"},function(){return this.qq},function(a){var b=this.qq;if(b!==a){e&&t.i(a,"boolean",R,"avoidable"),this.qq=a;var c=this.h;null!==c&&Xj(c,this),this.j("avoidable",b,a)}}),t.g(R,"avoidableMargin",R.prototype.PD),t.defineProperty(R,{PD:"avoidableMargin"},function(){return this.rq},function(a){"number"==typeof a?a=new ab(a):t.l(a,ab,R,"avoidableMargin");var b=this.rq;if(!b.M(a)){this.rq=a=a.Z();var c=this.h;null!==c&&Xj(c,this),this.j("avoidableMargin",b,a)}}),R.prototype.canAvoid=function(){return this.Qz&&!this.bi},R.prototype.getAvoidableRect=function(a){return a.set(this.oa),a.bw(this.PD),a},R.prototype.findVisibleNode=function(){for(var a=this;null!==a&&!a.La();)a=a.hb;return a},R.prototype.df=function(a){C.prototype.df.call(this,a);for(var b=this.qe;b.next();)b.value.df(a)},t.A(R,{qe:"linksConnected"},function(){return this.nc.k}),R.prototype.findLinksConnected=R.prototype.yE=function(a){if(void 0===a&&(a=null),null===a)return this.nc.k;e&&t.i(a,"string",R,"findLinksConnected:pid");var b=new Ba(this.nc),c=this;return b.tl=function(b){return b.aa===c&&b.Rf===a||b.ca===c&&b.Og===a},b},R.prototype.findLinksOutOf=R.prototype.Cw=function(a){void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",R,"findLinksOutOf:pid");var b=new Ba(this.nc),c=this;return b.tl=function(b){return b.aa!==c?!1:null===a?!0:b.Rf===a},b},R.prototype.findLinksInto=R.prototype.wg=function(a){void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",R,"findLinksInto:pid");var b=new Ba(this.nc),c=this;return b.tl=function(b){return b.ca!==c?!1:null===a?!0:b.Og===a},b},R.prototype.findNodesConnected=R.prototype.zE=function(a){void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",R,"findNodesConnected:pid");for(var b=null,c=null,d=this.nc.k;d.next();){var f=d.value;f.aa===this?(null===a||f.Rf===a)&&(f=f.ca,null!==b?b.add(f):null!==c&&c!==f?(b=new ma(R),b.add(c),b.add(f)):c=f):f.ca!==this||null!==a&&f.Og!==a||(f=f.aa,null!==b?b.add(f):null!==c&&c!==f?(b=new ma(R),b.add(c),b.add(f)):c=f)}return null!==b?b.k:null!==c?new Aa(c):t.ag},R.prototype.findNodesOutOf=function(a){void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",R,"findNodesOutOf:pid");for(var b=null,c=null,d=this.nc.k;d.next();){var f=d.value;f.aa!==this||null!==a&&f.Rf!==a||(f=f.ca,null!==b?b.add(f):null!==c&&c!==f?(b=new ma(R),b.add(c),b.add(f)):c=f)}return null!==b?b.k:null!==c?new Aa(c):t.ag},R.prototype.findNodesInto=function(a){void 0===a&&(a=null),e&&null!==a&&t.i(a,"string",R,"findNodesInto:pid");for(var b=null,c=null,d=this.nc.k;d.next();){var f=d.value;f.ca!==this||null!==a&&f.Og!==a||(f=f.aa,null!==b?b.add(f):null!==c&&c!==f?(b=new ma(R),b.add(c),b.add(f)):c=f)}return null!==b?b.k:null!==c?new Aa(c):t.ag},R.prototype.findLinksBetween=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null),e&&(t.l(a,R,R,"findLinksBetween:othernode"),null!==b&&t.i(b,"string",R,"findLinksBetween:pid"),null!==c&&t.i(c,"string",R,"findLinksBetween:otherpid"));var d=new Ba(this.nc),f=this;return d.tl=function(d){return(d.aa!==f||d.ca!==a||null!==b&&d.Rf!==b||null!==c&&d.Og!==c)&&(d.aa!==a||d.ca!==f||null!==c&&d.Rf!==c||null!==b&&d.Og!==b)?!1:!0},d},R.prototype.findLinksTo=function(a,b,c){void 0===b&&(b=null),void 0===c&&(c=null),e&&(t.l(a,R,R,"findLinksTo:othernode"),null!==b&&t.i(b,"string",R,"findLinksTo:pid"),null!==c&&t.i(c,"string",R,"findLinksTo:otherpid"));var d=new Ba(this.nc),f=this;return d.tl=function(d){return d.aa!==f||d.ca!==a||null!==b&&d.Rf!==b||null!==c&&d.Og===c?!1:!0},d},t.g(R,"linkConnected",R.prototype.oF),t.defineProperty(R,{oF:"linkConnected"},function(){return this.mr},function(a){var b=this.mr;b!==a&&(null!==a&&t.i(a,"function",R,"linkConnected"),this.mr=a,this.j("linkConnected",b,a))}),t.g(R,"linkDisconnected",R.prototype.pF),t.defineProperty(R,{pF:"linkDisconnected"},function(){return this.nr},function(a){var b=this.nr;b!==a&&(null!==a&&t.i(a,"function",R,"linkDisconnected"),this.nr=a,this.j("linkDisconnected",b,a))}),t.g(R,"linkValidation",R.prototype.Ap),t.defineProperty(R,{Ap:"linkValidation"},function(){return this.Lk},function(a){var b=this.Lk;b!==a&&(null!==a&&t.i(a,"function",R,"linkValidation"),this.Lk=a,this.j("linkValidation",b,a))}),R.prototype.updateModelDataReferences=function(){C.prototype.updateModelDataReferences.call(this);var a=this.data;if(null!==a){var b=this.h;if(null!==b){var c=b.ba;if(c instanceof Kd){var d=c.Tm(a),b=b.Ve(d),e=this.dA();b!==e&&(b=null!==e?c.Hb(e.data):void 0,e=c.fn,"function"==typeof e?e(a,b):a[e]=b,c.lh(a,d))}}}},R.prototype.lt=function(a){C.prototype.lt.call(this,a),a||Qj(this);var b=this.io;null===b||a||Sm(b,this)},R.prototype.mt=function(a){C.prototype.mt.call(this,a);var b=this.io;null===b||a||null===b.we||(b.we.remove(this),b.ha())},R.prototype.Nm=function(){if(0<this.nc.count){var a=this.h;if(null===a)return;for(var b=this.nc.copy().k;b.next();)a.remove(b.value)}this.$d=null,C.prototype.Nm.call(this)},t.A(R,{bi:"isLinkLabel"},function(){return null!==this.io}),t.g(R,"labeledLink",R.prototype.$d),t.defineProperty(R,{$d:"labeledLink"},function(){return this.io},function(a){var b=this.io;if(b!==a){e&&null!==a&&t.l(a,T,R,"labeledLink");var c=this.h,d=this.data;if(null!==b&&(null!==b.we&&(b.we.remove(this),b.ha()),null!==c&&null!==d&&!c.la.vb)){var f=b.data,g=c.ba;if(null!==f&&g instanceof M){var h=g.Hb(d);void 0!==h&&g.IJ(f,h)}}this.io=a,null!==a&&(Sm(a,this),null===c||null===d||c.la.vb||(f=a.data,g=c.ba,null!==f&&g instanceof M&&(h=g.Hb(d),void 0!==h&&g.GD(f,h)))),Jk(this),this.j("labeledLink",b,a)}}),R.prototype.findPort=R.prototype.gl=function(a){if(e&&t.i(a,"string",R,"findPort:pid"),null===this.Rd){if(""===a&&!1===this.Eh)return this;Tk(this)}var b=this.Rd.za(a);return null!==b||""!==a&&(b=this.Rd.za(""),null!==b)?b:this},t.A(R,{port:"port"},function(){return this.gl("")}),t.A(R,{ports:"ports"},function(){return null===this.Rd&&Tk(this),this.Rd.jF}),R.prototype.isInTreeOf=function(a){if(null===a||a===this)return!1;var b=!0,c=this.h;if(null!==c&&(b=c.pd),c=this,b)for(;c!==a;){for(var b=null,d=c.nc.k;d.next();){var e=d.value;if(e.Ec&&(b=e.aa,b!==c&&b!==this))break}if(b===this||null===b||b===c)return!1;c=b}else for(;c!==a;){for(b=null,d=c.nc.k;d.next()&&(e=d.value,!e.Ec||(b=e.ca,b===c||b===this)););if(b===this||null===b||b===c)return!1;c=b}return!0},R.prototype.findTreeRoot=function(){var a=!0,b=this.h;if(null!==b&&(a=b.pd),b=this,a)for(;;){for(var a=null,c=b.nc.k;c.next();){var d=c.value;if(d.Ec&&(a=d.aa,a!==b&&a!==this))break}if(a===this)return this;if(null===a||a===b)return b;b=a}else for(;;){for(a=null,c=b.nc.k;c.next()&&(d=c.value,!d.Ec||(a=d.ca,a===b||a===this)););if(a===this)return this;if(null===a||a===b)return b;b=a}},R.prototype.findTreeParentLink=R.prototype.ft=function(){var a=!0,b=this.h;if(null!==b&&(a=b.pd),b=this.nc.k,a){for(;b.next();)if(a=b.value,a.Ec&&a.aa!==this)return a}else for(;b.next();)if(a=b.value,a.Ec&&a.ca!==this)return a;return null},R.prototype.findTreeParentNode=R.prototype.dA=function(){if(null===this.Uh||this.Uh instanceof R)return this.Uh;var a=!0,b=this.h;null!==b&&(a=b.pd);var b=this.nc.n,c=b.length;if(a)for(a=0;c>a;a++){var d=b[a];if(d.Ec&&(d=d.aa,d!==this))return this.Uh=d}else for(a=0;c>a;a++)if(d=b[a],d.Ec&&(d=d.ca,d!==this))return this.Uh=d;return this.Uh=null},R.prototype.findTreeChildrenLinks=R.prototype.Fw=function(){var a=!0,b=this.h;if(null!==b&&(a=b.pd),a){var a=new Ba(this.nc),c=this;a.tl=function(a){return a.Ec&&a.aa===c?!0:!1}}else a=new Ba(this.nc),c=this,a.tl=function(a){return a.Ec&&a.ca===c?!0:!1};return a},R.prototype.findTreeChildrenNodes=R.prototype.BE=function(){var a=!0,b=this.h;null!==b&&(a=b.pd);var c=b=null,d=this.nc.k;if(a)for(;d.next();)a=d.value,a.Ec&&a.aa===this&&(a=a.ca,null!==b?b.add(a):null!==c&&c!==a?(b=new B(R),b.add(c),b.add(a)):c=a);else for(;d.next();)a=d.value,a.Ec&&a.ca===this&&(a=a.aa,null!==b?b.add(a):null!==c&&c!==a?(b=new B(R),b.add(c),b.add(a)):c=a);return null!==b?b.k:null!==c?new Aa(c):t.ag},R.prototype.findTreeParts=function(a){void 0===a&&(a=1/0),t.i(a,"number",R,"collapseTree:level");var b=new ma(C);return Ie(b,this,!1,a),b},R.prototype.collapseTree=R.prototype.collapseTree=function(a){void 0===a&&(a=1),t.q(a,R,"collapseTree:level"),1>a&&(a=1);var b=this.h;if(null!==b&&!b.Wd){var c=b.Ub;0!==b.la.Je&&c.ul(),b.Wd=!0;var c=b.pd,d=new ma(R);d.add(this),Tm(this,d,c,a,this.Qc),b.Wd=!1,b.fa()}},R.prototype.expandTree=R.prototype.expandTree=function(a){void 0===a&&(a=2),t.q(a,R,"collapseTree:level"),2>a&&(a=2);var b=this.h;if(null!==b&&!b.Wd){var c=b.Ub;0!==b.la.Je&&c.ul(),b.Wd=!0;var d=b.pd,e=new ma(R);e.add(this),Vm(this,e,d,a,this.Qc,c,this),b.Wd=!1}},t.g(R,"isTreeExpanded",R.prototype.Qc),t.defineProperty(R,{Qc:"isTreeExpanded"},function(){return this.dr},function(a){var b=this.dr;if(b!==a){e&&t.i(a,"boolean",R,"isTreeExpanded"),this.dr=a;var c=this.h;if(this.j("isTreeExpanded",b,a),b=this.LG,null!==b){var d=!0;null!==c&&(d=c.Na,c.Na=!0),b(this),null!==c&&(c.Na=d)}a?null===c||c.Wd||(0!==c.la.Je&&c.Ub.ul(),c.Wd=!0,a=c.pd,b=new ma(R),
b.add(this),Vm(this,b,a,2,!1,c.Ub,this),c.Wd=!1):null===c||c.Wd||(0!==c.la.Je&&c.Ub.ul(),c.Wd=!0,a=c.pd,b=new ma(R),b.add(this),Um(this,b,a,!0),c.Wd=!1)}}),t.g(R,"wasTreeExpanded",R.prototype.pn),t.defineProperty(R,{pn:"wasTreeExpanded"},function(){return this.Gs},function(a){var b=this.Gs;b!==a&&(e&&t.i(a,"boolean",R,"wasTreeExpanded"),this.Gs=a,this.j("wasTreeExpanded",b,a))}),t.g(R,"treeExpandedChanged",R.prototype.LG),t.defineProperty(R,{LG:"treeExpandedChanged"},function(){return this.Bs},function(a){var b=this.Bs;b!==a&&(null!==a&&t.i(a,"function",R,"treeExpandedChanged"),this.Bs=a,this.j("treeExpandedChanged",b,a))}),t.g(R,"isTreeLeaf",R.prototype.ci),t.defineProperty(R,{ci:"isTreeLeaf"},function(){return this.er},function(a){var b=this.er;b!==a&&(e&&t.i(a,"boolean",R,"isTreeLeaf"),this.er=a,this.j("isTreeLeaf",b,a))}),t.ga("Link",T),t.Ka(T,C),T.prototype.cloneProtected=function(a){if(C.prototype.cloneProtected.call(this,a),a.Bh=this.Bh,a.Pq=this.Pq,a.Rh=this.Rh,a.As=this.As,a.Tr=this.Tr,a.Ur=this.Ur,a.Vr=this.Vr,a.fr=this.fr,a.lq=this.lq,a.yq=this.yq,a.Bq=this.Bq,a.Cq=this.Cq,a.pm=this.pm,a.ps=this.ps,null!==this.P){var b=this.P;a.P={Dh:b.Dh.Z(),Th:b.Th.Z(),Ah:b.Ah,Qh:b.Qh,zh:b.zh,Ph:b.Ph,Ch:b.Ch,Sh:b.Sh}}else a.P=null},T.prototype.Yh=function(a){C.prototype.Yh.call(this,a),this.Bh=a.Bh,this.Rh=a.Rh,a.Ji=null,a.xe=null,a.ac(),a.xn=this.xn,a.hf=this.hf};var el;T.Normal=el=t.w(T,"Normal",1),T.Orthogonal=t.w(T,"Orthogonal",2),T.AvoidsNodes=t.w(T,"AvoidsNodes",6);var Wm;T.AvoidsNodesStraight=Wm=t.w(T,"AvoidsNodesStraight",7);var zg;T.None=zg=t.w(T,"None",0);var Pg;T.Bezier=Pg=t.w(T,"Bezier",9);var yg;T.JumpGap=yg=t.w(T,"JumpGap",10);var xg;T.JumpOver=xg=t.w(T,"JumpOver",11);var bl;T.End=bl=t.w(T,"End",17);var cl;T.Scale=cl=t.w(T,"Scale",18);var dl;T.Stretch=dl=t.w(T,"Stretch",19);var jm;T.OrientAlong=jm=t.w(T,"OrientAlong",21);var Xm;T.OrientPlus90=Xm=t.w(T,"OrientPlus90",22);var Ym;T.OrientMinus90=Ym=t.w(T,"OrientMinus90",23);var Zm;T.OrientOpposite=Zm=t.w(T,"OrientOpposite",24);var $m;T.OrientUpright=$m=t.w(T,"OrientUpright",25);var an;T.OrientPlus90Upright=an=t.w(T,"OrientPlus90Upright",26);var bn;T.OrientMinus90Upright=bn=t.w(T,"OrientMinus90Upright",27);var cn;T.OrientUpright45=cn=t.w(T,"OrientUpright45",28),T.prototype.Fe=function(){this.P={Dh:xb,Th:xb,Ah:NaN,Qh:NaN,zh:Km,Ph:Km,Ch:NaN,Sh:NaN}},T.prototype.ol=function(){var a=this.aa;if(null!==a){var b=a.findVisibleNode();if(null!==b&&(a=b),Ri(a)||Si(a))return!1}return a=this.ca,null!==a&&(b=a.findVisibleNode(),null!==b&&(a=b),Ri(a)||Si(a))?!1:!0},T.prototype.Ld=function(){return!1},T.prototype.computeAngle=function(a,b,c){switch(b){default:case zg:a=0;break;case jm:a=c;break;case Xm:a=c+90;break;case Ym:a=c-90;break;case Zm:a=c+180;break;case $m:a=F.Dt(c),a>90&&270>a&&(a-=180);break;case an:a=F.Dt(c+90),a>90&&270>a&&(a-=180);break;case bn:a=F.Dt(c-90),a>90&&270>a&&(a-=180);break;case cn:if(a=F.Dt(c),a>45&&135>a||a>225&&315>a)return 0;a>90&&270>a&&(a-=180)}return F.Dt(a)},t.g(T,"fromNode",T.prototype.aa),t.defineProperty(T,{aa:"fromNode"},function(){return this.eg},function(a){var b=this.eg;if(b!==a){e&&null!==a&&t.l(a,R,T,"fromNode");var c=this.ud;null!==b&&(this.qg!==b&&Rm(b,this,c),dn(this),this.J(gj)),this.eg=a,this.ui=null,this.ac();var d=this.h;if(null!==d){var f=this.data,g=d.ba;if(null!==f)if(g instanceof M){var h=null!==a?a.data:null;g.ux(f,g.Hb(h))}else g instanceof Kd&&(h=null!==a?a.data:null,d.pd?g.lh(f,g.Hb(h)):(null!==b&&g.lh(b.data,void 0),g.lh(h,g.Hb(null!==this.qg?this.qg.data:null))))}f=this.ud,g=this.iA,null!==g&&(h=!0,null!==d&&(h=d.Na,d.Na=!0),g(this,c,f),null!==d&&(d.Na=h)),null!==a&&(this.qg!==a&&Qm(a,this,f),en(this),this.J(aj)),this.j("fromNode",b,a),Lj(this)}}),t.g(T,"fromPortId",T.prototype.Rf),t.defineProperty(T,{Rf:"fromPortId"},function(){return this.Bh},function(a){var b=this.Bh;if(b!==a){e&&t.i(a,"string",T,"fromPortId");var c=this.ud;null!==c&&Pm(this.aa,c),dn(this),this.Bh=a;var d=this.ud;null!==d&&Pm(this.aa,d);var f=this.h;if(null!==f){var g=this.data,h=f.ba;null!==g&&h instanceof M&&h.$A(g,a)}c!==d&&(this.ui=null,this.ac(),g=this.iA,null!==g&&(h=!0,null!==f&&(h=f.Na,f.Na=!0),g(this,c,d),null!==f&&(f.Na=h))),en(this),this.j("fromPortId",b,a)}}),t.A(T,{ud:"fromPort"},function(){var a=this.eg;return null===a?null:a.gl(this.Bh)}),t.g(T,"fromPortChanged",T.prototype.iA),t.defineProperty(T,{iA:"fromPortChanged"},function(){return this.Pq},function(a){var b=this.Pq;b!==a&&(null!==a&&t.i(a,"function",T,"fromPortChanged"),this.Pq=a,this.j("fromPortChanged",b,a))}),t.g(T,"toNode",T.prototype.ca),t.defineProperty(T,{ca:"toNode"},function(){return this.qg},function(a){var b=this.qg;if(b!==a){e&&null!==a&&t.l(a,R,T,"toNode");var c=this.fe;null!==b&&(this.eg!==b&&Rm(b,this,c),dn(this),this.J(gj)),this.qg=a,this.ui=null,this.ac();var d=this.h;if(null!==d){var f=this.data,g=d.ba;if(null!==f)if(g instanceof M){var h=null!==a?a.data:null;g.wx(f,g.Hb(h))}else g instanceof Kd&&(h=null!==a?a.data:null,d.pd?(null!==b&&g.lh(b.data,void 0),g.lh(h,g.Hb(null!==this.eg?this.eg.data:null))):g.lh(f,g.Hb(h)))}f=this.fe,g=this.kB,null!==g&&(h=!0,null!==d&&(h=d.Na,d.Na=!0),g(this,c,f),null!==d&&(d.Na=h)),null!==a&&(this.eg!==a&&Qm(a,this,f),en(this),this.J(aj)),this.j("toNode",b,a),Lj(this)}}),t.g(T,"toPortId",T.prototype.Og),t.defineProperty(T,{Og:"toPortId"},function(){return this.Rh},function(a){var b=this.Rh;if(b!==a){e&&t.i(a,"string",T,"toPortId");var c=this.fe;null!==c&&Pm(this.ca,c),dn(this),this.Rh=a;var d=this.fe;null!==d&&Pm(this.ca,d);var f=this.h;if(null!==f){var g=this.data,h=f.ba;null!==g&&h instanceof M&&h.cB(g,a)}c!==d&&(this.ui=null,this.ac(),g=this.kB,null!==g&&(h=!0,null!==f&&(h=f.Na,f.Na=!0),g(this,c,d),null!==f&&(f.Na=h))),en(this),this.j("toPortId",b,a)}}),t.A(T,{fe:"toPort"},function(){var a=this.qg;return null===a?null:a.gl(this.Rh)}),t.g(T,"toPortChanged",T.prototype.kB),t.defineProperty(T,{kB:"toPortChanged"},function(){return this.As},function(a){var b=this.As;b!==a&&(null!==a&&t.i(a,"function",T,"toPortChanged"),this.As=a,this.j("toPortChanged",b,a))}),t.defineProperty(T,{ob:"fromSpot"},function(){return null!==this.P?this.P.Dh:xb},function(a){null===this.P&&this.Fe();var b=this.P.Dh;b.M(a)||(e&&t.l(a,H,T,"fromSpot"),a=a.Z(),this.P.Dh=a,this.j("fromSpot",b,a),this.ac())}),t.defineProperty(T,{dk:"fromEndSegmentLength"},function(){return null!==this.P?this.P.Ah:NaN},function(a){null===this.P&&this.Fe();var b=this.P.Ah;b!==a&&(e&&t.i(a,"number",T,"fromEndSegmentLength"),0>a&&t.ka(a,">= 0",T,"fromEndSegmentLength"),this.P.Ah=a,this.j("fromEndSegmentLength",b,a),this.ac())}),t.defineProperty(T,{hp:"fromEndSegmentDirection"},function(){return null!==this.P?this.P.zh:Km},function(a){null===this.P&&this.Fe();var b=this.P.zh;b!==a&&(e&&t.Aa(a,R,T,"fromEndSegmentDirection"),this.P.zh=a,this.j("fromEndSegmentDirection",b,a),this.ac())}),t.defineProperty(T,{ip:"fromShortLength"},function(){return null!==this.P?this.P.Ch:NaN},function(a){null===this.P&&this.Fe();var b=this.P.Ch;b!==a&&(e&&t.i(a,"number",T,"fromShortLength"),this.P.Ch=a,this.j("fromShortLength",b,a),this.ac())}),t.defineProperty(T,{rb:"toSpot"},function(){return null!==this.P?this.P.Th:xb},function(a){null===this.P&&this.Fe();var b=this.P.Th;b.M(a)||(e&&t.l(a,H,T,"toSpot"),a=a.Z(),this.P.Th=a,this.j("toSpot",b,a),this.ac())}),t.defineProperty(T,{jk:"toEndSegmentLength"},function(){return null!==this.P?this.P.Qh:NaN},function(a){null===this.P&&this.Fe();var b=this.P.Qh;b!==a&&(e&&t.i(a,"number",T,"toEndSegmentLength"),0>a&&t.ka(a,">= 0",T,"toEndSegmentLength"),this.P.Qh=a,this.j("toEndSegmentLength",b,a),this.ac())}),t.defineProperty(T,{Xp:"toEndSegmentDirection"},function(){return null!==this.P?this.P.Ph:Km},function(a){null===this.P&&this.Fe();var b=this.P.Ph;b!==a&&(e&&t.Aa(a,R,T,"toEndSegmentDirection"),this.P.Ph=a,this.j("toEndSegmentDirection",b,a),this.ac())}),t.defineProperty(T,{Yp:"toShortLength"},function(){return null!==this.P?this.P.Sh:NaN},function(a){null===this.P&&this.Fe();var b=this.P.Sh;b!==a&&(e&&t.i(a,"number",T,"toShortLength"),this.P.Sh=a,this.j("toShortLength",b,a),this.ac())}),T.prototype.getOtherNode=T.prototype.jA=function(a){e&&t.l(a,R,T,"getOtherNode:node");var b=this.aa;return a===b?this.ca:b},T.prototype.getOtherPort=function(a){e&&t.l(a,Q,T,"getOtherPort:port");var b=this.ud;return a===b?this.fe:b},t.A(T,{zK:"isLabeledLink"},function(){return null===this.we?!1:0<this.we.count}),t.A(T,{fk:"labelNodes"},function(){return null===this.we?t.ag:this.we.k}),T.prototype.lt=function(a){if(C.prototype.lt.call(this,a),gn(this)&&Ag(this,this.oa),!a){a=this.eg;var b=this.qg;null!==a&&(Qm(a,this,this.ud),en(this)),null!==b&&(Qm(b,this,this.fe),en(this))}},T.prototype.mt=function(a){if(C.prototype.mt.call(this,a),gn(this)&&Ag(this,this.oa),!a){a=this.eg;var b=this.qg;null!==a&&(Rm(a,this,this.ud),dn(this)),null!==b&&(Rm(b,this,this.fe),dn(this))}},T.prototype.Nm=function(){if(this.rg=!0,null!==this.we){var a=this.h;if(null===a)return;for(var b=this.we.copy().k;b.next();)a.remove(b.value)}b=this.data,null!==b&&(a=this.h,null!==a&&(a=a.ba,a instanceof M?a.UA(b):a instanceof Kd&&a.lh(b,void 0)))},T.prototype.updateModelDataReferences=function(){var a=this.data;if(null!==a){var b=this.h;if(null!==b){var c=b.ba;if(c instanceof M){var d=c.il(a),e=b.Ve(d),f=this.aa;e!==f&&(e=null!==f?c.Hb(f.data):void 0,f=c.Zm,"function"==typeof f?f(a,e):a[f]=e,c.ux(a,d)),d=c.ml(a),e=b.Ve(d),f=this.ca,e!==f&&(e=null!==f?c.Hb(f.data):void 0,f=c.$m,"function"==typeof f?f(a,e):a[f]=e,c.wx(a,d))}}}},T.prototype.move=T.prototype.move=function(a){var b=this.position,c=b.x;for(isNaN(c)&&(c=0),b=b.y,isNaN(b)&&(b=0),c=a.x-c,b=a.y-b,C.prototype.move.call(this,a),this.ql(c,b),a=this.fk;a.next();){var d=a.value,e=d.position;d.moveTo(e.x+c,e.y+b)}},t.g(T,"relinkableFrom",T.prototype.LF),t.defineProperty(T,{LF:"relinkableFrom"},function(){return this.Tr},function(a){var b=this.Tr;b!==a&&(e&&t.i(a,"boolean",T,"relinkableFrom"),this.Tr=a,this.j("relinkableFrom",b,a),this.updateAdornments())}),t.g(T,"relinkableTo",T.prototype.MF),t.defineProperty(T,{MF:"relinkableTo"},function(){return this.Ur},function(a){var b=this.Ur;b!==a&&(e&&t.i(a,"boolean",T,"relinkableTo"),this.Ur=a,this.j("relinkableTo",b,a),this.updateAdornments())}),T.prototype.canRelinkFrom=function(){if(!this.LF)return!1;var a=this.layer;return null===a?!0:a.Sj?(a=a.h,null===a||a.Sj?!0:!1):!1},T.prototype.canRelinkTo=function(){if(!this.MF)return!1;var a=this.layer;return null===a?!0:a.Sj?(a=a.h,null===a||a.Sj?!0:!1):!1},t.g(T,"resegmentable",T.prototype.Kp),t.defineProperty(T,{Kp:"resegmentable"},function(){return this.Vr},function(a){var b=this.Vr;b!==a&&(e&&t.i(a,"boolean",T,"resegmentable"),this.Vr=a,this.j("resegmentable",b,a),this.updateAdornments())}),t.g(T,"isTreeLink",T.prototype.Ec),t.defineProperty(T,{Ec:"isTreeLink"},function(){return this.fr},function(a){var b=this.fr;b!==a&&(e&&t.i(a,"boolean",T,"isTreeLink"),this.fr=a,this.j("isTreeLink",b,a),null!==this.aa&&Qj(this.aa),null!==this.ca&&Qj(this.ca))}),t.A(T,{path:"path"},function(){var a=this.Ji;return null!==a?a:(a=this.xa,a=Kk(this,a,a.length),a instanceof V?this.Ji=a:null)}),T.prototype.Rq=function(){return this.path},T.prototype.Sy=function(){return this.Cc},T.prototype.uj=function(){this.updateRoute();var a=new x;return this.qf(a),this.oz=a},T.prototype.qf=function(a){var b=1/0,c=1/0,d=this.pa;if(0===d)return a.p(NaN,NaN,0,0),a;if(1===d)d=this.o(0),b=Math.min(d.x,b),c=Math.min(d.y,c),a.p(d.x,d.y,0,0);else if(2===d){var e=this.o(0),f=this.o(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y);a.p(e.x,e.y,0,0),a.kj(f)}else if(this.computeCurve()===Pg&&d>=3&&!this.ic)if(e=this.o(0),b=e.x,c=e.y,a.p(b,c,0,0),3===d)d=this.o(1),b=Math.min(d.x,b),c=Math.min(d.y,c),f=this.o(2),b=Math.min(f.x,b),c=Math.min(f.y,c),F.So(e.x,e.y,d.x,d.y,d.x,d.y,f.x,f.y,.5,a);else for(var g,h,i=3;d>i;i+=3)g=this.o(i-2),i+3>=d&&(i=d-1),h=this.o(i-1),f=this.o(i),F.So(e.x,e.y,g.x,g.y,h.x,h.y,f.x,f.y,.5,a),b=Math.min(f.x,b),c=Math.min(f.y,c),e=f;else for(e=this.o(0),f=this.o(1),b=Math.min(e.x,f.x),c=Math.min(e.y,f.y),a.p(e.x,e.y,0,0),a.kj(f),i=2;d>i;i++)e=this.o(i),b=Math.min(e.x,b),c=Math.min(e.y,c),a.kj(e);return this.zz.p(b-a.x,c-a.y),a},t.A(T,{yF:"midPoint"},function(){return this.updateRoute(),this.computeMidPoint(new w)}),T.prototype.computeMidPoint=function(a){var b=this.pa;if(0===b)return a.assign(F.dH),a;if(1===b)return a.assign(this.o(0)),a;if(2===b){var c=this.o(0),d=this.o(1);return a.p((c.x+d.x)/2,(c.y+d.y)/2),a}if(this.computeCurve()===Pg&&b>=3&&!this.ic){if(3===b)return this.o(1);var b=(b-1)/3|0,e=3*(b/2|0);return 1===b%2?(c=this.o(e),d=this.o(e+1),b=this.o(e+2),e=this.o(e+3),F.aI(c.x,c.y,d.x,d.y,b.x,b.y,e.x,e.y,a)):a.assign(this.o(e)),a}for(var e=0,f=t.Db(),g=0;b-1>g;g++)c=this.o(g),d=this.o(g+1),F.mb(c.x,d.x)?(c=d.y-c.y,0>c&&(c=-c)):F.mb(c.y,d.y)?(c=d.x-c.x,0>c&&(c=-c)):c=Math.sqrt(c.Zj(d)),f.push(c),e+=c;for(d=g=c=0;e/2>c&&b>g&&(d=f[g],!(c+d>e/2));)c+=d,g++;return t.ya(f),b=this.o(g),f=this.o(g+1),b.x===f.x?b.y>f.y?a.p(b.x,b.y-(e/2-c)):a.p(b.x,b.y+(e/2-c)):b.y===f.y?b.x>f.x?a.p(b.x-(e/2-c),b.y):a.p(b.x+(e/2-c),b.y):(e=(e/2-c)/d,a.p(b.x+e*(f.x-b.x),b.y+e*(f.y-b.y))),a},t.A(T,{xF:"midAngle"},function(){return this.updateRoute(),this.computeMidAngle()}),T.prototype.computeMidAngle=function(){var a=this.pa;if(2>a)return NaN;if(this.computeCurve()===Pg&&a>=4&&!this.ic){var b=(a-1)/3|0,c=3*(b/2|0);if(1===b%2){var c=Math.floor(c),a=this.o(c),b=this.o(c+1),d=this.o(c+2),c=this.o(c+3);return F.$H(a.x,a.y,b.x,b.y,d.x,d.y,c.x,c.y)}if(c>0&&a>c+1)return a=this.o(c-1),b=this.o(c+1),a.aj(b)}if(d=a/2|0,0===a%2)return a=this.o(d-1),b=this.o(d),a.aj(b);var a=this.o(d-1),b=this.o(d),d=this.o(d+1),c=a.Zj(b),e=b.Zj(d);return c>e?a.aj(b):b.aj(d)},t.g(T,"points",T.prototype.points),t.defineProperty(T,{points:"points"},function(){return this.Cc},function(a){var b=this.Cc;if(b!==a){e&&(Array.isArray(a)||a instanceof B||t.m("Link.points value is not an instance of List or Array"));var c=a;if(Array.isArray(a)){var d=0===a.length%2;if(d)for(var f=0;f<a.length;f++)if("number"!=typeof a[f]){d=!1;break}if(d)for(c=new B(w),d=0;d<a.length/2;d++)f=new w(a[2*d],a[2*d+1]).freeze(),c.add(f);else t.m("Link.points array must contain only numbers")}else for(c=a.copy(),a=c.k;a.next();)a.value.freeze();c.freeze(),this.Cc=c,this.Ye(),hn(this),this.h&&this.h.Ub.sd&&(this.xo=c),this.j("points",b,c)}}),t.A(T,{pa:"pointsCount"},function(){return this.Cc.count}),T.prototype.getPoint=T.prototype.o=function(a){return this.Cc.n[a]},T.prototype.setPoint=T.prototype.Ef=function(a,b){e&&(t.l(b,w,T,"setPoint"),b.N()||t.m("Link.setPoint called with a Point that does not have real numbers: "+b.toString())),null===this.xe&&t.m("Call Link.startRoute before modifying the points of the route."),this.Cc.Mg(a,b)},T.prototype.setPointAt=T.prototype.Y=function(a,b,c){e&&(t.q(b,T,"setPointAt:x"),t.q(c,T,"setPointAt:y")),null===this.xe&&t.m("Call Link.startRoute before modifying the points of the route."),this.Cc.Mg(a,new w(b,c))},T.prototype.insertPoint=function(a,b){e&&(t.l(b,w,T,"insertPoint"),b.N()||t.m("Link.insertPoint called with a Point that does not have real numbers: "+b.toString())),null===this.xe&&t.m("Call Link.startRoute before modifying the points of the route."),this.Cc.Jd(a,b)},T.prototype.insertPointAt=T.prototype.C=function(a,b,c){e&&(t.q(b,T,"insertPointAt:x"),t.q(c,T,"insertPointAt:y")),null===this.xe&&t.m("Call Link.startRoute before modifying the points of the route."),this.Cc.Jd(a,new w(b,c))},T.prototype.addPoint=T.prototype.Vh=function(a){e&&(t.l(a,w,T,"addPoint"),a.N()||t.m("Link.addPoint called with a Point that does not have real numbers: "+a.toString())),null===this.xe&&t.m("Call Link.startRoute before modifying the points of the route."),this.Cc.add(a)},T.prototype.addPointAt=T.prototype.Xk=function(a,b){e&&(t.q(a,T,"insertPointAt:x"),t.q(b,T,"insertPointAt:y")),null===this.xe&&t.m("Call Link.startRoute before modifying the points of the route."),this.Cc.add(new w(a,b))},T.prototype.removePoint=T.prototype.PF=function(a){null===this.xe&&t.m("Call Link.startRoute before modifying the points of the route."),this.Cc.qd(a)},T.prototype.clearPoints=T.prototype.Uo=function(){null===this.xe&&t.m("Call Link.startRoute before modifying the points of the route."),this.Cc.clear()},T.prototype.movePoints=T.prototype.ql=function(a,b){for(var c=new B(w),d=this.Cc.k;d.next();){var e=d.value;c.add(new w(e.x+a,e.y+b).freeze())}c.freeze(),d=this.Cc,this.Cc=c,this.Ye(),hn(this),this.h&&this.h.Ub.sd&&(this.xo=c),this.j("points",d,c)},T.prototype.startRoute=T.prototype.zl=function(){null===this.xe&&(this.xe=this.Cc,this.Cc=this.Cc.copy())},T.prototype.commitRoute=T.prototype.Xi=function(){if(null!==this.xe){for(var a=this.xe,b=this.Cc,c=1/0,d=1/0,e=a.count,f=0;e>f;f++)var g=a.n[f],c=Math.min(g.x,c),d=Math.min(g.y,d);for(var h=1/0,i=1/0,j=b.count,f=0;j>f;f++)g=b.n[f],h=Math.min(g.x,h),i=Math.min(g.y,i),g.freeze();if(b.freeze(),j===e){for(f=0;j>f;f++)if(e=a.n[f],g=b.n[f],e.x-c!==g.x-h||e.y-d!==g.y-i){this.Ye();break}}else this.Ye();this.xe=null,this.h&&this.h.Ub.sd&&(this.xo=b),hn(this),this.j("points",a,b)}},T.prototype.rollbackRoute=T.prototype.KJ=function(){null!==this.xe&&(this.Cc=this.xe,this.xe=null)},T.prototype.invalidateRoute=T.prototype.ac=function(){if(!(this.vz||this.h&&this.h.la.vb)){var a=this.Rq();null!==a&&(this.rg=!1,this.Ye(),a.ha())}},t.defineProperty(T,{Wp:null},function(){return this.vz},function(a){this.vz=a}),T.prototype.updateRoute=function(){if(!this.rg&&!this.qy){var a=!0;try{this.qy=!0,this.zl(),a=this.computePoints()}finally{this.qy=!1,a?this.Xi():this.KJ()}}},T.prototype.computePoints=function(){var a=this.h;if(null===a)return!1;var b=this.aa,c=null;if(null===b?(a.qm||(a.Bv=new V,a.Bv.Ca=F.gq,a.Bv.fb=0,a.qm=new R,a.qm.add(a.Bv),a.qm.sf()),this.Fn&&(a.qm.position=a.qm.location=this.Fn,a.qm.sf(),b=a.qm,c=a.Bv)):c=this.ud,null!==c){var d=Uk(c);d!==b&&b.La()?c=d:(d=b.findVisibleNode(),null!==d&&d!==b?(b=d,c=d.gl("")):b=d)}if(this.mD=b,null===b||null===c||!b.location.N())return!1;var d=this.ca,e=null;if(null===d?(a.rm||(a.Cv=new V,a.Cv.Ca=F.gq,a.Cv.fb=0,a.rm=new R,a.rm.add(a.Cv),a.rm.sf()),this.Jn&&(a.rm.position=a.rm.location=this.Jn,a.rm.sf(),d=a.rm,e=a.Cv)):e=this.fe,null!==e&&(a=Uk(e),a!==d&&d.La()?e=a:(a=d.findVisibleNode(),null!==a&&a!==d?(d=a,e=a.gl("")):d=a)),this.oD=d,null===d||null===e||!d.location.N())return!1;var a=this.pa,f=kn(this,c),g=ln(this,e),h=c===e&&null!==c,i=this.ic,j=this.De===Pg;this.ui=h&&!i?j=!0:!1;var k=this.Lo===zg||h;if(i||f!==wb||g!==wb||h){j=this.dj,k&&(i&&j||h)&&this.Uo();var l=h?this.computeCurviness():0,m=this.getLinkPoint(b,c,f,!0,i,d,e),n=0,o=0,p=0;if(i||f!==wb||h){var q=this.computeEndSegmentLength(b,c,f,!0),p=this.getLinkDirection(b,c,m,f,!0,i,d,e);if(h&&(p-=i?90:30,0>l&&(p-=180)),0>p?p+=360:p>=360&&(p-=360),h&&(q+=Math.abs(l)),0===p?n=q:90===p?o=q:180===p?n=-q:270===p?o=-q:(n=q*Math.cos(p*Math.PI/180),o=q*Math.sin(p*Math.PI/180)),f.Ge()&&h){var r=c.pb(Hb,t.K()),s=t.mc(r.x+1e3*n,r.y+1e3*o);this.getLinkPointFromPoint(b,c,r,s,!0,m),t.B(r),t.B(s)}}var q=this.getLinkPoint(d,e,g,!1,i,b,c),u=0,v=0,x=0;(i||g!==wb||h)&&(r=this.computeEndSegmentLength(d,e,g,!1),x=this.getLinkDirection(d,e,q,g,!1,i,b,c),h&&(x+=i?0:30,0>l&&(x+=180)),0>x?x+=360:x>=360&&(x-=360),h&&(r+=Math.abs(l)),0===x?u=r:90===x?v=r:180===x?u=-r:270===x?v=-r:(u=r*Math.cos(x*Math.PI/180),v=r*Math.sin(x*Math.PI/180)),g.Ge()&&h&&(r=e.pb(Hb,t.K()),s=t.mc(r.x+1e3*u,r.y+1e3*v),this.getLinkPointFromPoint(d,e,r,s,!1,q),t.B(r),t.B(s))),e=m,(i||f!==wb||h)&&(e=new w(m.x+n,m.y+o)),c=q,(i||g!==wb||h)&&(c=new w(q.x+u,q.y+v)),!k&&!i&&f===wb&&a>3&&this.adjustPoints(0,m,a-2,c)?this.Ef(a-1,q):!k&&!i&&g===wb&&a>3&&this.adjustPoints(1,e,a-1,q)?this.Ef(0,m):!k&&!i&&a>4&&this.adjustPoints(1,e,a-2,c)?(this.Ef(0,m),this.Ef(a-1,q)):!k&&i&&a>=6&&!j&&this.adjustPoints(1,e,a-2,c)?(this.Ef(0,m),this.Ef(a-1,q)):(this.Uo(),this.Vh(m),(i||f!==wb||h)&&this.Vh(e),i&&this.addOrthoPoints(e,p,c,x,b,d),(i||g!==wb||h)&&this.Vh(c),this.Vh(q))}else f=!1,!k&&a>=3&&(k=this.getLinkPoint(b,c,wb,!0,!1,d,e),g=this.getLinkPoint(d,e,wb,!1,!1,b,c),f=this.adjustPoints(0,k,a-1,g))&&(k=this.getLinkPoint(b,c,wb,!0,!1,d,e),g=this.getLinkPoint(d,e,wb,!1,!1,b,c),this.adjustPoints(0,k,a-1,g)),f||(this.Uo(),j?(a=this.getLinkPoint(b,c,wb,!0,!1,d,e),k=this.getLinkPoint(d,e,wb,!1,!1,b,c),f=k.x-a.x,g=k.y-a.y,h=this.computeCurviness(),j=i=0,m=a.x+f/3,p=a.y+g/3,n=m,o=p,F.I(g,0)?o=f>0?o-h:o+h:(i=-f/g,j=Math.sqrt(h*h/(i*i+1)),0>h&&(j=-j),n=(0>g?-1:1)*j+m,o=i*(n-m)+p),m=a.x+2*f/3,p=a.y+2*g/3,q=m,u=p,F.I(g,0)?u=f>0?u-h:u+h:(q=(0>g?-1:1)*j+m,u=i*(q-m)+p),this.Uo(),this.Vh(a),this.Xk(n,o),this.Xk(q,u),this.Vh(k),this.Ef(0,this.getLinkPoint(b,c,wb,!0,!1,d,e)),this.Ef(3,this.getLinkPoint(d,e,wb,!1,!1,b,c))):(a=d,d=this.getLinkPoint(b,c,wb,!0,!1,a,e),e=this.getLinkPoint(a,e,wb,!1,!1,b,c),this.hasCurviness()?(g=e.x-d.x,b=e.y-d.y,c=this.computeCurviness(),a=d.x+g/2,k=d.y+b/2,f=a,h=k,F.I(b,0)?h=g>0?h-c:h+c:(g=-g/b,f=Math.sqrt(c*c/(g*g+1)),0>c&&(f=-f),f=(0>b?-1:1)*f+a,h=g*(f-a)+k),this.Vh(d),this.Xk(f,h)):this.Vh(d),this.Vh(e)));return!0},T.prototype.getLinkPointFromPoint=function(a,b,c,d,e,f){if(void 0===f&&(f=new w),null===a||null===b)return f.assign(c),f;a.La()||(e=a.findVisibleNode(),null!==e&&e!==a&&(b=e.port));var g;if(a=null,e=b.ja,null===e||e.Hf()||(e=e.ja),null===e)e=d.x,d=d.y,g=c.x,c=c.y;else{a=e.me,e=1/(a.m11*a.m22-a.m12*a.m21),g=a.m22*e;var h=-a.m12*e,i=-a.m21*e,j=a.m11*e,k=e*(a.m21*a.dy-a.m22*a.dx),l=e*(a.m12*a.dx-a.m11*a.dy);e=d.x*g+d.y*i+k,d=d.x*h+d.y*j+l,g=c.x*g+c.y*i+k,c=c.x*h+c.y*j+l}return b.kp(e,d,g,c,f),a&&f.transform(a),f},T.prototype.getLinkPoint=function(a,b,c,d,e,f,g,h){if(void 0===h&&(h=new w),c.xd())return b.pb(c,h),h;if(c.rp()&&(c=nn(this,b),null!==c)){if(h.assign(c.xp),e&&this.Lt===Wm){var i=nn(this,g);if(c.Lm<i.Lm){c=t.K();var i=t.K(),j=new x(b.pb(Eb,c),b.pb(Pb,i)),k=this.computeSpot(!d);a=this.getLinkPoint(f,g,k,!d,e,a,b,i),a.x>=j.x&&a.x<=j.x+j.width?h.x=a.x:a.y>=j.y&&a.y<=j.y+j.height&&(h.y=a.y),t.B(c),t.B(i)}}return h}return f=b.pb(Hb,t.K()),c=null,this.pa>(e?6:2)?(g=d?this.o(1):this.o(this.pa-2),e&&(g=mn(f,g.copy()))):(c=t.K(),g=g.pb(Hb,c),e&&(g=mn(f,g))),this.getLinkPointFromPoint(a,b,f,g,d,h),t.B(f),null!==c&&t.B(c),h},T.prototype.getLinkDirection=function(a,b,c,d,e,f,g,h){a:if(d.xd())c=d.x>d.y?d.x>1-d.y?0:d.x<1-d.y?270:315:d.x<d.y?d.x>1-d.y?90:d.x<1-d.y?180:135:.5>d.x?225:.5<d.x?45:0;else{if(d.rp()&&(a=nn(this,b),null!==a))switch(a.be){case t.bd:c=270;break a;case t.Jc:c=180;break a;default:case t.Tc:c=0;break a;case t.Sc:c=90;break a}a=b.pb(Hb,t.K()),d=null,this.pa>(f?6:2)?(h=e?this.o(1):this.o(this.pa-2),h=f?mn(a,h.copy()):c):(d=t.K(),h=h.pb(Hb,d)),c=Math.abs(h.x-a.x)>Math.abs(h.y-a.y)?h.x>=a.x?0:180:h.y>=a.y?90:270,t.B(a),null!==d&&t.B(d)}switch(f=Km,f=e?this.hp:this.Xp,f===Km&&(f=e?b.hp:b.Xp),f){case Lm:b=b.hl(),c+=b,c>=360&&(c-=360);break;case Km:case kk:if(b=b.hl(),0===b)break;b>=45&&135>b?c+=90:b>=135&&225>b?c+=180:b>=225&&315>b&&(c+=270),c>=360&&(c-=360)}return c},T.prototype.computeEndSegmentLength=function(a,b,c,d){return null!==b&&c.rp()&&(a=nn(this,b),null!==a)?a.Aw:(a=NaN,a=d?this.dk:this.jk,null!==b&&isNaN(a)&&(a=d?b.dk:b.jk),isNaN(a)&&(a=10),a)},T.prototype.computeSpot=function(a){return a?kn(this,this.ud):ln(this,this.fe)},T.prototype.computeOtherPoint=function(a,b){var c,d=b.pb(Hb);return c=b.Pr,c=null!==c?pn(c,this):null,null!==c&&(d=c.xp),d},T.prototype.computeShortLength=function(a){return a?qn(this):rn(this)},T.prototype.bk=function(a,b,c,d,e,f){if(!1===this.Bf)return!1;void 0===b&&(b=null),void 0===c&&(c=null);var g=f;if(void 0===f&&(g=t.oh(),g.reset()),g.multiply(this.transform),this.Km(a,g))return am(this,b,c,e),void 0===f&&t.We(g),!0;if(this.Tf(a,g)){var h=!1;if(!this.Vg)for(var i=this.xa.length;i--;){var j=this.xa.n[i];if(j.visible||j===this.kc){var k=j.oa,l=this.Pa;if(!(k.x>l.width||k.y>l.height||0>k.x+k.width||0>k.y+k.height)){if(k=t.oh(),k.set(g),j instanceof y)h=j.bk(a,b,c,d,e,k);else if(this.path===j){var h=j,m=a,n=d,l=k;if(!1===h.Bf)h=!1;else if(l.multiply(h.transform),n)a:{var o=m,p=l;if(h.Km(o,p))h=!0;else{if(void 0===p&&(p=h.transform,o.Vj(h.oa))){h=!0;break a}var l=o.left,m=o.right,n=o.top,o=o.bottom,q=t.K(),r=t.K(),s=t.K(),u=t.oh();u.set(p),u.DF(h.transform),u.nA(),r.x=m,r.y=n,r.transform(u),q.x=l,q.y=n,q.transform(u),p=!1,hm(h,q,r,s)?p=!0:(q.x=m,q.y=o,q.transform(u),hm(h,q,r,s)?p=!0:(r.x=l,r.y=o,r.transform(u),hm(h,q,r,s)?p=!0:(q.x=l,q.y=n,q.transform(u),hm(h,q,r,s)&&(p=!0)))),t.We(u),t.B(q),t.B(r),t.B(s),h=p}}else h=h.Km(m,l)}else h=pk(j,a,d,k);h&&(null!==b&&(j=b(j)),j&&(null===c||c(j))&&e.add(j)),t.We(k)}}}return void 0===f&&t.We(g),h||null!==this.background||null!==this.$k}return void 0===f&&t.We(g),!1},t.A(T,{ic:"isOrthogonal"},function(){return 2===(2&this.pm.value)}),t.A(T,{dj:"isAvoiding"},function(){return 4===(4&this.pm.value)}),T.prototype.computeCurve=function(){if(null===this.ui){var a=this.ud,b=this.ic;this.ui=null!==a&&a===this.fe&&!b}return this.ui?Pg:this.De},T.prototype.computeCorner=function(){if(this.De===Pg)return 0;var a=this.sw;return(isNaN(a)||0>a)&&(a=10),a},T.prototype.computeCurviness=function(){var a=this.Xs;if(isNaN(a)){var b=this.hf;if(0!==b){var a=10,c=this.h;null!==c&&(a=c.yp),c=Math.abs(b),a=a/2+((c-1)/2|0)*a,0===c%2&&(a=-a),0>b&&(a=-a)}else a=10}return a},T.prototype.computeThickness=function(){var a=this.path;return null!==a?Math.max(a.fb,1):1},T.prototype.hasCurviness=function(){return!isNaN(this.Xs)||0!==this.hf&&!this.ic},T.prototype.adjustPoints=function(a,b,c,d){var e=this.Lo;if(this.ic){if(e===cl)return!1;e===dl&&(e=bl)}switch(e){case cl:var f=this.o(a),g=this.o(c);if(!f.M(b)||!g.M(d)){var e=f.x,f=f.y,h=g.x-e,i=g.y-f,j=Math.sqrt(h*h+i*i);if(!F.I(j,0)){var k;F.I(h,0)?k=0>i?-Math.PI/2:Math.PI/2:(k=Math.atan(i/Math.abs(h)),0>h&&(k=Math.PI-k));var g=b.x,l=b.y,h=d.x-g,m=d.y-l,i=Math.sqrt(h*h+m*m);for(F.I(h,0)?m=0>m?-Math.PI/2:Math.PI/2:(m=Math.atan(m/Math.abs(h)),0>h&&(m=Math.PI-m)),j=i/j,k=m-k,this.Ef(a,b),a+=1;c>a;a++)b=this.o(a),h=b.x-e,i=b.y-f,b=Math.sqrt(h*h+i*i),F.I(b,0)||(F.I(h,0)?i=0>i?-Math.PI/2:Math.PI/2:(i=Math.atan(i/Math.abs(h)),0>h&&(i=Math.PI-i)),h=i+k,b*=j,this.Y(a,g+b*Math.cos(h),l+b*Math.sin(h)));this.Ef(c,d)}}return!0;case dl:if(f=this.o(a),l=this.o(c),!f.M(b)||!l.M(d)){e=f.x,f=f.y,g=l.x,l=l.y,j=(g-e)*(g-e)+(l-f)*(l-f),h=b.x,k=b.y;var i=d.x,m=d.y,n=0,o=1,n=0!==i-h?(m-k)/(i-h):9e9;for(0!==n&&(o=Math.sqrt(1+1/(n*n))),this.Ef(a,b),a+=1;c>a;a++){b=this.o(a);var p=b.x,q=b.y,r=.5;0!==j&&(r=((e-p)*(e-g)+(f-q)*(f-l))/j);var s=e+r*(g-e),t=f+r*(l-f);b=Math.sqrt((p-s)*(p-s)+(q-t)*(q-t)),n*(p-s)+t>q&&(b=-b),n>0&&(b=-b),p=h+r*(i-h),r=k+r*(m-k),0!==n?(b=p+b/o,this.Y(a,b,r-(b-p)/n)):this.Y(a,p,r+b)}this.Ef(c,d)}return!0;case bl:return this.ic&&(e=this.o(a),f=this.o(a+1),g=this.o(a+2),F.I(e.y,f.y)?F.I(f.x,g.x)?this.Y(a+1,f.x,b.y):F.I(f.y,g.y)&&this.Y(a+1,b.x,f.y):F.I(e.x,f.x)&&(F.I(f.y,g.y)?this.Y(a+1,b.x,f.y):F.I(f.x,g.x)&&this.Y(a+1,f.x,b.y)),e=this.o(c),f=this.o(c-1),g=this.o(c-2),F.I(e.y,f.y)?F.I(f.x,g.x)?this.Y(c-1,f.x,d.y):F.I(f.y,g.y)&&this.Y(c-1,d.x,f.y):F.I(e.x,f.x)&&(F.I(f.y,g.y)?this.Y(c-1,d.x,f.y):F.I(f.x,g.x)&&this.Y(c-1,f.x,d.y))),this.Ef(a,b),this.Ef(c,d),!0;default:return!1}},T.prototype.addOrthoPoints=function(a,b,c,d,e,f){b=b>=-45&&45>b?0:b>=45&&135>b?90:b>=135&&225>b?180:270,d=d>=-45&&45>d?0:d>=45&&135>d?90:d>=135&&225>d?180:270;var g=e.oa.copy(),h=f.oa.copy();if(g.N()&&h.N()){g.Sf(8,8),h.Sf(8,8),g.kj(a),h.kj(c);var i,j;0===b?c.x>a.x||270===d&&c.y<a.y&&h.right>a.x||90===d&&c.y>a.y&&h.right>a.x?(i=new w(c.x,a.y),j=new w(c.x,(a.y+c.y)/2),180===d?(i.x=this.computeMidOrthoPosition(a.x,c.x,!1),j.x=i.x,j.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(i.x=a.x<h.left?this.computeMidOrthoPosition(a.x,h.left,!1):a.x<h.right&&(270===d&&a.y<h.top||90===d&&a.y>h.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):h.right,j.x=i.x,j.y=c.y):0===d&&a.x<h.left&&a.y>h.top&&a.y<h.bottom&&(i.x=a.x,i.y=a.y<c.y?Math.min(c.y,h.top):Math.max(c.y,h.bottom),j.y=i.y)):(i=new w(a.x,c.y),j=new w((a.x+c.x)/2,c.y),(180===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)&&(180===d&&(h.Fa(a)||g.Fa(c))?i.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(180===d||90===d)?i.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,h.bottom),!0):c.y>a.y&&(180===d||270===d)&&(i.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,h.top),!0)),j.x=c.x,j.y=i.y),i.y>g.top&&i.y<g.bottom&&(c.x>=g.left&&c.x<=a.x||a.x<=h.right&&a.x>=c.x?(90===d||270===d)&&(i=new w(Math.max((a.x+c.x)/2,a.x),a.y),j=new w(i.x,c.y)):(i.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,0===d?g.top:Math.min(g.top,h.top)):Math.max(c.y,0===d?g.bottom:Math.max(g.bottom,h.bottom)),j.x=c.x,j.y=i.y))):180===b?c.x<a.x||270===d&&c.y<a.y&&h.left<a.x||90===d&&c.y>a.y&&h.left<a.x?(i=new w(c.x,a.y),j=new w(c.x,(a.y+c.y)/2),0===d?(i.x=this.computeMidOrthoPosition(a.x,c.x,!1),j.x=i.x,j.y=c.y):270===d&&c.y<a.y||90===d&&c.y>a.y?(i.x=a.x>h.right?this.computeMidOrthoPosition(a.x,h.right,!1):a.x>h.left&&(270===d&&a.y<h.top||90===d&&a.y>h.bottom)?this.computeMidOrthoPosition(a.x,c.x,!1):h.left,j.x=i.x,j.y=c.y):180===d&&a.x>h.right&&a.y>h.top&&a.y<h.bottom&&(i.x=a.x,i.y=a.y<c.y?Math.min(c.y,h.top):Math.max(c.y,h.bottom),j.y=i.y)):(i=new w(a.x,c.y),j=new w((a.x+c.x)/2,c.y),(0===d||90===d&&c.y<g.top||270===d&&c.y>g.bottom)&&(0===d&&(h.Fa(a)||g.Fa(c))?i.y=this.computeMidOrthoPosition(a.y,c.y,!0):c.y<a.y&&(0===d||90===d)?i.y=this.computeMidOrthoPosition(g.top,Math.max(c.y,h.bottom),!0):c.y>a.y&&(0===d||270===d)&&(i.y=this.computeMidOrthoPosition(g.bottom,Math.min(c.y,h.top),!0)),j.x=c.x,j.y=i.y),i.y>g.top&&i.y<g.bottom&&(c.x<=g.right&&c.x>=a.x||a.x>=h.left&&a.x<=c.x?(90===d||270===d)&&(i=new w(Math.min((a.x+c.x)/2,a.x),a.y),j=new w(i.x,c.y)):(i.y=270===d||(0===d||180===d)&&c.y<a.y?Math.min(c.y,180===d?g.top:Math.min(g.top,h.top)):Math.max(c.y,180===d?g.bottom:Math.max(g.bottom,h.bottom)),j.x=c.x,j.y=i.y))):90===b?c.y>a.y||180===d&&c.x<a.x&&h.bottom>a.y||0===d&&c.x>a.x&&h.bottom>a.y?(i=new w(a.x,c.y),j=new w((a.x+c.x)/2,c.y),270===d?(i.y=this.computeMidOrthoPosition(a.y,c.y,!0),j.x=c.x,j.y=i.y):180===d&&c.x<a.x||0===d&&c.x>a.x?(i.y=a.y<h.top?this.computeMidOrthoPosition(a.y,h.top,!0):a.y<h.bottom&&(180===d&&a.x<h.left||0===d&&a.x>h.right)?this.computeMidOrthoPosition(a.y,c.y,!0):h.bottom,j.x=c.x,j.y=i.y):90===d&&a.y<h.top&&a.x>h.left&&a.x<h.right&&(i.x=a.x<c.x?Math.min(c.x,h.left):Math.max(c.x,h.right),i.y=a.y,j.x=i.x)):(i=new w(c.x,a.y),j=new w(c.x,(a.y+c.y)/2),(270===d||0===d&&c.x<g.left||180===d&&c.x>g.right)&&(270===d&&(h.Fa(a)||g.Fa(c))?i.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(270===d||0===d)?i.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,h.right),!1):c.x>a.x&&(270===d||180===d)&&(i.x=this.computeMidOrthoPosition(g.right,Math.min(c.x,h.left),!1)),j.x=i.x,j.y=c.y),i.x>g.left&&i.x<g.right&&(c.y>=g.top&&c.y<=a.y||a.y<=h.bottom&&a.y>=c.y?(0===d||180===d)&&(i=new w(a.x,Math.max((a.y+c.y)/2,a.y)),j=new w(c.x,i.y)):(i.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,90===d?g.left:Math.min(g.left,h.left)):Math.max(c.x,90===d?g.right:Math.max(g.right,h.right)),j.x=i.x,j.y=c.y))):c.y<a.y||180===d&&c.x<a.x&&h.top<a.y||0===d&&c.x>a.x&&h.top<a.y?(i=new w(a.x,c.y),j=new w((a.x+c.x)/2,c.y),90===d?(i.y=this.computeMidOrthoPosition(a.y,c.y,!0),j.x=c.x,j.y=i.y):180===d&&c.x<a.x||0===d&&c.x>=a.x?(i.y=a.y>h.bottom?this.computeMidOrthoPosition(a.y,h.bottom,!0):a.y>h.top&&(180===d&&a.x<h.left||0===d&&a.x>h.right)?this.computeMidOrthoPosition(a.y,c.y,!0):h.top,j.x=c.x,j.y=i.y):270===d&&a.y>h.bottom&&a.x>h.left&&a.x<h.right&&(i.x=a.x<c.x?Math.min(c.x,h.left):Math.max(c.x,h.right),i.y=a.y,j.x=i.x)):(i=new w(c.x,a.y),j=new w(c.x,(a.y+c.y)/2),(90===d||0===d&&c.x<g.left||180===d&&c.x>g.right)&&(90===d&&(h.Fa(a)||g.Fa(c))?i.x=this.computeMidOrthoPosition(a.x,c.x,!1):c.x<a.x&&(90===d||0===d)?i.x=this.computeMidOrthoPosition(g.left,Math.max(c.x,h.right),!1):c.x>a.x&&(90===d||180===d)&&(i.x=this.computeMidOrthoPosition(g.right,Math.min(c.x,h.left),!1)),j.x=i.x,j.y=c.y),i.x>g.left&&i.x<g.right&&(c.y<=g.bottom&&c.y>=a.y||a.y>=h.top&&a.y<=c.y?(0===d||180===d)&&(i=new w(a.x,Math.min((a.y+c.y)/2,a.y)),
j=new w(c.x,i.y)):(i.x=180===d||(90===d||270===d)&&c.x<a.x?Math.min(c.x,270===d?g.left:Math.min(g.left,h.left)):Math.max(c.x,270===d?g.right:Math.max(g.right,h.right)),j.x=i.x,j.y=c.y)));var k=i,l=j;if(this.dj){var m,n=this.h;(m=null===n)||(n.Ub.yg?m=!1:(m=n.Ua,m=m instanceof cf?!m.Ov||m.aF:!0),m=!m),m||g.Fa(c)||h.Fa(a)||e===f||this.layer.rc?a=!1:(e=Sj(n,this),sn(e,Math.min(a.x,k.x),Math.min(a.y,k.y),Math.abs(a.x-k.x),Math.abs(a.y-k.y))&&sn(e,Math.min(k.x,l.x),Math.min(k.y,l.y),Math.abs(k.x-l.x),Math.abs(k.y-l.y))&&sn(e,Math.min(l.x,c.x),Math.min(l.y,c.y),Math.abs(l.x-c.x),Math.abs(l.y-c.y))?a=!1:(g=g.copy().ii(h),g.Sf(2*e.Hm,2*e.Gm),tn(e,a,b,c,d,g),h=un(e,c.x,c.y),e.abort||h!==vn||(Vj(e),h=e.sG,g.Sf(e.Hm*h,e.Gm*h),tn(e,a,b,c,d,g),h=un(e,c.x,c.y)),e.abort||h!==vn||(Vj(e),h=e.kF,g.Sf(e.Hm*h,e.Gm*h),tn(e,a,b,c,d,g),h=un(e,c.x,c.y)),!e.abort&&h===vn&&e.XG&&(Vj(e),tn(e,a,b,c,d,e.Pb),h=un(e,c.x,c.y)),!e.abort&&vn>h&&0!==un(e,c.x,c.y)?(wn(this,e,c.x,c.y,d,!0),d=this.o(2),4>this.pa?(0===b||180===b?(d.x=a.x,d.y=c.y):(d.x=c.x,d.y=a.y),this.Y(2,d.x,d.y),this.C(3,d.x,d.y)):(c=this.o(3),0===b||180===b?F.I(d.x,c.x)?(b=0===b?Math.max(d.x,a.x):Math.min(d.x,a.x),this.Y(2,b,a.y),this.Y(3,b,c.y)):F.I(d.y,c.y)?(Math.abs(a.y-d.y)<=e.Gm/2&&(this.Y(2,d.x,a.y),this.Y(3,c.x,a.y)),this.C(2,d.x,a.y)):this.Y(2,a.x,d.y):(90===b||270===b)&&(F.I(d.y,c.y)?(b=90===b?Math.max(d.y,a.y):Math.min(d.y,a.y),this.Y(2,a.x,b),this.Y(3,c.x,b)):F.I(d.x,c.x)?(Math.abs(a.x-d.x)<=e.Hm/2&&(this.Y(2,a.x,d.y),this.Y(3,a.x,c.y)),this.C(2,a.x,d.y)):this.Y(2,d.x,a.y))),a=!0):a=!1))}else a=!1;a||(this.Vh(i),this.Vh(j))}},T.prototype.computeMidOrthoPosition=function(a,b){if(this.hasCurviness()){var c=this.computeCurviness();return(a+b)/2+c}return(a+b)/2},T.prototype.findClosestSegment=function(a){e&&t.l(a,w,T,"findClosestSegment:p");var b=a.x;a=a.y;for(var c=this.o(0),d=this.o(1),f=Ra(b,a,c.x,c.y,d.x,d.y),g=0,h=1;h<this.pa-1;h++){var c=this.o(h+1),i=Ra(b,a,d.x,d.y,c.x,c.y),d=c;f>i&&(g=h,f=i)}return g},T.prototype.invalidateGeometry=T.prototype.Ye=function(){this.Ji=this.Ta=null,this.ha()},t.A(T,{nd:"geometry"},function(){return null===this.Ta&&(this.updateRoute(),this.Ta=this.makeGeometry()),this.Ta}),T.prototype.bx=function(){if(null===this.Ta&&!1!==this.rg){this.Ta=this.makeGeometry();var a=this.Rq();if(null!==a){a.Ta=this.Ta;for(var b=this.xa,c=b.length,d=0;c>d;d++){var e=b.n[d];e!==a&&e.fj&&e instanceof V&&(e.Ta=this.Ta)}}}},T.prototype.makeGeometry=function(){var a=this.pa;if(2>a){var b=new zc(Ac),c=new Bc(0,0);return b.Bb.add(c),b}var d=!1,b=this.h;null!==b&&0!==b.la.Je&&gn(this)&&(d=!0);var e=this.o(0).copy(),f=e.copy(),g=this.computeCurve();if(g===Pg&&a>=3&&!F.mb(this.mn,0))if(3===a)var h=this.o(1),b=Math.min(e.x,h.x),c=Math.min(e.y,h.y),h=this.o(2),b=Math.min(b,h.x),c=Math.min(c,h.y);else{if(this.ic)for(h=0;a>h;h++)b=this.Cc.n[h],f.x=Math.min(b.x,f.x),f.y=Math.min(b.y,f.y);else for(var i,h=3;a>h;h+=3)h+3>=a&&(h=a-1),i=this.o(h),f.x=Math.min(i.x,f.x),f.y=Math.min(i.y,f.y);b=f.x,c=f.y}else{for(h=0;a>h;h++)b=this.Cc.n[h],f.x=Math.min(b.x,f.x),f.y=Math.min(b.y,f.y);b=f.x,c=f.y}if(b-=this.zz.x,c-=this.zz.y,e.x-=b,e.y-=c,2===a){var j=this.o(1).copy();j.x-=b,j.y-=c,0!==qn(this)&&zn(this,e,!0,f),0!==rn(this)&&zn(this,j,!1,f),b=new zc(Dc),b.qa=e.x,b.ra=e.y,b.D=j.x,b.F=j.y}else{if(j=t.u(),0!==qn(this)&&zn(this,e,!0,f),I(j,e.x,e.y,!1,!1),g===Pg&&a>=3&&!F.mb(this.mn,0))if(3===a)h=this.o(1),a=h.x-b,d=h.y-c,h=this.o(2).copy(),h.x-=b,h.y-=c,0!==rn(this)&&zn(this,h,!1,f),J(j,a,d,a,d,h.x,h.y);else if(this.ic){f=new w(b,c),e=this.o(1).copy(),g=new w(b,c),a=new w(b,c),d=this.o(0),i=null;for(var k=this.mn/3,h=1;h<this.pa-1;h++){i=this.o(h);var l=d,m=i,n=this.o(An(this,i,h,!1));if(!(F.mb(l.x,m.x)&&F.mb(m.x,n.x)||F.mb(l.y,m.y)&&F.mb(m.y,n.y))){var o=k,p=g,q=a;isNaN(o)&&(o=this.mn/3);var r=l.x,l=l.y,s=m.x,m=m.y,u=n.x,n=n.y,v=o*Bn(r,l,s,m),o=o*Bn(s,m,u,n);F.mb(l,m)&&F.mb(s,u)&&(s>r?n>m?(p.x=s-v,p.y=m-v,q.x=s+o,q.y=m+o):(p.x=s-v,p.y=m+v,q.x=s+o,q.y=m-o):n>m?(p.x=s+v,p.y=m-v,q.x=s-o,q.y=m+o):(p.x=s+v,p.y=m+v,q.x=s-o,q.y=m-o)),F.mb(r,s)&&F.mb(m,n)&&(m>l?(u>s?(p.x=s-v,p.y=m-v,q.x=s+o):(p.x=s+v,p.y=m-v,q.x=s-o),q.y=m+o):(u>s?(p.x=s-v,p.y=m+v,q.x=s+o):(p.x=s+v,p.y=m+v,q.x=s-o),q.y=m-o)),(F.mb(r,s)&&F.mb(s,u)||F.mb(l,m)&&F.mb(m,n))&&(r=.5*(r+u),l=.5*(l+n),p.x=r,p.y=l,q.x=r,q.y=l),1===h?(e.x=.5*(d.x+i.x),e.y=.5*(d.y+i.y)):2===h&&F.mb(d.x,this.o(0).x)&&F.mb(d.y,this.o(0).y)&&(e.x=.5*(d.x+i.x),e.y=.5*(d.y+i.y)),J(j,e.x-b,e.y-c,g.x-b,g.y-c,i.x-b,i.y-c),f.set(g),e.set(a),d=i}}h=d.x,d=d.y,f=this.o(this.pa-1),h=.5*(h+f.x),d=.5*(d+f.y),J(j,a.x-b,a.y-c,h-b,d-c,f.x-b,f.y-c)}else for(h=3;a>h;h+=3)d=this.o(h-2),h+3>=a&&(h=a-1),f=this.o(h-1),i=this.o(h),h===a-1&&0!==rn(this)&&(i=i.copy(),zn(this,i,!1,F.mj)),J(j,d.x-b,d.y-c,f.x-b,f.y-c,i.x-b,i.y-c);else{for(f=t.K(),f.assign(this.o(0)),h=1;a>h;){if(h=An(this,f,h,h>1),p=this.o(h),h>=a-1){f!==p&&(0!==rn(this)&&(p=p.copy(),zn(this,p,!1,F.mj)),Cn(this,j,-b,-c,f,p,d));break}h=An(this,p,h+1,a-3>h),e=j,g=-b,i=-c,k=f,q=this.o(h),r=f,l=d,F.I(k.y,p.y)&&F.I(p.x,q.x)?(o=this.computeCorner(),o=Math.min(o,Math.abs(p.x-k.x)/2),o=s=Math.min(o,Math.abs(q.y-p.y)/2),F.I(o,0)?(Cn(this,e,g,i,k,p,l),r.assign(p)):(m=p.x,u=p.y,n=m,v=u,m=p.x>k.x?p.x-o:p.x+o,v=q.y>p.y?p.y+s:p.y-s,Cn(this,e,g,i,k,new w(m,u),l),Sc(e,p.x+g,p.y+i,n+g,v+i),r.p(n,v))):F.I(k.x,p.x)&&F.I(p.y,q.y)?(o=this.computeCorner(),s=Math.min(o,Math.abs(p.y-k.y)/2),s=o=Math.min(s,Math.abs(q.x-p.x)/2),F.I(o,0)?(Cn(this,e,g,i,k,p,l),r.assign(p)):(m=p.x,v=u=p.y,u=p.y>k.y?p.y-s:p.y+s,n=q.x>p.x?p.x+o:p.x-o,Cn(this,e,g,i,k,new w(m,u),l),Sc(e,p.x+g,p.y+i,n+g,v+i),r.p(n,v))):(Cn(this,e,g,i,k,p,l),r.assign(p))}t.B(f)}b=j.s,t.v(j)}return b},t.A(T,{gt:"firstPickIndex"},function(){return 2>=this.pa?0:this.ic||kn(this)!==wb?1:0}),t.A(T,{Ww:"lastPickIndex"},function(){var a=this.pa;return 0===a?0:2>=a?a-1:this.ic||ln(this)!==wb?a-2:a-1}),T.prototype.usesSamePort=function(a){var b=this.pa,c=a.pa;if(b>0&&c>0){if(this.o(0).tf(a.o(0))||this.o(b-1).tf(a.o(c-1)))return!0}else if(this.aa===a.aa||this.ca===a.ca)return!0;return!1},T.prototype.df=function(a){if(C.prototype.df.call(this,a),null!==this.we)for(var b=this.we.k;b.next();)b.value.df(a)},t.g(T,"adjusting",T.prototype.Lo),t.defineProperty(T,{Lo:"adjusting"},function(){return this.lq},function(a){var b=this.lq;b!==a&&(e&&t.Aa(a,T,T,"adjusting"),this.lq=a,this.j("adjusting",b,a))}),t.g(T,"corner",T.prototype.sw),t.defineProperty(T,{sw:"corner"},function(){return this.yq},function(a){var b=this.yq;b!==a&&(e&&t.i(a,"number",T,"corner"),this.yq=a,this.Ye(),this.j("corner",b,a))}),t.g(T,"curve",T.prototype.De),t.defineProperty(T,{De:"curve"},function(){return this.Bq},function(a){var b=this.Bq;b!==a&&(e&&t.Aa(a,T,T,"curve"),this.Bq=a,this.ac(),jn(this,b===yg||b===xg||a===yg||a===xg),this.j("curve",b,a))}),t.g(T,"curviness",T.prototype.Xs),t.defineProperty(T,{Xs:"curviness"},function(){return this.Cq},function(a){var b=this.Cq;b!==a&&(e&&t.i(a,"number",T,"curviness"),this.Cq=a,this.ac(),this.j("curviness",b,a))}),t.g(T,"routing",T.prototype.Lt),t.defineProperty(T,{Lt:"routing"},function(){return this.pm},function(a){var b=this.pm;b!==a&&(e&&t.Aa(a,T,T,"routing"),this.pm=a,this.ui=null,this.ac(),jn(this,2===(2&b.value)||2===(2&a.value)),this.j("routing",b,a))}),t.g(T,"smoothness",T.prototype.mn),t.defineProperty(T,{mn:"smoothness"},function(){return this.ps},function(a){var b=this.ps;b!==a&&(e&&t.i(a,"number",T,"smoothness"),this.ps=a,this.Ye(),this.j("smoothness",b,a))}),t.Vd(Om,{Hp:!0,ix:!0,At:!0,jx:!0,links:!0,spacing:!0}),t.Vd(Tj,{group:!0,nt:!0,abort:!0,XG:!0,sG:!0,kF:!0});var xn=1,yn=1,vn=999999999,Gn=vn;Tj.prototype.initialize=function(a){if(!(0>=a.width||0>=a.height)){var b=a.y,c=a.x+a.width,d=a.y+a.height;if(this.jg=Math.floor((a.x-this.ie)/this.ie)*this.ie,this.kg=Math.floor((b-this.je)/this.je)*this.je,this.ur=Math.ceil((c+2*this.ie)/this.ie)*this.ie,this.vr=Math.ceil((d+2*this.je)/this.je)*this.je,a=1+(0|Math.ceil((this.ur-this.jg)/this.ie)),b=1+(0|Math.ceil((this.vr-this.kg)/this.je)),null===this.wc||this.Go<a-1||this.Ho<b-1){for(c=[],d=0;a>=d;d++){for(var e=[],f=0;b>=f;f++)e[f]=0;c[d]=e}this.wc=c,this.Go=a-1,this.Ho=b-1}if(null!==this.wc)for(a=0;a<=this.Go;a++)for(b=0;b<=this.Ho;b++)this.wc[a][b]=Gn}},t.A(Tj,{Pb:null},function(){return new x(this.jg,this.kg,this.ur-this.jg,this.vr-this.kg)}),t.g(Tj,"cellWidth",Tj.prototype.Hm),t.defineProperty(Tj,{Hm:null},function(){return this.ie},function(a){a>0&&a!==this.ie&&(this.ie=a,this.initialize(this.Pb))}),t.g(Tj,"cellHeight",Tj.prototype.Gm),t.defineProperty(Tj,{Gm:null},function(){return this.je},function(a){a>0&&a!==this.je&&(this.je=a,this.initialize(this.Pb))}),t.Vd(on,{Fc:!0,port:!0,Fg:!0,Gp:!0}),on.prototype.toString=function(){for(var a=this.Fg,b=this.Fc.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];null!==d&&(b+="\n  "+d.toString())}return b},on.prototype.rJ=function(a,b){return a===b?0:null===a?-1:null===b?1:a.be<b.be?-1:a.be>b.be?1:a.angle<b.angle?-1:a.angle>b.angle?1:0},on.prototype.computeEndSegmentLength=function(a){var b=a.link,c=b.computeEndSegmentLength(this.Fc,this.port,wb,b.ud===this.port),d=a.mp;if(0>d)return c;var e=a.Lm;if(1>=e||!b.ic)return c;var b=a.hx,f=a.xp;return(a.be===t.Jc||a.be===t.Sc)&&(d=e-1-d),((a=a.be===t.Jc||a.be===t.Tc)?b.y<f.y:b.x<f.x)?c+8*d:(a?b.y===f.y:b.x===f.x)?c:c+8*(e-1-d)},t.Vd(Ln,{link:!0,angle:!0,be:!0,hx:!0,mp:!0,Lm:!0,xp:!0,Aw:!0}),Ln.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.be.toString()+":"+this.mp.toString()+"/"+this.Lm.toString()+" "+this.xp.toString()+" "+this.Aw.toString()+" "+this.hx.toString()},t.ga("Group",S),t.Ka(S,R),S.prototype.cloneProtected=function(a){R.prototype.cloneProtected.call(this,a),a.wr=this.wr,a.yr=this.yr,a.Ok=this.Ok,a.Es=this.Es,a.br=this.br,a.Fs=this.Fs,a.ts=this.ts;var b=a.bt(function(a){return a instanceof Ug});a.Jb=b instanceof Ug?b:null,a.uq=this.uq,a.vq=this.vq,a.wq=this.wq,null!==this.Pd?(a.Pd=this.Pd.copy(),a instanceof S&&(a.Pd.group=a)):(null!==a.Pd&&(a.Pd.group=null),a.Pd=null)},S.prototype.Yh=function(a){R.prototype.Yh.call(this,a);var b=a.dp();for(a=a.Rc;a.next();){var c=a.value;if(c.ha(),c.J(8),c.Wi(),c instanceof R)c.wf(b);else if(c instanceof T)for(c=c.fk;c.next();)c.value.wf(b)}},S.prototype.gn=function(a,b,c,d,e,f,g){if(a===wd&&"elements"===b){if(e instanceof Ug)null===this.Jb?this.Jb=e:this.Jb!==e&&t.m("Cannot insert a second Placeholder into the visual tree of a Group.");else if(e instanceof y){var h=e.bt(function(a){return a instanceof Ug});h instanceof Ug&&(null===this.Jb?this.Jb=h:this.Jb!==h&&t.m("Cannot insert a second Placeholder into the visual tree of a Group."))}}else a===xd&&"elements"===b&&null!==this.Jb&&(d===this.Jb?this.Jb=null:d instanceof y&&this.Jb.ej(d)&&(this.Jb=null));R.prototype.gn.call(this,a,b,c,d,e,f,g)},S.prototype.Tj=function(a,b,c,d){this.Nk=this.Jb,y.prototype.Tj.call(this,a,b,c,d)},S.prototype.ol=function(){if(!R.prototype.ol.call(this))return!1;for(var a=this.Rc;a.next();){var b=a.value;if(b instanceof R){if(b.La()&&Ri(b))return!1}else if(b instanceof T&&b.La()&&Ri(b)&&b.aa!==this&&b.ca!==this)return!1}return!0},t.A(S,{placeholder:"placeholder"},function(){return this.Jb}),t.g(S,"computesBoundsAfterDrag",S.prototype.Vz),t.defineProperty(S,{Vz:"computesBoundsAfterDrag"},function(){return this.uq},function(a){var b=this.uq;b!==a&&(t.i(a,"boolean",S,"computesBoundsAfterDrag"),this.uq=a,this.j("computesBoundsAfterDrag",b,a))}),t.g(S,"computesBoundsIncludingLinks",S.prototype.$D),t.defineProperty(S,{$D:"computesBoundsIncludingLinks"},function(){return this.vq},function(a){t.i(a,"boolean",S,"computesBoundsIncludingLinks");var b=this.vq;b!==a&&(this.vq=a,this.j("computesBoundsIncludingLinks",b,a))}),t.g(S,"computesBoundsIncludingLocation",S.prototype.aE),t.defineProperty(S,{aE:"computesBoundsIncludingLocation"},function(){return this.wq},function(a){t.i(a,"boolean",S,"computesBoundsIncludingLocation");var b=this.wq;b!==a&&(this.wq=a,this.j("computesBoundsIncludingLocation",b,a))}),t.A(S,{Rc:"memberParts"},function(){return this.xr.k}),S.prototype.Nm=function(){if(0<this.xr.count){var a=this.h;if(null===a)return;for(var b=this.xr.copy().k;b.next();)a.remove(b.value)}R.prototype.Nm.call(this)},S.prototype.xx=function(){var a=this.layer;null!==a&&a.xx(this)},t.g(S,"layout",S.prototype.jc),t.defineProperty(S,{jc:"layout"},function(){return this.Pd},function(a){var b=this.Pd;b!==a&&(null!==a&&t.l(a,be,S,"layout"),null!==b&&(b.h=null,b.group=null),this.Pd=a,null!==a&&(a.h=this.h,a.group=this),this.j("layout",b,a))}),t.g(S,"memberAdded",S.prototype.vF),t.defineProperty(S,{vF:"memberAdded"},function(){return this.wr},function(a){var b=this.wr;b!==a&&(null!==a&&t.i(a,"function",S,"memberAdded"),this.wr=a,this.j("memberAdded",b,a))}),t.g(S,"memberRemoved",S.prototype.wF),t.defineProperty(S,{wF:"memberRemoved"},function(){return this.yr},function(a){var b=this.yr;b!==a&&(null!==a&&t.i(a,"function",S,"memberRemoved"),this.yr=a,this.j("memberRemoved",b,a))}),t.g(S,"memberValidation",S.prototype.vt),t.defineProperty(S,{vt:"memberValidation"},function(){return this.Ok},function(a){var b=this.Ok;b!==a&&(null!==a&&t.i(a,"function",S,"memberValidation"),this.Ok=a,this.j("memberValidation",b,a))}),S.prototype.canAddMembers=function(a){var b=this.h;if(null===b)return!1;for(b=b.Se,a=Ye(a).k;a.next();)if(!b.isValidMember(this,a.value))return!1;return!0},S.prototype.addMembers=function(a,b){var c=this.h;if(null===c)return!1;for(var c=c.Se,d=!0,e=Ye(a).k;e.next();){var f=e.value;!b||c.isValidMember(this,f)?f.hb=this:d=!1}return d},t.g(S,"ungroupable",S.prototype.NG),t.defineProperty(S,{NG:"ungroupable"},function(){return this.Es},function(a){var b=this.Es;b!==a&&(t.i(a,"boolean",S,"ungroupable"),this.Es=a,this.j("ungroupable",b,a))}),S.prototype.canUngroup=function(){if(!this.NG)return!1;var a=this.layer;return null===a||a.Ro?(a=a.h,null===a||a.Ro?!0:!1):!1},S.prototype.invalidateConnectedLinks=S.prototype.wf=function(a){void 0===a&&(a=null),R.prototype.wf.call(this,a);for(var b=this.xE();b.next();){var c=b.value;if(null===a||!a.contains(c)){var d=c.aa;null!==d&&d.nl(this)&&!d.La()?c.ac():(d=c.ca,null!==d&&d.nl(this)&&!d.La()&&c.ac())}}},S.prototype.findExternalLinksConnected=S.prototype.xE=function(){var a=this.dp();a.add(this);for(var b=new ma(T),c=a.k;c.next();){var d=c.value;if(d instanceof R)for(d=d.qe;d.next();){var e=d.value;a.contains(e)||b.add(e)}}return b.k},S.prototype.findExternalNodesConnected=function(){var a=this.dp();a.add(this);for(var b=new ma(R),c=a.k;c.next();){var d=c.value;if(d instanceof R)for(d=d.qe;d.next();){var e=d.value,f=e.aa;a.contains(f)&&f!==this||b.add(f),e=e.ca,a.contains(e)&&e!==this||b.add(e)}}return b.k},S.prototype.findSubGraphParts=S.prototype.dp=function(){var a=new ma(C);return Ie(a,this,!0,0),a.remove(this),a},S.prototype.df=function(a){R.prototype.df.call(this,a);for(var b=this.Rc;b.next();)b.value.df(a)},S.prototype.collapseSubGraph=S.prototype.collapseSubGraph=function(){var a=this.h;if(null!==a&&!a.Wd){a.Wd=!0;var b=this.dp();Mn(this,b),a.Wd=!1}},S.prototype.expandSubGraph=S.prototype.expandSubGraph=function(){var a=this.h;if(null!==a&&!a.Wd){var b=a.Ub;0!==a.la.Je&&b.ul(),a.Wd=!0;var c=this.dp();Nn(this,c,b,this),a.Wd=!1}},t.g(S,"isSubGraphExpanded",S.prototype.Yd),t.defineProperty(S,{Yd:"isSubGraphExpanded"},function(){return this.br},function(a){var b=this.br;if(b!==a){t.i(a,"boolean",S,"isSubGraphExpanded"),this.br=a;var c=this.h;if(this.j("isSubGraphExpanded",b,a),b=this.yG,null!==b){var d=!0;null!==c&&(d=c.Na,c.Na=!0),b(this),null!==c&&(c.Na=d)}null!==c&&c.la.vb||(a?this.expandSubGraph():this.collapseSubGraph())}}),t.g(S,"wasSubGraphExpanded",S.prototype.Dx),t.defineProperty(S,{Dx:"wasSubGraphExpanded"},function(){return this.Fs},function(a){var b=this.Fs;b!==a&&(t.i(a,"boolean",S,"wasSubGraphExpanded"),this.Fs=a,this.j("wasSubGraphExpanded",b,a))}),t.g(S,"subGraphExpandedChanged",S.prototype.yG),t.defineProperty(S,{yG:"subGraphExpandedChanged"},function(){return this.ts},function(a){var b=this.ts;b!==a&&(null!==a&&t.i(a,"function",S,"subGraphExpandedChanged"),this.ts=a,this.j("subGraphExpandedChanged",b,a))}),S.prototype.move=S.prototype.move=function(a){var b=this.position,c=b.x;isNaN(c)&&(c=0),b=b.y,isNaN(b)&&(b=0);var c=a.x-c,b=a.y-b,d=t.mc(c,b);for(R.prototype.move.call(this,a),a=this.dp().k;a.next();){var e=a.value;if(!(e instanceof T||e.bi)){var f=e.position,g=e.location;f.N()?(d.x=f.x+c,d.y=f.y+b,e.position=d):g.N()&&(d.x=g.x+c,d.y=g.y+b,e.location=d)}}for(a.reset();a.next();)e=a.value,e instanceof T&&(f=e.position,d.x=f.x+c,d.y=f.y+b,e.move(d));t.B(d)},t.ga("Placeholder",Ug),t.Ka(Ug,Q),Ug.prototype.cloneProtected=function(a){Q.prototype.cloneProtected.call(this,a),a.Ne=this.Ne.Z(),a.cs=this.cs.copy()},Ug.prototype.Uj=function(a){if(null===this.background&&null===this.$k)return!1;var b=this.Pa;return mb(0,0,b.width,b.height,a.x,a.y)},Ug.prototype.ut=function(){var a=this.S;if(null!==a&&(a instanceof S||a instanceof Je)||t.m("Placeholder is not inside a Group or Adornment."),a instanceof S){var b=this.computeBorder(this.cs),c=this.hd;Va(c,b.width||0,b.height||0),nk(this,0,0,c.width,c.height);for(var c=a.Rc,d=!1;c.next();)if(c.value.La()){d=!0;break}!d||isNaN(b.x)||isNaN(b.y)||(c=new w,c.Qt(b,a.bf),a.location=new w(c.x,c.y))}else{var b=this.Ca,c=this.hd,a=this.padding,d=a.left+a.right,e=a.top+a.bottom;if(b.N())Va(c,b.width+d||0,b.height+e||0),nk(this,-a.left,-a.top,c.width,c.height);else{var f=this.S,g=f.pc,h=g.pb(Eb,t.K()),b=t.ik(h.x,h.y,0,0);b.kj(g.pb(Pb,h)),b.kj(g.pb(Gb,h)),b.kj(g.pb(Lb,h)),f.Yg.p(b.x,b.y),Va(c,b.width+d||0,b.height+e||0),nk(this,-a.left,-a.top,c.width,c.height),t.B(h),t.hc(b)}}},Ug.prototype.Tj=function(a,b,c,d){var e=this.oa;e.x=a,e.y=b,e.width=c,e.height=d},Ug.prototype.computeBorder=function(a){var b=this.S;if(b instanceof S&&b.Vz&&this.cs.N()){var c=b.h;if(null!==c&&(c=c.Ua,c instanceof cf&&!c.Iq&&null!==c.qc&&!c.qc.contains(b)))return a.assign(this.cs),a}var c=t.Gf(),d=this.computeMemberBounds(c),e=this.padding;return a.p(d.x-e.left,d.y-e.top,d.width+e.left+e.right,d.height+e.top+e.bottom),t.hc(c),b instanceof S&&b.aE&&b.location.N()&&a.kj(b.location),a},Ug.prototype.computeMemberBounds=function(a){var b=this.S;if(!(b instanceof S))return a.p(0,0,0,0),a;for(var c=1/0,d=1/0,e=-(1/0),f=-(1/0),g=b.Rc;g.next();){var h=g.value;if(h.La()){if(h instanceof T){if(!b.$D)continue;if(Qi(h))continue;if(h.aa===b||h.ca===b)continue}h=h.oa,h.left<c&&(c=h.left),h.top<d&&(d=h.top),h.right>e&&(e=h.right),h.bottom>f&&(f=h.bottom)}}return isFinite(c)&&isFinite(d)?a.p(c,d,e-c,f-d):(b=b.location,c=this.padding,a.p(b.x+c.left,b.y+c.top,0,0)),a},t.g(Ug,"padding",Ug.prototype.padding),t.defineProperty(Ug,{padding:"padding"},function(){return this.Ne},function(a){"number"==typeof a?(0>a&&t.ka(a,">= 0",Ug,"padding"),a=new ab(a)):(t.l(a,ab,Ug,"padding"),0>a.left&&t.ka(a.left,">= 0",Ug,"padding:val.left"),0>a.right&&t.ka(a.right,">= 0",Ug,"padding:val.right"),0>a.top&&t.ka(a.top,">= 0",Ug,"padding:val.top"),0>a.bottom&&t.ka(a.bottom,">= 0",Ug,"padding:val.bottom"));var b=this.Ne;b.M(a)||(this.Ne=a=a.Z(),this.j("padding",b,a))}),t.ga("Layout",be),be.prototype.cloneProtected=function(a){a.Zq=this.Zq,a.Xq=this.Xq,this.Xq||(a.co=!0),a.gr=this.gr,a.nq.assign(this.nq),a.$q=this.$q},be.prototype.copy=function(){var a=new this.constructor;return this.cloneProtected(a),a},be.prototype.toString=function(){var a=t.xg(Object.getPrototypeOf(this)),a=a+"(";return null!==this.group&&(a+=" in "+this.group),null!==this.h&&(a+=" for "+this.h),a+")"},t.g(be,"diagram",be.prototype.h),t.defineProperty(be,{h:"diagram"},function(){return this.U},function(a){this.U!==a&&(null!==a&&t.l(a,z,be,"diagram"),this.U=a)}),t.g(be,"group",be.prototype.group),t.defineProperty(be,{group:"group"},function(){return this.Wy},function(a){this.Wy!==a&&(null!==a&&t.l(a,S,be,"group"),this.Wy=a,null!==a&&(this.U=a.h))}),t.g(be,"isOngoing",be.prototype.fF),t.defineProperty(be,{fF:"isOngoing"},function(){return this.Zq},function(a){this.Zq!==a&&(t.i(a,"boolean",be,"isOngoing"),this.Zq=a)}),t.g(be,"isInitial",be.prototype.eF),t.defineProperty(be,{eF:"isInitial"},function(){return this.Xq},function(a){t.i(a,"boolean",be,"isInitial"),this.Xq=a,a||(this.co=!0)}),t.g(be,"isValidLayout",be.prototype.$e),t.defineProperty(be,{$e:"isValidLayout"},function(){return this.co},function(a){this.co!==a&&(t.i(a,"boolean",be,"isValidLayout"),this.co=a,a||(a=this.h,null!==a&&(a.mu=!0)))}),be.prototype.invalidateLayout=be.prototype.J=function(){if(this.co){var a=this.h;if(null!==a&&!a.la.vb){var b=a.Ub;!b.cr&&(b.yg&&b.Al(),this.fF&&a.lf||this.eF&&!a.lf)&&(this.$e=!1,a.te())}}},t.g(be,"isRealtime",be.prototype.wA),t.defineProperty(be,{wA:"isRealtime"},function(){return this.$q},function(a){this.$q!==a&&(t.i(a,"boolean",be,"isRealtime"),this.$q=a)}),t.g(be,"isViewportSized",be.prototype.st),t.defineProperty(be,{st:"isViewportSized"},function(){return this.gr},function(a){this.gr!==a&&(t.i(a,"boolean",be,"isViewportSized"),(this.gr=a)&&this.J())}),t.g(be,"isRouting",be.prototype.rt),t.defineProperty(be,{rt:"isRouting"},function(){return this.az},function(a){this.az!==a&&(t.i(a,"boolean",be,"isRouting"),this.az=a)}),t.g(be,"network",be.prototype.network),t.defineProperty(be,{network:"network"},function(){return this.kz},function(a){var b=this.kz;b!==a&&(null!==a&&t.l(a,ta,be,"network"),null!==b&&On(b,null),this.kz=a,null!==a&&On(a,this))}),be.prototype.createNetwork=function(){var a=new ta;return On(a,this),a},be.prototype.makeNetwork=function(a){var b=this.createNetwork();return a instanceof z?(b.Ks(a.jh,!0),b.Ks(a.links,!0)):a instanceof S?b.Ks(a.Rc):b.Ks(a.k),b},be.prototype.updateParts=function(){var a=this.h;if(null===a&&null!==this.network)for(var b=this.network.vertexes.k;b.next();){var c=b.value.Fc;if(null!==c&&(a=c.h,null!==a))break}this.$e=!0,null!==a&&a.uc("Layout"),this.commitLayout(),null!==a&&a.Ce("Layout")},be.prototype.commitLayout=function(){},be.prototype.doLayout=function(a){a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var b=new ma(C);a===this.h?(Pn(this,b,a.jh,!0,this.FA,!0,!1,!0),Pn(this,b,a.sl,!0,this.FA,!0,!1,!0)):a===this.group?Pn(this,b,a.Rc,!1,this.FA,!0,!1,!0):b.Oe(a.k);var c=b.count;if(c>0){a=this.h,null!==a&&a.uc("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Fd.x,e=d,f=this.Fd.y,g=0,h=0,b=b.k;b.next();){var i=b.value;i.sf();var j=i.Ga,k=j.width,j=j.height;i.moveTo(e,f),delete i.LC,e+=Math.max(k,50)+20,h=Math.max(h,Math.max(j,50)),g>=c-1?(g=0,e=d,f+=h+20,h=0):g++}null!==a&&a.Ce("Layout")}this.$e=!0},be.prototype.FA=function(a){return!a.location.N()||a instanceof S&&a.LC?!0:!1},t.g(be,"arrangementOrigin",be.prototype.Fd),t.defineProperty(be,{Fd:"arrangementOrigin"},function(){return this.nq},function(a){t.l(a,w,be,"arrangementOrigin"),this.nq.M(a)||(this.nq.assign(a),this.J())}),be.prototype.initialOrigin=function(a){var b=this.group;if(null!==b){var c=b.location;return isNaN(c.x)||isNaN(c.y)?a:(a=b.placeholder,null!==a?(c=a.pb(Eb),c.x+=a.padding.left,c.y+=a.padding.top):c=b.position.copy(),c)}return a},t.ga("LayoutNetwork",ta),ta.prototype.clear=function(){if(this.vertexes)for(var a=this.vertexes.k;a.next();){var b=a.value;b.clear(),b.network=null}if(this.edges)for(a=this.edges.k;a.next();)b=a.value,b.clear(),b.network=null;this.vertexes=new ma(ua),this.edges=new ma(va),this.IA=new ia(R,ua),this.yA=new ia(T,va)},ta.prototype.toString=function(){return"LayoutNetwork"+(null!==this.jc?"("+this.jc.toString()+")":"")},t.A(ta,{jc:"layout"},function(){return this.Pd}),ta.prototype.createVertex=function(){return new ua},ta.prototype.createEdge=function(){return new va},ta.prototype.addParts=ta.prototype.Ks=function(a,b){if(null!==a){void 0===b&&(b=!1),t.i(b,"boolean",ta,"addParts:toplevelonly");for(var c=a.k;c.next();){var d=c.value;if(d instanceof R&&(!b||d.sp)&&d.canLayout()&&!d.bi)if(d instanceof S&&null===d.jc)this.Ks(d.Rc,!1);else if(null===this.Rm(d)){var e=this.createVertex();e.Fc=d,this.Yk(e)}}for(c.reset();c.next();)if(d=c.value,d instanceof T&&(!b||d.sp)&&d.canLayout()&&null===this.Bw(d)){var f=d.aa,e=d.ca;f!==e&&(f=this.findGroupVertex(f),e=this.findGroupVertex(e),null!==f&&null!==e&&this.an(f,e,d))}}},ta.prototype.findGroupVertex=function(a){if(null===a)return null;var b=a.findVisibleNode();if(null===b)return null;if(a=this.Rm(b),null!==a)return a;for(b=b.hb;null!==b;){if(a=this.Rm(b),null!==a)return a;b=b.hb}return null},ta.prototype.addVertex=ta.prototype.Yk=function(a){if(null!==a){e&&t.l(a,ua,ta,"addVertex:vertex"),this.vertexes.add(a);var b=a.Fc;null!==b&&this.IA.add(b,a),a.network=this}},ta.prototype.addNode=ta.prototype.Ko=function(a){if(null===a)return null;e&&t.l(a,R,ta,"addNode:node");var b=this.Rm(a);return null===b&&(b=this.createVertex(),b.Fc=a,this.Yk(b)),b},ta.prototype.deleteVertex=ta.prototype.rE=function(a){if(null!==a&&(e&&t.l(a,ua,ta,"deleteVertex:vertex"),Qn(this,a))){for(var b=a.ff,c=b.count-1;c>=0;c--){var d=b.wa(c);this.Zo(d)}for(b=a.Te,c=b.count-1;c>=0;c--)d=b.wa(c),this.Zo(d)}},ta.prototype.deleteNode=function(a){null!==a&&(e&&t.l(a,R,ta,"deleteNode:node"),a=this.Rm(a),null!==a&&this.rE(a))},ta.prototype.findVertex=ta.prototype.Rm=function(a){return null===a?null:(e&&t.l(a,R,ta,"findVertex:node"),this.IA.za(a))},ta.prototype.addEdge=ta.prototype.Jo=function(a){if(null!==a){e&&t.l(a,va,ta,"addEdge:edge"),this.edges.add(a);var b=a.link;null!==b&&null===this.Bw(b)&&this.yA.add(b,a),b=a.toVertex,null!==b&&b.HD(a),b=a.fromVertex,null!==b&&b.FD(a),a.network=this}},ta.prototype.addLink=function(a){if(null===a)return null;e&&t.l(a,T,ta,"addLink:link");var b=a.aa,c=a.ca,d=this.Bw(a);return null===d?(d=this.createEdge(),d.link=a,null!==b&&(d.fromVertex=this.Ko(b)),null!==c&&(d.toVertex=this.Ko(c)),this.Jo(d)):(d.fromVertex=null!==b?this.Ko(b):null,d.toVertex=null!==c?this.Ko(c):null),d},ta.prototype.deleteEdge=ta.prototype.Zo=function(a){if(null!==a){e&&t.l(a,va,ta,"deleteEdge:edge");var b=a.toVertex;null!==b&&b.qE(a),b=a.fromVertex,null!==b&&b.pE(a),Rn(this,a)}},ta.prototype.deleteLink=function(a){null!==a&&(e&&t.l(a,T,ta,"deleteLink:link"),a=this.Bw(a),null!==a&&this.Zo(a))},ta.prototype.findEdge=ta.prototype.Bw=function(a){return null===a?null:(e&&t.l(a,T,ta,"findEdge:link"),this.yA.za(a))},ta.prototype.linkVertexes=ta.prototype.an=function(a,b,c){if(null===a||null===b)return null;if(e&&(t.l(a,ua,ta,"linkVertexes:fromVertex"),t.l(b,ua,ta,"linkVertexes:toVertex"),null!==c&&t.l(c,T,ta,"linkVertexes:link")),a.network===this&&b.network===this){var d=this.createEdge();return d.link=c,d.fromVertex=a,d.toVertex=b,this.Jo(d),d}return null},ta.prototype.reverseEdge=ta.prototype.ox=function(a){if(null!==a){e&&t.l(a,va,ta,"reverseEdge:edge");var b=a.fromVertex,c=a.toVertex;null!==b&&null!==c&&(b.pE(a),c.qE(a),a.ox(),b.HD(a),c.FD(a))}},ta.prototype.deleteSelfEdges=ta.prototype.xw=function(){for(var a=t.Db(),b=this.edges.k;b.next();){var c=b.value;c.fromVertex===c.toVertex&&a.push(c)}for(b=a.length,c=0;b>c;c++)this.Zo(a[c]);t.ya(a)},ta.prototype.deleteArtificialVertexes=function(){for(var a=t.Db(),b=this.vertexes.k;b.next();){var c=b.value;null===c.Fc&&a.push(c)}for(c=a.length,b=0;c>b;b++)this.rE(a[b]);for(c=t.Db(),b=this.edges.k;b.next();){var d=b.value;null===d.link&&c.push(d)}for(d=c.length,b=0;d>b;b++)this.Zo(c[b]);t.ya(a),t.ya(c)},ta.prototype.splitIntoSubNetworks=ta.prototype.VJ=function(){this.deleteArtificialVertexes(),Sn(this),this.xw();for(var a=new B(ta),b=!0;b;)for(var b=!1,c=this.vertexes.k;c.next();){var d=c.value;if(0<d.ff.count||0<d.Te.count){b=this.jc.createNetwork(),a.add(b),Tn(this,b,d),b=!0;break}}return a.sort(function(a,b){return null===a||null===b||a===b?0:b.vertexes.count-a.vertexes.count}),a},ta.prototype.findAllParts=function(){for(var a=new ma(C),b=this.vertexes.k;b.next();)a.add(b.value.Fc);for(b=this.edges.k;b.next();)a.add(b.value.link);return a},t.ga("LayoutVertex",ua),ua.prototype.clear=function(){this.rd=null,this.ff=new B(va),this.Te=new B(va)},ua.prototype.toString=function(){return"LayoutVertex#"+t.od(this)+(null!==this.Fc?"("+this.Fc.toString()+")":"")},t.g(ua,"node",ua.prototype.Fc),t.defineProperty(ua,{Fc:"node"},function(){return this.rd},function(a){if(this.rd!==a){e&&null!==a&&t.l(a,R,ua,"node"),this.rd=a,a.sf();var b=a.oa,c=b.x,d=b.y,f=b.width,b=b.height;if(isNaN(c)&&(c=0),isNaN(d)&&(d=0),this.T.p(c,d,f,b),!(a instanceof S)&&(a=a.kc.pb(Hb),a.N()))return void this.O.p(a.x-c,a.y-d);this.O.p(f/2,b/2)}}),t.g(ua,"bounds",ua.prototype.Pb),t.defineProperty(ua,{Pb:"bounds"},function(){return this.T},function(a){this.T.M(a)||(e&&t.l(a,x,ua,"bounds"),this.T.assign(a))}),t.g(ua,"focus",ua.prototype.focus),t.defineProperty(ua,{focus:"focus"},function(){return this.O},function(a){this.O.M(a)||(e&&t.l(a,w,ua,"focus"),this.O.assign(a))}),t.g(ua,"centerX",ua.prototype.Da),t.defineProperty(ua,{Da:"centerX"},function(){return this.T.x+this.O.x},function(a){var b=this.T;b.x+this.O.x!==a&&(e&&t.q(a,ua,"centerX"),b.Ma(),b.x=a-this.O.x,b.freeze())}),t.g(ua,"centerY",ua.prototype.Oa),t.defineProperty(ua,{Oa:"centerY"},function(){return this.T.y+this.O.y},function(a){var b=this.T;b.y+this.O.y!==a&&(e&&t.q(a,ua,"centerY"),b.Ma(),b.y=a-this.O.y,b.freeze())}),t.g(ua,"focusX",ua.prototype.fp),t.defineProperty(ua,{fp:"focusX"},function(){return this.O.x},function(a){var b=this.O;b.x!==a&&(b.Ma(),b.x=a,b.freeze())}),t.g(ua,"focusY",ua.prototype.gp),t.defineProperty(ua,{gp:"focusY"},function(){return this.O.y},function(a){var b=this.O;b.y!==a&&(b.Ma(),b.y=a,b.freeze())}),t.g(ua,"x",ua.prototype.x),t.defineProperty(ua,{x:"x"},function(){return this.T.x},function(a){var b=this.T;b.x!==a&&(b.Ma(),b.x=a,b.freeze())}),t.g(ua,"y",ua.prototype.y),t.defineProperty(ua,{y:"y"},function(){return this.T.y},function(a){var b=this.T;b.y!==a&&(b.Ma(),b.y=a,b.freeze())}),t.g(ua,"width",ua.prototype.width),t.defineProperty(ua,{width:"width"},function(){return this.T.width},function(a){var b=this.T;b.width!==a&&(b.Ma(),b.width=a,b.freeze())}),t.g(ua,"height",ua.prototype.height),t.defineProperty(ua,{height:"height"},function(){return this.T.height},function(a){var b=this.T;b.height!==a&&(b.Ma(),b.height=a,b.freeze())}),ua.prototype.commit=function(){var a=this.Fc;if(null!==a){var b=this.Pb;if(!(a instanceof S)){var c=a.oa,d=a.kc.pb(Hb);if(c.N()&&d.N())return void a.moveTo(b.x+this.fp-(d.x-c.x),b.y+this.gp-(d.y-c.y))}a.moveTo(b.x,b.y)}},ua.prototype.addSourceEdge=ua.prototype.HD=function(a){null!==a&&(e&&t.l(a,va,ua,"addSourceEdge:edge"),this.ff.contains(a)||this.ff.add(a))},ua.prototype.deleteSourceEdge=ua.prototype.qE=function(a){null!==a&&(e&&t.l(a,va,ua,"deleteSourceEdge:edge"),this.ff.remove(a))},ua.prototype.addDestinationEdge=ua.prototype.FD=function(a){null!==a&&(e&&t.l(a,va,ua,"addDestinationEdge:edge"),this.Te.contains(a)||this.Te.add(a))},ua.prototype.deleteDestinationEdge=ua.prototype.pE=function(a){null!==a&&(e&&t.l(a,va,ua,"deleteDestinationEdge:edge"),this.Te.remove(a))},t.A(ua,{SJ:"sourceVertexes"},function(){for(var a=new ma(ua),b=this.tc;b.next();){var c=b.value.fromVertex;null===c||a.contains(c)||a.add(c)}return a.k}),t.A(ua,{xI:"destinationVertexes"},function(){for(var a=new ma(ua),b=this.gc;b.next();){var c=b.value.toVertex;null===c||a.contains(c)||a.add(c)}return a.k}),t.A(ua,{vertexes:"vertexes"},function(){for(var a=new ma(ua),b=this.tc;b.next();){var c=b.value,c=c.fromVertex;null===c||a.contains(c)||a.add(c)}for(b=this.gc;b.next();)c=b.value,c=c.toVertex,null===c||a.contains(c)||a.add(c);return a.k}),t.A(ua,{tc:"sourceEdges"},function(){return this.ff.k}),t.A(ua,{gc:"destinationEdges"},function(){return this.Te.k}),t.A(ua,{edges:"edges"},function(){for(var a=new B(va),b=this.tc;b.next();){var c=b.value;a.add(c)}for(b=this.gc;b.next();)c=b.value,a.add(c);return a.k}),t.A(ua,{DI:"edgesCount"},function(){return this.ff.count+this.Te.count});var Un;ua.standardComparer=Un=function(a,b){e&&t.l(a,ua,ua,"standardComparer:m"),e&&t.l(b,ua,ua,"standardComparer:n");var c=a.rd,d=b.rd;return c?d?(c=c.text,d=d.text,d>c?-1:c>d?1:0):1:null!==d?-1:0;
},ua.smartComparer=function(a,b){if(e&&t.l(a,ua,ua,"smartComparer:m"),e&&t.l(b,ua,ua,"smartComparer:n"),null!==a){if(null!==b){var c=a.rd,d=b.rd;if(null!==c){if(null!==d){var f,c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(f=0;f<c.length;f++)if(""!==d[f]&&void 0!==d[f]){var g=parseFloat(c[f]),h=parseFloat(d[f]);if(isNaN(g)){if(!isNaN(h))return 1;if(0!==c[f].localeCompare(d[f]))return c[f].localeCompare(d[f])}else{if(isNaN(h))return-1;if(0!==g-h)return g-h}}else if(""!==c[f])return 1;return""!==d[f]&&void 0!==d[f]?-1:0}return 1}return null!==d?-1:0}return 1}return null!==b?-1:0},t.ga("LayoutEdge",va),va.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=null},va.prototype.toString=function(){return"LayoutEdge#"+t.od(this)+(null!==this.link?"("+this.link.toString()+")":"")},va.prototype.ox=function(){var a=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=a},va.prototype.commit=function(){},va.prototype.getOtherVertex=va.prototype.II=function(a){return e&&t.l(a,ua,va,"getOtherVertex:v"),this.toVertex===a?this.fromVertex:this.fromVertex===a?this.toVertex:null},t.ga("GridLayout",ck),t.Ka(ck,be),ck.prototype.cloneProtected=function(a){be.prototype.cloneProtected.call(this,a),a.Is=this.Is,a.Hs=this.Hs,a.pj.assign(this.pj),a.Nh.assign(this.Nh),a.ue=this.ue,a.cd=this.cd,a.Mh=this.Mh,a.th=this.th},ck.prototype.doLayout=function(a){a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.Fd=this.initialOrigin(this.Fd);var b=this.h,c=new ma(C);for(a instanceof z?(b=a,Pn(this,c,a.jh,!0,null,!0,!0,!0),Pn(this,c,a.links,!0,null,!0,!0,!0),Pn(this,c,a.sl,!0,null,!0,!0,!0)):a instanceof S?(b=a.h,Pn(this,c,a.Rc,!1,null,!0,!0,!0)):c.Oe(a.k),a=c.copy().k;a.next();){var d=a.value;if(d instanceof T&&(null!==d.aa||null!==d.ca))c.remove(d);else if(d.sf(),d instanceof S)for(d=d.Rc;d.next();)c.remove(d.value)}if(c=c.Ie(),0!==c.length){switch(this.sorting){case il:c.reverse();break;case fl:c.sort(this.comparer);break;case gl:c.sort(this.comparer),c.reverse()}var e=this.ZG;isNaN(e)&&(e=0);var f=this.qB,f=isNaN(f)&&null!==b?Math.max(b.xb.width-b.padding.left-b.padding.right,0):Math.max(this.qB,0);0>=e&&0>=f&&(e=1),a=this.spacing.width,isFinite(a)||(a=0),d=this.spacing.height,isFinite(d)||(d=0),null!==b&&b.uc("Layout");var g=[];switch(this.alignment){case ml:var h=a,i=d,j=Math.max(this.al.width,1);if(!isFinite(j))for(var k=j=0;k<c.length;k++)var l=c[k],m=l.Ga,j=Math.max(j,m.width);var j=Math.max(j+h,1),n=Math.max(this.al.height,1);if(!isFinite(n))for(k=n=0;k<c.length;k++)l=c[k],m=l.Ga,n=Math.max(n,m.height);for(var n=Math.max(n+i,1),o=this.Qe,p=this.Fd.x,q=p,r=this.Fd.y,s=0,u=0,k=0;k<c.length;k++){var v,l=c[k],m=l.Ga,y=Math.ceil((m.width+h)/j)*j,A=Math.ceil((m.height+i)/n)*n;switch(o){case kl:v=Math.abs(q-m.width);break;default:v=q+m.width}switch((e>0&&s>e-1||f>0&&s>0&&v>f)&&(g.push(new x(0,r,f,u+i)),s=0,q=p,r+=u,u=0),u=Math.max(u,A),o){case kl:m=-m.width;break;default:m=0}switch(l.moveTo(q+m,r),o){case kl:q-=y;break;default:q+=y}s++}g.push(new x(0,r,f,u+i));break;case ll:for(h=a,i=d,j=Math.max(this.al.width,1),k=s=m=0,l=t.K(),n=0;n<c.length;n++)o=c[n],p=o.Ga,q=Cm(o,o.kc,o.bf,l),m=Math.max(m,q.x),s=Math.max(s,p.width-q.x),k=Math.max(k,q.y);switch(r=this.Qe){case kl:m+=h;break;default:s+=h}var j=isFinite(j)?Math.max(j+h,1):Math.max(m+s,1),B=s=this.Fd.x,u=this.Fd.y,y=0;f>=m&&(f-=m),m=0,A=Math.max(this.al.height,1),v=k=0;for(var D=!0,E=t.K(),n=0;n<c.length;n++){if(o=c[n],p=o.Ga,q=Cm(o,o.kc,o.bf,l),y>0)switch(r){case kl:B=Math.floor((B-s-(p.width-q.x))/j)*j+s;break;default:B=Math.ceil((B-s+q.x)/j)*j+s}else switch(r){case kl:m=B+q.x+p.width;break;default:m=B-q.x}var F;switch(r){case kl:F=-(B+q.x)+m;break;default:F=B+p.width-q.x-m}if(e>0&&y>e-1||f>0&&y>0&&F>f){for(g.push(new x(0,u,f,(D?v:v+k)+i)),B=0;y>B&&n!==y;B++){F=c[n-y+B];var G=Cm(F,F.kc,F.bf,E);F.moveTo(F.position.x,F.position.y+k-G.y)}v+=i,u=D?u+v:u+(v+k),y=v=k=0,B=s,D=!1}switch(k=Math.max(k,q.y),v=Math.max(v,p.height-q.y),isFinite(A)&&(v=Math.max(v,Math.max(p.height,A)-q.y)),D?o.moveTo(B-q.x,u-q.y):o.moveTo(B-q.x,u),r){case kl:B-=q.x+h;break;default:B+=p.width-q.x+h}y++}for(g.push(new x(0,u,f,(D?v:v+k)+i)),B=0;y>B&&n!==y;B++)F=c[n-y+B],G=Cm(F,F.kc,F.bf,l),F.moveTo(F.position.x,F.position.y+k-G.y);t.B(l),t.B(E)}this.commitLayers(g,new w(-a/2,-d/2)),null!==b&&b.Ce("Layout"),this.$e=!0}},ck.prototype.commitLayers=function(){},t.g(ck,"wrappingWidth",ck.prototype.qB),t.defineProperty(ck,{qB:"wrappingWidth"},function(){return this.Is},function(a){this.Is!==a&&(t.i(a,"number",ck,"wrappingWidth"),a>0||isNaN(a))&&(this.Is=a,this.st=isNaN(a),this.J())}),t.g(ck,"wrappingColumn",ck.prototype.ZG),t.defineProperty(ck,{ZG:"wrappingColumn"},function(){return this.Hs},function(a){this.Hs!==a&&(t.i(a,"number",ck,"wrappingColumn"),a>0||isNaN(a))&&(this.Hs=a,this.J())}),t.g(ck,"cellSize",ck.prototype.al),t.defineProperty(ck,{al:"cellSize"},function(){return this.pj},function(a){t.l(a,fa,ck,"cellSize"),this.pj.M(a)||(this.pj.assign(a),this.J())}),t.g(ck,"spacing",ck.prototype.spacing),t.defineProperty(ck,{spacing:"spacing"},function(){return this.Nh},function(a){t.l(a,fa,ck,"spacing"),this.Nh.M(a)||(this.Nh.assign(a),this.J())}),t.g(ck,"alignment",ck.prototype.alignment),t.defineProperty(ck,{alignment:"alignment"},function(){return this.ue},function(a){this.ue!==a&&(t.Aa(a,ck,ck,"alignment"),a===ll||a===ml)&&(this.ue=a,this.J())}),t.g(ck,"arrangement",ck.prototype.Qe),t.defineProperty(ck,{Qe:"arrangement"},function(){return this.cd},function(a){this.cd!==a&&(t.Aa(a,ck,ck,"arrangement"),a===jl||a===kl)&&(this.cd=a,this.J())}),t.g(ck,"sorting",ck.prototype.sorting),t.defineProperty(ck,{sorting:"sorting"},function(){return this.Mh},function(a){this.Mh!==a&&(t.Aa(a,ck,ck,"sorting"),a===hl||a===il||a===fl||a===gl)&&(this.Mh=a,this.J())}),t.g(ck,"comparer",ck.prototype.comparer),t.defineProperty(ck,{comparer:"comparer"},function(){return this.th},function(a){this.th!==a&&(t.i(a,"function",ck,"comparer"),this.th=a,this.J())});var Vn;ck.standardComparer=Vn=function(a,b){e&&t.l(a,C,ck,"standardComparer:a"),e&&t.l(b,C,ck,"standardComparer:b");var c=a.text,d=b.text;return d>c?-1:c>d?1:0},ck.smartComparer=function(a,b){if(e&&t.l(a,C,ck,"standardComparer:a"),e&&t.l(b,C,ck,"standardComparer:b"),null!==a){if(null!==b){var c,d=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),f=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/);for(c=0;c<d.length;c++)if(""!==f[c]&&void 0!==f[c]){var g=parseFloat(d[c]),h=parseFloat(f[c]);if(isNaN(g)){if(!isNaN(h))return 1;if(0!==d[c].localeCompare(f[c]))return d[c].localeCompare(f[c])}else{if(isNaN(h))return-1;if(0!==g-h)return g-h}}else if(""!==d[c])return 1;return""!==f[c]&&void 0!==f[c]?-1:0}return 1}return null!==b?-1:0};var ml;ck.Position=ml=t.w(ck,"Position",0);var ll;ck.Location=ll=t.w(ck,"Location",1);var jl;ck.LeftToRight=jl=t.w(ck,"LeftToRight",2);var kl;ck.RightToLeft=kl=t.w(ck,"RightToLeft",3);var hl;ck.Forward=hl=t.w(ck,"Forward",4);var il;ck.Reverse=il=t.w(ck,"Reverse",5);var fl;ck.Ascending=fl=t.w(ck,"Ascending",6);var gl;ck.Descending=gl=t.w(ck,"Descending",7),t.ga("CircularLayout",nl),t.Ka(nl,be),nl.prototype.cloneProtected=function(a){be.prototype.cloneProtected.call(this,a),a.Rr=this.Rr,a.pq=this.pq,a.ss=this.ss,a.us=this.us,a.cd=this.cd,a.sa=this.sa,a.Mh=this.Mh,a.th=this.th,a.Nh=this.Nh,a.Ir=this.Ir},nl.prototype.createNetwork=function(){var a=new Xn;return On(a,this),a},nl.prototype.doLayout=function(a){if(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(a)),a=this.network.vertexes,1>=a.count)1===a.count&&(a=a.$a(),a.Da=0,a.Oa=0);else{var b=new B(Yn);b.Oe(a.k),a=new B(Yn);var c=new B(Yn),b=this.sort(b);a=new B(Yn);var c=new B(Yn),d=this.My,e=this.eC,f=this.Ad,g=this.Nn,h=this.Ny,i=this.Jq,j=this.Bk,k=this.wD,l=this.tg,m=this.uu,d=this.Qe,e=this.Bt,f=this.KF;if((!isFinite(f)||0>=f)&&(f=NaN),g=this.ND,(!isFinite(g)||0>=g)&&(g=1),h=this.mh,isFinite(h)||(h=0),i=this.gi,(!isFinite(i)||i>360||1>i)&&(i=360),j=this.spacing,isFinite(j)||(j=NaN),d===Fl&&e===Gl?d=El:d===Fl&&e!==Gl&&(e=Gl,d=this.Qe),(this.direction===tl||this.direction===ul)&&this.sorting!==sl){for(var n=0;!(n>=b.length)&&(a.add(b.wa(n)),!(n+1>=b.length));n+=2)c.add(b.wa(n+1));this.direction===tl?(this.Qe===Fl&&a.reverse(),b=new B(Yn),b.Oe(a),b.Oe(c)):(this.Qe===Fl&&c.reverse(),b=new B(Yn),b.Oe(c),b.Oe(a))}for(var o=b.length,p=k=0,n=0;n<b.length;n++){var l=h+i*p*(this.direction===vl?1:-1)/o,q=b.wa(n).diameter;isNaN(q)&&(q=Zn(b.wa(n),l)),360>i&&(0===n||n===b.length-1)&&(q/=2),k+=q,p++}if(isNaN(f)||d===Fl){if(isNaN(j)&&(j=6),d!==El&&d!==Fl){for(q=-(1/0),n=0;o>n;n++){var m=b.wa(n),r=b.wa(n===o-1?0:n+1);isNaN(m.diameter)&&Zn(m,0),isNaN(r.diameter)&&Zn(r,0),q=Math.max(q,(m.diameter+r.diameter)/2)}m=q+j,d===xl?(l=2*Math.PI/o,f=(q+j)/l):f=$n(this,m*(i>=360?o:o-1),g,h*Math.PI/180,i*Math.PI/180)}else f=$n(this,k+(i>=360?o:o-1)*(d!==Fl?j:1.6*j),g,h*Math.PI/180,i*Math.PI/180);l=f*g}else if(l=f*g,p=ao(this,f,l,h*Math.PI/180,i*Math.PI/180),isNaN(j))(d===El||d===Fl)&&(j=(p-k)/(i>=360?o:o-1));else if(d===El||d===Fl)n=(p-k)/(i>=360?o:o-1),j>n?(f=$n(this,k+j*(i>=360?o:o-1),g,h*Math.PI/180,i*Math.PI/180),l=f*g):j=n;else{for(q=-(1/0),n=0;o>n;n++)m=b.wa(n),r=b.wa(n===o-1?0:n+1),isNaN(m.diameter)&&Zn(m,0),isNaN(r.diameter)&&Zn(r,0),q=Math.max(q,(m.diameter+r.diameter)/2);m=q+j,n=$n(this,m*(i>=360?o:o-1),g,h*Math.PI/180,i*Math.PI/180),n>f?(f=n,l=f*g):m=p/(i>=360?o:o-1)}if(this.My=d,this.eC=e,this.Ad=f,this.Nn=g,this.Ny=h,this.Jq=i,this.Bk=j,this.wD=k,this.tg=l,this.uu=m,c=[b,a,c],b=c[0],a=c[1],c=c[2],d=this.My,e=this.Ad,g=this.Ny,h=this.Jq,i=this.Bk,j=this.tg,k=this.uu,this.direction!==tl&&this.direction!==ul||d!==Fl)if(this.direction===tl||this.direction===ul){switch(f=0,d){case Dl:f=180*bo(this,e,j,g,k)/Math.PI;break;case El:k=b=0,f=a.$a(),null!==f&&(b=Zn(f,Math.PI/2)),f=c.$a(),null!==f&&(k=Zn(f,Math.PI/2)),f=180*bo(this,e,j,g,i+(b+k)/2)/Math.PI;break;case xl:f=h/b.length}if(this.direction===tl){switch(d){case Dl:co(this,a,g,wl);break;case El:eo(this,a,g,wl);break;case xl:fo(this,a,h/2,g,wl)}switch(d){case Dl:co(this,c,g+f,vl);break;case El:eo(this,c,g+f,vl);break;case xl:fo(this,c,h/2,g+f,vl)}}else{switch(d){case Dl:co(this,c,g,wl);break;case El:eo(this,c,g,wl);break;case xl:fo(this,c,h/2,g,wl)}switch(d){case Dl:co(this,a,g+f,vl);break;case El:eo(this,a,g+f,vl);break;case xl:fo(this,a,h/2,g+f,vl)}}}else switch(d){case Dl:co(this,b,g,this.direction);break;case El:eo(this,b,g,this.direction);break;case xl:fo(this,b,h,g,this.direction);break;case Fl:ho(this,b,h,g,this.direction)}else ho(this,b,h,g-h/2,vl)}this.updateParts(),this.network=null,this.$e=!0},Wn.prototype.commit=function(a){if(null!==this.qn&&null!==this.$p)for(var b=0;b<this.qn.length;b++){var c=a.wa(b);c.x=this.qn[b],c.y=this.$p[b]}},nl.prototype.commitLayout=function(){this.commitNodes(),this.rt&&this.commitLinks()},nl.prototype.commitNodes=function(){for(var a,b=this.AH,c=this.network.vertexes.k;c.next();)a=c.value,a.x+=b.x,a.y+=b.y,a.commit()},nl.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},nl.prototype.sort=function(a){switch(this.sorting){case ql:break;case rl:a.reverse();break;case ol:a.sort(this.comparer);break;case pl:a.sort(this.comparer),a.reverse();break;case sl:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new B(Yn),c=0;c<a.length;c++){var e=-1,f=-1;if(0===c)for(var g=0;g<a.length;g++){var h=a.wa(g).DI;h>e&&(e=h,f=g)}else for(g=0;g<a.length;g++)h=b[g],h>e&&(e=h,f=g);for(d.add(a.wa(f)),b[f]=-1,f=a.wa(f),e=f.tc,f=f.gc;e.next();)g=e.value,g=g.fromVertex,g=a.indexOf(g),0>g||0<=b[g]&&b[g]++;for(;f.next();)g=f.value,g=g.toVertex,g=a.indexOf(g),0>g||0<=b[g]&&b[g]++}for(a=[],b=0;b<d.length;b++){h=d.wa(b),a[b]=[];for(var i,j,c=h.gc,e=h.tc;c.next();)i=c.value,j=d.indexOf(i.toVertex),j!==b&&0>a[b].indexOf(j)&&a[b].push(j);for(;e.next();)i=e.value,j=d.indexOf(i.fromVertex),j!==b&&0>a[b].indexOf(j)&&a[b].push(j)}for(h=[],b=0;b<a.length;b++)h[b]=0;for(var c=[],k=[],l=[],e=[],f=new B(Yn),g=b=0;b<a.length;b++){var m=a[b].length;if(1===m)e.push(b);else if(0===m)f.add(d.wa(b));else{if(0===g)c.push(b);else{for(var n=1/0,o=1/0,p=-1,q=[],m=0;m<c.length;m++)0>a[c[m]].indexOf(c[m===c.length-1?0:m+1])&&q.push(m===c.length-1?0:m+1);if(0===q.length)for(m=0;m<c.length;m++)q.push(m);for(m=0;m<q.length;m++){var r,s=q[m];j=a[b],i=k,r=l;for(var u=h,v=s,w=c,x=0,y=0;y<i.length;y++){var z=u[i[y]],A=u[r[y]],C=0,D=0;if(A>z?(C=z,D=A):(C=A,D=z),v>C&&D>=v)for(z=0;z<j.length;z++)A=j[z],0>w.indexOf(A)||C<u[A]&&u[A]<D||C===u[A]||D===u[A]||x++;else for(z=0;z<j.length;z++)A=j[z],0>w.indexOf(A)||C<u[A]&&u[A]<D&&C!==u[A]&&D!==u[A]&&x++}for(r=x,i=u=0;i<a[b].length;i++)j=c.indexOf(a[b][i]),j>=0&&(j=Math.abs(s-(j>=s?j+1:j)),u+=j<c.length+1-j?j:c.length+1-j);for(i=0;i<k.length;i++)j=h[k[i]],v=h[l[i]],j>=s&&j++,v>=s&&v++,j>v&&(w=v,v=j,j=w),v-j<(c.length+2)/2==(s>j&&v>=s)&&u++;(n>r||r===n&&o>u)&&(n=r,o=u,p=s)}for(c.splice(p,0,b),m=0;m<c.length;m++)h[c[m]]=m;for(m=0;m<a[b].length;m++)n=a[b][m],0<=c.indexOf(n)&&(k.push(b),l.push(n))}g++}}for(k=!1,l=c.length;;){for(k=!0,h=0;h<e.length;h++)if(b=e[h],m=a[b][0],j=c.indexOf(m),j>=0){for(g=o=0;g<a[m].length;g++)n=a[m][g],n=c.indexOf(n),0>n||n===j||(p=n>j?n-j:j-n,o+=j>n!=p>l-p?1:-1);c.splice(0>o?j:j+1,0,b),e.splice(h,1),h--}else k=!1;if(k)break;c.push(e[0]),e.splice(0,1)}for(b=0;b<c.length;b++)j=c[b],f.add(d.wa(j));return f;default:t.m("Invalid sorting type.")}return a},t.g(nl,"radius",nl.prototype.KF),t.defineProperty(nl,{KF:"radius"},function(){return this.Rr},function(a){this.Rr!==a&&(t.i(a,"number",nl,"radius"),a>0||isNaN(a))&&(this.Rr=a,this.J())}),t.g(nl,"aspectRatio",nl.prototype.ND),t.defineProperty(nl,{ND:"aspectRatio"},function(){return this.pq},function(a){this.pq!==a&&(t.i(a,"number",nl,"aspectRatio"),a>0&&(this.pq=a,this.J()))}),t.g(nl,"startAngle",nl.prototype.mh),t.defineProperty(nl,{mh:"startAngle"},function(){return this.ss},function(a){this.ss!==a&&(t.i(a,"number",nl,"startAngle"),this.ss=a,this.J())}),t.g(nl,"sweepAngle",nl.prototype.gi),t.defineProperty(nl,{gi:"sweepAngle"},function(){return this.us},function(a){this.us!==a&&(t.i(a,"number",nl,"sweepAngle"),this.us=a>0&&360>=a?a:360,this.J())}),t.g(nl,"arrangement",nl.prototype.Qe),t.defineProperty(nl,{Qe:"arrangement"},function(){return this.cd},function(a){this.cd!==a&&(t.Aa(a,nl,nl,"arrangement"),a===Fl||a===El||a===Dl||a===xl)&&(this.cd=a,this.J())}),t.g(nl,"direction",nl.prototype.direction),t.defineProperty(nl,{direction:"direction"},function(){return this.sa},function(a){this.sa!==a&&(t.Aa(a,nl,nl,"direction"),a===vl||a===wl||a===tl||a===ul)&&(this.sa=a,this.J())}),t.g(nl,"sorting",nl.prototype.sorting),t.defineProperty(nl,{sorting:"sorting"},function(){return this.Mh},function(a){this.Mh!==a&&(t.Aa(a,nl,nl,"sorting"),a===ql||a===rl||a===ol||pl||a===sl)&&(this.Mh=a,this.J())}),t.g(nl,"comparer",nl.prototype.comparer),t.defineProperty(nl,{comparer:"comparer"},function(){return this.th},function(a){this.th!==a&&(t.i(a,"function",nl,"comparer"),this.th=a,this.J())}),t.g(nl,"spacing",nl.prototype.spacing),t.defineProperty(nl,{spacing:"spacing"},function(){return this.Nh},function(a){this.Nh!==a&&(t.i(a,"number",nl,"spacing"),this.Nh=a,this.J())}),t.g(nl,"nodeDiameterFormula",nl.prototype.Bt),t.defineProperty(nl,{Bt:"nodeDiameterFormula"},function(){return this.Ir},function(a){this.Ir!==a&&(t.Aa(a,nl,nl,"nodeDiameterFormula"),a===Hl||a===Gl)&&(this.Ir=a,this.J())}),t.A(nl,{BH:"actualXRadius"},function(){return this.Ad}),t.A(nl,{CH:"actualYRadius"},function(){return this.tg}),t.A(nl,{eK:"actualSpacing"},function(){return this.Bk}),t.A(nl,{AH:"actualCenter"},function(){return isNaN(this.Fd.x)||isNaN(this.Fd.y)?new w(0,0):new w(this.Fd.x+this.BH,this.Fd.y+this.CH)});var El;nl.ConstantSpacing=El=t.w(nl,"ConstantSpacing",0);var Dl;nl.ConstantDistance=Dl=t.w(nl,"ConstantDistance",1);var xl;nl.ConstantAngle=xl=t.w(nl,"ConstantAngle",2);var Fl;nl.Packed=Fl=t.w(nl,"Packed",3);var vl;nl.Clockwise=vl=t.w(nl,"Clockwise",4);var wl;nl.Counterclockwise=wl=t.w(nl,"Counterclockwise",5);var tl;nl.BidirectionalLeft=tl=t.w(nl,"BidirectionalLeft",6);var ul;nl.BidirectionalRight=ul=t.w(nl,"BidirectionalRight",7);var ql;nl.Forwards=ql=t.w(nl,"Forwards",8);var rl;nl.Reverse=rl=t.w(nl,"Reverse",9);var ol;nl.Ascending=ol=t.w(nl,"Ascending",10);var pl;nl.Descending=pl=t.w(nl,"Descending",11);var sl;nl.Optimized=sl=t.w(nl,"Optimized",12);var Hl;nl.Pythagorean=Hl=t.w(nl,"Pythagorean",13);var Gl;nl.Circular=Gl=t.w(nl,"Circular",14),t.ga("CircularNetwork",Xn),t.Ka(Xn,ta),Xn.prototype.createVertex=function(){return new Yn},Xn.prototype.createEdge=function(){return new no},t.ga("CircularVertex",Yn),t.Ka(Yn,ua),t.ga("CircularEdge",no),t.Ka(no,va),t.ga("ForceDirectedLayout",oo),t.Ka(oo,be),oo.prototype.cloneProtected=function(a){be.prototype.cloneProtected.call(this,a),a.bg.assign(this.bg),a.oq=this.oq,a.Lh=this.Lh,a.sh=this.sh,a.oo=this.oo,a.Lq=this.Lq,a.Fh=this.Fh,a.In=this.In,a.Hn=this.Hn,a.En=this.En,a.Gn=this.Gn,a.Fq=this.Fq,a.Eq=this.Eq},oo.prototype.createNetwork=function(){var a=new po;return On(a,this),a},oo.prototype.doLayout=function(a){if(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(a)),a=this.ex,0<this.network.vertexes.count){this.network.xw();for(var b=this.network.vertexes.k;b.next();){var c=b.value;c.charge=this.electricalCharge(c),c.mass=this.gravitationalMass(c)}for(b=this.network.edges.k;b.next();)c=b.value,c.stiffness=this.springStiffness(c),c.length=this.springLength(c);if(this.Mz(),this.ir=0,this.needsClusterLayout()){for(var b=this.network,d=b.VJ().k;d.next();){var f=d.value;for(this.network=f,c=this.network.vertexes.k;c.next();){for(var f=c.value,g=0,h=f.vertexes;h.next();)g++;f.Xf=g,f.gk=1,f.Jm=null,f.kh=null}qo(this,0,a)}this.network=b,d.reset(),e&&t.l(b,po,oo,"arrangeConnectedGraphs:singletons");for(var c=this.fw,i=d.count,j=!0,g=f=0,h=t.Db(),k=0;k<i+b.vertexes.count+2;k++)h[k]=null;for(i=0,d.reset(),k=t.Gf();d.next();){var l=d.value;if(this.qf(l,k),j)j=!1,f=k.x+k.width/2,g=k.y+k.height/2,h[0]=new w(k.x+k.width+c.width,k.y),h[1]=new w(k.x,k.y+k.height+c.height),i=2;else{var m=ro(h,i,f,g,k.width,k.height,c),n=h[m],o=new w(n.x+k.width+c.width,n.y),p=new w(n.x,n.y+k.height+c.height);for(i>m+1&&h.splice(m+1,0,null),h[m]=o,h[m+1]=p,i++,m=n.x-k.x,n=n.y-k.y,l=l.vertexes.k;l.next();){var q=l.value;q.Da+=m,q.Oa+=n}}}for(t.hc(k),l=b.vertexes.k;l.next();)q=l.value,j=q.T,2>i?(f=j.x+j.width/2,g=j.y+j.height/2,h[0]=new w(j.x+j.width+c.width,j.y),h[1]=new w(j.x,j.y+j.height+c.height),i=2):(m=ro(h,i,f,g,j.width,j.height,c),n=h[m],o=new w(n.x+j.width+c.width,n.y),p=new w(n.x,n.y+j.height+c.height),i>m+1&&h.splice(m+1,0,null),h[m]=o,h[m+1]=p,i++,q.Da=n.x+q.width/2,q.Oa=n.y+q.height/2);for(t.ya(h),d.reset();d.next();){for(f=d.value,g=f.vertexes.k;g.next();)c=g.value,b.Yk(c);for(f=f.edges.k;f.next();)c=f.value,b.Jo(c)}}so(this,a),this.updateParts()}this.oo=a,this.network=null,this.$e=!0},oo.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;var a=0,b=0,c=this.network.vertexes.k;c.next();for(var d=c.value.T;c.next();){if(c.value.T.Tf(d)&&(a++,a>1))return!0;if(b>10)break;b++}return!1},oo.prototype.qf=function(a,b){for(var c=!0,d=a.vertexes.k;d.next();){var e=d.value;c?(c=!1,b.set(e.T)):b.ii(e.T)}return b},oo.prototype.Mz=function(){if(this.comments)for(var a=this.network.vertexes.k;a.next();)this.addComments(a.value)},oo.prototype.addComments=function(a){var b=a.Fc;if(null!==b)for(b=b.zE();b.next();){var c=b.value;if("Comment"===c.Zc&&c.La()){var d=this.network.Rm(c);null===d&&(d=this.network.Ko(c)),d.charge=this.jE;for(var c=null,e=d.gc;e.next();)if(e.value.toVertex===a){c=e.value;break}if(null===c)for(e=d.tc;e.next();)if(e.value.fromVertex===a){c=e.value;break}null===c&&(c=this.network.an(a,d,null)),c.length=this.kE}}},oo.prototype.moveFixedVertex=function(){},oo.prototype.commitLayout=function(){this.bB(),this.commitNodes(),this.rt&&this.commitLinks()},oo.prototype.bB=function(){if(this.yl)for(var a=this.network.edges.k;a.next();){var b=a.value.link;null!==b&&(b.ob=xb,b.rb=xb)}},oo.prototype.commitNodes=function(){var a=0,b=0;if(this.LD){var c=t.Gf();this.qf(this.network,c),b=this.Fd,a=b.x-c.x,b=b.y-c.y,t.hc(c)}for(var c=t.Gf(),d=this.network.vertexes.k;d.next();){var e=d.value;(0!==a||0!==b)&&(c.assign(e.T),c.x+=a,c.y+=b,e.Pb=c),e.commit()}t.hc(c)},oo.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},oo.prototype.springStiffness=function(a){return a=a.stiffness,isNaN(a)?this.In:a},oo.prototype.springLength=function(a){return a=a.length,isNaN(a)?this.Hn:a},oo.prototype.electricalCharge=function(a){return a=a.charge,isNaN(a)?this.En:a},oo.prototype.electricalFieldX=function(){return 0},oo.prototype.electricalFieldY=function(){return 0},oo.prototype.gravitationalMass=function(a){return a=a.mass,isNaN(a)?this.Gn:a},oo.prototype.gravitationalFieldX=function(){return 0},oo.prototype.gravitationalFieldY=function(){return 0},oo.prototype.isFixed=function(a){return a.isFixed},t.A(oo,{gK:"currentIteration"},function(){return this.ir}),t.g(oo,"arrangementSpacing",oo.prototype.fw),t.defineProperty(oo,{fw:"arrangementSpacing"},function(){return this.bg},function(a){t.l(a,fa,oo,"arrangementSpacing"),this.bg.M(a)||(this.bg.assign(a),this.J())}),t.g(oo,"arrangesToOrigin",oo.prototype.LD),t.defineProperty(oo,{LD:"arrangesToOrigin"},function(){return this.oq},function(a){this.oq!==a&&(t.i(a,"boolean",oo,"arrangesToOrigin"),this.oq=a,this.J())}),t.g(oo,"setsPortSpots",oo.prototype.yl),t.defineProperty(oo,{yl:"setsPortSpots"},function(){return this.Lh},function(a){this.Lh!==a&&(t.i(a,"boolean",oo,"setsPortSpots"),this.Lh=a,this.J())}),t.g(oo,"comments",oo.prototype.comments),t.defineProperty(oo,{comments:"comments"},function(){return this.sh},function(a){this.sh!==a&&(t.i(a,"boolean",oo,"comments"),this.sh=a,this.J())}),t.g(oo,"maxIterations",oo.prototype.ex),t.defineProperty(oo,{ex:"maxIterations"},function(){return this.oo},function(a){this.oo!==a&&(t.i(a,"number",oo,"maxIterations"),a>=0&&(this.oo=a,this.J()))}),t.g(oo,"epsilonDistance",oo.prototype.bA),t.defineProperty(oo,{bA:"epsilonDistance"},function(){return this.Lq},function(a){this.Lq!==a&&(t.i(a,"number",oo,"epsilonDistance"),a>0&&(this.Lq=a,this.J()))}),t.g(oo,"infinityDistance",oo.prototype.RI),t.defineProperty(oo,{RI:"infinityDistance"},function(){return this.Fh},function(a){this.Fh!==a&&(t.i(a,"number",oo,"infinityDistance"),a>1&&(this.Fh=a,this.J()))}),t.g(oo,"defaultSpringStiffness",oo.prototype.wI),t.defineProperty(oo,{wI:"defaultSpringStiffness"},function(){return this.In},function(a){this.In!==a&&(t.i(a,"number",oo,"defaultSpringStiffness"),this.In=a,this.J())}),t.g(oo,"defaultSpringLength",oo.prototype.vI),t.defineProperty(oo,{vI:"defaultSpringLength"},function(){return this.Hn},function(a){this.Hn!==a&&(t.i(a,"number",oo,"defaultSpringLength"),this.Hn=a,this.J())}),t.g(oo,"defaultElectricalCharge",oo.prototype.pI),t.defineProperty(oo,{pI:"defaultElectricalCharge"},function(){return this.En},function(a){this.En!==a&&(t.i(a,"number",oo,"defaultElectricalCharge"),this.En=a,this.J())}),t.g(oo,"defaultGravitationalMass",oo.prototype.qI),t.defineProperty(oo,{qI:"defaultGravitationalMass"},function(){return this.Gn},function(a){this.Gn!==a&&(t.i(a,"number",oo,"defaultGravitationalMass"),this.Gn=a,this.J())}),t.g(oo,"defaultCommentSpringLength",oo.prototype.kE),t.defineProperty(oo,{kE:"defaultCommentSpringLength"},function(){return this.Fq},function(a){this.Fq!==a&&(t.i(a,"number",oo,"defaultCommentSpringLength"),this.Fq=a,this.J())}),t.g(oo,"defaultCommentElectricalCharge",oo.prototype.jE),t.defineProperty(oo,{jE:"defaultCommentElectricalCharge"},function(){return this.Eq},function(a){this.Eq!==a&&(t.i(a,"number",oo,"defaultCommentElectricalCharge"),this.Eq=a,this.J())}),t.ga("ForceDirectedNetwork",po),t.Ka(po,ta),po.prototype.createVertex=function(){return new xo},po.prototype.createEdge=function(){return new Bo},t.ga("ForceDirectedVertex",xo),t.Ka(xo,ua),t.ga("ForceDirectedEdge",Bo),t.Ka(Bo,va),t.ga("LayeredDigraphLayout",Y),t.Ka(Y,be),Y.prototype.cloneProtected=function(a){be.prototype.cloneProtected.call(this,a),a.dm=this.dm,a.zd=this.zd,a.sa=this.sa,a.Dn=this.Dn,a.mo=this.mo,a.Yn=this.Yn,a.am=this.am,a.vn=this.vn,a.Hi=this.Hi,a.Lh=this.Lh,a.yj=this.yj},Y.prototype.createNetwork=function(){var a=new No;return On(a,this),a},Y.prototype.doLayout=function(a){for(a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(a)),this.Fd=this.initialOrigin(this.Fd),this.cv=-1,this.Kf=this.zr=0,this.Gr=this.lv=this.im=null,a=0;a<this.Zg.length;a++)this.Zg[a]=null;if(0<this.network.vertexes.count){for(this.network.xw(),a=this.network.edges.k;a.next();)a.value.rev=!1;switch(this.Dn){default:case Ro:var b=0,c=this.network.vertexes.count-1;a=[],a.length=c+1;for(var d=this.network.vertexes.k;d.next();)d.value.valid=!0;for(;null!==So(this.network);){for(d=To(this.network);null!==d;)a[c]=d,c--,d.valid=!1,d=To(this.network);for(d=Uo(this.network);null!==d;)a[b]=d,b++,d.valid=!1,d=Uo(this.network);for(var d=null,e=0,f=this.network.vertexes.k;f.next();){var g=f.value;if(g.valid){for(var h=0,i=g.gc;i.next();)i.value.toVertex.valid&&h++;for(var i=0,j=g.tc;j.next();)j.value.fromVertex.valid&&i++;(null===d||h-i>e)&&(d=g,e=h-i)}}null!==d&&(a[b]=d,b++,d.valid=!1)}for(b=0;b<this.network.vertexes.count;b++)a[b].index=b;for(a=this.network.edges.k;a.next();)b=a.value,b.fromVertex.index>b.toVertex.index&&(this.network.ox(b),b.rev=!0);break;case Co:for(b=this.network.vertexes.k;b.next();)b.value.$o=-1,b.value.finish=-1;for(a=this.network.edges.k;a.next();)a.value.forest=!1;for(this.Fr=0,b.reset();b.next();)0===b.value.tc.count&&Vo(this,b.value);for(b.reset();b.next();)-1===b.value.$o&&Vo(this,b.value);for(a.reset();a.next();)b=a.value,b.forest||(c=b.fromVertex,d=c.finish,e=b.toVertex,f=e.finish,e.$o<c.$o&&f>d&&(this.network.ox(b),b.rev=!0))}for(a=this.network.vertexes.k;a.next();)b=a.value,b.layer=-1;for(this.kb=-1,this.assignLayers(),a.reset();a.next();)this.kb=Math.max(this.kb,a.value.layer);for(c=this.network.edges.k,b=[];c.next();)a=c.value,a.valid=!1,b.push(a);for(c=0;c<b.length;c++)if(a=b[c],!a.valid&&(null!==a.fromVertex.rd&&null!==a.toVertex.rd||a.fromVertex.layer!==a.toVertex.layer)){if(f=h=g=i=0,e=a.fromVertex,d=a.toVertex,null!==a.link){if(h=a.link,null===h)continue;var k=e.rd,f=d.rd;if(null===k||null===f)continue;var l=h.aa,g=h.ca,m=h.ud,i=h.fe;a.rev&&(h=l,j=m,l=g,m=i,g=h,i=j);var n=e.O,h=a.toVertex.O,o=a.rev?d.T:e.T,j=t.K();isNaN(o.x)?j.assign(n):Cm(l,m,Hb,j),k!==l&&!isNaN(o.x)&&l.La()&&(k=e.T,isNaN(k.x)||(j.x+=o.x-k.x,j.y+=o.y-k.y)),l=a.rev?e.T:d.T,k=t.K(),isNaN(l.x)?k.assign(h):Cm(g,i,Hb,k),f!==g&&!isNaN(l.x)&&g.La()&&(f=d.T,isNaN(f.x)||(k.x+=l.x-f.x,k.y+=l.y-f.y)),90===this.sa||270===this.sa?(f=Math.round((j.x-n.x)/this.zd),g=j.x,h=Math.round((k.x-h.x)/this.zd),i=k.x):(f=Math.round((j.y-n.y)/this.zd),g=j.y,h=Math.round((k.y-h.y)/this.zd),i=k.y),t.B(j),t.B(k),a.portFromColOffset=f,a.portFromPos=g,a.portToColOffset=h,a.portToPos=i}else a.portFromColOffset=0,a.portFromPos=0,a.portToColOffset=0,a.portToPos=0;if(j=e.layer,n=d.layer,k=a,l=0,o=k.link,null!==o){var p=o.ud,q=o.fe;if(null!==p&&null!==q){var r=o.aa,m=o.ca;if(null!==r&&null!==m){var s=p.ob,u=q.rb;this.yl||(o.ob.Pc()||(s=o.ob),o.rb.Pc()||(u=o.rb)),(s.Pc()||s===wb)&&(s=Wo(this,!0)),(u.Pc()||u===wb)&&(u=Wo(this,!1));var v=o.ic,w=o.getLinkPoint(r,p,s,!0,v,m,q,t.K()),s=o.getLinkDirection(r,p,w,s,!0,v,m,q);t.B(w),s===Xo(this,k,!0)?l+=1:this.yl&&null!==r&&1===r.ports.count&&k.rev&&(l+=1),w=o.getLinkPoint(m,q,u,!1,v,r,p,t.K()),o=o.getLinkDirection(m,q,w,u,!1,v,r,p),t.B(w),o===Xo(this,k,!1)?l+=2:this.yl&&null!==m&&1===m.ports.count&&k.rev&&(l+=2)}}}if(k=1===l||3===l?!0:!1,(l=2===l||3===l?!0:!1)&&(m=this.network.createVertex(),m.rd=null,m.Em=1,m.layer=j,m.near=e,this.network.Yk(m),e=this.network.an(e,m,a.link),e.valid=!1,e.rev=a.rev,e.portFromColOffset=f,e.portToColOffset=0,e.portFromPos=g,e.portToPos=0,e=m),o=1,k&&o--,j-n>o&&j>0){for(a.valid=!1,m=this.network.createVertex(),m.rd=null,m.Em=2,m.layer=j-1,this.network.Yk(m),e=this.network.an(e,m,a.link),e.valid=!0,e.rev=a.rev,e.portFromColOffset=l?0:f,e.portToColOffset=0,e.portFromPos=l?0:g,e.portToPos=0,e=m,j--;j-n>o&&j>0;)m=this.network.createVertex(),m.rd=null,m.Em=3,m.layer=j-1,this.network.Yk(m),e=this.network.an(e,m,a.link),e.valid=!0,e.rev=a.rev,e.portFromColOffset=0,e.portToColOffset=0,e.portFromPos=0,e.portToPos=0,e=m,j--;e=this.network.an(m,d,a.link),e.valid=!k,k&&(m.near=d),e.rev=a.rev,e.portFromColOffset=0,e.portToColOffset=h,e.portFromPos=0,e.portToPos=i}else a.valid=!0}for(b=this.Od=[],c=0;c<=this.kb;c++)b[c]=0;for(a=this.network.vertexes.k;a.next();)a.value.index=-1;for(this.initializeIndices(),this.cv=-1,c=this.Kf=this.zr=0;c<=this.kb;c++)b[c]>b[this.Kf]&&(this.cv=b[c]-1,this.Kf=c),b[c]<b[this.zr]&&(this.zr=c);for(this.Gr=[],c=0;c<b.length;c++)this.Gr[c]=[];for(a.reset();a.next();)c=a.value,b=c.layer,this.Gr[b][c.index]=c;for(this.Ib=-1,a=0;a<=this.kb;a++){for(b=Yo(this,a),c=0,d=this.Od[a],e=0;d>e;e++)f=b[e],c+=this.nodeMinColumnSpace(f,!0),f.column=c,c+=1,c+=this.nodeMinColumnSpace(f,!1);this.Ib=Math.max(this.Ib,c-1),Zo(this,a,b)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.$e=!0},Y.prototype.linkMinLength=function(a){var b=a.toVertex,c=0;for(a=a.fromVertex.gc;a.next();)a.value.toVertex===b&&c++;return c>1?2:1},Y.prototype.nodeMinLayerSpace=function(a,b){return null===a.rd?0:90===this.sa||270===this.sa?b?a.O.y+10:a.T.height-a.O.y+10:b?a.O.x+10:a.T.width-a.O.x+10},Y.prototype.nodeMinColumnSpace=function(a,b){if(null===a.rd)return 0;var c=b?a.HA:a.GA;return void 0!==c?c:(c=this.sa,90===c||270===c?b?a.HA=a.O.x/this.zd+1|0:a.GA=(a.T.width-a.O.x)/this.zd+1|0:b?a.HA=a.O.y/this.zd+1|0:a.GA=(a.T.height-a.O.y)/this.zd+1|0)},Y.prototype.countCrossings=function(){var a,b,c,d=0;for(a=0;a<=this.kb;a++){b=cp(this,a,1),c=this.Od[a];for(var e=0;c>e;e++)for(var f=e;c>f;f++)d+=b[e*c+f]}return d},Y.prototype.normalize=function(){var a=1/0;this.Ib=-1;for(var b,c=this.network.vertexes.k;c.next();)b=c.value,a=Math.min(a,b.column-this.nodeMinColumnSpace(b,!0)),this.Ib=Math.max(this.Ib,b.column+this.nodeMinColumnSpace(b,!1));for(c.reset();c.next();)c.value.column-=a;this.Ib-=a},Y.prototype.assignLayers=function(){switch(this.mo){case ip:jp(this);break;case kp:for(var a,b=this.network.vertexes.k;b.next();)a=lp(this,b.value),this.kb=Math.max(a,this.kb);for(b.reset();b.next();)a=b.value,a.layer=this.kb-a.layer;break;default:case Do:for(jp(this),b=this.network.vertexes.k;b.next();)b.value.valid=!1;for(b.reset();b.next();)0===b.value.tc.count&&mp(this,b.value);for(a=1/0,b.reset();b.next();)a=Math.min(a,b.value.layer);for(this.kb=-1,b.reset();b.next();)b.value.layer-=a,this.kb=Math.max(this.kb,b.value.layer)}},Y.prototype.initializeIndices=function(){switch(this.Yn){default:case op:for(var a,b=this.network.vertexes.k;b.next();){var c=b.value;a=c.layer,c.index=this.Od[a],this.Od[a]++}break;case Eo:for(b=this.network.vertexes.k,a=this.kb;a>=0;a--){for(;b.next();)b.value.layer===a&&-1===b.value.index&&pp(this,b.value);b.reset()}break;case qp:for(b=this.network.vertexes.k,a=0;a<=this.kb;a++){for(;b.next();)b.value.layer===a&&-1===b.value.index&&rp(this,b.value);b.reset()}}},Y.prototype.reduceCrossings=function(){var a,b,c,d=this.countCrossings(),e=ap(this);for(a=0;a<this.am;a++){for(b=0;b<=this.kb;b++)sp(this,b,1),tp(this,b,1);for(c=this.countCrossings(),d>c&&(d=c,e=ap(this)),b=this.kb;b>=0;b--)sp(this,b,-1),tp(this,b,-1);c=this.countCrossings(),
d>c&&(d=c,e=ap(this))}for(bp(this,e),a=0;a<this.am;a++){for(b=0;b<=this.kb;b++)sp(this,b,0),tp(this,b,0);for(c=this.countCrossings(),d>c&&(d=c,e=ap(this)),b=this.kb;b>=0;b--)sp(this,b,0),tp(this,b,0);c=this.countCrossings(),d>c&&(d=c,e=ap(this))}bp(this,e);var f,g,h;switch(this.vn){case up:break;case vp:for(h=d+1;(b=this.countCrossings())<h;)for(h=b,a=this.kb;a>=0;a--)for(g=0;a>=g;g++){for(f=!0;f;)for(f=!1,b=a;b>=g;b--)f=tp(this,b,-1)||f;for(c=this.countCrossings(),c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=a;b>=g;b--)f=tp(this,b,1)||f;for(c=this.countCrossings(),c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=g;a>=b;b++)f=tp(this,b,1)||f;for(c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=g;a>=b;b++)f=tp(this,b,-1)||f;for(c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=a;b>=g;b--)f=tp(this,b,0)||f;for(c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=g;a>=b;b++)f=tp(this,b,0)||f;c>=d?bp(this,e):(d=c,e=ap(this))}break;default:case Fo:for(a=this.kb,g=0,h=d+1;(b=this.countCrossings())<h;){for(h=b,f=!0;f;)for(f=!1,b=a;b>=g;b--)f=tp(this,b,-1)||f;for(c=this.countCrossings(),c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=a;b>=g;b--)f=tp(this,b,1)||f;for(c=this.countCrossings(),c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=g;a>=b;b++)f=tp(this,b,1)||f;for(c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=g;a>=b;b++)f=tp(this,b,-1)||f;for(c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=a;b>=g;b--)f=tp(this,b,0)||f;for(c>=d?bp(this,e):(d=c,e=ap(this)),f=!0;f;)for(f=!1,b=g;a>=b;b++)f=tp(this,b,0)||f;c>=d?bp(this,e):(d=c,e=ap(this))}}bp(this,e)},Y.prototype.straightenAndPack=function(){var a,b,c=0!==(this.Hi&wp);if(a=this.Hi===Go,1e3<this.network.edges.count&&!a&&(c=!1),c){for(b=[],a=0;a<=this.kb;a++)b[a]=0;for(var d,e,f=this.network.vertexes.k;f.next();)d=f.value,a=d.layer,e=d.column,d=this.nodeMinColumnSpace(d,!1),b[a]=Math.max(b[a],e+d);for(f.reset();f.next();)d=f.value,a=d.layer,e=d.column,d.column=(8*(this.Ib-b[a])>>1)+8*e;this.Ib*=8}if(0!==(this.Hi&xp))for(b=!0;b;){for(b=!1,a=this.Kf+1;a<=this.kb;a++)b=yp(this,a,1)||b;for(a=this.Kf-1;a>=0;a--)b=yp(this,a,-1)||b;b=yp(this,this.Kf,0)||b}if(0!==(this.Hi&zp)){for(a=this.Kf+1;a<=this.kb;a++)Ap(this,a,1);for(a=this.Kf-1;a>=0;a--)Ap(this,a,-1);Ap(this,this.Kf,0)}if(c&&(Bp(this,-1),Bp(this,1)),0!==(this.Hi&xp))for(b=!0;b;){for(b=!1,b=yp(this,this.Kf,0)||b,a=this.Kf+1;a<=this.kb;a++)b=yp(this,a,0)||b;for(a=this.Kf-1;a>=0;a--)b=yp(this,a,0)||b}},Y.prototype.commitLayout=function(){if(this.yl)for(var a,b=Wo(this,!0),c=Wo(this,!1),d=this.network.edges.k;d.next();)a=d.value.link,null!==a&&(a.ob=b,a.rb=c);this.commitNodes(),this.Uz(),this.rt&&this.commitLinks()},Y.prototype.commitNodes=function(){this.Wg=[],this.ig=[],this.Jf=[],this.Ob=[];for(var a=0;a<=this.kb;a++)this.Wg[a]=0,this.ig[a]=0,this.Jf[a]=0,this.Ob[a]=0;for(var b,c,a=this.network.vertexes.k;a.next();)b=a.value,c=b.layer,this.Wg[c]=Math.max(this.Wg[c],this.nodeMinLayerSpace(b,!0)),this.ig[c]=Math.max(this.ig[c],this.nodeMinLayerSpace(b,!1));var d=0,e=this.dm;for(b=0;b<=this.kb;b++)c=e,0>=this.Wg[b]+this.ig[b]&&(c=0),b>0&&(d+=c/2),90===this.sa||0===this.sa?(d+=this.ig[b],this.Jf[b]=d,d+=this.Wg[b]):(d+=this.Wg[b],this.Jf[b]=d,d+=this.ig[b]),b<this.kb&&(d+=c/2),this.Ob[b]=d;for(e=d,d=this.Fd,b=0;b<=this.kb;b++)270===this.sa?this.Jf[b]=d.y+this.Jf[b]:90===this.sa?(this.Jf[b]=d.y+e-this.Jf[b],this.Ob[b]=e-this.Ob[b]):180===this.sa?this.Jf[b]=d.x+this.Jf[b]:(this.Jf[b]=d.x+e-this.Jf[b],this.Ob[b]=e-this.Ob[b]);for(a.reset();a.next();){b=a.value,c=b.layer;var f=0|b.column;270===this.sa||90===this.sa?(e=d.x+this.zd*f,c=this.Jf[c]):(e=this.Jf[c],c=d.y+this.zd*f),b.Da=e,b.Oa=c,b.commit()}},Y.prototype.Uz=function(){for(var a=0,b=this.dm,c=0;c<=this.kb;c++)a+=this.Wg[c],a+=this.ig[c];for(var a=a+this.kb*b,b=[],c=this.zd*this.Ib,d=this.mJ;d>=0;d--)270===this.sa?0===d?b.push(new x(0,0,c,Math.abs(this.Ob[0]))):b.push(new x(0,this.Ob[d-1],c,Math.abs(this.Ob[d-1]-this.Ob[d]))):90===this.sa?0===d?b.push(new x(0,this.Ob[0],c,Math.abs(this.Ob[0]-a))):b.push(new x(0,this.Ob[d],c,Math.abs(this.Ob[d-1]-this.Ob[d]))):180===this.sa?0===d?b.push(new x(0,0,Math.abs(this.Ob[0]),c)):b.push(new x(this.Ob[d-1],0,Math.abs(this.Ob[d-1]-this.Ob[d]),c)):0===d?b.push(new x(this.Ob[0],0,Math.abs(this.Ob[0]-a),c)):b.push(new x(this.Ob[d],0,Math.abs(this.Ob[d-1]-this.Ob[d]),c));this.commitLayers(b,F.mj)},Y.prototype.commitLayers=function(){},Y.prototype.commitLinks=function(){for(var a,b,c=this.network.edges.k;c.next();)b=c.value.link,"undefined"!=typeof b&&null!==b&&(b.zl(),b.Uo(),b.Xi());for(c.reset();c.next();)b=c.value.link,"undefined"!=typeof b&&null!==b&&b.updateRoute();for(c.reset();c.next();)if(a=c.value,b=a.link){b.zl();var d=b,e=d.aa,f=d.ca,g=d.ud,h=d.fe;if(a.valid){if(b.De===Pg&&4===b.pa){if(a.rev)var i=e,e=f,f=i,j=g,g=h,h=j;if(a.fromVertex.column===a.toVertex.column){var k=b.getLinkPoint(e,g,b.computeSpot(!0),!0,!1,f,h),l=b.getLinkPoint(f,h,b.computeSpot(!1),!1,!1,e,g);b.Uo(),b.Xk(k.x,k.y),b.Xk((2*k.x+l.x)/3,(2*k.y+l.y)/3),b.Xk((k.x+2*l.x)/3,(k.y+2*l.y)/3),b.Xk(l.x,l.y)}else{var m=!1,n=!1;if(null!==g&&b.computeSpot(!0)===wb&&(m=!0),null!==h&&b.computeSpot(!1)===wb&&(n=!0),m||n){var o=b.o(0).x,p=b.o(0).y,q=b.o(1).x,r=b.o(1).y,s=b.o(2).x,t=b.o(2).y,u=b.o(3).x,v=b.o(3).y;if(m){90===this.sa||270===this.sa?(q=o,r=(p+v)/2):(q=(o+u)/2,r=p),b.Y(1,q,r);var w=b.getLinkPoint(e,g,b.computeSpot(!0),!0,!1,f,h);b.Y(0,w.x,w.y)}n&&(90===this.sa||270===this.sa?(s=u,t=(p+v)/2):(s=(o+u)/2,t=v),b.Y(2,s,t),w=b.getLinkPoint(f,h,b.computeSpot(!1),!1,!1,e,g),b.Y(3,w.x,w.y))}}}b.Xi()}else if(a.fromVertex.layer===a.toVertex.layer)b.Xi();else{var x,y=!1,z=!1,A=b.gt+1;if(b.ic)z=!0,x=b.pa,x>4&&b.points.removeRange(2,x-3);else if(b.De===Pg)y=!0,x=b.pa,x>4&&b.points.removeRange(2,x-3),A=2;else{x=b.pa;var C=b.computeSpot(!0)===wb,D=b.computeSpot(!1)===wb;x>2&&C&&D?b.points.removeRange(1,x-2):x>3&&C&&!D?b.points.removeRange(1,x-3):x>3&&!C&&D?b.points.removeRange(2,x-2):x>4&&!C&&!D&&b.points.removeRange(2,x-3)}var E,F,G=a.fromVertex,H=a.toVertex;if(a.rev){for(var I;null!==H&&G!==H;){F=E=null;for(var J=H.tc.k;J.next()&&(M=J.value,M.link!==a.link||(E=M.fromVertex,F=M.toVertex,null!==E.rd)););E!==G&&(O=b.o(A-1).x,P=b.o(A-1).y,Q=E.Da,R=E.Oa,z?180===this.sa||0===this.sa?2===A?(b.C(A++,O,P),b.C(A++,O,R)):(W=null!==F?F.Oa:P,W!==R&&(S=this.Ob[E.layer-1],b.C(A++,S,P),b.C(A++,S,R))):2===A?(b.C(A++,O,P),b.C(A++,Q,P)):(X=null!==F?F.Da:O,X!==Q&&(S=this.Ob[E.layer-1],b.C(A++,O,S),b.C(A++,Q,S))):2===A?y?(U=Math.max(10,this.Wg[H.layer]),V=Math.max(10,this.ig[H.layer]),180===this.sa?(I=H.T.x,b.C(A++,I-U,R),b.C(A++,I,R),b.C(A++,I+V,R)):90===this.sa?(I=H.T.y+H.T.height,b.C(A++,Q,I+V),b.C(A++,Q,I),b.C(A++,Q,I-U)):270===this.sa?(I=H.T.y,b.C(A++,Q,I-U),b.C(A++,Q,I),b.C(A++,Q,I+V)):(I=H.T.x+H.T.width,b.C(A++,I+V,R),b.C(A++,I,R),b.C(A++,I-U,R))):(b.C(A++,O,P),180===this.sa||0===this.sa?b.C(A++,O,R):b.C(A++,Q,P),b.C(A++,Q,R)):(U=Math.max(10,this.Wg[E.layer]),V=Math.max(10,this.ig[E.layer]),180===this.sa?(y&&b.C(A++,Q-U,R),b.C(A++,Q,R),y&&b.C(A++,Q+V,R)):90===this.sa?(y&&b.C(A++,Q,R+V),b.C(A++,Q,R),y&&b.C(A++,Q,R-U)):270===this.sa?(y&&b.C(A++,Q,R-U),b.C(A++,Q,R),y&&b.C(A++,Q,R+V)):(y&&b.C(A++,Q+V,R),b.C(A++,Q,R),y&&b.C(A++,Q-U,R)))),H=E}if(null===h||b.computeSpot(!1)!==wb)if(O=b.o(A-1).x,P=b.o(A-1).y,Q=b.o(A).x,R=b.o(A).y,z){var K,L=this.ig[G.layer];180===this.sa||0===this.sa?(K=P,K>=G.T.y&&K<=G.T.bottom&&(I=G.Da+L,K=K<G.T.y+G.T.height/2?G.T.y-this.zd/2:G.T.bottom+this.zd/2,b.C(A++,I,P),b.C(A++,I,K)),b.C(A++,Q,K)):(K=O,K>=G.T.x&&K<=G.T.right&&(I=G.Oa+L,K=K<G.T.x+G.T.width/2?G.T.x-this.zd/2:G.T.right+this.zd/2,b.C(A++,O,I),b.C(A++,K,I)),b.C(A++,K,R)),b.C(A++,Q,R)}else y?(U=Math.max(10,this.Wg[G.layer]),V=Math.max(10,this.ig[G.layer]),180===this.sa?(I=G.T.x+G.T.width,b.Y(A-2,I,P),b.Y(A-1,I+V,P)):90===this.sa?(I=G.T.y,b.Y(A-2,O,I),b.Y(A-1,O,I-U)):270===this.sa?(I=G.T.y+G.T.height,b.Y(A-2,O,I),b.Y(A-1,O,I+V)):(I=G.T.x,b.Y(A-2,I,P),b.Y(A-1,I-U,P))):(180===this.sa||0===this.sa?b.C(A++,Q,P):b.C(A++,O,R),b.C(A++,Q,R))}else{for(;null!==G&&G!==H;){F=E=null;for(var M,N=G.gc.k;N.next()&&(M=N.value,M.link!==a.link||(E=M.toVertex,F=M.fromVertex,null!==F.rd&&(F=null),null!==E.rd)););var O,P,Q,R,S,U,V;if(E!==H)if(O=b.o(A-1).x,P=b.o(A-1).y,Q=E.Da,R=E.Oa,z)if(180===this.sa||0===this.sa){var W=null!==F?F.Oa:P;W!==R&&(S=this.Ob[E.layer],2===A&&(S=0===this.sa?Math.max(S,O):Math.min(S,O)),b.C(A++,S,P),b.C(A++,S,R))}else{var X=null!==F?F.Da:O;X!==Q&&(S=this.Ob[E.layer],2===A&&(S=90===this.sa?Math.max(S,P):Math.min(S,P)),b.C(A++,O,S),b.C(A++,Q,S))}else U=Math.max(10,this.Wg[E.layer]),V=Math.max(10,this.ig[E.layer]),180===this.sa?(b.C(A++,Q+V,R),y&&b.C(A++,Q,R),b.C(A++,Q-U,R)):90===this.sa?(b.C(A++,Q,R-U),y&&b.C(A++,Q,R),b.C(A++,Q,R+V)):270===this.sa?(b.C(A++,Q,R+V),y&&b.C(A++,Q,R),b.C(A++,Q,R-U)):(b.C(A++,Q-U,R),y&&b.C(A++,Q,R),b.C(A++,Q+V,R));G=E}z&&(O=b.o(A-1).x,P=b.o(A-1).y,Q=b.o(A).x,R=b.o(A).y,180===this.sa||0===this.sa?P!==R&&(S=0===this.sa?Math.min(Math.max((Q+O)/2,this.Ob[H.layer]),Q):Math.max(Math.min((Q+O)/2,this.Ob[H.layer]),Q),b.C(A++,S,P),b.C(A++,S,R)):O!==Q&&(S=90===this.sa?Math.min(Math.max((R+P)/2,this.Ob[H.layer]),R):Math.max(Math.min((R+P)/2,this.Ob[H.layer]),R),b.C(A++,O,S),b.C(A++,Q,S)))}if(null!==d&&y){if(null!==g){if(b.computeSpot(!0)===wb){var Y=b.o(0),Z=b.o(2);Y.M(Z)||b.Y(1,(Y.x+Z.x)/2,(Y.y+Z.y)/2)}w=b.getLinkPoint(e,g,wb,!0,!1,f,h),b.Y(0,w.x,w.y)}null!==h&&(b.computeSpot(!1)===wb&&(Y=b.o(b.pa-1),Z=b.o(b.pa-3),Y.M(Z)||b.Y(b.pa-2,(Y.x+Z.x)/2,(Y.y+Z.y)/2)),w=b.getLinkPoint(f,h,wb,!1,!1,e,g),b.Y(b.pa-1,w.x,w.y))}b.Xi(),a.commit()}}for(var $,_=new B(T),aa=this.network.edges.k;aa.next();)$=aa.value.link,null!==$&&$.ic&&!_.contains($)&&_.add($);if(0<_.count)if(90===this.sa||270===this.sa){for(var ba,ca,da,ea=0,fa=new B(Gp),ga=_.k;ga.next();)if(ba=ga.value,null!==ba&&ba.ic)for(var ha=2;ha<ba.pa-3;ha++)if(ca=ba.o(ha),da=ba.o(ha+1),this.I(ca.y,da.y)&&!this.I(ca.x,da.x)){var ia=new Gp;ia.layer=Math.floor(ca.y/2);var ja=ba.o(0),ka=ba.o(ba.pa-1);if(ia.$a=ja.x*ja.x+ja.y,ia.ae=ka.x*ka.x+ka.y,ia.Be=Math.min(ca.x,da.x),ia.Ud=Math.max(ca.x,da.x),ia.index=ha,ia.link=ba,ha+2<ba.pa){var la=ba.o(ha-1),ma=ba.o(ha+2),na=0;la.y<ca.y?na=ma.y<ca.y?3:ca.x<da.x?2:1:la.y>ca.y&&(na=ma.y>ca.y?0:da.x<ca.x?2:1),ia.hi=na}fa.add(ia)}if(1<fa.count){fa.sort(this.fG);for(var oa=0;oa<fa.count;){for(var pa=fa.n[oa].layer,qa=oa+1;qa<fa.count&&fa.n[qa].layer===pa;)qa++;if(qa-oa>1)for(var ra=oa;qa>ra;){for(var sa=fa.n[ra].Ud,ta=oa+1;qa>ta&&fa.n[ta].Be<sa;)sa=Math.max(sa,fa.n[ta].Ud),ta++;var ua=ta-ra;if(ua>1){fa.Up(this.px,ra,ra+ua);for(var va,wa=1,xa=fa.n[ra].ae,ha=ra;ta>ha;ha++)va=fa.n[ha],va.ae!==xa&&(wa++,xa=va.ae);fa.Up(this.eG,ra,ra+ua);for(var ya=1,xa=fa.n[ra].$a,ha=ra;ta>ha;ha++)va=fa.n[ha],va.$a!==xa&&(ya++,xa=va.$a);var za,Aa;ya>wa?(za=!1,Aa=wa,xa=fa.n[ra].ae,fa.Up(this.px,ra,ra+ua)):(za=!0,Aa=ya,xa=fa.n[ra].$a);for(var Ba=0,ha=ra;ta>ha;ha++){va=fa.n[ha],(za?va.$a:va.ae)!==xa&&(Ba++,xa=za?va.$a:va.ae),ba=va.link,ca=ba.o(va.index),da=ba.o(va.index+1);var Ca=this.yp*(Ba-(Aa-1)/2);(!ba.dj||Hp(ca.x,ca.y+Ca,da.x,da.y+Ca))&&(ea++,ba.zl(),ba.Y(va.index,ca.x,ca.y+Ca),ba.Y(va.index+1,da.x,da.y+Ca),ba.Xi())}}ra=ta}oa=qa}}}else{for(var Da,Ea,Fa,Ga=0,Ha=new B(Gp),Ia=_.k;Ia.next();)if(Da=Ia.value,null!==Da&&Da.ic)for(var Ja=2;Ja<Da.pa-3;Ja++)if(Ea=Da.o(Ja),Fa=Da.o(Ja+1),this.I(Ea.x,Fa.x)&&!this.I(Ea.y,Fa.y)){var Ka=new Gp;Ka.layer=Math.floor(Ea.x/2);var La=Da.o(0),Ma=Da.o(Da.pa-1);if(Ka.$a=La.x+La.y*La.y,Ka.ae=Ma.x+Ma.y*Ma.y,Ka.Be=Math.min(Ea.y,Fa.y),Ka.Ud=Math.max(Ea.y,Fa.y),Ka.index=Ja,Ka.link=Da,Ja+2<Da.pa){var Na=Da.o(Ja-1),Oa=Da.o(Ja+2),Pa=0;Na.x<Ea.x?Pa=Oa.x<Ea.x?3:Ea.y<Fa.y?2:1:Na.x>Ea.x&&(Pa=Oa.x>Ea.x?0:Fa.y<Ea.y?2:1),Ka.hi=Pa}Ha.add(Ka)}if(1<Ha.count){Ha.sort(this.fG);for(var Qa=0;Qa<Ha.count;){for(var Ra=Ha.n[Qa].layer,Sa=Qa+1;Sa<Ha.count&&Ha.n[Sa].layer===Ra;)Sa++;if(Sa-Qa>1)for(var Ta=Qa;Sa>Ta;){for(var Ua=Ha.n[Ta].Ud,Va=Qa+1;Sa>Va&&Ha.n[Va].Be<Ua;)Ua=Math.max(Ua,Ha.n[Va].Ud),Va++;var Wa=Va-Ta;if(Wa>1){Ha.Up(this.px,Ta,Ta+Wa);for(var Xa,Ya=1,Za=Ha.n[Ta].ae,Ja=Ta;Va>Ja;Ja++)Xa=Ha.n[Ja],Xa.ae!==Za&&(Ya++,Za=Xa.ae);Ha.Up(this.eG,Ta,Ta+Wa);for(var $a=1,Za=Ha.n[Ta].$a,Ja=Ta;Va>Ja;Ja++)Xa=Ha.n[Ja],Xa.$a!==Za&&($a++,Za=Xa.$a);var _a,ab;$a>Ya?(_a=!1,ab=Ya,Za=Ha.n[Ta].ae,Ha.Up(this.px,Ta,Ta+Wa)):(_a=!0,ab=$a,Za=Ha.n[Ta].$a);for(var bb=0,Ja=Ta;Va>Ja;Ja++){Xa=Ha.n[Ja],(_a?Xa.$a:Xa.ae)!==Za&&(bb++,Za=_a?Xa.$a:Xa.ae),Da=Xa.link,Ea=Da.o(Xa.index),Fa=Da.o(Xa.index+1);var cb=this.yp*(bb-(ab-1)/2);(!Da.dj||Hp(Ea.x+cb,Ea.y,Fa.x+cb,Fa.y))&&(Ga++,Da.zl(),Da.Y(Xa.index,Ea.x+cb,Ea.y),Da.Y(Xa.index+1,Fa.x+cb,Fa.y),Da.Xi())}}Ta=Va}Qa=Sa}}}},t.Vd(Gp,{layer:!0,$a:!0,ae:!0,Be:!0,Ud:!0,index:!0,link:!0,hi:!0}),Y.prototype.fG=function(a,b){return a instanceof Gp&&b instanceof Gp&&a!==b?a.layer<b.layer?-1:a.layer>b.layer?1:a.Be<b.Be?-1:a.Be>b.Be?1:a.Ud<b.Ud?-1:a.Ud>b.Ud?1:0:0},Y.prototype.eG=function(a,b){return a instanceof Gp&&b instanceof Gp&&a!==b?a.$a<b.$a?-1:a.$a>b.$a||a.hi<b.hi?1:a.hi>b.hi||a.Be<b.Be?-1:a.Be>b.Be?1:a.Ud<b.Ud?-1:a.Ud>b.Ud?1:0:0},Y.prototype.px=function(a,b){return a instanceof Gp&&b instanceof Gp&&a!==b?a.ae<b.ae?-1:a.ae>b.ae||a.hi<b.hi?1:a.hi>b.hi||a.Be<b.Be?-1:a.Be>b.Be?1:a.Ud<b.Ud?-1:a.Ud>b.Ud?1:0:0},Y.prototype.I=function(a,b){e&&(t.q(a,Y,"isApprox:a"),t.q(b,Y,"isApprox:b"));var c=a-b;return c>-1&&1>c},t.g(Y,"layerSpacing",Y.prototype.layerSpacing),t.defineProperty(Y,{layerSpacing:"layerSpacing"},function(){return this.dm},function(a){this.dm!==a&&(t.i(a,"number",Y,"layerSpacing"),a>=0&&(this.dm=a,this.J()))}),t.g(Y,"columnSpacing",Y.prototype.eI),t.defineProperty(Y,{eI:"columnSpacing"},function(){return this.zd},function(a){this.zd!==a&&(t.i(a,"number",Y,"columnSpacing"),a>=0&&(this.zd=a,this.J()))}),t.g(Y,"direction",Y.prototype.direction),t.defineProperty(Y,{direction:"direction"},function(){return this.sa},function(a){this.sa!==a&&(t.i(a,"number",Y,"direction"),this.sa=a,this.J())}),t.g(Y,"cycleRemoveOption",Y.prototype.hE),t.defineProperty(Y,{hE:"cycleRemoveOption"},function(){return this.Dn},function(a){this.Dn!==a&&(t.Aa(a,Y,Y,"cycleRemoveOption"),a===Ro||a===Co)&&(this.Dn=a,this.J())}),t.g(Y,"layeringOption",Y.prototype.lF),t.defineProperty(Y,{lF:"layeringOption"},function(){return this.mo},function(a){this.mo!==a&&(t.Aa(a,Y,Y,"layeringOption"),a===Do||a===ip||a===kp)&&(this.mo=a,this.J())}),t.g(Y,"initializeOption",Y.prototype.ZE),t.defineProperty(Y,{ZE:"initializeOption"},function(){return this.Yn},function(a){this.Yn!==a&&(t.Aa(a,Y,Y,"initializeOption"),a===Eo||a===qp||a===op)&&(this.Yn=a,this.J())}),t.g(Y,"iterations",Y.prototype.eJ),t.defineProperty(Y,{eJ:"iterations"},function(){return this.am},function(a){this.am!==a&&(t.q(a,No,"iterations"),a>=0&&(this.am=a,this.J()))}),t.g(Y,"aggressiveOption",Y.prototype.JD),t.defineProperty(Y,{JD:"aggressiveOption"},function(){return this.vn},function(a){this.vn!==a&&(t.Aa(a,Y,Y,"aggressiveOption"),a===up||a===Fo||a===vp)&&(this.vn=a,this.J())}),t.g(Y,"packOption",Y.prototype.BJ),t.defineProperty(Y,{BJ:"packOption"},function(){return this.Hi},function(a){this.Hi!==a&&(t.i(a,"number",Y,"packOption"),a>=0&&8>a&&(this.Hi=a,this.J()))}),t.g(Y,"setsPortSpots",Y.prototype.yl),t.defineProperty(Y,{yl:"setsPortSpots"},function(){return this.Lh},function(a){this.Lh!==a&&(t.i(a,"boolean",Y,"setsPortSpots"),this.Lh=a,this.J())}),t.g(Y,"linkSpacing",Y.prototype.yp),t.defineProperty(Y,{yp:"linkSpacing"},function(){return this.yj},function(a){this.yj!==a&&(t.i(a,"number",Y,"linkSpacing"),a>=0&&(this.yj=a,this.J()))}),t.A(Y,{mJ:"maxLayer"},function(){return this.kb}),t.A(Y,{EK:"maxIndex"},function(){return this.cv}),t.A(Y,{DK:"maxColumn"},function(){return this.Ib}),t.A(Y,{GK:"minIndexLayer"},function(){return this.zr}),t.A(Y,{FK:"maxIndexLayer"},function(){return this.Kf});var Co;Y.CycleDepthFirst=Co=t.w(Y,"CycleDepthFirst",0);var Ro;Y.CycleGreedy=Ro=t.w(Y,"CycleGreedy",1);var Do;Y.LayerOptimalLinkLength=Do=t.w(Y,"LayerOptimalLinkLength",0);var ip;Y.LayerLongestPathSink=ip=t.w(Y,"LayerLongestPathSink",1);var kp;Y.LayerLongestPathSource=kp=t.w(Y,"LayerLongestPathSource",2);var Eo;Y.InitDepthFirstOut=Eo=t.w(Y,"InitDepthFirstOut",0);var qp;Y.InitDepthFirstIn=qp=t.w(Y,"InitDepthFirstIn",1);var op;Y.InitNaive=op=t.w(Y,"InitNaive",2);var up;Y.AggressiveNone=up=t.w(Y,"AggressiveNone",0);var Fo;Y.AggressiveLess=Fo=t.w(Y,"AggressiveLess",1);var vp;Y.AggressiveMore=vp=t.w(Y,"AggressiveMore",2),Y.PackNone=0;var wp;Y.PackExpand=wp=1;var xp;Y.PackStraighten=xp=2;var zp;Y.PackMedian=zp=4;var Go;Y.PackAll=Go=7,t.ga("LayeredDigraphNetwork",No),t.Ka(No,ta),No.prototype.createVertex=function(){return new Ip},No.prototype.createEdge=function(){return new Jp},t.ga("LayeredDigraphVertex",Ip),t.Ka(Ip,ua),t.ga("LayeredDigraphEdge",Jp),t.Ka(Jp,va),t.ga("TreeLayout",W),t.Ka(W,be),W.prototype.cloneProtected=function(a){be.prototype.cloneProtected.call(this,a),a.Ji=this.Ji,a.Cs=this.Cs,a.Zu=this.Zu,a.sh=this.sh,a.cd=this.cd,a.bg.assign(this.bg),a.ua.copyInheritedPropertiesFrom(this.ua),a.ta.copyInheritedPropertiesFrom(this.ta)},W.prototype.createNetwork=function(){var a=new Qp;return On(a,this),a},W.prototype.makeNetwork=function(a){var b=this.createNetwork();return a instanceof z?(Rp(this,b,a.jh,!0),Rp(this,b,a.links,!0)):a instanceof S?Rp(this,b,a.Rc,!1):Rp(this,b,a.k,!1),b},W.prototype.doLayout=function(a){a||t.m("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(a)),this.Qe!==Sp&&(this.Fd=this.initialOrigin(this.Fd));var b=this.h;if(null===b&&a instanceof z&&(b=a),this.If=this.path===Kp&&null!==b?b.pd?Lp:Tp:this.path===Kp?Lp:this.path,0<this.network.vertexes.count){for(this.network.xw(),b=this.network.vertexes.k;b.next();)a=b.value,a.initialized=!1,a.level=0,a.parent=null,a.children=[];if(0<this.Yc.count)for(b=this.Yc.k,this.Yc=new ma(Pp);b.next();)a=b.value,a instanceof R?(a=this.network.Rm(a),null!==a&&this.Yc.add(a)):a instanceof Pp&&this.Yc.add(a);for(0===this.Yc.count&&this.findRoots(),b=this.Yc.copy().k;b.next();)a=b.value,a.initialized||(a.initialized=!0,Up(this,a));for(a=this.Yc.k;a.next();)Vp(this,a.value);for(a=this.Yc.k;a.next();)Wp(this,a.value);for(a=this.Yc.k;a.next();)Xp(this,a.value);if(this.Mz(),this.Xw===Yp){var c=[];for(a=this.network.vertexes.k;a.next();){var b=a.value,d=b.parent;d||(d=b);var d=0===d.angle||180===d.angle,e=c[b.level];void 0===e&&(e=0),c[b.level]=Math.max(e,d?b.width:b.height)}for(e=0;e<c.length;e++)void 0===c[e]&&(c[e]=0);for(this.EB=c,a=this.network.vertexes.k;a.next();)b=a.value,(d=b.parent)||(d=b),0===d.angle||180===d.angle?(180===d.angle&&(b.fp+=c[b.level]-b.width),b.width=c[b.level]):(270===d.angle&&(b.gp+=c[b.level]-b.height),b.height=c[b.level])}else if(this.Xw===Zp)for(a=this.network.vertexes.k;a.next();){for(b=a.value,d=0===b.angle||180===b.angle,c=-1,e=0;e<b.children.length;e++)var f=b.children[e],c=Math.max(c,d?f.width:f.height);if(c>=0)for(e=0;e<b.children.length;e++)f=b.children[e],d?(180===b.angle&&(f.fp+=c-f.width),f.width=c):(270===b.angle&&(f.gp+=c-f.height),f.height=c)}for(a=this.Yc.k;a.next();)this.layoutTree(a.value);this.arrangeTrees(),this.updateParts()}this.network=null,this.Yc=new ma(Object),this.$e=!0},W.prototype.findRoots=function(){for(var a=this.network.vertexes.k;a.next();){var b=a.value;switch(this.If){case Lp:0===b.tc.count&&this.Yc.add(b);break;case Tp:0===b.gc.count&&this.Yc.add(b);break;default:t.m("Unhandled path value "+this.If.toString())}}if(0===this.Yc.count){for(var a=999999,b=null,c=this.network.vertexes.k;c.next();){var d=c.value;switch(this.If){case Lp:d.tc.count<a&&(a=d.tc.count,b=d);break;case Tp:d.gc.count<a&&(a=d.gc.count,b=d);break;default:t.m("Unhandled path value "+this.If.toString())}}null!==b&&this.Yc.add(b)}},W.prototype.removeChild=function(a,b){if(null!==a&&null!==b){e&&t.l(a,Pp,W,"removeChild:p"),e&&t.l(b,Pp,W,"removeChild:c");for(var c=a.children,d=0,f=0;f<c.length;f++)c[f]===b&&d++;if(d>0){for(var d=Array(c.length-d),g=0,f=0;f<c.length;f++)c[f]!==b&&(d[g++]=c[f]);a.children=d}}},W.prototype.initializeTreeVertexValues=function(a){e&&t.l(a,Pp,W,"initializeTreeVertexValues:v");var b=bq(this,a);if(a.copyInheritedPropertiesFrom(b),null!==a.parent&&a.parent.alignment===aq){for(var b=a.angle,c=a.parent.children,d=0;d<c.length&&a!==c[d];)d++;0===d%2?d!==c.length-1&&(b=90===b?180:180===b?270:270===b?180:270):b=90===b?0:180===b?90:270===b?0:90,a.angle=b}a.initialized=!0},W.prototype.assignTreeVertexValues=function(){},W.prototype.sortTreeVertexChildren=function(a){switch(e&&t.l(a,Pp,W,"sortTreeVertexChildren:v"),a.sorting){case fq:break;case gq:a.children.reverse();break;case hq:a.children.sort(a.comparer);break;case iq:a.children.sort(a.comparer),a.children.reverse();break;default:t.m("Unhandled sorting value "+a.sorting.toString())}},W.prototype.Mz=function(){if(this.comments)for(var a=this.network.vertexes.k;a.next();)this.addComments(a.value)},W.prototype.addComments=function(a){e&&t.l(a,Pp,W,"addComments:v");var b=a.angle,c=a.parent,d=0,f=jq,f=!1;null!==c&&(d=c.angle,f=c.alignment,f=kq(f));var b=90===b||270===b,d=90===d||270===d,c=0===a.Im,g=0,h=0,i=0,j=a.commentSpacing;if(null!==a.Fc)for(var k=a.Fc.zE();k.next();){var l=k.value;"Comment"===l.Zc&&l.La()&&(null===a.comments&&(a.comments=[]),a.comments.push(l),l.sf(),l=l.Ga,b&&!c||!f&&!d&&c||f&&d&&c?(g=Math.max(g,l.width),h+=l.height+Math.abs(i)):(g+=l.width+Math.abs(i),h=Math.max(h,l.height)),i=j)}null!==a.comments&&(b&&!c||!f&&!d&&c||f&&d&&c?(g+=Math.abs(a.commentMargin),h=Math.max(0,h-a.height)):(h+=Math.abs(a.commentMargin),g=Math.max(0,g-a.width)),f=t.ik(0,0,a.T.width+g,a.T.height+h),a.Pb=f,t.hc(f))},W.prototype.layoutComments=function(a){if(e&&t.l(a,Pp,W,"layoutComments:v"),null!==a.comments){var b=a.Fc.Ga,c=a.parent,d=a.angle,f=0,g=jq,g=!1;null!==c&&(f=c.angle,g=c.alignment,g=kq(g));for(var d=90===d||270===d,h=90===f||270===f,i=0===a.Im,j=pq(a),k=0,l=a.comments,m=l.length,n=t.K(),o=0;m>o;o++){var c=l[o],p=c.Ga;if(d&&!i||!g&&!h&&i||g&&h&&i){if(f>135&&!g||h&&j)if(0<=a.commentMargin){n.p(a.T.x-a.commentMargin-p.width,a.T.y+k),c.move(n);for(var q=c.wg();q.next();)c=q.value,c.ob=Vb,c.rb=Wb}else for(n.p(a.T.x+2*a.O.x-a.commentMargin,a.T.y+k),c.move(n),q=c.wg();q.next();)c=q.value,c.ob=Wb,c.rb=Vb;else if(0<=a.commentMargin)for(n.p(a.T.x+2*a.O.x+a.commentMargin,a.T.y+k),c.move(n),q=c.wg();q.next();)c=q.value,c.ob=Wb,c.rb=Vb;else for(n.p(a.T.x+a.commentMargin-p.width,a.T.y+k),c.move(n),q=c.wg();q.next();)c=q.value,c.ob=Vb,c.rb=Wb;k=0<=a.commentSpacing?k+(p.height+a.commentSpacing):k+(a.commentSpacing-p.height)}else{if(f>135&&!g||!h&&j)if(0<=a.commentMargin)for(n.p(a.T.x+k,a.T.y-a.commentMargin-p.height),c.move(n),q=c.wg();q.next();)c=q.value,c.ob=Qb,c.rb=Xb;else for(n.p(a.T.x+k,a.T.y+2*a.O.y-a.commentMargin),c.move(n),q=c.wg();q.next();)c=q.value,c.ob=Xb,c.rb=Qb;else if(0<=a.commentMargin)for(n.p(a.T.x+k,a.T.y+2*a.O.y+a.commentMargin),c.move(n),q=c.wg();q.next();)c=q.value,c.ob=Xb,c.rb=Qb;else for(n.p(a.T.x+k,a.T.y+a.commentMargin-p.height),c.move(n),q=c.wg();q.next();)c=q.value,c.ob=Qb,c.rb=Xb;k=0<=a.commentSpacing?k+(p.width+a.commentSpacing):k+(a.commentSpacing-p.width)}}if(t.B(n),b=k-a.commentSpacing-(d?b.height:b.width),this.If===Lp)for(a=a.gc;a.next();)f=a.value,(c=f.link)&&!c.dj&&(c.dk=b>0?b:NaN);else for(a=a.tc;a.next();)f=a.value,(c=f.link)&&!c.dj&&(c.jk=b>0?b:NaN)}},W.prototype.layoutTree=function(a){if(null!==a){e&&t.l(a,Pp,W,"layoutTree:v");for(var b=a.children,c=b.length,d=0;c>d;d++)this.layoutTree(b[d]);switch(a.compaction){case qq:rq(this,a);break;case sq:if(a.alignment===aq)rq(this,a);else if(e&&t.l(a,Pp,W,"layoutTreeBlock:v"),0===a.Im){var d=a.parent,b=!1,c=0,f=jq;null!==d&&(c=d.angle,f=d.alignment,b=kq(f)),d=pq(a),a.na.p(0,0),a.Za.p(a.width,a.height),null===a.parent||null===a.comments||(180!==c&&270!==c||b)&&!d?a.Ia.p(0,0):180===c&&!b||(90===c||270===c)&&d?a.Ia.p(a.width-2*a.O.x,0):a.Ia.p(0,a.height-2*a.O.y),a.tt=null,a.Kt=null}else{for(var g=tq(a),b=90===g||270===g,h=0,i=a.children,j=i.length,k=0;j>k;k++)var l=i[k],h=Math.max(h,b?l.Za.width:l.Za.height);var m=a.alignment,d=m===uq,n=m===vq,o=kq(m),p=Math.max(0,a.breadthLimit),c=wq(a),q=a.nodeSpacing,r=xq(a),s=a.rowSpacing,u=0;(d||n||a.Op||a.Pp&&1===a.maxGenerationCount)&&(u=Math.max(0,a.rowIndent));var d=a.width,f=a.height,v=0,w=0,x=0,y=null,z=null,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,l=0;if(o&&!oq(m)&&g>135&&i.reverse(),oq(m))if(j>1)for(k=0;j>k;k++)0===k%2&&k!==j-1?H=Math.max(H,b?i[k].Za.width:i[k].Za.height):0!==k%2&&(l=Math.max(l,b?i[k].Za.width:i[k].Za.height));else 1===j&&(H=b?i[0].Za.width:i[0].Za.height);if(o){switch(m){case lq:B=135>g?yq(a,i,H,v,w):zq(a,i,H,v,w),H=B[0],v=B[1],w=B[2];break;case mq:for(k=0;j>k;k++){var l=i[k],I=l.Za,y=0===F?0:s;b?(l.na.p(h-I.width,D+y),v=Math.max(v,I.width),w=Math.max(w,D+y+I.height),D+=y+I.height):(l.na.p(C+y,h-I.height),v=Math.max(v,C+y+I.width),w=Math.max(w,I.height),C+=y+I.width),F++}break;case nq:for(k=0;j>k;k++)l=i[k],I=l.Za,y=0===F?0:s,b?(l.na.p(q/2+a.O.x,D+y),v=Math.max(v,I.width),w=Math.max(w,D+y+I.height),D+=y+I.height):(l.na.p(C+y,q/2+a.O.y),v=Math.max(v,C+y+I.width),w=Math.max(w,I.height),C+=y+I.width),F++}y=Aq(this,2),z=Aq(this,2),b?(y[0].p(0,0),y[1].p(0,w),z[0].p(v,0)):(y[0].p(0,0),y[1].p(v,0),z[0].p(0,w)),z[1].p(v,w)}else for(k=0;j>k;k++){if(l=i[k],I=l.Za,b){p>0&&F>0&&C+q+I.width>p&&(h>C&&Bq(a,m,h-C,0,G,k-1),E++,F=0,G=k,x=w,C=0,D=g>135?-w-s:w+s),Cq(this,l,0,D);var J=0;0===F?(y=l.tt,z=l.Kt,A=I.width,B=I.height,(null===y||null===z||g!==tq(l))&&(y=Aq(this,2),z=Aq(this,2),y[0].p(0,0),y[1].p(0,B),z[0].p(A,0),z[1].p(A,B))):(B=Dq(this,a,l,y,z,A,B),J=B[0],y=B[1],z=B[2],A=B[3],B=B[4],C<I.width&&0>J&&(Eq(a,-J,0,G,k-1),Fq(y,-J,0),Fq(z,-J,0),J=0)),l.na.p(J,D),v=Math.max(v,A),w=Math.max(w,x+(0===E?0:s)+I.height),C=A}else p>0&&F>0&&D+q+I.height>p&&(h>D&&Bq(a,m,0,h-D,G,k-1),E++,F=0,G=k,x=v,D=0,C=g>135?-v-s:v+s),Cq(this,l,C,0),J=0,0===F?(y=l.tt,z=l.Kt,A=I.width,B=I.height,(null===y||null===z||g!==tq(l))&&(y=Aq(this,2),z=Aq(this,2),y[0].p(0,0),y[1].p(A,0),z[0].p(0,B),z[1].p(A,B))):(B=Dq(this,a,l,y,z,A,B),J=B[0],y=B[1],z=B[2],A=B[3],B=B[4],D<I.height&&0>J&&(Eq(a,0,-J,G,k-1),Fq(y,0,-J),Fq(z,0,-J),J=0)),l.na.p(C,J),w=Math.max(w,B),v=Math.max(v,x+(0===E?0:s)+I.width),D=B;F++}switch(E>0&&(b?(w+=Math.max(0,c),v>C&&Bq(a,m,v-C,0,G,j-1),u>0&&(n||Eq(a,u,0,0,j-1),v+=u)):(v+=Math.max(0,c),w>D&&Bq(a,m,0,w-D,G,j-1),u>0&&(n||Eq(a,0,u,0,j-1),w+=u))),n=h=0,m){case Gq:b?h+=v/2-a.O.x-r/2:n+=w/2-a.O.y-r/2;break;case jq:E>0?b?h+=v/2-a.O.x-r/2:n+=w/2-a.O.y-r/2:b?(k=i[0].na.x+i[0].Ia.x,H=i[j-1].na.x+i[j-1].Ia.x+2*i[j-1].O.x,h+=k+(H-k)/2-a.O.x-r/2):(k=i[0].na.y+i[0].Ia.y,H=i[j-1].na.y+i[j-1].Ia.y+2*i[j-1].O.y,n+=k+(H-k)/2-a.O.y-r/2);break;case uq:b?(h-=r,v+=r):(n-=r,w+=r);break;case vq:b?(h+=v-a.width+r,v+=r):(n+=w-a.height+r,w+=r);break;case lq:b?h=j>1?h+(H+q/2-a.O.x):h+(i[0].O.x-a.O.x+i[0].Ia.x):n=j>1?n+(H+q/2-a.O.y):n+(i[0].O.y-a.O.y+i[0].Ia.y);break;case mq:b?h+=v+q/2-a.O.x:n+=w+q/2-a.O.y;break;case nq:break;default:t.m("Unhandled alignment value "+m.toString())}for(k=0;j>k;k++)l=i[k],b?l.na.p(l.na.x+l.Ia.x-h,l.na.y+(g>135?(o?-w:-l.Za.height)+l.Ia.y-c:f+c+l.Ia.y)):l.na.p(l.na.x+(g>135?(o?-v:-l.Za.width)+l.Ia.x-c:d+c+l.Ia.x),l.na.y+l.Ia.y-n);if(j=i=0,o?b?(v=Hq(a,v,h),0>h&&(h=0),g>135&&(n+=w+c),w+=f+c,m===nq&&(i+=q/2+a.O.x),j+=f+c):(g>135&&(h+=v+c),v+=d+c,w=Iq(a,w,n),0>n&&(n=0),m===nq&&(j+=q/2+a.O.y),i+=d+c):b?(null===a.comments?d>v&&(m=Jq(m,d-v,0),i=m[0],j=m[1],v=d,h=0):v=Hq(a,v,h),0>h&&(i-=h,h=0),g>135&&(n+=w+c),w=Math.max(Math.max(w,f),w+f+c),j+=f+c):(g>135&&(h+=v+c),v=Math.max(Math.max(v,d),v+d+c),null===a.comments?f>w&&(m=Jq(m,0,f-w),i=m[0],j=m[1],w=f,n=0):w=Iq(a,w,n),0>n&&(j-=n,n=0),i+=d+c),E>0)g=Aq(this,4),m=Aq(this,4),b?(g[2].p(0,f+c),g[3].p(g[2].x,w),m[2].p(v,g[2].y),m[3].p(m[2].x,g[3].y)):(g[2].p(d+c,0),g[3].p(v,g[2].y),m[2].p(g[2].x,w),m[3].p(g[3].x,m[2].y));else{for(g=Aq(this,y.length+2),m=Aq(this,z.length+2),k=0;k<y.length;k++)o=y[k],g[k+2].p(o.x+i,o.y+j);for(k=0;k<z.length;k++)o=z[k],m[k+2].p(o.x+i,o.y+j)}b?(g[0].p(h,0),g[1].p(g[0].x,f),g[2].y<g[1].y&&(g[2].x>g[0].x?g[2].assign(g[1]):g[1].assign(g[2])),g[3].y<g[2].y&&(g[3].x>g[0].x?g[3].assign(g[2]):g[2].assign(g[3])),m[0].p(h+d,0),m[1].p(m[0].x,f),m[2].y<m[1].y&&(m[2].x<m[0].x?m[2].assign(m[1]):m[1].assign(m[2])),m[3].y<m[2].y&&(m[3].x<m[0].x?m[3].assign(m[2]):m[2].assign(m[3])),g[2].y-=c/2,m[2].y-=c/2):(g[0].p(0,n),g[1].p(d,g[0].y),g[2].x<g[1].x&&(g[2].y>g[0].y?g[2].assign(g[1]):g[1].assign(g[2])),g[3].x<g[2].x&&(g[3].y>g[0].y?g[3].assign(g[2]):g[2].assign(g[3])),m[0].p(0,n+f),m[1].p(d,m[0].y),m[2].x<m[1].x&&(m[2].y<m[0].y?m[2].assign(m[1]):m[1].assign(m[2])),m[3].x<m[2].x&&(m[3].y<m[0].y?m[3].assign(m[2]):m[2].assign(m[3])),g[2].x-=c/2,m[2].x-=c/2),Kq(this,y),Kq(this,z),a.tt=g,a.Kt=m,a.Ia.p(h,n),a.Za.p(v,w)}break;default:t.m("Unhandled compaction value "+a.compaction.toString())}}},W.prototype.arrangeTrees=function(){if(this.cd===Sp)for(var a=this.Yc.k;a.next();){var b=a.value,c=b.Fc;if(null!==c){var d=c.position,c=d.x,d=d.y;isFinite(c)||(c=0),isFinite(d)||(d=0),Tq(this,b,c,d)}}else for(a=this.Fd,c=a.x,d=a.y,a=this.Yc.k;a.next();)switch(b=a.value,Tq(this,b,c+b.Ia.x,d+b.Ia.y),this.cd){case Op:d+=b.Za.height+this.bg.height;break;case Uq:c+=b.Za.width+this.bg.width;break;default:t.m("Unhandled arrangement value "+this.cd.toString())}},W.prototype.commitLayout=function(){this.bB(),this.commitNodes(),this.Uz(),this.rt&&this.commitLinks()},W.prototype.commitNodes=function(){for(var a,b=this.network.vertexes.k;b.next();)a=b.value,a.commit();for(b.reset();b.next();)a=b.value,this.layoutComments(a)},W.prototype.Uz=function(){if(this.Xw===Yp){for(var a=this.EB,b=[],c=null,d=this.network.vertexes.k;d.next();){var e=d.value;null===c?c=e.Pb.copy():c.ii(e.Pb);var f=b[e.level],f=void 0===f?wq(e):Math.max(f,wq(e));b[e.level]=f}for(d=0;d<b.length;d++)void 0===b[d]&&(b[d]=0);90===this.angle||270===this.angle?(c.Sf(this.nodeSpacing/2,this.layerSpacing),e=new w(-this.nodeSpacing/2,-this.layerSpacing/2)):(c.Sf(this.layerSpacing,this.nodeSpacing/2),e=new w(-this.layerSpacing/2,-this.nodeSpacing/2));var f=[],c=90===this.angle||270===this.angle?c.width:c.height,g=0;if(180===this.angle||270===this.angle)for(d=0;d<a.length;d++)g+=a[d]+b[d];for(d=0;d<a.length;d++){var h=a[d]+b[d];270===this.angle?(g-=h,f.push(new x(0,g,c,h))):90===this.angle?(f.push(new x(0,g,c,h)),g+=h):180===this.angle?(g-=h,f.push(new x(g,0,h,c))):(f.push(new x(g,0,h,c)),g+=h)}this.commitLayers(f,e)}},W.prototype.commitLayers=function(){},W.prototype.commitLinks=function(){for(var a=this.network.edges.k;a.next();)a.value.commit()},W.prototype.bB=function(){for(var a=this.Yc.k;a.next();)Vq(this,a.value)},W.prototype.setPortSpots=function(a){e&&t.l(a,Pp,W,"setPortSpots:v");var b=a.alignment;if(kq(b)){e&&t.l(a,Pp,W,"setPortSpotsBus:v"),e&&t.l(b,ca,W,"setPortSpots:align");var c,d=this.If===Lp,f=tq(a);switch(f){case 0:c=Wb;break;case 90:c=Xb;break;case 180:c=Vb;break;default:c=Qb}var g=a.children,h=g.length;switch(b){case lq:case aq:for(b=0;h>b;b++){var i=g[b],i=d?i.tc:i.gc;if(i.next()){var j=i.value,j=j.link;if(null!==j){var k=90===f||270===f?Vb:Qb;if(1===h||b===h-1&&1===h%2)switch(f){case 0:k=Vb;break;case 90:k=Qb;break;case 180:k=Wb;break;default:k=Xb}else 0===b%2&&(k=90===f||270===f?Wb:Xb);d?(a.setsPortSpot&&(j.ob=c),a.setsChildPortSpot&&(j.rb=k)):(a.setsPortSpot&&(j.ob=k),a.setsChildPortSpot&&(j.rb=c))}}}break;case mq:for(k=90===f||270===f?Wb:Xb,i=d?a.gc:a.tc;i.next();)j=i.value,j=j.link,null!==j&&(d?(a.setsPortSpot&&(j.ob=c),a.setsChildPortSpot&&(j.rb=k)):(a.setsPortSpot&&(j.ob=k),a.setsChildPortSpot&&(j.rb=c)));break;case nq:for(k=90===f||270===f?Vb:Qb,i=d?a.gc:a.tc;i.next();)j=i.value,j=j.link,null!==j&&(d?(a.setsPortSpot&&(j.ob=c),a.setsChildPortSpot&&(j.rb=k)):(a.setsPortSpot&&(j.ob=k),a.setsChildPortSpot&&(j.rb=c)))}}else if(d=tq(a),this.If===Lp){for(f=a.gc;f.next();)if(c=f.value,c=c.link,null!==c){if(a.setsPortSpot)if(a.portSpot.Pc())switch(d){case 0:c.ob=Wb;break;case 90:c.ob=Xb;break;case 180:c.ob=Vb;break;default:c.ob=Qb}else c.ob=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.Pc())switch(d){case 0:c.rb=Vb;break;
case 90:c.rb=Qb;break;case 180:c.rb=Wb;break;default:c.rb=Xb}else c.rb=a.childPortSpot}}else for(f=a.tc;f.next();)if(c=f.value,c=c.link,null!==c){if(a.setsPortSpot)if(a.portSpot.Pc())switch(d){case 0:c.rb=Wb;break;case 90:c.rb=Xb;break;case 180:c.rb=Vb;break;default:c.rb=Qb}else c.rb=a.portSpot;if(a.setsChildPortSpot)if(a.childPortSpot.Pc())switch(d){case 0:c.ob=Vb;break;case 90:c.ob=Qb;break;case 180:c.ob=Wb;break;default:c.ob=Xb}else c.ob=a.childPortSpot}},t.g(W,"roots",W.prototype.MJ),t.defineProperty(W,{MJ:"roots"},function(){return this.Yc},function(a){this.Yc!==a&&(t.l(a,ma,W,"roots"),this.Yc=a,this.J())}),t.g(W,"path",W.prototype.path),t.defineProperty(W,{path:"path"},function(){return this.Ji},function(a){this.Ji!==a&&(t.Aa(a,W,W,"path"),this.Ji=a,this.J())}),t.g(W,"treeStyle",W.prototype.MG),t.defineProperty(W,{MG:"treeStyle"},function(){return this.Cs},function(a){this.cd!==a&&(t.Aa(a,W,W,"treeStyle"),a===Mp||a===dq||a===eq||a===cq)&&(this.Cs=a,this.J())}),t.g(W,"layerStyle",W.prototype.Xw),t.defineProperty(W,{Xw:"layerStyle"},function(){return this.Zu},function(a){this.cd!==a&&(t.Aa(a,W,W,"layerStyle"),a===Np||a===Zp||a===Yp)&&(this.Zu=a,this.J())}),t.g(W,"comments",W.prototype.comments),t.defineProperty(W,{comments:"comments"},function(){return this.sh},function(a){this.sh!==a&&(t.i(a,"boolean",W,"comments"),this.sh=a,this.J())}),t.g(W,"arrangement",W.prototype.Qe),t.defineProperty(W,{Qe:"arrangement"},function(){return this.cd},function(a){this.cd!==a&&(t.Aa(a,W,W,"arrangement"),a===Op||a===Uq||a===Sp)&&(this.cd=a,this.J())}),t.g(W,"arrangementSpacing",W.prototype.fw),t.defineProperty(W,{fw:"arrangementSpacing"},function(){return this.bg},function(a){t.l(a,fa,W,"arrangementSpacing"),this.bg.M(a)||(this.bg.assign(a),this.J())}),t.g(W,"rootDefaults",W.prototype.LJ),t.defineProperty(W,{LJ:"rootDefaults"},function(){return this.ua},function(a){this.ua!==a&&(t.l(a,Pp,W,"rootDefaults"),this.ua=a,this.J())}),t.g(W,"alternateDefaults",W.prototype.NH),t.defineProperty(W,{NH:"alternateDefaults"},function(){return this.ta},function(a){this.ta!==a&&(t.l(a,Pp,W,"alternateDefaults"),this.ta=a,this.J())}),t.g(W,"sorting",W.prototype.sorting),t.defineProperty(W,{sorting:"sorting"},function(){return this.ua.sorting},function(a){this.ua.sorting!==a&&(t.Aa(a,W,W,"sorting"),a===fq||a===gq||a===hq||iq)&&(this.ua.sorting=a,this.J())}),t.g(W,"comparer",W.prototype.comparer),t.defineProperty(W,{comparer:"comparer"},function(){return this.ua.comparer},function(a){this.ua.comparer!==a&&(t.i(a,"function",W,"comparer"),this.ua.comparer=a,this.J())}),t.g(W,"angle",W.prototype.angle),t.defineProperty(W,{angle:"angle"},function(){return this.ua.angle},function(a){this.ua.angle!==a&&(t.i(a,"number",W,"angle"),0===a||90===a||180===a||270===a)&&(this.ua.angle=a,this.J())}),t.g(W,"alignment",W.prototype.alignment),t.defineProperty(W,{alignment:"alignment"},function(){return this.ua.alignment},function(a){this.ua.alignment!==a&&(t.Aa(a,W,W,"alignment"),this.ua.alignment=a,this.J())}),t.g(W,"nodeIndent",W.prototype.nodeIndent),t.defineProperty(W,{nodeIndent:"nodeIndent"},function(){return this.ua.nodeIndent},function(a){this.ua.nodeIndent!==a&&(t.i(a,"number",W,"nodeIndent"),a>=0&&(this.ua.nodeIndent=a,this.J()))}),t.g(W,"nodeIndentPastParent",W.prototype.nodeIndentPastParent),t.defineProperty(W,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ua.nodeIndentPastParent},function(a){this.ua.nodeIndentPastParent!==a&&(t.i(a,"number",W,"nodeIndentPastParent"),a>=0&&1>=a&&(this.ua.nodeIndentPastParent=a,this.J()))}),t.g(W,"nodeSpacing",W.prototype.nodeSpacing),t.defineProperty(W,{nodeSpacing:"nodeSpacing"},function(){return this.ua.nodeSpacing},function(a){this.ua.nodeSpacing!==a&&(t.i(a,"number",W,"nodeSpacing"),this.ua.nodeSpacing=a,this.J())}),t.g(W,"layerSpacing",W.prototype.layerSpacing),t.defineProperty(W,{layerSpacing:"layerSpacing"},function(){return this.ua.layerSpacing},function(a){this.ua.layerSpacing!==a&&(t.i(a,"number",W,"layerSpacing"),this.ua.layerSpacing=a,this.J())}),t.g(W,"layerSpacingParentOverlap",W.prototype.layerSpacingParentOverlap),t.defineProperty(W,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ua.layerSpacingParentOverlap},function(a){this.ua.layerSpacingParentOverlap!==a&&(t.i(a,"number",W,"layerSpacingParentOverlap"),a>=0&&1>=a&&(this.ua.layerSpacingParentOverlap=a,this.J()))}),t.g(W,"compaction",W.prototype.compaction),t.defineProperty(W,{compaction:"compaction"},function(){return this.ua.compaction},function(a){this.ua.compaction!==a&&(t.Aa(a,W,W,"compaction"),a===qq||a===sq)&&(this.ua.compaction=a,this.J())}),t.g(W,"breadthLimit",W.prototype.breadthLimit),t.defineProperty(W,{breadthLimit:"breadthLimit"},function(){return this.ua.breadthLimit},function(a){this.ua.breadthLimit!==a&&(t.i(a,"number",W,"breadthLimit"),a>=0&&(this.ua.breadthLimit=a,this.J()))}),t.g(W,"rowSpacing",W.prototype.rowSpacing),t.defineProperty(W,{rowSpacing:"rowSpacing"},function(){return this.ua.rowSpacing},function(a){this.ua.rowSpacing!==a&&(t.i(a,"number",W,"rowSpacing"),this.ua.rowSpacing=a,this.J())}),t.g(W,"rowIndent",W.prototype.rowIndent),t.defineProperty(W,{rowIndent:"rowIndent"},function(){return this.ua.rowIndent},function(a){this.ua.rowIndent!==a&&(t.i(a,"number",W,"rowIndent"),a>=0&&(this.ua.rowIndent=a,this.J()))}),t.g(W,"commentSpacing",W.prototype.commentSpacing),t.defineProperty(W,{commentSpacing:"commentSpacing"},function(){return this.ua.commentSpacing},function(a){this.ua.commentSpacing!==a&&(t.i(a,"number",W,"commentSpacing"),this.ua.commentSpacing=a,this.J())}),t.g(W,"commentMargin",W.prototype.commentMargin),t.defineProperty(W,{commentMargin:"commentMargin"},function(){return this.ua.commentMargin},function(a){this.ua.commentMargin!==a&&(t.i(a,"number",W,"commentMargin"),this.ua.commentMargin=a,this.J())}),t.g(W,"setsPortSpot",W.prototype.setsPortSpot),t.defineProperty(W,{setsPortSpot:"setsPortSpot"},function(){return this.ua.setsPortSpot},function(a){this.ua.setsPortSpot!==a&&(t.i(a,"boolean",W,"setsPortSpot"),this.ua.setsPortSpot=a,this.J())}),t.g(W,"portSpot",W.prototype.portSpot),t.defineProperty(W,{portSpot:"portSpot"},function(){return this.ua.portSpot},function(a){t.l(a,H,W,"portSpot"),this.ua.portSpot.M(a)||(this.ua.portSpot=a,this.J())}),t.g(W,"setsChildPortSpot",W.prototype.setsChildPortSpot),t.defineProperty(W,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ua.setsChildPortSpot},function(a){this.ua.setsChildPortSpot!==a&&(t.i(a,"boolean",W,"setsChildPortSpot"),this.ua.setsChildPortSpot=a,this.J())}),t.g(W,"childPortSpot",W.prototype.childPortSpot),t.defineProperty(W,{childPortSpot:"childPortSpot"},function(){return this.ua.childPortSpot},function(a){t.l(a,H,W,"childPortSpot"),this.ua.childPortSpot.M(a)||(this.ua.childPortSpot=a,this.J())}),t.g(W,"alternateSorting",W.prototype.YH),t.defineProperty(W,{YH:"alternateSorting"},function(){return this.ta.sorting},function(a){this.ta.sorting!==a&&(t.Aa(a,W,W,"alternateSorting"),a===fq||a===gq||a===hq||iq)&&(this.ta.sorting=a,this.J())}),t.g(W,"alternateComparer",W.prototype.MH),t.defineProperty(W,{MH:"alternateComparer"},function(){return this.ta.comparer},function(a){this.ta.comparer!==a&&(t.i(a,"function",W,"alternateComparer"),this.ta.comparer=a,this.J())}),t.g(W,"alternateAngle",W.prototype.GH),t.defineProperty(W,{GH:"alternateAngle"},function(){return this.ta.angle},function(a){this.ta.angle!==a&&(t.i(a,"number",W,"alternateAngle"),0===a||90===a||180===a||270===a)&&(this.ta.angle=a,this.J())}),t.g(W,"alternateAlignment",W.prototype.FH),t.defineProperty(W,{FH:"alternateAlignment"},function(){return this.ta.alignment},function(a){this.ta.alignment!==a&&(t.Aa(a,W,W,"alternateAlignment"),this.ta.alignment=a,this.J())}),t.g(W,"alternateNodeIndent",W.prototype.QH),t.defineProperty(W,{QH:"alternateNodeIndent"},function(){return this.ta.nodeIndent},function(a){this.ta.nodeIndent!==a&&(t.i(a,"number",W,"alternateNodeIndent"),a>=0&&(this.ta.nodeIndent=a,this.J()))}),t.g(W,"alternateNodeIndentPastParent",W.prototype.RH),t.defineProperty(W,{RH:"alternateNodeIndentPastParent"},function(){return this.ta.nodeIndentPastParent},function(a){this.ta.nodeIndentPastParent!==a&&(t.i(a,"number",W,"alternateNodeIndentPastParent"),a>=0&&1>=a&&(this.ta.nodeIndentPastParent=a,this.J()))}),t.g(W,"alternateNodeSpacing",W.prototype.SH),t.defineProperty(W,{SH:"alternateNodeSpacing"},function(){return this.ta.nodeSpacing},function(a){this.ta.nodeSpacing!==a&&(t.i(a,"number",W,"alternateNodeSpacing"),this.ta.nodeSpacing=a,this.J())}),t.g(W,"alternateLayerSpacing",W.prototype.OH),t.defineProperty(W,{OH:"alternateLayerSpacing"},function(){return this.ta.layerSpacing},function(a){this.ta.layerSpacing!==a&&(t.i(a,"number",W,"alternateLayerSpacing"),this.ta.layerSpacing=a,this.J())}),t.g(W,"alternateLayerSpacingParentOverlap",W.prototype.PH),t.defineProperty(W,{PH:"alternateLayerSpacingParentOverlap"},function(){return this.ta.layerSpacingParentOverlap},function(a){this.ta.layerSpacingParentOverlap!==a&&(t.i(a,"number",W,"alternateLayerSpacingParentOverlap"),a>=0&&1>=a&&(this.ta.layerSpacingParentOverlap=a,this.J()))}),t.g(W,"alternateCompaction",W.prototype.LH),t.defineProperty(W,{LH:"alternateCompaction"},function(){return this.ta.compaction},function(a){this.ta.compaction!==a&&(t.Aa(a,W,W,"alternateCompaction"),a===qq||a===sq)&&(this.ta.compaction=a,this.J())}),t.g(W,"alternateBreadthLimit",W.prototype.HH),t.defineProperty(W,{HH:"alternateBreadthLimit"},function(){return this.ta.breadthLimit},function(a){this.ta.breadthLimit!==a&&(t.i(a,"number",W,"alternateBreadthLimit"),a>=0&&(this.ta.breadthLimit=a,this.J()))}),t.g(W,"alternateRowSpacing",W.prototype.VH),t.defineProperty(W,{VH:"alternateRowSpacing"},function(){return this.ta.rowSpacing},function(a){this.ta.rowSpacing!==a&&(t.i(a,"number",W,"alternateRowSpacing"),this.ta.rowSpacing=a,this.J())}),t.g(W,"alternateRowIndent",W.prototype.UH),t.defineProperty(W,{UH:"alternateRowIndent"},function(){return this.ta.rowIndent},function(a){this.ta.rowIndent!==a&&(t.i(a,"number",W,"alternateRowIndent"),a>=0&&(this.ta.rowIndent=a,this.J()))}),t.g(W,"alternateCommentSpacing",W.prototype.KH),t.defineProperty(W,{KH:"alternateCommentSpacing"},function(){return this.ta.commentSpacing},function(a){this.ta.commentSpacing!==a&&(t.i(a,"number",W,"alternateCommentSpacing"),this.ta.commentSpacing=a,this.J())}),t.g(W,"alternateCommentMargin",W.prototype.JH),t.defineProperty(W,{JH:"alternateCommentMargin"},function(){return this.ta.commentMargin},function(a){this.ta.commentMargin!==a&&(t.i(a,"number",W,"alternateCommentMargin"),this.ta.commentMargin=a,this.J())}),t.g(W,"alternateSetsPortSpot",W.prototype.XH),t.defineProperty(W,{XH:"alternateSetsPortSpot"},function(){return this.ta.setsPortSpot},function(a){this.ta.setsPortSpot!==a&&(t.i(a,"boolean",W,"alternateSetsPortSpot"),this.ta.setsPortSpot=a,this.J())}),t.g(W,"alternatePortSpot",W.prototype.TH),t.defineProperty(W,{TH:"alternatePortSpot"},function(){return this.ta.portSpot},function(a){t.l(a,H,W,"alternatePortSpot"),this.ta.portSpot.M(a)||(this.ta.portSpot=a,this.J())}),t.g(W,"alternateSetsChildPortSpot",W.prototype.WH),t.defineProperty(W,{WH:"alternateSetsChildPortSpot"},function(){return this.ta.setsChildPortSpot},function(a){this.ta.setsChildPortSpot!==a&&(t.i(a,"boolean",W,"alternateSetsChildPortSpot"),this.ta.setsChildPortSpot=a,this.J())}),t.g(W,"alternateChildPortSpot",W.prototype.IH),t.defineProperty(W,{IH:"alternateChildPortSpot"},function(){return this.ta.childPortSpot},function(a){t.l(a,H,W,"alternateChildPortSpot"),this.ta.childPortSpot.M(a)||(this.ta.childPortSpot=a,this.J())});var Kp;W.PathDefault=Kp=t.w(W,"PathDefault",-1);var Lp;W.PathDestination=Lp=t.w(W,"PathDestination",0);var Tp;W.PathSource=Tp=t.w(W,"PathSource",1);var fq;W.SortingForwards=fq=t.w(W,"SortingForwards",10);var gq;W.SortingReverse=gq=t.w(W,"SortingReverse",11);var hq;W.SortingAscending=hq=t.w(W,"SortingAscending",12);var iq;W.SortingDescending=iq=t.w(W,"SortingDescending",13);var Gq;W.AlignmentCenterSubtrees=Gq=t.w(W,"AlignmentCenterSubtrees",20);var jq;W.AlignmentCenterChildren=jq=t.w(W,"AlignmentCenterChildren",21);var uq;W.AlignmentStart=uq=t.w(W,"AlignmentStart",22);var vq;W.AlignmentEnd=vq=t.w(W,"AlignmentEnd",23);var lq;W.AlignmentBus=lq=t.w(W,"AlignmentBus",24);var aq;W.AlignmentBusBranching=aq=t.w(W,"AlignmentBusBranching",25);var mq;W.AlignmentTopLeftBus=mq=t.w(W,"AlignmentTopLeftBus",26);var nq;W.AlignmentBottomRightBus=nq=t.w(W,"AlignmentBottomRightBus",27);var qq;W.CompactionNone=qq=t.w(W,"CompactionNone",30);var sq;W.CompactionBlock=sq=t.w(W,"CompactionBlock",31);var Mp;W.StyleLayered=Mp=t.w(W,"StyleLayered",40);var eq;W.StyleLastParents=eq=t.w(W,"StyleLastParents",41);var dq;W.StyleAlternating=dq=t.w(W,"StyleAlternating",42);var cq;W.StyleRootOnly=cq=t.w(W,"StyleRootOnly",43);var Op;W.ArrangementVertical=Op=t.w(W,"ArrangementVertical",50);var Uq;W.ArrangementHorizontal=Uq=t.w(W,"ArrangementHorizontal",51);var Sp;W.ArrangementFixedRoots=Sp=t.w(W,"ArrangementFixedRoots",52);var Np;W.LayerIndividual=Np=t.w(W,"LayerIndividual",60);var Zp;W.LayerSiblings=Zp=t.w(W,"LayerSiblings",61);var Yp;W.LayerUniform=Yp=t.w(W,"LayerUniform",62),t.ga("TreeNetwork",Qp),t.Ka(Qp,ta),Qp.prototype.createVertex=function(){return new Pp},Qp.prototype.createEdge=function(){return new Wq},t.ga("TreeVertex",Pp),t.Ka(Pp,ua),Pp.prototype.copyInheritedPropertiesFrom=function(a){null!==a&&(this.sorting=a.sorting,this.comparer=a.comparer,this.angle=a.angle,this.alignment=a.alignment,this.nodeIndent=a.nodeIndent,this.nodeIndentPastParent=a.nodeIndentPastParent,this.nodeSpacing=a.nodeSpacing,this.layerSpacing=a.layerSpacing,this.layerSpacingParentOverlap=a.layerSpacingParentOverlap,this.compaction=a.compaction,this.breadthLimit=a.breadthLimit,this.rowSpacing=a.rowSpacing,this.rowIndent=a.rowIndent,this.commentSpacing=a.commentSpacing,this.commentMargin=a.commentMargin,this.setsPortSpot=a.setsPortSpot,this.portSpot=a.portSpot,this.setsChildPortSpot=a.setsChildPortSpot,this.childPortSpot=a.childPortSpot)},t.A(Pp,{Im:"childrenCount"},function(){return this.children.length}),t.g(Pp,"relativePosition",Pp.prototype.HJ),t.defineProperty(Pp,{HJ:"relativePosition"},function(){return this.na},function(a){this.na.set(a)}),t.g(Pp,"subtreeSize",Pp.prototype.$J),t.defineProperty(Pp,{$J:"subtreeSize"},function(){return this.Za},function(a){this.Za.set(a)}),t.g(Pp,"subtreeOffset",Pp.prototype.ZJ),t.defineProperty(Pp,{ZJ:"subtreeOffset"},function(){return this.Ia},function(a){this.Ia.set(a)}),t.ga("TreeEdge",Wq),t.Ka(Wq,va),Wq.prototype.commit=function(){var a=this.link;if(null!==a&&!a.dj){var b=this.network.jc,c=null,d=null;switch(b.If){case Lp:c=this.fromVertex,d=this.toVertex;break;case Tp:c=this.toVertex,d=this.fromVertex;break;default:t.m("Unhandled path value "+b.If.toString())}if(null!==c&&null!==d)if(b=this.Sr,0!==b.x||0!==b.y||c.NJ){var d=c.Pb,f=tq(c),g=wq(c),h=c.rowSpacing;a.updateRoute();var i,j,k,l,m=a.De===Pg,n=a.ic;if(a.zl(),n||m){for(i=2;4<a.pa;)a.PF(2);j=a.o(1),k=a.o(2)}else{for(i=1;3<a.pa;)a.PF(1);j=a.o(0),k=a.o(a.pa-1)}l=a.o(a.pa-1),0===f?(c.alignment===vq?(f=d.bottom+b.y,0===b.y&&j.y>l.y+c.rowIndent&&(f=Math.min(f,Math.max(j.y,f-xq(c))))):c.alignment===uq?(f=d.top+b.y,0===b.y&&j.y<l.y-c.rowIndent&&(f=Math.max(f,Math.min(j.y,f+xq(c))))):f=c.Op||c.Pp&&1===c.maxGenerationCount?d.top-c.Ia.y+b.y:d.y+d.height/2+b.y,m?(a.C(i,j.x,f),i++,a.C(i,d.right+g,f),i++,a.C(i,d.right+g+(b.x-h)/3,f),i++,a.C(i,d.right+g+2*(b.x-h)/3,f),i++,a.C(i,d.right+g+(b.x-h),f),i++,a.C(i,k.x,f)):(n&&(a.C(i,d.right+g/2,j.y),i++),a.C(i,d.right+g/2,f),i++,a.C(i,d.right+g+b.x-(n?h/2:h),f),i++,n&&a.C(i,a.o(i-1).x,k.y))):90===f?(c.alignment===vq?(f=d.right+b.x,0===b.x&&j.x>l.x+c.rowIndent&&(f=Math.min(f,Math.max(j.x,f-xq(c))))):c.alignment===uq?(f=d.left+b.x,0===b.x&&j.x<l.x-c.rowIndent&&(f=Math.max(f,Math.min(j.x,f+xq(c))))):f=c.Op||c.Pp&&1===c.maxGenerationCount?d.left-c.Ia.x+b.x:d.x+d.width/2+b.x,m?(a.C(i,f,j.y),i++,a.C(i,f,d.bottom+g),i++,a.C(i,f,d.bottom+g+(b.y-h)/3),i++,a.C(i,f,d.bottom+g+2*(b.y-h)/3),i++,a.C(i,f,d.bottom+g+(b.y-h)),i++,a.C(i,f,k.y)):(n&&(a.C(i,j.x,d.bottom+g/2),i++),a.C(i,f,d.bottom+g/2),i++,a.C(i,f,d.bottom+g+b.y-(n?h/2:h)),i++,n&&a.C(i,k.x,a.o(i-1).y))):180===f?(c.alignment===vq?(f=d.bottom+b.y,0===b.y&&j.y>l.y+c.rowIndent&&(f=Math.min(f,Math.max(j.y,f-xq(c))))):c.alignment===uq?(f=d.top+b.y,0===b.y&&j.y<l.y-c.rowIndent&&(f=Math.max(f,Math.min(j.y,f+xq(c))))):f=c.Op||c.Pp&&1===c.maxGenerationCount?d.top-c.Ia.y+b.y:d.y+d.height/2+b.y,m?(a.C(i,j.x,f),i++,a.C(i,d.left-g,f),i++,a.C(i,d.left-g+(b.x+h)/3,f),i++,a.C(i,d.left-g+2*(b.x+h)/3,f),i++,a.C(i,d.left-g+(b.x+h),f),i++,a.C(i,k.x,f)):(n&&(a.C(i,d.left-g/2,j.y),i++),a.C(i,d.left-g/2,f),i++,a.C(i,d.left-g+b.x+(n?h/2:h),f),i++,n&&a.C(i,a.o(i-1).x,k.y))):270===f?(c.alignment===vq?(f=d.right+b.x,0===b.x&&j.x>l.x+c.rowIndent&&(f=Math.min(f,Math.max(j.x,f-xq(c))))):c.alignment===uq?(f=d.left+b.x,0===b.x&&j.x<l.x-c.rowIndent&&(f=Math.max(f,Math.min(j.x,f+xq(c))))):f=c.Op||c.Pp&&1===c.maxGenerationCount?d.left-c.Ia.x+b.x:d.x+d.width/2+b.x,m?(a.C(i,f,j.y),i++,a.C(i,f,d.top-g),i++,a.C(i,f,d.top-g+(b.y+h)/3),i++,a.C(i,f,d.top-g+2*(b.y+h)/3),i++,a.C(i,f,d.top-g+(b.y+h)),i++,a.C(i,f,k.y)):(n&&(a.C(i,j.x,d.top-g/2),i++),a.C(i,f,d.top-g/2),i++,a.C(i,f,d.top-g+b.y+(n?h/2:h)),i++,n&&a.C(i,k.x,a.o(i-1).y))):t.m("Invalid angle "+f),a.Xi()}else g=c,h=d,e&&t.l(g,Pp,Wq,"adjustRouteForAngleChange:parent"),e&&t.l(h,Pp,Wq,"adjustRouteForAngleChange:child"),a=this.link,c=tq(g),c!==tq(h)&&(b=wq(g),d=g.Pb,g=h.Pb,0===c&&g.left-d.right<b+1||90===c&&g.top-d.bottom<b+1||180===c&&d.left-g.right<b+1||270===c&&d.top-g.bottom<b+1||(a.updateRoute(),g=a.De===Pg,h=a.ic,m=kq(this.fromVertex.alignment),a.zl(),0===c?(c=d.right+b/2,g?4===a.pa&&(b=a.o(3).y,a.Y(1,c-20,a.o(1).y),a.C(2,c-20,b),a.C(3,c,b),a.C(4,c+20,b),a.Y(5,a.o(5).x,b)):h?m?a.Y(3,a.o(2).x,a.o(4).y):6===a.pa&&(a.Y(2,c,a.o(2).y),a.Y(3,c,a.o(3).y)):4===a.pa?a.C(2,c,a.o(2).y):3===a.pa?a.Y(1,c,a.o(2).y):2===a.pa&&a.C(1,c,a.o(1).y)):90===c?(b=d.bottom+b/2,g?4===a.pa&&(c=a.o(3).x,a.Y(1,a.o(1).x,b-20),a.C(2,c,b-20),a.C(3,c,b),a.C(4,c,b+20),a.Y(5,c,a.o(5).y)):h?m?a.Y(3,a.o(2).x,a.o(4).y):6===a.pa&&(a.Y(2,a.o(2).x,b),a.Y(3,a.o(3).x,b)):4===a.pa?a.C(2,a.o(2).x,b):3===a.pa?a.Y(1,a.o(2).x,b):2===a.pa&&a.C(1,a.o(1).x,b)):180===c?(c=d.left-b/2,g?4===a.pa&&(b=a.o(3).y,a.Y(1,c+20,a.o(1).y),a.C(2,c+20,b),a.C(3,c,b),a.C(4,c-20,b),a.Y(5,a.o(5).x,b)):h?m?a.Y(3,a.o(2).x,a.o(4).y):6===a.pa&&(a.Y(2,c,a.o(2).y),a.Y(3,c,a.o(3).y)):4===a.pa?a.C(2,c,a.o(2).y):3===a.pa?a.Y(1,c,a.o(2).y):2===a.pa&&a.C(1,c,a.o(1).y)):270===c&&(b=d.top-b/2,g?4===a.pa&&(c=a.o(3).x,a.Y(1,a.o(1).x,b+20),a.C(2,c,b+20),a.C(3,c,b),a.C(4,c,b-20),a.Y(5,c,a.o(5).y)):h?m?a.Y(3,a.o(2).x,a.o(4).y):6===a.pa&&(a.Y(2,a.o(2).x,b),a.Y(3,a.o(3).x,b)):4===a.pa?a.C(2,a.o(2).x,b):3===a.pa?a.Y(1,a.o(2).x,b):2===a.pa&&a.C(1,a.o(1).x,b)),a.Xi()))}},t.g(Wq,"relativePoint",Wq.prototype.GJ),t.defineProperty(Wq,{GJ:"relativePoint"},function(){return this.Sr},function(a){this.Sr.set(a)}),Xq.prototype.Ds=function(a){var b=a.qa,c=a.ra,d=a.D,e=a.F,f=Math.min(b,d),g=Math.min(c,e),b=Math.abs(d-b),c=Math.abs(e-c),e=new Bc(f,g);return e.Ea.add(new id(Oc,f+b,g)),e.Ea.add(new id(Oc,f+b,g+c)),e.Ea.add(new id(Oc,f,g+c).close()),a.type=Ac,a.Bb.add(e),a},ba.version="1.4.27",window&&(window.module&&"object"==typeof window.module&&"object"==typeof window.module.exports?window.module.exports=ba:window.define&&"function"==typeof window.define&&window.define.amd?(window.go=ba,window.define(ba)):window.go=ba)}(window),function(a,b,c,d){"use strict";a.ServerMap=c.Class({$init:function(a){this.option({sContainerId:"",sBigFont:"11pt avn85,NanumGothic,ng,dotum,AppleGothic,sans-serif",sSmallFont:"10pt avn55,NanumGothic,ng,dotum,AppleGothic,sans-serif",sImageDir:"./img/",sBoldKey:null,htIcons:{APACHE:"APACHE.png",ARCUS:"ARCUS.png",BACKEND:"BACKEND.png",BLOC:"BLOC.png",CASSANDRA:"CASSANDRA.png",CUBRID:"CUBRID.png",JAVA:"JAVA.png",MEMCACHED:"MEMCACHED.png",MONGODB:"MONGODB.png",MSSQLSERVER:"MSSQLSERVER.png",MYSQL:"MYSQL.png",NBASE:"NBASE.png",NGINX:"NGINX.png",ORACLE:"ORACLE.png",QUEUE:"QUEUE.png",STAND_ALONE:"STAND_ALONE.png",TOMCAT:"TOMCAT.png",UNKNOWN:"UNKNOWN.png",UNKNOWN_GROUP:"UNKNOWN_GROUP.png",REDIS:"REDIS.png",NBASE_ARC:"NBASE_ARC.png",USER:"USER.png"},htNodeTheme:{"default":{backgroundColor:"#ffffff",borderColor:"#C5C5C5",borderWidth:1,fontColor:"#1F1F21"},bold:{backgroundColor:"#f2f2f2",borderColor:"#666975",borderWidth:2}},htLinkType:{sRouting:"AvoidsNodes",sCurve:"JumpGap"},htLinkTheme:{"default":{backgroundColor:"#ffffff",borderColor:"#c5c5c5",fontFamily:"11pt avn55,NanumGothic,ng,dotum,AppleGothic,sans-serif",fontColor:"#000000",fontAlign:"center",margin:1},bad:{backgroundColor:"#ffc9c9",borderColor:"#7d7d7d",fontFamily:"11pt avn55,NanumGothic,ng,dotum,AppleGothic,sans-serif",fontColor:"#FF1300",fontAlign:"center",margin:1}},htHighlightNode:{borderColor:"#25AFF4",backgroundColor:"#289E1D",fontColor:"#ffffff"},htHighlightLink:{borderColor:"#25AFF4"},htPadding:{top:10,right:10,bottom:10,left:10},fOnNodeClicked:function(a,b){},fOnNodeContextClicked:function(a,b){},fOnLinkClicked:function(a,b){},fOnLinkContextClicked:function(a,b){},fOnBackgroundClicked:function(a,b){},fOnBackgroundDoubleClicked:function(a,b){},fOnBackgroundContextClicked:function(a,b){}}),this.option(a),this._initVariables(),this._initNodeTemplates(),this._initLinkTemplates(),this._initDiagramEnvironment()},_initVariables:function(){this.$=b.GraphObject.make,this.nodeClickEventOnce=!1,this._oDiagram=this.$(b.Diagram,this.option("sContainerId"),{initialContentAlignment:b.Spot.Center,maxSelectionCount:1,allowDelete:!1})},_initNodeTemplates:function(){var a=this,c=this.option("sImageDir"),e=this.option("htIcons"),f=a.$(b.Panel,b.Panel.TableRow,{},a.$(b.TextBlock,{margin:new b.Margin(0,2),column:1,stroke:"#848484",font:a.option("sSmallFont")},new b.Binding("text","k")),a.$(b.TextBlock,{margin:new b.Margin(0,2),column:2,stroke:"#848484",font:a.option("sSmallFont")},new b.Binding("text","v"))),g=function(d){return a.$(b.Node,new b.Binding("category","serviceType"),b.Panel.Auto,{selectionAdorned:!1,cursor:"pointer",name:"NODE",click:function(b,c){a._onNodeClicked(b,c)},contextClick:a._onNodeContextClicked.bind(this)},a.$(b.Shape,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft,figure:"RoundedRectangle",strokeWidth:1,margin:0,isPanelMain:!0,minSize:new b.Size(120,NaN),name:"NODE_SHAPE",portId:""},new b.Binding("strokeWidth","key",function(b){var c="default";return a.option("sBoldKey")&&a.option("sBoldKey")===b&&(c="bold"),a.option("htNodeTheme")[c].borderWidth}),new b.Binding("stroke","key",function(b){var c="default";return a.option("sBoldKey")&&a.option("sBoldKey")===b&&(c="bold"),a.option("htNodeTheme")[c].borderColor}),new b.Binding("fill","key",function(b){var c="default";return a.option("sBoldKey")&&a.option("sBoldKey")===b&&(c="bold"),a.option("htNodeTheme")[c].backgroundColor}),new b.Binding("key","key")),a.$(b.Panel,b.Panel.Spot,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft},a.$(b.Panel,b.Panel.Vertical,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft,minSize:new b.Size(120,NaN)},a.$(b.Picture,{source:c+d,margin:new b.Margin(18,0,5,0),desiredSize:new b.Size(80,40),imageStretch:b.GraphObject.Uniform}),a.$(b.TextBlock,new b.Binding("text","applicationName").makeTwoWay(),{alignment:b.Spot.Center,name:"NODE_TEXT",margin:6,font:a.option("sBigFont"),editable:!1}),a.$(b.Panel,b.Panel.Table,{padding:2,minSize:new b.Size(100,10),defaultStretch:b.GraphObject.Horizontal,itemTemplate:f},new b.Binding("itemArray","infoTable"))),a.$(b.Panel,b.Panel.Horizontal,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft,margin:0},a.$(b.Picture,{source:c+"ERROR.png",desiredSize:new b.Size(20,20),imageStretch:b.GraphObject.Uniform,margin:new b.Margin(1,5,0,1)},new b.Binding("visible","hasAlert")),a.$(b.Picture,{source:c+"FILTER.png",desiredSize:new b.Size(17,17),visible:!1,imageStretch:b.GraphObject.Uniform},new b.Binding("visible","isFiltered"))),a.$(b.Panel,b.Panel.Auto,{alignment:b.Spot.TopRight,alignmentFocus:b.Spot.TopRight,visible:!1},new b.Binding("visible","instanceCount",function(a){return a>1?!0:!1}),a.$(b.Shape,{figure:"RoundedRectangle",fill:"#848484",strokeWidth:1,stroke:"#848484"}),a.$(b.Panel,b.Panel.Auto,{margin:new b.Margin(0,3,0,3)},a.$(b.TextBlock,new b.Binding("text","instanceCount"),{stroke:"#FFFFFF",textAlign:"center",height:16,font:a.option("sSmallFont"),editable:!1})))))},h=a.$(b.Panel,b.Panel.TableRow,{},a.$(b.Picture,{source:c+"ERROR.png",margin:new b.Margin(1,2),desiredSize:new b.Size(10,10),visible:!1,column:1,imageStretch:b.GraphObject.Uniform},new b.Binding("visible","hasAlert")),a.$(b.TextBlock,{margin:new b.Margin(1,2),column:2,font:a.option("sSmallFont"),alignment:b.Spot.Left},new b.Binding("text","applicationName"),new b.Binding("click","key",function(b){return function(c,d){return c.bubbles=!1,a._onNodeClicked(c,d,b),!1}})),a.$(b.TextBlock,{margin:new b.Margin(1,2),column:3,alignment:b.Spot.Right,font:a.option("sSmallFont")},new b.Binding("text","totalCount",function(a){return Number(a,10).toLocaleString()}))),i=function(d){return a.$(b.Node,b.Panel.Auto,{selectionAdorned:!1,cursor:"pointer",name:"NODE",click:function(b,c){b.bubbles&&a._onNodeClicked(b,c)},contextClick:a._onNodeContextClicked.bind(this)},a.$(b.Shape,{figure:"RoundedRectangle",isPanelMain:!0,minSize:new b.Size(100,100),name:"NODE_SHAPE",portId:"",strokeWidth:a.option("htNodeTheme")["default"].borderWidth,stroke:a.option("htNodeTheme")["default"].borderColor,fill:a.option("htNodeTheme")["default"].backgroundColor},new b.Binding("key","key")),a.$(b.Panel,b.Panel.Spot,{},a.$(b.Panel,b.Panel.Vertical,{alignment:b.Spot.TopLeft,alignmentFocus:b.Spot.TopLeft,minSize:new b.Size(130,NaN)},a.$(b.Picture,{source:c+d,margin:new b.Margin(0,0,5,0),desiredSize:new b.Size(100,40),imageStretch:b.GraphObject.Uniform}),a.$(b.Panel,b.Panel.Table,{padding:2,minSize:new b.Size(100,10),defaultStretch:b.GraphObject.Horizontal,itemTemplate:h,name:"NODE_TEXT"},new b.Binding("itemArray","unknownNodeGroup")))))};d.each(e,function(a,b){"UNKNOWN_GROUP"===b?this._oDiagram.nodeTemplateMap.add(b,i(a)):this._oDiagram.nodeTemplateMap.add(b,g(a))},this)},_initLinkTemplates:function(){var a=this,c=(this.option("htLinkType"),{selectionAdorned:!1,contextClick:this._onLinkContextClicked.bind(this),layerName:"Foreground",reshapable:!1,corner:10,cursor:"pointer"}),e=this.option("htLinkTheme"),f=this.option("sImageDir"),g=e["default"],h=e.bad,i=function(d){return a.$(b.Link,c,new b.Binding("routing","routing",function(a){return b.Link[a]}),new b.Binding("curve","curve",function(a){return b.Link[a]}),new b.Binding("curviness","curviness"),a.$(b.Shape,{name:"LINK",isPanelMain:!0,stroke:d.borderColor,strokeWidth:1.5}),a.$(b.Shape,{name:"ARROW",toArrow:"standard",fill:d.borderColor,stroke:null,scale:1.5}),a.$(b.Panel,b.Panel.Auto,a.$(b.Shape,"RoundedRectangle",{name:"LINK2",fill:"#ffffff",stroke:"#ffffff",portId:"",fromLinkable:!0,toLinkable:!0}),a.$(b.Panel,b.Panel.Horizontal,{margin:4},a.$(b.Picture,{source:f+"FILTER.png",width:14,height:14,margin:1,visible:!1,imageStretch:b.GraphObject.Uniform},new b.Binding("visible","isFiltered")),a.$(b.TextBlock,{textAlign:d.fontAlign,font:d.fontFamily,margin:d.margin},new b.Binding("text","totalCount",function(a){return Number(a,10).toLocaleString()}),new b.Binding("stroke","hasAlert",function(a){return a?h.fontColor:g.fontColor})))))};this._oDiagram.linkTemplate=i(g),d.each(e,function(a,b){"default"!==b&&this._oDiagram.linkTemplateMap.add(b,i(a))},this)},_initDiagramEnvironment:function(){var a=this.option("htPadding");this._oDiagram.toolManager.mouseWheelBehavior=b.ToolManager.WheelZoom,this._oDiagram.allowDrop=!1,this._oDiagram.initialAutoScale=b.Diagram.Uniform,this._oDiagram.toolManager.draggingTool.doCancel(),this._oDiagram.toolManager.draggingTool.doDeactivate(),this._oDiagram.toolManager.dragSelectingTool.isEnabled=!1,this._oDiagram.initialContentAlignment=b.Spot.Center,this._oDiagram.padding=new b.Margin(a.top,a.right,a.bottom,a.left),this._oDiagram.layout=this.$(b.LayeredDigraphLayout,{isOngoing:!1,layerSpacing:100,columnSpacing:30,setsPortSpots:!1});var c=this;this._oDiagram.addDiagramListener("ChangedSelection",function(a){var d=c._oDiagram.selection.first();d&&(d instanceof b.Node?c.nodeClickEventOnce||(c._onNodeClicked(a,d),c.nodeClickEventOnce=!0):d instanceof b.Link&&c._onLinkClicked(a,d)),c._updateHightlights()}),this._oDiagram.addDiagramListener("BackgroundSingleClicked",function(a){var b=c.option("fOnBackgroundClicked");d.isFunction(b)&&b.call(c,a)}),this._oDiagram.addDiagramListener("BackgroundDoubleClicked",function(a){var b=c.option("fOnBackgroundDoubleClicked");d.isFunction(b)&&b.call(c,a)}),this._oDiagram.addDiagramListener("BackgroundContextClicked",function(a){var b=c.option("fOnBackgroundContextClicked");d.isFunction(b)&&b.call(c,a)})},load:function(a){this.nodeClickEventOnce=!1,this._sLastModelData=a,this._oDiagram.model=b.Model.fromJson(a),this._oDiagram.undoManager.isEnabled=!0},clear:function(){this._oDiagram.model=b.Model.fromJson({})},_resetHighlights:function(){for(var a=this._oDiagram.nodes,b=this._oDiagram.links;a.next();)a.value.highlight=!1;for(;b.next();)b.value.highlight=!1},_updateHightlights:function(a){if(a=a||this._oDiagram.selection.first(),null!==a){this._resetHighlights(),a.highlight="self",a instanceof b.Node||a instanceof b.Link;for(var c=this._oDiagram.nodes,d=this._oDiagram.links;c.next();)this._hightlightNode(c.value.findObject("NODE_SHAPE"),c.value.findObject("NODE_TEXT"),c.value.highlight);for(;d.next();)this._highlightLink(d.value.findObject("LINK"),d.value.highlight),this._highlightLink(d.value.findObject("ARROW"),d.value.highlight,!0)}},highlightNodeByKey:function(a){var b=this._oDiagram.findNodeForKey(a);if(b){var c=this._oDiagram.findPartForKey(a);this._oDiagram.select(c),this._updateHightlights(b)}},highlightLinkByFromTo:function(a,b){var c=this._getLinkObjectByFromTo(a,b);c&&(this._oDiagram.select(this._oDiagram.findPartForData(c)),this._updateHightlights(this._oDiagram.findLinkForData(c)))},_getLinkObjectByFromTo:function(a,b){for(var c=this._oDiagram.model.linkDataArray,d=0,e=c.length;e>d;d+=1){var f=c[d];if(f.from===a&&f.to===b)return f}return!1},_hightlightNode:function(a,b,c){if(null!==a&&null!==b)if(c)a.stroke=this.option("htHighlightNode").borderColor;else{var d=a.key===this.option("sBoldKey")?"bold":"default";a.stroke=this.option("htNodeTheme")[d].borderColor}},_highlightLink:function(a,b,c){if(null!==a){var d;d=b?this.option("htHighlightLink").borderColor:this.option("htLinkTheme")["default"].borderColor,c?a.fill=d:a.stroke=d}},_linksTo:function(a,c){if(a instanceof b.Node)for(var d=a.findLinksInto();d.next();)d.value.highlight=c},_linksFrom:function(a,c){if(a instanceof b.Node)for(var d=a.findLinksOutOf();d.next();)d.value.highlight=c},_nodesTo:function(a,c){var d=new b.List("string");if(a instanceof b.Link)a.fromNode.highlight=c,d.add(a.data.from);else for(var e=a.findNodesInto();e.next();)e.value.highlight=c,d.add(e.value.data.key);return d},_nodesFrom:function(a,c){var d=new b.List("string");if(a instanceof b.Link)a.toNode.highlight=c,d.add(a.data.to);else for(var e=a.findNodesOutOf();e.next();)e.value.highlight=c,d.add(e.value.data.key);return d},_onNodeClicked:function(a,b,c){var e=b.part,f=e.data,g=this.option("fOnNodeClicked");d.isFunction(g)&&g.call(this,a,f,c)},_onNodeContextClicked:function(a,b){var c=b.part,e=c.data,f=this.option("fOnNodeContextClicked");d.isFunction(f)&&f.call(this,a,e)},_onLinkClicked:function(a,b){var c=b.part,e=c.data,f=this.option("fOnLinkClicked");d.isFunction(f)&&(e.fromNode=b.fromNode.part.data,e.toNode=b.toNode.part.data,f.call(this,a,e))},_onLinkContextClicked:function(a,b){var c=b.part,e=c.data,f=this.option("fOnLinkContextClicked");d.isFunction(f)&&(e.fromNode=b.fromNode.part.data,e.toNode=b.toNode.part.data,f.call(this,a,e));
},refresh:function(){this.load(this._sLastModelData)},zoomToFit:function(){this._oDiagram.zoomToFit(),this._oDiagram.contentAlignment=b.Spot.Center,this._oDiagram.contentAlignment=b.Spot.None}})}(window,go,jQuery,_),angular.module("app",["ngAnimate","ngCookies","ngResource","ngSanitize","ngTouch","ngStorage","ui.router","ui.bootstrap","ui.utils","ui.load","ui.jq","oc.lazyLoad","pascalprecht.translate","appservices","facebook","googleplus","user","toaster","youtube-embed"]);var app=angular.module("app").constant("server_url","/").config(["$controllerProvider","$compileProvider","$filterProvider","$provide","FacebookProvider","GooglePlusProvider","cryptProvider",function(a,b,c,d,e,f,g){g.setSecret("abcdefg1234567890"),e.init("858617410822846"),f.init({clientId:"974639913694-n9mc312ljjf9mrce85la0ipaloabj6tp.apps.googleusercontent.com",apiKey:"derp"}),app.controller=a.register,app.directive=b.directive,app.filter=c.register,app.factory=d.factory,app.service=d.service,app.constant=d.constant,app.value=d.value}]).config(["$translateProvider",function(a){a.useStaticFilesLoader({prefix:"l10n/",suffix:".js"}),a.preferredLanguage("en"),a.useLocalStorage(),a.useSanitizeValueStrategy("escaped")}]);angular.module("app").constant("JQ_CONFIG",{easyPieChart:["../bower_components/jquery.easy-pie-chart/dist/jquery.easypiechart.fill.js"],sparkline:["../bower_components/jquery.sparkline/dist/jquery.sparkline.min.js"],plot:["../bower_components/flot/jquery.flot.js","../bower_components/flot/jquery.flot.pie.js","../bower_components/flot/jquery.flot.resize.js","../bower_components/flot.tooltip/js/jquery.flot.tooltip.js","../bower_components/flot.orderbars/js/jquery.flot.orderBars.js","../bower_components/flot-spline/js/jquery.flot.spline.js"],moment:["../bower_components/moment/moment.js"],screenfull:["../bower_components/screenfull/dist/screenfull.js"],slimScroll:["../bower_components/slimscroll/jquery.slimscroll.min.js"],sortable:["../bower_components/html5sortable/jquery.sortable.js"],nestable:["../bower_components/nestable/jquery.nestable.js","../bower_components/nestable/jquery.nestable.css"],filestyle:["../bower_components/bootstrap-filestyle/src/bootstrap-filestyle.js"],slider:["../bower_components/bootstrap-slider/bootstrap-slider.js","../bower_components/bootstrap-slider/bootstrap-slider.css"],chosen:["../bower_components/chosen/chosen.jquery.min.js","../bower_components/bootstrap-chosen/bootstrap-chosen.css"],TouchSpin:["../bower_components/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js","../bower_components/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css"],wysiwyg:["../bower_components/bootstrap-wysiwyg/bootstrap-wysiwyg.js","../bower_components/bootstrap-wysiwyg/external/jquery.hotkeys.js"],dataTable:["../bower_components/datatables/media/js/jquery.dataTables.min.js","../bower_components/plugins/integration/bootstrap/3/dataTables.bootstrap.js","../bower_components/plugins/integration/bootstrap/3/dataTables.bootstrap.css"],vectorMap:["../bower_components/bower-jvectormap/jquery-jvectormap-1.2.2.min.js","../bower_components/bower-jvectormap/jquery-jvectormap-world-mill-en.js","../bower_components/bower-jvectormap/jquery-jvectormap-us-aea-en.js","../bower_components/bower-jvectormap/jquery-jvectormap-1.2.2.css"],footable:["../bower_components/footable/dist/footable.all.min.js","../bower_components/footable/css/footable.core.css"],fullcalendar:["../bower_components/moment/moment.js","../bower_components/fullcalendar/dist/fullcalendar.min.js","../bower_components/fullcalendar/dist/fullcalendar.css","../bower_components/fullcalendar/dist/fullcalendar.theme.css"],daterangepicker:["../bower_components/moment/moment.js","../bower_components/bootstrap-daterangepicker/daterangepicker.js","../bower_components/bootstrap-daterangepicker/daterangepicker-bs3.css"],tagsinput:["../bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.js","../bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.css"],gojs:["../bower_components/gojs/release/go.js"]}).config(["$ocLazyLoadProvider",function(a){a.config({debug:!0,events:!0,modules:[{name:"ngGrid",files:["../bower_components/ng-grid/build/ng-grid.min.js","../bower_components/ng-grid/ng-grid.min.css","../bower_components/ng-grid/ng-grid.bootstrap.css"]},{name:"ui.grid",files:["../bower_components/angular-ui-grid/ui-grid.min.js","../bower_components/angular-ui-grid/ui-grid.min.css","../bower_components/angular-ui-grid/ui-grid.bootstrap.css"]},{name:"ui.select",files:["../bower_components/angular-ui-select/dist/select.min.js","../bower_components/angular-ui-select/dist/select.min.css"]},{name:"angularFileUpload",files:["../bower_components/angular-file-upload/angular-file-upload.min.js"]},{name:"ui.calendar",files:["../bower_components/angular-ui-calendar/src/calendar.js"]},{name:"ngImgCrop",files:["../bower_components/ngImgCrop/compile/minified/ng-img-crop.js","../bower_components/ngImgCrop/compile/minified/ng-img-crop.css"]},{name:"angularBootstrapNavTree",files:["../bower_components/angular-bootstrap-nav-tree/dist/abn_tree_directive.js","../bower_components/angular-bootstrap-nav-tree/dist/abn_tree.css"]},{name:"toaster",files:["../bower_components/angularjs-toaster/toaster.js","../bower_components/angularjs-toaster/toaster.css"]},{name:"textAngular",files:["../bower_components/textAngular/dist/textAngular-sanitize.min.js","../bower_components/textAngular/dist/textAngular.min.js"]},{name:"vr.directives.slider",files:["../bower_components/venturocket-angular-slider/build/angular-slider.min.js","../bower_components/venturocket-angular-slider/build/angular-slider.css"]},{name:"com.2fdevs.videogular",files:["../bower_components/videogular/videogular.min.js"]},{name:"com.2fdevs.videogular.plugins.controls",files:["../bower_components/videogular-controls/controls.min.js"]},{name:"com.2fdevs.videogular.plugins.buffering",files:["../bower_components/videogular-buffering/buffering.min.js"]},{name:"com.2fdevs.videogular.plugins.overlayplay",files:["../bower_components/videogular-overlay-play/overlay-play.min.js"]},{name:"com.2fdevs.videogular.plugins.poster",files:["../bower_components/videogular-poster/poster.min.js"]},{name:"com.2fdevs.videogular.plugins.imaads",files:["../bower_components/videogular-ima-ads/ima-ads.min.js"]},{name:"xeditable",files:["../bower_components/angular-xeditable/dist/js/xeditable.min.js","../bower_components/angular-xeditable/dist/css/xeditable.css"]},{name:"smart-table",files:["../bower_components/angular-smart-table/dist/smart-table.min.js"]}]})}]),angular.module("app").run(["$rootScope","$state","$stateParams",function(a,b,c){a.$state=b,a.$stateParams=c}]).config(["$stateProvider","$urlRouterProvider","JQ_CONFIG",function(a,b,c){b.otherwise("/app/dashboard-v1"),a.state("app",{"abstract":!0,url:"/app",templateUrl:"tpl/app/layout.html"}).state("app.blank",{url:"/blank",template:"<div>blank</div>"}).state("app.dashboard-v1",{url:"/dashboard-v1",templateUrl:"tpl/app_dashboard_v1.html",controller:"DashboardCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/dashboard/dashboard.js","js/app/dashboard/dashboard-service.js","js/app/dashboard/dashboard.css","js/app/realtime/realtime-service.js"])}]}}).state("app.servermap",{url:"/servermap",templateUrl:"tpl/app_servermap.html",controller:"ServerMapCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/servermap/servermap.js"])}]}}).state("app.realtime",{url:"/realtime",templateUrl:"tpl/app_realtime.html",controller:"RealtimeCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/realtime/realtime.js","js/app/realtime/realtime-service.js"])}]}}).state("app.transactionview",{url:"/transactionview",templateUrl:"tpl/performance/transactionview.html",controller:"TranscationViewCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/performance/transactionview.js","js/app/performance/transaction-service.js"])}]}}).state("app.transactiondetail",{url:"/transactiondetail",templateUrl:"tpl/performance/transactiondetail.html",controller:"TranscationDetailCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/performance/transactiondetail.js","js/app/performance/transaction-service.js"])}]}}).state("app.transaction",{url:"/transaction",templateUrl:"tpl/performance/transaction.html",controller:"TranscationCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/performance/transaction.js","js/app/performance/transaction-service.js"])}]}}).state("app.analysis",{url:"/analysis",templateUrl:"tpl/page_analysis.html",controller:"AnalysisCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/analysis/analysis.js"])}]}}).state("app.error",{url:"/error",templateUrl:"tpl/error/error.html",controller:"ErrorCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/error/error.js","js/app/error/error-service.js"])}]}}).state("app.errordetail",{url:"/errordetail/{id}",templateUrl:"tpl/error/errordetail.html",controller:"ErrorDetailCtrl",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/error/errordetail.js","js/app/error/error-service.js"])}]}}).state("access",{url:"/access",template:"<div ui-view ></div>"}).state("app.projects",{url:"/projects",templateUrl:"tpl/ui_projects.html",resolve:{deps:["uiLoad",function(a){return a.load(["js/app/user/projects.js"])}]}}).state("access.project",{url:"/project",templateUrl:"tpl/page_project.html",resolve:{deps:["uiLoad",function(a){return a.load(["js/app/user/projectsform.js"])}]}}).state("access.signin",{url:"/signin",templateUrl:"tpl/page_signin.html",resolve:{deps:["uiLoad",function(a){return a.load(["js/app/user/signin.js"])}]}}).state("access.signup",{url:"/signup",templateUrl:"tpl/page_signup.html",resolve:{deps:["uiLoad",function(a){return a.load(["js/app/user/signup.js"])}]}}).state("access.forgotpwd",{url:"/forgotpwd",templateUrl:"tpl/page_forgotpwd.html"}).state("access.404",{url:"/404",templateUrl:"tpl/page_404.html"}).state("app.setting",{url:"/setting",template:'<div ui-view class="fade-in-down"></div>'}).state("app.setting.general",{url:"/general",templateUrl:"tpl/setting/page_general.html",resolve:{deps:["uiLoad",function(a){return a.load("js/app/setting/general.js")}]}}).state("app.setting.keys",{url:"/keys",templateUrl:"tpl/setting/page_keys.html"}).state("app.setting.email",{url:"/email",templateUrl:"tpl/setting/page_email.html",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/setting/email.js"])}]}}).state("app.setting.collorators",{url:"/collorators",templateUrl:"tpl/setting/page_collorators.html",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/setting/collorator.js"])}]}}).state("app.quickstart",{url:"/quickstart",templateUrl:"tpl/quickstart/quickstart.html",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["bower_components/image-picker/image-picker/image-picker.min.js","bower_components/image-picker/image-picker/image-picker.css"]).then(function(){return a.load("js/app/quickstart/quickstart.js")})}]}}).state("app.android1",{url:"/android1",templateUrl:"tpl/quickstart/android1.html",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/quickstart/quickstart.js","js/app/quickstart/quickstart-android.js","js/app/quickstart/quickstart-service.js"])}]}}).state("app.android2",{url:"/android2",templateUrl:"tpl/quickstart/android2.html",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["js/app/quickstart/quickstart.js","js/app/quickstart/quickstart-android.js","js/app/quickstart/quickstart-service.js"])}]}}).state("app.java",{url:"/java",templateUrl:"tpl/document/android_docs.html",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["tpl/document/document.css"])}]}}).state("app.node",{url:"/node",templateUrl:"tpl/document/iphone_docs.html"}).state("app.rest",{url:"/rest",templateUrl:"tpl/document/rest_docs.html",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["tpl/document/document.css"])}]}}).state("app.sdkdownloads",{url:"/sdkdownloads",templateUrl:"tpl/document/sdkdownloads.html"}).state("app.videos",{url:"/videos",templateUrl:"tpl/document/youtube_docs.html",resolve:{deps:["$ocLazyLoad",function(a){return a.load(["tpl/document/document.css"])}]}}).state("app.terms",{url:"/terms",templateUrl:"tpl/terms/terms.html"}).state("app.privacy",{url:"/privacy",templateUrl:"tpl/terms/privacy.html"})}]),angular.module("app").controller("AppCtrl",["$rootScope","$scope","$translate","$localStorage","$sessionStorage","$window","$state","UserService","crypt","toaster","$q","$http",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){var b=a.navigator.userAgent||a.navigator.vendor||a.opera;return/iPhone|iPod|iPad|Silk|Android|BlackBerry|Opera Mini|IEMobile/.test(b)}function n(){h.Logout(b.user.authuser.provider),b.user.authuser={},b.user.projects={},b.user.currentproject={},b.user={},delete d.auth,delete e.currentproject,g.go("access.signin")}var o=!!navigator.userAgent.match(/MSIE/i);if(o&&angular.element(f.document.body).addClass("ie"),m(f)&&angular.element(f.document.body).addClass("smart"),b.app={name:"Harpoon",version:"1.0.0",color:{primary:"#7266ba",info:"#23b7e5",success:"#27c24c",warning:"#fad733",danger:"#f05050",light:"#e8eff0",dark:"#3a3f51",black:"#1c2b36"},settings:{themeID:1,navbarHeaderColor:"bg-black",navbarCollapseColor:"bg-white-only",asideColor:"bg-black",headerFixed:!0,asideFixed:!1,asideFolded:!1,asideDock:!1,container:!1}},angular.isDefined(d.settings)?b.app.settings=d.settings:d.settings=b.app.settings,b.$watch("app.settings",function(){b.app.settings.asideDock&&b.app.settings.asideFixed&&(b.app.settings.headerFixed=!0),d.settings=b.app.settings},!0),b.lang={isopen:!1},b.langs={en:"English",ko_KR:"Korean"},b.selectLang=b.langs[c.proposedLanguage()]||"English",b.setLang=function(a,d){b.selectLang=b.langs[a],c.use(a),b.lang.isopen=!b.lang.isopen},b.user={},b.user.authuser={},b.user.projects={},b.user.currentproject={},d.auth&&""!==d.auth.token){var p=d.auth.token,q=$("meta[name=csrf-token]").attr("content");"WEB"==d.auth.provider&&h.UserInfo(q,p).then(function(a){b.user.authuser=a.user,b.user.projects=a.projects,b.$broadcast("loadproject",a.projects)},function(a){console.log(a)}),void 0!=e.currentproject&&(b.user.currentproject=i.decrypt(e.currentproject))}a.$on("Facebook:statusChange",function(a,c){if("connected"==c.status){var e=$("meta[name=csrf-token]").attr("content");h.FacebookMe(e,c.authResponse.accessToken).then(function(a){b.user.authuser=a.user,b.user.projects=a.projects,b.$broadcast("loadproject",a.projects)},function(a){console.log(a)}),d.auth={token:c.authResponse.accessToken,provider:"FACEBOOK"},"access.signin"==g.current.name&&g.go("app.projects")}}),a.$on("GooglePlus:statusChange",function(a,c){"connected"==c.status?(q=$("meta[name=csrf-token]").attr("content"),h.GoogleMe(q,c.access_token).then(function(a){b.user.authuser=a.user,b.user.projects=a.projects,b.$broadcast("loadproject",a.projects),0==a.projects.length&&g.go("access.project")},function(a){console.log(a)}),d.auth={token:c.access_token,provider:"GOOGLE"}):"loggin"==c.status&&(q=$("meta[name=csrf-token]").attr("content"),h.GoogleMe(q,c.access_token).then(function(a){b.user.authuser=a.user,b.user.projects=a.projects,b.$broadcast("loadproject",a.projects),0==a.projects.length&&g.go("access.project")},function(a){console.log(a)}),d.auth={token:c.access_token,provider:"GOOGLE"},"access.signin"==g.current.name&&g.go("app.projects"))}),b.$watch(function(){return h.FacebookIsReady()},function(a){a&&(b.facebookReady=!0)}),b.$watch(function(){return h.GooglePlusIsReady()},function(a){a&&(b.googleplusReady=!0)}),b.Logout=n,b.$on("Logout",function(a){a.stopPropagation(),n()}),b.selectproject=function(a){b.user.projects.length>=a&&(b.user.currentproject=b.user.projects[a],e.currentproject=i.encrypt(b.user.currentproject),$socket.send("change",b.user.currentproject.applicationkey),r(b.user.currentproject.applicationkey).then(function(a){b.LatestRnQ=a}))},b.toaster={type:"note",title:"Title",text:"Message"},b.pop=function(){j.pop(b.toaster.type,b.toaster.title,b.toaster.text)},b.LatestRnQ=[];var r=function(a){var b=angular.element(document.querySelector("meta[name=csrf-token]")).context.content,c={"csrf-token":b,appid:a},d="/webhook/info",e=k.defer();return l({url:d,method:"GET",params:c,headers:{"Application-Id":a,"Content-Type":"application/x-www-form-urlencoded"}}).then(function(a){e.resolve(a.data)},function(a){e.reject({error:"Server Error"})}),e.promise};b.$watch("user.currentproject",function(){void 0!=b.user.currentproject&&void 0!=b.user.currentproject.applicationkey&&r(b.user.currentproject.applicationkey).then(function(a){b.LatestRnQ=a})}),b.clickLink=function(a){console.log(a);var c=b.LatestRnQ[a].messagetype;"Q&A"==c?g.go("app.helpcenter.qna"):g.go("app.helpcenter.review")}}]),angular.module("youtube-embed",["ng"]).service("youtubeEmbedUtils",["$window","$rootScope",function(a,b){function c(a,b){return a.indexOf(b)>-1}var d={},e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s-])([\w-]{11})(?=[^\w-]|$)(?![?=&+%\w.-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi,f=/t=(\d+)[ms]?(\d+)?s?/;return d.getIdFromURL=function(a){var b=a.replace(e,"$1");if(c(b,";")){var d=b.split(";");if(c(d[1],"%")){var f=decodeURIComponent(b.split(";")[1]);b=("http://youtube.com"+f).replace(e,"$1")}else b=d[0]}else c(b,"#")&&(b=b.split("#")[0]);return b},d.getTimeFromURL=function(a){a=a||"";var b=a.match(f);if(!b)return 0;var d=b[0],e=b[1],g=b[2];return"undefined"!=typeof g?(g=parseInt(g,10),e=parseInt(e,10)):c(d,"m")?(e=parseInt(e,10),g=0):(g=parseInt(e,10),e=0),g+60*e},function(){var a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),d.ready=!1,a.onYouTubeIframeAPIReady=function(){b.$apply(function(){d.ready=!0})},d}]).directive("youtubeVideo",["youtubeEmbedUtils",function(a){var b=1,c={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"queued"},d="youtube.player.";return{restrict:"EA",scope:{videoId:"=?",videoUrl:"=?",player:"=?",playerVars:"=?",playerHeight:"=?",playerWidth:"=?"},link:function(e,f,g){function h(){var a=Array.prototype.slice.call(arguments);e.$apply(function(){e.$emit.apply(e,a)})}function i(a){var b=c[a.data];"undefined"!=typeof b&&h(d+b,e.player,a),e.$apply(function(){e.player.currentState=b})}function j(a){h(d+"ready",e.player,a)}function k(){var a=angular.copy(e.playerVars);a.start=a.start||e.urlStartTime;var b=new YT.Player(m,{height:e.playerHeight,width:e.playerWidth,videoId:e.videoId,playerVars:a,events:{onReady:j,onStateChange:i}});return b.id=m,b}function l(){m&&e.videoId&&(e.player&&e.player.d&&"function"==typeof e.player.destroy&&e.player.destroy(),e.player=k())}e.utils=a;var m=g.playerId||f[0].id||"unique-youtube-embed-id-"+b++;f[0].id=m,e.playerHeight=e.playerHeight||390,e.playerWidth=e.playerWidth||640,e.playerVars=e.playerVars||{};var n=e.$watch(function(){return e.utils.ready&&("undefined"!=typeof e.videoUrl||"undefined"!=typeof e.videoId)},function(a){a&&(n(),"undefined"!=typeof e.videoUrl?e.$watch("videoUrl",function(a){e.videoId=e.utils.getIdFromURL(a),e.urlStartTime=e.utils.getTimeFromURL(a),l()}):e.$watch("videoId",function(){e.urlStartTime=null,l()}))});e.$watchCollection(["playerHeight","playerWidth"],function(){e.player&&e.player.setSize(e.playerWidth,e.playerHeight)}),e.$on("$destroy",function(){e.player&&e.player.destroy()})}}}]),angular.module("app").directive("errorcount",["$rootScope","$anchorScroll",function(a,b){return{restrict:"E",template:'<div id="errorcount"></div>',link:function(a,b,c){var d=0;!function(){var a=new Rubix("#errorcount",{width:"100%",height:150,title:"Error Total Count",subtitle:"",titleColor:"#0054A9",subtitleColor:"#0054A9",tooltip:{color:"#0054A9",format:{x:".0f",y:".0f"}}}),b=a.area_series({name:"Error",color:"#0054A9"}),c=function(){return{x:++d,y:0}},e=d3.range(49).map(c);e=d3.merge([e,d3.range(1).map(function(){return{x:++d,y:Math.round(10*Math.random())}})]),console.log(JSON.stringify(e)),b.addData(e)}()}}}]),angular.module("app").directive("select-focus",function(a,b){return{link:function(c,d,e){var f=b(e.uiFocus);c.$watch(f,function(b){b===!0&&a(function(){if(console.log("tet"),document.createEvent){var a=document.createEvent("MouseEvents");a.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d[0].dispatchEvent(a)}else d.fireEvent&&d[0].fireEvent("onmousedown")})}),d.bind("blur",function(){c.$apply(f.assign(c,!1))})}}}),angular.module("app").directive("pwCheck",[function(){return{require:"ngModel",link:function(a,b,c,d){var e="#"+c.pwCheck;b.add(e).on("keyup",function(){a.$apply(function(){var a=b.val()===$(e).val();d.$setValidity("pwmatch",a)})})}}}]),angular.module("app").directive("labelColor",function(){return function(a,b,c){b.css({color:c.color})}}),angular.module("app").directive("realtimechart",["$rootScope","$anchorScroll",function(a,b){return{restrict:"E",template:'<div class="row">\n    <div class="col-lg-12">\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div id="webrequest"></div>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="row">\n    <div class="col-lg-6">\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div id="tmu"></div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div id="sqm"></div>\n            </div>\n        </div>\n    </div>\n    <div class="col-lg-6">\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div id="crom"></div>\n            </div>\n        </div>\n        <div class="panel panel-default">\n            <div class="panel-body">\n                <div id="diam"></div>\n            </div>\n        </div>\n      \n    </div>\n</div>\n',link:function(a,b,c){!function(){var a=new Rubix("#webrequest",{title:"Web Request",subtitle:"Request Count",width:"100%",height:200,tooltip:{color:"#0054A9",format:{x:".0f",y:".0f"}}});a.callAxis();var b=a.line_series({name:"Series A",color:"#0054A9"}),c=0,d=100,e=function(){return{x:++c,y:d=~~Math.max(10,Math.min(40,d+10*(Math.random()-.5)))}},f=d3.range(50).map(e);b.addData(f),this.interval=setInterval(function(){b.addPoint(e(),!0)},3e3)}(),function(){var a=new Rubix("#tmu",{title:"Active Users",subtitle:"Active Users",width:"100%",height:200,tooltip:{color:"#0054A9",format:{x:".0f",y:".0f"}}});a.callAxis();var b=a.line_series({name:"Series A",color:"#0054A9"}),c=[{x:1,y:1},{x:2,y:1},{x:3,y:1},{x:4,y:1},{x:5,y:1},{x:6,y:1},{x:7,y:1},{x:8,y:1},{x:9,y:2},{x:10,y:2}];b.addData(c)}(),function(){var a=new Rubix("#crom",{title:"Active Service",subtitle:"Active Service",width:"100%",height:200,tooltip:{color:"#0054A9",format:{x:".0f",y:".0f"}}});a.callAxis();var b=a.line_series({name:"Series A",color:"#0054A9"}),c=[{x:1,y:0},{x:2,y:1},{x:3,y:1},{x:4,y:1},{x:5,y:1},{x:6,y:1},{x:7,y:1},{x:8,y:1},{x:9,y:0},{x:10,y:0}];b.addData(c)}(),function(){var a=function(a,b,c,d){var e=new Rubix(a,{height:200,title:d,titleColor:c,axis:{x:{tickCount:4}},tooltip:{color:c,format:{x:".0f",y:".0f"}},show_markers:!0}),f=e.line_series({name:b,color:c,marker:b}),g=0,h=100,i=function(){return{x:++g,y:h=~~Math.max(10,Math.min(30,h+10*(Math.random()-.5)))}},j=d3.range(10).map(i);f.addData(j),this.interval=setInterval(function(){f.addPoint(i(),!0)},3e3)};a("#sqm","square","#DA532C","Heap Memory"),a("#diam","diamond","#00ABA9","TPS")}()}}}]).directive("rubixchart",["$rootScope","$anchorScroll",function(a,b){return{restrict:"E",template:' <div id="txcount"></div>',link:function(a,b,c){!function(){var a=new Rubix("#txcount",{title:"Tx Count",subtitle:"Transaction Count",width:"100%",height:200,tooltip:{color:"#0054A9",format:{x:".0f",y:".0f"}}});a.callAxis();var b=a.line_series({name:"Series A",color:"#0054A9"}),c=[{x:1,y:2},{x:2,y:1},{x:3,y:1},{x:4,y:1},{x:5,y:0},{x:6,y:1},{x:7,y:1},{x:8,y:1},{x:9,y:0},{x:10,y:0}];b.addData(c)}()}}}]),angular.module("app").directive("sankey",["$animate",function(a){return{restrict:"E",template:'<p id="chart">',link:function(a,b,c){function d(a){d3.select(this).attr("transform","translate("+a.x+","+(a.y=Math.max(0,Math.min(i-a.dy,d3.event.y)))+")"),n.relayout(),q.attr("d",o)}var e={links:[{source:"/1/GameObject",target:"JDBC",value:2},{source:"/1/LiveObject",target:"JDBC",value:2},{source:"JDBC",target:"MySQL",value:2}],nodes:[{name:"/1/GameObject"},{name:"/1/LiveObject"},{name:"JDBC"},{name:"MySQL"}]},f="Widgets",g={top:10,right:10,bottom:10,left:10},h=1e3-g.left-g.right,i=300-g.top-g.bottom,j=d3.format(",.0f"),k=function(a){return j(a)+" "+f},l=d3.scale.category20(),m=d3.select("#chart").append("svg").attr("width",h+g.left+g.right).attr("height",i+g.top+g.bottom).append("g").attr("transform","translate("+g.left+","+g.top+")"),n=d3.sankey().nodeWidth(36).nodePadding(10).size([h,i]),o=n.link(),p={};e.nodes.forEach(function(a){p[a.name]=a}),e.links=e.links.map(function(a){return{source:p[a.source],target:p[a.target],value:a.value}}),n.nodes(e.nodes).links(e.links).layout(32);var q=m.append("g").selectAll(".link").data(e.links).enter().append("path").attr("class","link").attr("d",o).style("stroke-width",function(a){return Math.max(1,a.dy)}).sort(function(a,b){return b.dy-a.dy});q.append("title").text(function(a){return a.source.name+" → "+a.target.name+"\n"+k(a.value)});var r=m.append("g").selectAll(".node").data(e.nodes).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"}).call(d3.behavior.drag().origin(function(a){return a}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",d));r.append("rect").attr("height",function(a){return a.dy}).attr("width",n.nodeWidth()).style("fill",function(a){return a.color=l(a.name.replace(/ .*/,""))}).style("stroke",function(a){return d3.rgb(a.color).darker(2)}).append("title").text(function(a){return a.name+"\n"+k(a.value)}),r.append("text").attr("x",-6).attr("y",function(a){return a.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(a){return a.name}).filter(function(a){return a.x<h/2}).attr("x",6+n.nodeWidth()).attr("text-anchor","start")}}}]),angular.module("app").directive("servermap",["$rootScope","$anchorScroll",function(a,b){return{restrict:"E",template:'<div id="servermap" style="position:fixed;top:120px;left:220px;right:0;bottom:0"></div>',link:function(a,b,c){var d,e;d={applicationMapData:{nodeDataArray:[{key:"FRONT-WEB^USER",applicationName:"USER",category:"USER",fig:"Ellipse",serviceTypeCode:"2",terminal:"false",isWas:!1,infoTable:[{k:"TPS",v:"100,000"},{k:"Calls",v:"300,000"},{k:"Load",v:"50%"}],histogram:{"1s":634,"3s":5,"5s":0,Slow:0,Error:203},agentHistogram:{},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],agentTimeSeriesHistogram:{},serverList:{}},{key:"MySQL^MYSQL",applicationName:"MySQL (DATABASE)",category:"MYSQL",fig:"RoundedRectangle",serviceTypeCode:"2101",terminal:"true",isWas:!1,infoTable:[{k:"TPS",v:"2,000,000"},{k:"Load",v:"90%"}],histogram:{"1s":867,"3s":0,"5s":0,Slow:0,Error:0},agentHistogram:{"10.25.141.69:3306":{"1s":867,"3s":0,"5s":0,Slow:0,Error:0}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],agentTimeSeriesHistogram:{"10.25.141.69:3306":[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},serverList:{"10.25.141.69":{name:"10.25.141.69",status:null,instanceList:{"10.25.141.69:3306":{name:"10.25.141.69:3306",category:"MYSQL_EXECUTE_QUERY",agentInfo:null,hasInspector:!1}}}}},{key:"BACKEND-API^TOMCAT",applicationName:"BACKEND-API",category:"TOMCAT",fig:"RoundedRectangle",serviceTypeCode:"1010",terminal:"false",isWas:!0,histogram:{"1s":59,"3s":0,"5s":0,Slow:0,Error:249},agentHistogram:{ApiWAS1:{"1s":59,"3s":0,"5s":0,Slow:0,Error:249}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],agentTimeSeriesHistogram:{ApiWAS1:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},serverList:{"dev-pinpoint-workload003.ncl.nhnsystem.com":{name:"dev-pinpoint-workload003.ncl.nhnsystem.com",status:null,instanceList:{ApiWAS1:{name:"ApiWAS1",category:"TOMCAT",agentInfo:{hostname:"dev-pinpoint-workload003.ncl.nhnsystem.com",ip:"10.101.55.85",ports:"",agentId:"ApiWAS1",applicationName:"BACKEND-API",category:"TOMCAT",pid:20531,version:"1.0.2-SNAPSHOT",startTime:1396492780257,endTimeStamp:0,endStatus:0},hasInspector:!0}}}}},{key:"FRONT-WEB^TOMCAT",applicationName:"FRONT-WEB",category:"TOMCAT",fig:"RoundedRectangle",serviceTypeCode:"1010",terminal:"false",isWas:!0,histogram:{"1s":634,"3s":5,"5s":0,Slow:0,Error:203},agentHistogram:{FrontWAS2:{"1s":333,"3s":2,"5s":0,Slow:0,Error:106},FrontWAS1:{"1s":301,"3s":3,"5s":0,Slow:0,Error:97}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],agentTimeSeriesHistogram:{FrontWAS1:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],FrontWAS2:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},serverList:{"dev-pinpoint-workload001.ncl.nhnsystem.com":{name:"dev-pinpoint-workload001.ncl.nhnsystem.com",status:null,instanceList:{FrontWAS1:{name:"FrontWAS1",category:"TOMCAT",agentInfo:{hostname:"dev-pinpoint-workload001.ncl.nhnsystem.com",ip:"10.101.55.177",ports:"",agentId:"FrontWAS1",applicationName:"FRONT-WEB",category:"TOMCAT",pid:17005,version:"1.0.2-SNAPSHOT",startTime:1396492730774,endTimeStamp:0,endStatus:0},hasInspector:!0},FrontWAS2:{name:"FrontWAS2",category:"TOMCAT",agentInfo:{hostname:"dev-pinpoint-workload001.ncl.nhnsystem.com",ip:"10.101.55.177",ports:"",agentId:"FrontWAS2",applicationName:"FRONT-WEB",category:"TOMCAT",pid:16962,version:"1.0.2-SNAPSHOT",startTime:1396492726314,endTimeStamp:0,endStatus:0},hasInspector:!0}}}}},{id:"MEMCACHED^MEMCACHED",key:"MEMCACHED^MEMCACHED",applicationName:"MEMCACHED",category:"MEMCACHED",fig:"Rectangle",serviceTypeCode:"8050",terminal:"true",isWas:!1,histogram:{"100ms":340,"300ms":0,"500ms":0,Slow:0,Error:0},agentHistogram:{"10.25.149.80:11211":{"100ms":103,"300ms":0,"500ms":0,Slow:0,Error:0},"10.25.149.79:11211":{"100ms":116,"300ms":0,"500ms":0,Slow:0,Error:0},"10.25.149.80:11244":{"100ms":121,"300ms":0,"500ms":0,Slow:0,Error:0}},timeSeriesHistogram:[{key:"100ms",values:[]},{key:"300ms",values:[]},{key:"500ms",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],agentTimeSeriesHistogram:{"10.25.149.79:11211":[{key:"100ms",values:[]},{key:"300ms",values:[]},{key:"500ms",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],"10.25.149.80:11211":[{key:"100ms",values:[]},{key:"300ms",values:[]},{key:"500ms",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],"10.25.149.80:11244":[{key:"100ms",values:[]},{key:"300ms",values:[]},{key:"500ms",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},serverList:{"10.25.149.79":{name:"10.25.149.79",status:null,instanceList:{"10.25.149.79:11211":{name:"10.25.149.79:11211",category:"MEMCACHED",agentInfo:null,hasInspector:!1}}},"10.25.149.80":{name:"10.25.149.80",status:null,instanceList:{"10.25.149.80:11244":{name:"10.25.149.80:11244",category:"MEMCACHED",agentInfo:null,hasInspector:!1},"10.25.149.80:11211":{name:"10.25.149.80:11211",category:"MEMCACHED",agentInfo:null,hasInspector:!1}}}}},{id:"BACKEND-WEB^USER",key:"BACKEND-WEB^USER",applicationName:"USER",category:"USER",fig:"Ellipse",serviceTypeCode:"2",terminal:"false",isWas:!1,histogram:{"1s":251,"3s":0,"5s":0,Slow:0,
Error:0},agentHistogram:{},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],agentTimeSeriesHistogram:{},serverList:{}},{id:"BACKEND-WEB^TOMCAT",key:"BACKEND-WEB^TOMCAT",applicationName:"BACKEND-WEB",category:"TOMCAT",fig:"RoundedRectangle",serviceTypeCode:"1010",terminal:"false",isWas:!0,histogram:{"1s":513,"3s":0,"5s":0,Slow:0,Error:46},agentHistogram:{BackendWAS1:{"1s":513,"3s":0,"5s":0,Slow:0,Error:46}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],agentTimeSeriesHistogram:{BackendWAS1:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},serverList:{"dev-pinpoint-workload002.ncl.nhnsystem.com":{name:"dev-pinpoint-workload002.ncl.nhnsystem.com",status:null,instanceList:{BackendWAS1:{name:"BackendWAS1",category:"TOMCAT",agentInfo:{hostname:"dev-pinpoint-workload002.ncl.nhnsystem.com",ip:"10.101.52.71",ports:"",agentId:"BackendWAS1",applicationName:"BACKEND-WEB",category:"TOMCAT",pid:18010,version:"1.0.2-SNAPSHOT",startTime:1396492762904,endTimeStamp:0,endStatus:0},hasInspector:!0}}}}}],linkDataArray:[{id:"BACKEND-WEB^USER~BACKEND-WEB^TOMCAT",from:"BACKEND-WEB^USER",to:"BACKEND-WEB^TOMCAT",sourceInfo:{applicationName:"BACKEND-WEB",category:"USER",serviceTypeCode:2,isWas:!1},targetInfo:{applicationName:"BACKEND-WEB",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},filterApplicationName:"BACKEND-WEB",filterApplicationServiceTypeCode:1010,totalCount:251,error:0,slow:0,histogram:{"1s":251,"3s":0,"5s":0,Slow:0,Error:0},sourceHistogram:{},targetHistogram:{},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],sourceTimeSeriesHistogram:{},category:"default"},{id:"FRONT-WEB^USER~FRONT-WEB^TOMCAT",from:"FRONT-WEB^USER",to:"FRONT-WEB^TOMCAT",sourceInfo:{applicationName:"FRONT-WEB",category:"USER",serviceTypeCode:2,isWas:!1},targetInfo:{applicationName:"FRONT-WEB",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},filterApplicationName:"FRONT-WEB",filterApplicationServiceTypeCode:1010,totalCount:842,error:203,slow:0,histogram:{"1s":634,"3s":5,"5s":0,Slow:0,Error:203},sourceHistogram:{},targetHistogram:{},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],sourceTimeSeriesHistogram:{},category:"default"},{id:"BACKEND-API^TOMCAT~MySQL^MYSQL",from:"BACKEND-API^TOMCAT",to:"MySQL^MYSQL",sourceInfo:{applicationName:"BACKEND-API",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},targetInfo:{applicationName:"MySQL",category:"MYSQL",serviceTypeCode:2101,isWas:!1},filterApplicationName:"BACKEND-API",filterApplicationServiceTypeCode:1010,totalCount:308,error:0,slow:0,histogram:{"1s":308,"3s":0,"5s":0,Slow:0,Error:0},sourceHistogram:{ApiWAS1:{"1s":308,"3s":0,"5s":0,Slow:0,Error:0}},targetHistogram:{"10.25.141.69:3306":{"1s":308,"3s":0,"5s":0,Slow:0,Error:0}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],sourceTimeSeriesHistogram:{ApiWAS1:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},category:"default"},{id:"FRONT-WEB^TOMCAT~MEMCACHED^MEMCACHED",from:"FRONT-WEB^TOMCAT",to:"MEMCACHED^MEMCACHED",sourceInfo:{applicationName:"FRONT-WEB",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},targetInfo:{applicationName:"MEMCACHED",category:"MEMCACHED",serviceTypeCode:8050,isWas:!1},filterApplicationName:"FRONT-WEB",filterApplicationServiceTypeCode:1010,totalCount:340,error:0,slow:0,histogram:{"100ms":340,"300ms":0,"500ms":0,Slow:0,Error:0},sourceHistogram:{FrontWAS2:{"100ms":192,"300ms":0,"500ms":0,Slow:0,Error:0},FrontWAS1:{"100ms":148,"300ms":0,"500ms":0,Slow:0,Error:0}},targetHistogram:{"10.25.149.80:11244":{"100ms":121,"300ms":0,"500ms":0,Slow:0,Error:0},"10.25.149.79:11211":{"100ms":116,"300ms":0,"500ms":0,Slow:0,Error:0},"10.25.149.80:11211":{"100ms":103,"300ms":0,"500ms":0,Slow:0,Error:0}},timeSeriesHistogram:[{key:"100ms",values:[]},{key:"300ms",values:[]},{key:"500ms",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],sourceTimeSeriesHistogram:{FrontWAS1:[{key:"100ms",values:[]},{key:"300ms",values:[]},{key:"500ms",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],FrontWAS2:[{key:"100ms",values:[]},{key:"300ms",values:[]},{key:"500ms",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},category:"default"},{id:"FRONT-WEB^TOMCAT~BACKEND-WEB^TOMCAT",from:"FRONT-WEB^TOMCAT",to:"BACKEND-WEB^TOMCAT",sourceInfo:{applicationName:"FRONT-WEB",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},targetInfo:{applicationName:"BACKEND-WEB",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},filterApplicationName:"FRONT-WEB",filterApplicationServiceTypeCode:1010,filterTargetRpcList:[{rpc:"dev-pinpoint-workload002.ncl:8080",rpcServiceTypeCode:9050}],totalCount:308,error:0,slow:0,histogram:{"1s":308,"3s":0,"5s":0,Slow:0,Error:0},sourceHistogram:{FrontWAS2:{"1s":174,"3s":0,"5s":0,Slow:0,Error:0},FrontWAS1:{"1s":134,"3s":0,"5s":0,Slow:0,Error:0}},targetHistogram:{"dev-pinpoint-workload002.ncl:8080":{"1s":308,"3s":0,"5s":0,Slow:0,Error:0}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],sourceTimeSeriesHistogram:{FrontWAS1:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],FrontWAS2:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},category:"default"},{id:"BACKEND-WEB^TOMCAT~BACKEND-API^TOMCAT",from:"BACKEND-WEB^TOMCAT",to:"BACKEND-API^TOMCAT",sourceInfo:{applicationName:"BACKEND-WEB",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},targetInfo:{applicationName:"BACKEND-API",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},filterApplicationName:"BACKEND-WEB",filterApplicationServiceTypeCode:1010,filterTargetRpcList:[{rpc:"dev-pinpoint-workload003.ncl:8080",rpcServiceTypeCode:9050}],totalCount:57,error:46,slow:0,histogram:{"1s":11,"3s":0,"5s":0,Slow:0,Error:46},sourceHistogram:{BackendWAS1:{"1s":11,"3s":0,"5s":0,Slow:0,Error:46}},targetHistogram:{"dev-pinpoint-workload003.ncl:8080":{"1s":11,"3s":0,"5s":0,Slow:0,Error:46}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],sourceTimeSeriesHistogram:{BackendWAS1:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},category:"default"},{id:"BACKEND-WEB^TOMCAT~MySQL^MYSQL",from:"BACKEND-WEB^TOMCAT",to:"MySQL^MYSQL",sourceInfo:{applicationName:"BACKEND-WEB",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},targetInfo:{applicationName:"MySQL",category:"MYSQL",serviceTypeCode:2101,isWas:!1},filterApplicationName:"BACKEND-WEB",filterApplicationServiceTypeCode:1010,totalCount:559,error:0,slow:0,histogram:{"1s":559,"3s":0,"5s":0,Slow:0,Error:0},sourceHistogram:{BackendWAS1:{"1s":559,"3s":0,"5s":0,Slow:0,Error:0}},targetHistogram:{"10.25.141.69:3306":{"1s":559,"3s":0,"5s":0,Slow:0,Error:0}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],sourceTimeSeriesHistogram:{BackendWAS1:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},category:"default"},{id:"FRONT-WEB^TOMCAT~BACKEND-API^TOMCAT",from:"FRONT-WEB^TOMCAT",to:"BACKEND-API^TOMCAT",isFiltered:!0,sourceInfo:{applicationName:"FRONT-WEB",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},targetInfo:{applicationName:"BACKEND-API",category:"TOMCAT",serviceTypeCode:1010,isWas:!0},filterApplicationName:"FRONT-WEB",filterApplicationServiceTypeCode:1010,filterTargetRpcList:[{rpc:"dev-pinpoint-workload003.ncl:8080",rpcServiceTypeCode:9050}],totalCount:251,error:203,slow:0,histogram:{"1s":48,"3s":0,"5s":0,Slow:0,Error:203},sourceHistogram:{FrontWAS2:{"1s":26,"3s":0,"5s":0,Slow:0,Error:106},FrontWAS1:{"1s":22,"3s":0,"5s":0,Slow:0,Error:97}},targetHistogram:{"dev-pinpoint-workload003.ncl:8080":{"1s":48,"3s":0,"5s":0,Slow:0,Error:203}},timeSeriesHistogram:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],sourceTimeSeriesHistogram:{FrontWAS1:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}],FrontWAS2:[{key:"1s",values:[]},{key:"3s",values:[]},{key:"5s",values:[]},{key:"Slow",values:[]},{key:"Error",values:[]}]},category:"default"}]}};e={sContainerId:"servermap",sImageDir:"/img/servermap/",htLinkType:{sRouting:"Normal",sCurve:"JumpGap"},fOnNodeClicked:function(a,b){console.log("test")}},oServerMap=new ServerMap(e),oServerMap.load(d.applicationMapData)}}}]),angular.module("app").directive("setNgAnimate",["$animate",function(a){return{link:function(b,c,d){b.$watch(function(){return b.$eval(d.setNgAnimate,b)},function(b,d){a.enabled(!!b,c)})}}}]),angular.module("app").directive("transcationchart",["$rootScope","$anchorScroll","$state",function(a,b,c){return{restrict:"E",template:'<div id="transcationchart"></div>',link:function(a,b,d){!function(){var a=new Rubix("#transcationchart",{title:"Transcation Chart View",titleColor:"steelblue",subtitleColor:"steelblue",height:500,tooltip:{color:"steelblue",format:{x:".0f",y:".0f"}},show_markers:!0}),b=a.line_series({name:"Transcation",color:"steelblue",marker:"circle",scatter:!0}),c=1,d=d3.range(333).map(function(){return{x:++c,y:Math.round(40*Math.random())}});d=d3.merge([d,d3.range(333).map(function(){return{x:++c,y:Math.round(40*Math.random())}})]),d[0]={x:0,y:0},d.push({x:0,y:200}),b.addData(d)}(),$("#transcationchart").dragToSelect({selectables:"li",onHide:function(a){a.hide(),c.go("app.transactiondetail"),console.log(a)}})}}}]),angular.module("app").directive("uiButterbar",["$rootScope","$anchorScroll",function(a,b){return{restrict:"AC",template:'<span class="bar"></span>',link:function(a,c,d){c.addClass("butterbar hide"),a.$on("$stateChangeStart",function(a){b(),c.removeClass("hide").addClass("active")}),a.$on("$stateChangeSuccess",function(a,b,d,e){a.targetScope.$watch("$viewContentLoaded",function(){c.addClass("hide").removeClass("active")})})}}}]),angular.module("app").directive("uiFocus",function(a,b){return{link:function(c,d,e){var f=b(e.uiFocus);c.$watch(f,function(b){b===!0&&a(function(){d[0].focus()})}),d.bind("blur",function(){c.$apply(f.assign(c,!1))})}}}),angular.module("app").directive("uiFullscreen",["uiLoad","JQ_CONFIG","$document","$window",function(a,b,c,d){return{restrict:"AC",template:'<i class="fa fa-expand fa-fw text"></i><i class="fa fa-compress fa-fw text-active"></i>',link:function(d,e,f){e.addClass("hide"),a.load(b.screenfull).then(function(){screenfull.enabled&&!navigator.userAgent.match(/Trident.*rv:11\./)&&e.removeClass("hide"),e.on("click",function(){var a;f.target&&(a=$(f.target)[0]),screenfull.toggle(a)}),c.on(screenfull.raw.fullscreenchange,function(){screenfull.isFullscreen?e.addClass("active"):e.removeClass("active")})})}}}]),angular.module("ui.jq",["ui.load"]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","JQ_CONFIG","uiLoad","$timeout",function(a,b,c,d){return{restrict:"A",compile:function(e,f){if(!angular.isFunction(e[f.uiJq])&&!b[f.uiJq])throw new Error('ui-jq: The "'+f.uiJq+'" function does not exist');var g=a&&a[f.uiJq];return function(a,e,f){function h(){var b=[];return f.uiOptions?(b=a.$eval("["+f.uiOptions+"]"),angular.isObject(g)&&angular.isObject(b[0])&&(b[0]=angular.extend({},g,b[0]))):g&&(b=[g]),b}function i(){d(function(){e[f.uiJq].apply(e,h())},0,!1)}function j(){f.uiRefresh&&a.$watch(f.uiRefresh,function(){i()})}f.ngModel&&e.is("select,input,textarea")&&e.bind("change",function(){e.trigger("input")}),b[f.uiJq]?c.load(b[f.uiJq]).then(function(){i(),j()})["catch"](function(){}):(i(),j())}}}}]),angular.module("app").directive("uiModule",["MODULE_CONFIG","uiLoad","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=d.contents().clone();return function(d,e,g){e.contents().remove(),b.load(a[g.uiModule]).then(function(){c(f)(d,function(a,b){e.append(a)})})}}}}]),angular.module("app").directive("uiNav",["$timeout",function(a){return{restrict:"AC",link:function(a,b,c){var d,e=$(window),f=768,g=$(".app-aside"),h=".dropdown-backdrop";b.on("click","a",function(a){d&&d.trigger("mouseleave.nav");var b=$(this);b.parent().siblings(".active").toggleClass("active"),b.next().is("ul")&&b.parent().toggleClass("active")&&a.preventDefault(),b.next().is("ul")||e.width()<f&&$(".app-aside").removeClass("show off-screen")}),b.on("mouseenter","a",function(a){if(d&&d.trigger("mouseleave.nav"),$("> .nav",g).remove(),!(!$(".app-aside-fixed.app-aside-folded").length||e.width()<f||$(".app-aside-dock").length)){var b,c=$(a.target),i=$(window).height(),j=50,k=150;!c.is("a")&&(c=c.closest("a")),c.next().is("ul")&&(d=c.next(),c.parent().addClass("active"),b=c.parent().position().top+j,d.css("top",b),b+d.height()>i&&d.css("bottom",0),b+k>i&&d.css("bottom",i-b-j).css("top","auto"),d.appendTo(g),d.on("mouseleave.nav",function(a){$(h).remove(),d.appendTo(c.parent()),d.off("mouseleave.nav").css("top","auto").css("bottom","auto"),c.parent().removeClass("active")}),$(".smart").length&&$('<div class="dropdown-backdrop"/>').insertAfter(".app-aside").on("click",function(a){a&&a.trigger("mouseleave.nav")}))}}),g.on("mouseleave",function(a){d&&d.trigger("mouseleave.nav"),$("> .nav",g).remove()})}}}]),angular.module("app").directive("uiScrollTo",["$location","$anchorScroll",function(a,b){return{restrict:"AC",link:function(c,d,e){d.on("click",function(c){a.hash(e.uiScrollTo),b()})}}}]),angular.module("app").directive("uiShift",["$timeout",function(a){return{restrict:"A",link:function(b,c,d){function e(){a(function(){var a=d.uiShift,b=d.target;h.hasClass("in")||h[a](b).addClass("in")})}function f(){g&&g.prepend(c),!g&&h.insertAfter(j),h.removeClass("in")}var g,h=$(c),i=$(window),j=h.prev(),k=i.width();!j.length&&(g=h.parent()),768>k&&e()||f(),i.resize(function(){k!==i.width()&&a(function(){i.width()<768&&e()||f(),k=i.width()})})}}}]),angular.module("app").directive("uiToggleClass",["$timeout","$document",function(a,b){return{restrict:"AC",link:function(a,b,c){b.on("click",function(a){function d(a,b){for(var c=new RegExp("\\s"+a.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g"),d=" "+$(b)[0].className+" ";c.test(d);)d=d.replace(c," ");$(b)[0].className=$.trim(d)}a.preventDefault();var e=c.uiToggleClass.split(","),f=c.target&&c.target.split(",")||Array(b),g=0;angular.forEach(e,function(a){var b=f[f.length&&g];-1!==a.indexOf("*")&&d(a,b),$(b).toggleClass(a),g++}),$(b).toggleClass("active")})}}}]),angular.module("appservices",[]).factory("safeApply",[function(){return function(a,b){var c=a.$root.$$phase;"$apply"==c||"$digest"==c?b&&"function"==typeof b&&b():b&&a.$apply(b)}}]).provider("crypt",[function(){var a="";this.setSecret=function(b){a=b},this.$get=function(){var b=a;return{encrypt:function(a){var c=JSON.stringify(a);return CryptoJS.TripleDES.encrypt(c,b).toString()},decrypt:function(a){var c=CryptoJS.TripleDES.decrypt(a,b);return JSON.parse(c.toString(CryptoJS.enc.Utf8))}}}}]),angular.module("ui.load",[]).service("uiLoad",["$document","$q","$timeout",function(a,b,c){var d=[],e=!1,f=b.defer();this.load=function(a){a=angular.isArray(a)?a:a.split(/\s+/);var b=this;return e||(e=f.promise),angular.forEach(a,function(a){e=e.then(function(){return a.indexOf(".css")>=0?b.loadCSS(a):b.loadScript(a)})}),f.resolve(),e},this.loadScript=function(e){if(d[e])return d[e].promise;var f=b.defer(),g=a[0].createElement("script");return g.src=e,g.onload=function(a){c(function(){f.resolve(a)})},g.onerror=function(a){c(function(){f.reject(a)})},a[0].body.appendChild(g),d[e]=f,f.promise},this.loadCSS=function(e){if(d[e])return d[e].promise;var f=b.defer(),g=a[0].createElement("link");return g.rel="stylesheet",g.type="text/css",g.href=e,g.onload=function(a){c(function(){f.resolve(a)})},g.onerror=function(a){c(function(){f.reject(a)})},a[0].head.appendChild(g),d[e]=f,f.promise}}]),angular.module("app").filter("fromNow",function(){return function(a){return moment(a).fromNow()}}),angular.module("app").filter("bytes",function(){return function(a,b){if(isNaN(parseFloat(a))||!isFinite(a))return"-";"undefined"==typeof b&&(b=1);var c=["bytes","kB","MB","GB","TB","PB"],d=Math.floor(Math.log(a)/Math.log(1024));return d==-(1/0)&&(d=0),(a/Math.pow(1024,Math.floor(d))).toFixed(b)+" "+c[d]}}),angular.module("app").filter("percentage",["$filter",function(a){return function(b,c){return a("number")(100*b,c)+"%"}}]),angular.module("app").filter("reverse",function(){return function(a){return a.slice().reverse()}}),app.controller("TypeaheadDemoCtrl",["$scope","$http",function(a,b){a.selected=void 0,a.states=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Dakota","North Carolina","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],a.getLocation=function(a){return b.get("http://maps.googleapis.com/maps/api/geocode/json",{params:{address:a,sensor:!1}}).then(function(a){var b=[];return angular.forEach(a.data.results,function(a){b.push(a.formatted_address)}),b})}}]);